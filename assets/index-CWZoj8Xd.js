var p9e=Object.defineProperty;var m9e=(e,t,n)=>t in e?p9e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var jt=(e,t,n)=>m9e(e,typeof t!="symbol"?t+"":t,n);function Rbe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Am(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _m(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var IB={exports:{}},HC={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Voe;function g9e(){if(Voe)return HC;Voe=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:a,ref:i!==void 0?i:null,props:s}}return HC.Fragment=t,HC.jsx=n,HC.jsxs=n,HC}var Woe;function y9e(){return Woe||(Woe=1,IB.exports=g9e()),IB.exports}var W=y9e(),OB={exports:{}},tn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hoe;function b9e(){if(Hoe)return tn;Hoe=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(z){return z===null||typeof z!="object"?null:(z=f&&z[f]||z["@@iterator"],typeof z=="function"?z:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function b(z,Y,Z){this.props=z,this.context=Y,this.refs=g,this.updater=Z||h}b.prototype.isReactComponent={},b.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function x(){}x.prototype=b.prototype;function w(z,Y,Z){this.props=z,this.context=Y,this.refs=g,this.updater=Z||h}var C=w.prototype=new x;C.constructor=w,m(C,b.prototype),C.isPureReactComponent=!0;var S=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function k(z,Y,Z,Q,se,re){return Z=re.ref,{$$typeof:e,type:z,key:Y,ref:Z!==void 0?Z:null,props:re}}function N(z,Y){return k(z.type,Y,void 0,void 0,void 0,z.props)}function I(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function T(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Z){return Y[Z]})}var D=/\/+/g;function L(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?T(""+z.key):Y.toString(36)}function P(){}function M(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(P,P):(z.status="pending",z.then(function(Y){z.status==="pending"&&(z.status="fulfilled",z.value=Y)},function(Y){z.status==="pending"&&(z.status="rejected",z.reason=Y)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function F(z,Y,Z,Q,se){var re=typeof z;(re==="undefined"||re==="boolean")&&(z=null);var de=!1;if(z===null)de=!0;else switch(re){case"bigint":case"string":case"number":de=!0;break;case"object":switch(z.$$typeof){case e:case t:de=!0;break;case c:return de=z._init,F(de(z._payload),Y,Z,Q,se)}}if(de)return se=se(z),de=Q===""?"."+L(z,0):Q,S(se)?(Z="",de!=null&&(Z=de.replace(D,"$&/")+"/"),F(se,Y,Z,"",function(me){return me})):se!=null&&(I(se)&&(se=N(se,Z+(se.key==null||z&&z.key===se.key?"":(""+se.key).replace(D,"$&/")+"/")+de)),Y.push(se)),1;de=0;var Oe=Q===""?".":Q+":";if(S(z))for(var Le=0;Le<z.length;Le++)Q=z[Le],re=Oe+L(Q,Le),de+=F(Q,Y,Z,re,se);else if(Le=d(z),typeof Le=="function")for(z=Le.call(z),Le=0;!(Q=z.next()).done;)Q=Q.value,re=Oe+L(Q,Le++),de+=F(Q,Y,Z,re,se);else if(re==="object"){if(typeof z.then=="function")return F(M(z),Y,Z,Q,se);throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return de}function R(z,Y,Z){if(z==null)return z;var Q=[],se=0;return F(z,Q,"","",function(re){return Y.call(Z,re,se++)}),Q}function j(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(Z){(z._status===0||z._status===-1)&&(z._status=1,z._result=Z)},function(Z){(z._status===0||z._status===-1)&&(z._status=2,z._result=Z)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return z._result.default;throw z._result}var H=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function G(){}return tn.Children={map:R,forEach:function(z,Y,Z){R(z,function(){Y.apply(this,arguments)},Z)},count:function(z){var Y=0;return R(z,function(){Y++}),Y},toArray:function(z){return R(z,function(Y){return Y})||[]},only:function(z){if(!I(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},tn.Component=b,tn.Fragment=n,tn.Profiler=i,tn.PureComponent=w,tn.StrictMode=r,tn.Suspense=l,tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,tn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return E.H.useMemoCache(z)}},tn.cache=function(z){return function(){return z.apply(null,arguments)}},tn.cloneElement=function(z,Y,Z){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Q=m({},z.props),se=z.key,re=void 0;if(Y!=null)for(de in Y.ref!==void 0&&(re=void 0),Y.key!==void 0&&(se=""+Y.key),Y)!A.call(Y,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Y.ref===void 0||(Q[de]=Y[de]);var de=arguments.length-2;if(de===1)Q.children=Z;else if(1<de){for(var Oe=Array(de),Le=0;Le<de;Le++)Oe[Le]=arguments[Le+2];Q.children=Oe}return k(z.type,se,void 0,void 0,re,Q)},tn.createContext=function(z){return z={$$typeof:a,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},tn.createElement=function(z,Y,Z){var Q,se={},re=null;if(Y!=null)for(Q in Y.key!==void 0&&(re=""+Y.key),Y)A.call(Y,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=Y[Q]);var de=arguments.length-2;if(de===1)se.children=Z;else if(1<de){for(var Oe=Array(de),Le=0;Le<de;Le++)Oe[Le]=arguments[Le+2];se.children=Oe}if(z&&z.defaultProps)for(Q in de=z.defaultProps,de)se[Q]===void 0&&(se[Q]=de[Q]);return k(z,re,void 0,void 0,null,se)},tn.createRef=function(){return{current:null}},tn.forwardRef=function(z){return{$$typeof:o,render:z}},tn.isValidElement=I,tn.lazy=function(z){return{$$typeof:c,_payload:{_status:-1,_result:z},_init:j}},tn.memo=function(z,Y){return{$$typeof:u,type:z,compare:Y===void 0?null:Y}},tn.startTransition=function(z){var Y=E.T,Z={};E.T=Z;try{var Q=z(),se=E.S;se!==null&&se(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(G,H)}catch(re){H(re)}finally{E.T=Y}},tn.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},tn.use=function(z){return E.H.use(z)},tn.useActionState=function(z,Y,Z){return E.H.useActionState(z,Y,Z)},tn.useCallback=function(z,Y){return E.H.useCallback(z,Y)},tn.useContext=function(z){return E.H.useContext(z)},tn.useDebugValue=function(){},tn.useDeferredValue=function(z,Y){return E.H.useDeferredValue(z,Y)},tn.useEffect=function(z,Y,Z){var Q=E.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(z,Y)},tn.useId=function(){return E.H.useId()},tn.useImperativeHandle=function(z,Y,Z){return E.H.useImperativeHandle(z,Y,Z)},tn.useInsertionEffect=function(z,Y){return E.H.useInsertionEffect(z,Y)},tn.useLayoutEffect=function(z,Y){return E.H.useLayoutEffect(z,Y)},tn.useMemo=function(z,Y){return E.H.useMemo(z,Y)},tn.useOptimistic=function(z,Y){return E.H.useOptimistic(z,Y)},tn.useReducer=function(z,Y,Z){return E.H.useReducer(z,Y,Z)},tn.useRef=function(z){return E.H.useRef(z)},tn.useState=function(z){return E.H.useState(z)},tn.useSyncExternalStore=function(z,Y,Z){return E.H.useSyncExternalStore(z,Y,Z)},tn.useTransition=function(){return E.H.useTransition()},tn.version="19.1.0",tn}var Goe;function Tq(){return Goe||(Goe=1,OB.exports=b9e()),OB.exports}var U=Tq();const Ko=Am(U),vV=Rbe({__proto__:null,default:Ko},[U]);var RB={exports:{}},GC={},FB={exports:{}},MB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qoe;function x9e(){return qoe||(qoe=1,function(e){function t(R,j){var H=R.length;R.push(j);e:for(;0<H;){var G=H-1>>>1,z=R[G];if(0<i(z,j))R[G]=j,R[H]=z,H=G;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var j=R[0],H=R.pop();if(H!==j){R[0]=H;e:for(var G=0,z=R.length,Y=z>>>1;G<Y;){var Z=2*(G+1)-1,Q=R[Z],se=Z+1,re=R[se];if(0>i(Q,H))se<z&&0>i(re,Q)?(R[G]=re,R[se]=H,G=se):(R[G]=Q,R[Z]=H,G=Z);else if(se<z&&0>i(re,H))R[G]=re,R[se]=H,G=se;else break e}}return j}function i(R,j){var H=R.sortIndex-j.sortIndex;return H!==0?H:R.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,f=null,d=3,h=!1,m=!1,g=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function S(R){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=R)r(u),j.sortIndex=j.expirationTime,t(l,j);else break;j=n(u)}}function E(R){if(g=!1,S(R),!m)if(n(l)!==null)m=!0,A||(A=!0,L());else{var j=n(u);j!==null&&F(E,j.startTime-R)}}var A=!1,k=-1,N=5,I=-1;function T(){return b?!0:!(e.unstable_now()-I<N)}function D(){if(b=!1,A){var R=e.unstable_now();I=R;var j=!0;try{e:{m=!1,g&&(g=!1,w(k),k=-1),h=!0;var H=d;try{t:{for(S(R),f=n(l);f!==null&&!(f.expirationTime>R&&T());){var G=f.callback;if(typeof G=="function"){f.callback=null,d=f.priorityLevel;var z=G(f.expirationTime<=R);if(R=e.unstable_now(),typeof z=="function"){f.callback=z,S(R),j=!0;break t}f===n(l)&&r(l),S(R)}else r(l);f=n(l)}if(f!==null)j=!0;else{var Y=n(u);Y!==null&&F(E,Y.startTime-R),j=!1}}break e}finally{f=null,d=H,h=!1}j=void 0}}finally{j?L():A=!1}}}var L;if(typeof C=="function")L=function(){C(D)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=D,L=function(){M.postMessage(null)}}else L=function(){x(D,0)};function F(R,j){k=x(function(){R(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_next=function(R){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var H=d;d=j;try{return R()}finally{d=H}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(R,j){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=d;d=R;try{return j()}finally{d=H}},e.unstable_scheduleCallback=function(R,j,H){var G=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=H+z,R={id:c++,callback:j,priorityLevel:R,startTime:H,expirationTime:z,sortIndex:-1},H>G?(R.sortIndex=H,t(u,R),n(l)===null&&R===n(u)&&(g?(w(k),k=-1):g=!0,F(E,H-G))):(R.sortIndex=z,t(l,R),m||h||(m=!0,A||(A=!0,L()))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var j=d;return function(){var H=d;d=j;try{return R.apply(this,arguments)}finally{d=H}}}}(MB)),MB}var Xoe;function v9e(){return Xoe||(Xoe=1,FB.exports=x9e()),FB.exports}var LB={exports:{}},pa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yoe;function w9e(){if(Yoe)return pa;Yoe=1;var e=Tq();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,u,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:u,implementation:c}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return pa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pa.createPortal=function(l,u){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(l,u,null,c)},pa.flushSync=function(l){var u=a.T,c=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=u,r.p=c,r.d.f()}},pa.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},pa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},pa.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var c=u.as,f=o(c,u.crossOrigin),d=typeof u.integrity=="string"?u.integrity:void 0,h=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;c==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:d,fetchPriority:h}):c==="script"&&r.d.X(l,{crossOrigin:f,integrity:d,fetchPriority:h,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},pa.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var c=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},pa.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var c=u.as,f=o(c,u.crossOrigin);r.d.L(l,c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},pa.preloadModule=function(l,u){if(typeof l=="string")if(u){var c=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},pa.requestFormReset=function(l){r.d.r(l)},pa.unstable_batchedUpdates=function(l,u){return l(u)},pa.useFormState=function(l,u,c){return a.H.useFormState(l,u,c)},pa.useFormStatus=function(){return a.H.useHostTransitionStatus()},pa.version="19.1.0",pa}var Koe;function Fbe(){if(Koe)return LB.exports;Koe=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),LB.exports=w9e(),LB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zoe;function S9e(){if(Zoe)return GC;Zoe=1;var e=v9e(),t=Tq(),n=Fbe();function r(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function s(p){var y=p,v=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(v=y.return),p=y.return;while(p)}return y.tag===3?v:null}function a(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function o(p){if(s(p)!==p)throw Error(r(188))}function l(p){var y=p.alternate;if(!y){if(y=s(p),y===null)throw Error(r(188));return y!==p?null:p}for(var v=p,$=y;;){var _=v.return;if(_===null)break;var O=_.alternate;if(O===null){if($=_.return,$!==null){v=$;continue}break}if(_.child===O.child){for(O=_.child;O;){if(O===v)return o(_),p;if(O===$)return o(_),y;O=O.sibling}throw Error(r(188))}if(v.return!==$.return)v=_,$=O;else{for(var V=!1,K=_.child;K;){if(K===v){V=!0,v=_,$=O;break}if(K===$){V=!0,$=_,v=O;break}K=K.sibling}if(!V){for(K=O.child;K;){if(K===v){V=!0,v=O,$=_;break}if(K===$){V=!0,$=O,v=_;break}K=K.sibling}if(!V)throw Error(r(189))}}if(v.alternate!==$)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?p:y}function u(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p;for(p=p.child;p!==null;){if(y=u(p),y!==null)return y;p=p.sibling}return null}var c=Object.assign,f=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(p){return p===null||typeof p!="object"?null:(p=D&&p[D]||p["@@iterator"],typeof p=="function"?p:null)}var P=Symbol.for("react.client.reference");function M(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===P?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case m:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList";case I:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case h:return"Portal";case C:return(p.displayName||"Context")+".Provider";case w:return(p._context.displayName||"Context")+".Consumer";case S:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case k:return y=p.displayName||null,y!==null?y:M(p.type)||"Memo";case N:y=p._payload,p=p._init;try{return M(p(y))}catch{}}return null}var F=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},G=[],z=-1;function Y(p){return{current:p}}function Z(p){0>z||(p.current=G[z],G[z]=null,z--)}function Q(p,y){z++,G[z]=p.current,p.current=y}var se=Y(null),re=Y(null),de=Y(null),Oe=Y(null);function Le(p,y){switch(Q(de,y),Q(re,p),Q(se,null),y.nodeType){case 9:case 11:p=(p=y.documentElement)&&(p=p.namespaceURI)?yoe(p):0;break;default:if(p=y.tagName,y=y.namespaceURI)y=yoe(y),p=boe(y,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}Z(se),Q(se,p)}function me(){Z(se),Z(re),Z(de)}function xe(p){p.memoizedState!==null&&Q(Oe,p);var y=se.current,v=boe(y,p.type);y!==v&&(Q(re,p),Q(se,v))}function Ee(p){re.current===p&&(Z(se),Z(re)),Oe.current===p&&(Z(Oe),zC._currentValue=H)}var ce=Object.prototype.hasOwnProperty,Xe=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,Je=e.unstable_shouldYield,at=e.unstable_requestPaint,et=e.unstable_now,nt=e.unstable_getCurrentPriorityLevel,Yn=e.unstable_ImmediatePriority,Yt=e.unstable_UserBlockingPriority,sn=e.unstable_NormalPriority,it=e.unstable_LowPriority,fr=e.unstable_IdlePriority,an=e.log,Fe=e.unstable_setDisableYieldValue,Ue=null,Ne=null;function wt(p){if(typeof an=="function"&&Fe(p),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Ue,p)}catch{}}var At=Math.clz32?Math.clz32:dr,pt=Math.log,Lt=Math.LN2;function dr(p){return p>>>=0,p===0?32:31-(pt(p)/Lt|0)|0}var vn=256,Wr=4194304;function ot(p){var y=p&42;if(y!==0)return y;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Tn(p,y,v){var $=p.pendingLanes;if($===0)return 0;var _=0,O=p.suspendedLanes,V=p.pingedLanes;p=p.warmLanes;var K=$&134217727;return K!==0?($=K&~O,$!==0?_=ot($):(V&=K,V!==0?_=ot(V):v||(v=K&~p,v!==0&&(_=ot(v))))):(K=$&~O,K!==0?_=ot(K):V!==0?_=ot(V):v||(v=$&~p,v!==0&&(_=ot(v)))),_===0?0:y!==0&&y!==_&&(y&O)===0&&(O=_&-_,v=y&-y,O>=v||O===32&&(v&4194048)!==0)?y:_}function tr(p,y){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&y)===0}function Xl(p,y){switch(p){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(){var p=vn;return vn<<=1,(vn&4194048)===0&&(vn=256),p}function vp(){var p=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),p}function ag(p){for(var y=[],v=0;31>v;v++)y.push(p);return y}function hr(p,y){p.pendingLanes|=y,y!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function vi(p,y,v,$,_,O){var V=p.pendingLanes;p.pendingLanes=v,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=v,p.entangledLanes&=v,p.errorRecoveryDisabledLanes&=v,p.shellSuspendCounter=0;var K=p.entanglements,ne=p.expirationTimes,ye=p.hiddenUpdates;for(v=V&~v;0<v;){var De=31-At(v),Re=1<<De;K[De]=0,ne[De]=-1;var be=ye[De];if(be!==null)for(ye[De]=null,De=0;De<be.length;De++){var ve=be[De];ve!==null&&(ve.lane&=-536870913)}v&=~Re}$!==0&&wp(p,$,0),O!==0&&_===0&&p.tag!==0&&(p.suspendedLanes|=O&~(V&~y))}function wp(p,y,v){p.pendingLanes|=y,p.suspendedLanes&=~y;var $=31-At(y);p.entangledLanes|=y,p.entanglements[$]=p.entanglements[$]|1073741824|v&4194090}function Id(p,y){var v=p.entangledLanes|=y;for(p=p.entanglements;v;){var $=31-At(v),_=1<<$;_&y|p[$]&y&&(p[$]|=y),v&=~_}}function Ya(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function qS(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function tN(){var p=j.p;return p!==0?p:(p=window.event,p===void 0?32:Loe(p.type))}function EL(p,y){var v=j.p;try{return j.p=p,y()}finally{j.p=v}}var Yc=Math.random().toString(36).slice(2),gs="__reactFiber$"+Yc,da="__reactProps$"+Yc,Sp="__reactContainer$"+Yc,XS="__reactEvents$"+Yc,kL="__reactListeners$"+Yc,AL="__reactHandles$"+Yc,nN="__reactResources$"+Yc,og="__reactMarker$"+Yc;function YS(p){delete p[gs],delete p[da],delete p[XS],delete p[kL],delete p[AL]}function Cp(p){var y=p[gs];if(y)return y;for(var v=p.parentNode;v;){if(y=v[Sp]||v[gs]){if(v=y.alternate,y.child!==null||v!==null&&v.child!==null)for(p=Soe(p);p!==null;){if(v=p[gs])return v;p=Soe(p)}return y}p=v,v=p.parentNode}return null}function $p(p){if(p=p[gs]||p[Sp]){var y=p.tag;if(y===5||y===6||y===13||y===26||y===27||y===3)return p}return null}function lg(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p.stateNode;throw Error(r(33))}function Ep(p){var y=p[nN];return y||(y=p[nN]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function Ri(p){p[og]=!0}var rN=new Set,iN={};function Od(p,y){kp(p,y),kp(p+"Capture",y)}function kp(p,y){for(iN[p]=y,p=0;p<y.length;p++)rN.add(y[p])}var _L=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sN={},aN={};function TL(p){return ce.call(aN,p)?!0:ce.call(sN,p)?!1:_L.test(p)?aN[p]=!0:(sN[p]=!0,!1)}function Db(p,y,v){if(TL(y))if(v===null)p.removeAttribute(y);else{switch(typeof v){case"undefined":case"function":case"symbol":p.removeAttribute(y);return;case"boolean":var $=y.toLowerCase().slice(0,5);if($!=="data-"&&$!=="aria-"){p.removeAttribute(y);return}}p.setAttribute(y,""+v)}}function Ib(p,y,v){if(v===null)p.removeAttribute(y);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(y);return}p.setAttribute(y,""+v)}}function Wu(p,y,v,$){if($===null)p.removeAttribute(v);else{switch(typeof $){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(v);return}p.setAttributeNS(y,v,""+$)}}var KS,J;function ue(p){if(KS===void 0)try{throw Error()}catch(v){var y=v.stack.trim().match(/\n( *(at )?)/);KS=y&&y[1]||"",J=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+KS+p+J}var Be=!1;function He(p,y){if(!p||Be)return"";Be=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var $={DetermineComponentFrameRoot:function(){try{if(y){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(ve){var be=ve}Reflect.construct(p,[],Re)}else{try{Re.call()}catch(ve){be=ve}p.call(Re.prototype)}}else{try{throw Error()}catch(ve){be=ve}(Re=p())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(ve){if(ve&&be&&typeof ve.stack=="string")return[ve.stack,be.stack]}return[null,null]}};$.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor($.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty($.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=$.DetermineComponentFrameRoot(),V=O[0],K=O[1];if(V&&K){var ne=V.split(`
`),ye=K.split(`
`);for(_=$=0;$<ne.length&&!ne[$].includes("DetermineComponentFrameRoot");)$++;for(;_<ye.length&&!ye[_].includes("DetermineComponentFrameRoot");)_++;if($===ne.length||_===ye.length)for($=ne.length-1,_=ye.length-1;1<=$&&0<=_&&ne[$]!==ye[_];)_--;for(;1<=$&&0<=_;$--,_--)if(ne[$]!==ye[_]){if($!==1||_!==1)do if($--,_--,0>_||ne[$]!==ye[_]){var De=`
`+ne[$].replace(" at new "," at ");return p.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",p.displayName)),De}while(1<=$&&0<=_);break}}}finally{Be=!1,Error.prepareStackTrace=v}return(v=p?p.displayName||p.name:"")?ue(v):""}function Ot(p){switch(p.tag){case 26:case 27:case 5:return ue(p.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return He(p.type,!1);case 11:return He(p.type.render,!1);case 1:return He(p.type,!0);case 31:return ue("Activity");default:return""}}function wn(p){try{var y="";do y+=Ot(p),p=p.return;while(p);return y}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function pr(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Lr(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function ZS(p){var y=Lr(p)?"checked":"value",v=Object.getOwnPropertyDescriptor(p.constructor.prototype,y),$=""+p[y];if(!p.hasOwnProperty(y)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var _=v.get,O=v.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return _.call(this)},set:function(V){$=""+V,O.call(this,V)}}),Object.defineProperty(p,y,{enumerable:v.enumerable}),{getValue:function(){return $},setValue:function(V){$=""+V},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function Hu(p){p._valueTracker||(p._valueTracker=ZS(p))}function ys(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var v=y.getValue(),$="";return p&&($=Lr(p)?p.checked?"true":"false":p.value),p=$,p!==v?(y.setValue(p),!0):!1}function ug(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var bs=/[\n"\\]/g;function Ir(p){return p.replace(bs,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function QS(p,y,v,$,_,O,V,K){p.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?p.type=V:p.removeAttribute("type"),y!=null?V==="number"?(y===0&&p.value===""||p.value!=y)&&(p.value=""+pr(y)):p.value!==""+pr(y)&&(p.value=""+pr(y)):V!=="submit"&&V!=="reset"||p.removeAttribute("value"),y!=null?NL(p,V,pr(y)):v!=null?NL(p,V,pr(v)):$!=null&&p.removeAttribute("value"),_==null&&O!=null&&(p.defaultChecked=!!O),_!=null&&(p.checked=_&&typeof _!="function"&&typeof _!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?p.name=""+pr(K):p.removeAttribute("name")}function pie(p,y,v,$,_,O,V,K){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(p.type=O),y!=null||v!=null){if(!(O!=="submit"&&O!=="reset"||y!=null))return;v=v!=null?""+pr(v):"",y=y!=null?""+pr(y):v,K||y===p.value||(p.value=y),p.defaultValue=y}$=$??_,$=typeof $!="function"&&typeof $!="symbol"&&!!$,p.checked=K?p.checked:!!$,p.defaultChecked=!!$,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(p.name=V)}function NL(p,y,v){y==="number"&&ug(p.ownerDocument)===p||p.defaultValue===""+v||(p.defaultValue=""+v)}function Ob(p,y,v,$){if(p=p.options,y){y={};for(var _=0;_<v.length;_++)y["$"+v[_]]=!0;for(v=0;v<p.length;v++)_=y.hasOwnProperty("$"+p[v].value),p[v].selected!==_&&(p[v].selected=_),_&&$&&(p[v].defaultSelected=!0)}else{for(v=""+pr(v),y=null,_=0;_<p.length;_++){if(p[_].value===v){p[_].selected=!0,$&&(p[_].defaultSelected=!0);return}y!==null||p[_].disabled||(y=p[_])}y!==null&&(y.selected=!0)}}function mie(p,y,v){if(y!=null&&(y=""+pr(y),y!==p.value&&(p.value=y),v==null)){p.defaultValue!==y&&(p.defaultValue=y);return}p.defaultValue=v!=null?""+pr(v):""}function gie(p,y,v,$){if(y==null){if($!=null){if(v!=null)throw Error(r(92));if(F($)){if(1<$.length)throw Error(r(93));$=$[0]}v=$}v==null&&(v=""),y=v}v=pr(y),p.defaultValue=v,$=p.textContent,$===v&&$!==""&&$!==null&&(p.value=$)}function Rb(p,y){if(y){var v=p.firstChild;if(v&&v===p.lastChild&&v.nodeType===3){v.nodeValue=y;return}}p.textContent=y}var fMe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yie(p,y,v){var $=y.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?$?p.setProperty(y,""):y==="float"?p.cssFloat="":p[y]="":$?p.setProperty(y,v):typeof v!="number"||v===0||fMe.has(y)?y==="float"?p.cssFloat=v:p[y]=(""+v).trim():p[y]=v+"px"}function bie(p,y,v){if(y!=null&&typeof y!="object")throw Error(r(62));if(p=p.style,v!=null){for(var $ in v)!v.hasOwnProperty($)||y!=null&&y.hasOwnProperty($)||($.indexOf("--")===0?p.setProperty($,""):$==="float"?p.cssFloat="":p[$]="");for(var _ in y)$=y[_],y.hasOwnProperty(_)&&v[_]!==$&&yie(p,_,$)}else for(var O in y)y.hasOwnProperty(O)&&yie(p,O,y[O])}function DL(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dMe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hMe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oN(p){return hMe.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var IL=null;function OL(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Fb=null,Mb=null;function xie(p){var y=$p(p);if(y&&(p=y.stateNode)){var v=p[da]||null;e:switch(p=y.stateNode,y.type){case"input":if(QS(p,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),y=v.name,v.type==="radio"&&y!=null){for(v=p;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Ir(""+y)+'"][type="radio"]'),y=0;y<v.length;y++){var $=v[y];if($!==p&&$.form===p.form){var _=$[da]||null;if(!_)throw Error(r(90));QS($,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(y=0;y<v.length;y++)$=v[y],$.form===p.form&&ys($)}break e;case"textarea":mie(p,v.value,v.defaultValue);break e;case"select":y=v.value,y!=null&&Ob(p,!!v.multiple,y,!1)}}}var RL=!1;function vie(p,y,v){if(RL)return p(y,v);RL=!0;try{var $=p(y);return $}finally{if(RL=!1,(Fb!==null||Mb!==null)&&(GN(),Fb&&(y=Fb,p=Mb,Mb=Fb=null,xie(y),p)))for(y=0;y<p.length;y++)xie(p[y])}}function JS(p,y){var v=p.stateNode;if(v===null)return null;var $=v[da]||null;if($===null)return null;v=$[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":($=!$.disabled)||(p=p.type,$=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!$;break e;default:p=!1}if(p)return null;if(v&&typeof v!="function")throw Error(r(231,y,typeof v));return v}var Rd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),FL=!1;if(Rd)try{var eC={};Object.defineProperty(eC,"passive",{get:function(){FL=!0}}),window.addEventListener("test",eC,eC),window.removeEventListener("test",eC,eC)}catch{FL=!1}var Ap=null,ML=null,lN=null;function wie(){if(lN)return lN;var p,y=ML,v=y.length,$,_="value"in Ap?Ap.value:Ap.textContent,O=_.length;for(p=0;p<v&&y[p]===_[p];p++);var V=v-p;for($=1;$<=V&&y[v-$]===_[O-$];$++);return lN=_.slice(p,1<$?1-$:void 0)}function uN(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function cN(){return!0}function Sie(){return!1}function Do(p){function y(v,$,_,O,V){this._reactName=v,this._targetInst=_,this.type=$,this.nativeEvent=O,this.target=V,this.currentTarget=null;for(var K in p)p.hasOwnProperty(K)&&(v=p[K],this[K]=v?v(O):O[K]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?cN:Sie,this.isPropagationStopped=Sie,this}return c(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=cN)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=cN)},persist:function(){},isPersistent:cN}),y}var cg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fN=Do(cg),tC=c({},cg,{view:0,detail:0}),pMe=Do(tC),LL,PL,nC,dN=c({},tC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zL,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==nC&&(nC&&p.type==="mousemove"?(LL=p.screenX-nC.screenX,PL=p.screenY-nC.screenY):PL=LL=0,nC=p),LL)},movementY:function(p){return"movementY"in p?p.movementY:PL}}),Cie=Do(dN),mMe=c({},dN,{dataTransfer:0}),gMe=Do(mMe),yMe=c({},tC,{relatedTarget:0}),BL=Do(yMe),bMe=c({},cg,{animationName:0,elapsedTime:0,pseudoElement:0}),xMe=Do(bMe),vMe=c({},cg,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),wMe=Do(vMe),SMe=c({},cg,{data:0}),$ie=Do(SMe),CMe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$Me={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EMe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kMe(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=EMe[p])?!!y[p]:!1}function zL(){return kMe}var AMe=c({},tC,{key:function(p){if(p.key){var y=CMe[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=uN(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?$Me[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zL,charCode:function(p){return p.type==="keypress"?uN(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?uN(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),_Me=Do(AMe),TMe=c({},dN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eie=Do(TMe),NMe=c({},tC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zL}),DMe=Do(NMe),IMe=c({},cg,{propertyName:0,elapsedTime:0,pseudoElement:0}),OMe=Do(IMe),RMe=c({},dN,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),FMe=Do(RMe),MMe=c({},cg,{newState:0,oldState:0}),LMe=Do(MMe),PMe=[9,13,27,32],jL=Rd&&"CompositionEvent"in window,rC=null;Rd&&"documentMode"in document&&(rC=document.documentMode);var BMe=Rd&&"TextEvent"in window&&!rC,kie=Rd&&(!jL||rC&&8<rC&&11>=rC),Aie=" ",_ie=!1;function Tie(p,y){switch(p){case"keyup":return PMe.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nie(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Lb=!1;function zMe(p,y){switch(p){case"compositionend":return Nie(y);case"keypress":return y.which!==32?null:(_ie=!0,Aie);case"textInput":return p=y.data,p===Aie&&_ie?null:p;default:return null}}function jMe(p,y){if(Lb)return p==="compositionend"||!jL&&Tie(p,y)?(p=wie(),lN=ML=Ap=null,Lb=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return kie&&y.locale!=="ko"?null:y.data;default:return null}}var UMe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Die(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!UMe[p.type]:y==="textarea"}function Iie(p,y,v,$){Fb?Mb?Mb.push($):Mb=[$]:Fb=$,y=QN(y,"onChange"),0<y.length&&(v=new fN("onChange","change",null,v,$),p.push({event:v,listeners:y}))}var iC=null,sC=null;function VMe(p){doe(p,0)}function hN(p){var y=lg(p);if(ys(y))return p}function Oie(p,y){if(p==="change")return y}var Rie=!1;if(Rd){var UL;if(Rd){var VL="oninput"in document;if(!VL){var Fie=document.createElement("div");Fie.setAttribute("oninput","return;"),VL=typeof Fie.oninput=="function"}UL=VL}else UL=!1;Rie=UL&&(!document.documentMode||9<document.documentMode)}function Mie(){iC&&(iC.detachEvent("onpropertychange",Lie),sC=iC=null)}function Lie(p){if(p.propertyName==="value"&&hN(sC)){var y=[];Iie(y,sC,p,OL(p)),vie(VMe,y)}}function WMe(p,y,v){p==="focusin"?(Mie(),iC=y,sC=v,iC.attachEvent("onpropertychange",Lie)):p==="focusout"&&Mie()}function HMe(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return hN(sC)}function GMe(p,y){if(p==="click")return hN(y)}function qMe(p,y){if(p==="input"||p==="change")return hN(y)}function XMe(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var ml=typeof Object.is=="function"?Object.is:XMe;function aC(p,y){if(ml(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var v=Object.keys(p),$=Object.keys(y);if(v.length!==$.length)return!1;for($=0;$<v.length;$++){var _=v[$];if(!ce.call(y,_)||!ml(p[_],y[_]))return!1}return!0}function Pie(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Bie(p,y){var v=Pie(p);p=0;for(var $;v;){if(v.nodeType===3){if($=p+v.textContent.length,p<=y&&$>=y)return{node:v,offset:y-p};p=$}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Pie(v)}}function zie(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?zie(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function jie(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var y=ug(p.document);y instanceof p.HTMLIFrameElement;){try{var v=typeof y.contentWindow.location.href=="string"}catch{v=!1}if(v)p=y.contentWindow;else break;y=ug(p.document)}return y}function WL(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}var YMe=Rd&&"documentMode"in document&&11>=document.documentMode,Pb=null,HL=null,oC=null,GL=!1;function Uie(p,y,v){var $=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;GL||Pb==null||Pb!==ug($)||($=Pb,"selectionStart"in $&&WL($)?$={start:$.selectionStart,end:$.selectionEnd}:($=($.ownerDocument&&$.ownerDocument.defaultView||window).getSelection(),$={anchorNode:$.anchorNode,anchorOffset:$.anchorOffset,focusNode:$.focusNode,focusOffset:$.focusOffset}),oC&&aC(oC,$)||(oC=$,$=QN(HL,"onSelect"),0<$.length&&(y=new fN("onSelect","select",null,y,v),p.push({event:y,listeners:$}),y.target=Pb)))}function fg(p,y){var v={};return v[p.toLowerCase()]=y.toLowerCase(),v["Webkit"+p]="webkit"+y,v["Moz"+p]="moz"+y,v}var Bb={animationend:fg("Animation","AnimationEnd"),animationiteration:fg("Animation","AnimationIteration"),animationstart:fg("Animation","AnimationStart"),transitionrun:fg("Transition","TransitionRun"),transitionstart:fg("Transition","TransitionStart"),transitioncancel:fg("Transition","TransitionCancel"),transitionend:fg("Transition","TransitionEnd")},qL={},Vie={};Rd&&(Vie=document.createElement("div").style,"AnimationEvent"in window||(delete Bb.animationend.animation,delete Bb.animationiteration.animation,delete Bb.animationstart.animation),"TransitionEvent"in window||delete Bb.transitionend.transition);function dg(p){if(qL[p])return qL[p];if(!Bb[p])return p;var y=Bb[p],v;for(v in y)if(y.hasOwnProperty(v)&&v in Vie)return qL[p]=y[v];return p}var Wie=dg("animationend"),Hie=dg("animationiteration"),Gie=dg("animationstart"),KMe=dg("transitionrun"),ZMe=dg("transitionstart"),QMe=dg("transitioncancel"),qie=dg("transitionend"),Xie=new Map,XL="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");XL.push("scrollEnd");function Gu(p,y){Xie.set(p,y),Od(y,[p])}var Yie=new WeakMap;function Yl(p,y){if(typeof p=="object"&&p!==null){var v=Yie.get(p);return v!==void 0?v:(y={value:p,source:y,stack:wn(y)},Yie.set(p,y),y)}return{value:p,source:y,stack:wn(y)}}var Kl=[],zb=0,YL=0;function pN(){for(var p=zb,y=YL=zb=0;y<p;){var v=Kl[y];Kl[y++]=null;var $=Kl[y];Kl[y++]=null;var _=Kl[y];Kl[y++]=null;var O=Kl[y];if(Kl[y++]=null,$!==null&&_!==null){var V=$.pending;V===null?_.next=_:(_.next=V.next,V.next=_),$.pending=_}O!==0&&Kie(v,_,O)}}function mN(p,y,v,$){Kl[zb++]=p,Kl[zb++]=y,Kl[zb++]=v,Kl[zb++]=$,YL|=$,p.lanes|=$,p=p.alternate,p!==null&&(p.lanes|=$)}function KL(p,y,v,$){return mN(p,y,v,$),gN(p)}function jb(p,y){return mN(p,null,null,y),gN(p)}function Kie(p,y,v){p.lanes|=v;var $=p.alternate;$!==null&&($.lanes|=v);for(var _=!1,O=p.return;O!==null;)O.childLanes|=v,$=O.alternate,$!==null&&($.childLanes|=v),O.tag===22&&(p=O.stateNode,p===null||p._visibility&1||(_=!0)),p=O,O=O.return;return p.tag===3?(O=p.stateNode,_&&y!==null&&(_=31-At(v),p=O.hiddenUpdates,$=p[_],$===null?p[_]=[y]:$.push(y),y.lane=v|536870912),O):null}function gN(p){if(50<IC)throw IC=0,nB=null,Error(r(185));for(var y=p.return;y!==null;)p=y,y=p.return;return p.tag===3?p.stateNode:null}var Ub={};function JMe(p,y,v,$){this.tag=p,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gl(p,y,v,$){return new JMe(p,y,v,$)}function ZL(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Fd(p,y){var v=p.alternate;return v===null?(v=gl(p.tag,y,p.key,p.mode),v.elementType=p.elementType,v.type=p.type,v.stateNode=p.stateNode,v.alternate=p,p.alternate=v):(v.pendingProps=y,v.type=p.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=p.flags&65011712,v.childLanes=p.childLanes,v.lanes=p.lanes,v.child=p.child,v.memoizedProps=p.memoizedProps,v.memoizedState=p.memoizedState,v.updateQueue=p.updateQueue,y=p.dependencies,v.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},v.sibling=p.sibling,v.index=p.index,v.ref=p.ref,v.refCleanup=p.refCleanup,v}function Zie(p,y){p.flags&=65011714;var v=p.alternate;return v===null?(p.childLanes=0,p.lanes=y,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,y=v.dependencies,p.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),p}function yN(p,y,v,$,_,O){var V=0;if($=p,typeof p=="function")ZL(p)&&(V=1);else if(typeof p=="string")V=t9e(p,v,se.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case I:return p=gl(31,v,y,_),p.elementType=I,p.lanes=O,p;case m:return hg(v.children,_,O,y);case g:V=8,_|=24;break;case b:return p=gl(12,v,y,_|2),p.elementType=b,p.lanes=O,p;case E:return p=gl(13,v,y,_),p.elementType=E,p.lanes=O,p;case A:return p=gl(19,v,y,_),p.elementType=A,p.lanes=O,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case x:case C:V=10;break e;case w:V=9;break e;case S:V=11;break e;case k:V=14;break e;case N:V=16,$=null;break e}V=29,v=Error(r(130,p===null?"null":typeof p,"")),$=null}return y=gl(V,v,y,_),y.elementType=p,y.type=$,y.lanes=O,y}function hg(p,y,v,$){return p=gl(7,p,$,y),p.lanes=v,p}function QL(p,y,v){return p=gl(6,p,null,y),p.lanes=v,p}function JL(p,y,v){return y=gl(4,p.children!==null?p.children:[],p.key,y),y.lanes=v,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}var Vb=[],Wb=0,bN=null,xN=0,Zl=[],Ql=0,pg=null,Md=1,Ld="";function mg(p,y){Vb[Wb++]=xN,Vb[Wb++]=bN,bN=p,xN=y}function Qie(p,y,v){Zl[Ql++]=Md,Zl[Ql++]=Ld,Zl[Ql++]=pg,pg=p;var $=Md;p=Ld;var _=32-At($)-1;$&=~(1<<_),v+=1;var O=32-At(y)+_;if(30<O){var V=_-_%5;O=($&(1<<V)-1).toString(32),$>>=V,_-=V,Md=1<<32-At(y)+_|v<<_|$,Ld=O+p}else Md=1<<O|v<<_|$,Ld=p}function eP(p){p.return!==null&&(mg(p,1),Qie(p,1,0))}function tP(p){for(;p===bN;)bN=Vb[--Wb],Vb[Wb]=null,xN=Vb[--Wb],Vb[Wb]=null;for(;p===pg;)pg=Zl[--Ql],Zl[Ql]=null,Ld=Zl[--Ql],Zl[Ql]=null,Md=Zl[--Ql],Zl[Ql]=null}var Ka=null,ai=null,jn=!1,gg=null,Kc=!1,nP=Error(r(519));function yg(p){var y=Error(r(418,""));throw cC(Yl(y,p)),nP}function Jie(p){var y=p.stateNode,v=p.type,$=p.memoizedProps;switch(y[gs]=p,y[da]=$,v){case"dialog":Cn("cancel",y),Cn("close",y);break;case"iframe":case"object":case"embed":Cn("load",y);break;case"video":case"audio":for(v=0;v<RC.length;v++)Cn(RC[v],y);break;case"source":Cn("error",y);break;case"img":case"image":case"link":Cn("error",y),Cn("load",y);break;case"details":Cn("toggle",y);break;case"input":Cn("invalid",y),pie(y,$.value,$.defaultValue,$.checked,$.defaultChecked,$.type,$.name,!0),Hu(y);break;case"select":Cn("invalid",y);break;case"textarea":Cn("invalid",y),gie(y,$.value,$.defaultValue,$.children),Hu(y)}v=$.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||y.textContent===""+v||$.suppressHydrationWarning===!0||goe(y.textContent,v)?($.popover!=null&&(Cn("beforetoggle",y),Cn("toggle",y)),$.onScroll!=null&&Cn("scroll",y),$.onScrollEnd!=null&&Cn("scrollend",y),$.onClick!=null&&(y.onclick=JN),y=!0):y=!1,y||yg(p)}function ese(p){for(Ka=p.return;Ka;)switch(Ka.tag){case 5:case 13:Kc=!1;return;case 27:case 3:Kc=!0;return;default:Ka=Ka.return}}function lC(p){if(p!==Ka)return!1;if(!jn)return ese(p),jn=!0,!1;var y=p.tag,v;if((v=y!==3&&y!==27)&&((v=y===5)&&(v=p.type,v=!(v!=="form"&&v!=="button")||bB(p.type,p.memoizedProps)),v=!v),v&&ai&&yg(p),ese(p),y===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,y=0;p;){if(p.nodeType===8)if(v=p.data,v==="/$"){if(y===0){ai=Xu(p.nextSibling);break e}y--}else v!=="$"&&v!=="$!"&&v!=="$?"||y++;p=p.nextSibling}ai=null}}else y===27?(y=ai,Vp(p.type)?(p=SB,SB=null,ai=p):ai=y):ai=Ka?Xu(p.stateNode.nextSibling):null;return!0}function uC(){ai=Ka=null,jn=!1}function tse(){var p=gg;return p!==null&&(Ro===null?Ro=p:Ro.push.apply(Ro,p),gg=null),p}function cC(p){gg===null?gg=[p]:gg.push(p)}var rP=Y(null),bg=null,Pd=null;function _p(p,y,v){Q(rP,y._currentValue),y._currentValue=v}function Bd(p){p._currentValue=rP.current,Z(rP)}function iP(p,y,v){for(;p!==null;){var $=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,$!==null&&($.childLanes|=y)):$!==null&&($.childLanes&y)!==y&&($.childLanes|=y),p===v)break;p=p.return}}function sP(p,y,v,$){var _=p.child;for(_!==null&&(_.return=p);_!==null;){var O=_.dependencies;if(O!==null){var V=_.child;O=O.firstContext;e:for(;O!==null;){var K=O;O=_;for(var ne=0;ne<y.length;ne++)if(K.context===y[ne]){O.lanes|=v,K=O.alternate,K!==null&&(K.lanes|=v),iP(O.return,v,p),$||(V=null);break e}O=K.next}}else if(_.tag===18){if(V=_.return,V===null)throw Error(r(341));V.lanes|=v,O=V.alternate,O!==null&&(O.lanes|=v),iP(V,v,p),V=null}else V=_.child;if(V!==null)V.return=_;else for(V=_;V!==null;){if(V===p){V=null;break}if(_=V.sibling,_!==null){_.return=V.return,V=_;break}V=V.return}_=V}}function fC(p,y,v,$){p=null;for(var _=y,O=!1;_!==null;){if(!O){if((_.flags&524288)!==0)O=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var V=_.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var K=_.type;ml(_.pendingProps.value,V.value)||(p!==null?p.push(K):p=[K])}}else if(_===Oe.current){if(V=_.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(p!==null?p.push(zC):p=[zC])}_=_.return}p!==null&&sP(y,p,v,$),y.flags|=262144}function vN(p){for(p=p.firstContext;p!==null;){if(!ml(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function xg(p){bg=p,Pd=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function ha(p){return nse(bg,p)}function wN(p,y){return bg===null&&xg(p),nse(p,y)}function nse(p,y){var v=y._currentValue;if(y={context:y,memoizedValue:v,next:null},Pd===null){if(p===null)throw Error(r(308));Pd=y,p.dependencies={lanes:0,firstContext:y},p.flags|=524288}else Pd=Pd.next=y;return v}var e8e=typeof AbortController<"u"?AbortController:function(){var p=[],y=this.signal={aborted:!1,addEventListener:function(v,$){p.push($)}};this.abort=function(){y.aborted=!0,p.forEach(function(v){return v()})}},t8e=e.unstable_scheduleCallback,n8e=e.unstable_NormalPriority,Qi={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function aP(){return{controller:new e8e,data:new Map,refCount:0}}function dC(p){p.refCount--,p.refCount===0&&t8e(n8e,function(){p.controller.abort()})}var hC=null,oP=0,Hb=0,Gb=null;function r8e(p,y){if(hC===null){var v=hC=[];oP=0,Hb=uB(),Gb={status:"pending",value:void 0,then:function($){v.push($)}}}return oP++,y.then(rse,rse),y}function rse(){if(--oP===0&&hC!==null){Gb!==null&&(Gb.status="fulfilled");var p=hC;hC=null,Hb=0,Gb=null;for(var y=0;y<p.length;y++)(0,p[y])()}}function i8e(p,y){var v=[],$={status:"pending",value:null,reason:null,then:function(_){v.push(_)}};return p.then(function(){$.status="fulfilled",$.value=y;for(var _=0;_<v.length;_++)(0,v[_])(y)},function(_){for($.status="rejected",$.reason=_,_=0;_<v.length;_++)(0,v[_])(void 0)}),$}var ise=R.S;R.S=function(p,y){typeof y=="object"&&y!==null&&typeof y.then=="function"&&r8e(p,y),ise!==null&&ise(p,y)};var vg=Y(null);function lP(){var p=vg.current;return p!==null?p:Or.pooledCache}function SN(p,y){y===null?Q(vg,vg.current):Q(vg,y.pool)}function sse(){var p=lP();return p===null?null:{parent:Qi._currentValue,pool:p}}var pC=Error(r(460)),ase=Error(r(474)),CN=Error(r(542)),uP={then:function(){}};function ose(p){return p=p.status,p==="fulfilled"||p==="rejected"}function $N(){}function lse(p,y,v){switch(v=p[v],v===void 0?p.push(y):v!==y&&(y.then($N,$N),y=v),y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,cse(p),p;default:if(typeof y.status=="string")y.then($N,$N);else{if(p=Or,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=y,p.status="pending",p.then(function($){if(y.status==="pending"){var _=y;_.status="fulfilled",_.value=$}},function($){if(y.status==="pending"){var _=y;_.status="rejected",_.reason=$}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,cse(p),p}throw mC=y,pC}}var mC=null;function use(){if(mC===null)throw Error(r(459));var p=mC;return mC=null,p}function cse(p){if(p===pC||p===CN)throw Error(r(483))}var Tp=!1;function cP(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fP(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Np(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Dp(p,y,v){var $=p.updateQueue;if($===null)return null;if($=$.shared,(nr&2)!==0){var _=$.pending;return _===null?y.next=y:(y.next=_.next,_.next=y),$.pending=y,y=gN(p),Kie(p,null,v),y}return mN(p,$,y,v),gN(p)}function gC(p,y,v){if(y=y.updateQueue,y!==null&&(y=y.shared,(v&4194048)!==0)){var $=y.lanes;$&=p.pendingLanes,v|=$,y.lanes=v,Id(p,v)}}function dP(p,y){var v=p.updateQueue,$=p.alternate;if($!==null&&($=$.updateQueue,v===$)){var _=null,O=null;if(v=v.firstBaseUpdate,v!==null){do{var V={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};O===null?_=O=V:O=O.next=V,v=v.next}while(v!==null);O===null?_=O=y:O=O.next=y}else _=O=y;v={baseState:$.baseState,firstBaseUpdate:_,lastBaseUpdate:O,shared:$.shared,callbacks:$.callbacks},p.updateQueue=v;return}p=v.lastBaseUpdate,p===null?v.firstBaseUpdate=y:p.next=y,v.lastBaseUpdate=y}var hP=!1;function yC(){if(hP){var p=Gb;if(p!==null)throw p}}function bC(p,y,v,$){hP=!1;var _=p.updateQueue;Tp=!1;var O=_.firstBaseUpdate,V=_.lastBaseUpdate,K=_.shared.pending;if(K!==null){_.shared.pending=null;var ne=K,ye=ne.next;ne.next=null,V===null?O=ye:V.next=ye,V=ne;var De=p.alternate;De!==null&&(De=De.updateQueue,K=De.lastBaseUpdate,K!==V&&(K===null?De.firstBaseUpdate=ye:K.next=ye,De.lastBaseUpdate=ne))}if(O!==null){var Re=_.baseState;V=0,De=ye=ne=null,K=O;do{var be=K.lane&-536870913,ve=be!==K.lane;if(ve?(Nn&be)===be:($&be)===be){be!==0&&be===Hb&&(hP=!0),De!==null&&(De=De.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var Ut=p,Pt=K;be=y;var yr=v;switch(Pt.tag){case 1:if(Ut=Pt.payload,typeof Ut=="function"){Re=Ut.call(yr,Re,be);break e}Re=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Pt.payload,be=typeof Ut=="function"?Ut.call(yr,Re,be):Ut,be==null)break e;Re=c({},Re,be);break e;case 2:Tp=!0}}be=K.callback,be!==null&&(p.flags|=64,ve&&(p.flags|=8192),ve=_.callbacks,ve===null?_.callbacks=[be]:ve.push(be))}else ve={lane:be,tag:K.tag,payload:K.payload,callback:K.callback,next:null},De===null?(ye=De=ve,ne=Re):De=De.next=ve,V|=be;if(K=K.next,K===null){if(K=_.shared.pending,K===null)break;ve=K,K=ve.next,ve.next=null,_.lastBaseUpdate=ve,_.shared.pending=null}}while(!0);De===null&&(ne=Re),_.baseState=ne,_.firstBaseUpdate=ye,_.lastBaseUpdate=De,O===null&&(_.shared.lanes=0),Bp|=V,p.lanes=V,p.memoizedState=Re}}function fse(p,y){if(typeof p!="function")throw Error(r(191,p));p.call(y)}function dse(p,y){var v=p.callbacks;if(v!==null)for(p.callbacks=null,p=0;p<v.length;p++)fse(v[p],y)}var qb=Y(null),EN=Y(0);function hse(p,y){p=Gd,Q(EN,p),Q(qb,y),Gd=p|y.baseLanes}function pP(){Q(EN,Gd),Q(qb,qb.current)}function mP(){Gd=EN.current,Z(qb),Z(EN)}var Ip=0,ln=null,mr=null,Fi=null,kN=!1,Xb=!1,wg=!1,AN=0,xC=0,Yb=null,s8e=0;function wi(){throw Error(r(321))}function gP(p,y){if(y===null)return!1;for(var v=0;v<y.length&&v<p.length;v++)if(!ml(p[v],y[v]))return!1;return!0}function yP(p,y,v,$,_,O){return Ip=O,ln=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,R.H=p===null||p.memoizedState===null?Kse:Zse,wg=!1,O=v($,_),wg=!1,Xb&&(O=mse(y,v,$,_)),pse(p),O}function pse(p){R.H=ON;var y=mr!==null&&mr.next!==null;if(Ip=0,Fi=mr=ln=null,kN=!1,xC=0,Yb=null,y)throw Error(r(300));p===null||xs||(p=p.dependencies,p!==null&&vN(p)&&(xs=!0))}function mse(p,y,v,$){ln=p;var _=0;do{if(Xb&&(Yb=null),xC=0,Xb=!1,25<=_)throw Error(r(301));if(_+=1,Fi=mr=null,p.updateQueue!=null){var O=p.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}R.H=d8e,O=y(v,$)}while(Xb);return O}function a8e(){var p=R.H,y=p.useState()[0];return y=typeof y.then=="function"?vC(y):y,p=p.useState()[0],(mr!==null?mr.memoizedState:null)!==p&&(ln.flags|=1024),y}function bP(){var p=AN!==0;return AN=0,p}function xP(p,y,v){y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~v}function vP(p){if(kN){for(p=p.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}kN=!1}Ip=0,Fi=mr=ln=null,Xb=!1,xC=AN=0,Yb=null}function Io(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fi===null?ln.memoizedState=Fi=p:Fi=Fi.next=p,Fi}function Mi(){if(mr===null){var p=ln.alternate;p=p!==null?p.memoizedState:null}else p=mr.next;var y=Fi===null?ln.memoizedState:Fi.next;if(y!==null)Fi=y,mr=p;else{if(p===null)throw ln.alternate===null?Error(r(467)):Error(r(310));mr=p,p={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Fi===null?ln.memoizedState=Fi=p:Fi=Fi.next=p}return Fi}function wP(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vC(p){var y=xC;return xC+=1,Yb===null&&(Yb=[]),p=lse(Yb,p,y),y=ln,(Fi===null?y.memoizedState:Fi.next)===null&&(y=y.alternate,R.H=y===null||y.memoizedState===null?Kse:Zse),p}function _N(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return vC(p);if(p.$$typeof===C)return ha(p)}throw Error(r(438,String(p)))}function SP(p){var y=null,v=ln.updateQueue;if(v!==null&&(y=v.memoCache),y==null){var $=ln.alternate;$!==null&&($=$.updateQueue,$!==null&&($=$.memoCache,$!=null&&(y={data:$.data.map(function(_){return _.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),v===null&&(v=wP(),ln.updateQueue=v),v.memoCache=y,v=y.data[y.index],v===void 0)for(v=y.data[y.index]=Array(p),$=0;$<p;$++)v[$]=T;return y.index++,v}function zd(p,y){return typeof y=="function"?y(p):y}function TN(p){var y=Mi();return CP(y,mr,p)}function CP(p,y,v){var $=p.queue;if($===null)throw Error(r(311));$.lastRenderedReducer=v;var _=p.baseQueue,O=$.pending;if(O!==null){if(_!==null){var V=_.next;_.next=O.next,O.next=V}y.baseQueue=_=O,$.pending=null}if(O=p.baseState,_===null)p.memoizedState=O;else{y=_.next;var K=V=null,ne=null,ye=y,De=!1;do{var Re=ye.lane&-536870913;if(Re!==ye.lane?(Nn&Re)===Re:(Ip&Re)===Re){var be=ye.revertLane;if(be===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),Re===Hb&&(De=!0);else if((Ip&be)===be){ye=ye.next,be===Hb&&(De=!0);continue}else Re={lane:0,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ne===null?(K=ne=Re,V=O):ne=ne.next=Re,ln.lanes|=be,Bp|=be;Re=ye.action,wg&&v(O,Re),O=ye.hasEagerState?ye.eagerState:v(O,Re)}else be={lane:Re,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ne===null?(K=ne=be,V=O):ne=ne.next=be,ln.lanes|=Re,Bp|=Re;ye=ye.next}while(ye!==null&&ye!==y);if(ne===null?V=O:ne.next=K,!ml(O,p.memoizedState)&&(xs=!0,De&&(v=Gb,v!==null)))throw v;p.memoizedState=O,p.baseState=V,p.baseQueue=ne,$.lastRenderedState=O}return _===null&&($.lanes=0),[p.memoizedState,$.dispatch]}function $P(p){var y=Mi(),v=y.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var $=v.dispatch,_=v.pending,O=y.memoizedState;if(_!==null){v.pending=null;var V=_=_.next;do O=p(O,V.action),V=V.next;while(V!==_);ml(O,y.memoizedState)||(xs=!0),y.memoizedState=O,y.baseQueue===null&&(y.baseState=O),v.lastRenderedState=O}return[O,$]}function gse(p,y,v){var $=ln,_=Mi(),O=jn;if(O){if(v===void 0)throw Error(r(407));v=v()}else v=y();var V=!ml((mr||_).memoizedState,v);V&&(_.memoizedState=v,xs=!0),_=_.queue;var K=xse.bind(null,$,_,p);if(wC(2048,8,K,[p]),_.getSnapshot!==y||V||Fi!==null&&Fi.memoizedState.tag&1){if($.flags|=2048,Kb(9,NN(),bse.bind(null,$,_,v,y),null),Or===null)throw Error(r(349));O||(Ip&124)!==0||yse($,y,v)}return v}function yse(p,y,v){p.flags|=16384,p={getSnapshot:y,value:v},y=ln.updateQueue,y===null?(y=wP(),ln.updateQueue=y,y.stores=[p]):(v=y.stores,v===null?y.stores=[p]:v.push(p))}function bse(p,y,v,$){y.value=v,y.getSnapshot=$,vse(y)&&wse(p)}function xse(p,y,v){return v(function(){vse(y)&&wse(p)})}function vse(p){var y=p.getSnapshot;p=p.value;try{var v=y();return!ml(p,v)}catch{return!0}}function wse(p){var y=jb(p,2);y!==null&&wl(y,p,2)}function EP(p){var y=Io();if(typeof p=="function"){var v=p;if(p=v(),wg){wt(!0);try{v()}finally{wt(!1)}}}return y.memoizedState=y.baseState=p,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:p},y}function Sse(p,y,v,$){return p.baseState=v,CP(p,mr,typeof $=="function"?$:zd)}function o8e(p,y,v,$,_){if(IN(p))throw Error(r(485));if(p=y.action,p!==null){var O={payload:_,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){O.listeners.push(V)}};R.T!==null?v(!0):O.isTransition=!1,$(O),v=y.pending,v===null?(O.next=y.pending=O,Cse(y,O)):(O.next=v.next,y.pending=v.next=O)}}function Cse(p,y){var v=y.action,$=y.payload,_=p.state;if(y.isTransition){var O=R.T,V={};R.T=V;try{var K=v(_,$),ne=R.S;ne!==null&&ne(V,K),$se(p,y,K)}catch(ye){kP(p,y,ye)}finally{R.T=O}}else try{O=v(_,$),$se(p,y,O)}catch(ye){kP(p,y,ye)}}function $se(p,y,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function($){Ese(p,y,$)},function($){return kP(p,y,$)}):Ese(p,y,v)}function Ese(p,y,v){y.status="fulfilled",y.value=v,kse(y),p.state=v,y=p.pending,y!==null&&(v=y.next,v===y?p.pending=null:(v=v.next,y.next=v,Cse(p,v)))}function kP(p,y,v){var $=p.pending;if(p.pending=null,$!==null){$=$.next;do y.status="rejected",y.reason=v,kse(y),y=y.next;while(y!==$)}p.action=null}function kse(p){p=p.listeners;for(var y=0;y<p.length;y++)(0,p[y])()}function Ase(p,y){return y}function _se(p,y){if(jn){var v=Or.formState;if(v!==null){e:{var $=ln;if(jn){if(ai){t:{for(var _=ai,O=Kc;_.nodeType!==8;){if(!O){_=null;break t}if(_=Xu(_.nextSibling),_===null){_=null;break t}}O=_.data,_=O==="F!"||O==="F"?_:null}if(_){ai=Xu(_.nextSibling),$=_.data==="F!";break e}}yg($)}$=!1}$&&(y=v[0])}}return v=Io(),v.memoizedState=v.baseState=y,$={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ase,lastRenderedState:y},v.queue=$,v=qse.bind(null,ln,$),$.dispatch=v,$=EP(!1),O=DP.bind(null,ln,!1,$.queue),$=Io(),_={state:y,dispatch:null,action:p,pending:null},$.queue=_,v=o8e.bind(null,ln,_,O,v),_.dispatch=v,$.memoizedState=p,[y,v,!1]}function Tse(p){var y=Mi();return Nse(y,mr,p)}function Nse(p,y,v){if(y=CP(p,y,Ase)[0],p=TN(zd)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var $=vC(y)}catch(V){throw V===pC?CN:V}else $=y;y=Mi();var _=y.queue,O=_.dispatch;return v!==y.memoizedState&&(ln.flags|=2048,Kb(9,NN(),l8e.bind(null,_,v),null)),[$,O,p]}function l8e(p,y){p.action=y}function Dse(p){var y=Mi(),v=mr;if(v!==null)return Nse(y,v,p);Mi(),y=y.memoizedState,v=Mi();var $=v.queue.dispatch;return v.memoizedState=p,[y,$,!1]}function Kb(p,y,v,$){return p={tag:p,create:v,deps:$,inst:y,next:null},y=ln.updateQueue,y===null&&(y=wP(),ln.updateQueue=y),v=y.lastEffect,v===null?y.lastEffect=p.next=p:($=v.next,v.next=p,p.next=$,y.lastEffect=p),p}function NN(){return{destroy:void 0,resource:void 0}}function Ise(){return Mi().memoizedState}function DN(p,y,v,$){var _=Io();$=$===void 0?null:$,ln.flags|=p,_.memoizedState=Kb(1|y,NN(),v,$)}function wC(p,y,v,$){var _=Mi();$=$===void 0?null:$;var O=_.memoizedState.inst;mr!==null&&$!==null&&gP($,mr.memoizedState.deps)?_.memoizedState=Kb(y,O,v,$):(ln.flags|=p,_.memoizedState=Kb(1|y,O,v,$))}function Ose(p,y){DN(8390656,8,p,y)}function Rse(p,y){wC(2048,8,p,y)}function Fse(p,y){return wC(4,2,p,y)}function Mse(p,y){return wC(4,4,p,y)}function Lse(p,y){if(typeof y=="function"){p=p();var v=y(p);return function(){typeof v=="function"?v():y(null)}}if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function Pse(p,y,v){v=v!=null?v.concat([p]):null,wC(4,4,Lse.bind(null,y,p),v)}function AP(){}function Bse(p,y){var v=Mi();y=y===void 0?null:y;var $=v.memoizedState;return y!==null&&gP(y,$[1])?$[0]:(v.memoizedState=[p,y],p)}function zse(p,y){var v=Mi();y=y===void 0?null:y;var $=v.memoizedState;if(y!==null&&gP(y,$[1]))return $[0];if($=p(),wg){wt(!0);try{p()}finally{wt(!1)}}return v.memoizedState=[$,y],$}function _P(p,y,v){return v===void 0||(Ip&1073741824)!==0?p.memoizedState=y:(p.memoizedState=v,p=Vae(),ln.lanes|=p,Bp|=p,v)}function jse(p,y,v,$){return ml(v,y)?v:qb.current!==null?(p=_P(p,v,$),ml(p,y)||(xs=!0),p):(Ip&42)===0?(xs=!0,p.memoizedState=v):(p=Vae(),ln.lanes|=p,Bp|=p,y)}function Use(p,y,v,$,_){var O=j.p;j.p=O!==0&&8>O?O:8;var V=R.T,K={};R.T=K,DP(p,!1,y,v);try{var ne=_(),ye=R.S;if(ye!==null&&ye(K,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var De=i8e(ne,$);SC(p,y,De,vl(p))}else SC(p,y,$,vl(p))}catch(Re){SC(p,y,{then:function(){},status:"rejected",reason:Re},vl())}finally{j.p=O,R.T=V}}function u8e(){}function TP(p,y,v,$){if(p.tag!==5)throw Error(r(476));var _=Vse(p).queue;Use(p,_,y,H,v===null?u8e:function(){return Wse(p),v($)})}function Vse(p){var y=p.memoizedState;if(y!==null)return y;y={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:H},next:null};var v={};return y.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:v},next:null},p.memoizedState=y,p=p.alternate,p!==null&&(p.memoizedState=y),y}function Wse(p){var y=Vse(p).next.queue;SC(p,y,{},vl())}function NP(){return ha(zC)}function Hse(){return Mi().memoizedState}function Gse(){return Mi().memoizedState}function c8e(p){for(var y=p.return;y!==null;){switch(y.tag){case 24:case 3:var v=vl();p=Np(v);var $=Dp(y,p,v);$!==null&&(wl($,y,v),gC($,y,v)),y={cache:aP()},p.payload=y;return}y=y.return}}function f8e(p,y,v){var $=vl();v={lane:$,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},IN(p)?Xse(y,v):(v=KL(p,y,v,$),v!==null&&(wl(v,p,$),Yse(v,y,$)))}function qse(p,y,v){var $=vl();SC(p,y,v,$)}function SC(p,y,v,$){var _={lane:$,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(IN(p))Xse(y,_);else{var O=p.alternate;if(p.lanes===0&&(O===null||O.lanes===0)&&(O=y.lastRenderedReducer,O!==null))try{var V=y.lastRenderedState,K=O(V,v);if(_.hasEagerState=!0,_.eagerState=K,ml(K,V))return mN(p,y,_,0),Or===null&&pN(),!1}catch{}finally{}if(v=KL(p,y,_,$),v!==null)return wl(v,p,$),Yse(v,y,$),!0}return!1}function DP(p,y,v,$){if($={lane:2,revertLane:uB(),action:$,hasEagerState:!1,eagerState:null,next:null},IN(p)){if(y)throw Error(r(479))}else y=KL(p,v,$,2),y!==null&&wl(y,p,2)}function IN(p){var y=p.alternate;return p===ln||y!==null&&y===ln}function Xse(p,y){Xb=kN=!0;var v=p.pending;v===null?y.next=y:(y.next=v.next,v.next=y),p.pending=y}function Yse(p,y,v){if((v&4194048)!==0){var $=y.lanes;$&=p.pendingLanes,v|=$,y.lanes=v,Id(p,v)}}var ON={readContext:ha,use:_N,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useLayoutEffect:wi,useInsertionEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useSyncExternalStore:wi,useId:wi,useHostTransitionStatus:wi,useFormState:wi,useActionState:wi,useOptimistic:wi,useMemoCache:wi,useCacheRefresh:wi},Kse={readContext:ha,use:_N,useCallback:function(p,y){return Io().memoizedState=[p,y===void 0?null:y],p},useContext:ha,useEffect:Ose,useImperativeHandle:function(p,y,v){v=v!=null?v.concat([p]):null,DN(4194308,4,Lse.bind(null,y,p),v)},useLayoutEffect:function(p,y){return DN(4194308,4,p,y)},useInsertionEffect:function(p,y){DN(4,2,p,y)},useMemo:function(p,y){var v=Io();y=y===void 0?null:y;var $=p();if(wg){wt(!0);try{p()}finally{wt(!1)}}return v.memoizedState=[$,y],$},useReducer:function(p,y,v){var $=Io();if(v!==void 0){var _=v(y);if(wg){wt(!0);try{v(y)}finally{wt(!1)}}}else _=y;return $.memoizedState=$.baseState=_,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:_},$.queue=p,p=p.dispatch=f8e.bind(null,ln,p),[$.memoizedState,p]},useRef:function(p){var y=Io();return p={current:p},y.memoizedState=p},useState:function(p){p=EP(p);var y=p.queue,v=qse.bind(null,ln,y);return y.dispatch=v,[p.memoizedState,v]},useDebugValue:AP,useDeferredValue:function(p,y){var v=Io();return _P(v,p,y)},useTransition:function(){var p=EP(!1);return p=Use.bind(null,ln,p.queue,!0,!1),Io().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,y,v){var $=ln,_=Io();if(jn){if(v===void 0)throw Error(r(407));v=v()}else{if(v=y(),Or===null)throw Error(r(349));(Nn&124)!==0||yse($,y,v)}_.memoizedState=v;var O={value:v,getSnapshot:y};return _.queue=O,Ose(xse.bind(null,$,O,p),[p]),$.flags|=2048,Kb(9,NN(),bse.bind(null,$,O,v,y),null),v},useId:function(){var p=Io(),y=Or.identifierPrefix;if(jn){var v=Ld,$=Md;v=($&~(1<<32-At($)-1)).toString(32)+v,y=""+y+"R"+v,v=AN++,0<v&&(y+="H"+v.toString(32)),y+=""}else v=s8e++,y=""+y+"r"+v.toString(32)+"";return p.memoizedState=y},useHostTransitionStatus:NP,useFormState:_se,useActionState:_se,useOptimistic:function(p){var y=Io();y.memoizedState=y.baseState=p;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=v,y=DP.bind(null,ln,!0,v),v.dispatch=y,[p,y]},useMemoCache:SP,useCacheRefresh:function(){return Io().memoizedState=c8e.bind(null,ln)}},Zse={readContext:ha,use:_N,useCallback:Bse,useContext:ha,useEffect:Rse,useImperativeHandle:Pse,useInsertionEffect:Fse,useLayoutEffect:Mse,useMemo:zse,useReducer:TN,useRef:Ise,useState:function(){return TN(zd)},useDebugValue:AP,useDeferredValue:function(p,y){var v=Mi();return jse(v,mr.memoizedState,p,y)},useTransition:function(){var p=TN(zd)[0],y=Mi().memoizedState;return[typeof p=="boolean"?p:vC(p),y]},useSyncExternalStore:gse,useId:Hse,useHostTransitionStatus:NP,useFormState:Tse,useActionState:Tse,useOptimistic:function(p,y){var v=Mi();return Sse(v,mr,p,y)},useMemoCache:SP,useCacheRefresh:Gse},d8e={readContext:ha,use:_N,useCallback:Bse,useContext:ha,useEffect:Rse,useImperativeHandle:Pse,useInsertionEffect:Fse,useLayoutEffect:Mse,useMemo:zse,useReducer:$P,useRef:Ise,useState:function(){return $P(zd)},useDebugValue:AP,useDeferredValue:function(p,y){var v=Mi();return mr===null?_P(v,p,y):jse(v,mr.memoizedState,p,y)},useTransition:function(){var p=$P(zd)[0],y=Mi().memoizedState;return[typeof p=="boolean"?p:vC(p),y]},useSyncExternalStore:gse,useId:Hse,useHostTransitionStatus:NP,useFormState:Dse,useActionState:Dse,useOptimistic:function(p,y){var v=Mi();return mr!==null?Sse(v,mr,p,y):(v.baseState=p,[p,v.queue.dispatch])},useMemoCache:SP,useCacheRefresh:Gse},Zb=null,CC=0;function RN(p){var y=CC;return CC+=1,Zb===null&&(Zb=[]),lse(Zb,p,y)}function $C(p,y){y=y.props.ref,p.ref=y!==void 0?y:null}function FN(p,y){throw y.$$typeof===f?Error(r(525)):(p=Object.prototype.toString.call(y),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p)))}function Qse(p){var y=p._init;return y(p._payload)}function Jse(p){function y(fe,le){if(p){var ge=fe.deletions;ge===null?(fe.deletions=[le],fe.flags|=16):ge.push(le)}}function v(fe,le){if(!p)return null;for(;le!==null;)y(fe,le),le=le.sibling;return null}function $(fe){for(var le=new Map;fe!==null;)fe.key!==null?le.set(fe.key,fe):le.set(fe.index,fe),fe=fe.sibling;return le}function _(fe,le){return fe=Fd(fe,le),fe.index=0,fe.sibling=null,fe}function O(fe,le,ge){return fe.index=ge,p?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<le?(fe.flags|=67108866,le):ge):(fe.flags|=67108866,le)):(fe.flags|=1048576,le)}function V(fe){return p&&fe.alternate===null&&(fe.flags|=67108866),fe}function K(fe,le,ge,Ie){return le===null||le.tag!==6?(le=QL(ge,fe.mode,Ie),le.return=fe,le):(le=_(le,ge),le.return=fe,le)}function ne(fe,le,ge,Ie){var dt=ge.type;return dt===m?De(fe,le,ge.props.children,Ie,ge.key):le!==null&&(le.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===N&&Qse(dt)===le.type)?(le=_(le,ge.props),$C(le,ge),le.return=fe,le):(le=yN(ge.type,ge.key,ge.props,null,fe.mode,Ie),$C(le,ge),le.return=fe,le)}function ye(fe,le,ge,Ie){return le===null||le.tag!==4||le.stateNode.containerInfo!==ge.containerInfo||le.stateNode.implementation!==ge.implementation?(le=JL(ge,fe.mode,Ie),le.return=fe,le):(le=_(le,ge.children||[]),le.return=fe,le)}function De(fe,le,ge,Ie,dt){return le===null||le.tag!==7?(le=hg(ge,fe.mode,Ie,dt),le.return=fe,le):(le=_(le,ge),le.return=fe,le)}function Re(fe,le,ge){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=QL(""+le,fe.mode,ge),le.return=fe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case d:return ge=yN(le.type,le.key,le.props,null,fe.mode,ge),$C(ge,le),ge.return=fe,ge;case h:return le=JL(le,fe.mode,ge),le.return=fe,le;case N:var Ie=le._init;return le=Ie(le._payload),Re(fe,le,ge)}if(F(le)||L(le))return le=hg(le,fe.mode,ge,null),le.return=fe,le;if(typeof le.then=="function")return Re(fe,RN(le),ge);if(le.$$typeof===C)return Re(fe,wN(fe,le),ge);FN(fe,le)}return null}function be(fe,le,ge,Ie){var dt=le!==null?le.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return dt!==null?null:K(fe,le,""+ge,Ie);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case d:return ge.key===dt?ne(fe,le,ge,Ie):null;case h:return ge.key===dt?ye(fe,le,ge,Ie):null;case N:return dt=ge._init,ge=dt(ge._payload),be(fe,le,ge,Ie)}if(F(ge)||L(ge))return dt!==null?null:De(fe,le,ge,Ie,null);if(typeof ge.then=="function")return be(fe,le,RN(ge),Ie);if(ge.$$typeof===C)return be(fe,le,wN(fe,ge),Ie);FN(fe,ge)}return null}function ve(fe,le,ge,Ie,dt){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return fe=fe.get(ge)||null,K(le,fe,""+Ie,dt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case d:return fe=fe.get(Ie.key===null?ge:Ie.key)||null,ne(le,fe,Ie,dt);case h:return fe=fe.get(Ie.key===null?ge:Ie.key)||null,ye(le,fe,Ie,dt);case N:var mn=Ie._init;return Ie=mn(Ie._payload),ve(fe,le,ge,Ie,dt)}if(F(Ie)||L(Ie))return fe=fe.get(ge)||null,De(le,fe,Ie,dt,null);if(typeof Ie.then=="function")return ve(fe,le,ge,RN(Ie),dt);if(Ie.$$typeof===C)return ve(fe,le,ge,wN(le,Ie),dt);FN(le,Ie)}return null}function Ut(fe,le,ge,Ie){for(var dt=null,mn=null,kt=le,Bt=le=0,ws=null;kt!==null&&Bt<ge.length;Bt++){kt.index>Bt?(ws=kt,kt=null):ws=kt.sibling;var Ln=be(fe,kt,ge[Bt],Ie);if(Ln===null){kt===null&&(kt=ws);break}p&&kt&&Ln.alternate===null&&y(fe,kt),le=O(Ln,le,Bt),mn===null?dt=Ln:mn.sibling=Ln,mn=Ln,kt=ws}if(Bt===ge.length)return v(fe,kt),jn&&mg(fe,Bt),dt;if(kt===null){for(;Bt<ge.length;Bt++)kt=Re(fe,ge[Bt],Ie),kt!==null&&(le=O(kt,le,Bt),mn===null?dt=kt:mn.sibling=kt,mn=kt);return jn&&mg(fe,Bt),dt}for(kt=$(kt);Bt<ge.length;Bt++)ws=ve(kt,fe,Bt,ge[Bt],Ie),ws!==null&&(p&&ws.alternate!==null&&kt.delete(ws.key===null?Bt:ws.key),le=O(ws,le,Bt),mn===null?dt=ws:mn.sibling=ws,mn=ws);return p&&kt.forEach(function(Xp){return y(fe,Xp)}),jn&&mg(fe,Bt),dt}function Pt(fe,le,ge,Ie){if(ge==null)throw Error(r(151));for(var dt=null,mn=null,kt=le,Bt=le=0,ws=null,Ln=ge.next();kt!==null&&!Ln.done;Bt++,Ln=ge.next()){kt.index>Bt?(ws=kt,kt=null):ws=kt.sibling;var Xp=be(fe,kt,Ln.value,Ie);if(Xp===null){kt===null&&(kt=ws);break}p&&kt&&Xp.alternate===null&&y(fe,kt),le=O(Xp,le,Bt),mn===null?dt=Xp:mn.sibling=Xp,mn=Xp,kt=ws}if(Ln.done)return v(fe,kt),jn&&mg(fe,Bt),dt;if(kt===null){for(;!Ln.done;Bt++,Ln=ge.next())Ln=Re(fe,Ln.value,Ie),Ln!==null&&(le=O(Ln,le,Bt),mn===null?dt=Ln:mn.sibling=Ln,mn=Ln);return jn&&mg(fe,Bt),dt}for(kt=$(kt);!Ln.done;Bt++,Ln=ge.next())Ln=ve(kt,fe,Bt,Ln.value,Ie),Ln!==null&&(p&&Ln.alternate!==null&&kt.delete(Ln.key===null?Bt:Ln.key),le=O(Ln,le,Bt),mn===null?dt=Ln:mn.sibling=Ln,mn=Ln);return p&&kt.forEach(function(h9e){return y(fe,h9e)}),jn&&mg(fe,Bt),dt}function yr(fe,le,ge,Ie){if(typeof ge=="object"&&ge!==null&&ge.type===m&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case d:e:{for(var dt=ge.key;le!==null;){if(le.key===dt){if(dt=ge.type,dt===m){if(le.tag===7){v(fe,le.sibling),Ie=_(le,ge.props.children),Ie.return=fe,fe=Ie;break e}}else if(le.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===N&&Qse(dt)===le.type){v(fe,le.sibling),Ie=_(le,ge.props),$C(Ie,ge),Ie.return=fe,fe=Ie;break e}v(fe,le);break}else y(fe,le);le=le.sibling}ge.type===m?(Ie=hg(ge.props.children,fe.mode,Ie,ge.key),Ie.return=fe,fe=Ie):(Ie=yN(ge.type,ge.key,ge.props,null,fe.mode,Ie),$C(Ie,ge),Ie.return=fe,fe=Ie)}return V(fe);case h:e:{for(dt=ge.key;le!==null;){if(le.key===dt)if(le.tag===4&&le.stateNode.containerInfo===ge.containerInfo&&le.stateNode.implementation===ge.implementation){v(fe,le.sibling),Ie=_(le,ge.children||[]),Ie.return=fe,fe=Ie;break e}else{v(fe,le);break}else y(fe,le);le=le.sibling}Ie=JL(ge,fe.mode,Ie),Ie.return=fe,fe=Ie}return V(fe);case N:return dt=ge._init,ge=dt(ge._payload),yr(fe,le,ge,Ie)}if(F(ge))return Ut(fe,le,ge,Ie);if(L(ge)){if(dt=L(ge),typeof dt!="function")throw Error(r(150));return ge=dt.call(ge),Pt(fe,le,ge,Ie)}if(typeof ge.then=="function")return yr(fe,le,RN(ge),Ie);if(ge.$$typeof===C)return yr(fe,le,wN(fe,ge),Ie);FN(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,le!==null&&le.tag===6?(v(fe,le.sibling),Ie=_(le,ge),Ie.return=fe,fe=Ie):(v(fe,le),Ie=QL(ge,fe.mode,Ie),Ie.return=fe,fe=Ie),V(fe)):v(fe,le)}return function(fe,le,ge,Ie){try{CC=0;var dt=yr(fe,le,ge,Ie);return Zb=null,dt}catch(kt){if(kt===pC||kt===CN)throw kt;var mn=gl(29,kt,null,fe.mode);return mn.lanes=Ie,mn.return=fe,mn}finally{}}}var Qb=Jse(!0),eae=Jse(!1),Jl=Y(null),Zc=null;function Op(p){var y=p.alternate;Q(Ji,Ji.current&1),Q(Jl,p),Zc===null&&(y===null||qb.current!==null||y.memoizedState!==null)&&(Zc=p)}function tae(p){if(p.tag===22){if(Q(Ji,Ji.current),Q(Jl,p),Zc===null){var y=p.alternate;y!==null&&y.memoizedState!==null&&(Zc=p)}}else Rp()}function Rp(){Q(Ji,Ji.current),Q(Jl,Jl.current)}function jd(p){Z(Jl),Zc===p&&(Zc=null),Z(Ji)}var Ji=Y(0);function MN(p){for(var y=p;y!==null;){if(y.tag===13){var v=y.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||wB(v)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}function IP(p,y,v,$){y=p.memoizedState,v=v($,y),v=v==null?y:c({},y,v),p.memoizedState=v,p.lanes===0&&(p.updateQueue.baseState=v)}var OP={enqueueSetState:function(p,y,v){p=p._reactInternals;var $=vl(),_=Np($);_.payload=y,v!=null&&(_.callback=v),y=Dp(p,_,$),y!==null&&(wl(y,p,$),gC(y,p,$))},enqueueReplaceState:function(p,y,v){p=p._reactInternals;var $=vl(),_=Np($);_.tag=1,_.payload=y,v!=null&&(_.callback=v),y=Dp(p,_,$),y!==null&&(wl(y,p,$),gC(y,p,$))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var v=vl(),$=Np(v);$.tag=2,y!=null&&($.callback=y),y=Dp(p,$,v),y!==null&&(wl(y,p,v),gC(y,p,v))}};function nae(p,y,v,$,_,O,V){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate($,O,V):y.prototype&&y.prototype.isPureReactComponent?!aC(v,$)||!aC(_,O):!0}function rae(p,y,v,$){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(v,$),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(v,$),y.state!==p&&OP.enqueueReplaceState(y,y.state,null)}function Sg(p,y){var v=y;if("ref"in y){v={};for(var $ in y)$!=="ref"&&(v[$]=y[$])}if(p=p.defaultProps){v===y&&(v=c({},v));for(var _ in p)v[_]===void 0&&(v[_]=p[_])}return v}var LN=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function iae(p){LN(p)}function sae(p){console.error(p)}function aae(p){LN(p)}function PN(p,y){try{var v=p.onUncaughtError;v(y.value,{componentStack:y.stack})}catch($){setTimeout(function(){throw $})}}function oae(p,y,v){try{var $=p.onCaughtError;$(v.value,{componentStack:v.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function RP(p,y,v){return v=Np(v),v.tag=3,v.payload={element:null},v.callback=function(){PN(p,y)},v}function lae(p){return p=Np(p),p.tag=3,p}function uae(p,y,v,$){var _=v.type.getDerivedStateFromError;if(typeof _=="function"){var O=$.value;p.payload=function(){return _(O)},p.callback=function(){oae(y,v,$)}}var V=v.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(p.callback=function(){oae(y,v,$),typeof _!="function"&&(zp===null?zp=new Set([this]):zp.add(this));var K=$.stack;this.componentDidCatch($.value,{componentStack:K!==null?K:""})})}function h8e(p,y,v,$,_){if(v.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){if(y=v.alternate,y!==null&&fC(y,v,_,!0),v=Jl.current,v!==null){switch(v.tag){case 13:return Zc===null?iB():v.alternate===null&&oi===0&&(oi=3),v.flags&=-257,v.flags|=65536,v.lanes=_,$===uP?v.flags|=16384:(y=v.updateQueue,y===null?v.updateQueue=new Set([$]):y.add($),aB(p,$,_)),!1;case 22:return v.flags|=65536,$===uP?v.flags|=16384:(y=v.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([$])},v.updateQueue=y):(v=y.retryQueue,v===null?y.retryQueue=new Set([$]):v.add($)),aB(p,$,_)),!1}throw Error(r(435,v.tag))}return aB(p,$,_),iB(),!1}if(jn)return y=Jl.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=_,$!==nP&&(p=Error(r(422),{cause:$}),cC(Yl(p,v)))):($!==nP&&(y=Error(r(423),{cause:$}),cC(Yl(y,v))),p=p.current.alternate,p.flags|=65536,_&=-_,p.lanes|=_,$=Yl($,v),_=RP(p.stateNode,$,_),dP(p,_),oi!==4&&(oi=2)),!1;var O=Error(r(520),{cause:$});if(O=Yl(O,v),DC===null?DC=[O]:DC.push(O),oi!==4&&(oi=2),y===null)return!0;$=Yl($,v),v=y;do{switch(v.tag){case 3:return v.flags|=65536,p=_&-_,v.lanes|=p,p=RP(v.stateNode,$,p),dP(v,p),!1;case 1:if(y=v.type,O=v.stateNode,(v.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(zp===null||!zp.has(O))))return v.flags|=65536,_&=-_,v.lanes|=_,_=lae(_),uae(_,p,v,$),dP(v,_),!1}v=v.return}while(v!==null);return!1}var cae=Error(r(461)),xs=!1;function Zs(p,y,v,$){y.child=p===null?eae(y,null,v,$):Qb(y,p.child,v,$)}function fae(p,y,v,$,_){v=v.render;var O=y.ref;if("ref"in $){var V={};for(var K in $)K!=="ref"&&(V[K]=$[K])}else V=$;return xg(y),$=yP(p,y,v,V,O,_),K=bP(),p!==null&&!xs?(xP(p,y,_),Ud(p,y,_)):(jn&&K&&eP(y),y.flags|=1,Zs(p,y,$,_),y.child)}function dae(p,y,v,$,_){if(p===null){var O=v.type;return typeof O=="function"&&!ZL(O)&&O.defaultProps===void 0&&v.compare===null?(y.tag=15,y.type=O,hae(p,y,O,$,_)):(p=yN(v.type,null,$,y,y.mode,_),p.ref=y.ref,p.return=y,y.child=p)}if(O=p.child,!UP(p,_)){var V=O.memoizedProps;if(v=v.compare,v=v!==null?v:aC,v(V,$)&&p.ref===y.ref)return Ud(p,y,_)}return y.flags|=1,p=Fd(O,$),p.ref=y.ref,p.return=y,y.child=p}function hae(p,y,v,$,_){if(p!==null){var O=p.memoizedProps;if(aC(O,$)&&p.ref===y.ref)if(xs=!1,y.pendingProps=$=O,UP(p,_))(p.flags&131072)!==0&&(xs=!0);else return y.lanes=p.lanes,Ud(p,y,_)}return FP(p,y,v,$,_)}function pae(p,y,v){var $=y.pendingProps,_=$.children,O=p!==null?p.memoizedState:null;if($.mode==="hidden"){if((y.flags&128)!==0){if($=O!==null?O.baseLanes|v:v,p!==null){for(_=y.child=p.child,O=0;_!==null;)O=O|_.lanes|_.childLanes,_=_.sibling;y.childLanes=O&~$}else y.childLanes=0,y.child=null;return mae(p,y,$,v)}if((v&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},p!==null&&SN(y,O!==null?O.cachePool:null),O!==null?hse(y,O):pP(),tae(y);else return y.lanes=y.childLanes=536870912,mae(p,y,O!==null?O.baseLanes|v:v,v)}else O!==null?(SN(y,O.cachePool),hse(y,O),Rp(),y.memoizedState=null):(p!==null&&SN(y,null),pP(),Rp());return Zs(p,y,_,v),y.child}function mae(p,y,v,$){var _=lP();return _=_===null?null:{parent:Qi._currentValue,pool:_},y.memoizedState={baseLanes:v,cachePool:_},p!==null&&SN(y,null),pP(),tae(y),p!==null&&fC(p,y,$,!0),null}function BN(p,y){var v=y.ref;if(v===null)p!==null&&p.ref!==null&&(y.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(p===null||p.ref!==v)&&(y.flags|=4194816)}}function FP(p,y,v,$,_){return xg(y),v=yP(p,y,v,$,void 0,_),$=bP(),p!==null&&!xs?(xP(p,y,_),Ud(p,y,_)):(jn&&$&&eP(y),y.flags|=1,Zs(p,y,v,_),y.child)}function gae(p,y,v,$,_,O){return xg(y),y.updateQueue=null,v=mse(y,$,v,_),pse(p),$=bP(),p!==null&&!xs?(xP(p,y,O),Ud(p,y,O)):(jn&&$&&eP(y),y.flags|=1,Zs(p,y,v,O),y.child)}function yae(p,y,v,$,_){if(xg(y),y.stateNode===null){var O=Ub,V=v.contextType;typeof V=="object"&&V!==null&&(O=ha(V)),O=new v($,O),y.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=OP,y.stateNode=O,O._reactInternals=y,O=y.stateNode,O.props=$,O.state=y.memoizedState,O.refs={},cP(y),V=v.contextType,O.context=typeof V=="object"&&V!==null?ha(V):Ub,O.state=y.memoizedState,V=v.getDerivedStateFromProps,typeof V=="function"&&(IP(y,v,V,$),O.state=y.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(V=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),V!==O.state&&OP.enqueueReplaceState(O,O.state,null),bC(y,$,O,_),yC(),O.state=y.memoizedState),typeof O.componentDidMount=="function"&&(y.flags|=4194308),$=!0}else if(p===null){O=y.stateNode;var K=y.memoizedProps,ne=Sg(v,K);O.props=ne;var ye=O.context,De=v.contextType;V=Ub,typeof De=="object"&&De!==null&&(V=ha(De));var Re=v.getDerivedStateFromProps;De=typeof Re=="function"||typeof O.getSnapshotBeforeUpdate=="function",K=y.pendingProps!==K,De||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K||ye!==V)&&rae(y,O,$,V),Tp=!1;var be=y.memoizedState;O.state=be,bC(y,$,O,_),yC(),ye=y.memoizedState,K||be!==ye||Tp?(typeof Re=="function"&&(IP(y,v,Re,$),ye=y.memoizedState),(ne=Tp||nae(y,v,ne,$,be,ye,V))?(De||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(y.flags|=4194308)):(typeof O.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=$,y.memoizedState=ye),O.props=$,O.state=ye,O.context=V,$=ne):(typeof O.componentDidMount=="function"&&(y.flags|=4194308),$=!1)}else{O=y.stateNode,fP(p,y),V=y.memoizedProps,De=Sg(v,V),O.props=De,Re=y.pendingProps,be=O.context,ye=v.contextType,ne=Ub,typeof ye=="object"&&ye!==null&&(ne=ha(ye)),K=v.getDerivedStateFromProps,(ye=typeof K=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(V!==Re||be!==ne)&&rae(y,O,$,ne),Tp=!1,be=y.memoizedState,O.state=be,bC(y,$,O,_),yC();var ve=y.memoizedState;V!==Re||be!==ve||Tp||p!==null&&p.dependencies!==null&&vN(p.dependencies)?(typeof K=="function"&&(IP(y,v,K,$),ve=y.memoizedState),(De=Tp||nae(y,v,De,$,be,ve,ne)||p!==null&&p.dependencies!==null&&vN(p.dependencies))?(ye||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate($,ve,ne),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate($,ve,ne)),typeof O.componentDidUpdate=="function"&&(y.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof O.componentDidUpdate!="function"||V===p.memoizedProps&&be===p.memoizedState||(y.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||V===p.memoizedProps&&be===p.memoizedState||(y.flags|=1024),y.memoizedProps=$,y.memoizedState=ve),O.props=$,O.state=ve,O.context=ne,$=De):(typeof O.componentDidUpdate!="function"||V===p.memoizedProps&&be===p.memoizedState||(y.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||V===p.memoizedProps&&be===p.memoizedState||(y.flags|=1024),$=!1)}return O=$,BN(p,y),$=(y.flags&128)!==0,O||$?(O=y.stateNode,v=$&&typeof v.getDerivedStateFromError!="function"?null:O.render(),y.flags|=1,p!==null&&$?(y.child=Qb(y,p.child,null,_),y.child=Qb(y,null,v,_)):Zs(p,y,v,_),y.memoizedState=O.state,p=y.child):p=Ud(p,y,_),p}function bae(p,y,v,$){return uC(),y.flags|=256,Zs(p,y,v,$),y.child}var MP={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function LP(p){return{baseLanes:p,cachePool:sse()}}function PP(p,y,v){return p=p!==null?p.childLanes&~v:0,y&&(p|=eu),p}function xae(p,y,v){var $=y.pendingProps,_=!1,O=(y.flags&128)!==0,V;if((V=O)||(V=p!==null&&p.memoizedState===null?!1:(Ji.current&2)!==0),V&&(_=!0,y.flags&=-129),V=(y.flags&32)!==0,y.flags&=-33,p===null){if(jn){if(_?Op(y):Rp(),jn){var K=ai,ne;if(ne=K){e:{for(ne=K,K=Kc;ne.nodeType!==8;){if(!K){K=null;break e}if(ne=Xu(ne.nextSibling),ne===null){K=null;break e}}K=ne}K!==null?(y.memoizedState={dehydrated:K,treeContext:pg!==null?{id:Md,overflow:Ld}:null,retryLane:536870912,hydrationErrors:null},ne=gl(18,null,null,0),ne.stateNode=K,ne.return=y,y.child=ne,Ka=y,ai=null,ne=!0):ne=!1}ne||yg(y)}if(K=y.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return wB(K)?y.lanes=32:y.lanes=536870912,null;jd(y)}return K=$.children,$=$.fallback,_?(Rp(),_=y.mode,K=zN({mode:"hidden",children:K},_),$=hg($,_,v,null),K.return=y,$.return=y,K.sibling=$,y.child=K,_=y.child,_.memoizedState=LP(v),_.childLanes=PP(p,V,v),y.memoizedState=MP,$):(Op(y),BP(y,K))}if(ne=p.memoizedState,ne!==null&&(K=ne.dehydrated,K!==null)){if(O)y.flags&256?(Op(y),y.flags&=-257,y=zP(p,y,v)):y.memoizedState!==null?(Rp(),y.child=p.child,y.flags|=128,y=null):(Rp(),_=$.fallback,K=y.mode,$=zN({mode:"visible",children:$.children},K),_=hg(_,K,v,null),_.flags|=2,$.return=y,_.return=y,$.sibling=_,y.child=$,Qb(y,p.child,null,v),$=y.child,$.memoizedState=LP(v),$.childLanes=PP(p,V,v),y.memoizedState=MP,y=_);else if(Op(y),wB(K)){if(V=K.nextSibling&&K.nextSibling.dataset,V)var ye=V.dgst;V=ye,$=Error(r(419)),$.stack="",$.digest=V,cC({value:$,source:null,stack:null}),y=zP(p,y,v)}else if(xs||fC(p,y,v,!1),V=(v&p.childLanes)!==0,xs||V){if(V=Or,V!==null&&($=v&-v,$=($&42)!==0?1:Ya($),$=($&(V.suspendedLanes|v))!==0?0:$,$!==0&&$!==ne.retryLane))throw ne.retryLane=$,jb(p,$),wl(V,p,$),cae;K.data==="$?"||iB(),y=zP(p,y,v)}else K.data==="$?"?(y.flags|=192,y.child=p.child,y=null):(p=ne.treeContext,ai=Xu(K.nextSibling),Ka=y,jn=!0,gg=null,Kc=!1,p!==null&&(Zl[Ql++]=Md,Zl[Ql++]=Ld,Zl[Ql++]=pg,Md=p.id,Ld=p.overflow,pg=y),y=BP(y,$.children),y.flags|=4096);return y}return _?(Rp(),_=$.fallback,K=y.mode,ne=p.child,ye=ne.sibling,$=Fd(ne,{mode:"hidden",children:$.children}),$.subtreeFlags=ne.subtreeFlags&65011712,ye!==null?_=Fd(ye,_):(_=hg(_,K,v,null),_.flags|=2),_.return=y,$.return=y,$.sibling=_,y.child=$,$=_,_=y.child,K=p.child.memoizedState,K===null?K=LP(v):(ne=K.cachePool,ne!==null?(ye=Qi._currentValue,ne=ne.parent!==ye?{parent:ye,pool:ye}:ne):ne=sse(),K={baseLanes:K.baseLanes|v,cachePool:ne}),_.memoizedState=K,_.childLanes=PP(p,V,v),y.memoizedState=MP,$):(Op(y),v=p.child,p=v.sibling,v=Fd(v,{mode:"visible",children:$.children}),v.return=y,v.sibling=null,p!==null&&(V=y.deletions,V===null?(y.deletions=[p],y.flags|=16):V.push(p)),y.child=v,y.memoizedState=null,v)}function BP(p,y){return y=zN({mode:"visible",children:y},p.mode),y.return=p,p.child=y}function zN(p,y){return p=gl(22,p,null,y),p.lanes=0,p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},p}function zP(p,y,v){return Qb(y,p.child,null,v),p=BP(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function vae(p,y,v){p.lanes|=y;var $=p.alternate;$!==null&&($.lanes|=y),iP(p.return,y,v)}function jP(p,y,v,$,_){var O=p.memoizedState;O===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:$,tail:v,tailMode:_}:(O.isBackwards=y,O.rendering=null,O.renderingStartTime=0,O.last=$,O.tail=v,O.tailMode=_)}function wae(p,y,v){var $=y.pendingProps,_=$.revealOrder,O=$.tail;if(Zs(p,y,$.children,v),$=Ji.current,($&2)!==0)$=$&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&vae(p,v,y);else if(p.tag===19)vae(p,v,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}$&=1}switch(Q(Ji,$),_){case"forwards":for(v=y.child,_=null;v!==null;)p=v.alternate,p!==null&&MN(p)===null&&(_=v),v=v.sibling;v=_,v===null?(_=y.child,y.child=null):(_=v.sibling,v.sibling=null),jP(y,!1,_,v,O);break;case"backwards":for(v=null,_=y.child,y.child=null;_!==null;){if(p=_.alternate,p!==null&&MN(p)===null){y.child=_;break}p=_.sibling,_.sibling=v,v=_,_=p}jP(y,!0,v,null,O);break;case"together":jP(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Ud(p,y,v){if(p!==null&&(y.dependencies=p.dependencies),Bp|=y.lanes,(v&y.childLanes)===0)if(p!==null){if(fC(p,y,v,!1),(v&y.childLanes)===0)return null}else return null;if(p!==null&&y.child!==p.child)throw Error(r(153));if(y.child!==null){for(p=y.child,v=Fd(p,p.pendingProps),y.child=v,v.return=y;p.sibling!==null;)p=p.sibling,v=v.sibling=Fd(p,p.pendingProps),v.return=y;v.sibling=null}return y.child}function UP(p,y){return(p.lanes&y)!==0?!0:(p=p.dependencies,!!(p!==null&&vN(p)))}function p8e(p,y,v){switch(y.tag){case 3:Le(y,y.stateNode.containerInfo),_p(y,Qi,p.memoizedState.cache),uC();break;case 27:case 5:xe(y);break;case 4:Le(y,y.stateNode.containerInfo);break;case 10:_p(y,y.type,y.memoizedProps.value);break;case 13:var $=y.memoizedState;if($!==null)return $.dehydrated!==null?(Op(y),y.flags|=128,null):(v&y.child.childLanes)!==0?xae(p,y,v):(Op(y),p=Ud(p,y,v),p!==null?p.sibling:null);Op(y);break;case 19:var _=(p.flags&128)!==0;if($=(v&y.childLanes)!==0,$||(fC(p,y,v,!1),$=(v&y.childLanes)!==0),_){if($)return wae(p,y,v);y.flags|=128}if(_=y.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Q(Ji,Ji.current),$)break;return null;case 22:case 23:return y.lanes=0,pae(p,y,v);case 24:_p(y,Qi,p.memoizedState.cache)}return Ud(p,y,v)}function Sae(p,y,v){if(p!==null)if(p.memoizedProps!==y.pendingProps)xs=!0;else{if(!UP(p,v)&&(y.flags&128)===0)return xs=!1,p8e(p,y,v);xs=(p.flags&131072)!==0}else xs=!1,jn&&(y.flags&1048576)!==0&&Qie(y,xN,y.index);switch(y.lanes=0,y.tag){case 16:e:{p=y.pendingProps;var $=y.elementType,_=$._init;if($=_($._payload),y.type=$,typeof $=="function")ZL($)?(p=Sg($,p),y.tag=1,y=yae(null,y,$,p,v)):(y.tag=0,y=FP(null,y,$,p,v));else{if($!=null){if(_=$.$$typeof,_===S){y.tag=11,y=fae(null,y,$,p,v);break e}else if(_===k){y.tag=14,y=dae(null,y,$,p,v);break e}}throw y=M($)||$,Error(r(306,y,""))}}return y;case 0:return FP(p,y,y.type,y.pendingProps,v);case 1:return $=y.type,_=Sg($,y.pendingProps),yae(p,y,$,_,v);case 3:e:{if(Le(y,y.stateNode.containerInfo),p===null)throw Error(r(387));$=y.pendingProps;var O=y.memoizedState;_=O.element,fP(p,y),bC(y,$,null,v);var V=y.memoizedState;if($=V.cache,_p(y,Qi,$),$!==O.cache&&sP(y,[Qi],v,!0),yC(),$=V.element,O.isDehydrated)if(O={element:$,isDehydrated:!1,cache:V.cache},y.updateQueue.baseState=O,y.memoizedState=O,y.flags&256){y=bae(p,y,$,v);break e}else if($!==_){_=Yl(Error(r(424)),y),cC(_),y=bae(p,y,$,v);break e}else{switch(p=y.stateNode.containerInfo,p.nodeType){case 9:p=p.body;break;default:p=p.nodeName==="HTML"?p.ownerDocument.body:p}for(ai=Xu(p.firstChild),Ka=y,jn=!0,gg=null,Kc=!0,v=eae(y,null,$,v),y.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(uC(),$===_){y=Ud(p,y,v);break e}Zs(p,y,$,v)}y=y.child}return y;case 26:return BN(p,y),p===null?(v=koe(y.type,null,y.pendingProps,null))?y.memoizedState=v:jn||(v=y.type,p=y.pendingProps,$=e4(de.current).createElement(v),$[gs]=y,$[da]=p,Js($,v,p),Ri($),y.stateNode=$):y.memoizedState=koe(y.type,p.memoizedProps,y.pendingProps,p.memoizedState),null;case 27:return xe(y),p===null&&jn&&($=y.stateNode=Coe(y.type,y.pendingProps,de.current),Ka=y,Kc=!0,_=ai,Vp(y.type)?(SB=_,ai=Xu($.firstChild)):ai=_),Zs(p,y,y.pendingProps.children,v),BN(p,y),p===null&&(y.flags|=4194304),y.child;case 5:return p===null&&jn&&((_=$=ai)&&($=U8e($,y.type,y.pendingProps,Kc),$!==null?(y.stateNode=$,Ka=y,ai=Xu($.firstChild),Kc=!1,_=!0):_=!1),_||yg(y)),xe(y),_=y.type,O=y.pendingProps,V=p!==null?p.memoizedProps:null,$=O.children,bB(_,O)?$=null:V!==null&&bB(_,V)&&(y.flags|=32),y.memoizedState!==null&&(_=yP(p,y,a8e,null,null,v),zC._currentValue=_),BN(p,y),Zs(p,y,$,v),y.child;case 6:return p===null&&jn&&((p=v=ai)&&(v=V8e(v,y.pendingProps,Kc),v!==null?(y.stateNode=v,Ka=y,ai=null,p=!0):p=!1),p||yg(y)),null;case 13:return xae(p,y,v);case 4:return Le(y,y.stateNode.containerInfo),$=y.pendingProps,p===null?y.child=Qb(y,null,$,v):Zs(p,y,$,v),y.child;case 11:return fae(p,y,y.type,y.pendingProps,v);case 7:return Zs(p,y,y.pendingProps,v),y.child;case 8:return Zs(p,y,y.pendingProps.children,v),y.child;case 12:return Zs(p,y,y.pendingProps.children,v),y.child;case 10:return $=y.pendingProps,_p(y,y.type,$.value),Zs(p,y,$.children,v),y.child;case 9:return _=y.type._context,$=y.pendingProps.children,xg(y),_=ha(_),$=$(_),y.flags|=1,Zs(p,y,$,v),y.child;case 14:return dae(p,y,y.type,y.pendingProps,v);case 15:return hae(p,y,y.type,y.pendingProps,v);case 19:return wae(p,y,v);case 31:return $=y.pendingProps,v=y.mode,$={mode:$.mode,children:$.children},p===null?(v=zN($,v),v.ref=y.ref,y.child=v,v.return=y,y=v):(v=Fd(p.child,$),v.ref=y.ref,y.child=v,v.return=y,y=v),y;case 22:return pae(p,y,v);case 24:return xg(y),$=ha(Qi),p===null?(_=lP(),_===null&&(_=Or,O=aP(),_.pooledCache=O,O.refCount++,O!==null&&(_.pooledCacheLanes|=v),_=O),y.memoizedState={parent:$,cache:_},cP(y),_p(y,Qi,_)):((p.lanes&v)!==0&&(fP(p,y),bC(y,null,null,v),yC()),_=p.memoizedState,O=y.memoizedState,_.parent!==$?(_={parent:$,cache:$},y.memoizedState=_,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=_),_p(y,Qi,$)):($=O.cache,_p(y,Qi,$),$!==_.cache&&sP(y,[Qi],v,!0))),Zs(p,y,y.pendingProps.children,v),y.child;case 29:throw y.pendingProps}throw Error(r(156,y.tag))}function Vd(p){p.flags|=4}function Cae(p,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!Doe(y)){if(y=Jl.current,y!==null&&((Nn&4194048)===Nn?Zc!==null:(Nn&62914560)!==Nn&&(Nn&536870912)===0||y!==Zc))throw mC=uP,ase;p.flags|=8192}}function jN(p,y){y!==null&&(p.flags|=4),p.flags&16384&&(y=p.tag!==22?vp():536870912,p.lanes|=y,n2|=y)}function EC(p,y){if(!jn)switch(p.tailMode){case"hidden":y=p.tail;for(var v=null;y!==null;)y.alternate!==null&&(v=y),y=y.sibling;v===null?p.tail=null:v.sibling=null;break;case"collapsed":v=p.tail;for(var $=null;v!==null;)v.alternate!==null&&($=v),v=v.sibling;$===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:$.sibling=null}}function ti(p){var y=p.alternate!==null&&p.alternate.child===p.child,v=0,$=0;if(y)for(var _=p.child;_!==null;)v|=_.lanes|_.childLanes,$|=_.subtreeFlags&65011712,$|=_.flags&65011712,_.return=p,_=_.sibling;else for(_=p.child;_!==null;)v|=_.lanes|_.childLanes,$|=_.subtreeFlags,$|=_.flags,_.return=p,_=_.sibling;return p.subtreeFlags|=$,p.childLanes=v,y}function m8e(p,y,v){var $=y.pendingProps;switch(tP(y),y.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(y),null;case 1:return ti(y),null;case 3:return v=y.stateNode,$=null,p!==null&&($=p.memoizedState.cache),y.memoizedState.cache!==$&&(y.flags|=2048),Bd(Qi),me(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(p===null||p.child===null)&&(lC(y)?Vd(y):p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,tse())),ti(y),null;case 26:return v=y.memoizedState,p===null?(Vd(y),v!==null?(ti(y),Cae(y,v)):(ti(y),y.flags&=-16777217)):v?v!==p.memoizedState?(Vd(y),ti(y),Cae(y,v)):(ti(y),y.flags&=-16777217):(p.memoizedProps!==$&&Vd(y),ti(y),y.flags&=-16777217),null;case 27:Ee(y),v=de.current;var _=y.type;if(p!==null&&y.stateNode!=null)p.memoizedProps!==$&&Vd(y);else{if(!$){if(y.stateNode===null)throw Error(r(166));return ti(y),null}p=se.current,lC(y)?Jie(y):(p=Coe(_,$,v),y.stateNode=p,Vd(y))}return ti(y),null;case 5:if(Ee(y),v=y.type,p!==null&&y.stateNode!=null)p.memoizedProps!==$&&Vd(y);else{if(!$){if(y.stateNode===null)throw Error(r(166));return ti(y),null}if(p=se.current,lC(y))Jie(y);else{switch(_=e4(de.current),p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof $.is=="string"?_.createElement("select",{is:$.is}):_.createElement("select"),$.multiple?p.multiple=!0:$.size&&(p.size=$.size);break;default:p=typeof $.is=="string"?_.createElement(v,{is:$.is}):_.createElement(v)}}p[gs]=y,p[da]=$;e:for(_=y.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break e;for(;_.sibling===null;){if(_.return===null||_.return===y)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}y.stateNode=p;e:switch(Js(p,v,$),v){case"button":case"input":case"select":case"textarea":p=!!$.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Vd(y)}}return ti(y),y.flags&=-16777217,null;case 6:if(p&&y.stateNode!=null)p.memoizedProps!==$&&Vd(y);else{if(typeof $!="string"&&y.stateNode===null)throw Error(r(166));if(p=de.current,lC(y)){if(p=y.stateNode,v=y.memoizedProps,$=null,_=Ka,_!==null)switch(_.tag){case 27:case 5:$=_.memoizedProps}p[gs]=y,p=!!(p.nodeValue===v||$!==null&&$.suppressHydrationWarning===!0||goe(p.nodeValue,v)),p||yg(y)}else p=e4(p).createTextNode($),p[gs]=y,y.stateNode=p}return ti(y),null;case 13:if($=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(_=lC(y),$!==null&&$.dehydrated!==null){if(p===null){if(!_)throw Error(r(318));if(_=y.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[gs]=y}else uC(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;ti(y),_=!1}else _=tse(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=_),_=!0;if(!_)return y.flags&256?(jd(y),y):(jd(y),null)}if(jd(y),(y.flags&128)!==0)return y.lanes=v,y;if(v=$!==null,p=p!==null&&p.memoizedState!==null,v){$=y.child,_=null,$.alternate!==null&&$.alternate.memoizedState!==null&&$.alternate.memoizedState.cachePool!==null&&(_=$.alternate.memoizedState.cachePool.pool);var O=null;$.memoizedState!==null&&$.memoizedState.cachePool!==null&&(O=$.memoizedState.cachePool.pool),O!==_&&($.flags|=2048)}return v!==p&&v&&(y.child.flags|=8192),jN(y,y.updateQueue),ti(y),null;case 4:return me(),p===null&&hB(y.stateNode.containerInfo),ti(y),null;case 10:return Bd(y.type),ti(y),null;case 19:if(Z(Ji),_=y.memoizedState,_===null)return ti(y),null;if($=(y.flags&128)!==0,O=_.rendering,O===null)if($)EC(_,!1);else{if(oi!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(O=MN(p),O!==null){for(y.flags|=128,EC(_,!1),p=O.updateQueue,y.updateQueue=p,jN(y,p),y.subtreeFlags=0,p=v,v=y.child;v!==null;)Zie(v,p),v=v.sibling;return Q(Ji,Ji.current&1|2),y.child}p=p.sibling}_.tail!==null&&et()>WN&&(y.flags|=128,$=!0,EC(_,!1),y.lanes=4194304)}else{if(!$)if(p=MN(O),p!==null){if(y.flags|=128,$=!0,p=p.updateQueue,y.updateQueue=p,jN(y,p),EC(_,!0),_.tail===null&&_.tailMode==="hidden"&&!O.alternate&&!jn)return ti(y),null}else 2*et()-_.renderingStartTime>WN&&v!==536870912&&(y.flags|=128,$=!0,EC(_,!1),y.lanes=4194304);_.isBackwards?(O.sibling=y.child,y.child=O):(p=_.last,p!==null?p.sibling=O:y.child=O,_.last=O)}return _.tail!==null?(y=_.tail,_.rendering=y,_.tail=y.sibling,_.renderingStartTime=et(),y.sibling=null,p=Ji.current,Q(Ji,$?p&1|2:p&1),y):(ti(y),null);case 22:case 23:return jd(y),mP(),$=y.memoizedState!==null,p!==null?p.memoizedState!==null!==$&&(y.flags|=8192):$&&(y.flags|=8192),$?(v&536870912)!==0&&(y.flags&128)===0&&(ti(y),y.subtreeFlags&6&&(y.flags|=8192)):ti(y),v=y.updateQueue,v!==null&&jN(y,v.retryQueue),v=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(v=p.memoizedState.cachePool.pool),$=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&($=y.memoizedState.cachePool.pool),$!==v&&(y.flags|=2048),p!==null&&Z(vg),null;case 24:return v=null,p!==null&&(v=p.memoizedState.cache),y.memoizedState.cache!==v&&(y.flags|=2048),Bd(Qi),ti(y),null;case 25:return null;case 30:return null}throw Error(r(156,y.tag))}function g8e(p,y){switch(tP(y),y.tag){case 1:return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return Bd(Qi),me(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 26:case 27:case 5:return Ee(y),null;case 13:if(jd(y),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(r(340));uC()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Z(Ji),null;case 4:return me(),null;case 10:return Bd(y.type),null;case 22:case 23:return jd(y),mP(),p!==null&&Z(vg),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 24:return Bd(Qi),null;case 25:return null;default:return null}}function $ae(p,y){switch(tP(y),y.tag){case 3:Bd(Qi),me();break;case 26:case 27:case 5:Ee(y);break;case 4:me();break;case 13:jd(y);break;case 19:Z(Ji);break;case 10:Bd(y.type);break;case 22:case 23:jd(y),mP(),p!==null&&Z(vg);break;case 24:Bd(Qi)}}function kC(p,y){try{var v=y.updateQueue,$=v!==null?v.lastEffect:null;if($!==null){var _=$.next;v=_;do{if((v.tag&p)===p){$=void 0;var O=v.create,V=v.inst;$=O(),V.destroy=$}v=v.next}while(v!==_)}}catch(K){Sr(y,y.return,K)}}function Fp(p,y,v){try{var $=y.updateQueue,_=$!==null?$.lastEffect:null;if(_!==null){var O=_.next;$=O;do{if(($.tag&p)===p){var V=$.inst,K=V.destroy;if(K!==void 0){V.destroy=void 0,_=y;var ne=v,ye=K;try{ye()}catch(De){Sr(_,ne,De)}}}$=$.next}while($!==O)}}catch(De){Sr(y,y.return,De)}}function Eae(p){var y=p.updateQueue;if(y!==null){var v=p.stateNode;try{dse(y,v)}catch($){Sr(p,p.return,$)}}}function kae(p,y,v){v.props=Sg(p.type,p.memoizedProps),v.state=p.memoizedState;try{v.componentWillUnmount()}catch($){Sr(p,y,$)}}function AC(p,y){try{var v=p.ref;if(v!==null){switch(p.tag){case 26:case 27:case 5:var $=p.stateNode;break;case 30:$=p.stateNode;break;default:$=p.stateNode}typeof v=="function"?p.refCleanup=v($):v.current=$}}catch(_){Sr(p,y,_)}}function Qc(p,y){var v=p.ref,$=p.refCleanup;if(v!==null)if(typeof $=="function")try{$()}catch(_){Sr(p,y,_)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(_){Sr(p,y,_)}else v.current=null}function Aae(p){var y=p.type,v=p.memoizedProps,$=p.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":v.autoFocus&&$.focus();break e;case"img":v.src?$.src=v.src:v.srcSet&&($.srcset=v.srcSet)}}catch(_){Sr(p,p.return,_)}}function VP(p,y,v){try{var $=p.stateNode;L8e($,p.type,v,y),$[da]=y}catch(_){Sr(p,p.return,_)}}function _ae(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&Vp(p.type)||p.tag===4}function WP(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||_ae(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&Vp(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function HP(p,y,v){var $=p.tag;if($===5||$===6)p=p.stateNode,y?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(p,y):(y=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,y.appendChild(p),v=v._reactRootContainer,v!=null||y.onclick!==null||(y.onclick=JN));else if($!==4&&($===27&&Vp(p.type)&&(v=p.stateNode,y=null),p=p.child,p!==null))for(HP(p,y,v),p=p.sibling;p!==null;)HP(p,y,v),p=p.sibling}function UN(p,y,v){var $=p.tag;if($===5||$===6)p=p.stateNode,y?v.insertBefore(p,y):v.appendChild(p);else if($!==4&&($===27&&Vp(p.type)&&(v=p.stateNode),p=p.child,p!==null))for(UN(p,y,v),p=p.sibling;p!==null;)UN(p,y,v),p=p.sibling}function Tae(p){var y=p.stateNode,v=p.memoizedProps;try{for(var $=p.type,_=y.attributes;_.length;)y.removeAttributeNode(_[0]);Js(y,$,v),y[gs]=p,y[da]=v}catch(O){Sr(p,p.return,O)}}var Wd=!1,Si=!1,GP=!1,Nae=typeof WeakSet=="function"?WeakSet:Set,vs=null;function y8e(p,y){if(p=p.containerInfo,gB=a4,p=jie(p),WL(p)){if("selectionStart"in p)var v={start:p.selectionStart,end:p.selectionEnd};else e:{v=(v=p.ownerDocument)&&v.defaultView||window;var $=v.getSelection&&v.getSelection();if($&&$.rangeCount!==0){v=$.anchorNode;var _=$.anchorOffset,O=$.focusNode;$=$.focusOffset;try{v.nodeType,O.nodeType}catch{v=null;break e}var V=0,K=-1,ne=-1,ye=0,De=0,Re=p,be=null;t:for(;;){for(var ve;Re!==v||_!==0&&Re.nodeType!==3||(K=V+_),Re!==O||$!==0&&Re.nodeType!==3||(ne=V+$),Re.nodeType===3&&(V+=Re.nodeValue.length),(ve=Re.firstChild)!==null;)be=Re,Re=ve;for(;;){if(Re===p)break t;if(be===v&&++ye===_&&(K=V),be===O&&++De===$&&(ne=V),(ve=Re.nextSibling)!==null)break;Re=be,be=Re.parentNode}Re=ve}v=K===-1||ne===-1?null:{start:K,end:ne}}else v=null}v=v||{start:0,end:0}}else v=null;for(yB={focusedElem:p,selectionRange:v},a4=!1,vs=y;vs!==null;)if(y=vs,p=y.child,(y.subtreeFlags&1024)!==0&&p!==null)p.return=y,vs=p;else for(;vs!==null;){switch(y=vs,O=y.alternate,p=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&O!==null){p=void 0,v=y,_=O.memoizedProps,O=O.memoizedState,$=v.stateNode;try{var Ut=Sg(v.type,_,v.elementType===v.type);p=$.getSnapshotBeforeUpdate(Ut,O),$.__reactInternalSnapshotBeforeUpdate=p}catch(Pt){Sr(v,v.return,Pt)}}break;case 3:if((p&1024)!==0){if(p=y.stateNode.containerInfo,v=p.nodeType,v===9)vB(p);else if(v===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":vB(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=y.sibling,p!==null){p.return=y.return,vs=p;break}vs=y.return}}function Dae(p,y,v){var $=v.flags;switch(v.tag){case 0:case 11:case 15:Mp(p,v),$&4&&kC(5,v);break;case 1:if(Mp(p,v),$&4)if(p=v.stateNode,y===null)try{p.componentDidMount()}catch(V){Sr(v,v.return,V)}else{var _=Sg(v.type,y.memoizedProps);y=y.memoizedState;try{p.componentDidUpdate(_,y,p.__reactInternalSnapshotBeforeUpdate)}catch(V){Sr(v,v.return,V)}}$&64&&Eae(v),$&512&&AC(v,v.return);break;case 3:if(Mp(p,v),$&64&&(p=v.updateQueue,p!==null)){if(y=null,v.child!==null)switch(v.child.tag){case 27:case 5:y=v.child.stateNode;break;case 1:y=v.child.stateNode}try{dse(p,y)}catch(V){Sr(v,v.return,V)}}break;case 27:y===null&&$&4&&Tae(v);case 26:case 5:Mp(p,v),y===null&&$&4&&Aae(v),$&512&&AC(v,v.return);break;case 12:Mp(p,v);break;case 13:Mp(p,v),$&4&&Rae(p,v),$&64&&(p=v.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(v=k8e.bind(null,v),W8e(p,v))));break;case 22:if($=v.memoizedState!==null||Wd,!$){y=y!==null&&y.memoizedState!==null||Si,_=Wd;var O=Si;Wd=$,(Si=y)&&!O?Lp(p,v,(v.subtreeFlags&8772)!==0):Mp(p,v),Wd=_,Si=O}break;case 30:break;default:Mp(p,v)}}function Iae(p){var y=p.alternate;y!==null&&(p.alternate=null,Iae(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&YS(y)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Hr=null,Oo=!1;function Hd(p,y,v){for(v=v.child;v!==null;)Oae(p,y,v),v=v.sibling}function Oae(p,y,v){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Ue,v)}catch{}switch(v.tag){case 26:Si||Qc(v,y),Hd(p,y,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Si||Qc(v,y);var $=Hr,_=Oo;Vp(v.type)&&(Hr=v.stateNode,Oo=!1),Hd(p,y,v),MC(v.stateNode),Hr=$,Oo=_;break;case 5:Si||Qc(v,y);case 6:if($=Hr,_=Oo,Hr=null,Hd(p,y,v),Hr=$,Oo=_,Hr!==null)if(Oo)try{(Hr.nodeType===9?Hr.body:Hr.nodeName==="HTML"?Hr.ownerDocument.body:Hr).removeChild(v.stateNode)}catch(O){Sr(v,y,O)}else try{Hr.removeChild(v.stateNode)}catch(O){Sr(v,y,O)}break;case 18:Hr!==null&&(Oo?(p=Hr,woe(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,v.stateNode),WC(p)):woe(Hr,v.stateNode));break;case 4:$=Hr,_=Oo,Hr=v.stateNode.containerInfo,Oo=!0,Hd(p,y,v),Hr=$,Oo=_;break;case 0:case 11:case 14:case 15:Si||Fp(2,v,y),Si||Fp(4,v,y),Hd(p,y,v);break;case 1:Si||(Qc(v,y),$=v.stateNode,typeof $.componentWillUnmount=="function"&&kae(v,y,$)),Hd(p,y,v);break;case 21:Hd(p,y,v);break;case 22:Si=($=Si)||v.memoizedState!==null,Hd(p,y,v),Si=$;break;default:Hd(p,y,v)}}function Rae(p,y){if(y.memoizedState===null&&(p=y.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{WC(p)}catch(v){Sr(y,y.return,v)}}function b8e(p){switch(p.tag){case 13:case 19:var y=p.stateNode;return y===null&&(y=p.stateNode=new Nae),y;case 22:return p=p.stateNode,y=p._retryCache,y===null&&(y=p._retryCache=new Nae),y;default:throw Error(r(435,p.tag))}}function qP(p,y){var v=b8e(p);y.forEach(function($){var _=A8e.bind(null,p,$);v.has($)||(v.add($),$.then(_,_))})}function yl(p,y){var v=y.deletions;if(v!==null)for(var $=0;$<v.length;$++){var _=v[$],O=p,V=y,K=V;e:for(;K!==null;){switch(K.tag){case 27:if(Vp(K.type)){Hr=K.stateNode,Oo=!1;break e}break;case 5:Hr=K.stateNode,Oo=!1;break e;case 3:case 4:Hr=K.stateNode.containerInfo,Oo=!0;break e}K=K.return}if(Hr===null)throw Error(r(160));Oae(O,V,_),Hr=null,Oo=!1,O=_.alternate,O!==null&&(O.return=null),_.return=null}if(y.subtreeFlags&13878)for(y=y.child;y!==null;)Fae(y,p),y=y.sibling}var qu=null;function Fae(p,y){var v=p.alternate,$=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:yl(y,p),bl(p),$&4&&(Fp(3,p,p.return),kC(3,p),Fp(5,p,p.return));break;case 1:yl(y,p),bl(p),$&512&&(Si||v===null||Qc(v,v.return)),$&64&&Wd&&(p=p.updateQueue,p!==null&&($=p.callbacks,$!==null&&(v=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=v===null?$:v.concat($))));break;case 26:var _=qu;if(yl(y,p),bl(p),$&512&&(Si||v===null||Qc(v,v.return)),$&4){var O=v!==null?v.memoizedState:null;if($=p.memoizedState,v===null)if($===null)if(p.stateNode===null){e:{$=p.type,v=p.memoizedProps,_=_.ownerDocument||_;t:switch($){case"title":O=_.getElementsByTagName("title")[0],(!O||O[og]||O[gs]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=_.createElement($),_.head.insertBefore(O,_.querySelector("head > title"))),Js(O,$,v),O[gs]=p,Ri(O),$=O;break e;case"link":var V=Toe("link","href",_).get($+(v.href||""));if(V){for(var K=0;K<V.length;K++)if(O=V[K],O.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&O.getAttribute("rel")===(v.rel==null?null:v.rel)&&O.getAttribute("title")===(v.title==null?null:v.title)&&O.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){V.splice(K,1);break t}}O=_.createElement($),Js(O,$,v),_.head.appendChild(O);break;case"meta":if(V=Toe("meta","content",_).get($+(v.content||""))){for(K=0;K<V.length;K++)if(O=V[K],O.getAttribute("content")===(v.content==null?null:""+v.content)&&O.getAttribute("name")===(v.name==null?null:v.name)&&O.getAttribute("property")===(v.property==null?null:v.property)&&O.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&O.getAttribute("charset")===(v.charSet==null?null:v.charSet)){V.splice(K,1);break t}}O=_.createElement($),Js(O,$,v),_.head.appendChild(O);break;default:throw Error(r(468,$))}O[gs]=p,Ri(O),$=O}p.stateNode=$}else Noe(_,p.type,p.stateNode);else p.stateNode=_oe(_,$,p.memoizedProps);else O!==$?(O===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):O.count--,$===null?Noe(_,p.type,p.stateNode):_oe(_,$,p.memoizedProps)):$===null&&p.stateNode!==null&&VP(p,p.memoizedProps,v.memoizedProps)}break;case 27:yl(y,p),bl(p),$&512&&(Si||v===null||Qc(v,v.return)),v!==null&&$&4&&VP(p,p.memoizedProps,v.memoizedProps);break;case 5:if(yl(y,p),bl(p),$&512&&(Si||v===null||Qc(v,v.return)),p.flags&32){_=p.stateNode;try{Rb(_,"")}catch(ve){Sr(p,p.return,ve)}}$&4&&p.stateNode!=null&&(_=p.memoizedProps,VP(p,_,v!==null?v.memoizedProps:_)),$&1024&&(GP=!0);break;case 6:if(yl(y,p),bl(p),$&4){if(p.stateNode===null)throw Error(r(162));$=p.memoizedProps,v=p.stateNode;try{v.nodeValue=$}catch(ve){Sr(p,p.return,ve)}}break;case 3:if(r4=null,_=qu,qu=t4(y.containerInfo),yl(y,p),qu=_,bl(p),$&4&&v!==null&&v.memoizedState.isDehydrated)try{WC(y.containerInfo)}catch(ve){Sr(p,p.return,ve)}GP&&(GP=!1,Mae(p));break;case 4:$=qu,qu=t4(p.stateNode.containerInfo),yl(y,p),bl(p),qu=$;break;case 12:yl(y,p),bl(p);break;case 13:yl(y,p),bl(p),p.child.flags&8192&&p.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(JP=et()),$&4&&($=p.updateQueue,$!==null&&(p.updateQueue=null,qP(p,$)));break;case 22:_=p.memoizedState!==null;var ne=v!==null&&v.memoizedState!==null,ye=Wd,De=Si;if(Wd=ye||_,Si=De||ne,yl(y,p),Si=De,Wd=ye,bl(p),$&8192)e:for(y=p.stateNode,y._visibility=_?y._visibility&-2:y._visibility|1,_&&(v===null||ne||Wd||Si||Cg(p)),v=null,y=p;;){if(y.tag===5||y.tag===26){if(v===null){ne=v=y;try{if(O=ne.stateNode,_)V=O.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{K=ne.stateNode;var Re=ne.memoizedProps.style,be=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;K.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(ve){Sr(ne,ne.return,ve)}}}else if(y.tag===6){if(v===null){ne=y;try{ne.stateNode.nodeValue=_?"":ne.memoizedProps}catch(ve){Sr(ne,ne.return,ve)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===p)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break e;for(;y.sibling===null;){if(y.return===null||y.return===p)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}$&4&&($=p.updateQueue,$!==null&&(v=$.retryQueue,v!==null&&($.retryQueue=null,qP(p,v))));break;case 19:yl(y,p),bl(p),$&4&&($=p.updateQueue,$!==null&&(p.updateQueue=null,qP(p,$)));break;case 30:break;case 21:break;default:yl(y,p),bl(p)}}function bl(p){var y=p.flags;if(y&2){try{for(var v,$=p.return;$!==null;){if(_ae($)){v=$;break}$=$.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var _=v.stateNode,O=WP(p);UN(p,O,_);break;case 5:var V=v.stateNode;v.flags&32&&(Rb(V,""),v.flags&=-33);var K=WP(p);UN(p,K,V);break;case 3:case 4:var ne=v.stateNode.containerInfo,ye=WP(p);HP(p,ye,ne);break;default:throw Error(r(161))}}catch(De){Sr(p,p.return,De)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function Mae(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var y=p;Mae(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),p=p.sibling}}function Mp(p,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)Dae(p,y.alternate,y),y=y.sibling}function Cg(p){for(p=p.child;p!==null;){var y=p;switch(y.tag){case 0:case 11:case 14:case 15:Fp(4,y,y.return),Cg(y);break;case 1:Qc(y,y.return);var v=y.stateNode;typeof v.componentWillUnmount=="function"&&kae(y,y.return,v),Cg(y);break;case 27:MC(y.stateNode);case 26:case 5:Qc(y,y.return),Cg(y);break;case 22:y.memoizedState===null&&Cg(y);break;case 30:Cg(y);break;default:Cg(y)}p=p.sibling}}function Lp(p,y,v){for(v=v&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var $=y.alternate,_=p,O=y,V=O.flags;switch(O.tag){case 0:case 11:case 15:Lp(_,O,v),kC(4,O);break;case 1:if(Lp(_,O,v),$=O,_=$.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ye){Sr($,$.return,ye)}if($=O,_=$.updateQueue,_!==null){var K=$.stateNode;try{var ne=_.shared.hiddenCallbacks;if(ne!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ne.length;_++)fse(ne[_],K)}catch(ye){Sr($,$.return,ye)}}v&&V&64&&Eae(O),AC(O,O.return);break;case 27:Tae(O);case 26:case 5:Lp(_,O,v),v&&$===null&&V&4&&Aae(O),AC(O,O.return);break;case 12:Lp(_,O,v);break;case 13:Lp(_,O,v),v&&V&4&&Rae(_,O);break;case 22:O.memoizedState===null&&Lp(_,O,v),AC(O,O.return);break;case 30:break;default:Lp(_,O,v)}y=y.sibling}}function XP(p,y){var v=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(v=p.memoizedState.cachePool.pool),p=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(p=y.memoizedState.cachePool.pool),p!==v&&(p!=null&&p.refCount++,v!=null&&dC(v))}function YP(p,y){p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&dC(p))}function Jc(p,y,v,$){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Lae(p,y,v,$),y=y.sibling}function Lae(p,y,v,$){var _=y.flags;switch(y.tag){case 0:case 11:case 15:Jc(p,y,v,$),_&2048&&kC(9,y);break;case 1:Jc(p,y,v,$);break;case 3:Jc(p,y,v,$),_&2048&&(p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&dC(p)));break;case 12:if(_&2048){Jc(p,y,v,$),p=y.stateNode;try{var O=y.memoizedProps,V=O.id,K=O.onPostCommit;typeof K=="function"&&K(V,y.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(ne){Sr(y,y.return,ne)}}else Jc(p,y,v,$);break;case 13:Jc(p,y,v,$);break;case 23:break;case 22:O=y.stateNode,V=y.alternate,y.memoizedState!==null?O._visibility&2?Jc(p,y,v,$):_C(p,y):O._visibility&2?Jc(p,y,v,$):(O._visibility|=2,Jb(p,y,v,$,(y.subtreeFlags&10256)!==0)),_&2048&&XP(V,y);break;case 24:Jc(p,y,v,$),_&2048&&YP(y.alternate,y);break;default:Jc(p,y,v,$)}}function Jb(p,y,v,$,_){for(_=_&&(y.subtreeFlags&10256)!==0,y=y.child;y!==null;){var O=p,V=y,K=v,ne=$,ye=V.flags;switch(V.tag){case 0:case 11:case 15:Jb(O,V,K,ne,_),kC(8,V);break;case 23:break;case 22:var De=V.stateNode;V.memoizedState!==null?De._visibility&2?Jb(O,V,K,ne,_):_C(O,V):(De._visibility|=2,Jb(O,V,K,ne,_)),_&&ye&2048&&XP(V.alternate,V);break;case 24:Jb(O,V,K,ne,_),_&&ye&2048&&YP(V.alternate,V);break;default:Jb(O,V,K,ne,_)}y=y.sibling}}function _C(p,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var v=p,$=y,_=$.flags;switch($.tag){case 22:_C(v,$),_&2048&&XP($.alternate,$);break;case 24:_C(v,$),_&2048&&YP($.alternate,$);break;default:_C(v,$)}y=y.sibling}}var TC=8192;function e2(p){if(p.subtreeFlags&TC)for(p=p.child;p!==null;)Pae(p),p=p.sibling}function Pae(p){switch(p.tag){case 26:e2(p),p.flags&TC&&p.memoizedState!==null&&r9e(qu,p.memoizedState,p.memoizedProps);break;case 5:e2(p);break;case 3:case 4:var y=qu;qu=t4(p.stateNode.containerInfo),e2(p),qu=y;break;case 22:p.memoizedState===null&&(y=p.alternate,y!==null&&y.memoizedState!==null?(y=TC,TC=16777216,e2(p),TC=y):e2(p));break;default:e2(p)}}function Bae(p){var y=p.alternate;if(y!==null&&(p=y.child,p!==null)){y.child=null;do y=p.sibling,p.sibling=null,p=y;while(p!==null)}}function NC(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var v=0;v<y.length;v++){var $=y[v];vs=$,jae($,p)}Bae(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)zae(p),p=p.sibling}function zae(p){switch(p.tag){case 0:case 11:case 15:NC(p),p.flags&2048&&Fp(9,p,p.return);break;case 3:NC(p);break;case 12:NC(p);break;case 22:var y=p.stateNode;p.memoizedState!==null&&y._visibility&2&&(p.return===null||p.return.tag!==13)?(y._visibility&=-3,VN(p)):NC(p);break;default:NC(p)}}function VN(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var v=0;v<y.length;v++){var $=y[v];vs=$,jae($,p)}Bae(p)}for(p=p.child;p!==null;){switch(y=p,y.tag){case 0:case 11:case 15:Fp(8,y,y.return),VN(y);break;case 22:v=y.stateNode,v._visibility&2&&(v._visibility&=-3,VN(y));break;default:VN(y)}p=p.sibling}}function jae(p,y){for(;vs!==null;){var v=vs;switch(v.tag){case 0:case 11:case 15:Fp(8,v,y);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var $=v.memoizedState.cachePool.pool;$!=null&&$.refCount++}break;case 24:dC(v.memoizedState.cache)}if($=v.child,$!==null)$.return=v,vs=$;else e:for(v=p;vs!==null;){$=vs;var _=$.sibling,O=$.return;if(Iae($),$===v){vs=null;break e}if(_!==null){_.return=O,vs=_;break e}vs=O}}}var x8e={getCacheForType:function(p){var y=ha(Qi),v=y.data.get(p);return v===void 0&&(v=p(),y.data.set(p,v)),v}},v8e=typeof WeakMap=="function"?WeakMap:Map,nr=0,Or=null,Sn=null,Nn=0,rr=0,xl=null,Pp=!1,t2=!1,KP=!1,Gd=0,oi=0,Bp=0,$g=0,ZP=0,eu=0,n2=0,DC=null,Ro=null,QP=!1,JP=0,WN=1/0,HN=null,zp=null,Qs=0,jp=null,r2=null,i2=0,eB=0,tB=null,Uae=null,IC=0,nB=null;function vl(){if((nr&2)!==0&&Nn!==0)return Nn&-Nn;if(R.T!==null){var p=Hb;return p!==0?p:uB()}return tN()}function Vae(){eu===0&&(eu=(Nn&536870912)===0||jn?Vu():536870912);var p=Jl.current;return p!==null&&(p.flags|=32),eu}function wl(p,y,v){(p===Or&&(rr===2||rr===9)||p.cancelPendingCommit!==null)&&(s2(p,0),Up(p,Nn,eu,!1)),hr(p,v),((nr&2)===0||p!==Or)&&(p===Or&&((nr&2)===0&&($g|=v),oi===4&&Up(p,Nn,eu,!1)),ef(p))}function Wae(p,y,v){if((nr&6)!==0)throw Error(r(327));var $=!v&&(y&124)===0&&(y&p.expiredLanes)===0||tr(p,y),_=$?C8e(p,y):sB(p,y,!0),O=$;do{if(_===0){t2&&!$&&Up(p,y,0,!1);break}else{if(v=p.current.alternate,O&&!w8e(v)){_=sB(p,y,!1),O=!1;continue}if(_===2){if(O=y,p.errorRecoveryDisabledLanes&O)var V=0;else V=p.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){y=V;e:{var K=p;_=DC;var ne=K.current.memoizedState.isDehydrated;if(ne&&(s2(K,V).flags|=256),V=sB(K,V,!1),V!==2){if(KP&&!ne){K.errorRecoveryDisabledLanes|=O,$g|=O,_=4;break e}O=Ro,Ro=_,O!==null&&(Ro===null?Ro=O:Ro.push.apply(Ro,O))}_=V}if(O=!1,_!==2)continue}}if(_===1){s2(p,0),Up(p,y,0,!0);break}e:{switch($=p,O=_,O){case 0:case 1:throw Error(r(345));case 4:if((y&4194048)!==y)break;case 6:Up($,y,eu,!Pp);break e;case 2:Ro=null;break;case 3:case 5:break;default:throw Error(r(329))}if((y&62914560)===y&&(_=JP+300-et(),10<_)){if(Up($,y,eu,!Pp),Tn($,0,!0)!==0)break e;$.timeoutHandle=xoe(Hae.bind(null,$,v,Ro,HN,QP,y,eu,$g,n2,Pp,O,2,-0,0),_);break e}Hae($,v,Ro,HN,QP,y,eu,$g,n2,Pp,O,0,-0,0)}}break}while(!0);ef(p)}function Hae(p,y,v,$,_,O,V,K,ne,ye,De,Re,be,ve){if(p.timeoutHandle=-1,Re=y.subtreeFlags,(Re&8192||(Re&16785408)===16785408)&&(BC={stylesheets:null,count:0,unsuspend:n9e},Pae(y),Re=i9e(),Re!==null)){p.cancelPendingCommit=Re(Qae.bind(null,p,y,O,v,$,_,V,K,ne,De,1,be,ve)),Up(p,O,V,!ye);return}Qae(p,y,O,v,$,_,V,K,ne)}function w8e(p){for(var y=p;;){var v=y.tag;if((v===0||v===11||v===15)&&y.flags&16384&&(v=y.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var $=0;$<v.length;$++){var _=v[$],O=_.getSnapshot;_=_.value;try{if(!ml(O(),_))return!1}catch{return!1}}if(v=y.child,y.subtreeFlags&16384&&v!==null)v.return=y,y=v;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Up(p,y,v,$){y&=~ZP,y&=~$g,p.suspendedLanes|=y,p.pingedLanes&=~y,$&&(p.warmLanes|=y),$=p.expirationTimes;for(var _=y;0<_;){var O=31-At(_),V=1<<O;$[O]=-1,_&=~V}v!==0&&wp(p,v,y)}function GN(){return(nr&6)===0?(OC(0),!1):!0}function rB(){if(Sn!==null){if(rr===0)var p=Sn.return;else p=Sn,Pd=bg=null,vP(p),Zb=null,CC=0,p=Sn;for(;p!==null;)$ae(p.alternate,p),p=p.return;Sn=null}}function s2(p,y){var v=p.timeoutHandle;v!==-1&&(p.timeoutHandle=-1,B8e(v)),v=p.cancelPendingCommit,v!==null&&(p.cancelPendingCommit=null,v()),rB(),Or=p,Sn=v=Fd(p.current,null),Nn=y,rr=0,xl=null,Pp=!1,t2=tr(p,y),KP=!1,n2=eu=ZP=$g=Bp=oi=0,Ro=DC=null,QP=!1,(y&8)!==0&&(y|=y&32);var $=p.entangledLanes;if($!==0)for(p=p.entanglements,$&=y;0<$;){var _=31-At($),O=1<<_;y|=p[_],$&=~O}return Gd=y,pN(),v}function Gae(p,y){ln=null,R.H=ON,y===pC||y===CN?(y=use(),rr=3):y===ase?(y=use(),rr=4):rr=y===cae?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,xl=y,Sn===null&&(oi=1,PN(p,Yl(y,p.current)))}function qae(){var p=R.H;return R.H=ON,p===null?ON:p}function Xae(){var p=R.A;return R.A=x8e,p}function iB(){oi=4,Pp||(Nn&4194048)!==Nn&&Jl.current!==null||(t2=!0),(Bp&134217727)===0&&($g&134217727)===0||Or===null||Up(Or,Nn,eu,!1)}function sB(p,y,v){var $=nr;nr|=2;var _=qae(),O=Xae();(Or!==p||Nn!==y)&&(HN=null,s2(p,y)),y=!1;var V=oi;e:do try{if(rr!==0&&Sn!==null){var K=Sn,ne=xl;switch(rr){case 8:rB(),V=6;break e;case 3:case 2:case 9:case 6:Jl.current===null&&(y=!0);var ye=rr;if(rr=0,xl=null,a2(p,K,ne,ye),v&&t2){V=0;break e}break;default:ye=rr,rr=0,xl=null,a2(p,K,ne,ye)}}S8e(),V=oi;break}catch(De){Gae(p,De)}while(!0);return y&&p.shellSuspendCounter++,Pd=bg=null,nr=$,R.H=_,R.A=O,Sn===null&&(Or=null,Nn=0,pN()),V}function S8e(){for(;Sn!==null;)Yae(Sn)}function C8e(p,y){var v=nr;nr|=2;var $=qae(),_=Xae();Or!==p||Nn!==y?(HN=null,WN=et()+500,s2(p,y)):t2=tr(p,y);e:do try{if(rr!==0&&Sn!==null){y=Sn;var O=xl;t:switch(rr){case 1:rr=0,xl=null,a2(p,y,O,1);break;case 2:case 9:if(ose(O)){rr=0,xl=null,Kae(y);break}y=function(){rr!==2&&rr!==9||Or!==p||(rr=7),ef(p)},O.then(y,y);break e;case 3:rr=7;break e;case 4:rr=5;break e;case 7:ose(O)?(rr=0,xl=null,Kae(y)):(rr=0,xl=null,a2(p,y,O,7));break;case 5:var V=null;switch(Sn.tag){case 26:V=Sn.memoizedState;case 5:case 27:var K=Sn;if(!V||Doe(V)){rr=0,xl=null;var ne=K.sibling;if(ne!==null)Sn=ne;else{var ye=K.return;ye!==null?(Sn=ye,qN(ye)):Sn=null}break t}}rr=0,xl=null,a2(p,y,O,5);break;case 6:rr=0,xl=null,a2(p,y,O,6);break;case 8:rB(),oi=6;break e;default:throw Error(r(462))}}$8e();break}catch(De){Gae(p,De)}while(!0);return Pd=bg=null,R.H=$,R.A=_,nr=v,Sn!==null?0:(Or=null,Nn=0,pN(),oi)}function $8e(){for(;Sn!==null&&!Je();)Yae(Sn)}function Yae(p){var y=Sae(p.alternate,p,Gd);p.memoizedProps=p.pendingProps,y===null?qN(p):Sn=y}function Kae(p){var y=p,v=y.alternate;switch(y.tag){case 15:case 0:y=gae(v,y,y.pendingProps,y.type,void 0,Nn);break;case 11:y=gae(v,y,y.pendingProps,y.type.render,y.ref,Nn);break;case 5:vP(y);default:$ae(v,y),y=Sn=Zie(y,Gd),y=Sae(v,y,Gd)}p.memoizedProps=p.pendingProps,y===null?qN(p):Sn=y}function a2(p,y,v,$){Pd=bg=null,vP(y),Zb=null,CC=0;var _=y.return;try{if(h8e(p,_,y,v,Nn)){oi=1,PN(p,Yl(v,p.current)),Sn=null;return}}catch(O){if(_!==null)throw Sn=_,O;oi=1,PN(p,Yl(v,p.current)),Sn=null;return}y.flags&32768?(jn||$===1?p=!0:t2||(Nn&536870912)!==0?p=!1:(Pp=p=!0,($===2||$===9||$===3||$===6)&&($=Jl.current,$!==null&&$.tag===13&&($.flags|=16384))),Zae(y,p)):qN(y)}function qN(p){var y=p;do{if((y.flags&32768)!==0){Zae(y,Pp);return}p=y.return;var v=m8e(y.alternate,y,Gd);if(v!==null){Sn=v;return}if(y=y.sibling,y!==null){Sn=y;return}Sn=y=p}while(y!==null);oi===0&&(oi=5)}function Zae(p,y){do{var v=g8e(p.alternate,p);if(v!==null){v.flags&=32767,Sn=v;return}if(v=p.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!y&&(p=p.sibling,p!==null)){Sn=p;return}Sn=p=v}while(p!==null);oi=6,Sn=null}function Qae(p,y,v,$,_,O,V,K,ne){p.cancelPendingCommit=null;do XN();while(Qs!==0);if((nr&6)!==0)throw Error(r(327));if(y!==null){if(y===p.current)throw Error(r(177));if(O=y.lanes|y.childLanes,O|=YL,vi(p,v,O,V,K,ne),p===Or&&(Sn=Or=null,Nn=0),r2=y,jp=p,i2=v,eB=O,tB=_,Uae=$,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,_8e(sn,function(){return roe(),null})):(p.callbackNode=null,p.callbackPriority=0),$=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||$){$=R.T,R.T=null,_=j.p,j.p=2,V=nr,nr|=4;try{y8e(p,y,v)}finally{nr=V,j.p=_,R.T=$}}Qs=1,Jae(),eoe(),toe()}}function Jae(){if(Qs===1){Qs=0;var p=jp,y=r2,v=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||v){v=R.T,R.T=null;var $=j.p;j.p=2;var _=nr;nr|=4;try{Fae(y,p);var O=yB,V=jie(p.containerInfo),K=O.focusedElem,ne=O.selectionRange;if(V!==K&&K&&K.ownerDocument&&zie(K.ownerDocument.documentElement,K)){if(ne!==null&&WL(K)){var ye=ne.start,De=ne.end;if(De===void 0&&(De=ye),"selectionStart"in K)K.selectionStart=ye,K.selectionEnd=Math.min(De,K.value.length);else{var Re=K.ownerDocument||document,be=Re&&Re.defaultView||window;if(be.getSelection){var ve=be.getSelection(),Ut=K.textContent.length,Pt=Math.min(ne.start,Ut),yr=ne.end===void 0?Pt:Math.min(ne.end,Ut);!ve.extend&&Pt>yr&&(V=yr,yr=Pt,Pt=V);var fe=Bie(K,Pt),le=Bie(K,yr);if(fe&&le&&(ve.rangeCount!==1||ve.anchorNode!==fe.node||ve.anchorOffset!==fe.offset||ve.focusNode!==le.node||ve.focusOffset!==le.offset)){var ge=Re.createRange();ge.setStart(fe.node,fe.offset),ve.removeAllRanges(),Pt>yr?(ve.addRange(ge),ve.extend(le.node,le.offset)):(ge.setEnd(le.node,le.offset),ve.addRange(ge))}}}}for(Re=[],ve=K;ve=ve.parentNode;)ve.nodeType===1&&Re.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Re.length;K++){var Ie=Re[K];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}a4=!!gB,yB=gB=null}finally{nr=_,j.p=$,R.T=v}}p.current=y,Qs=2}}function eoe(){if(Qs===2){Qs=0;var p=jp,y=r2,v=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||v){v=R.T,R.T=null;var $=j.p;j.p=2;var _=nr;nr|=4;try{Dae(p,y.alternate,y)}finally{nr=_,j.p=$,R.T=v}}Qs=3}}function toe(){if(Qs===4||Qs===3){Qs=0,at();var p=jp,y=r2,v=i2,$=Uae;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?Qs=5:(Qs=0,r2=jp=null,noe(p,p.pendingLanes));var _=p.pendingLanes;if(_===0&&(zp=null),qS(v),y=y.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Ue,y,void 0,(y.current.flags&128)===128)}catch{}if($!==null){y=R.T,_=j.p,j.p=2,R.T=null;try{for(var O=p.onRecoverableError,V=0;V<$.length;V++){var K=$[V];O(K.value,{componentStack:K.stack})}}finally{R.T=y,j.p=_}}(i2&3)!==0&&XN(),ef(p),_=p.pendingLanes,(v&4194090)!==0&&(_&42)!==0?p===nB?IC++:(IC=0,nB=p):IC=0,OC(0)}}function noe(p,y){(p.pooledCacheLanes&=y)===0&&(y=p.pooledCache,y!=null&&(p.pooledCache=null,dC(y)))}function XN(p){return Jae(),eoe(),toe(),roe()}function roe(){if(Qs!==5)return!1;var p=jp,y=eB;eB=0;var v=qS(i2),$=R.T,_=j.p;try{j.p=32>v?32:v,R.T=null,v=tB,tB=null;var O=jp,V=i2;if(Qs=0,r2=jp=null,i2=0,(nr&6)!==0)throw Error(r(331));var K=nr;if(nr|=4,zae(O.current),Lae(O,O.current,V,v),nr=K,OC(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Ue,O)}catch{}return!0}finally{j.p=_,R.T=$,noe(p,y)}}function ioe(p,y,v){y=Yl(v,y),y=RP(p.stateNode,y,2),p=Dp(p,y,2),p!==null&&(hr(p,2),ef(p))}function Sr(p,y,v){if(p.tag===3)ioe(p,p,v);else for(;y!==null;){if(y.tag===3){ioe(y,p,v);break}else if(y.tag===1){var $=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(zp===null||!zp.has($))){p=Yl(v,p),v=lae(2),$=Dp(y,v,2),$!==null&&(uae(v,$,y,p),hr($,2),ef($));break}}y=y.return}}function aB(p,y,v){var $=p.pingCache;if($===null){$=p.pingCache=new v8e;var _=new Set;$.set(y,_)}else _=$.get(y),_===void 0&&(_=new Set,$.set(y,_));_.has(v)||(KP=!0,_.add(v),p=E8e.bind(null,p,y,v),y.then(p,p))}function E8e(p,y,v){var $=p.pingCache;$!==null&&$.delete(y),p.pingedLanes|=p.suspendedLanes&v,p.warmLanes&=~v,Or===p&&(Nn&v)===v&&(oi===4||oi===3&&(Nn&62914560)===Nn&&300>et()-JP?(nr&2)===0&&s2(p,0):ZP|=v,n2===Nn&&(n2=0)),ef(p)}function soe(p,y){y===0&&(y=vp()),p=jb(p,y),p!==null&&(hr(p,y),ef(p))}function k8e(p){var y=p.memoizedState,v=0;y!==null&&(v=y.retryLane),soe(p,v)}function A8e(p,y){var v=0;switch(p.tag){case 13:var $=p.stateNode,_=p.memoizedState;_!==null&&(v=_.retryLane);break;case 19:$=p.stateNode;break;case 22:$=p.stateNode._retryCache;break;default:throw Error(r(314))}$!==null&&$.delete(y),soe(p,v)}function _8e(p,y){return Xe(p,y)}var YN=null,o2=null,oB=!1,KN=!1,lB=!1,Eg=0;function ef(p){p!==o2&&p.next===null&&(o2===null?YN=o2=p:o2=o2.next=p),KN=!0,oB||(oB=!0,N8e())}function OC(p,y){if(!lB&&KN){lB=!0;do for(var v=!1,$=YN;$!==null;){if(p!==0){var _=$.pendingLanes;if(_===0)var O=0;else{var V=$.suspendedLanes,K=$.pingedLanes;O=(1<<31-At(42|p)+1)-1,O&=_&~(V&~K),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(v=!0,uoe($,O))}else O=Nn,O=Tn($,$===Or?O:0,$.cancelPendingCommit!==null||$.timeoutHandle!==-1),(O&3)===0||tr($,O)||(v=!0,uoe($,O));$=$.next}while(v);lB=!1}}function T8e(){aoe()}function aoe(){KN=oB=!1;var p=0;Eg!==0&&(P8e()&&(p=Eg),Eg=0);for(var y=et(),v=null,$=YN;$!==null;){var _=$.next,O=ooe($,y);O===0?($.next=null,v===null?YN=_:v.next=_,_===null&&(o2=v)):(v=$,(p!==0||(O&3)!==0)&&(KN=!0)),$=_}OC(p)}function ooe(p,y){for(var v=p.suspendedLanes,$=p.pingedLanes,_=p.expirationTimes,O=p.pendingLanes&-62914561;0<O;){var V=31-At(O),K=1<<V,ne=_[V];ne===-1?((K&v)===0||(K&$)!==0)&&(_[V]=Xl(K,y)):ne<=y&&(p.expiredLanes|=K),O&=~K}if(y=Or,v=Nn,v=Tn(p,p===y?v:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),$=p.callbackNode,v===0||p===y&&(rr===2||rr===9)||p.cancelPendingCommit!==null)return $!==null&&$!==null&&ze($),p.callbackNode=null,p.callbackPriority=0;if((v&3)===0||tr(p,v)){if(y=v&-v,y===p.callbackPriority)return y;switch($!==null&&ze($),qS(v)){case 2:case 8:v=Yt;break;case 32:v=sn;break;case 268435456:v=fr;break;default:v=sn}return $=loe.bind(null,p),v=Xe(v,$),p.callbackPriority=y,p.callbackNode=v,y}return $!==null&&$!==null&&ze($),p.callbackPriority=2,p.callbackNode=null,2}function loe(p,y){if(Qs!==0&&Qs!==5)return p.callbackNode=null,p.callbackPriority=0,null;var v=p.callbackNode;if(XN()&&p.callbackNode!==v)return null;var $=Nn;return $=Tn(p,p===Or?$:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),$===0?null:(Wae(p,$,y),ooe(p,et()),p.callbackNode!=null&&p.callbackNode===v?loe.bind(null,p):null)}function uoe(p,y){if(XN())return null;Wae(p,y,!0)}function N8e(){z8e(function(){(nr&6)!==0?Xe(Yn,T8e):aoe()})}function uB(){return Eg===0&&(Eg=Vu()),Eg}function coe(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:oN(""+p)}function foe(p,y){var v=y.ownerDocument.createElement("input");return v.name=y.name,v.value=y.value,p.id&&v.setAttribute("form",p.id),y.parentNode.insertBefore(v,y),p=new FormData(p),v.parentNode.removeChild(v),p}function D8e(p,y,v,$,_){if(y==="submit"&&v&&v.stateNode===_){var O=coe((_[da]||null).action),V=$.submitter;V&&(y=(y=V[da]||null)?coe(y.formAction):V.getAttribute("formAction"),y!==null&&(O=y,V=null));var K=new fN("action","action",null,$,_);p.push({event:K,listeners:[{instance:null,listener:function(){if($.defaultPrevented){if(Eg!==0){var ne=V?foe(_,V):new FormData(_);TP(v,{pending:!0,data:ne,method:_.method,action:O},null,ne)}}else typeof O=="function"&&(K.preventDefault(),ne=V?foe(_,V):new FormData(_),TP(v,{pending:!0,data:ne,method:_.method,action:O},O,ne))},currentTarget:_}]})}}for(var cB=0;cB<XL.length;cB++){var fB=XL[cB],I8e=fB.toLowerCase(),O8e=fB[0].toUpperCase()+fB.slice(1);Gu(I8e,"on"+O8e)}Gu(Wie,"onAnimationEnd"),Gu(Hie,"onAnimationIteration"),Gu(Gie,"onAnimationStart"),Gu("dblclick","onDoubleClick"),Gu("focusin","onFocus"),Gu("focusout","onBlur"),Gu(KMe,"onTransitionRun"),Gu(ZMe,"onTransitionStart"),Gu(QMe,"onTransitionCancel"),Gu(qie,"onTransitionEnd"),kp("onMouseEnter",["mouseout","mouseover"]),kp("onMouseLeave",["mouseout","mouseover"]),kp("onPointerEnter",["pointerout","pointerover"]),kp("onPointerLeave",["pointerout","pointerover"]),Od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Od("onBeforeInput",["compositionend","keypress","textInput","paste"]),Od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var RC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R8e=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(RC));function doe(p,y){y=(y&4)!==0;for(var v=0;v<p.length;v++){var $=p[v],_=$.event;$=$.listeners;e:{var O=void 0;if(y)for(var V=$.length-1;0<=V;V--){var K=$[V],ne=K.instance,ye=K.currentTarget;if(K=K.listener,ne!==O&&_.isPropagationStopped())break e;O=K,_.currentTarget=ye;try{O(_)}catch(De){LN(De)}_.currentTarget=null,O=ne}else for(V=0;V<$.length;V++){if(K=$[V],ne=K.instance,ye=K.currentTarget,K=K.listener,ne!==O&&_.isPropagationStopped())break e;O=K,_.currentTarget=ye;try{O(_)}catch(De){LN(De)}_.currentTarget=null,O=ne}}}}function Cn(p,y){var v=y[XS];v===void 0&&(v=y[XS]=new Set);var $=p+"__bubble";v.has($)||(hoe(y,p,2,!1),v.add($))}function dB(p,y,v){var $=0;y&&($|=4),hoe(v,p,$,y)}var ZN="_reactListening"+Math.random().toString(36).slice(2);function hB(p){if(!p[ZN]){p[ZN]=!0,rN.forEach(function(v){v!=="selectionchange"&&(R8e.has(v)||dB(v,!1,p),dB(v,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[ZN]||(y[ZN]=!0,dB("selectionchange",!1,y))}}function hoe(p,y,v,$){switch(Loe(y)){case 2:var _=o9e;break;case 8:_=l9e;break;default:_=AB}v=_.bind(null,y,v,p),_=void 0,!FL||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(_=!0),$?_!==void 0?p.addEventListener(y,v,{capture:!0,passive:_}):p.addEventListener(y,v,!0):_!==void 0?p.addEventListener(y,v,{passive:_}):p.addEventListener(y,v,!1)}function pB(p,y,v,$,_){var O=$;if((y&1)===0&&(y&2)===0&&$!==null)e:for(;;){if($===null)return;var V=$.tag;if(V===3||V===4){var K=$.stateNode.containerInfo;if(K===_)break;if(V===4)for(V=$.return;V!==null;){var ne=V.tag;if((ne===3||ne===4)&&V.stateNode.containerInfo===_)return;V=V.return}for(;K!==null;){if(V=Cp(K),V===null)return;if(ne=V.tag,ne===5||ne===6||ne===26||ne===27){$=O=V;continue e}K=K.parentNode}}$=$.return}vie(function(){var ye=O,De=OL(v),Re=[];e:{var be=Xie.get(p);if(be!==void 0){var ve=fN,Ut=p;switch(p){case"keypress":if(uN(v)===0)break e;case"keydown":case"keyup":ve=_Me;break;case"focusin":Ut="focus",ve=BL;break;case"focusout":Ut="blur",ve=BL;break;case"beforeblur":case"afterblur":ve=BL;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Cie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=gMe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=DMe;break;case Wie:case Hie:case Gie:ve=xMe;break;case qie:ve=OMe;break;case"scroll":case"scrollend":ve=pMe;break;case"wheel":ve=FMe;break;case"copy":case"cut":case"paste":ve=wMe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Eie;break;case"toggle":case"beforetoggle":ve=LMe}var Pt=(y&4)!==0,yr=!Pt&&(p==="scroll"||p==="scrollend"),fe=Pt?be!==null?be+"Capture":null:be;Pt=[];for(var le=ye,ge;le!==null;){var Ie=le;if(ge=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||ge===null||fe===null||(Ie=JS(le,fe),Ie!=null&&Pt.push(FC(le,Ie,ge))),yr)break;le=le.return}0<Pt.length&&(be=new ve(be,Ut,null,v,De),Re.push({event:be,listeners:Pt}))}}if((y&7)===0){e:{if(be=p==="mouseover"||p==="pointerover",ve=p==="mouseout"||p==="pointerout",be&&v!==IL&&(Ut=v.relatedTarget||v.fromElement)&&(Cp(Ut)||Ut[Sp]))break e;if((ve||be)&&(be=De.window===De?De:(be=De.ownerDocument)?be.defaultView||be.parentWindow:window,ve?(Ut=v.relatedTarget||v.toElement,ve=ye,Ut=Ut?Cp(Ut):null,Ut!==null&&(yr=s(Ut),Pt=Ut.tag,Ut!==yr||Pt!==5&&Pt!==27&&Pt!==6)&&(Ut=null)):(ve=null,Ut=ye),ve!==Ut)){if(Pt=Cie,Ie="onMouseLeave",fe="onMouseEnter",le="mouse",(p==="pointerout"||p==="pointerover")&&(Pt=Eie,Ie="onPointerLeave",fe="onPointerEnter",le="pointer"),yr=ve==null?be:lg(ve),ge=Ut==null?be:lg(Ut),be=new Pt(Ie,le+"leave",ve,v,De),be.target=yr,be.relatedTarget=ge,Ie=null,Cp(De)===ye&&(Pt=new Pt(fe,le+"enter",Ut,v,De),Pt.target=ge,Pt.relatedTarget=yr,Ie=Pt),yr=Ie,ve&&Ut)t:{for(Pt=ve,fe=Ut,le=0,ge=Pt;ge;ge=l2(ge))le++;for(ge=0,Ie=fe;Ie;Ie=l2(Ie))ge++;for(;0<le-ge;)Pt=l2(Pt),le--;for(;0<ge-le;)fe=l2(fe),ge--;for(;le--;){if(Pt===fe||fe!==null&&Pt===fe.alternate)break t;Pt=l2(Pt),fe=l2(fe)}Pt=null}else Pt=null;ve!==null&&poe(Re,be,ve,Pt,!1),Ut!==null&&yr!==null&&poe(Re,yr,Ut,Pt,!0)}}e:{if(be=ye?lg(ye):window,ve=be.nodeName&&be.nodeName.toLowerCase(),ve==="select"||ve==="input"&&be.type==="file")var dt=Oie;else if(Die(be))if(Rie)dt=qMe;else{dt=HMe;var mn=WMe}else ve=be.nodeName,!ve||ve.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ye&&DL(ye.elementType)&&(dt=Oie):dt=GMe;if(dt&&(dt=dt(p,ye))){Iie(Re,dt,v,De);break e}mn&&mn(p,be,ye),p==="focusout"&&ye&&be.type==="number"&&ye.memoizedProps.value!=null&&NL(be,"number",be.value)}switch(mn=ye?lg(ye):window,p){case"focusin":(Die(mn)||mn.contentEditable==="true")&&(Pb=mn,HL=ye,oC=null);break;case"focusout":oC=HL=Pb=null;break;case"mousedown":GL=!0;break;case"contextmenu":case"mouseup":case"dragend":GL=!1,Uie(Re,v,De);break;case"selectionchange":if(YMe)break;case"keydown":case"keyup":Uie(Re,v,De)}var kt;if(jL)e:{switch(p){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Lb?Tie(p,v)&&(Bt="onCompositionEnd"):p==="keydown"&&v.keyCode===229&&(Bt="onCompositionStart");Bt&&(kie&&v.locale!=="ko"&&(Lb||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Lb&&(kt=wie()):(Ap=De,ML="value"in Ap?Ap.value:Ap.textContent,Lb=!0)),mn=QN(ye,Bt),0<mn.length&&(Bt=new $ie(Bt,p,null,v,De),Re.push({event:Bt,listeners:mn}),kt?Bt.data=kt:(kt=Nie(v),kt!==null&&(Bt.data=kt)))),(kt=BMe?zMe(p,v):jMe(p,v))&&(Bt=QN(ye,"onBeforeInput"),0<Bt.length&&(mn=new $ie("onBeforeInput","beforeinput",null,v,De),Re.push({event:mn,listeners:Bt}),mn.data=kt)),D8e(Re,p,ye,v,De)}doe(Re,y)})}function FC(p,y,v){return{instance:p,listener:y,currentTarget:v}}function QN(p,y){for(var v=y+"Capture",$=[];p!==null;){var _=p,O=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||O===null||(_=JS(p,v),_!=null&&$.unshift(FC(p,_,O)),_=JS(p,y),_!=null&&$.push(FC(p,_,O))),p.tag===3)return $;p=p.return}return[]}function l2(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function poe(p,y,v,$,_){for(var O=y._reactName,V=[];v!==null&&v!==$;){var K=v,ne=K.alternate,ye=K.stateNode;if(K=K.tag,ne!==null&&ne===$)break;K!==5&&K!==26&&K!==27||ye===null||(ne=ye,_?(ye=JS(v,O),ye!=null&&V.unshift(FC(v,ye,ne))):_||(ye=JS(v,O),ye!=null&&V.push(FC(v,ye,ne)))),v=v.return}V.length!==0&&p.push({event:y,listeners:V})}var F8e=/\r\n?/g,M8e=/\u0000|\uFFFD/g;function moe(p){return(typeof p=="string"?p:""+p).replace(F8e,`
`).replace(M8e,"")}function goe(p,y){return y=moe(y),moe(p)===y}function JN(){}function gr(p,y,v,$,_,O){switch(v){case"children":typeof $=="string"?y==="body"||y==="textarea"&&$===""||Rb(p,$):(typeof $=="number"||typeof $=="bigint")&&y!=="body"&&Rb(p,""+$);break;case"className":Ib(p,"class",$);break;case"tabIndex":Ib(p,"tabindex",$);break;case"dir":case"role":case"viewBox":case"width":case"height":Ib(p,v,$);break;case"style":bie(p,$,O);break;case"data":if(y!=="object"){Ib(p,"data",$);break}case"src":case"href":if($===""&&(y!=="a"||v!=="href")){p.removeAttribute(v);break}if($==null||typeof $=="function"||typeof $=="symbol"||typeof $=="boolean"){p.removeAttribute(v);break}$=oN(""+$),p.setAttribute(v,$);break;case"action":case"formAction":if(typeof $=="function"){p.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(v==="formAction"?(y!=="input"&&gr(p,y,"name",_.name,_,null),gr(p,y,"formEncType",_.formEncType,_,null),gr(p,y,"formMethod",_.formMethod,_,null),gr(p,y,"formTarget",_.formTarget,_,null)):(gr(p,y,"encType",_.encType,_,null),gr(p,y,"method",_.method,_,null),gr(p,y,"target",_.target,_,null)));if($==null||typeof $=="symbol"||typeof $=="boolean"){p.removeAttribute(v);break}$=oN(""+$),p.setAttribute(v,$);break;case"onClick":$!=null&&(p.onclick=JN);break;case"onScroll":$!=null&&Cn("scroll",p);break;case"onScrollEnd":$!=null&&Cn("scrollend",p);break;case"dangerouslySetInnerHTML":if($!=null){if(typeof $!="object"||!("__html"in $))throw Error(r(61));if(v=$.__html,v!=null){if(_.children!=null)throw Error(r(60));p.innerHTML=v}}break;case"multiple":p.multiple=$&&typeof $!="function"&&typeof $!="symbol";break;case"muted":p.muted=$&&typeof $!="function"&&typeof $!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if($==null||typeof $=="function"||typeof $=="boolean"||typeof $=="symbol"){p.removeAttribute("xlink:href");break}v=oN(""+$),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":$!=null&&typeof $!="function"&&typeof $!="symbol"?p.setAttribute(v,""+$):p.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":$&&typeof $!="function"&&typeof $!="symbol"?p.setAttribute(v,""):p.removeAttribute(v);break;case"capture":case"download":$===!0?p.setAttribute(v,""):$!==!1&&$!=null&&typeof $!="function"&&typeof $!="symbol"?p.setAttribute(v,$):p.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":$!=null&&typeof $!="function"&&typeof $!="symbol"&&!isNaN($)&&1<=$?p.setAttribute(v,$):p.removeAttribute(v);break;case"rowSpan":case"start":$==null||typeof $=="function"||typeof $=="symbol"||isNaN($)?p.removeAttribute(v):p.setAttribute(v,$);break;case"popover":Cn("beforetoggle",p),Cn("toggle",p),Db(p,"popover",$);break;case"xlinkActuate":Wu(p,"http://www.w3.org/1999/xlink","xlink:actuate",$);break;case"xlinkArcrole":Wu(p,"http://www.w3.org/1999/xlink","xlink:arcrole",$);break;case"xlinkRole":Wu(p,"http://www.w3.org/1999/xlink","xlink:role",$);break;case"xlinkShow":Wu(p,"http://www.w3.org/1999/xlink","xlink:show",$);break;case"xlinkTitle":Wu(p,"http://www.w3.org/1999/xlink","xlink:title",$);break;case"xlinkType":Wu(p,"http://www.w3.org/1999/xlink","xlink:type",$);break;case"xmlBase":Wu(p,"http://www.w3.org/XML/1998/namespace","xml:base",$);break;case"xmlLang":Wu(p,"http://www.w3.org/XML/1998/namespace","xml:lang",$);break;case"xmlSpace":Wu(p,"http://www.w3.org/XML/1998/namespace","xml:space",$);break;case"is":Db(p,"is",$);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=dMe.get(v)||v,Db(p,v,$))}}function mB(p,y,v,$,_,O){switch(v){case"style":bie(p,$,O);break;case"dangerouslySetInnerHTML":if($!=null){if(typeof $!="object"||!("__html"in $))throw Error(r(61));if(v=$.__html,v!=null){if(_.children!=null)throw Error(r(60));p.innerHTML=v}}break;case"children":typeof $=="string"?Rb(p,$):(typeof $=="number"||typeof $=="bigint")&&Rb(p,""+$);break;case"onScroll":$!=null&&Cn("scroll",p);break;case"onScrollEnd":$!=null&&Cn("scrollend",p);break;case"onClick":$!=null&&(p.onclick=JN);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iN.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(_=v.endsWith("Capture"),y=v.slice(2,_?v.length-7:void 0),O=p[da]||null,O=O!=null?O[v]:null,typeof O=="function"&&p.removeEventListener(y,O,_),typeof $=="function")){typeof O!="function"&&O!==null&&(v in p?p[v]=null:p.hasAttribute(v)&&p.removeAttribute(v)),p.addEventListener(y,$,_);break e}v in p?p[v]=$:$===!0?p.setAttribute(v,""):Db(p,v,$)}}}function Js(p,y,v){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",p),Cn("load",p);var $=!1,_=!1,O;for(O in v)if(v.hasOwnProperty(O)){var V=v[O];if(V!=null)switch(O){case"src":$=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:gr(p,y,O,V,v,null)}}_&&gr(p,y,"srcSet",v.srcSet,v,null),$&&gr(p,y,"src",v.src,v,null);return;case"input":Cn("invalid",p);var K=O=V=_=null,ne=null,ye=null;for($ in v)if(v.hasOwnProperty($)){var De=v[$];if(De!=null)switch($){case"name":_=De;break;case"type":V=De;break;case"checked":ne=De;break;case"defaultChecked":ye=De;break;case"value":O=De;break;case"defaultValue":K=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,y));break;default:gr(p,y,$,De,v,null)}}pie(p,O,K,ne,ye,V,_,!1),Hu(p);return;case"select":Cn("invalid",p),$=V=O=null;for(_ in v)if(v.hasOwnProperty(_)&&(K=v[_],K!=null))switch(_){case"value":O=K;break;case"defaultValue":V=K;break;case"multiple":$=K;default:gr(p,y,_,K,v,null)}y=O,v=V,p.multiple=!!$,y!=null?Ob(p,!!$,y,!1):v!=null&&Ob(p,!!$,v,!0);return;case"textarea":Cn("invalid",p),O=_=$=null;for(V in v)if(v.hasOwnProperty(V)&&(K=v[V],K!=null))switch(V){case"value":$=K;break;case"defaultValue":_=K;break;case"children":O=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(91));break;default:gr(p,y,V,K,v,null)}gie(p,$,_,O),Hu(p);return;case"option":for(ne in v)if(v.hasOwnProperty(ne)&&($=v[ne],$!=null))switch(ne){case"selected":p.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:gr(p,y,ne,$,v,null)}return;case"dialog":Cn("beforetoggle",p),Cn("toggle",p),Cn("cancel",p),Cn("close",p);break;case"iframe":case"object":Cn("load",p);break;case"video":case"audio":for($=0;$<RC.length;$++)Cn(RC[$],p);break;case"image":Cn("error",p),Cn("load",p);break;case"details":Cn("toggle",p);break;case"embed":case"source":case"link":Cn("error",p),Cn("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in v)if(v.hasOwnProperty(ye)&&($=v[ye],$!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:gr(p,y,ye,$,v,null)}return;default:if(DL(y)){for(De in v)v.hasOwnProperty(De)&&($=v[De],$!==void 0&&mB(p,y,De,$,v,void 0));return}}for(K in v)v.hasOwnProperty(K)&&($=v[K],$!=null&&gr(p,y,K,$,v,null))}function L8e(p,y,v,$){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,O=null,V=null,K=null,ne=null,ye=null,De=null;for(ve in v){var Re=v[ve];if(v.hasOwnProperty(ve)&&Re!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":ne=Re;default:$.hasOwnProperty(ve)||gr(p,y,ve,null,$,Re)}}for(var be in $){var ve=$[be];if(Re=v[be],$.hasOwnProperty(be)&&(ve!=null||Re!=null))switch(be){case"type":O=ve;break;case"name":_=ve;break;case"checked":ye=ve;break;case"defaultChecked":De=ve;break;case"value":V=ve;break;case"defaultValue":K=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,y));break;default:ve!==Re&&gr(p,y,be,ve,$,Re)}}QS(p,V,K,ne,ye,De,O,_);return;case"select":ve=V=K=be=null;for(O in v)if(ne=v[O],v.hasOwnProperty(O)&&ne!=null)switch(O){case"value":break;case"multiple":ve=ne;default:$.hasOwnProperty(O)||gr(p,y,O,null,$,ne)}for(_ in $)if(O=$[_],ne=v[_],$.hasOwnProperty(_)&&(O!=null||ne!=null))switch(_){case"value":be=O;break;case"defaultValue":K=O;break;case"multiple":V=O;default:O!==ne&&gr(p,y,_,O,$,ne)}y=K,v=V,$=ve,be!=null?Ob(p,!!v,be,!1):!!$!=!!v&&(y!=null?Ob(p,!!v,y,!0):Ob(p,!!v,v?[]:"",!1));return;case"textarea":ve=be=null;for(K in v)if(_=v[K],v.hasOwnProperty(K)&&_!=null&&!$.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:gr(p,y,K,null,$,_)}for(V in $)if(_=$[V],O=v[V],$.hasOwnProperty(V)&&(_!=null||O!=null))switch(V){case"value":be=_;break;case"defaultValue":ve=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==O&&gr(p,y,V,_,$,O)}mie(p,be,ve);return;case"option":for(var Ut in v)if(be=v[Ut],v.hasOwnProperty(Ut)&&be!=null&&!$.hasOwnProperty(Ut))switch(Ut){case"selected":p.selected=!1;break;default:gr(p,y,Ut,null,$,be)}for(ne in $)if(be=$[ne],ve=v[ne],$.hasOwnProperty(ne)&&be!==ve&&(be!=null||ve!=null))switch(ne){case"selected":p.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:gr(p,y,ne,be,$,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in v)be=v[Pt],v.hasOwnProperty(Pt)&&be!=null&&!$.hasOwnProperty(Pt)&&gr(p,y,Pt,null,$,be);for(ye in $)if(be=$[ye],ve=v[ye],$.hasOwnProperty(ye)&&be!==ve&&(be!=null||ve!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,y));break;default:gr(p,y,ye,be,$,ve)}return;default:if(DL(y)){for(var yr in v)be=v[yr],v.hasOwnProperty(yr)&&be!==void 0&&!$.hasOwnProperty(yr)&&mB(p,y,yr,void 0,$,be);for(De in $)be=$[De],ve=v[De],!$.hasOwnProperty(De)||be===ve||be===void 0&&ve===void 0||mB(p,y,De,be,$,ve);return}}for(var fe in v)be=v[fe],v.hasOwnProperty(fe)&&be!=null&&!$.hasOwnProperty(fe)&&gr(p,y,fe,null,$,be);for(Re in $)be=$[Re],ve=v[Re],!$.hasOwnProperty(Re)||be===ve||be==null&&ve==null||gr(p,y,Re,be,$,ve)}var gB=null,yB=null;function e4(p){return p.nodeType===9?p:p.ownerDocument}function yoe(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function boe(p,y){if(p===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&y==="foreignObject"?0:p}function bB(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var xB=null;function P8e(){var p=window.event;return p&&p.type==="popstate"?p===xB?!1:(xB=p,!0):(xB=null,!1)}var xoe=typeof setTimeout=="function"?setTimeout:void 0,B8e=typeof clearTimeout=="function"?clearTimeout:void 0,voe=typeof Promise=="function"?Promise:void 0,z8e=typeof queueMicrotask=="function"?queueMicrotask:typeof voe<"u"?function(p){return voe.resolve(null).then(p).catch(j8e)}:xoe;function j8e(p){setTimeout(function(){throw p})}function Vp(p){return p==="head"}function woe(p,y){var v=y,$=0,_=0;do{var O=v.nextSibling;if(p.removeChild(v),O&&O.nodeType===8)if(v=O.data,v==="/$"){if(0<$&&8>$){v=$;var V=p.ownerDocument;if(v&1&&MC(V.documentElement),v&2&&MC(V.body),v&4)for(v=V.head,MC(v),V=v.firstChild;V;){var K=V.nextSibling,ne=V.nodeName;V[og]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&V.rel.toLowerCase()==="stylesheet"||v.removeChild(V),V=K}}if(_===0){p.removeChild(O),WC(y);return}_--}else v==="$"||v==="$?"||v==="$!"?_++:$=v.charCodeAt(0)-48;else $=0;v=O}while(v);WC(y)}function vB(p){var y=p.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var v=y;switch(y=y.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":vB(v),YS(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}p.removeChild(v)}}function U8e(p,y,v,$){for(;p.nodeType===1;){var _=v;if(p.nodeName.toLowerCase()!==y.toLowerCase()){if(!$&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if($){if(!p[og])switch(y){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(O=p.getAttribute("rel"),O==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(O!==_.rel||p.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||p.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||p.getAttribute("title")!==(_.title==null?null:_.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(O=p.getAttribute("src"),(O!==(_.src==null?null:_.src)||p.getAttribute("type")!==(_.type==null?null:_.type)||p.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&O&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(y==="input"&&p.type==="hidden"){var O=_.name==null?null:""+_.name;if(_.type==="hidden"&&p.getAttribute("name")===O)return p}else return p;if(p=Xu(p.nextSibling),p===null)break}return null}function V8e(p,y,v){if(y==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!v||(p=Xu(p.nextSibling),p===null))return null;return p}function wB(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState==="complete"}function W8e(p,y){var v=p.ownerDocument;if(p.data!=="$?"||v.readyState==="complete")y();else{var $=function(){y(),v.removeEventListener("DOMContentLoaded",$)};v.addEventListener("DOMContentLoaded",$),p._reactRetry=$}}function Xu(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?"||y==="F!"||y==="F")break;if(y==="/$")return null}}return p}var SB=null;function Soe(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var v=p.data;if(v==="$"||v==="$!"||v==="$?"){if(y===0)return p;y--}else v==="/$"&&y++}p=p.previousSibling}return null}function Coe(p,y,v){switch(y=e4(v),p){case"html":if(p=y.documentElement,!p)throw Error(r(452));return p;case"head":if(p=y.head,!p)throw Error(r(453));return p;case"body":if(p=y.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function MC(p){for(var y=p.attributes;y.length;)p.removeAttributeNode(y[0]);YS(p)}var tu=new Map,$oe=new Set;function t4(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var qd=j.d;j.d={f:H8e,r:G8e,D:q8e,C:X8e,L:Y8e,m:K8e,X:Q8e,S:Z8e,M:J8e};function H8e(){var p=qd.f(),y=GN();return p||y}function G8e(p){var y=$p(p);y!==null&&y.tag===5&&y.type==="form"?Wse(y):qd.r(p)}var u2=typeof document>"u"?null:document;function Eoe(p,y,v){var $=u2;if($&&typeof y=="string"&&y){var _=Ir(y);_='link[rel="'+p+'"][href="'+_+'"]',typeof v=="string"&&(_+='[crossorigin="'+v+'"]'),$oe.has(_)||($oe.add(_),p={rel:p,crossOrigin:v,href:y},$.querySelector(_)===null&&(y=$.createElement("link"),Js(y,"link",p),Ri(y),$.head.appendChild(y)))}}function q8e(p){qd.D(p),Eoe("dns-prefetch",p,null)}function X8e(p,y){qd.C(p,y),Eoe("preconnect",p,y)}function Y8e(p,y,v){qd.L(p,y,v);var $=u2;if($&&p&&y){var _='link[rel="preload"][as="'+Ir(y)+'"]';y==="image"&&v&&v.imageSrcSet?(_+='[imagesrcset="'+Ir(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(_+='[imagesizes="'+Ir(v.imageSizes)+'"]')):_+='[href="'+Ir(p)+'"]';var O=_;switch(y){case"style":O=c2(p);break;case"script":O=f2(p)}tu.has(O)||(p=c({rel:"preload",href:y==="image"&&v&&v.imageSrcSet?void 0:p,as:y},v),tu.set(O,p),$.querySelector(_)!==null||y==="style"&&$.querySelector(LC(O))||y==="script"&&$.querySelector(PC(O))||(y=$.createElement("link"),Js(y,"link",p),Ri(y),$.head.appendChild(y)))}}function K8e(p,y){qd.m(p,y);var v=u2;if(v&&p){var $=y&&typeof y.as=="string"?y.as:"script",_='link[rel="modulepreload"][as="'+Ir($)+'"][href="'+Ir(p)+'"]',O=_;switch($){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=f2(p)}if(!tu.has(O)&&(p=c({rel:"modulepreload",href:p},y),tu.set(O,p),v.querySelector(_)===null)){switch($){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(PC(O)))return}$=v.createElement("link"),Js($,"link",p),Ri($),v.head.appendChild($)}}}function Z8e(p,y,v){qd.S(p,y,v);var $=u2;if($&&p){var _=Ep($).hoistableStyles,O=c2(p);y=y||"default";var V=_.get(O);if(!V){var K={loading:0,preload:null};if(V=$.querySelector(LC(O)))K.loading=5;else{p=c({rel:"stylesheet",href:p,"data-precedence":y},v),(v=tu.get(O))&&CB(p,v);var ne=V=$.createElement("link");Ri(ne),Js(ne,"link",p),ne._p=new Promise(function(ye,De){ne.onload=ye,ne.onerror=De}),ne.addEventListener("load",function(){K.loading|=1}),ne.addEventListener("error",function(){K.loading|=2}),K.loading|=4,n4(V,y,$)}V={type:"stylesheet",instance:V,count:1,state:K},_.set(O,V)}}}function Q8e(p,y){qd.X(p,y);var v=u2;if(v&&p){var $=Ep(v).hoistableScripts,_=f2(p),O=$.get(_);O||(O=v.querySelector(PC(_)),O||(p=c({src:p,async:!0},y),(y=tu.get(_))&&$B(p,y),O=v.createElement("script"),Ri(O),Js(O,"link",p),v.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},$.set(_,O))}}function J8e(p,y){qd.M(p,y);var v=u2;if(v&&p){var $=Ep(v).hoistableScripts,_=f2(p),O=$.get(_);O||(O=v.querySelector(PC(_)),O||(p=c({src:p,async:!0,type:"module"},y),(y=tu.get(_))&&$B(p,y),O=v.createElement("script"),Ri(O),Js(O,"link",p),v.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},$.set(_,O))}}function koe(p,y,v,$){var _=(_=de.current)?t4(_):null;if(!_)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(y=c2(v.href),v=Ep(_).hoistableStyles,$=v.get(y),$||($={type:"style",instance:null,count:0,state:null},v.set(y,$)),$):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){p=c2(v.href);var O=Ep(_).hoistableStyles,V=O.get(p);if(V||(_=_.ownerDocument||_,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(p,V),(O=_.querySelector(LC(p)))&&!O._p&&(V.instance=O,V.state.loading=5),tu.has(p)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},tu.set(p,v),O||e9e(_,p,v,V.state))),y&&$===null)throw Error(r(528,""));return V}if(y&&$!==null)throw Error(r(529,""));return null;case"script":return y=v.async,v=v.src,typeof v=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=f2(v),v=Ep(_).hoistableScripts,$=v.get(y),$||($={type:"script",instance:null,count:0,state:null},v.set(y,$)),$):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function c2(p){return'href="'+Ir(p)+'"'}function LC(p){return'link[rel="stylesheet"]['+p+"]"}function Aoe(p){return c({},p,{"data-precedence":p.precedence,precedence:null})}function e9e(p,y,v,$){p.querySelector('link[rel="preload"][as="style"]['+y+"]")?$.loading=1:(y=p.createElement("link"),$.preload=y,y.addEventListener("load",function(){return $.loading|=1}),y.addEventListener("error",function(){return $.loading|=2}),Js(y,"link",v),Ri(y),p.head.appendChild(y))}function f2(p){return'[src="'+Ir(p)+'"]'}function PC(p){return"script[async]"+p}function _oe(p,y,v){if(y.count++,y.instance===null)switch(y.type){case"style":var $=p.querySelector('style[data-href~="'+Ir(v.href)+'"]');if($)return y.instance=$,Ri($),$;var _=c({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return $=(p.ownerDocument||p).createElement("style"),Ri($),Js($,"style",_),n4($,v.precedence,p),y.instance=$;case"stylesheet":_=c2(v.href);var O=p.querySelector(LC(_));if(O)return y.state.loading|=4,y.instance=O,Ri(O),O;$=Aoe(v),(_=tu.get(_))&&CB($,_),O=(p.ownerDocument||p).createElement("link"),Ri(O);var V=O;return V._p=new Promise(function(K,ne){V.onload=K,V.onerror=ne}),Js(O,"link",$),y.state.loading|=4,n4(O,v.precedence,p),y.instance=O;case"script":return O=f2(v.src),(_=p.querySelector(PC(O)))?(y.instance=_,Ri(_),_):($=v,(_=tu.get(O))&&($=c({},v),$B($,_)),p=p.ownerDocument||p,_=p.createElement("script"),Ri(_),Js(_,"link",$),p.head.appendChild(_),y.instance=_);case"void":return null;default:throw Error(r(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&($=y.instance,y.state.loading|=4,n4($,v.precedence,p));return y.instance}function n4(p,y,v){for(var $=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=$.length?$[$.length-1]:null,O=_,V=0;V<$.length;V++){var K=$[V];if(K.dataset.precedence===y)O=K;else if(O!==_)break}O?O.parentNode.insertBefore(p,O.nextSibling):(y=v.nodeType===9?v.head:v,y.insertBefore(p,y.firstChild))}function CB(p,y){p.crossOrigin==null&&(p.crossOrigin=y.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=y.referrerPolicy),p.title==null&&(p.title=y.title)}function $B(p,y){p.crossOrigin==null&&(p.crossOrigin=y.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=y.referrerPolicy),p.integrity==null&&(p.integrity=y.integrity)}var r4=null;function Toe(p,y,v){if(r4===null){var $=new Map,_=r4=new Map;_.set(v,$)}else _=r4,$=_.get(v),$||($=new Map,_.set(v,$));if($.has(p))return $;for($.set(p,null),v=v.getElementsByTagName(p),_=0;_<v.length;_++){var O=v[_];if(!(O[og]||O[gs]||p==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var V=O.getAttribute(y)||"";V=p+V;var K=$.get(V);K?K.push(O):$.set(V,[O])}}return $}function Noe(p,y,v){p=p.ownerDocument||p,p.head.insertBefore(v,y==="title"?p.querySelector("head > title"):null)}function t9e(p,y,v){if(v===1||y.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;switch(y.rel){case"stylesheet":return p=y.disabled,typeof y.precedence=="string"&&p==null;default:return!0}case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function Doe(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var BC=null;function n9e(){}function r9e(p,y,v){if(BC===null)throw Error(r(475));var $=BC;if(y.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var _=c2(v.href),O=p.querySelector(LC(_));if(O){p=O._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&($.count++,$=i4.bind($),p.then($,$)),y.state.loading|=4,y.instance=O,Ri(O);return}O=p.ownerDocument||p,v=Aoe(v),(_=tu.get(_))&&CB(v,_),O=O.createElement("link"),Ri(O);var V=O;V._p=new Promise(function(K,ne){V.onload=K,V.onerror=ne}),Js(O,"link",v),y.instance=O}$.stylesheets===null&&($.stylesheets=new Map),$.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&($.count++,y=i4.bind($),p.addEventListener("load",y),p.addEventListener("error",y))}}function i9e(){if(BC===null)throw Error(r(475));var p=BC;return p.stylesheets&&p.count===0&&EB(p,p.stylesheets),0<p.count?function(y){var v=setTimeout(function(){if(p.stylesheets&&EB(p,p.stylesheets),p.unsuspend){var $=p.unsuspend;p.unsuspend=null,$()}},6e4);return p.unsuspend=y,function(){p.unsuspend=null,clearTimeout(v)}}:null}function i4(){if(this.count--,this.count===0){if(this.stylesheets)EB(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var s4=null;function EB(p,y){p.stylesheets=null,p.unsuspend!==null&&(p.count++,s4=new Map,y.forEach(s9e,p),s4=null,i4.call(p))}function s9e(p,y){if(!(y.state.loading&4)){var v=s4.get(p);if(v)var $=v.get(null);else{v=new Map,s4.set(p,v);for(var _=p.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<_.length;O++){var V=_[O];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(v.set(V.dataset.precedence,V),$=V)}$&&v.set(null,$)}_=y.instance,V=_.getAttribute("data-precedence"),O=v.get(V)||$,O===$&&v.set(null,_),v.set(V,_),this.count++,$=i4.bind(this),_.addEventListener("load",$),_.addEventListener("error",$),O?O.parentNode.insertBefore(_,O.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(_,p.firstChild)),y.state.loading|=4}}var zC={$$typeof:C,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function a9e(p,y,v,$,_,O,V,K){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ag(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ag(0),this.hiddenUpdates=ag(null),this.identifierPrefix=$,this.onUncaughtError=_,this.onCaughtError=O,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Ioe(p,y,v,$,_,O,V,K,ne,ye,De,Re){return p=new a9e(p,y,v,V,K,ne,ye,Re),y=1,O===!0&&(y|=24),O=gl(3,null,null,y),p.current=O,O.stateNode=p,y=aP(),y.refCount++,p.pooledCache=y,y.refCount++,O.memoizedState={element:$,isDehydrated:v,cache:y},cP(O),p}function Ooe(p){return p?(p=Ub,p):Ub}function Roe(p,y,v,$,_,O){_=Ooe(_),$.context===null?$.context=_:$.pendingContext=_,$=Np(y),$.payload={element:v},O=O===void 0?null:O,O!==null&&($.callback=O),v=Dp(p,$,y),v!==null&&(wl(v,p,y),gC(v,p,y))}function Foe(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var v=p.retryLane;p.retryLane=v!==0&&v<y?v:y}}function kB(p,y){Foe(p,y),(p=p.alternate)&&Foe(p,y)}function Moe(p){if(p.tag===13){var y=jb(p,67108864);y!==null&&wl(y,p,67108864),kB(p,67108864)}}var a4=!0;function o9e(p,y,v,$){var _=R.T;R.T=null;var O=j.p;try{j.p=2,AB(p,y,v,$)}finally{j.p=O,R.T=_}}function l9e(p,y,v,$){var _=R.T;R.T=null;var O=j.p;try{j.p=8,AB(p,y,v,$)}finally{j.p=O,R.T=_}}function AB(p,y,v,$){if(a4){var _=_B($);if(_===null)pB(p,y,$,o4,v),Poe(p,$);else if(c9e(_,p,y,v,$))$.stopPropagation();else if(Poe(p,$),y&4&&-1<u9e.indexOf(p)){for(;_!==null;){var O=$p(_);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var V=ot(O.pendingLanes);if(V!==0){var K=O;for(K.pendingLanes|=2,K.entangledLanes|=2;V;){var ne=1<<31-At(V);K.entanglements[1]|=ne,V&=~ne}ef(O),(nr&6)===0&&(WN=et()+500,OC(0))}}break;case 13:K=jb(O,2),K!==null&&wl(K,O,2),GN(),kB(O,2)}if(O=_B($),O===null&&pB(p,y,$,o4,v),O===_)break;_=O}_!==null&&$.stopPropagation()}else pB(p,y,$,null,v)}}function _B(p){return p=OL(p),TB(p)}var o4=null;function TB(p){if(o4=null,p=Cp(p),p!==null){var y=s(p);if(y===null)p=null;else{var v=y.tag;if(v===13){if(p=a(y),p!==null)return p;p=null}else if(v===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null)}}return o4=p,null}function Loe(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case Yn:return 2;case Yt:return 8;case sn:case it:return 32;case fr:return 268435456;default:return 32}default:return 32}}var NB=!1,Wp=null,Hp=null,Gp=null,jC=new Map,UC=new Map,qp=[],u9e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Poe(p,y){switch(p){case"focusin":case"focusout":Wp=null;break;case"dragenter":case"dragleave":Hp=null;break;case"mouseover":case"mouseout":Gp=null;break;case"pointerover":case"pointerout":jC.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":UC.delete(y.pointerId)}}function VC(p,y,v,$,_,O){return p===null||p.nativeEvent!==O?(p={blockedOn:y,domEventName:v,eventSystemFlags:$,nativeEvent:O,targetContainers:[_]},y!==null&&(y=$p(y),y!==null&&Moe(y)),p):(p.eventSystemFlags|=$,y=p.targetContainers,_!==null&&y.indexOf(_)===-1&&y.push(_),p)}function c9e(p,y,v,$,_){switch(y){case"focusin":return Wp=VC(Wp,p,y,v,$,_),!0;case"dragenter":return Hp=VC(Hp,p,y,v,$,_),!0;case"mouseover":return Gp=VC(Gp,p,y,v,$,_),!0;case"pointerover":var O=_.pointerId;return jC.set(O,VC(jC.get(O)||null,p,y,v,$,_)),!0;case"gotpointercapture":return O=_.pointerId,UC.set(O,VC(UC.get(O)||null,p,y,v,$,_)),!0}return!1}function Boe(p){var y=Cp(p.target);if(y!==null){var v=s(y);if(v!==null){if(y=v.tag,y===13){if(y=a(v),y!==null){p.blockedOn=y,EL(p.priority,function(){if(v.tag===13){var $=vl();$=Ya($);var _=jb(v,$);_!==null&&wl(_,v,$),kB(v,$)}});return}}else if(y===3&&v.stateNode.current.memoizedState.isDehydrated){p.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}p.blockedOn=null}function l4(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var v=_B(p.nativeEvent);if(v===null){v=p.nativeEvent;var $=new v.constructor(v.type,v);IL=$,v.target.dispatchEvent($),IL=null}else return y=$p(v),y!==null&&Moe(y),p.blockedOn=v,!1;y.shift()}return!0}function zoe(p,y,v){l4(p)&&v.delete(y)}function f9e(){NB=!1,Wp!==null&&l4(Wp)&&(Wp=null),Hp!==null&&l4(Hp)&&(Hp=null),Gp!==null&&l4(Gp)&&(Gp=null),jC.forEach(zoe),UC.forEach(zoe)}function u4(p,y){p.blockedOn===y&&(p.blockedOn=null,NB||(NB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,f9e)))}var c4=null;function joe(p){c4!==p&&(c4=p,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){c4===p&&(c4=null);for(var y=0;y<p.length;y+=3){var v=p[y],$=p[y+1],_=p[y+2];if(typeof $!="function"){if(TB($||v)===null)continue;break}var O=$p(v);O!==null&&(p.splice(y,3),y-=3,TP(O,{pending:!0,data:_,method:v.method,action:$},$,_))}}))}function WC(p){function y(ne){return u4(ne,p)}Wp!==null&&u4(Wp,p),Hp!==null&&u4(Hp,p),Gp!==null&&u4(Gp,p),jC.forEach(y),UC.forEach(y);for(var v=0;v<qp.length;v++){var $=qp[v];$.blockedOn===p&&($.blockedOn=null)}for(;0<qp.length&&(v=qp[0],v.blockedOn===null);)Boe(v),v.blockedOn===null&&qp.shift();if(v=(p.ownerDocument||p).$$reactFormReplay,v!=null)for($=0;$<v.length;$+=3){var _=v[$],O=v[$+1],V=_[da]||null;if(typeof O=="function")V||joe(v);else if(V){var K=null;if(O&&O.hasAttribute("formAction")){if(_=O,V=O[da]||null)K=V.formAction;else if(TB(_)!==null)continue}else K=V.action;typeof K=="function"?v[$+1]=K:(v.splice($,3),$-=3),joe(v)}}}function DB(p){this._internalRoot=p}f4.prototype.render=DB.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(r(409));var v=y.current,$=vl();Roe(v,$,p,y,null,null)},f4.prototype.unmount=DB.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;Roe(p.current,2,null,p,null,null),GN(),y[Sp]=null}};function f4(p){this._internalRoot=p}f4.prototype.unstable_scheduleHydration=function(p){if(p){var y=tN();p={blockedOn:null,target:p,priority:y};for(var v=0;v<qp.length&&y!==0&&y<qp[v].priority;v++);qp.splice(v,0,p),v===0&&Boe(p)}};var Uoe=t.version;if(Uoe!=="19.1.0")throw Error(r(527,Uoe,"19.1.0"));j.findDOMNode=function(p){var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=l(y),p=p!==null?u(p):null,p=p===null?null:p.stateNode,p};var d9e={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d4=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d4.isDisabled&&d4.supportsFiber)try{Ue=d4.inject(d9e),Ne=d4}catch{}}return GC.createRoot=function(p,y){if(!i(p))throw Error(r(299));var v=!1,$="",_=iae,O=sae,V=aae,K=null;return y!=null&&(y.unstable_strictMode===!0&&(v=!0),y.identifierPrefix!==void 0&&($=y.identifierPrefix),y.onUncaughtError!==void 0&&(_=y.onUncaughtError),y.onCaughtError!==void 0&&(O=y.onCaughtError),y.onRecoverableError!==void 0&&(V=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(K=y.unstable_transitionCallbacks)),y=Ioe(p,1,!1,null,null,v,$,_,O,V,K,null),p[Sp]=y.current,hB(p),new DB(y)},GC.hydrateRoot=function(p,y,v){if(!i(p))throw Error(r(299));var $=!1,_="",O=iae,V=sae,K=aae,ne=null,ye=null;return v!=null&&(v.unstable_strictMode===!0&&($=!0),v.identifierPrefix!==void 0&&(_=v.identifierPrefix),v.onUncaughtError!==void 0&&(O=v.onUncaughtError),v.onCaughtError!==void 0&&(V=v.onCaughtError),v.onRecoverableError!==void 0&&(K=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(ne=v.unstable_transitionCallbacks),v.formState!==void 0&&(ye=v.formState)),y=Ioe(p,1,!0,y,v??null,$,_,O,V,K,ne,ye),y.context=Ooe(null),v=y.current,$=vl(),$=Ya($),_=Np($),_.callback=null,Dp(v,_,$),v=$,y.current.lanes=v,hr(y,v),ef(y),p[Sp]=y.current,hB(p),new f4(y)},GC.version="19.1.0",GC}var Qoe;function C9e(){if(Qoe)return RB.exports;Qoe=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),RB.exports=S9e(),RB.exports}var $9e=C9e();const E9e=Am($9e);var qC={},Joe;function k9e(){if(Joe)return qC;Joe=1,Object.defineProperty(qC,"__esModule",{value:!0}),qC.parse=a,qC.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function a(d,h){const m=new s,g=d.length;if(g<2)return m;const b=(h==null?void 0:h.decode)||c;let x=0;do{const w=d.indexOf("=",x);if(w===-1)break;const C=d.indexOf(";",x),S=C===-1?g:C;if(w>S){x=d.lastIndexOf(";",w-1)+1;continue}const E=o(d,x,w),A=l(d,w,E),k=d.slice(E,A);if(m[k]===void 0){let N=o(d,w+1,S),I=l(d,S,N);const T=b(d.slice(N,I));m[k]=T}x=S+1}while(x<g);return m}function o(d,h,m){do{const g=d.charCodeAt(h);if(g!==32&&g!==9)return h}while(++h<m);return m}function l(d,h,m){for(;h>m;){const g=d.charCodeAt(--h);if(g!==32&&g!==9)return h+1}return m}function u(d,h,m){const g=(m==null?void 0:m.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const b=g(h);if(!t.test(b))throw new TypeError(`argument val is invalid: ${h}`);let x=d+"="+b;if(!m)return x;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);x+="; Max-Age="+m.maxAge}if(m.domain){if(!n.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);x+="; Domain="+m.domain}if(m.path){if(!r.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);x+="; Path="+m.path}if(m.expires){if(!f(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);x+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(x+="; HttpOnly"),m.secure&&(x+="; Secure"),m.partitioned&&(x+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return x}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return qC}k9e();var ele="popstate";function A9e(e={}){function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return wV("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rE(i)}return T9e(t,n,null,e)}function ii(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Wf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _9e(){return Math.random().toString(36).substring(2,10)}function tle(e,t){return{usr:e.state,key:e.key,idx:t}}function wV(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Iv(t):t,state:n,key:t&&t.key||r||_9e()}}function rE({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Iv(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function T9e(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,u=c();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function c(){return(a.state||{idx:null}).idx}function f(){o="POP";let b=c(),x=b==null?null:b-u;u=b,l&&l({action:o,location:g.location,delta:x})}function d(b,x){o="PUSH";let w=wV(g.location,b,x);u=c()+1;let C=tle(w,u),S=g.createHref(w);try{a.pushState(C,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}s&&l&&l({action:o,location:g.location,delta:1})}function h(b,x){o="REPLACE";let w=wV(g.location,b,x);u=c();let C=tle(w,u),S=g.createHref(w);a.replaceState(C,"",S),s&&l&&l({action:o,location:g.location,delta:0})}function m(b){return N9e(b)}let g={get action(){return o},get location(){return e(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ele,f),l=b,()=>{i.removeEventListener(ele,f),l=null}},createHref(b){return t(i,b)},createURL:m,encodeLocation(b){let x=m(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:d,replace:h,go(b){return a.go(b)}};return g}function N9e(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ii(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:rE(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Mbe(e,t,n="/"){return D9e(e,t,n,!1)}function D9e(e,t,n,r){let i=typeof t=="string"?Iv(t):t,s=Bh(i.pathname||"/",n);if(s==null)return null;let a=Lbe(e);I9e(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=V9e(s);o=j9e(a[l],u,r)}return o}function Lbe(e,t=[],n=[],r=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(ii(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=_h([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(ii(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Lbe(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:B9e(u,s.index),routesMeta:c})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of Pbe(s.path))i(s,a,l)}),t}function Pbe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Pbe(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function I9e(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:z9e(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var O9e=/^:[\w-]+$/,R9e=3,F9e=2,M9e=1,L9e=10,P9e=-2,nle=e=>e==="*";function B9e(e,t){let n=e.split("/"),r=n.length;return n.some(nle)&&(r+=P9e),t&&(r+=F9e),n.filter(i=>!nle(i)).reduce((i,s)=>i+(O9e.test(s)?R9e:s===""?M9e:L9e),r)}function z9e(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function j9e(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=EO({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=EO({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:_h([s,f.pathname]),pathnameBase:q9e(_h([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=_h([s,f.pathnameBase]))}return a}function EO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=U9e(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},d)=>{if(c==="*"){let m=o[d]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=o[d];return f&&!h?u[c]=void 0:u[c]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function U9e(e,t=!1,n=!0){Wf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function V9e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wf(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Bh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function W9e(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Iv(e):e;return{pathname:n?n.startsWith("/")?n:H9e(n,t):t,search:X9e(r),hash:Y9e(i)}}function H9e(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function PB(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G9e(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Bbe(e){let t=G9e(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function zbe(e,t,n,r=!1){let i;typeof e=="string"?i=Iv(e):(i={...e},ii(!i.pathname||!i.pathname.includes("?"),PB("?","pathname","search",i)),ii(!i.pathname||!i.pathname.includes("#"),PB("#","pathname","hash",i)),ii(!i.search||!i.search.includes("#"),PB("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}o=f>=0?t[f]:"/"}let l=W9e(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var _h=e=>e.join("/").replace(/\/\/+/g,"/"),q9e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X9e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Y9e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function K9e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var jbe=["POST","PUT","PATCH","DELETE"];new Set(jbe);var Z9e=["GET",...jbe];new Set(Z9e);var Ov=U.createContext(null);Ov.displayName="DataRouter";var w6=U.createContext(null);w6.displayName="DataRouterState";var Ube=U.createContext({isTransitioning:!1});Ube.displayName="ViewTransition";var Q9e=U.createContext(new Map);Q9e.displayName="Fetchers";var J9e=U.createContext(null);J9e.displayName="Await";var ud=U.createContext(null);ud.displayName="Navigation";var Nk=U.createContext(null);Nk.displayName="Location";var tp=U.createContext({outlet:null,matches:[],isDataRoute:!1});tp.displayName="Route";var Nq=U.createContext(null);Nq.displayName="RouteError";function e7e(e,{relative:t}={}){ii(Dk(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=U.useContext(ud),{hash:i,pathname:s,search:a}=Ik(e,{relative:t}),o=s;return n!=="/"&&(o=s==="/"?n:_h([n,s])),r.createHref({pathname:o,search:a,hash:i})}function Dk(){return U.useContext(Nk)!=null}function Tm(){return ii(Dk(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Nk).location}var Vbe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wbe(e){U.useContext(ud).static||U.useLayoutEffect(e)}function t7e(){let{isDataRoute:e}=U.useContext(tp);return e?p7e():n7e()}function n7e(){ii(Dk(),"useNavigate() may be used only in the context of a <Router> component.");let e=U.useContext(Ov),{basename:t,navigator:n}=U.useContext(ud),{matches:r}=U.useContext(tp),{pathname:i}=Tm(),s=JSON.stringify(Bbe(r)),a=U.useRef(!1);return Wbe(()=>{a.current=!0}),U.useCallback((l,u={})=>{if(Wf(a.current,Vbe),!a.current)return;if(typeof l=="number"){n.go(l);return}let c=zbe(l,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:_h([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,s,i,e])}U.createContext(null);function Ik(e,{relative:t}={}){let{matches:n}=U.useContext(tp),{pathname:r}=Tm(),i=JSON.stringify(Bbe(n));return U.useMemo(()=>zbe(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function r7e(e,t){return Hbe(e,t)}function Hbe(e,t,n,r){var x;ii(Dk(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=U.useContext(ud),{matches:s}=U.useContext(tp),a=s[s.length-1],o=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",c=a&&a.route;{let w=c&&c.path||"";Gbe(l,!c||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=Tm(),d;if(t){let w=typeof t=="string"?Iv(t):t;ii(u==="/"||((x=w.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),d=w}else d=f;let h=d.pathname||"/",m=h;if(u!=="/"){let w=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=Mbe(e,{pathname:m});Wf(c||g!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Wf(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=l7e(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:_h([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:_h([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&b?U.createElement(Nk.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},b):b}function i7e(){let e=h7e(),t=K9e(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:s},"ErrorBoundary")," or"," ",U.createElement("code",{style:s},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),n?U.createElement("pre",{style:i},n):null,a)}var s7e=U.createElement(i7e,null),a7e=class extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?U.createElement(tp.Provider,{value:this.props.routeContext},U.createElement(Nq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function o7e({routeContext:e,match:t,children:n}){let r=U.useContext(Ov);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(tp.Provider,{value:e},n)}function l7e(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);ii(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:c,errors:f}=n,d=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||d){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let f,d=!1,h=null,m=null;n&&(f=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||s7e,a&&(o<0&&c===0?(Gbe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):o===c&&(d=!0,m=u.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,c+1)),b=()=>{let x;return f?x=h:d?x=m:u.route.Component?x=U.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,U.createElement(o7e,{match:u,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?U.createElement(a7e,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function Dq(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u7e(e){let t=U.useContext(Ov);return ii(t,Dq(e)),t}function c7e(e){let t=U.useContext(w6);return ii(t,Dq(e)),t}function f7e(e){let t=U.useContext(tp);return ii(t,Dq(e)),t}function Iq(e){let t=f7e(e),n=t.matches[t.matches.length-1];return ii(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function d7e(){return Iq("useRouteId")}function h7e(){var r;let e=U.useContext(Nq),t=c7e("useRouteError"),n=Iq("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function p7e(){let{router:e}=u7e("useNavigate"),t=Iq("useNavigate"),n=U.useRef(!1);return Wbe(()=>{n.current=!0}),U.useCallback(async(i,s={})=>{Wf(n.current,Vbe),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var rle={};function Gbe(e,t,n){!t&&!rle[e]&&(rle[e]=!0,Wf(!1,n))}U.memo(m7e);function m7e({routes:e,future:t,state:n}){return Hbe(e,void 0,n,t)}function z2(e){ii(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function g7e({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){ii(!Dk(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=U.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=Iv(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:d="default"}=n,h=U.useMemo(()=>{let m=Bh(l,a);return m==null?null:{location:{pathname:m,search:u,hash:c,state:f,key:d},navigationType:r}},[a,l,u,c,f,d,r]);return Wf(h!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:U.createElement(ud.Provider,{value:o},U.createElement(Nk.Provider,{children:t,value:h}))}function y7e({children:e,location:t}){return r7e(SV(e),t)}function SV(e,t=[]){let n=[];return U.Children.forEach(e,(r,i)=>{if(!U.isValidElement(r))return;let s=[...t,i];if(r.type===U.Fragment){n.push.apply(n,SV(r.props.children,s));return}ii(r.type===z2,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ii(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=SV(r.props.children,s)),n.push(a)}),n}var vI="get",wI="application/x-www-form-urlencoded";function S6(e){return e!=null&&typeof e.tagName=="string"}function b7e(e){return S6(e)&&e.tagName.toLowerCase()==="button"}function x7e(e){return S6(e)&&e.tagName.toLowerCase()==="form"}function v7e(e){return S6(e)&&e.tagName.toLowerCase()==="input"}function w7e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function S7e(e,t){return e.button===0&&(!t||t==="_self")&&!w7e(e)}var h4=null;function C7e(){if(h4===null)try{new FormData(document.createElement("form"),0),h4=!1}catch{h4=!0}return h4}var $7e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function BB(e){return e!=null&&!$7e.has(e)?(Wf(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wI}"`),null):e}function E7e(e,t){let n,r,i,s,a;if(x7e(e)){let o=e.getAttribute("action");r=o?Bh(o,t):null,n=e.getAttribute("method")||vI,i=BB(e.getAttribute("enctype"))||wI,s=new FormData(e)}else if(b7e(e)||v7e(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(r=l?Bh(l,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||vI,i=BB(e.getAttribute("formenctype"))||BB(o.getAttribute("enctype"))||wI,s=new FormData(o,e),!C7e()){let{name:u,type:c,value:f}=e;if(c==="image"){let d=u?`${u}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else u&&s.append(u,f)}}else{if(S6(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vI,r=null,i=wI,a=e}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function Oq(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function k7e(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function A7e(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _7e(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let a=await k7e(s,n);return a.links?a.links():[]}return[]}));return I7e(r.flat(1).filter(A7e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ile(e,t,n,r,i,s){let a=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,u)=>a(l,u)||o(l,u)):s==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function T7e(e,t,{includeHydrateFallback:n}={}){return N7e(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function N7e(e){return[...new Set(e)]}function D7e(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function I7e(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(D7e(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var O7e=new Set([100,101,204,205]);function R7e(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Bh(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function qbe(){let e=U.useContext(Ov);return Oq(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function F7e(){let e=U.useContext(w6);return Oq(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Rq=U.createContext(void 0);Rq.displayName="FrameworkContext";function Xbe(){let e=U.useContext(Rq);return Oq(e,"You must render this element inside a <HydratedRouter> element"),e}function M7e(e,t){let n=U.useContext(Rq),[r,i]=U.useState(!1),[s,a]=U.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,d=U.useRef(null);U.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let g=x=>{x.forEach(w=>{a(w.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return d.current&&b.observe(d.current),()=>{b.disconnect()}}},[e]),U.useEffect(()=>{if(r){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[r]);let h=()=>{i(!0)},m=()=>{i(!1),a(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:XC(o,h),onBlur:XC(l,m),onMouseEnter:XC(u,h),onMouseLeave:XC(c,m),onTouchStart:XC(f,h)}]:[!1,d,{}]}function XC(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function L7e({page:e,...t}){let{router:n}=qbe(),r=U.useMemo(()=>Mbe(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?U.createElement(B7e,{page:e,matches:r,...t}):null}function P7e(e){let{manifest:t,routeModules:n}=Xbe(),[r,i]=U.useState([]);return U.useEffect(()=>{let s=!1;return _7e(e,t,n).then(a=>{s||i(a)}),()=>{s=!0}},[e,t,n]),r}function B7e({page:e,matches:t,...n}){let r=Tm(),{manifest:i,routeModules:s}=Xbe(),{basename:a}=qbe(),{loaderData:o,matches:l}=F7e(),u=U.useMemo(()=>ile(e,t,l,i,r,"data"),[e,t,l,i,r]),c=U.useMemo(()=>ile(e,t,l,i,r,"assets"),[e,t,l,i,r]),f=U.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(t.forEach(x=>{var C;let w=i.routes[x.route.id];!w||!w.hasLoader||(!u.some(S=>S.route.id===x.route.id)&&x.route.id in o&&((C=s[x.route.id])!=null&&C.shouldRevalidate)||w.hasClientLoader?g=!0:m.add(x.route.id))}),m.size===0)return[];let b=R7e(e,a);return g&&m.size>0&&b.searchParams.set("_routes",t.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[b.pathname+b.search]},[a,o,r,i,u,t,e,s]),d=U.useMemo(()=>T7e(c,i),[c,i]),h=P7e(c);return U.createElement(U.Fragment,null,f.map(m=>U.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),d.map(m=>U.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),h.map(({key:m,link:g})=>U.createElement("link",{key:m,...g})))}function z7e(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Ybe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ybe&&(window.__reactRouterVersion="7.6.3")}catch{}function j7e({basename:e,children:t,window:n}){let r=U.useRef();r.current==null&&(r.current=A9e({window:n,v5Compat:!0}));let i=r.current,[s,a]=U.useState({action:i.action,location:i.location}),o=U.useCallback(l=>{U.startTransition(()=>a(l))},[a]);return U.useLayoutEffect(()=>i.listen(o),[i,o]),U.createElement(g7e,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var Kbe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bx=U.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:f,...d},h){let{basename:m}=U.useContext(ud),g=typeof u=="string"&&Kbe.test(u),b,x=!1;if(typeof u=="string"&&g&&(b=u,Ybe))try{let I=new URL(window.location.href),T=u.startsWith("//")?new URL(I.protocol+u):new URL(u),D=Bh(T.pathname,m);T.origin===I.origin&&D!=null?u=D+T.search+T.hash:x=!0}catch{Wf(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=e7e(u,{relative:i}),[C,S,E]=M7e(r,d),A=H7e(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:f});function k(I){t&&t(I),I.defaultPrevented||A(I)}let N=U.createElement("a",{...d,...E,href:b||w,onClick:x||s?t:k,ref:z7e(h,S),target:l,"data-discover":!g&&n==="render"?"true":void 0});return C&&!g?U.createElement(U.Fragment,null,N,U.createElement(L7e,{page:w})):N});bx.displayName="Link";var U7e=U.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...u},c){let f=Ik(a,{relative:u.relative}),d=Tm(),h=U.useContext(w6),{navigator:m,basename:g}=U.useContext(ud),b=h!=null&&K7e(f)&&o===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,w=d.pathname,C=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(w=w.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&g&&(C=Bh(C,g)||C);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let E=w===x||!i&&w.startsWith(x)&&w.charAt(S)==="/",A=C!=null&&(C===x||!i&&C.startsWith(x)&&C.charAt(x.length)==="/"),k={isActive:E,isPending:A,isTransitioning:b},N=E?t:void 0,I;typeof r=="function"?I=r(k):I=[r,E?"active":null,A?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let T=typeof s=="function"?s(k):s;return U.createElement(bx,{...u,"aria-current":N,className:I,ref:c,style:T,to:a,viewTransition:o},typeof l=="function"?l(k):l)});U7e.displayName="NavLink";var V7e=U.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=vI,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...d},h)=>{let m=X7e(),g=Y7e(o,{relative:u}),b=a.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&Kbe.test(o),w=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let S=C.nativeEvent.submitter,E=(S==null?void 0:S.getAttribute("formmethod"))||a;m(S||C.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:f})};return U.createElement("form",{ref:h,method:b,action:g,onSubmit:r?l:w,...d,"data-discover":!x&&e==="render"?"true":void 0})});V7e.displayName="Form";function W7e(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zbe(e){let t=U.useContext(Ov);return ii(t,W7e(e)),t}function H7e(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=t7e(),l=Tm(),u=Ik(e,{relative:s});return U.useCallback(c=>{if(S7e(c,t)){c.preventDefault();let f=n!==void 0?n:rE(l)===rE(u);o(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,u,n,r,t,e,i,s,a])}var G7e=0,q7e=()=>`__${String(++G7e)}__`;function X7e(){let{router:e}=Zbe("useSubmit"),{basename:t}=U.useContext(ud),n=d7e();return U.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:u}=E7e(r,t);if(i.navigate===!1){let c=i.fetcherKey||q7e();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Y7e(e,{relative:t}={}){let{basename:n}=U.useContext(ud),r=U.useContext(tp);ii(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ik(e||".",{relative:t})},a=Tm();if(e==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let c=o.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:_h([n,s.pathname])),rE(s)}function K7e(e,t={}){let n=U.useContext(Ube);ii(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Zbe("useViewTransitionState"),i=Ik(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Bh(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Bh(n.nextLocation.pathname,r)||n.nextLocation.pathname;return EO(i.pathname,a)!=null||EO(i.pathname,s)!=null}[...O7e];var Qbe=Fbe();const p4=Am(Qbe),iE={black:"#000",white:"#fff"},d2={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},h2={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},p2={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},m2={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},g2={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},YC={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Z7e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function zh(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}const C6="$$material";function kO(){return kO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kO.apply(null,arguments)}function Q7e(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function J7e(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var eLe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(J7e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Q7e(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ya="-ms-",AO="-moz-",Un="-webkit-",Jbe="comm",Fq="rule",Mq="decl",tLe="@import",e2e="@keyframes",nLe="@layer",rLe=Math.abs,$6=String.fromCharCode,iLe=Object.assign;function sLe(e,t){return ea(e,0)^45?(((t<<2^ea(e,0))<<2^ea(e,1))<<2^ea(e,2))<<2^ea(e,3):0}function t2e(e){return e.trim()}function aLe(e,t){return(e=t.exec(e))?e[0]:e}function Vn(e,t,n){return e.replace(t,n)}function CV(e,t){return e.indexOf(t)}function ea(e,t){return e.charCodeAt(t)|0}function sE(e,t,n){return e.slice(t,n)}function pf(e){return e.length}function Lq(e){return e.length}function m4(e,t){return t.push(e),e}function oLe(e,t){return e.map(t).join("")}var E6=1,xx=1,n2e=0,el=0,Pi=0,Rv="";function k6(e,t,n,r,i,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:E6,column:xx,length:a,return:""}}function KC(e,t){return iLe(k6("",null,null,"",null,null,0),e,{length:-e.length},t)}function lLe(){return Pi}function uLe(){return Pi=el>0?ea(Rv,--el):0,xx--,Pi===10&&(xx=1,E6--),Pi}function Il(){return Pi=el<n2e?ea(Rv,el++):0,xx++,Pi===10&&(xx=1,E6++),Pi}function Tf(){return ea(Rv,el)}function SI(){return el}function Ok(e,t){return sE(Rv,e,t)}function aE(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function r2e(e){return E6=xx=1,n2e=pf(Rv=e),el=0,[]}function i2e(e){return Rv="",e}function CI(e){return t2e(Ok(el-1,$V(e===91?e+2:e===40?e+1:e)))}function cLe(e){for(;(Pi=Tf())&&Pi<33;)Il();return aE(e)>2||aE(Pi)>3?"":" "}function fLe(e,t){for(;--t&&Il()&&!(Pi<48||Pi>102||Pi>57&&Pi<65||Pi>70&&Pi<97););return Ok(e,SI()+(t<6&&Tf()==32&&Il()==32))}function $V(e){for(;Il();)switch(Pi){case e:return el;case 34:case 39:e!==34&&e!==39&&$V(Pi);break;case 40:e===41&&$V(e);break;case 92:Il();break}return el}function dLe(e,t){for(;Il()&&e+Pi!==57;)if(e+Pi===84&&Tf()===47)break;return"/*"+Ok(t,el-1)+"*"+$6(e===47?e:Il())}function hLe(e){for(;!aE(Tf());)Il();return Ok(e,el)}function pLe(e){return i2e($I("",null,null,null,[""],e=r2e(e),0,[0],e))}function $I(e,t,n,r,i,s,a,o,l){for(var u=0,c=0,f=a,d=0,h=0,m=0,g=1,b=1,x=1,w=0,C="",S=i,E=s,A=r,k=C;b;)switch(m=w,w=Il()){case 40:if(m!=108&&ea(k,f-1)==58){CV(k+=Vn(CI(w),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:k+=CI(w);break;case 9:case 10:case 13:case 32:k+=cLe(m);break;case 92:k+=fLe(SI()-1,7);continue;case 47:switch(Tf()){case 42:case 47:m4(mLe(dLe(Il(),SI()),t,n),l);break;default:k+="/"}break;case 123*g:o[u++]=pf(k)*x;case 125*g:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+c:x==-1&&(k=Vn(k,/\f/g,"")),h>0&&pf(k)-f&&m4(h>32?ale(k+";",r,n,f-1):ale(Vn(k," ","")+";",r,n,f-2),l);break;case 59:k+=";";default:if(m4(A=sle(k,t,n,u,c,i,o,C,S=[],E=[],f),s),w===123)if(c===0)$I(k,t,A,A,S,s,f,o,E);else switch(d===99&&ea(k,3)===110?100:d){case 100:case 108:case 109:case 115:$I(e,A,A,r&&m4(sle(e,A,A,0,0,i,o,C,i,S=[],f),E),i,E,f,o,r?S:E);break;default:$I(k,A,A,A,[""],E,0,o,E)}}u=c=h=0,g=x=1,C=k="",f=a;break;case 58:f=1+pf(k),h=m;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&uLe()==125)continue}switch(k+=$6(w),w*g){case 38:x=c>0?1:(k+="\f",-1);break;case 44:o[u++]=(pf(k)-1)*x,x=1;break;case 64:Tf()===45&&(k+=CI(Il())),d=Tf(),c=f=pf(C=k+=hLe(SI())),w++;break;case 45:m===45&&pf(k)==2&&(g=0)}}return s}function sle(e,t,n,r,i,s,a,o,l,u,c){for(var f=i-1,d=i===0?s:[""],h=Lq(d),m=0,g=0,b=0;m<r;++m)for(var x=0,w=sE(e,f+1,f=rLe(g=a[m])),C=e;x<h;++x)(C=t2e(g>0?d[x]+" "+w:Vn(w,/&\f/g,d[x])))&&(l[b++]=C);return k6(e,t,n,i===0?Fq:o,l,u,c)}function mLe(e,t,n){return k6(e,t,n,Jbe,$6(lLe()),sE(e,2,-2),0)}function ale(e,t,n,r){return k6(e,t,n,Mq,sE(e,0,r),sE(e,r+1,-1),r)}function ex(e,t){for(var n="",r=Lq(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function gLe(e,t,n,r){switch(e.type){case nLe:if(e.children.length)break;case tLe:case Mq:return e.return=e.return||e.value;case Jbe:return"";case e2e:return e.return=e.value+"{"+ex(e.children,r)+"}";case Fq:e.value=e.props.join(",")}return pf(n=ex(e.children,r))?e.return=e.value+"{"+n+"}":""}function yLe(e){var t=Lq(e);return function(n,r,i,s){for(var a="",o=0;o<t;o++)a+=e[o](n,r,i,s)||"";return a}}function bLe(e){return function(t){t.root||(t=t.return)&&e(t)}}function s2e(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var xLe=function(t,n,r){for(var i=0,s=0;i=s,s=Tf(),i===38&&s===12&&(n[r]=1),!aE(s);)Il();return Ok(t,el)},vLe=function(t,n){var r=-1,i=44;do switch(aE(i)){case 0:i===38&&Tf()===12&&(n[r]=1),t[r]+=xLe(el-1,n,r);break;case 2:t[r]+=CI(i);break;case 4:if(i===44){t[++r]=Tf()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=$6(i)}while(i=Il());return t},wLe=function(t,n){return i2e(vLe(r2e(t),n))},ole=new WeakMap,SLe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!ole.get(r))&&!i){ole.set(t,!0);for(var s=[],a=wLe(n,s),o=r.props,l=0,u=0;l<a.length;l++)for(var c=0;c<o.length;c++,u++)t.props[u]=s[l]?a[l].replace(/&\f/g,o[c]):o[c]+" "+a[l]}}},CLe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function a2e(e,t){switch(sLe(e,t)){case 5103:return Un+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Un+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Un+e+AO+e+ya+e+e;case 6828:case 4268:return Un+e+ya+e+e;case 6165:return Un+e+ya+"flex-"+e+e;case 5187:return Un+e+Vn(e,/(\w+).+(:[^]+)/,Un+"box-$1$2"+ya+"flex-$1$2")+e;case 5443:return Un+e+ya+"flex-item-"+Vn(e,/flex-|-self/,"")+e;case 4675:return Un+e+ya+"flex-line-pack"+Vn(e,/align-content|flex-|-self/,"")+e;case 5548:return Un+e+ya+Vn(e,"shrink","negative")+e;case 5292:return Un+e+ya+Vn(e,"basis","preferred-size")+e;case 6060:return Un+"box-"+Vn(e,"-grow","")+Un+e+ya+Vn(e,"grow","positive")+e;case 4554:return Un+Vn(e,/([^-])(transform)/g,"$1"+Un+"$2")+e;case 6187:return Vn(Vn(Vn(e,/(zoom-|grab)/,Un+"$1"),/(image-set)/,Un+"$1"),e,"")+e;case 5495:case 3959:return Vn(e,/(image-set\([^]*)/,Un+"$1$`$1");case 4968:return Vn(Vn(e,/(.+:)(flex-)?(.*)/,Un+"box-pack:$3"+ya+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Un+e+e;case 4095:case 3583:case 4068:case 2532:return Vn(e,/(.+)-inline(.+)/,Un+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(pf(e)-1-t>6)switch(ea(e,t+1)){case 109:if(ea(e,t+4)!==45)break;case 102:return Vn(e,/(.+:)(.+)-([^]+)/,"$1"+Un+"$2-$3$1"+AO+(ea(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~CV(e,"stretch")?a2e(Vn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ea(e,t+1)!==115)break;case 6444:switch(ea(e,pf(e)-3-(~CV(e,"!important")&&10))){case 107:return Vn(e,":",":"+Un)+e;case 101:return Vn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Un+(ea(e,14)===45?"inline-":"")+"box$3$1"+Un+"$2$3$1"+ya+"$2box$3")+e}break;case 5936:switch(ea(e,t+11)){case 114:return Un+e+ya+Vn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Un+e+ya+Vn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Un+e+ya+Vn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Un+e+ya+e+e}return e}var $Le=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case Mq:t.return=a2e(t.value,t.length);break;case e2e:return ex([KC(t,{value:Vn(t.value,"@","@"+Un)})],i);case Fq:if(t.length)return oLe(t.props,function(s){switch(aLe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ex([KC(t,{props:[Vn(s,/:(read-\w+)/,":"+AO+"$1")]})],i);case"::placeholder":return ex([KC(t,{props:[Vn(s,/:(plac\w+)/,":"+Un+"input-$1")]}),KC(t,{props:[Vn(s,/:(plac\w+)/,":"+AO+"$1")]}),KC(t,{props:[Vn(s,/:(plac\w+)/,ya+"input-$1")]})],i)}return""})}},ELe=[$Le],kLe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||ELe,s={},a,o=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),x=1;x<b.length;x++)s[b[x]]=!0;o.push(g)});var l,u=[SLe,CLe];{var c,f=[gLe,bLe(function(g){c.insert(g)})],d=yLe(u.concat(i,f)),h=function(b){return ex(pLe(b),d)};l=function(b,x,w,C){c=w,h(b?b+"{"+x.styles+"}":x.styles),C&&(m.inserted[x.name]=!0)}}var m={key:n,sheet:new eLe({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(o),m},zB={exports:{}},Kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lle;function ALe(){if(lle)return Kn;lle=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,x=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function C(E){if(typeof E=="object"&&E!==null){var A=E.$$typeof;switch(A){case t:switch(E=E.type,E){case l:case u:case r:case s:case i:case f:return E;default:switch(E=E&&E.$$typeof,E){case o:case c:case m:case h:case a:return E;default:return A}}case n:return A}}}function S(E){return C(E)===u}return Kn.AsyncMode=l,Kn.ConcurrentMode=u,Kn.ContextConsumer=o,Kn.ContextProvider=a,Kn.Element=t,Kn.ForwardRef=c,Kn.Fragment=r,Kn.Lazy=m,Kn.Memo=h,Kn.Portal=n,Kn.Profiler=s,Kn.StrictMode=i,Kn.Suspense=f,Kn.isAsyncMode=function(E){return S(E)||C(E)===l},Kn.isConcurrentMode=S,Kn.isContextConsumer=function(E){return C(E)===o},Kn.isContextProvider=function(E){return C(E)===a},Kn.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Kn.isForwardRef=function(E){return C(E)===c},Kn.isFragment=function(E){return C(E)===r},Kn.isLazy=function(E){return C(E)===m},Kn.isMemo=function(E){return C(E)===h},Kn.isPortal=function(E){return C(E)===n},Kn.isProfiler=function(E){return C(E)===s},Kn.isStrictMode=function(E){return C(E)===i},Kn.isSuspense=function(E){return C(E)===f},Kn.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===u||E===s||E===i||E===f||E===d||typeof E=="object"&&E!==null&&(E.$$typeof===m||E.$$typeof===h||E.$$typeof===a||E.$$typeof===o||E.$$typeof===c||E.$$typeof===b||E.$$typeof===x||E.$$typeof===w||E.$$typeof===g)},Kn.typeOf=C,Kn}var ule;function _Le(){return ule||(ule=1,zB.exports=ALe()),zB.exports}var jB,cle;function TLe(){if(cle)return jB;cle=1;var e=_Le(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=i;function a(m){return e.isMemo(m)?i:s[m.$$typeof]||t}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;function h(m,g,b){if(typeof g!="string"){if(d){var x=f(g);x&&x!==d&&h(m,x,b)}var w=l(g);u&&(w=w.concat(u(g)));for(var C=a(m),S=a(g),E=0;E<w.length;++E){var A=w[E];if(!n[A]&&!(b&&b[A])&&!(S&&S[A])&&!(C&&C[A])){var k=c(g,A);try{o(m,A,k)}catch{}}}}return m}return jB=h,jB}TLe();var NLe=!0;function o2e(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var Pq=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||NLe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},Bq=function(t,n,r){Pq(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function DLe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ILe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},OLe=/[A-Z]|^ms/g,RLe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l2e=function(t){return t.charCodeAt(1)===45},fle=function(t){return t!=null&&typeof t!="boolean"},UB=s2e(function(e){return l2e(e)?e:e.replace(OLe,"-$&").toLowerCase()}),dle=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(RLe,function(r,i,s){return mf={name:i,styles:s,next:mf},i})}return ILe[t]!==1&&!l2e(t)&&typeof n=="number"&&n!==0?n+"px":n};function oE(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return mf={name:i.name,styles:i.styles,next:mf},i.name;var s=n;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)mf={name:a.name,styles:a.styles,next:mf},a=a.next;var o=s.styles+";";return o}return FLe(e,t,n)}case"function":{if(e!==void 0){var l=mf,u=n(e);return mf=l,oE(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function FLe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=oE(e,t,n[i])+";";else for(var s in n){var a=n[s];if(typeof a!="object"){var o=a;t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":fle(o)&&(r+=UB(s)+":"+dle(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var l=0;l<a.length;l++)fle(a[l])&&(r+=UB(s)+":"+dle(s,a[l])+";");else{var u=oE(e,t,a);switch(s){case"animation":case"animationName":{r+=UB(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var hle=/label:\s*([^\s;{]+)\s*(;|$)/g,mf;function Rk(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";mf=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,i+=oE(n,t,s);else{var a=s;i+=a[0]}for(var o=1;o<e.length;o++)if(i+=oE(n,t,e[o]),r){var l=s;i+=l[o]}hle.lastIndex=0;for(var u="",c;(c=hle.exec(i))!==null;)u+="-"+c[1];var f=DLe(i)+u;return{name:f,styles:i,next:mf}}var MLe=function(t){return t()},u2e=vV.useInsertionEffect?vV.useInsertionEffect:!1,c2e=u2e||MLe,ple=u2e||U.useLayoutEffect,f2e=U.createContext(typeof HTMLElement<"u"?kLe({key:"css"}):null);f2e.Provider;var zq=function(t){return U.forwardRef(function(n,r){var i=U.useContext(f2e);return t(n,i,r)})},A6=U.createContext({}),jq={}.hasOwnProperty,EV="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",LLe=function(t,n){var r={};for(var i in n)jq.call(n,i)&&(r[i]=n[i]);return r[EV]=t,r},PLe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return Pq(n,r,i),c2e(function(){return Bq(n,r,i)}),null},BLe=zq(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[EV],s=[r],a="";typeof e.className=="string"?a=o2e(t.registered,s,e.className):e.className!=null&&(a=e.className+" ");var o=Rk(s,void 0,U.useContext(A6));a+=t.key+"-"+o.name;var l={};for(var u in e)jq.call(e,u)&&u!=="css"&&u!==EV&&(l[u]=e[u]);return l.className=a,n&&(l.ref=n),U.createElement(U.Fragment,null,U.createElement(PLe,{cache:t,serialized:o,isStringTag:typeof i=="string"}),U.createElement(i,l))}),zLe=BLe,mle=function(t,n){var r=arguments;if(n==null||!jq.call(n,"css"))return U.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=zLe,s[1]=LLe(t,n);for(var a=2;a<i;a++)s[a]=r[a];return U.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(mle||(mle={}));var jLe=zq(function(e,t){var n=e.styles,r=Rk([n],void 0,U.useContext(A6)),i=U.useRef();return ple(function(){var s=t.key+"-global",a=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),i.current=[a,o],function(){a.flush()}},[t]),ple(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(r.next!==void 0&&Bq(t,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",r,a,!1)},[t,r.name]),null});function Uq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Rk(t)}function Fk(){var e=Uq.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var ULe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,VLe=s2e(function(e){return ULe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),WLe=VLe,HLe=function(t){return t!=="theme"},gle=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?WLe:HLe},yle=function(t,n,r){var i;if(n){var s=n.shouldForwardProp;i=t.__emotion_forwardProp&&s?function(a){return t.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},GLe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return Pq(n,r,i),c2e(function(){return Bq(n,r,i)}),null},qLe=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,s,a;n!==void 0&&(s=n.label,a=n.target);var o=yle(t,n,r),l=o||gle(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{var d=c[0];f.push(d[0]);for(var h=c.length,m=1;m<h;m++)f.push(c[m],d[m])}var g=zq(function(b,x,w){var C=u&&b.as||i,S="",E=[],A=b;if(b.theme==null){A={};for(var k in b)A[k]=b[k];A.theme=U.useContext(A6)}typeof b.className=="string"?S=o2e(x.registered,E,b.className):b.className!=null&&(S=b.className+" ");var N=Rk(f.concat(E),x.registered,A);S+=x.key+"-"+N.name,a!==void 0&&(S+=" "+a);var I=u&&o===void 0?gle(C):l,T={};for(var D in b)u&&D==="as"||I(D)&&(T[D]=b[D]);return T.className=S,w&&(T.ref=w),U.createElement(U.Fragment,null,U.createElement(GLe,{cache:x,serialized:N,isStringTag:typeof C=="string"}),U.createElement(C,T))});return g.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=i,g.__emotion_styles=f,g.__emotion_forwardProp=o,Object.defineProperty(g,"toString",{value:function(){return"."+a}}),g.withComponent=function(b,x){var w=e(b,kO({},n,x,{shouldForwardProp:yle(g,x,!0)}));return w.apply(void 0,f)},g}},XLe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],kV=qLe.bind(null);XLe.forEach(function(e){kV[e]=kV(e)});function YLe(e){return e==null||Object.keys(e).length===0}function KLe(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?i=>t(YLe(i)?n:i):t;return W.jsx(jLe,{styles:r})}function d2e(e,t){return kV(e,t)}function ZLe(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const ble=[];function xle(e){return ble[0]=e,Rk(ble)}var VB={exports:{}},br={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vle;function QLe(){if(vle)return br;vle=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.for("react.view_transition"),h=Symbol.for("react.client.reference");function m(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case n:case i:case r:case l:case u:case d:return g;default:switch(g=g&&g.$$typeof,g){case a:case o:case f:case c:return g;case s:return g;default:return b}}case t:return b}}}return br.ContextConsumer=s,br.ContextProvider=a,br.Element=e,br.ForwardRef=o,br.Fragment=n,br.Lazy=f,br.Memo=c,br.Portal=t,br.Profiler=i,br.StrictMode=r,br.Suspense=l,br.SuspenseList=u,br.isContextConsumer=function(g){return m(g)===s},br.isContextProvider=function(g){return m(g)===a},br.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},br.isForwardRef=function(g){return m(g)===o},br.isFragment=function(g){return m(g)===n},br.isLazy=function(g){return m(g)===f},br.isMemo=function(g){return m(g)===c},br.isPortal=function(g){return m(g)===t},br.isProfiler=function(g){return m(g)===i},br.isStrictMode=function(g){return m(g)===r},br.isSuspense=function(g){return m(g)===l},br.isSuspenseList=function(g){return m(g)===u},br.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===n||g===i||g===r||g===l||g===u||typeof g=="object"&&g!==null&&(g.$$typeof===f||g.$$typeof===c||g.$$typeof===a||g.$$typeof===s||g.$$typeof===o||g.$$typeof===h||g.getModuleId!==void 0)},br.typeOf=m,br}var wle;function JLe(){return wle||(wle=1,VB.exports=QLe()),VB.exports}var h2e=JLe();function vf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function p2e(e){if(U.isValidElement(e)||h2e.isValidElementType(e)||!vf(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=p2e(e[n])}),t}function Ms(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return vf(e)&&vf(t)&&Object.keys(t).forEach(i=>{U.isValidElement(t[i])||h2e.isValidElementType(t[i])?r[i]=t[i]:vf(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&vf(e[i])?r[i]=Ms(e[i],t[i],n):n.clone?r[i]=vf(t[i])?p2e(t[i]):t[i]:r[i]=t[i]}),r}const ePe=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function tPe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,s=ePe(t),a=Object.keys(s);function o(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-r/100}${n})`}function u(d,h){const m=a.indexOf(h);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n}) and (max-width:${(m!==-1&&typeof t[a[m]]=="number"?t[a[m]]:h)-r/100}${n})`}function c(d){return a.indexOf(d)+1<a.length?u(d,a[a.indexOf(d)+1]):o(d)}function f(d){const h=a.indexOf(d);return h===0?o(a[1]):h===a.length-1?l(a[h]):u(d,a[a.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:u,only:c,not:f,unit:n,...i}}function nPe(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,i)=>{var a,o;const s=/min-width:\s*([0-9.]+)/;return+(((a=r.match(s))==null?void 0:a[1])||0)-+(((o=i.match(s))==null?void 0:o[1])||0)});return n.length?n.reduce((r,i)=>{const s=t[i];return delete r[i],r[i]=s,r},{...t}):t}function rPe(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function iPe(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(s)}function sPe(e){const t=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function n(s,a){s.up=(...o)=>t(e.breakpoints.up(...o),a),s.down=(...o)=>t(e.breakpoints.down(...o),a),s.between=(...o)=>t(e.breakpoints.between(...o),a),s.only=(...o)=>t(e.breakpoints.only(...o),a),s.not=(...o)=>{const l=t(e.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(n(r,s),r);return n(i),{...e,containerQueries:i}}const aPe={borderRadius:4};function C$(e,t){return t?Ms(e,t,{clone:!1}):e}const _6={xs:0,sm:600,md:900,lg:1200,xl:1536},Sle={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${_6[e]}px)`},oPe={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:_6[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function wc(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const s=r.breakpoints||Sle;return t.reduce((a,o,l)=>(a[s.up(s.keys[l])]=n(t[l]),a),{})}if(typeof t=="object"){const s=r.breakpoints||Sle;return Object.keys(t).reduce((a,o)=>{if(rPe(s.keys,o)){const l=iPe(r.containerQueries?r:oPe,o);l&&(a[l]=n(t[o],o))}else if(Object.keys(s.values||_6).includes(o)){const l=s.up(o);a[l]=n(t[o],o)}else{const l=o;a[l]=t[l]}return a},{})}return n(t)}function m2e(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,i)=>{const s=e.up(i);return r[s]={},r},{}))||{}}function g2e(e,t){return e.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},t)}function lPe(e,...t){const n=m2e(e),r=[n,...t].reduce((i,s)=>Ms(i,s),{});return g2e(Object.keys(n),r)}function uPe(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((i,s)=>{s<e.length&&(n[i]=!0)}):r.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function WB({values:e,breakpoints:t,base:n}){const r=n||uPe(e,t),i=Object.keys(r);if(i.length===0)return e;let s;return i.reduce((a,o,l)=>(Array.isArray(e)?(a[o]=e[l]!=null?e[l]:e[s],s=l):typeof e=="object"?(a[o]=e[o]!=null?e[o]:e[s],s=o):a[o]=e,a),{})}function ut(e){if(typeof e!="string")throw new Error(zh(7));return e.charAt(0).toUpperCase()+e.slice(1)}function v0(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,e);if(r!=null)return r}return t.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function _O(e,t,n,r=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||r:i=v0(e,n)||r,t&&(i=t(i,r,e)),i}function Oi(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=a=>{if(a[t]==null)return null;const o=a[t],l=a.theme,u=v0(l,r)||{};return wc(a,o,f=>{let d=_O(u,i,f);return f===d&&typeof f=="string"&&(d=_O(u,i,`${t}${f==="default"?"":ut(f)}`,f)),n===!1?d:{[n]:d}})};return s.propTypes={},s.filterProps=[t],s}function cPe(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const fPe={m:"margin",p:"padding"},dPe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Cle={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},hPe=cPe(e=>{if(e.length>2)if(Cle[e])e=Cle[e];else return[e];const[t,n]=e.split(""),r=fPe[t],i=dPe[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),Vq=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Wq=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Vq,...Wq];function Mk(e,t,n,r){const i=v0(e,t,!0)??n;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=i[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof i=="function"?i:()=>{}}function T6(e){return Mk(e,"spacing",8)}function iy(e,t){return typeof t=="string"||t==null?t:e(t)}function pPe(e,t){return n=>e.reduce((r,i)=>(r[i]=iy(t,n),r),{})}function mPe(e,t,n,r){if(!t.includes(n))return null;const i=hPe(n),s=pPe(i,r),a=e[n];return wc(e,a,s)}function y2e(e,t){const n=T6(e.theme);return Object.keys(e).map(r=>mPe(e,t,r,n)).reduce(C$,{})}function li(e){return y2e(e,Vq)}li.propTypes={};li.filterProps=Vq;function ui(e){return y2e(e,Wq)}ui.propTypes={};ui.filterProps=Wq;function b2e(e=8,t=T6({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const a=t(s);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function N6(...e){const t=e.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>t[s]?C$(i,t[s](r)):i,{});return n.propTypes={},n.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),n}function hu(e){return typeof e!="number"?e:`${e}px solid`}function Lu(e,t){return Oi({prop:e,themeKey:"borders",transform:t})}const gPe=Lu("border",hu),yPe=Lu("borderTop",hu),bPe=Lu("borderRight",hu),xPe=Lu("borderBottom",hu),vPe=Lu("borderLeft",hu),wPe=Lu("borderColor"),SPe=Lu("borderTopColor"),CPe=Lu("borderRightColor"),$Pe=Lu("borderBottomColor"),EPe=Lu("borderLeftColor"),kPe=Lu("outline",hu),APe=Lu("outlineColor"),D6=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Mk(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:iy(t,r)});return wc(e,e.borderRadius,n)}return null};D6.propTypes={};D6.filterProps=["borderRadius"];N6(gPe,yPe,bPe,xPe,vPe,wPe,SPe,CPe,$Pe,EPe,D6,kPe,APe);const I6=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Mk(e.theme,"spacing",8),n=r=>({gap:iy(t,r)});return wc(e,e.gap,n)}return null};I6.propTypes={};I6.filterProps=["gap"];const O6=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Mk(e.theme,"spacing",8),n=r=>({columnGap:iy(t,r)});return wc(e,e.columnGap,n)}return null};O6.propTypes={};O6.filterProps=["columnGap"];const R6=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Mk(e.theme,"spacing",8),n=r=>({rowGap:iy(t,r)});return wc(e,e.rowGap,n)}return null};R6.propTypes={};R6.filterProps=["rowGap"];const _Pe=Oi({prop:"gridColumn"}),TPe=Oi({prop:"gridRow"}),NPe=Oi({prop:"gridAutoFlow"}),DPe=Oi({prop:"gridAutoColumns"}),IPe=Oi({prop:"gridAutoRows"}),OPe=Oi({prop:"gridTemplateColumns"}),RPe=Oi({prop:"gridTemplateRows"}),FPe=Oi({prop:"gridTemplateAreas"}),MPe=Oi({prop:"gridArea"});N6(I6,O6,R6,_Pe,TPe,NPe,DPe,IPe,OPe,RPe,FPe,MPe);function tx(e,t){return t==="grey"?t:e}const LPe=Oi({prop:"color",themeKey:"palette",transform:tx}),PPe=Oi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:tx}),BPe=Oi({prop:"backgroundColor",themeKey:"palette",transform:tx});N6(LPe,PPe,BPe);function El(e){return e<=1&&e!==0?`${e*100}%`:e}const zPe=Oi({prop:"width",transform:El}),Hq=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i,s,a,o,l;const r=((a=(s=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:a[n])||_6[n];return r?((l=(o=e.theme)==null?void 0:o.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:El(n)}};return wc(e,e.maxWidth,t)}return null};Hq.filterProps=["maxWidth"];const jPe=Oi({prop:"minWidth",transform:El}),UPe=Oi({prop:"height",transform:El}),VPe=Oi({prop:"maxHeight",transform:El}),WPe=Oi({prop:"minHeight",transform:El});Oi({prop:"size",cssProperty:"width",transform:El});Oi({prop:"size",cssProperty:"height",transform:El});const HPe=Oi({prop:"boxSizing"});N6(zPe,Hq,jPe,UPe,VPe,WPe,HPe);const Lk={border:{themeKey:"borders",transform:hu},borderTop:{themeKey:"borders",transform:hu},borderRight:{themeKey:"borders",transform:hu},borderBottom:{themeKey:"borders",transform:hu},borderLeft:{themeKey:"borders",transform:hu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:hu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:D6},color:{themeKey:"palette",transform:tx},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:tx},backgroundColor:{themeKey:"palette",transform:tx},p:{style:ui},pt:{style:ui},pr:{style:ui},pb:{style:ui},pl:{style:ui},px:{style:ui},py:{style:ui},padding:{style:ui},paddingTop:{style:ui},paddingRight:{style:ui},paddingBottom:{style:ui},paddingLeft:{style:ui},paddingX:{style:ui},paddingY:{style:ui},paddingInline:{style:ui},paddingInlineStart:{style:ui},paddingInlineEnd:{style:ui},paddingBlock:{style:ui},paddingBlockStart:{style:ui},paddingBlockEnd:{style:ui},m:{style:li},mt:{style:li},mr:{style:li},mb:{style:li},ml:{style:li},mx:{style:li},my:{style:li},margin:{style:li},marginTop:{style:li},marginRight:{style:li},marginBottom:{style:li},marginLeft:{style:li},marginX:{style:li},marginY:{style:li},marginInline:{style:li},marginInlineStart:{style:li},marginInlineEnd:{style:li},marginBlock:{style:li},marginBlockStart:{style:li},marginBlockEnd:{style:li},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:I6},rowGap:{style:R6},columnGap:{style:O6},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:El},maxWidth:{style:Hq},minWidth:{transform:El},height:{transform:El},maxHeight:{transform:El},minHeight:{transform:El},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function GPe(...e){const t=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function qPe(e,t){return typeof e=="function"?e(t):e}function XPe(){function e(n,r,i,s){const a={[n]:r,theme:i},o=s[n];if(!o)return{[n]:r};const{cssProperty:l=n,themeKey:u,transform:c,style:f}=o;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const d=v0(i,u)||{};return f?f(a):wc(a,r,m=>{let g=_O(d,c,m);return m===g&&typeof m=="string"&&(g=_O(d,c,`${n}${m==="default"?"":ut(m)}`,m)),l===!1?g:{[l]:g}})}function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const s=i.unstable_sxConfig??Lk;function a(o){let l=o;if(typeof o=="function")l=o(i);else if(typeof o!="object")return o;if(!l)return null;const u=m2e(i.breakpoints),c=Object.keys(u);let f=u;return Object.keys(l).forEach(d=>{const h=qPe(l[d],i);if(h!=null)if(typeof h=="object")if(s[d])f=C$(f,e(d,h,i,s));else{const m=wc({theme:i},h,g=>({[d]:g}));GPe(m,h)?f[d]=t({sx:h,theme:i}):f=C$(f,m)}else f=C$(f,e(d,h,i,s))}),nPe(i,g2e(c,f))}return Array.isArray(r)?r.map(a):a(r)}return t}const sy=XPe();sy.filterProps=["sx"];function YPe(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(e);return i==="&"?t:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:t})}return n.palette.mode===e?t:{}}function Fv(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:s={},...a}=e,o=tPe(n),l=b2e(i);let u=Ms({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...aPe,...s}},a);return u=sPe(u),u.applyStyles=YPe,u=t.reduce((c,f)=>Ms(c,f),u),u.unstable_sxConfig={...Lk,...a==null?void 0:a.unstable_sxConfig},u.unstable_sx=function(f){return sy({sx:f,theme:this})},u}function KPe(e){return Object.keys(e).length===0}function ZPe(e=null){const t=U.useContext(A6);return!t||KPe(t)?e:t}const QPe=Fv();function Pk(e=QPe){return ZPe(e)}function JPe({styles:e,themeId:t,defaultTheme:n={}}){const r=Pk(n),i=typeof e=="function"?e(t&&r[t]||r):e;return W.jsx(KLe,{styles:i})}const eBe=e=>{var r;const t={systemProps:{},otherProps:{}},n=((r=e==null?void 0:e.theme)==null?void 0:r.unstable_sxConfig)??Lk;return Object.keys(e).forEach(i=>{n[i]?t.systemProps[i]=e[i]:t.otherProps[i]=e[i]}),t};function F6(e){const{sx:t,...n}=e,{systemProps:r,otherProps:i}=eBe(n);let s;return Array.isArray(t)?s=[r,...t]:typeof t=="function"?s=(...a)=>{const o=t(...a);return vf(o)?{...r,...o}:r}:s={...r,...t},{...i,sx:s}}const $le=e=>e,tBe=()=>{let e=$le;return{configure(t){e=t},generate(t){return e(t)},reset(){e=$le}}},x2e=tBe();function v2e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=v2e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function St(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=v2e(e))&&(r&&(r+=" "),r+=t);return r}function nBe(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,s=d2e("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(sy);return U.forwardRef(function(l,u){const c=Pk(n),{className:f,component:d="div",...h}=F6(l);return W.jsx(s,{as:d,ref:u,className:St(f,i?i(r):r),theme:t&&c[t]||c,...h})})}const rBe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function bn(e,t,n="Mui"){const r=rBe[t];return r?`${n}-${r}`:`${x2e.generate(e)}-${t}`}function pn(e,t,n="Mui"){const r={};return t.forEach(i=>{r[i]=bn(e,i,n)}),r}function w2e(e){const{variants:t,...n}=e,r={variants:t,style:xle(n),isProcessed:!0};return r.style===n||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=xle(i.style))}),r}const iBe=Fv();function HB(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function sBe(e){return e?(t,n)=>n[e]:null}function aBe(e,t,n){e.theme=lBe(e.theme)?n:e.theme[t]||e.theme}function EI(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>EI(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...s}=n;r=s}return S2e(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function S2e(e,t,n=[]){var i;let r;e:for(let s=0;s<t.length;s+=1){const a=t[s];if(typeof a.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!a.props(r))continue}else for(const o in a.props)if(e[o]!==a.props[o]&&((i=e.ownerState)==null?void 0:i[o])!==a.props[o])continue e;typeof a.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(a.style(r))):n.push(a.style)}return n}function C2e(e={}){const{themeId:t,defaultTheme:n=iBe,rootShouldForwardProp:r=HB,slotShouldForwardProp:i=HB}=e;function s(o){aBe(o,t,n)}return(o,l={})=>{ZLe(o,E=>E.filter(A=>A!==sy));const{name:u,slot:c,skipVariantsResolver:f,skipSx:d,overridesResolver:h=sBe(cBe(c)),...m}=l,g=f!==void 0?f:c&&c!=="Root"&&c!=="root"||!1,b=d||!1;let x=HB;c==="Root"||c==="root"?x=r:c?x=i:uBe(o)&&(x=void 0);const w=d2e(o,{shouldForwardProp:x,label:oBe(),...m}),C=E=>{if(typeof E=="function"&&E.__emotion_real!==E)return function(k){return EI(k,E)};if(vf(E)){const A=w2e(E);return A.variants?function(N){return EI(N,A)}:A.style}return E},S=(...E)=>{const A=[],k=E.map(C),N=[];if(A.push(s),u&&h&&N.push(function(L){var R,j;const M=(j=(R=L.theme.components)==null?void 0:R[u])==null?void 0:j.styleOverrides;if(!M)return null;const F={};for(const H in M)F[H]=EI(L,M[H]);return h(L,F)}),u&&!g&&N.push(function(L){var F,R;const P=L.theme,M=(R=(F=P==null?void 0:P.components)==null?void 0:F[u])==null?void 0:R.variants;return M?S2e(L,M):null}),b||N.push(sy),Array.isArray(k[0])){const D=k.shift(),L=new Array(A.length).fill(""),P=new Array(N.length).fill("");let M;M=[...L,...D,...P],M.raw=[...L,...D.raw,...P],A.unshift(M)}const I=[...A,...k,...N],T=w(...I);return o.muiName&&(T.muiName=o.muiName),T};return w.withConfig&&(S.withConfig=w.withConfig),S}}function oBe(e,t){return void 0}function lBe(e){for(const t in e)return!1;return!0}function uBe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function cBe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const Gq=C2e();function lE(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")n[i]={...e[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const s=e[i],a=t[i];if(!a)n[i]=s||{};else if(!s)n[i]=a;else{n[i]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;n[i][l]=lE(s[l],a[l])}}}else n[i]===void 0&&(n[i]=e[i])}return n}function fBe(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:lE(t.components[n].defaultProps,r)}function qq({props:e,name:t,defaultTheme:n,themeId:r}){let i=Pk(n);return r&&(i=i[r]||i),fBe({theme:i,name:t,props:e})}const jh=typeof window<"u"?U.useLayoutEffect:U.useEffect;function j2(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Xq(e,t=0,n=1){return j2(e,t,n)}function dBe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function X0(e){if(e.type)return e;if(e.charAt(0)==="#")return X0(dBe(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(zh(9,e));let r=e.substring(t+1,e.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(zh(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const hBe=e=>{const t=X0(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},L3=(e,t)=>{try{return hBe(e)}catch{return e}};function M6(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function $2e(e){e=X0(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),a=(u,c=(u+n/30)%12)=>i-s*Math.max(Math.min(c-3,9-c,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(o+="a",l.push(t[3])),M6({type:o,values:l})}function AV(e){e=X0(e);let t=e.type==="hsl"||e.type==="hsla"?X0($2e(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function pBe(e,t){const n=AV(e),r=AV(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Bi(e,t){return e=X0(e),t=Xq(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,M6(e)}function g4(e,t,n){try{return Bi(e,t)}catch{return e}}function vx(e,t){if(e=X0(e),t=Xq(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return M6(e)}function Cr(e,t,n){try{return vx(e,t)}catch{return e}}function wx(e,t){if(e=X0(e),t=Xq(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return M6(e)}function $r(e,t,n){try{return wx(e,t)}catch{return e}}function _V(e,t=.15){return AV(e)>.5?vx(e,t):wx(e,t)}function y4(e,t,n){try{return _V(e,t)}catch{return e}}function Ele(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function E2e(e,t=166){let n;function r(...i){const s=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(s,t)}return r.clear=()=>{clearTimeout(n)},r}function kI(e,t){var n,r,i;return U.isValidElement(e)&&t.indexOf(e.type.muiName??((i=(r=(n=e.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function fo(e){return e&&e.ownerDocument||document}function Uh(e){return fo(e).defaultView||window}function kle(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let Ale=0;function mBe(e){const[t,n]=U.useState(e),r=e||t;return U.useEffect(()=>{t==null&&(Ale+=1,n(`mui-${Ale}`))},[t]),r}const gBe={...vV},_le=gBe.useId;function Yq(e){if(_le!==void 0){const t=_le();return e??t}return mBe(e)}function TO({controlled:e,default:t,name:n,state:r="value"}){const{current:i}=U.useRef(e!==void 0),[s,a]=U.useState(t),o=i?e:s,l=U.useCallback(u=>{i||a(u)},[]);return[o,l]}function Nf(e){const t=U.useRef(e);return jh(()=>{t.current=e}),U.useRef((...n)=>(0,t.current)(...n)).current}function Va(...e){const t=U.useRef(void 0),n=U.useCallback(r=>{const i=e.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(r);return typeof o=="function"?o:()=>{a(null)}}return s.current=r,()=>{s.current=null}});return()=>{i.forEach(s=>s==null?void 0:s())}},e);return U.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}const Tle={};function k2e(e,t){const n=U.useRef(Tle);return n.current===Tle&&(n.current=e(t)),n}const yBe=[];function bBe(e){U.useEffect(e,yBe)}class Kq{constructor(){jt(this,"currentId",null);jt(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});jt(this,"disposeEffect",()=>this.clear)}static create(){return new Kq}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function A2e(){const e=k2e(Kq.create).current;return bBe(e.disposeEffect),e}function Sx(e){try{return e.matches(":focus-visible")}catch{}return!1}function _2e(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const xBe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function xn(e,t,n=void 0){const r={};for(const i in e){const s=e[i];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+t(u),o=!1,n&&n[u]&&(a+=" "+n[u]))}r[i]=a}return r}function vBe(e){return typeof e=="string"}function T2e(e,t,n){return e===void 0||vBe(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function $$(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function Nle(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function N2e(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=e;if(!t){const h=St(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),m={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},g={...n,...i,...r};return h.length>0&&(g.className=h),Object.keys(m).length>0&&(g.style=m),{props:g,internalRef:void 0}}const a=$$({...i,...r}),o=Nle(r),l=Nle(i),u=t(a),c=St(u==null?void 0:u.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),f={...u==null?void 0:u.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},d={...u,...n,...l,...o};return c.length>0&&(d.className=c),Object.keys(f).length>0&&(d.style=f),{props:d,internalRef:u.ref}}function D2e(e,t,n){return typeof e=="function"?e(t,n):e}function ff(e){var f;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...s}=e,a=i?{}:D2e(n,r),{props:o,internalRef:l}=N2e({...s,externalSlotProps:a}),u=Va(l,a==null?void 0:a.ref,(f=e.additionalProps)==null?void 0:f.ref);return T2e(t,{...o,ref:u},r)}function Bk(e){var t;return parseInt(U.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const wBe=U.createContext(),I2e=()=>U.useContext(wBe)??!1,SBe=U.createContext(void 0);function CBe(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?lE(i.defaultProps,r):!i.styleOverrides&&!i.variants?lE(i,r):r}function $Be({props:e,name:t}){const n=U.useContext(SBe);return CBe({props:e,name:t,theme:{components:n}})}const Dle={theme:void 0};function EBe(e){let t,n;return function(i){let s=t;return(s===void 0||i.theme!==n)&&(Dle.theme=i.theme,s=w2e(e(Dle)),t=s,n=i.theme),s}}function kBe(e=""){function t(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${e?`${e}-`:""}${r}${t(...i)})`}const Ile=(e,t,n,r=[])=>{let i=e;t.forEach((s,a)=>{a===t.length-1?Array.isArray(i)?i[Number(s)]=n:i&&typeof i=="object"&&(i[s]=n):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},ABe=(e,t,n)=>{function r(i,s=[],a=[]){Object.entries(i).forEach(([o,l])=>{(!n||n&&!n([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,o],Array.isArray(l)?[...a,o]:a):t([...s,o],l,a))})}r(e)},_Be=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function GB(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},s={},a={};return ABe(e,(o,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(o,l))){const c=`--${n?`${n}-`:""}${o.join("-")}`,f=_Be(o,l);Object.assign(i,{[c]:f}),Ile(s,o,`var(${c})`,u),Ile(a,o,`var(${c}, ${f})`,u)}},o=>o[0]==="vars"),{css:i,vars:s,varsWithDefaults:a}}function TBe(e,t={}){const{getSelector:n=b,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...l}=e,{vars:u,css:c,varsWithDefaults:f}=GB(l,t);let d=f;const h={},{[o]:m,...g}=s;if(Object.entries(g||{}).forEach(([C,S])=>{const{vars:E,css:A,varsWithDefaults:k}=GB(S,t);d=Ms(d,k),h[C]={css:A,vars:E}}),m){const{css:C,vars:S,varsWithDefaults:E}=GB(m,t);d=Ms(d,E),h[o]={css:C,vars:S}}function b(C,S){var A,k;let E=i;if(i==="class"&&(E=".%s"),i==="data"&&(E="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(E=`[${i}="%s"]`),C){if(E==="media")return e.defaultColorScheme===C?":root":{[`@media (prefers-color-scheme: ${((k=(A=s[C])==null?void 0:A.palette)==null?void 0:k.mode)||C})`]:{":root":S}};if(E)return e.defaultColorScheme===C?`:root, ${E.replace("%s",String(C))}`:E.replace("%s",String(C))}return":root"}return{vars:d,generateThemeVars:()=>{let C={...u};return Object.entries(h).forEach(([,{vars:S}])=>{C=Ms(C,S)}),C},generateStyleSheets:()=>{var N,I;const C=[],S=e.defaultColorScheme||"light";function E(T,D){Object.keys(D).length&&C.push(typeof T=="string"?{[T]:{...D}}:T)}E(n(void 0,{...c}),c);const{[S]:A,...k}=h;if(A){const{css:T}=A,D=(I=(N=s[S])==null?void 0:N.palette)==null?void 0:I.mode,L=!r&&D?{colorScheme:D,...T}:{...T};E(n(S,{...L}),L)}return Object.entries(k).forEach(([T,{css:D}])=>{var M,F;const L=(F=(M=s[T])==null?void 0:M.palette)==null?void 0:F.mode,P=!r&&L?{colorScheme:L,...D}:{...D};E(n(T,{...P}),P)}),C}}}function NBe(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const DBe=Fv(),IBe=Gq("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${ut(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),OBe=e=>qq({props:e,name:"MuiContainer",defaultTheme:DBe}),RBe=(e,t)=>{const n=l=>bn(t,l),{classes:r,fixed:i,disableGutters:s,maxWidth:a}=e,o={root:["root",a&&`maxWidth${ut(String(a))}`,i&&"fixed",s&&"disableGutters"]};return xn(o,n,r)};function FBe(e={}){const{createStyledComponent:t=IBe,useThemeProps:n=OBe,componentName:r="MuiContainer"}=e,i=t(({theme:a,ownerState:o})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!o.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}}),({theme:a,ownerState:o})=>o.fixed&&Object.keys(a.breakpoints.values).reduce((l,u)=>{const c=u,f=a.breakpoints.values[c];return f!==0&&(l[a.breakpoints.up(c)]={maxWidth:`${f}${a.breakpoints.unit}`}),l},{}),({theme:a,ownerState:o})=>({...o.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},...o.maxWidth&&o.maxWidth!=="xs"&&{[a.breakpoints.up(o.maxWidth)]:{maxWidth:`${a.breakpoints.values[o.maxWidth]}${a.breakpoints.unit}`}}}));return U.forwardRef(function(o,l){const u=n(o),{className:c,component:f="div",disableGutters:d=!1,fixed:h=!1,maxWidth:m="lg",classes:g,...b}=u,x={...u,component:f,disableGutters:d,fixed:h,maxWidth:m},w=RBe(x,r);return W.jsx(i,{as:f,ownerState:x,className:St(w.root,c),ref:l,...b})})}const MBe=(e,t)=>e.filter(n=>t.includes(n)),Mv=(e,t,n)=>{const r=e.keys[0];Array.isArray(t)?t.forEach((i,s)=>{n((a,o)=>{s<=e.keys.length-1&&(s===0?Object.assign(a,o):a[e.up(e.keys[s])]=o)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:MBe(e.keys,Object.keys(t))).forEach(s=>{if(e.keys.includes(s)){const a=t[s];a!==void 0&&n((o,l)=>{r===s?Object.assign(o,l):o[e.up(s)]=l},a)}}):(typeof t=="number"||typeof t=="string")&&n((i,s)=>{Object.assign(i,s)},t)};function NO(e){return`--Grid-${e}Spacing`}function L6(e){return`--Grid-parent-${e}Spacing`}const Ole="--Grid-columns",nx="--Grid-parent-columns",LBe=({theme:e,ownerState:t})=>{const n={};return Mv(e.breakpoints,t.size,(r,i)=>{let s={};i==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${nx}) - (var(${nx}) - ${i}) * (var(${L6("column")}) / var(${nx})))`}),r(n,s)}),n},PBe=({theme:e,ownerState:t})=>{const n={};return Mv(e.breakpoints,t.offset,(r,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${nx}) + var(${L6("column")}) * ${i} / var(${nx}))`}),r(n,s)}),n},BBe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[Ole]:12};return Mv(e.breakpoints,t.columns,(r,i)=>{const s=i??12;r(n,{[Ole]:s,"> *":{[nx]:s}})}),n},zBe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return Mv(e.breakpoints,t.rowSpacing,(r,i)=>{var a;const s=typeof i=="string"?i:(a=e.spacing)==null?void 0:a.call(e,i);r(n,{[NO("row")]:s,"> *":{[L6("row")]:s}})}),n},jBe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return Mv(e.breakpoints,t.columnSpacing,(r,i)=>{var a;const s=typeof i=="string"?i:(a=e.spacing)==null?void 0:a.call(e,i);r(n,{[NO("column")]:s,"> *":{[L6("column")]:s}})}),n},UBe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return Mv(e.breakpoints,t.direction,(r,i)=>{r(n,{flexDirection:i})}),n},VBe=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${NO("row")}) var(${NO("column")})`}}),WBe=e=>{const t=[];return Object.entries(e).forEach(([n,r])=>{r!==!1&&r!==void 0&&t.push(`grid-${n}-${String(r)}`)}),t},HBe=(e,t="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const r=[];return Object.entries(e).forEach(([i,s])=>{n(s)&&r.push(`spacing-${i}-${String(s)}`)}),r}return[]},GBe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function qBe(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const XBe=Fv(),YBe=Gq("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function KBe(e){return qq({props:e,name:"MuiGrid",defaultTheme:XBe})}function ZBe(e={}){const{createStyledComponent:t=YBe,useThemeProps:n=KBe,useTheme:r=Pk,componentName:i="MuiGrid"}=e,s=(u,c)=>{const{container:f,direction:d,spacing:h,wrap:m,size:g}=u,b={root:["root",f&&"container",m!=="wrap"&&`wrap-xs-${String(m)}`,...GBe(d),...WBe(g),...f?HBe(h,c.breakpoints.keys[0]):[]]};return xn(b,x=>bn(i,x),{})};function a(u,c,f=()=>!0){const d={};return u===null||(Array.isArray(u)?u.forEach((h,m)=>{h!==null&&f(h)&&c.keys[m]&&(d[c.keys[m]]=h)}):typeof u=="object"?Object.keys(u).forEach(h=>{const m=u[h];m!=null&&f(m)&&(d[h]=m)}):d[c.keys[0]]=u),d}const o=t(BBe,jBe,zBe,LBe,UBe,VBe,PBe),l=U.forwardRef(function(c,f){const d=r(),h=n(c),m=F6(h);qBe(m,d.breakpoints);const{className:g,children:b,columns:x=12,container:w=!1,component:C="div",direction:S="row",wrap:E="wrap",size:A={},offset:k={},spacing:N=0,rowSpacing:I=N,columnSpacing:T=N,unstable_level:D=0,...L}=m,P=a(A,d.breakpoints,Y=>Y!==!1),M=a(k,d.breakpoints),F=c.columns??(D?void 0:x),R=c.spacing??(D?void 0:N),j=c.rowSpacing??c.spacing??(D?void 0:I),H=c.columnSpacing??c.spacing??(D?void 0:T),G={...m,level:D,columns:F,container:w,direction:S,wrap:E,spacing:R,rowSpacing:j,columnSpacing:H,size:P,offset:M},z=s(G,d);return W.jsx(o,{ref:f,as:C,ownerState:G,className:St(z.root,g),...L,children:U.Children.map(b,Y=>{var Z;return U.isValidElement(Y)&&kI(Y,["Grid"])&&w&&Y.props.container?U.cloneElement(Y,{unstable_level:((Z=Y.props)==null?void 0:Z.unstable_level)??D+1}):Y})})});return l.muiName="Grid",l}const QBe=Fv(),JBe=Gq("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function eze(e){return qq({props:e,name:"MuiStack",defaultTheme:QBe})}function tze(e,t){const n=U.Children.toArray(e).filter(Boolean);return n.reduce((r,i,s)=>(r.push(i),s<n.length-1&&r.push(U.cloneElement(t,{key:`separator-${s}`})),r),[])}const nze=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],rze=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...wc({theme:t},WB({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r}))};if(e.spacing){const r=T6(t),i=Object.keys(t.breakpoints.values).reduce((l,u)=>((typeof e.spacing=="object"&&e.spacing[u]!=null||typeof e.direction=="object"&&e.direction[u]!=null)&&(l[u]=!0),l),{}),s=WB({values:e.direction,base:i}),a=WB({values:e.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,u,c)=>{if(!s[l]){const d=u>0?s[c[u-1]]:"column";s[l]=d}}),n=Ms(n,wc({theme:t},a,(l,u)=>e.useFlexGap?{gap:iy(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${nze(u?s[u]:e.direction)}`]:iy(r,l)}}))}return n=lPe(t.breakpoints,n),n};function ize(e={}){const{createStyledComponent:t=JBe,useThemeProps:n=eze,componentName:r="MuiStack"}=e,i=()=>xn({root:["root"]},l=>bn(r,l),{}),s=t(rze);return U.forwardRef(function(l,u){const c=n(l),f=F6(c),{component:d="div",direction:h="column",spacing:m=0,divider:g,children:b,className:x,useFlexGap:w=!1,...C}=f,S={direction:h,spacing:m,useFlexGap:w},E=i();return W.jsx(s,{as:d,ownerState:S,ref:u,className:St(E.root,x),...C,children:g?tze(b,g):b})})}function O2e(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:iE.white,default:iE.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const sze=O2e();function R2e(){return{text:{primary:iE.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:iE.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Rle=R2e();function Fle(e,t,n,r){const i=r.light||r,s=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=wx(e.main,i):t==="dark"&&(e.dark=vx(e.main,s)))}function aze(e="light"){return e==="dark"?{main:p2[200],light:p2[50],dark:p2[400]}:{main:p2[700],light:p2[400],dark:p2[800]}}function oze(e="light"){return e==="dark"?{main:h2[200],light:h2[50],dark:h2[400]}:{main:h2[500],light:h2[300],dark:h2[700]}}function lze(e="light"){return e==="dark"?{main:d2[500],light:d2[300],dark:d2[700]}:{main:d2[700],light:d2[400],dark:d2[800]}}function uze(e="light"){return e==="dark"?{main:m2[400],light:m2[300],dark:m2[700]}:{main:m2[700],light:m2[500],dark:m2[900]}}function cze(e="light"){return e==="dark"?{main:g2[400],light:g2[300],dark:g2[700]}:{main:g2[800],light:g2[500],dark:g2[900]}}function fze(e="light"){return e==="dark"?{main:YC[400],light:YC[300],dark:YC[700]}:{main:"#ed6c02",light:YC[500],dark:YC[900]}}function Zq(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,s=e.primary||aze(t),a=e.secondary||oze(t),o=e.error||lze(t),l=e.info||uze(t),u=e.success||cze(t),c=e.warning||fze(t);function f(g){return pBe(g,Rle.text.primary)>=n?Rle.text.primary:sze.text.primary}const d=({color:g,name:b,mainShade:x=500,lightShade:w=300,darkShade:C=700})=>{if(g={...g},!g.main&&g[x]&&(g.main=g[x]),!g.hasOwnProperty("main"))throw new Error(zh(11,b?` (${b})`:"",x));if(typeof g.main!="string")throw new Error(zh(12,b?` (${b})`:"",JSON.stringify(g.main)));return Fle(g,"light",w,r),Fle(g,"dark",C,r),g.contrastText||(g.contrastText=f(g.main)),g};let h;return t==="light"?h=O2e():t==="dark"&&(h=R2e()),Ms({common:{...iE},mode:t,primary:d({color:s,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:o,name:"error"}),warning:d({color:c,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:u,name:"success"}),grey:Z7e,contrastThreshold:n,getContrastText:f,augmentColor:d,tonalOffset:r,...h},i)}function dze(e){const t={};return Object.entries(e).forEach(r=>{const[i,s]=r;typeof s=="object"&&(t[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),t}function hze(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function pze(e){return Math.round(e*1e5)/1e5}const Mle={textTransform:"uppercase"},Lle='"Roboto", "Helvetica", "Arial", sans-serif';function mze(e,t){const{fontFamily:n=Lle,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...f}=typeof t=="function"?t(e):t,d=r/14,h=c||(b=>`${b/l*d}rem`),m=(b,x,w,C,S)=>({fontFamily:n,fontWeight:b,fontSize:h(x),lineHeight:w,...n===Lle?{letterSpacing:`${pze(C/x)}em`}:{},...S,...u}),g={h1:m(i,96,1.167,-1.5),h2:m(i,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,Mle),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,Mle),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ms({htmlFontSize:l,pxToRem:h,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...g},f,{clone:!1})}const gze=.2,yze=.14,bze=.12;function Gr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${gze})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${yze})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${bze})`].join(",")}const xze=["none",Gr(0,2,1,-1,0,1,1,0,0,1,3,0),Gr(0,3,1,-2,0,2,2,0,0,1,5,0),Gr(0,3,3,-2,0,3,4,0,0,1,8,0),Gr(0,2,4,-1,0,4,5,0,0,1,10,0),Gr(0,3,5,-1,0,5,8,0,0,1,14,0),Gr(0,3,5,-1,0,6,10,0,0,1,18,0),Gr(0,4,5,-2,0,7,10,1,0,2,16,1),Gr(0,5,5,-3,0,8,10,1,0,3,14,2),Gr(0,5,6,-3,0,9,12,1,0,3,16,2),Gr(0,6,6,-3,0,10,14,1,0,4,18,3),Gr(0,6,7,-4,0,11,15,1,0,4,20,3),Gr(0,7,8,-4,0,12,17,2,0,5,22,4),Gr(0,7,8,-4,0,13,19,2,0,5,24,4),Gr(0,7,9,-4,0,14,21,2,0,5,26,4),Gr(0,8,9,-5,0,15,22,2,0,6,28,5),Gr(0,8,10,-5,0,16,24,2,0,6,30,5),Gr(0,8,11,-5,0,17,26,2,0,6,32,5),Gr(0,9,11,-5,0,18,28,2,0,7,34,6),Gr(0,9,12,-6,0,19,29,2,0,7,36,6),Gr(0,10,13,-6,0,20,31,3,0,8,38,7),Gr(0,10,13,-6,0,21,33,3,0,8,40,7),Gr(0,10,14,-6,0,22,35,3,0,8,42,7),Gr(0,11,14,-7,0,23,36,3,0,9,44,8),Gr(0,11,15,-7,0,24,38,3,0,9,46,8)],vze={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},wze={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ple(e){return`${Math.round(e)}ms`}function Sze(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Cze(e){const t={...vze,...e.easing},n={...wze,...e.duration};return{getAutoHeightDuration:Sze,create:(i=["all"],s={})=>{const{duration:a=n.standard,easing:o=t.easeInOut,delay:l=0,...u}=s;return(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof a=="string"?a:Ple(a)} ${o} ${typeof l=="string"?l:Ple(l)}`).join(",")},...e,easing:t,duration:n}}const $ze={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Eze(e){return vf(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function F2e(e={}){const t={...e};function n(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[a,o]=i[s];!Eze(o)||a.startsWith("unstable_")?delete r[a]:vf(o)&&(r[a]={...o},n(r[a]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function TV(e={},...t){const{breakpoints:n,mixins:r={},spacing:i,palette:s={},transitions:a={},typography:o={},shape:l,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(zh(20));const c=Zq(s),f=Fv(e);let d=Ms(f,{mixins:hze(f.breakpoints,r),palette:c,shadows:xze.slice(),typography:mze(c,o),transitions:Cze(a),zIndex:{...$ze}});return d=Ms(d,u),d=t.reduce((h,m)=>Ms(h,m),d),d.unstable_sxConfig={...Lk,...u==null?void 0:u.unstable_sxConfig},d.unstable_sx=function(m){return sy({sx:m,theme:this})},d.toRuntimeSource=F2e,d}function NV(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const kze=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=NV(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function M2e(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function L2e(e){return e==="dark"?kze:[]}function Aze(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,s=Zq(t);return{palette:s,opacity:{...M2e(s.mode),...n},overlays:r||L2e(s.mode),...i}}function _ze(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Tze=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Nze=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const a={};return Tze(e.cssVarPrefix).forEach(o=>{a[o]=n[o],delete n[o]}),s==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:s?{[s.replace("%s",t)]:a,[`${r}, ${s.replace("%s",t)}`]:n}:{[r]:{...n,...a}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(t))}`}else if(t){if(s==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(s)return s.replace("%s",String(t))}return r};function Dze(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function ke(e,t,n){!e[t]&&n&&(e[t]=n)}function P3(e){return typeof e!="string"||!e.startsWith("hsl")?e:$2e(e)}function Xd(e,t){`${t}Channel`in e||(e[`${t}Channel`]=L3(P3(e[t])))}function Ize(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const tf=e=>{try{return e()}catch{}},Oze=(e="mui")=>kBe(e);function qB(e,t,n,r){if(!t)return;t=t===!0?{}:t;const i=r==="dark"?"dark":"light";if(!n){e[r]=Aze({...t,palette:{mode:i,...t==null?void 0:t.palette}});return}const{palette:s,...a}=TV({...n,palette:{mode:i,...t==null?void 0:t.palette}});return e[r]={...t,palette:s,opacity:{...M2e(i),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||L2e(i)},a}function Rze(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=_ze,colorSchemeSelector:o=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...u}=e,c=Object.keys(n)[0],f=r||(n.light&&c!=="light"?"light":c),d=Oze(s),{[f]:h,light:m,dark:g,...b}=n,x={...b};let w=h;if((f==="dark"&&!("dark"in n)||f==="light"&&!("light"in n))&&(w=!0),!w)throw new Error(zh(21,f));const C=qB(x,w,u,f);m&&!x.light&&qB(x,m,void 0,"light"),g&&!x.dark&&qB(x,g,void 0,"dark");let S={defaultColorScheme:f,...C,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:l,getCssVar:d,colorSchemes:x,font:{...dze(C.typography),...C.font},spacing:Ize(u.spacing)};Object.keys(S.colorSchemes).forEach(I=>{const T=S.colorSchemes[I].palette,D=L=>{const P=L.split("-"),M=P[1],F=P[2];return d(L,T[M][F])};if(T.mode==="light"&&(ke(T.common,"background","#fff"),ke(T.common,"onBackground","#000")),T.mode==="dark"&&(ke(T.common,"background","#000"),ke(T.common,"onBackground","#fff")),Dze(T,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),T.mode==="light"){ke(T.Alert,"errorColor",Cr(T.error.light,.6)),ke(T.Alert,"infoColor",Cr(T.info.light,.6)),ke(T.Alert,"successColor",Cr(T.success.light,.6)),ke(T.Alert,"warningColor",Cr(T.warning.light,.6)),ke(T.Alert,"errorFilledBg",D("palette-error-main")),ke(T.Alert,"infoFilledBg",D("palette-info-main")),ke(T.Alert,"successFilledBg",D("palette-success-main")),ke(T.Alert,"warningFilledBg",D("palette-warning-main")),ke(T.Alert,"errorFilledColor",tf(()=>T.getContrastText(T.error.main))),ke(T.Alert,"infoFilledColor",tf(()=>T.getContrastText(T.info.main))),ke(T.Alert,"successFilledColor",tf(()=>T.getContrastText(T.success.main))),ke(T.Alert,"warningFilledColor",tf(()=>T.getContrastText(T.warning.main))),ke(T.Alert,"errorStandardBg",$r(T.error.light,.9)),ke(T.Alert,"infoStandardBg",$r(T.info.light,.9)),ke(T.Alert,"successStandardBg",$r(T.success.light,.9)),ke(T.Alert,"warningStandardBg",$r(T.warning.light,.9)),ke(T.Alert,"errorIconColor",D("palette-error-main")),ke(T.Alert,"infoIconColor",D("palette-info-main")),ke(T.Alert,"successIconColor",D("palette-success-main")),ke(T.Alert,"warningIconColor",D("palette-warning-main")),ke(T.AppBar,"defaultBg",D("palette-grey-100")),ke(T.Avatar,"defaultBg",D("palette-grey-400")),ke(T.Button,"inheritContainedBg",D("palette-grey-300")),ke(T.Button,"inheritContainedHoverBg",D("palette-grey-A100")),ke(T.Chip,"defaultBorder",D("palette-grey-400")),ke(T.Chip,"defaultAvatarColor",D("palette-grey-700")),ke(T.Chip,"defaultIconColor",D("palette-grey-700")),ke(T.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ke(T.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ke(T.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ke(T.LinearProgress,"primaryBg",$r(T.primary.main,.62)),ke(T.LinearProgress,"secondaryBg",$r(T.secondary.main,.62)),ke(T.LinearProgress,"errorBg",$r(T.error.main,.62)),ke(T.LinearProgress,"infoBg",$r(T.info.main,.62)),ke(T.LinearProgress,"successBg",$r(T.success.main,.62)),ke(T.LinearProgress,"warningBg",$r(T.warning.main,.62)),ke(T.Skeleton,"bg",`rgba(${D("palette-text-primaryChannel")} / 0.11)`),ke(T.Slider,"primaryTrack",$r(T.primary.main,.62)),ke(T.Slider,"secondaryTrack",$r(T.secondary.main,.62)),ke(T.Slider,"errorTrack",$r(T.error.main,.62)),ke(T.Slider,"infoTrack",$r(T.info.main,.62)),ke(T.Slider,"successTrack",$r(T.success.main,.62)),ke(T.Slider,"warningTrack",$r(T.warning.main,.62));const L=y4(T.background.default,.8);ke(T.SnackbarContent,"bg",L),ke(T.SnackbarContent,"color",tf(()=>T.getContrastText(L))),ke(T.SpeedDialAction,"fabHoverBg",y4(T.background.paper,.15)),ke(T.StepConnector,"border",D("palette-grey-400")),ke(T.StepContent,"border",D("palette-grey-400")),ke(T.Switch,"defaultColor",D("palette-common-white")),ke(T.Switch,"defaultDisabledColor",D("palette-grey-100")),ke(T.Switch,"primaryDisabledColor",$r(T.primary.main,.62)),ke(T.Switch,"secondaryDisabledColor",$r(T.secondary.main,.62)),ke(T.Switch,"errorDisabledColor",$r(T.error.main,.62)),ke(T.Switch,"infoDisabledColor",$r(T.info.main,.62)),ke(T.Switch,"successDisabledColor",$r(T.success.main,.62)),ke(T.Switch,"warningDisabledColor",$r(T.warning.main,.62)),ke(T.TableCell,"border",$r(g4(T.divider,1),.88)),ke(T.Tooltip,"bg",g4(T.grey[700],.92))}if(T.mode==="dark"){ke(T.Alert,"errorColor",$r(T.error.light,.6)),ke(T.Alert,"infoColor",$r(T.info.light,.6)),ke(T.Alert,"successColor",$r(T.success.light,.6)),ke(T.Alert,"warningColor",$r(T.warning.light,.6)),ke(T.Alert,"errorFilledBg",D("palette-error-dark")),ke(T.Alert,"infoFilledBg",D("palette-info-dark")),ke(T.Alert,"successFilledBg",D("palette-success-dark")),ke(T.Alert,"warningFilledBg",D("palette-warning-dark")),ke(T.Alert,"errorFilledColor",tf(()=>T.getContrastText(T.error.dark))),ke(T.Alert,"infoFilledColor",tf(()=>T.getContrastText(T.info.dark))),ke(T.Alert,"successFilledColor",tf(()=>T.getContrastText(T.success.dark))),ke(T.Alert,"warningFilledColor",tf(()=>T.getContrastText(T.warning.dark))),ke(T.Alert,"errorStandardBg",Cr(T.error.light,.9)),ke(T.Alert,"infoStandardBg",Cr(T.info.light,.9)),ke(T.Alert,"successStandardBg",Cr(T.success.light,.9)),ke(T.Alert,"warningStandardBg",Cr(T.warning.light,.9)),ke(T.Alert,"errorIconColor",D("palette-error-main")),ke(T.Alert,"infoIconColor",D("palette-info-main")),ke(T.Alert,"successIconColor",D("palette-success-main")),ke(T.Alert,"warningIconColor",D("palette-warning-main")),ke(T.AppBar,"defaultBg",D("palette-grey-900")),ke(T.AppBar,"darkBg",D("palette-background-paper")),ke(T.AppBar,"darkColor",D("palette-text-primary")),ke(T.Avatar,"defaultBg",D("palette-grey-600")),ke(T.Button,"inheritContainedBg",D("palette-grey-800")),ke(T.Button,"inheritContainedHoverBg",D("palette-grey-700")),ke(T.Chip,"defaultBorder",D("palette-grey-700")),ke(T.Chip,"defaultAvatarColor",D("palette-grey-300")),ke(T.Chip,"defaultIconColor",D("palette-grey-300")),ke(T.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ke(T.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ke(T.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ke(T.LinearProgress,"primaryBg",Cr(T.primary.main,.5)),ke(T.LinearProgress,"secondaryBg",Cr(T.secondary.main,.5)),ke(T.LinearProgress,"errorBg",Cr(T.error.main,.5)),ke(T.LinearProgress,"infoBg",Cr(T.info.main,.5)),ke(T.LinearProgress,"successBg",Cr(T.success.main,.5)),ke(T.LinearProgress,"warningBg",Cr(T.warning.main,.5)),ke(T.Skeleton,"bg",`rgba(${D("palette-text-primaryChannel")} / 0.13)`),ke(T.Slider,"primaryTrack",Cr(T.primary.main,.5)),ke(T.Slider,"secondaryTrack",Cr(T.secondary.main,.5)),ke(T.Slider,"errorTrack",Cr(T.error.main,.5)),ke(T.Slider,"infoTrack",Cr(T.info.main,.5)),ke(T.Slider,"successTrack",Cr(T.success.main,.5)),ke(T.Slider,"warningTrack",Cr(T.warning.main,.5));const L=y4(T.background.default,.98);ke(T.SnackbarContent,"bg",L),ke(T.SnackbarContent,"color",tf(()=>T.getContrastText(L))),ke(T.SpeedDialAction,"fabHoverBg",y4(T.background.paper,.15)),ke(T.StepConnector,"border",D("palette-grey-600")),ke(T.StepContent,"border",D("palette-grey-600")),ke(T.Switch,"defaultColor",D("palette-grey-300")),ke(T.Switch,"defaultDisabledColor",D("palette-grey-600")),ke(T.Switch,"primaryDisabledColor",Cr(T.primary.main,.55)),ke(T.Switch,"secondaryDisabledColor",Cr(T.secondary.main,.55)),ke(T.Switch,"errorDisabledColor",Cr(T.error.main,.55)),ke(T.Switch,"infoDisabledColor",Cr(T.info.main,.55)),ke(T.Switch,"successDisabledColor",Cr(T.success.main,.55)),ke(T.Switch,"warningDisabledColor",Cr(T.warning.main,.55)),ke(T.TableCell,"border",Cr(g4(T.divider,1),.68)),ke(T.Tooltip,"bg",g4(T.grey[700],.92))}Xd(T.background,"default"),Xd(T.background,"paper"),Xd(T.common,"background"),Xd(T.common,"onBackground"),Xd(T,"divider"),Object.keys(T).forEach(L=>{const P=T[L];L!=="tonalOffset"&&P&&typeof P=="object"&&(P.main&&ke(T[L],"mainChannel",L3(P3(P.main))),P.light&&ke(T[L],"lightChannel",L3(P3(P.light))),P.dark&&ke(T[L],"darkChannel",L3(P3(P.dark))),P.contrastText&&ke(T[L],"contrastTextChannel",L3(P3(P.contrastText))),L==="text"&&(Xd(T[L],"primary"),Xd(T[L],"secondary")),L==="action"&&(P.active&&Xd(T[L],"active"),P.selected&&Xd(T[L],"selected")))})}),S=t.reduce((I,T)=>Ms(I,T),S);const E={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:Nze(S)},{vars:A,generateThemeVars:k,generateStyleSheets:N}=TBe(S,E);return S.vars=A,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([I,T])=>{S[I]=T}),S.generateThemeVars=k,S.generateStyleSheets=N,S.generateSpacing=function(){return b2e(u.spacing,T6(this))},S.getColorSchemeSelector=NBe(o),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=a,S.unstable_sxConfig={...Lk,...u==null?void 0:u.unstable_sxConfig},S.unstable_sx=function(T){return sy({sx:T,theme:this})},S.toRuntimeSource=F2e,S}function Ble(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:Zq({...n===!0?{}:n.palette,mode:t})})}function P2e(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...a}=e,o=s||"light",l=i==null?void 0:i[o],u={...i,...n?{[o]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return TV(e,...t);let c=n;"palette"in e||u[o]&&(u[o]!==!0?c=u[o].palette:o==="dark"&&(c={mode:"dark"}));const f=TV({...e,palette:c},...t);return f.defaultColorScheme=o,f.colorSchemes=u,f.palette.mode==="light"&&(f.colorSchemes.light={...u.light!==!0&&u.light,palette:f.palette},Ble(f,"dark",u.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:f.palette},Ble(f,"light",u.light)),f}return!n&&!("light"in u)&&o==="light"&&(u.light=!0),Rze({...a,colorSchemes:u,defaultColorScheme:o,...typeof r!="boolean"&&r},...t)}const Qq=P2e();function zk(){const e=Pk(Qq);return e[C6]||e}function P6(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Wl=e=>P6(e)&&e!=="classes",Ze=C2e({themeId:C6,defaultTheme:Qq,rootShouldForwardProp:Wl});function Fze(e){return W.jsx(JPe,{...e,defaultTheme:Qq,themeId:C6})}function Mze(e){return function(n){return W.jsx(Fze,{styles:typeof e=="function"?r=>e({theme:r,...n}):e})}}function Lze(){return F6}const fn=EBe;function kn(e){return $Be(e)}function Pze(e){return bn("MuiSvgIcon",e)}pn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Bze=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${ut(t)}`,`fontSize${ut(n)}`]};return xn(i,Pze,r)},zze=Ze("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${ut(n.color)}`],t[`fontSize${ut(n.fontSize)}`]]}})(fn(({theme:e})=>{var t,n,r,i,s,a,o,l,u,c,f,d,h,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(t=e.transitions)==null?void 0:t.create)==null?void 0:i.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=e.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(o=e.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((c=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,g])=>g&&g.main).map(([g])=>{var b,x;return{props:{color:g},style:{color:(x=(b=(e.vars??e).palette)==null?void 0:b[g])==null?void 0:x.main}}}),{props:{color:"action"},style:{color:(d=(f=(e.vars??e).palette)==null?void 0:f.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(m=(h=(e.vars??e).palette)==null?void 0:h.action)==null?void 0:m.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),DV=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:f,viewBox:d="0 0 24 24",...h}=r,m=U.isValidElement(i)&&i.type==="svg",g={...r,color:a,component:o,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:c,viewBox:d,hasSvgAsChild:m},b={};c||(b.viewBox=d);const x=Bze(g);return W.jsxs(zze,{as:o,className:St(x.root,s),focusable:"false",color:u,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n,...b,...h,...m&&i.props,ownerState:g,children:[m?i.props.children:i,f?W.jsx("title",{children:f}):null]})});DV.muiName="SvgIcon";function cd(e,t){function n(r,i){return W.jsx(DV,{"data-testid":void 0,ref:i,...r,children:e})}return n.muiName=DV.muiName,U.memo(U.forwardRef(n))}function jze(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function Uze(e,t){if(!e)return t;function n(a,o){const l={};return Object.keys(o).forEach(u=>{jze(u,o[u])&&typeof a[u]=="function"&&(l[u]=(...c)=>{a[u](...c),o[u](...c)})}),l}if(typeof e=="function"||typeof t=="function")return a=>{const o=typeof t=="function"?t(a):t,l=typeof e=="function"?e({...a,...o}):e,u=St(a==null?void 0:a.className,o==null?void 0:o.className,l==null?void 0:l.className),c=n(l,o);return{...o,...l,...c,...!!u&&{className:u},...(o==null?void 0:o.style)&&(l==null?void 0:l.style)&&{style:{...o.style,...l.style}},...(o==null?void 0:o.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=t,i=n(e,r),s=St(r==null?void 0:r.className,e==null?void 0:e.className);return{...t,...e,...i,...!!s&&{className:s},...(r==null?void 0:r.style)&&(e==null?void 0:e.style)&&{style:{...r.style,...e.style}},...(r==null?void 0:r.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function B2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function IV(e,t){return IV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},IV(e,t)}function z2e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,IV(e,t)}const zle={disabled:!1},DO=Ko.createContext(null);var Vze=function(t){return t.scrollTop},B3="unmounted",Kg="exited",Zg="entering",U2="entered",OV="exiting",fd=function(e){z2e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Kg,s.appearStatus=Zg):l=U2:r.unmountOnExit||r.mountOnEnter?l=B3:l=Kg,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===B3?{status:Kg}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Zg&&a!==U2&&(s=Zg):(a===Zg||a===U2)&&(s=OV)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Zg){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:p4.findDOMNode(this);a&&Vze(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kg&&this.setState({status:B3})},n.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[p4.findDOMNode(this),o],u=l[0],c=l[1],f=this.getTimeouts(),d=o?f.appear:f.enter;if(!i&&!a||zle.disabled){this.safeSetState({status:U2},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:Zg},function(){s.props.onEntering(u,c),s.onTransitionEnd(d,function(){s.safeSetState({status:U2},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:p4.findDOMNode(this);if(!s||zle.disabled){this.safeSetState({status:Kg},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:OV},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Kg},function(){i.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:p4.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===B3)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=B2e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ko.createElement(DO.Provider,{value:null},typeof a=="function"?a(i,o):Ko.cloneElement(Ko.Children.only(a),o))},t}(Ko.Component);fd.contextType=DO;fd.propTypes={};function y2(){}fd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y2,onEntering:y2,onEntered:y2,onExit:y2,onExiting:y2,onExited:y2};fd.UNMOUNTED=B3;fd.EXITED=Kg;fd.ENTERING=Zg;fd.ENTERED=U2;fd.EXITING=OV;function Wze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jq(e,t){var n=function(s){return t&&U.isValidElement(s)?t(s):s},r=Object.create(null);return e&&U.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Hze(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var a,o={};for(var l in t){if(r[l])for(a=0;a<r[l].length;a++){var u=r[l][a];o[r[l][a]]=n(u)}o[l]=n(l)}for(a=0;a<i.length;a++)o[i[a]]=n(i[a]);return o}function w1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Gze(e,t){return Jq(e.children,function(n){return U.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:w1(n,"appear",e),enter:w1(n,"enter",e),exit:w1(n,"exit",e)})})}function qze(e,t,n){var r=Jq(e.children),i=Hze(t,r);return Object.keys(i).forEach(function(s){var a=i[s];if(U.isValidElement(a)){var o=s in t,l=s in r,u=t[s],c=U.isValidElement(u)&&!u.props.in;l&&(!o||c)?i[s]=U.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:w1(a,"exit",e),enter:w1(a,"enter",e)}):!l&&o&&!c?i[s]=U.cloneElement(a,{in:!1}):l&&o&&U.isValidElement(u)&&(i[s]=U.cloneElement(a,{onExited:n.bind(null,a),in:u.props.in,exit:w1(a,"exit",e),enter:w1(a,"enter",e)}))}}),i}var Xze=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Yze={component:"div",childFactory:function(t){return t}},eX=function(e){z2e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var a=s.handleExited.bind(Wze(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?Gze(i,o):qze(i,a,o),firstRender:!1}},n.handleExited=function(i,s){var a=Jq(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(o){var l=kO({},o.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,a=i.childFactory,o=B2e(i,["component","childFactory"]),l=this.state.contextValue,u=Xze(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?Ko.createElement(DO.Provider,{value:l},u):Ko.createElement(DO.Provider,{value:l},Ko.createElement(s,o,u))},t}(Ko.Component);eX.propTypes={};eX.defaultProps=Yze;const j2e=e=>e.scrollTop;function IO(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:i.transitionDelay}}function Kze(e){return bn("MuiPaper",e)}pn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Zze=e=>{const{square:t,elevation:n,variant:r,classes:i}=e,s={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return xn(s,Kze,i)},Qze=Ze("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(fn(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Hl=U.forwardRef(function(t,n){var h;const r=kn({props:t,name:"MuiPaper"}),i=zk(),{className:s,component:a="div",elevation:o=1,square:l=!1,variant:u="elevation",...c}=r,f={...r,component:a,elevation:o,square:l,variant:u},d=Zze(f);return W.jsx(Qze,{as:a,ownerState:f,className:St(d.root,s),ref:n,...c,style:{...u==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[o],...i.vars&&{"--Paper-overlay":(h=i.vars.overlays)==null?void 0:h[o]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Bi("#fff",NV(o))}, ${Bi("#fff",NV(o))})`}},...c.style}})});function Ei(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=t,{component:u,slots:c={[e]:void 0},slotProps:f={[e]:void 0},...d}=s,h=c[e]||r,m=D2e(f[e],i),{props:{component:g,...b},internalRef:x}=N2e({className:n,...l,externalForwardedProps:e==="root"?d:void 0,externalSlotProps:m}),w=Va(x,m==null?void 0:m.ref,t.ref),C=e==="root"?g||u:g,S=T2e(h,{...e==="root"&&!u&&!c[e]&&a,...e!=="root"&&!c[e]&&a,...b,...C&&!o&&{as:C},...C&&o&&{component:C},ref:w},i);return[h,S]}class OO{constructor(){jt(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new OO}static use(){const t=k2e(OO.create).current,[n,r]=U.useState(!1);return t.shouldMount=n,t.setShouldMount=r,U.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=eje(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function Jze(){return OO.use()}function eje(){let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n}function tje(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:u}=e,[c,f]=U.useState(!1),d=St(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:a,height:a,top:-(a/2)+s,left:-(a/2)+i},m=St(n.child,c&&n.childLeaving,r&&n.childPulsate);return!o&&!c&&f(!0),U.useEffect(()=>{if(!o&&l!=null){const g=setTimeout(l,u);return()=>{clearTimeout(g)}}},[l,o,u]),W.jsx("span",{className:d,style:h,children:W.jsx("span",{className:m})})}const du=pn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),RV=550,nje=80,rje=Fk`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,ije=Fk`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,sje=Fk`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,aje=Ze("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),oje=Ze(tje,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${du.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${rje};
    animation-duration: ${RV}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${du.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${du.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${du.childLeaving} {
    opacity: 0;
    animation-name: ${ije};
    animation-duration: ${RV}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${du.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${sje};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,lje=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:a,...o}=r,[l,u]=U.useState([]),c=U.useRef(0),f=U.useRef(null);U.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const d=U.useRef(!1),h=A2e(),m=U.useRef(null),g=U.useRef(null),b=U.useCallback(S=>{const{pulsate:E,rippleX:A,rippleY:k,rippleSize:N,cb:I}=S;u(T=>[...T,W.jsx(oje,{classes:{ripple:St(s.ripple,du.ripple),rippleVisible:St(s.rippleVisible,du.rippleVisible),ripplePulsate:St(s.ripplePulsate,du.ripplePulsate),child:St(s.child,du.child),childLeaving:St(s.childLeaving,du.childLeaving),childPulsate:St(s.childPulsate,du.childPulsate)},timeout:RV,pulsate:E,rippleX:A,rippleY:k,rippleSize:N},c.current)]),c.current+=1,f.current=I},[s]),x=U.useCallback((S={},E={},A=()=>{})=>{const{pulsate:k=!1,center:N=i||E.pulsate,fakeElement:I=!1}=E;if((S==null?void 0:S.type)==="mousedown"&&d.current){d.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(d.current=!0);const T=I?null:g.current,D=T?T.getBoundingClientRect():{width:0,height:0,left:0,top:0};let L,P,M;if(N||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)L=Math.round(D.width/2),P=Math.round(D.height/2);else{const{clientX:F,clientY:R}=S.touches&&S.touches.length>0?S.touches[0]:S;L=Math.round(F-D.left),P=Math.round(R-D.top)}if(N)M=Math.sqrt((2*D.width**2+D.height**2)/3),M%2===0&&(M+=1);else{const F=Math.max(Math.abs((T?T.clientWidth:0)-L),L)*2+2,R=Math.max(Math.abs((T?T.clientHeight:0)-P),P)*2+2;M=Math.sqrt(F**2+R**2)}S!=null&&S.touches?m.current===null&&(m.current=()=>{b({pulsate:k,rippleX:L,rippleY:P,rippleSize:M,cb:A})},h.start(nje,()=>{m.current&&(m.current(),m.current=null)})):b({pulsate:k,rippleX:L,rippleY:P,rippleSize:M,cb:A})},[i,b,h]),w=U.useCallback(()=>{x({},{pulsate:!0})},[x]),C=U.useCallback((S,E)=>{if(h.clear(),(S==null?void 0:S.type)==="touchend"&&m.current){m.current(),m.current=null,h.start(0,()=>{C(S,E)});return}m.current=null,u(A=>A.length>0?A.slice(1):A),f.current=E},[h]);return U.useImperativeHandle(n,()=>({pulsate:w,start:x,stop:C}),[w,x,C]),W.jsx(aje,{className:St(du.root,s.root,a),ref:g,...o,children:W.jsx(eX,{component:null,exit:!0,children:l})})});function uje(e){return bn("MuiButtonBase",e)}const cje=pn("MuiButtonBase",["root","disabled","focusVisible"]),fje=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,a=xn({root:["root",t&&"disabled",n&&"focusVisible"]},uje,i);return n&&r&&(a.root+=` ${r}`),a},dje=Ze("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${cje.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),jk=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:f=!1,focusRipple:d=!1,focusVisibleClassName:h,LinkComponent:m="a",onBlur:g,onClick:b,onContextMenu:x,onDragLeave:w,onFocus:C,onFocusVisible:S,onKeyDown:E,onKeyUp:A,onMouseDown:k,onMouseLeave:N,onMouseUp:I,onTouchEnd:T,onTouchMove:D,onTouchStart:L,tabIndex:P=0,TouchRippleProps:M,touchRippleRef:F,type:R,...j}=r,H=U.useRef(null),G=Jze(),z=Va(G.ref,F),[Y,Z]=U.useState(!1);u&&Y&&Z(!1),U.useImperativeHandle(i,()=>({focusVisible:()=>{Z(!0),H.current.focus()}}),[]);const Q=G.shouldMount&&!c&&!u;U.useEffect(()=>{Y&&d&&!c&&G.pulsate()},[c,d,Y,G]);const se=Yd(G,"start",k,f),re=Yd(G,"stop",x,f),de=Yd(G,"stop",w,f),Oe=Yd(G,"stop",I,f),Le=Yd(G,"stop",it=>{Y&&it.preventDefault(),N&&N(it)},f),me=Yd(G,"start",L,f),xe=Yd(G,"stop",T,f),Ee=Yd(G,"stop",D,f),ce=Yd(G,"stop",it=>{Sx(it.target)||Z(!1),g&&g(it)},!1),Xe=Nf(it=>{H.current||(H.current=it.currentTarget),Sx(it.target)&&(Z(!0),S&&S(it)),C&&C(it)}),ze=()=>{const it=H.current;return l&&l!=="button"&&!(it.tagName==="A"&&it.href)},Je=Nf(it=>{d&&!it.repeat&&Y&&it.key===" "&&G.stop(it,()=>{G.start(it)}),it.target===it.currentTarget&&ze()&&it.key===" "&&it.preventDefault(),E&&E(it),it.target===it.currentTarget&&ze()&&it.key==="Enter"&&!u&&(it.preventDefault(),b&&b(it))}),at=Nf(it=>{d&&it.key===" "&&Y&&!it.defaultPrevented&&G.stop(it,()=>{G.pulsate(it)}),A&&A(it),b&&it.target===it.currentTarget&&ze()&&it.key===" "&&!it.defaultPrevented&&b(it)});let et=l;et==="button"&&(j.href||j.to)&&(et=m);const nt={};et==="button"?(nt.type=R===void 0?"button":R,nt.disabled=u):(!j.href&&!j.to&&(nt.role="button"),u&&(nt["aria-disabled"]=u));const Yn=Va(n,H),Yt={...r,centerRipple:s,component:l,disabled:u,disableRipple:c,disableTouchRipple:f,focusRipple:d,tabIndex:P,focusVisible:Y},sn=fje(Yt);return W.jsxs(dje,{as:et,className:St(sn.root,o),ownerState:Yt,onBlur:ce,onClick:b,onContextMenu:re,onFocus:Xe,onKeyDown:Je,onKeyUp:at,onMouseDown:se,onMouseLeave:Le,onMouseUp:Oe,onDragLeave:de,onTouchEnd:xe,onTouchMove:Ee,onTouchStart:me,ref:Yn,tabIndex:u?-1:P,type:R,...nt,...j,children:[a,Q?W.jsx(lje,{ref:z,center:s,...M}):null]})});function Yd(e,t,n,r=!1){return Nf(i=>(n&&n(i),r||e[t](i),!0))}function hje(e){return typeof e.main=="string"}function pje(e,t=[]){if(!hje(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Gl(e=[]){return([,t])=>t&&pje(t,e)}function mje(e){return bn("MuiCircularProgress",e)}pn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Yp=44,FV=Fk`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,MV=Fk`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,gje=typeof FV!="string"?Uq`
        animation: ${FV} 1.4s linear infinite;
      `:null,yje=typeof MV!="string"?Uq`
        animation: ${MV} 1.4s ease-in-out infinite;
      `:null,bje=e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,s={root:["root",n,`color${ut(r)}`],svg:["svg"],circle:["circle",`circle${ut(n)}`,i&&"circleDisableShrink"]};return xn(s,mje,t)},xje=Ze("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${ut(n.color)}`]]}})(fn(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:gje||{animation:`${FV} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Gl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),vje=Ze("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),wje=Ze("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${ut(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(fn(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:yje||{animation:`${MV} 1.4s ease-in-out infinite`}}]}))),Sje=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:a=!1,size:o=40,style:l,thickness:u=3.6,value:c=0,variant:f="indeterminate",...d}=r,h={...r,color:s,disableShrink:a,size:o,thickness:u,value:c,variant:f},m=bje(h),g={},b={},x={};if(f==="determinate"){const w=2*Math.PI*((Yp-u)/2);g.strokeDasharray=w.toFixed(3),x["aria-valuenow"]=Math.round(c),g.strokeDashoffset=`${((100-c)/100*w).toFixed(3)}px`,b.transform="rotate(-90deg)"}return W.jsx(xje,{className:St(m.root,i),style:{width:o,height:o,...b,...l},ownerState:h,ref:n,role:"progressbar",...x,...d,children:W.jsx(vje,{className:m.svg,ownerState:h,viewBox:`${Yp/2} ${Yp/2} ${Yp} ${Yp}`,children:W.jsx(wje,{className:m.circle,style:g,ownerState:h,cx:Yp,cy:Yp,r:(Yp-u)/2,fill:"none",strokeWidth:u})})})});function Cje(e){return bn("MuiTypography",e)}pn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const $je={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Eje=Lze(),kje=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:a}=e,o={root:["root",s,e.align!=="inherit"&&`align${ut(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return xn(o,Cje,a)},Aje=Ze("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${ut(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(fn(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(e.palette).filter(Gl()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${ut(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),jle={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},mt=U.forwardRef(function(t,n){const{color:r,...i}=kn({props:t,name:"MuiTypography"}),s=!$je[r],a=Eje({...i,...s&&{color:r}}),{align:o="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:f=!1,paragraph:d=!1,variant:h="body1",variantMapping:m=jle,...g}=a,b={...a,align:o,color:r,className:l,component:u,gutterBottom:c,noWrap:f,paragraph:d,variant:h,variantMapping:m},x=u||(d?"p":m[h]||jle[h])||"span",w=kje(b);return W.jsx(Aje,{as:x,ref:n,className:St(w.root,l),...g,ownerState:b,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...g.style}})});function _je(e){return bn("MuiAppBar",e)}pn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Tje=e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${ut(t)}`,`position${ut(n)}`]};return xn(i,_je,r)},Ule=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,Nje=Ze(Hl,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${ut(n.position)}`],t[`color${ut(n.color)}`]]}})(fn(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Gl(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?Ule(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?Ule(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Dje=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:a=!1,position:o="fixed",...l}=r,u={...r,color:s,position:o,enableColorOnDark:a},c=Tje(u);return W.jsx(Nje,{square:!0,component:"header",ownerState:u,elevation:4,className:St(c.root,i,o==="fixed"&&"mui-fixed"),ref:n,...l})});function Ije(e){return typeof e=="function"?e():e}const Oje=U.forwardRef(function(t,n){const{children:r,container:i,disablePortal:s=!1}=t,[a,o]=U.useState(null),l=Va(U.isValidElement(r)?Bk(r):null,n);if(jh(()=>{s||o(Ije(i)||document.body)},[i,s]),jh(()=>{if(a&&!s)return kle(n,a),()=>{kle(n,null)}},[n,a,s]),s){if(U.isValidElement(r)){const u={ref:l};return U.cloneElement(r,u)}return r}return a&&Qbe.createPortal(r,a)});function b4(e){return parseInt(e,10)||0}const Rje={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Fje(e){for(const t in e)return!1;return!0}function Vle(e){return Fje(e)||e.outerHeightStyle===0&&!e.overflowing}const Mje=U.forwardRef(function(t,n){const{onChange:r,maxRows:i,minRows:s=1,style:a,value:o,...l}=t,{current:u}=U.useRef(o!=null),c=U.useRef(null),f=Va(n,c),d=U.useRef(null),h=U.useRef(null),m=U.useCallback(()=>{const C=c.current,S=h.current;if(!C||!S)return;const A=Uh(C).getComputedStyle(C);if(A.width==="0px")return{outerHeightStyle:0,overflowing:!1};S.style.width=A.width,S.value=C.value||t.placeholder||"x",S.value.slice(-1)===`
`&&(S.value+=" ");const k=A.boxSizing,N=b4(A.paddingBottom)+b4(A.paddingTop),I=b4(A.borderBottomWidth)+b4(A.borderTopWidth),T=S.scrollHeight;S.value="x";const D=S.scrollHeight;let L=T;s&&(L=Math.max(Number(s)*D,L)),i&&(L=Math.min(Number(i)*D,L)),L=Math.max(L,D);const P=L+(k==="border-box"?N+I:0),M=Math.abs(L-T)<=1;return{outerHeightStyle:P,overflowing:M}},[i,s,t.placeholder]),g=Nf(()=>{const C=c.current,S=m();if(!C||!S||Vle(S))return!1;const E=S.outerHeightStyle;return d.current!=null&&d.current!==E}),b=U.useCallback(()=>{const C=c.current,S=m();if(!C||!S||Vle(S))return;const E=S.outerHeightStyle;d.current!==E&&(d.current=E,C.style.height=`${E}px`),C.style.overflow=S.overflowing?"hidden":""},[m]),x=U.useRef(-1);jh(()=>{const C=E2e(b),S=c==null?void 0:c.current;if(!S)return;const E=Uh(S);E.addEventListener("resize",C);let A;return typeof ResizeObserver<"u"&&(A=new ResizeObserver(()=>{g()&&(A.unobserve(S),cancelAnimationFrame(x.current),b(),x.current=requestAnimationFrame(()=>{A.observe(S)}))}),A.observe(S)),()=>{C.clear(),cancelAnimationFrame(x.current),E.removeEventListener("resize",C),A&&A.disconnect()}},[m,b,g]),jh(()=>{b()});const w=C=>{u||b(),r&&r(C)};return W.jsxs(U.Fragment,{children:[W.jsx("textarea",{value:o,onChange:w,ref:f,rows:s,style:a,...l}),W.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:h,tabIndex:-1,style:{...Rje.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function F1(e){return typeof e=="string"}function Vy({props:e,states:t,muiFormControl:n}){return t.reduce((r,i)=>(r[i]=e[i],n&&typeof e[i]>"u"&&(r[i]=n[i]),r),{})}const tX=U.createContext(void 0);function Nm(){return U.useContext(tX)}function Wle(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function RO(e,t=!1){return e&&(Wle(e.value)&&e.value!==""||t&&Wle(e.defaultValue)&&e.defaultValue!=="")}function Lje(e){return e.startAdornment}function Pje(e){return bn("MuiInputBase",e)}const Cx=pn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Hle;const B6=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${ut(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},z6=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Bje=e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:f,size:d,startAdornment:h,type:m}=e,g={root:["root",`color${ut(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",d&&d!=="medium"&&`size${ut(d)}`,c&&"multiline",h&&"adornedStart",s&&"adornedEnd",u&&"hiddenLabel",f&&"readOnly"],input:["input",r&&"disabled",m==="search"&&"inputTypeSearch",c&&"inputMultiline",d==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",h&&"inputAdornedStart",s&&"inputAdornedEnd",f&&"readOnly"]};return xn(g,Pje,t)},j6=Ze("div",{name:"MuiInputBase",slot:"Root",overridesResolver:B6})(fn(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Cx.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),U6=Ze("input",{name:"MuiInputBase",slot:"Input",overridesResolver:z6})(fn(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Cx.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Cx.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Gle=Mze({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),nX=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:a,className:o,color:l,components:u={},componentsProps:c={},defaultValue:f,disabled:d,disableInjectingGlobalStyles:h,endAdornment:m,error:g,fullWidth:b=!1,id:x,inputComponent:w="input",inputProps:C={},inputRef:S,margin:E,maxRows:A,minRows:k,multiline:N=!1,name:I,onBlur:T,onChange:D,onClick:L,onFocus:P,onKeyDown:M,onKeyUp:F,placeholder:R,readOnly:j,renderSuffix:H,rows:G,size:z,slotProps:Y={},slots:Z={},startAdornment:Q,type:se="text",value:re,...de}=r,Oe=C.value!=null?C.value:re,{current:Le}=U.useRef(Oe!=null),me=U.useRef(),xe=U.useCallback(Lt=>{},[]),Ee=Va(me,S,C.ref,xe),[ce,Xe]=U.useState(!1),ze=Nm(),Je=Vy({props:r,muiFormControl:ze,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Je.focused=ze?ze.focused:ce,U.useEffect(()=>{!ze&&d&&ce&&(Xe(!1),T&&T())},[ze,d,ce,T]);const at=ze&&ze.onFilled,et=ze&&ze.onEmpty,nt=U.useCallback(Lt=>{RO(Lt)?at&&at():et&&et()},[at,et]);jh(()=>{Le&&nt({value:Oe})},[Oe,nt,Le]);const Yn=Lt=>{P&&P(Lt),C.onFocus&&C.onFocus(Lt),ze&&ze.onFocus?ze.onFocus(Lt):Xe(!0)},Yt=Lt=>{T&&T(Lt),C.onBlur&&C.onBlur(Lt),ze&&ze.onBlur?ze.onBlur(Lt):Xe(!1)},sn=(Lt,...dr)=>{if(!Le){const vn=Lt.target||me.current;if(vn==null)throw new Error(zh(1));nt({value:vn.value})}C.onChange&&C.onChange(Lt,...dr),D&&D(Lt,...dr)};U.useEffect(()=>{nt(me.current)},[]);const it=Lt=>{me.current&&Lt.currentTarget===Lt.target&&me.current.focus(),L&&L(Lt)};let fr=w,an=C;N&&fr==="input"&&(G?an={type:void 0,minRows:G,maxRows:G,...an}:an={type:void 0,maxRows:A,minRows:k,...an},fr=Mje);const Fe=Lt=>{nt(Lt.animationName==="mui-auto-fill-cancel"?me.current:{value:"x"})};U.useEffect(()=>{ze&&ze.setAdornedStart(!!Q)},[ze,Q]);const Ue={...r,color:Je.color||"primary",disabled:Je.disabled,endAdornment:m,error:Je.error,focused:Je.focused,formControl:ze,fullWidth:b,hiddenLabel:Je.hiddenLabel,multiline:N,size:Je.size,startAdornment:Q,type:se},Ne=Bje(Ue),wt=Z.root||u.Root||j6,At=Y.root||c.root||{},pt=Z.input||u.Input||U6;return an={...an,...Y.input??c.input},W.jsxs(U.Fragment,{children:[!h&&typeof Gle=="function"&&(Hle||(Hle=W.jsx(Gle,{}))),W.jsxs(wt,{...At,ref:n,onClick:it,...de,...!F1(wt)&&{ownerState:{...Ue,...At.ownerState}},className:St(Ne.root,At.className,o,j&&"MuiInputBase-readOnly"),children:[Q,W.jsx(tX.Provider,{value:null,children:W.jsx(pt,{"aria-invalid":Je.error,"aria-describedby":i,autoComplete:s,autoFocus:a,defaultValue:f,disabled:Je.disabled,id:x,onAnimationStart:Fe,name:I,placeholder:R,readOnly:j,required:Je.required,rows:G,value:Oe,onKeyDown:M,onKeyUp:F,type:se,...an,...!F1(pt)&&{as:fr,ownerState:{...Ue,...an.ownerState}},ref:Ee,className:St(Ne.input,an.className,j&&"MuiInputBase-readOnly"),onBlur:Yt,onChange:sn,onFocus:Yn})}),m,H?H({...Je,startAdornment:Q}):null]})]})});function zje(e){return bn("MuiInput",e)}const ZC={...Cx,...pn("MuiInput",["root","underline","input"])};function jje(e){return bn("MuiOutlinedInput",e)}const nf={...Cx,...pn("MuiOutlinedInput",["root","notchedOutline","input"])};function Uje(e){return bn("MuiFilledInput",e)}const kg={...Cx,...pn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Vje=cd(W.jsx("path",{d:"M7 10l5 5 5-5z"})),Wje={entering:{opacity:1},entered:{opacity:1}},Hje=U.forwardRef(function(t,n){const r=zk(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:u,onEnter:c,onEntered:f,onEntering:d,onExit:h,onExited:m,onExiting:g,style:b,timeout:x=i,TransitionComponent:w=fd,...C}=t,S=U.useRef(null),E=Va(S,Bk(o),n),A=M=>F=>{if(M){const R=S.current;F===void 0?M(R):M(R,F)}},k=A(d),N=A((M,F)=>{j2e(M);const R=IO({style:b,timeout:x,easing:l},{mode:"enter"});M.style.webkitTransition=r.transitions.create("opacity",R),M.style.transition=r.transitions.create("opacity",R),c&&c(M,F)}),I=A(f),T=A(g),D=A(M=>{const F=IO({style:b,timeout:x,easing:l},{mode:"exit"});M.style.webkitTransition=r.transitions.create("opacity",F),M.style.transition=r.transitions.create("opacity",F),h&&h(M)}),L=A(m),P=M=>{s&&s(S.current,M)};return W.jsx(w,{appear:a,in:u,nodeRef:S,onEnter:N,onEntered:I,onEntering:k,onExit:D,onExited:L,onExiting:T,addEndListener:P,timeout:x,...C,children:(M,{ownerState:F,...R})=>U.cloneElement(o,{style:{opacity:0,visibility:M==="exited"&&!u?"hidden":void 0,...Wje[M],...b,...o.props.style},ref:E,...R})})});function Gje(e){return bn("MuiBackdrop",e)}pn("MuiBackdrop",["root","invisible"]);const qje=e=>{const{classes:t,invisible:n}=e;return xn({root:["root",n&&"invisible"]},Gje,t)},Xje=Ze("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Yje=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiBackdrop"}),{children:i,className:s,component:a="div",invisible:o=!1,open:l,components:u={},componentsProps:c={},slotProps:f={},slots:d={},TransitionComponent:h,transitionDuration:m,...g}=r,b={...r,component:a,invisible:o},x=qje(b),w={transition:h,root:u.Root,...d},C={...c,...f},S={slots:w,slotProps:C},[E,A]=Ei("root",{elementType:Xje,externalForwardedProps:S,className:St(x.root,s),ownerState:b}),[k,N]=Ei("transition",{elementType:Hje,externalForwardedProps:S,ownerState:b});return W.jsx(k,{in:l,timeout:m,...g,...N,children:W.jsx(E,{"aria-hidden":!0,...A,classes:x,ref:n,children:i})})}),Kje=pn("MuiBox",["root"]),Zje=P2e(),Xt=nBe({themeId:C6,defaultTheme:Zje,defaultClassName:Kje.root,generateClassName:x2e.generate}),Qje=cd(W.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),Jje=Ze(jk)(fn(({theme:e})=>({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`,...e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}},"&:active":{boxShadow:e.shadows[0],...e.palette.mode==="light"?{backgroundColor:_V(e.palette.grey[200],.12)}:{backgroundColor:_V(e.palette.grey[600],.12)}}}))),eUe=Ze(Qje)({width:24,height:16});function tUe(e){const{slots:t={},slotProps:n={},...r}=e,i=e;return W.jsx("li",{children:W.jsx(Jje,{focusRipple:!0,...r,ownerState:i,children:W.jsx(eUe,{as:t.CollapsedIcon,ownerState:i,...n.collapsedIcon})})})}function nUe(e){return bn("MuiBreadcrumbs",e)}const rUe=pn("MuiBreadcrumbs",["root","ol","li","separator"]),iUe=e=>{const{classes:t}=e;return xn({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},nUe,t)},sUe=Ze(mt,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${rUe.li}`]:t.li},t.root]})({}),aUe=Ze("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),oUe=Ze("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function lUe(e,t,n,r){return e.reduce((i,s,a)=>(a<e.length-1?i=i.concat(s,W.jsx(oUe,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${a}`)):i.push(s),i),[])}const uUe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiBreadcrumbs"}),{children:i,className:s,component:a="nav",slots:o={},slotProps:l={},expandText:u="Show path",itemsAfterCollapse:c=1,itemsBeforeCollapse:f=1,maxItems:d=8,separator:h="/",...m}=r,[g,b]=U.useState(!1),x={...r,component:a,expanded:g,expandText:u,itemsAfterCollapse:c,itemsBeforeCollapse:f,maxItems:d,separator:h},w=iUe(x),C=ff({elementType:o.CollapsedIcon,externalSlotProps:l.collapsedIcon,ownerState:x}),S=U.useRef(null),E=k=>{const N=()=>{b(!0);const I=S.current.querySelector("a[href],button,[tabindex]");I&&I.focus()};return f+c>=k.length?k:[...k.slice(0,f),W.jsx(tUe,{"aria-label":u,slots:{CollapsedIcon:o.CollapsedIcon},slotProps:{collapsedIcon:C},onClick:N},"ellipsis"),...k.slice(k.length-c,k.length)]},A=U.Children.toArray(i).filter(k=>U.isValidElement(k)).map((k,N)=>W.jsx("li",{className:w.li,children:k},`child-${N}`));return W.jsx(sUe,{ref:n,component:a,color:"textSecondary",className:St(w.root,s),ownerState:x,...m,children:W.jsx(aUe,{className:w.ol,ref:S,ownerState:x,children:lUe(g||d&&A.length<=d?A:E(A),w.separator,h,x)})})});function cUe(e){return bn("MuiButton",e)}const Ag=pn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),fUe=U.createContext({}),dUe=U.createContext(void 0),hUe=e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:s,loading:a,loadingPosition:o,classes:l}=e,u={root:["root",a&&"loading",s,`${s}${ut(t)}`,`size${ut(i)}`,`${s}Size${ut(i)}`,`color${ut(t)}`,n&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${ut(o)}`],startIcon:["icon","startIcon",`iconSize${ut(i)}`],endIcon:["icon","endIcon",`iconSize${ut(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=xn(u,cUe,l);return{...l,...c}},U2e=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],pUe=Ze(jk,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${ut(n.color)}`],t[`size${ut(n.size)}`],t[`${n.variant}Size${ut(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(fn(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ag.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Ag.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Ag.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ag.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Gl()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.5)`:Bi(e.palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bi(e.palette[r].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bi(e.palette[r].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Bi(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Bi(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ag.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ag.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Ag.loading}`]:{color:"transparent"}}}]}})),mUe=Ze("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${ut(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...U2e]})),gUe=Ze("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${ut(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...U2e]})),yUe=Ze("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),qle=Ze("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(e,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),$s=U.forwardRef(function(t,n){const r=U.useContext(fUe),i=U.useContext(dUe),s=lE(r,t),a=kn({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:u="button",className:c,disabled:f=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:m,focusVisibleClassName:g,fullWidth:b=!1,id:x,loading:w=null,loadingIndicator:C,loadingPosition:S="center",size:E="medium",startIcon:A,type:k,variant:N="text",...I}=a,T=Yq(x),D=C??W.jsx(Sje,{"aria-labelledby":T,color:"inherit",size:16}),L={...a,color:l,component:u,disabled:f,disableElevation:d,disableFocusRipple:h,fullWidth:b,loading:w,loadingIndicator:D,loadingPosition:S,size:E,type:k,variant:N},P=hUe(L),M=(A||w&&S==="start")&&W.jsx(mUe,{className:P.startIcon,ownerState:L,children:A||W.jsx(qle,{className:P.loadingIconPlaceholder,ownerState:L})}),F=(m||w&&S==="end")&&W.jsx(gUe,{className:P.endIcon,ownerState:L,children:m||W.jsx(qle,{className:P.loadingIconPlaceholder,ownerState:L})}),R=i||"",j=typeof w=="boolean"?W.jsx("span",{className:P.loadingWrapper,style:{display:"contents"},children:w&&W.jsx(yUe,{className:P.loadingIndicator,ownerState:L,children:D})}):null;return W.jsxs(pUe,{ownerState:L,className:St(r.className,P.root,c,R),component:u,disabled:f||w,focusRipple:!h,focusVisibleClassName:St(P.focusVisible,g),ref:n,type:k,id:w?T:x,...I,classes:P,children:[M,S!=="end"&&j,o,S==="end"&&j,F]})});function bUe(e){return bn("MuiCard",e)}pn("MuiCard",["root"]);const xUe=e=>{const{classes:t}=e;return xn({root:["root"]},bUe,t)},vUe=Ze(Hl,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),LV=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiCard"}),{className:i,raised:s=!1,...a}=r,o={...r,raised:s},l=xUe(o);return W.jsx(vUe,{className:St(l.root,i),elevation:s?8:void 0,ref:n,ownerState:o,...a})});function wUe(e){return bn("MuiCardActionArea",e)}const XB=pn("MuiCardActionArea",["root","focusVisible","focusHighlight"]),SUe=e=>{const{classes:t}=e;return xn({root:["root"],focusHighlight:["focusHighlight"]},wUe,t)},CUe=Ze(jk,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})(fn(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${XB.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${XB.focusVisible} .${XB.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}}))),$Ue=Ze("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})(fn(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}))),EUe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:a,...o}=r,l=r,u=SUe(l);return W.jsxs(CUe,{className:St(u.root,s),focusVisibleClassName:St(a,u.focusVisible),ref:n,ownerState:l,...o,children:[i,W.jsx($Ue,{className:u.focusHighlight,ownerState:l})]})});function kUe(e){return bn("MuiCardContent",e)}pn("MuiCardContent",["root"]);const AUe=e=>{const{classes:t}=e;return xn({root:["root"]},kUe,t)},_Ue=Ze("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),PV=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiCardContent"}),{className:i,component:s="div",...a}=r,o={...r,component:s},l=AUe(o);return W.jsx(_Ue,{as:s,className:St(l.root,i),ownerState:o,ref:n,...a})});function TUe(e){return bn("PrivateSwitchBase",e)}pn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const NUe=e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${ut(i)}`],input:["input"]};return xn(s,TUe,t)},DUe=Ze(jk)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),IUe=Ze("input",{shouldForwardProp:Wl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),OUe=U.forwardRef(function(t,n){const{autoFocus:r,checked:i,checkedIcon:s,defaultChecked:a,disabled:o,disableFocusRipple:l=!1,edge:u=!1,icon:c,id:f,inputProps:d,inputRef:h,name:m,onBlur:g,onChange:b,onFocus:x,readOnly:w,required:C=!1,tabIndex:S,type:E,value:A,slots:k={},slotProps:N={},...I}=t,[T,D]=TO({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),L=Nm(),P=re=>{x&&x(re),L&&L.onFocus&&L.onFocus(re)},M=re=>{g&&g(re),L&&L.onBlur&&L.onBlur(re)},F=re=>{if(re.nativeEvent.defaultPrevented)return;const de=re.target.checked;D(de),b&&b(re,de)};let R=o;L&&typeof R>"u"&&(R=L.disabled);const j=E==="checkbox"||E==="radio",H={...t,checked:T,disabled:R,disableFocusRipple:l,edge:u},G=NUe(H),z={slots:k,slotProps:{input:d,...N}},[Y,Z]=Ei("root",{ref:n,elementType:DUe,className:G.root,shouldForwardComponentProp:!0,externalForwardedProps:{...z,component:"span",...I},getSlotProps:re=>({...re,onFocus:de=>{var Oe;(Oe=re.onFocus)==null||Oe.call(re,de),P(de)},onBlur:de=>{var Oe;(Oe=re.onBlur)==null||Oe.call(re,de),M(de)}}),ownerState:H,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:R,role:void 0,tabIndex:null}}),[Q,se]=Ei("input",{ref:h,elementType:IUe,className:G.input,externalForwardedProps:z,getSlotProps:re=>({...re,onChange:de=>{var Oe;(Oe=re.onChange)==null||Oe.call(re,de),F(de)}}),ownerState:H,additionalProps:{autoFocus:r,checked:i,defaultChecked:a,disabled:R,id:j?f:void 0,name:m,readOnly:w,required:C,tabIndex:S,type:E,...E==="checkbox"&&A===void 0?{}:{value:A}}});return W.jsxs(Y,{...Z,children:[W.jsx(Q,{...se}),T?s:c]})}),Wy=FBe({createStyledComponent:Ze("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${ut(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>kn({props:e,name:"MuiContainer"})});function RUe(e){const t=fo(e);return t.body===e?Uh(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function E$(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Xle(e){return parseInt(Uh(e).getComputedStyle(e).paddingRight,10)||0}function FUe(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function Yle(e,t,n,r,i){const s=[t,n,...r];[].forEach.call(e.children,a=>{const o=!s.includes(a),l=!FUe(a);o&&l&&E$(a,i)})}function YB(e,t){let n=-1;return e.some((r,i)=>t(r)?(n=i,!0):!1),n}function MUe(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(RUe(r)){const a=_2e(Uh(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Xle(r)+a}px`;const o=fo(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${Xle(l)+a}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=fo(r).body;else{const a=r.parentElement,o=Uh(r);s=(a==null?void 0:a.nodeName)==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function LUe(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class PUe{constructor(){this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&E$(t.modalRef,!1);const i=LUe(n);Yle(n,t.mount,t.modalRef,i,!0);const s=YB(this.containers,a=>a.container===n);return s!==-1?(this.containers[s].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),r)}mount(t,n){const r=YB(this.containers,s=>s.modals.includes(t)),i=this.containers[r];i.restore||(i.restore=MUe(i,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const i=YB(this.containers,a=>a.modals.includes(t)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(t),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),t.modalRef&&E$(t.modalRef,n),Yle(s.container,t.mount,t.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&E$(a.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const BUe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function zUe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function jUe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function UUe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||jUe(e))}function VUe(e){const t=[],n=[];return Array.from(e.querySelectorAll(BUe)).forEach((r,i)=>{const s=zUe(r);s===-1||!UUe(r)||(s===0?t.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(t)}function WUe(){return!0}function HUe(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=VUe,isEnabled:a=WUe,open:o}=e,l=U.useRef(!1),u=U.useRef(null),c=U.useRef(null),f=U.useRef(null),d=U.useRef(null),h=U.useRef(!1),m=U.useRef(null),g=Va(Bk(t),m),b=U.useRef(null);U.useEffect(()=>{!o||!m.current||(h.current=!n)},[n,o]),U.useEffect(()=>{if(!o||!m.current)return;const C=fo(m.current);return m.current.contains(C.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),h.current&&m.current.focus()),()=>{i||(f.current&&f.current.focus&&(l.current=!0,f.current.focus()),f.current=null)}},[o]),U.useEffect(()=>{if(!o||!m.current)return;const C=fo(m.current),S=k=>{b.current=k,!(r||!a()||k.key!=="Tab")&&C.activeElement===m.current&&k.shiftKey&&(l.current=!0,c.current&&c.current.focus())},E=()=>{var I,T;const k=m.current;if(k===null)return;if(!C.hasFocus()||!a()||l.current){l.current=!1;return}if(k.contains(C.activeElement)||r&&C.activeElement!==u.current&&C.activeElement!==c.current)return;if(C.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!h.current)return;let N=[];if((C.activeElement===u.current||C.activeElement===c.current)&&(N=s(m.current)),N.length>0){const D=!!((I=b.current)!=null&&I.shiftKey&&((T=b.current)==null?void 0:T.key)==="Tab"),L=N[0],P=N[N.length-1];typeof L!="string"&&typeof P!="string"&&(D?P.focus():L.focus())}else k.focus()};C.addEventListener("focusin",E),C.addEventListener("keydown",S,!0);const A=setInterval(()=>{C.activeElement&&C.activeElement.tagName==="BODY"&&E()},50);return()=>{clearInterval(A),C.removeEventListener("focusin",E),C.removeEventListener("keydown",S,!0)}},[n,r,i,a,o,s]);const x=C=>{f.current===null&&(f.current=C.relatedTarget),h.current=!0,d.current=C.target;const S=t.props.onFocus;S&&S(C)},w=C=>{f.current===null&&(f.current=C.relatedTarget),h.current=!0};return W.jsxs(U.Fragment,{children:[W.jsx("div",{tabIndex:o?0:-1,onFocus:w,ref:u,"data-testid":"sentinelStart"}),U.cloneElement(t,{ref:g,onFocus:x}),W.jsx("div",{tabIndex:o?0:-1,onFocus:w,ref:c,"data-testid":"sentinelEnd"})]})}function GUe(e){return typeof e=="function"?e():e}function qUe(e){return e?e.props.hasOwnProperty("in"):!1}const Kle=()=>{},x4=new PUe;function XUe(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:a,children:o,onClose:l,open:u,rootRef:c}=e,f=U.useRef({}),d=U.useRef(null),h=U.useRef(null),m=Va(h,c),[g,b]=U.useState(!u),x=qUe(o);let w=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(w=!1);const C=()=>fo(d.current),S=()=>(f.current.modalRef=h.current,f.current.mount=d.current,f.current),E=()=>{x4.mount(S(),{disableScrollLock:r}),h.current&&(h.current.scrollTop=0)},A=Nf(()=>{const F=GUe(t)||C().body;x4.add(S(),F),h.current&&E()}),k=()=>x4.isTopModal(S()),N=Nf(F=>{d.current=F,F&&(u&&k()?E():h.current&&E$(h.current,w))}),I=U.useCallback(()=>{x4.remove(S(),w)},[w]);U.useEffect(()=>()=>{I()},[I]),U.useEffect(()=>{u?A():(!x||!i)&&I()},[u,I,x,i,A]);const T=F=>R=>{var j;(j=F.onKeyDown)==null||j.call(F,R),!(R.key!=="Escape"||R.which===229||!k())&&(n||(R.stopPropagation(),l&&l(R,"escapeKeyDown")))},D=F=>R=>{var j;(j=F.onClick)==null||j.call(F,R),R.target===R.currentTarget&&l&&l(R,"backdropClick")};return{getRootProps:(F={})=>{const R=$$(e);delete R.onTransitionEnter,delete R.onTransitionExited;const j={...R,...F};return{role:"presentation",...j,onKeyDown:T(j),ref:m}},getBackdropProps:(F={})=>{const R=F;return{"aria-hidden":!0,...R,onClick:D(R),open:u}},getTransitionProps:()=>{const F=()=>{b(!1),s&&s()},R=()=>{b(!0),a&&a(),i&&I()};return{onEnter:Ele(F,(o==null?void 0:o.props.onEnter)??Kle),onExited:Ele(R,(o==null?void 0:o.props.onExited)??Kle)}},rootRef:m,portalRef:N,isTopModal:k,exited:g,hasTransition:x}}function YUe(e){return bn("MuiModal",e)}pn("MuiModal",["root","hidden","backdrop"]);const KUe=e=>{const{open:t,exited:n,classes:r}=e;return xn({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},YUe,r)},ZUe=Ze("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(fn(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),QUe=Ze(Yje,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),JUe=U.forwardRef(function(t,n){const r=kn({name:"MuiModal",props:t}),{BackdropComponent:i=QUe,BackdropProps:s,classes:a,className:o,closeAfterTransition:l=!1,children:u,container:c,component:f,components:d={},componentsProps:h={},disableAutoFocus:m=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:b=!1,disablePortal:x=!1,disableRestoreFocus:w=!1,disableScrollLock:C=!1,hideBackdrop:S=!1,keepMounted:E=!1,onClose:A,onTransitionEnter:k,onTransitionExited:N,open:I,slotProps:T={},slots:D={},theme:L,...P}=r,M={...r,closeAfterTransition:l,disableAutoFocus:m,disableEnforceFocus:g,disableEscapeKeyDown:b,disablePortal:x,disableRestoreFocus:w,disableScrollLock:C,hideBackdrop:S,keepMounted:E},{getRootProps:F,getBackdropProps:R,getTransitionProps:j,portalRef:H,isTopModal:G,exited:z,hasTransition:Y}=XUe({...M,rootRef:n}),Z={...M,exited:z},Q=KUe(Z),se={};if(u.props.tabIndex===void 0&&(se.tabIndex="-1"),Y){const{onEnter:xe,onExited:Ee}=j();se.onEnter=xe,se.onExited=Ee}const re={slots:{root:d.Root,backdrop:d.Backdrop,...D},slotProps:{...h,...T}},[de,Oe]=Ei("root",{ref:n,elementType:ZUe,externalForwardedProps:{...re,...P,component:f},getSlotProps:F,ownerState:Z,className:St(o,Q==null?void 0:Q.root,!Z.open&&Z.exited&&(Q==null?void 0:Q.hidden))}),[Le,me]=Ei("backdrop",{ref:s==null?void 0:s.ref,elementType:i,externalForwardedProps:re,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:xe=>R({...xe,onClick:Ee=>{xe!=null&&xe.onClick&&xe.onClick(Ee)}}),className:St(s==null?void 0:s.className,Q==null?void 0:Q.backdrop),ownerState:Z});return!E&&!I&&(!Y||z)?null:W.jsx(Oje,{ref:H,container:c,disablePortal:x,children:W.jsxs(de,{...Oe,children:[!S&&i?W.jsx(Le,{...me}):null,W.jsx(HUe,{disableEnforceFocus:g,disableAutoFocus:m,disableRestoreFocus:w,isEnabled:G,open:I,children:U.cloneElement(u,se)})]})})}),Zle=pn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),eVe=e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:s,hiddenLabel:a,multiline:o}=e,l={root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${ut(s)}`,a&&"hiddenLabel",o&&"multiline"],input:["input"]},u=xn(l,Uje,t);return{...t,...u}},tVe=Ze(j6,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...B6(e,t),!n.disableUnderline&&t.underline]}})(fn(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${kg.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${kg.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kg.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kg.disabled}, .${kg.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${kg.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Gl()).map(([a])=>{var o;return{props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(o=(e.vars||e).palette[a])==null?void 0:o.main}`}}}}),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:o})=>a.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),nVe=Ze(U6,{name:"MuiFilledInput",slot:"Input",overridesResolver:z6})(fn(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),rX=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,hiddenLabel:l,inputComponent:u="input",multiline:c=!1,slotProps:f,slots:d={},type:h="text",...m}=r,g={...r,disableUnderline:i,fullWidth:o,inputComponent:u,multiline:c,type:h},b=eVe(r),x={root:{ownerState:g},input:{ownerState:g}},w=f??a?Ms(x,f??a):x,C=d.root??s.Root??tVe,S=d.input??s.Input??nVe;return W.jsx(nX,{slots:{root:C,input:S},slotProps:w,fullWidth:o,inputComponent:u,multiline:c,ref:n,type:h,...m,classes:b})});rX.muiName="Input";function rVe(e){return bn("MuiFormControl",e)}pn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const iVe=e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root",n!=="none"&&`margin${ut(n)}`,r&&"fullWidth"]};return xn(i,rVe,t)},sVe=Ze("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${ut(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),$x=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiFormControl"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:f=!1,hiddenLabel:d=!1,margin:h="none",required:m=!1,size:g="medium",variant:b="outlined",...x}=r,w={...r,color:a,component:o,disabled:l,error:u,fullWidth:f,hiddenLabel:d,margin:h,required:m,size:g,variant:b},C=iVe(w),[S,E]=U.useState(()=>{let F=!1;return i&&U.Children.forEach(i,R=>{if(!kI(R,["Input","Select"]))return;const j=kI(R,["Select"])?R.props.input:R;j&&Lje(j.props)&&(F=!0)}),F}),[A,k]=U.useState(()=>{let F=!1;return i&&U.Children.forEach(i,R=>{kI(R,["Input","Select"])&&(RO(R.props,!0)||RO(R.props.inputProps,!0))&&(F=!0)}),F}),[N,I]=U.useState(!1);l&&N&&I(!1);const T=c!==void 0&&!l?c:N;let D;U.useRef(!1);const L=U.useCallback(()=>{k(!0)},[]),P=U.useCallback(()=>{k(!1)},[]),M=U.useMemo(()=>({adornedStart:S,setAdornedStart:E,color:a,disabled:l,error:u,filled:A,focused:T,fullWidth:f,hiddenLabel:d,size:g,onBlur:()=>{I(!1)},onFocus:()=>{I(!0)},onEmpty:P,onFilled:L,registerEffect:D,required:m,variant:b}),[S,a,l,u,A,T,f,d,D,P,L,m,g,b]);return W.jsx(tX.Provider,{value:M,children:W.jsx(sVe,{as:o,ownerState:w,className:St(C.root,s),ref:n,...x,children:i})})});function aVe(e){return bn("MuiFormControlLabel",e)}const z3=pn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),oVe=e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:s}=e,a={root:["root",n&&"disabled",`labelPlacement${ut(r)}`,i&&"error",s&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return xn(a,aVe,t)},lVe=Ze("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${z3.label}`]:t.label},t.root,t[`labelPlacement${ut(n.labelPlacement)}`]]}})(fn(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${z3.disabled}`]:{cursor:"default"},[`& .${z3.label}`]:{[`&.${z3.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),uVe=Ze("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(fn(({theme:e})=>({[`&.${z3.error}`]:{color:(e.vars||e).palette.error.main}}))),cVe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:a={},control:o,disabled:l,disableTypography:u,inputRef:c,label:f,labelPlacement:d="end",name:h,onChange:m,required:g,slots:b={},slotProps:x={},value:w,...C}=r,S=Nm(),E=l??o.props.disabled??(S==null?void 0:S.disabled),A=g??o.props.required,k={disabled:E,required:A};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof o.props[F]>"u"&&typeof r[F]<"u"&&(k[F]=r[F])});const N=Vy({props:r,muiFormControl:S,states:["error"]}),I={...r,disabled:E,labelPlacement:d,required:A,error:N.error},T=oVe(I),D={slots:b,slotProps:{...a,...x}},[L,P]=Ei("typography",{elementType:mt,externalForwardedProps:D,ownerState:I});let M=f;return M!=null&&M.type!==mt&&!u&&(M=W.jsx(L,{component:"span",...P,className:St(T.label,P==null?void 0:P.className),children:M})),W.jsxs(lVe,{className:St(T.root,s),ownerState:I,ref:n,...C,children:[U.cloneElement(o,k),A?W.jsxs("div",{children:[M,W.jsxs(uVe,{ownerState:I,"aria-hidden":!0,className:T.asterisk,children:["","*"]})]}):M]})});function fVe(e){return bn("MuiFormHelperText",e)}const Qle=pn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Jle;const dVe=e=>{const{classes:t,contained:n,size:r,disabled:i,error:s,filled:a,focused:o,required:l}=e,u={root:["root",i&&"disabled",s&&"error",r&&`size${ut(r)}`,n&&"contained",o&&"focused",a&&"filled",l&&"required"]};return xn(u,fVe,t)},hVe=Ze("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${ut(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(fn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Qle.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Qle.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),pVe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiFormHelperText"}),{children:i,className:s,component:a="p",disabled:o,error:l,filled:u,focused:c,margin:f,required:d,variant:h,...m}=r,g=Nm(),b=Vy({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),x={...r,component:a,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete x.ownerState;const w=dVe(x);return W.jsx(hVe,{as:a,className:St(w.root,s),ref:n,...m,ownerState:x,children:i===" "?Jle||(Jle=W.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function mVe(e){return bn("MuiFormLabel",e)}const k$=pn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),gVe=e=>{const{classes:t,color:n,focused:r,disabled:i,error:s,filled:a,required:o}=e,l={root:["root",`color${ut(n)}`,i&&"disabled",s&&"error",a&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return xn(l,mVe,t)},yVe=Ze("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(fn(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Gl()).map(([t])=>({props:{color:t},style:{[`&.${k$.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${k$.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${k$.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),bVe=Ze("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(fn(({theme:e})=>({[`&.${k$.error}`]:{color:(e.vars||e).palette.error.main}}))),xVe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiFormLabel"}),{children:i,className:s,color:a,component:o="label",disabled:l,error:u,filled:c,focused:f,required:d,...h}=r,m=Nm(),g=Vy({props:r,muiFormControl:m,states:["color","required","focused","disabled","error","filled"]}),b={...r,color:g.color||"primary",component:o,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},x=gVe(b);return W.jsxs(yVe,{as:o,ownerState:b,className:St(x.root,s),ref:n,...h,children:[i,g.required&&W.jsxs(bVe,{ownerState:b,"aria-hidden":!0,className:x.asterisk,children:["","*"]})]})}),ah=ZBe({createStyledComponent:Ze("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>kn({props:e,name:"MuiGrid"}),useTheme:zk});function BV(e){return`scale(${e}, ${e**2})`}const vVe={entering:{opacity:1,transform:BV(1)},entered:{opacity:1,transform:"none"}},KB=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),zV=U.forwardRef(function(t,n){const{addEndListener:r,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:u,onEntering:c,onExit:f,onExited:d,onExiting:h,style:m,timeout:g="auto",TransitionComponent:b=fd,...x}=t,w=A2e(),C=U.useRef(),S=zk(),E=U.useRef(null),A=Va(E,Bk(s),n),k=F=>R=>{if(F){const j=E.current;R===void 0?F(j):F(j,R)}},N=k(c),I=k((F,R)=>{j2e(F);const{duration:j,delay:H,easing:G}=IO({style:m,timeout:g,easing:a},{mode:"enter"});let z;g==="auto"?(z=S.transitions.getAutoHeightDuration(F.clientHeight),C.current=z):z=j,F.style.transition=[S.transitions.create("opacity",{duration:z,delay:H}),S.transitions.create("transform",{duration:KB?z:z*.666,delay:H,easing:G})].join(","),l&&l(F,R)}),T=k(u),D=k(h),L=k(F=>{const{duration:R,delay:j,easing:H}=IO({style:m,timeout:g,easing:a},{mode:"exit"});let G;g==="auto"?(G=S.transitions.getAutoHeightDuration(F.clientHeight),C.current=G):G=R,F.style.transition=[S.transitions.create("opacity",{duration:G,delay:j}),S.transitions.create("transform",{duration:KB?G:G*.666,delay:KB?j:j||G*.333,easing:H})].join(","),F.style.opacity=0,F.style.transform=BV(.75),f&&f(F)}),P=k(d),M=F=>{g==="auto"&&w.start(C.current||0,F),r&&r(E.current,F)};return W.jsx(b,{appear:i,in:o,nodeRef:E,onEnter:I,onEntered:T,onEntering:N,onExit:L,onExited:P,onExiting:D,addEndListener:M,timeout:g==="auto"?null:g,...x,children:(F,{ownerState:R,...j})=>U.cloneElement(s,{style:{opacity:0,transform:BV(.75),visibility:F==="exited"&&!o?"hidden":void 0,...vVe[F],...m,...s.props.style},ref:A,...j})})});zV&&(zV.muiSupportAuto=!0);const wVe=e=>{const{classes:t,disableUnderline:n}=e,i=xn({root:["root",!n&&"underline"],input:["input"]},zje,t);return{...t,...i}},SVe=Ze(j6,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...B6(e,t),!n.disableUnderline&&t.underline]}})(fn(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ZC.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ZC.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ZC.disabled}, .${ZC.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${ZC.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Gl()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}}))]}})),CVe=Ze(U6,{name:"MuiInput",slot:"Input",overridesResolver:z6})({}),iX=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:a,fullWidth:o=!1,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:f={},type:d="text",...h}=r,m=wVe(r),b={root:{ownerState:{disableUnderline:i}}},x=c??a?Ms(c??a,b):b,w=f.root??s.Root??SVe,C=f.input??s.Input??CVe;return W.jsx(nX,{slots:{root:w,input:C},slotProps:x,fullWidth:o,inputComponent:l,multiline:u,ref:n,type:d,...h,classes:m})});iX.muiName="Input";function $Ve(e){return bn("MuiInputLabel",e)}pn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const EVe=e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:s,variant:a,required:o}=e,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="medium"&&`size${ut(r)}`,a],asterisk:[o&&"asterisk"]},u=xn(l,$Ve,t);return{...t,...u}},kVe=Ze(xVe,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${k$.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(fn(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:r})=>t==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Ex=U.forwardRef(function(t,n){const r=kn({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:s,shrink:a,variant:o,className:l,...u}=r,c=Nm();let f=a;typeof f>"u"&&c&&(f=c.filled||c.focused||c.adornedStart);const d=Vy({props:r,muiFormControl:c,states:["size","variant","required","focused"]}),h={...r,disableAnimation:i,formControl:c,shrink:f,size:d.size,variant:d.variant,required:d.required,focused:d.focused},m=EVe(h);return W.jsx(kVe,{"data-shrink":f,ref:n,className:St(m.root,l),...u,ownerState:h,classes:m})});function AVe(e){return bn("MuiLink",e)}const _Ve=pn("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),TVe=({theme:e,ownerState:t})=>{const n=t.color,r=v0(e,`palette.${n}.main`,!1)||v0(e,`palette.${n}`,!1)||t.color,i=v0(e,`palette.${n}.mainChannel`)||v0(e,`palette.${n}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:Bi(r,.4)},eue={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},NVe=e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,s={root:["root",`underline${ut(i)}`,n==="button"&&"button",r&&"focusVisible"]};return xn(s,AVe,t)},DVe=Ze(mt,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${ut(n.underline)}`],n.component==="button"&&t.button]}})(fn(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:n})=>t==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(Gl()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:Bi(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Bi(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:Bi(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_Ve.focusVisible}`]:{outline:"auto"}}}]}))),kx=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiLink"}),i=zk(),{className:s,color:a="primary",component:o="a",onBlur:l,onFocus:u,TypographyClasses:c,underline:f="always",variant:d="inherit",sx:h,...m}=r,[g,b]=U.useState(!1),x=E=>{Sx(E.target)||b(!1),l&&l(E)},w=E=>{Sx(E.target)&&b(!0),u&&u(E)},C={...r,color:a,component:o,focusVisible:g,underline:f,variant:d},S=NVe(C);return W.jsx(DVe,{color:a,className:St(S.root,s),classes:c,component:o,onBlur:x,onFocus:w,ref:n,ownerState:C,variant:d,...m,sx:[...eue[a]===void 0?[{color:a}]:[],...Array.isArray(h)?h:[h]],style:{...m.style,...f==="always"&&a!=="inherit"&&!eue[a]&&{"--Link-underlineColor":TVe({theme:i,ownerState:C})}}})}),jV=U.createContext({});function IVe(e){return bn("MuiList",e)}pn("MuiList",["root","padding","dense","subheader"]);const OVe=e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return xn({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},IVe,t)},RVe=Ze("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),FVe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiList"}),{children:i,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:u,...c}=r,f=U.useMemo(()=>({dense:o}),[o]),d={...r,component:a,dense:o,disablePadding:l},h=OVe(d);return W.jsx(jV.Provider,{value:f,children:W.jsxs(RVe,{as:a,className:St(h.root,s),ref:n,ownerState:d,...c,children:[u,i]})})}),tue=pn("MuiListItemIcon",["root","alignItemsFlexStart"]),nue=pn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function ZB(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function rue(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function V2e(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function QC(e,t,n,r,i,s){let a=!1,o=i(e,t,t?n:!1);for(;o;){if(o===e.firstChild){if(a)return!1;a=!0}const l=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!V2e(o,s)||l)o=i(e,o,n);else return o.focus(),!0}return!1}const MVe=U.forwardRef(function(t,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:f="selectedMenu",...d}=t,h=U.useRef(null),m=U.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});jh(()=>{i&&h.current.focus()},[i]),U.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(C,{direction:S})=>{const E=!h.current.style.width;if(C.clientHeight<h.current.clientHeight&&E){const A=`${_2e(Uh(C))}px`;h.current.style[S==="rtl"?"paddingLeft":"paddingRight"]=A,h.current.style.width=`calc(100% + ${A})`}return h.current}}),[]);const g=C=>{const S=h.current,E=C.key;if(C.ctrlKey||C.metaKey||C.altKey){c&&c(C);return}const k=fo(S).activeElement;if(E==="ArrowDown")C.preventDefault(),QC(S,k,u,l,ZB);else if(E==="ArrowUp")C.preventDefault(),QC(S,k,u,l,rue);else if(E==="Home")C.preventDefault(),QC(S,null,u,l,ZB);else if(E==="End")C.preventDefault(),QC(S,null,u,l,rue);else if(E.length===1){const N=m.current,I=E.toLowerCase(),T=performance.now();N.keys.length>0&&(T-N.lastTime>500?(N.keys=[],N.repeating=!0,N.previousKeyMatched=!0):N.repeating&&I!==N.keys[0]&&(N.repeating=!1)),N.lastTime=T,N.keys.push(I);const D=k&&!N.repeating&&V2e(k,N);N.previousKeyMatched&&(D||QC(S,k,!1,l,ZB,N))?C.preventDefault():N.previousKeyMatched=!1}c&&c(C)},b=Va(h,n);let x=-1;U.Children.forEach(a,(C,S)=>{if(!U.isValidElement(C)){x===S&&(x+=1,x>=a.length&&(x=-1));return}C.props.disabled||(f==="selectedMenu"&&C.props.selected||x===-1)&&(x=S),x===S&&(C.props.disabled||C.props.muiSkipListHighlight||C.type.muiSkipListHighlight)&&(x+=1,x>=a.length&&(x=-1))});const w=U.Children.map(a,(C,S)=>{if(S===x){const E={};return s&&(E.autoFocus=!0),C.props.tabIndex===void 0&&f==="selectedMenu"&&(E.tabIndex=0),U.cloneElement(C,E)}return C});return W.jsx(FVe,{role:"menu",ref:b,className:o,onKeyDown:g,tabIndex:i?0:-1,...d,children:w})});function LVe(e){return bn("MuiPopover",e)}pn("MuiPopover",["root","paper"]);function iue(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function sue(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function aue(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function v4(e){return typeof e=="function"?e():e}const PVe=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"]},LVe,t)},BVe=Ze(JUe,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),W2e=Ze(Hl,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),zVe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:u,className:c,container:f,elevation:d=8,marginThreshold:h=16,open:m,PaperProps:g={},slots:b={},slotProps:x={},transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:C,transitionDuration:S="auto",TransitionProps:E={},disableScrollLock:A=!1,...k}=r,N=U.useRef(),I={...r,anchorOrigin:a,anchorReference:l,elevation:d,marginThreshold:h,transformOrigin:w,TransitionComponent:C,transitionDuration:S,TransitionProps:E},T=PVe(I),D=U.useCallback(()=>{if(l==="anchorPosition")return o;const xe=v4(s),ce=(xe&&xe.nodeType===1?xe:fo(N.current).body).getBoundingClientRect();return{top:ce.top+iue(ce,a.vertical),left:ce.left+sue(ce,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),L=U.useCallback(xe=>({vertical:iue(xe,w.vertical),horizontal:sue(xe,w.horizontal)}),[w.horizontal,w.vertical]),P=U.useCallback(xe=>{const Ee={width:xe.offsetWidth,height:xe.offsetHeight},ce=L(Ee);if(l==="none")return{top:null,left:null,transformOrigin:aue(ce)};const Xe=D();let ze=Xe.top-ce.vertical,Je=Xe.left-ce.horizontal;const at=ze+Ee.height,et=Je+Ee.width,nt=Uh(v4(s)),Yn=nt.innerHeight-h,Yt=nt.innerWidth-h;if(h!==null&&ze<h){const sn=ze-h;ze-=sn,ce.vertical+=sn}else if(h!==null&&at>Yn){const sn=at-Yn;ze-=sn,ce.vertical+=sn}if(h!==null&&Je<h){const sn=Je-h;Je-=sn,ce.horizontal+=sn}else if(et>Yt){const sn=et-Yt;Je-=sn,ce.horizontal+=sn}return{top:`${Math.round(ze)}px`,left:`${Math.round(Je)}px`,transformOrigin:aue(ce)}},[s,l,D,L,h]),[M,F]=U.useState(m),R=U.useCallback(()=>{const xe=N.current;if(!xe)return;const Ee=P(xe);Ee.top!==null&&xe.style.setProperty("top",Ee.top),Ee.left!==null&&(xe.style.left=Ee.left),xe.style.transformOrigin=Ee.transformOrigin,F(!0)},[P]);U.useEffect(()=>(A&&window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)),[s,A,R]);const j=()=>{R()},H=()=>{F(!1)};U.useEffect(()=>{m&&R()}),U.useImperativeHandle(i,()=>m?{updatePosition:()=>{R()}}:null,[m,R]),U.useEffect(()=>{if(!m)return;const xe=E2e(()=>{R()}),Ee=Uh(v4(s));return Ee.addEventListener("resize",xe),()=>{xe.clear(),Ee.removeEventListener("resize",xe)}},[s,m,R]);let G=S;const z={slots:{transition:C,...b},slotProps:{transition:E,paper:g,...x}},[Y,Z]=Ei("transition",{elementType:zV,externalForwardedProps:z,ownerState:I,getSlotProps:xe=>({...xe,onEntering:(Ee,ce)=>{var Xe;(Xe=xe.onEntering)==null||Xe.call(xe,Ee,ce),j()},onExited:Ee=>{var ce;(ce=xe.onExited)==null||ce.call(xe,Ee),H()}}),additionalProps:{appear:!0,in:m}});S==="auto"&&!Y.muiSupportAuto&&(G=void 0);const Q=f||(s?fo(v4(s)).body:void 0),[se,{slots:re,slotProps:de,...Oe}]=Ei("root",{ref:n,elementType:BVe,externalForwardedProps:{...z,...k},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:Uze(typeof x.backdrop=="function"?x.backdrop(I):x.backdrop,{invisible:!0})},container:Q,open:m},ownerState:I,className:St(T.root,c)}),[Le,me]=Ei("paper",{ref:N,className:T.paper,elementType:W2e,externalForwardedProps:z,shouldForwardComponentProp:!0,additionalProps:{elevation:d,style:M?void 0:{opacity:0}},ownerState:I});return W.jsx(se,{...Oe,...!F1(se)&&{slots:re,slotProps:de,disableScrollLock:A},children:W.jsx(Y,{...Z,timeout:G,children:W.jsx(Le,{...me,children:u})})})});function jVe(e){return bn("MuiMenu",e)}pn("MuiMenu",["root","paper","list"]);const UVe={vertical:"top",horizontal:"right"},VVe={vertical:"top",horizontal:"left"},WVe=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"],list:["list"]},jVe,t)},HVe=Ze(zVe,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),GVe=Ze(W2e,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),qVe=Ze(MVe,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),XVe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:a,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:u,open:c,PaperProps:f={},PopoverClasses:d,transitionDuration:h="auto",TransitionProps:{onEntering:m,...g}={},variant:b="selectedMenu",slots:x={},slotProps:w={},...C}=r,S=I2e(),E={...r,autoFocus:i,disableAutoFocusItem:o,MenuListProps:l,onEntering:m,PaperProps:f,transitionDuration:h,TransitionProps:g,variant:b},A=WVe(E),k=i&&!o&&c,N=U.useRef(null),I=(G,z)=>{N.current&&N.current.adjustStyleForScrollbar(G,{direction:S?"rtl":"ltr"}),m&&m(G,z)},T=G=>{G.key==="Tab"&&(G.preventDefault(),u&&u(G,"tabKeyDown"))};let D=-1;U.Children.map(s,(G,z)=>{U.isValidElement(G)&&(G.props.disabled||(b==="selectedMenu"&&G.props.selected||D===-1)&&(D=z))});const L={slots:x,slotProps:{list:l,transition:g,paper:f,...w}},P=ff({elementType:x.root,externalSlotProps:w.root,ownerState:E,className:[A.root,a]}),[M,F]=Ei("paper",{className:A.paper,elementType:GVe,externalForwardedProps:L,shouldForwardComponentProp:!0,ownerState:E}),[R,j]=Ei("list",{className:St(A.list,l.className),elementType:qVe,shouldForwardComponentProp:!0,externalForwardedProps:L,getSlotProps:G=>({...G,onKeyDown:z=>{var Y;T(z),(Y=G.onKeyDown)==null||Y.call(G,z)}}),ownerState:E}),H=typeof L.slotProps.transition=="function"?L.slotProps.transition(E):L.slotProps.transition;return W.jsx(HVe,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?UVe:VVe,slots:{root:x.root,paper:M,backdrop:x.backdrop,...x.transition&&{transition:x.transition}},slotProps:{root:P,paper:F,backdrop:typeof w.backdrop=="function"?w.backdrop(E):w.backdrop,transition:{...H,onEntering:(...G)=>{var z;I(...G),(z=H==null?void 0:H.onEntering)==null||z.call(H,...G)}}},open:c,ref:n,transitionDuration:h,ownerState:E,...C,classes:d,children:W.jsx(R,{actions:N,autoFocus:i&&(D===-1||o),autoFocusItem:k,variant:b,...j,children:s})})});function YVe(e){return bn("MuiMenuItem",e)}const JC=pn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),KVe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},ZVe=e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:s,classes:a}=e,l=xn({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},YVe,a);return{...a,...l}},QVe=Ze(jk,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:KVe})(fn(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${JC.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Bi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${JC.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Bi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${JC.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Bi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Bi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${JC.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${JC.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Zle.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Zle.inset}`]:{marginLeft:52},[`& .${nue.root}`]:{marginTop:0,marginBottom:0},[`& .${nue.inset}`]:{paddingLeft:36},[`& .${tue.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${tue.root} svg`]:{fontSize:"1.25rem"}}}]}))),gh=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:f,className:d,...h}=r,m=U.useContext(jV),g=U.useMemo(()=>({dense:a||m.dense||!1,disableGutters:l}),[m.dense,a,l]),b=U.useRef(null);jh(()=>{i&&b.current&&b.current.focus()},[i]);const x={...r,dense:g.dense,divider:o,disableGutters:l},w=ZVe(r),C=Va(b,n);let S;return r.disabled||(S=f!==void 0?f:-1),W.jsx(jV.Provider,{value:g,children:W.jsx(QVe,{ref:C,role:c,tabIndex:S,component:s,focusVisibleClassName:St(w.focusVisible,u),className:St(w.root,d),...h,ownerState:x,classes:w})})});function JVe(e){return bn("MuiNativeSelect",e)}const sX=pn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),eWe=e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:s,error:a}=e,o={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ut(n)}`,s&&"iconOpen",r&&"disabled"]};return xn(o,JVe,t)},H2e=Ze("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${sX.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),tWe=Ze(H2e,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Wl,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${sX.multiple}`]:t.multiple}]}})({}),G2e=Ze("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${sX.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),nWe=Ze(G2e,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${ut(n.variant)}`],n.open&&t.iconOpen]}})({}),rWe=U.forwardRef(function(t,n){const{className:r,disabled:i,error:s,IconComponent:a,inputRef:o,variant:l="standard",...u}=t,c={...t,disabled:i,variant:l,error:s},f=eWe(c);return W.jsxs(U.Fragment,{children:[W.jsx(tWe,{ownerState:c,className:St(f.select,r),disabled:i,ref:o||n,...u}),t.multiple?null:W.jsx(nWe,{as:a,ownerState:c,className:f.icon})]})});var oue;const iWe=Ze("fieldset",{shouldForwardProp:Wl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),sWe=Ze("legend",{shouldForwardProp:Wl})(fn(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function aWe(e){const{children:t,classes:n,className:r,label:i,notched:s,...a}=e,o=i!=null&&i!=="",l={...e,notched:s,withLabel:o};return W.jsx(iWe,{"aria-hidden":!0,className:r,ownerState:l,...a,children:W.jsx(sWe,{ownerState:l,children:o?W.jsx("span",{children:i}):oue||(oue=W.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const oWe=e=>{const{classes:t}=e,r=xn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},jje,t);return{...t,...r}},lWe=Ze(j6,{shouldForwardProp:e=>Wl(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:B6})(fn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${nf.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${nf.focused} .${nf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Gl()).map(([n])=>({props:{color:n},style:{[`&.${nf.focused} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${nf.error} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${nf.disabled} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),uWe=Ze(aWe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(fn(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),cWe=Ze(U6,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:z6})(fn(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),aX=U.forwardRef(function(t,n){var r;const i=kn({props:t,name:"MuiOutlinedInput"}),{components:s={},fullWidth:a=!1,inputComponent:o="input",label:l,multiline:u=!1,notched:c,slots:f={},type:d="text",...h}=i,m=oWe(i),g=Nm(),b=Vy({props:i,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x={...i,color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:g,fullWidth:a,hiddenLabel:b.hiddenLabel,multiline:u,size:b.size,type:d},w=f.root??s.Root??lWe,C=f.input??s.Input??cWe;return W.jsx(nX,{slots:{root:w,input:C},renderSuffix:S=>W.jsx(uWe,{ownerState:x,className:m.notchedOutline,label:l!=null&&l!==""&&b.required?r||(r=W.jsxs(U.Fragment,{children:[l,"","*"]})):l,notched:typeof c<"u"?c:!!(S.startAdornment||S.filled||S.focused)}),fullWidth:a,inputComponent:o,multiline:u,ref:n,type:d,...h,classes:{...m,notchedOutline:null}})});aX.muiName="Input";function q2e(e){return bn("MuiSelect",e)}const e3=pn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var lue;const fWe=Ze(H2e,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${e3.select}`]:t.select},{[`&.${e3.select}`]:t[n.variant]},{[`&.${e3.error}`]:t.error},{[`&.${e3.multiple}`]:t.multiple}]}})({[`&.${e3.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),dWe=Ze(G2e,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${ut(n.variant)}`],n.open&&t.iconOpen]}})({}),hWe=Ze("input",{shouldForwardProp:e=>P6(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function uue(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function pWe(e){return e==null||typeof e=="string"&&!e.trim()}const mWe=e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:s,error:a}=e,o={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ut(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return xn(o,q2e,t)},gWe=U.forwardRef(function(t,n){var Wr;const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:u,defaultValue:c,disabled:f,displayEmpty:d,error:h=!1,IconComponent:m,inputRef:g,labelId:b,MenuProps:x={},multiple:w,name:C,onBlur:S,onChange:E,onClose:A,onFocus:k,onOpen:N,open:I,readOnly:T,renderValue:D,required:L,SelectDisplayProps:P={},tabIndex:M,type:F,value:R,variant:j="standard",...H}=t,[G,z]=TO({controlled:R,default:c,name:"Select"}),[Y,Z]=TO({controlled:I,default:u,name:"Select"}),Q=U.useRef(null),se=U.useRef(null),[re,de]=U.useState(null),{current:Oe}=U.useRef(I!=null),[Le,me]=U.useState(),xe=Va(n,g),Ee=U.useCallback(ot=>{se.current=ot,ot&&de(ot)},[]),ce=re==null?void 0:re.parentNode;U.useImperativeHandle(xe,()=>({focus:()=>{se.current.focus()},node:Q.current,value:G}),[G]),U.useEffect(()=>{u&&Y&&re&&!Oe&&(me(a?null:ce.clientWidth),se.current.focus())},[re,a]),U.useEffect(()=>{s&&se.current.focus()},[s]),U.useEffect(()=>{if(!b)return;const ot=fo(se.current).getElementById(b);if(ot){const Tn=()=>{getSelection().isCollapsed&&se.current.focus()};return ot.addEventListener("click",Tn),()=>{ot.removeEventListener("click",Tn)}}},[b]);const Xe=(ot,Tn)=>{ot?N&&N(Tn):A&&A(Tn),Oe||(me(a?null:ce.clientWidth),Z(ot))},ze=ot=>{ot.button===0&&(ot.preventDefault(),se.current.focus(),Xe(!0,ot))},Je=ot=>{Xe(!1,ot)},at=U.Children.toArray(o),et=ot=>{const Tn=at.find(tr=>tr.props.value===ot.target.value);Tn!==void 0&&(z(Tn.props.value),E&&E(ot,Tn))},nt=ot=>Tn=>{let tr;if(Tn.currentTarget.hasAttribute("tabindex")){if(w){tr=Array.isArray(G)?G.slice():[];const Xl=G.indexOf(ot.props.value);Xl===-1?tr.push(ot.props.value):tr.splice(Xl,1)}else tr=ot.props.value;if(ot.props.onClick&&ot.props.onClick(Tn),G!==tr&&(z(tr),E)){const Xl=Tn.nativeEvent||Tn,Vu=new Xl.constructor(Xl.type,Xl);Object.defineProperty(Vu,"target",{writable:!0,value:{value:tr,name:C}}),E(Vu,ot)}w||Xe(!1,Tn)}},Yn=ot=>{T||[" ","ArrowUp","ArrowDown","Enter"].includes(ot.key)&&(ot.preventDefault(),Xe(!0,ot))},Yt=re!==null&&Y,sn=ot=>{!Yt&&S&&(Object.defineProperty(ot,"target",{writable:!0,value:{value:G,name:C}}),S(ot))};delete H["aria-invalid"];let it,fr;const an=[];let Fe=!1;(RO({value:G})||d)&&(D?it=D(G):Fe=!0);const Ue=at.map(ot=>{if(!U.isValidElement(ot))return null;let Tn;if(w){if(!Array.isArray(G))throw new Error(zh(2));Tn=G.some(tr=>uue(tr,ot.props.value)),Tn&&Fe&&an.push(ot.props.children)}else Tn=uue(G,ot.props.value),Tn&&Fe&&(fr=ot.props.children);return U.cloneElement(ot,{"aria-selected":Tn?"true":"false",onClick:nt(ot),onKeyUp:tr=>{tr.key===" "&&tr.preventDefault(),ot.props.onKeyUp&&ot.props.onKeyUp(tr)},role:"option",selected:Tn,value:void 0,"data-value":ot.props.value})});Fe&&(w?an.length===0?it=null:it=an.reduce((ot,Tn,tr)=>(ot.push(Tn),tr<an.length-1&&ot.push(", "),ot),[]):it=fr);let Ne=Le;!a&&Oe&&re&&(Ne=ce.clientWidth);let wt;typeof M<"u"?wt=M:wt=f?null:0;const At=P.id||(C?`mui-component-select-${C}`:void 0),pt={...t,variant:j,value:G,open:Yt,error:h},Lt=mWe(pt),dr={...x.PaperProps,...(Wr=x.slotProps)==null?void 0:Wr.paper},vn=Yq();return W.jsxs(U.Fragment,{children:[W.jsx(fWe,{as:"div",ref:Ee,tabIndex:wt,role:"combobox","aria-controls":Yt?vn:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":Yt?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,At].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":L?"true":void 0,"aria-invalid":h?"true":void 0,onKeyDown:Yn,onMouseDown:f||T?null:ze,onBlur:sn,onFocus:k,...P,ownerState:pt,className:St(P.className,Lt.select,l),id:At,children:pWe(it)?lue||(lue=W.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):it}),W.jsx(hWe,{"aria-invalid":h,value:Array.isArray(G)?G.join(","):G,name:C,ref:Q,"aria-hidden":!0,onChange:et,tabIndex:-1,disabled:f,className:Lt.nativeInput,autoFocus:s,required:L,...H,ownerState:pt}),W.jsx(dWe,{as:m,className:Lt.icon,ownerState:pt}),W.jsx(XVe,{id:`menu-${C||""}`,anchorEl:ce,open:Yt,onClose:Je,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...x,slotProps:{...x.slotProps,list:{"aria-labelledby":b,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:vn,...x.MenuListProps},paper:{...dr,style:{minWidth:Ne,...dr!=null?dr.style:null}}},children:Ue})]})}),yWe=e=>{const{classes:t}=e,r=xn({root:["root"]},q2e,t);return{...t,...r}},oX={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Wl(e)&&e!=="variant",slot:"Root"},bWe=Ze(iX,oX)(""),xWe=Ze(aX,oX)(""),vWe=Ze(rX,oX)(""),ay=U.forwardRef(function(t,n){const r=kn({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=Vje,id:f,input:d,inputProps:h,label:m,labelId:g,MenuProps:b,multiple:x=!1,native:w=!1,onClose:C,onOpen:S,open:E,renderValue:A,SelectDisplayProps:k,variant:N="outlined",...I}=r,T=w?rWe:gWe,D=Nm(),L=Vy({props:r,muiFormControl:D,states:["variant","error"]}),P=L.variant||N,M={...r,variant:P,classes:a},F=yWe(M),{root:R,...j}=F,H=d||{standard:W.jsx(bWe,{ownerState:M}),outlined:W.jsx(xWe,{label:m,ownerState:M}),filled:W.jsx(vWe,{ownerState:M})}[P],G=Va(n,Bk(H));return W.jsx(U.Fragment,{children:U.cloneElement(H,{inputComponent:T,inputProps:{children:s,error:L.error,IconComponent:c,variant:P,type:void 0,multiple:x,...w?{id:f}:{autoWidth:i,defaultOpen:l,displayEmpty:u,labelId:g,MenuProps:b,onClose:C,onOpen:S,open:E,renderValue:A,SelectDisplayProps:{id:f,...k}},...h,classes:h?Ms(j,h.classes):j,...d?d.props.inputProps:{}},...(x&&w||u)&&P==="outlined"?{notched:!0}:{},ref:G,className:St(H.props.className,o,F.root),...!d&&{variant:P},...I})})});ay.muiName="Select";function wWe(e,t,n=(r,i)=>r===i){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}const SWe=2;function b2(e,t,n,r,i){return n===1?Math.min(e+t,i):Math.max(e-t,r)}function X2e(e,t){return e-t}function cue(e,t){const{index:n}=e.reduce((r,i,s)=>{const a=Math.abs(t-i);return r===null||a<r.distance||a===r.distance?{distance:a,index:s}:r},null)??{};return n}function w4(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function FO(e,t,n){return(e-t)*100/(n-t)}function CWe(e,t,n){return(n-t)*e+t}function $We(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function EWe(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed($We(t)))}function fue({values:e,newValue:t,index:n}){const r=e.slice();return r[n]=t,r.sort(X2e)}function S4({sliderRef:e,activeIndex:t,setActive:n}){var i,s,a;const r=fo(e.current);(!((i=e.current)!=null&&i.contains(r.activeElement))||Number((s=r==null?void 0:r.activeElement)==null?void 0:s.getAttribute("data-index"))!==t)&&((a=e.current)==null||a.querySelector(`[type="range"][data-index="${t}"]`).focus()),n&&n(t)}function C4(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?wWe(e,t):!1}const kWe={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},AWe=e=>e;let $4;function due(){return $4===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?$4=CSS.supports("touch-action","none"):$4=!0),$4}function _We(e){const{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:a=!1,max:o=100,min:l=0,name:u,onChange:c,onChangeCommitted:f,orientation:d="horizontal",rootRef:h,scale:m=AWe,step:g=1,shiftStep:b=10,tabIndex:x,value:w}=e,C=U.useRef(void 0),[S,E]=U.useState(-1),[A,k]=U.useState(-1),[N,I]=U.useState(!1),T=U.useRef(0),D=U.useRef(null),[L,P]=TO({controlled:w,default:n??l,name:"Slider"}),M=c&&((Fe,Ue,Ne)=>{const wt=Fe.nativeEvent||Fe,At=new wt.constructor(wt.type,wt);Object.defineProperty(At,"target",{writable:!0,value:{value:Ue,name:u}}),D.current=Ue,c(At,Ue,Ne)}),F=Array.isArray(L);let R=F?L.slice().sort(X2e):[L];R=R.map(Fe=>Fe==null?l:j2(Fe,l,o));const j=a===!0&&g!==null?[...Array(Math.floor((o-l)/g)+1)].map((Fe,Ue)=>({value:l+g*Ue})):a||[],H=j.map(Fe=>Fe.value),[G,z]=U.useState(-1),Y=U.useRef(null),Z=Va(h,Y),Q=Fe=>Ue=>{var wt;const Ne=Number(Ue.currentTarget.getAttribute("data-index"));Sx(Ue.target)&&z(Ne),k(Ne),(wt=Fe==null?void 0:Fe.onFocus)==null||wt.call(Fe,Ue)},se=Fe=>Ue=>{var Ne;Sx(Ue.target)||z(-1),k(-1),(Ne=Fe==null?void 0:Fe.onBlur)==null||Ne.call(Fe,Ue)},re=(Fe,Ue)=>{const Ne=Number(Fe.currentTarget.getAttribute("data-index")),wt=R[Ne],At=H.indexOf(wt);let pt=Ue;if(j&&g==null){const Lt=H[H.length-1];pt>=Lt?pt=Lt:pt<=H[0]?pt=H[0]:pt=pt<wt?H[At-1]:H[At+1]}if(pt=j2(pt,l,o),F){i&&(pt=j2(pt,R[Ne-1]||-1/0,R[Ne+1]||1/0));const Lt=pt;pt=fue({values:R,newValue:pt,index:Ne});let dr=Ne;i||(dr=pt.indexOf(Lt)),S4({sliderRef:Y,activeIndex:dr})}P(pt),z(Ne),M&&!C4(pt,L)&&M(Fe,pt,Ne),f&&f(Fe,D.current??pt)},de=Fe=>Ue=>{var Ne;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(Ue.key)){Ue.preventDefault();const wt=Number(Ue.currentTarget.getAttribute("data-index")),At=R[wt];let pt=null;if(g!=null){const Lt=Ue.shiftKey?b:g;switch(Ue.key){case"ArrowUp":pt=b2(At,Lt,1,l,o);break;case"ArrowRight":pt=b2(At,Lt,s?-1:1,l,o);break;case"ArrowDown":pt=b2(At,Lt,-1,l,o);break;case"ArrowLeft":pt=b2(At,Lt,s?1:-1,l,o);break;case"PageUp":pt=b2(At,b,1,l,o);break;case"PageDown":pt=b2(At,b,-1,l,o);break;case"Home":pt=l;break;case"End":pt=o;break}}else if(j){const Lt=H[H.length-1],dr=H.indexOf(At),vn=[s?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Wr=[s?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];vn.includes(Ue.key)?dr===0?pt=H[0]:pt=H[dr-1]:Wr.includes(Ue.key)&&(dr===H.length-1?pt=Lt:pt=H[dr+1])}pt!=null&&re(Ue,pt)}(Ne=Fe==null?void 0:Fe.onKeyDown)==null||Ne.call(Fe,Ue)};jh(()=>{var Fe;r&&Y.current.contains(document.activeElement)&&((Fe=document.activeElement)==null||Fe.blur())},[r]),r&&S!==-1&&E(-1),r&&G!==-1&&z(-1);const Oe=Fe=>Ue=>{var Ne;(Ne=Fe.onChange)==null||Ne.call(Fe,Ue),re(Ue,Ue.target.valueAsNumber)},Le=U.useRef(void 0);let me=d;s&&d==="horizontal"&&(me+="-reverse");const xe=({finger:Fe,move:Ue=!1})=>{const{current:Ne}=Y,{width:wt,height:At,bottom:pt,left:Lt}=Ne.getBoundingClientRect();let dr;me.startsWith("vertical")?dr=(pt-Fe.y)/At:dr=(Fe.x-Lt)/wt,me.includes("-reverse")&&(dr=1-dr);let vn;if(vn=CWe(dr,l,o),g)vn=EWe(vn,g,l);else{const ot=cue(H,vn);vn=H[ot]}vn=j2(vn,l,o);let Wr=0;if(F){Ue?Wr=Le.current:Wr=cue(R,vn),i&&(vn=j2(vn,R[Wr-1]||-1/0,R[Wr+1]||1/0));const ot=vn;vn=fue({values:R,newValue:vn,index:Wr}),i&&Ue||(Wr=vn.indexOf(ot),Le.current=Wr)}return{newValue:vn,activeIndex:Wr}},Ee=Nf(Fe=>{const Ue=w4(Fe,C);if(!Ue)return;if(T.current+=1,Fe.type==="mousemove"&&Fe.buttons===0){ce(Fe);return}const{newValue:Ne,activeIndex:wt}=xe({finger:Ue,move:!0});S4({sliderRef:Y,activeIndex:wt,setActive:E}),P(Ne),!N&&T.current>SWe&&I(!0),M&&!C4(Ne,L)&&M(Fe,Ne,wt)}),ce=Nf(Fe=>{const Ue=w4(Fe,C);if(I(!1),!Ue)return;const{newValue:Ne}=xe({finger:Ue,move:!0});E(-1),Fe.type==="touchend"&&k(-1),f&&f(Fe,D.current??Ne),C.current=void 0,ze()}),Xe=Nf(Fe=>{if(r)return;due()||Fe.preventDefault();const Ue=Fe.changedTouches[0];Ue!=null&&(C.current=Ue.identifier);const Ne=w4(Fe,C);if(Ne!==!1){const{newValue:At,activeIndex:pt}=xe({finger:Ne});S4({sliderRef:Y,activeIndex:pt,setActive:E}),P(At),M&&!C4(At,L)&&M(Fe,At,pt)}T.current=0;const wt=fo(Y.current);wt.addEventListener("touchmove",Ee,{passive:!0}),wt.addEventListener("touchend",ce,{passive:!0})}),ze=U.useCallback(()=>{const Fe=fo(Y.current);Fe.removeEventListener("mousemove",Ee),Fe.removeEventListener("mouseup",ce),Fe.removeEventListener("touchmove",Ee),Fe.removeEventListener("touchend",ce)},[ce,Ee]);U.useEffect(()=>{const{current:Fe}=Y;return Fe.addEventListener("touchstart",Xe,{passive:due()}),()=>{Fe.removeEventListener("touchstart",Xe),ze()}},[ze,Xe]),U.useEffect(()=>{r&&ze()},[r,ze]);const Je=Fe=>Ue=>{var At;if((At=Fe.onMouseDown)==null||At.call(Fe,Ue),r||Ue.defaultPrevented||Ue.button!==0)return;Ue.preventDefault();const Ne=w4(Ue,C);if(Ne!==!1){const{newValue:pt,activeIndex:Lt}=xe({finger:Ne});S4({sliderRef:Y,activeIndex:Lt,setActive:E}),P(pt),M&&!C4(pt,L)&&M(Ue,pt,Lt)}T.current=0;const wt=fo(Y.current);wt.addEventListener("mousemove",Ee,{passive:!0}),wt.addEventListener("mouseup",ce)},at=FO(F?R[0]:l,l,o),et=FO(R[R.length-1],l,o)-at,nt=(Fe={})=>{const Ue=$$(Fe),Ne={onMouseDown:Je(Ue||{})},wt={...Ue,...Ne};return{...Fe,ref:Z,...wt}},Yn=Fe=>Ue=>{var wt;(wt=Fe.onMouseOver)==null||wt.call(Fe,Ue);const Ne=Number(Ue.currentTarget.getAttribute("data-index"));k(Ne)},Yt=Fe=>Ue=>{var Ne;(Ne=Fe.onMouseLeave)==null||Ne.call(Fe,Ue),k(-1)},sn=(Fe={})=>{const Ue=$$(Fe),Ne={onMouseOver:Yn(Ue||{}),onMouseLeave:Yt(Ue||{})};return{...Fe,...Ue,...Ne}},it=Fe=>({pointerEvents:S!==-1&&S!==Fe?"none":void 0});let fr;return d==="vertical"&&(fr=s?"vertical-rl":"vertical-lr"),{active:S,axis:me,axisProps:kWe,dragging:N,focusedThumbIndex:G,getHiddenInputProps:(Fe={})=>{const Ue=$$(Fe),Ne={onChange:Oe(Ue||{}),onFocus:Q(Ue||{}),onBlur:se(Ue||{}),onKeyDown:de(Ue||{})},wt={...Ue,...Ne};return{tabIndex:x,"aria-labelledby":t,"aria-orientation":d,"aria-valuemax":m(o),"aria-valuemin":m(l),name:u,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:r,...Fe,...wt,style:{...xBe,direction:s?"rtl":"ltr",width:"100%",height:"100%",writingMode:fr}}},getRootProps:nt,getThumbProps:sn,marks:j,open:A,range:F,rootRef:Z,trackLeap:et,trackOffset:at,values:R,getThumbStyle:it}}const TWe=e=>!e||!F1(e);function NWe(e){return bn("MuiSlider",e)}const mu=pn("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),DWe=e=>{const{open:t}=e;return{offset:St(t&&mu.valueLabelOpen),circle:mu.valueLabelCircle,label:mu.valueLabelLabel}};function IWe(e){const{children:t,className:n,value:r}=e,i=DWe(e);return t?U.cloneElement(t,{className:St(t.props.className)},W.jsxs(U.Fragment,{children:[t.props.children,W.jsx("span",{className:St(i.offset,n),"aria-hidden":!0,children:W.jsx("span",{className:i.circle,children:W.jsx("span",{className:i.label,children:r})})})]})):null}function hue(e){return e}const OWe=Ze("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${ut(n.color)}`],n.size!=="medium"&&t[`size${ut(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(fn(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${mu.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${mu.dragging}`]:{[`& .${mu.thumb}, & .${mu.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Gl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),RWe=Ze("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),FWe=Ze("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(fn(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Gl()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:wx(e.palette[t].main,.62),borderColor:wx(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:vx(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:vx(e.palette[t].main,.5)})}}}))]}))),MWe=Ze("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${ut(n.color)}`],n.size!=="medium"&&t[`thumbSize${ut(n.size)}`]]}})(fn(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${mu.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Gl()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${mu.focusVisible}`]:{...e.vars?{boxShadow:`0px 0px 0px 8px rgba(${e.vars.palette[t].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Bi(e.palette[t].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${mu.active}`]:{...e.vars?{boxShadow:`0px 0px 0px 14px rgba(${e.vars.palette[t].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Bi(e.palette[t].main,.16)}`}}}}))]}))),LWe=Ze(IWe,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(fn(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${mu.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${mu.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),PWe=Ze("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>P6(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(fn(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),BWe=Ze("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>P6(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(fn(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),zWe=e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:s,classes:a,color:o,size:l}=e,u={root:["root",t&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",o&&`color${ut(o)}`,l&&`size${ut(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${ut(l)}`,o&&`thumbColor${ut(o)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return xn(u,NWe,a)},jWe=({children:e})=>e,pue=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiSlider"}),i=I2e(),{"aria-label":s,"aria-valuetext":a,"aria-labelledby":o,component:l="span",components:u={},componentsProps:c={},color:f="primary",classes:d,className:h,disableSwap:m=!1,disabled:g=!1,getAriaLabel:b,getAriaValueText:x,marks:w=!1,max:C=100,min:S=0,name:E,onChange:A,onChangeCommitted:k,orientation:N="horizontal",shiftStep:I=10,size:T="medium",step:D=1,scale:L=hue,slotProps:P,slots:M,tabIndex:F,track:R="normal",value:j,valueLabelDisplay:H="off",valueLabelFormat:G=hue,...z}=r,Y={...r,isRtl:i,max:C,min:S,classes:d,disabled:g,disableSwap:m,orientation:N,marks:w,color:f,size:T,step:D,shiftStep:I,scale:L,track:R,valueLabelDisplay:H,valueLabelFormat:G},{axisProps:Z,getRootProps:Q,getHiddenInputProps:se,getThumbProps:re,open:de,active:Oe,axis:Le,focusedThumbIndex:me,range:xe,dragging:Ee,marks:ce,values:Xe,trackOffset:ze,trackLeap:Je,getThumbStyle:at}=_We({...Y,rootRef:n});Y.marked=ce.length>0&&ce.some(hr=>hr.label),Y.dragging=Ee,Y.focusedThumbIndex=me;const et=zWe(Y),nt=(M==null?void 0:M.root)??u.Root??OWe,Yn=(M==null?void 0:M.rail)??u.Rail??RWe,Yt=(M==null?void 0:M.track)??u.Track??FWe,sn=(M==null?void 0:M.thumb)??u.Thumb??MWe,it=(M==null?void 0:M.valueLabel)??u.ValueLabel??LWe,fr=(M==null?void 0:M.mark)??u.Mark??PWe,an=(M==null?void 0:M.markLabel)??u.MarkLabel??BWe,Fe=(M==null?void 0:M.input)??u.Input??"input",Ue=(P==null?void 0:P.root)??c.root,Ne=(P==null?void 0:P.rail)??c.rail,wt=(P==null?void 0:P.track)??c.track,At=(P==null?void 0:P.thumb)??c.thumb,pt=(P==null?void 0:P.valueLabel)??c.valueLabel,Lt=(P==null?void 0:P.mark)??c.mark,dr=(P==null?void 0:P.markLabel)??c.markLabel,vn=(P==null?void 0:P.input)??c.input,Wr=ff({elementType:nt,getSlotProps:Q,externalSlotProps:Ue,externalForwardedProps:z,additionalProps:{...TWe(nt)&&{as:l}},ownerState:{...Y,...Ue==null?void 0:Ue.ownerState},className:[et.root,h]}),ot=ff({elementType:Yn,externalSlotProps:Ne,ownerState:Y,className:et.rail}),Tn=ff({elementType:Yt,externalSlotProps:wt,additionalProps:{style:{...Z[Le].offset(ze),...Z[Le].leap(Je)}},ownerState:{...Y,...wt==null?void 0:wt.ownerState},className:et.track}),tr=ff({elementType:sn,getSlotProps:re,externalSlotProps:At,ownerState:{...Y,...At==null?void 0:At.ownerState},className:et.thumb}),Xl=ff({elementType:it,externalSlotProps:pt,ownerState:{...Y,...pt==null?void 0:pt.ownerState},className:et.valueLabel}),Vu=ff({elementType:fr,externalSlotProps:Lt,ownerState:Y,className:et.mark}),vp=ff({elementType:an,externalSlotProps:dr,ownerState:Y,className:et.markLabel}),ag=ff({elementType:Fe,getSlotProps:se,externalSlotProps:vn,ownerState:Y});return W.jsxs(nt,{...Wr,children:[W.jsx(Yn,{...ot}),W.jsx(Yt,{...Tn}),ce.filter(hr=>hr.value>=S&&hr.value<=C).map((hr,vi)=>{const wp=FO(hr.value,S,C),Id=Z[Le].offset(wp);let Ya;return R===!1?Ya=Xe.includes(hr.value):Ya=R==="normal"&&(xe?hr.value>=Xe[0]&&hr.value<=Xe[Xe.length-1]:hr.value<=Xe[0])||R==="inverted"&&(xe?hr.value<=Xe[0]||hr.value>=Xe[Xe.length-1]:hr.value>=Xe[0]),W.jsxs(U.Fragment,{children:[W.jsx(fr,{"data-index":vi,...Vu,...!F1(fr)&&{markActive:Ya},style:{...Id,...Vu.style},className:St(Vu.className,Ya&&et.markActive)}),hr.label!=null?W.jsx(an,{"aria-hidden":!0,"data-index":vi,...vp,...!F1(an)&&{markLabelActive:Ya},style:{...Id,...vp.style},className:St(et.markLabel,vp.className,Ya&&et.markLabelActive),children:hr.label}):null]},vi)}),Xe.map((hr,vi)=>{const wp=FO(hr,S,C),Id=Z[Le].offset(wp),Ya=H==="off"?jWe:it;return W.jsx(Ya,{...!F1(Ya)&&{valueLabelFormat:G,valueLabelDisplay:H,value:typeof G=="function"?G(L(hr),vi):G,index:vi,open:de===vi||Oe===vi||H==="on",disabled:g},...Xl,children:W.jsx(sn,{"data-index":vi,...tr,className:St(et.thumb,tr.className,Oe===vi&&et.active,me===vi&&et.focusVisible),style:{...Id,...at(vi),...tr.style},children:W.jsx(Fe,{"data-index":vi,"aria-label":b?b(vi):s,"aria-valuenow":L(hr),"aria-labelledby":o,"aria-valuetext":x?x(L(hr),vi):a,value:Xe[vi],...ag})})},vi)})]})}),rx=ize({createStyledComponent:Ze("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>kn({props:e,name:"MuiStack"})});function UWe(e){return bn("MuiSwitch",e)}const Ja=pn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),VWe=e=>{const{classes:t,edge:n,size:r,color:i,checked:s,disabled:a}=e,o={root:["root",n&&`edge${ut(n)}`,`size${ut(r)}`],switchBase:["switchBase",`color${ut(i)}`,s&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=xn(o,UWe,t);return{...t,...l}},WWe=Ze("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${ut(n.edge)}`],t[`size${ut(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Ja.thumb}`]:{width:16,height:16},[`& .${Ja.switchBase}`]:{padding:4,[`&.${Ja.checked}`]:{transform:"translateX(16px)"}}}}]}),HWe=Ze(OUe,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${Ja.input}`]:t.input},n.color!=="default"&&t[`color${ut(n.color)}`]]}})(fn(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Ja.checked}`]:{transform:"translateX(20px)"},[`&.${Ja.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Ja.checked} + .${Ja.track}`]:{opacity:.5},[`&.${Ja.disabled} + .${Ja.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${Ja.input}`]:{left:"-100%",width:"300%"}})),fn(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Bi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Gl(["light"])).map(([t])=>({props:{color:t},style:{[`&.${Ja.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Bi(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ja.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?wx(e.palette[t].main,.62):vx(e.palette[t].main,.55)}`}},[`&.${Ja.checked} + .${Ja.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),GWe=Ze("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(fn(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),qWe=Ze("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(fn(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),XWe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiSwitch"}),{className:i,color:s="primary",edge:a=!1,size:o="medium",sx:l,slots:u={},slotProps:c={},...f}=r,d={...r,color:s,edge:a,size:o},h=VWe(d),m={slots:u,slotProps:c},[g,b]=Ei("root",{className:St(h.root,i),elementType:WWe,externalForwardedProps:m,ownerState:d,additionalProps:{sx:l}}),[x,w]=Ei("thumb",{className:h.thumb,elementType:qWe,externalForwardedProps:m,ownerState:d}),C=W.jsx(x,{...w}),[S,E]=Ei("track",{className:h.track,elementType:GWe,externalForwardedProps:m,ownerState:d});return W.jsxs(g,{...b,children:[W.jsx(HWe,{type:"checkbox",icon:C,checkedIcon:C,ref:n,ownerState:d,...f,classes:{...h,root:h.switchBase},slots:{...u.switchBase&&{root:u.switchBase},...u.input&&{input:u.input}},slotProps:{...c.switchBase&&{root:typeof c.switchBase=="function"?c.switchBase(d):c.switchBase},...c.input&&{input:typeof c.input=="function"?c.input(d):c.input}}}),W.jsx(S,{...E})]})});function YWe(e){return bn("MuiToolbar",e)}pn("MuiToolbar",["root","gutters","regular","dense"]);const KWe=e=>{const{classes:t,disableGutters:n,variant:r}=e;return xn({root:["root",!n&&"gutters",r]},YWe,t)},ZWe=Ze("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(fn(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),QWe=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:a=!1,variant:o="regular",...l}=r,u={...r,component:s,disableGutters:a,variant:o},c=KWe(u);return W.jsx(ZWe,{as:s,className:St(c.root,i),ref:n,ownerState:u,...l})});function JWe(e){return bn("MuiTextField",e)}pn("MuiTextField",["root"]);const eHe={standard:iX,filled:rX,outlined:aX},tHe=e=>{const{classes:t}=e;return xn({root:["root"]},JWe,t)},nHe=Ze($x,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ka=U.forwardRef(function(t,n){const r=kn({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:u,disabled:c=!1,error:f=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:m,id:g,InputLabelProps:b,inputProps:x,InputProps:w,inputRef:C,label:S,maxRows:E,minRows:A,multiline:k=!1,name:N,onBlur:I,onChange:T,onFocus:D,placeholder:L,required:P=!1,rows:M,select:F=!1,SelectProps:R,slots:j={},slotProps:H={},type:G,value:z,variant:Y="outlined",...Z}=r,Q={...r,autoFocus:s,color:l,disabled:c,error:f,fullWidth:h,multiline:k,required:P,select:F,variant:Y},se=tHe(Q),re=Yq(g),de=m&&re?`${re}-helper-text`:void 0,Oe=S&&re?`${re}-label`:void 0,Le=eHe[Y],me={slots:j,slotProps:{input:w,inputLabel:b,htmlInput:x,formHelperText:d,select:R,...H}},xe={},Ee=me.slotProps.inputLabel;Y==="outlined"&&(Ee&&typeof Ee.shrink<"u"&&(xe.notched=Ee.shrink),xe.label=S),F&&((!R||!R.native)&&(xe.id=void 0),xe["aria-describedby"]=void 0);const[ce,Xe]=Ei("root",{elementType:nHe,shouldForwardComponentProp:!0,externalForwardedProps:{...me,...Z},ownerState:Q,className:St(se.root,o),ref:n,additionalProps:{disabled:c,error:f,fullWidth:h,required:P,color:l,variant:Y}}),[ze,Je]=Ei("input",{elementType:Le,externalForwardedProps:me,additionalProps:xe,ownerState:Q}),[at,et]=Ei("inputLabel",{elementType:Ex,externalForwardedProps:me,ownerState:Q}),[nt,Yn]=Ei("htmlInput",{elementType:"input",externalForwardedProps:me,ownerState:Q}),[Yt,sn]=Ei("formHelperText",{elementType:pVe,externalForwardedProps:me,ownerState:Q}),[it,fr]=Ei("select",{elementType:ay,externalForwardedProps:me,ownerState:Q}),an=W.jsx(ze,{"aria-describedby":de,autoComplete:i,autoFocus:s,defaultValue:u,fullWidth:h,multiline:k,name:N,rows:M,maxRows:E,minRows:A,type:G,value:z,id:re,inputRef:C,onBlur:I,onChange:T,onFocus:D,placeholder:L,inputProps:Yn,slots:{input:j.htmlInput?nt:void 0},...Je});return W.jsxs(ce,{...Xe,children:[S!=null&&S!==""&&W.jsx(at,{htmlFor:re,id:Oe,...et,children:S}),F?W.jsx(it,{"aria-describedby":de,id:re,labelId:Oe,value:z,input:an,...fr,children:a}):an,m&&W.jsx(Yt,{id:de,...sn,children:m})]})}),Y2e=cd([W.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),W.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),K2e=cd(W.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),rHe=cd(W.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),iHe=cd(W.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8M6 18l6-4.5 6 4.5z"})),sHe=[{title:"Smart Cam",description:"Use COCO-SSD model to recognize objects from your camera in real-time",icon:W.jsx(Y2e,{fontSize:"large"}),path:"/smart-cam"},{title:"House Pricing",description:"Train a simple neural network for real estate price prediction",icon:W.jsx(K2e,{fontSize:"large"}),path:"/house-pricing"},{title:"Handwritten Digit Recognition",description:"Train a neural network to recognize handwritten digits using MNIST dataset",icon:W.jsx(rHe,{fontSize:"large"}),path:"/handwritten-digit"},{title:"Fashion Image Recognition",description:"Use transfer learning with CNN for fashion image classification",icon:W.jsx(iHe,{fontSize:"large"}),path:"/fashion-recognition"}],aHe=()=>W.jsx(Wy,{maxWidth:"lg",sx:{py:4},children:W.jsx("div",{className:"home-page__grid",children:sHe.map(e=>W.jsx(Hl,{elevation:0,sx:{bgcolor:"transparent"},children:W.jsx(bx,{to:e.path,style:{textDecoration:"none"},children:W.jsx(LV,{sx:{height:"100%",transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.02)"}},children:W.jsx(EUe,{sx:{height:"100%"},children:W.jsxs(PV,{children:[W.jsxs(Xt,{display:"flex",alignItems:"center",mb:2,children:[e.icon,W.jsx(mt,{variant:"h5",component:"h2",ml:2,children:e.title})]}),W.jsx(mt,{variant:"body1",color:"text.secondary",children:e.description})]})})})})},e.path))})}),oHe=cd(W.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),lHe="_errorContainer_cq8gi_1",uHe="_errorIcon_cq8gi_10",mue={errorContainer:lHe,errorIcon:uHe};class M1 extends U.Component{constructor(){super(...arguments);jt(this,"state",{hasError:!1,error:null});jt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n;return this.state.hasError?W.jsxs(Xt,{className:mue.errorContainer,children:[W.jsx(oHe,{color:"error",className:mue.errorIcon}),W.jsx(mt,{variant:"h6",color:"error",children:"Something went wrong"}),W.jsx(mt,{color:"text.secondary",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred"}),W.jsx($s,{variant:"contained",onClick:this.handleRetry,children:"Try Again"})]}):this.props.children}}const cHe=cd(W.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),fHe=()=>W.jsxs(Xt,{children:[W.jsxs(Xt,{display:"flex",alignItems:"center",gap:1,mb:2,children:[W.jsx(cHe,{color:"primary"}),W.jsx(mt,{variant:"h5",component:"h2",children:"Introduction"})]}),W.jsx(mt,{paragraph:!0,children:"This exercise demonstrates real-time object detection using the COCO-SSD (Common Objects in Context - Single Shot MultiBox Detector) model in your browser. The model can recognize up to 80 different types of common objects in real-time."}),W.jsxs(mt,{paragraph:!0,children:[W.jsx("strong",{children:"Privacy Note:"})," All processing is done locally in your browser. No images or data are sent to any server. The camera feed is only used for real-time object detection and is not stored or transmitted."]})]}),dHe="_container_1so1u_1",hHe="_video_1so1u_12",pHe="_canvas_1so1u_13",E4={container:dHe,video:hHe,canvas:pHe,"video--hidden":"_video--hidden_1so1u_20"},mHe=({videoRef:e,canvasRef:t,isStarted:n})=>(U.useEffect(()=>{e.current&&(e.current.onloadeddata=()=>{t.current&&e.current&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight)})},[]),W.jsxs(Xt,{className:E4.container,children:[W.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,className:`${E4.video} ${n?"":E4["video--hidden"]}`}),W.jsx("canvas",{ref:t,className:E4.canvas})]})),gue={},yh=({customVariant:e="primary",className:t,variant:n="contained",...r})=>W.jsx($s,{variant:n,className:`${gue.button} ${e&&gue[e]} ${t||""}`,...r}),gHe=({isStarted:e,isClassifying:t,isModelLoaded:n,onStart:r,onStop:i,onClassificationToggle:s})=>W.jsxs(Xt,{display:"flex",gap:2,alignItems:"center",children:[W.jsx(yh,{onClick:e?i:r,customVariant:e?"secondary":"primary",children:e?"Stop Camera":"Start Camera"}),e&&W.jsx(cVe,{control:W.jsx(XWe,{checked:t,onChange:a=>s(a.target.checked),disabled:!n}),label:"Enable Classification"})]});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yHe=1e-7,bHe=1e-4;class lX{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class V6{refCount(t){return Fo("refCount")}incRef(t){return Fo("incRef")}timerAvailable(){return!0}time(t){return Fo("time")}read(t){return Fo("read")}readSync(t){return Fo("readSync")}readToGPU(t,n){return Fo("readToGPU")}numDataIds(){return Fo("numDataIds")}disposeData(t,n){return Fo("disposeData")}write(t,n,r){return Fo("write")}move(t,n,r,i,s){return Fo("move")}createTensorFromGPUData(t,n,r){return Fo("createTensorFromGPUData")}memory(){return Fo("memory")}floatPrecision(){return Fo("floatPrecision")}epsilon(){return this.floatPrecision()===32?yHe:bHe}dispose(){return Fo("dispose")}}function Fo(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,bh(e,t,n)}function W6(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,bh(e,n,r),bh(t,n,r)}function Y0(e,t,n){return Math.max(e,Math.min(t,n))}function H6(e){return e%2===0?e:e+1}function bh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Z2e(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function xHe(e,t){const n=Math.random();return t*n+(1-n)*e}function vHe(e,t){let n=0;for(let r=0;r<e.length;r++){const i=Number(e[r])-Number(t[r]);n+=i*i}return n}function q(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Us(e,t,n=""){q(dn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function Hy(e){q(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function we(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function wHe(e){return e.length===0}function Q2e(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function dn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function oy(e){return e%1===0}function SHe(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function MO(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function CHe(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return uX(t),t}function L1(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function UV(e,t=i=>0,n,r){return new Promise((i,s)=>{let a=0;const o=()=>{if(e()){i();return}a++;const l=t(a);if(n!=null&&a>=n){s();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function cX(e,t){let n=1,r=-1;for(let s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(e[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(e[s]<0)throw Error(`Shapes can not be < 0. Found ${e[s]} at dim ${s}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function rn(e,t){const n=t.length;return e=e==null?t.map((r,i)=>i):[].concat(e),q(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),q(e.every(r=>oy(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function np(e,t){const n=[],r=[],i=t!=null&&Array.isArray(t)&&t.length===0,s=t==null||i?null:rn(t,e).sort();let a=0;for(let o=0;o<e.length;++o){if(s!=null){if(s[a]===o&&e[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(s[a]==null||s[a]>o)&&e[o]===1&&(n.push(e[o]),r.push(o)),s[a]<=o&&a++}e[o]!==1&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function ls(e,t){return ri(e,t)}function ri(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function J2e(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function exe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function fX(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function uE(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function txe(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function kf(e){return typeof e=="string"||e instanceof String}function nxe(e){return typeof e=="boolean"}function LO(e){return typeof e=="number"}function Gy(e){return Array.isArray(e)?Gy(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":LO(e)?"float32":kf(e)?"string":nxe(e)?"bool":"float32"}function K0(e){return!!(e&&e.constructor&&e.call&&e.apply)}function PO(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Ct(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function rxe(e,t,n,r=!1){const i=new Array;if(t.length===1){const s=t[0]*(r?2:1);for(let a=0;a<s;a++)i[a]=n[e+a]}else{const s=t[0],a=t.slice(1),o=a.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<s;l++)i[l]=rxe(e+l*o,a,n,r)}return i}function Ol(e,t,n=!1){if(e.length===0)return t[0];const r=e.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return rxe(0,e,t,n)}function ixe(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function G6(e,t){const n=Bs(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Bs(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function dX(e,t){const n=e.reduce((r,i)=>r*i,1);if(t==null||t==="float32")return Ol(e,new Float32Array(n));if(t==="int32")return Ol(e,new Int32Array(n));if(t==="bool")return Ol(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function dl(e){e.forEach(t=>{q(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function pc(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function qy(e,t,n){if(t===0)return[];if(t===1)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function Z0(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yue="tfjsflags";class sxe{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=$He,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(pe().getBool("IS_TEST")||pe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){const i=this.urlFlags[t];pe().getBool("IS_TEST")||pe().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${i}.`),this.set(t,i)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(Z0(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);yue in t&&t[yue].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=kHe(i,s)})}}function $He(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(EHe(t,r[0],r[1]),r.join("="))),t}function EHe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function kHe(e,t){const n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function pe(){return hX}let hX=null;function AHe(e){hX=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let QB;function axe(){if(QB==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");QB=e}return QB}function _He(){const e=axe();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function pX(e,t){const n=_He();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Uk="Abs",Lv="Acos",Pv="Acosh",Xy="Add",Vk="AddN",q6="All",X6="Any",Wk="ArgMax",Hk="ArgMin",Bv="Asin",zv="Asinh",jv="Atan",Uv="Atanh",Vv="Atan2",Gk="AvgPool",Y6="AvgPoolGrad",qk="AvgPool3D",K6="AvgPool3DGrad",Xk="BatchMatMul",Yk="BatchToSpaceND",Z6="Bincount",Kk="BitwiseAnd",oxe="BroadcastTo",Q6="BroadcastArgs",Wv="Cast",Hv="Ceil",Gv="ClipByValue",J6="Complex",Zk="ComplexAbs",Qk="Concat",Jk="Conv2D",eF="Conv2DBackpropFilter",eA="Conv2DBackpropInput",tA="Conv3D",tF="Conv3DBackpropFilterV2",nF="Conv3DBackpropInputV2",qv="Cos",Xv="Cosh",rF="Cumprod",nA="Cumsum",iF="CropAndResize",sF="DenseBincount",aF="DepthToSpace",rA="DepthwiseConv2dNative",oF="DepthwiseConv2dNativeBackpropFilter",lF="DepthwiseConv2dNativeBackpropInput",uF="Diag",iA="Dilation2D",BO="Dilation2DBackpropInput",zO="Dilation2DBackpropFilter",cF="Draw",Yv="RealDiv",fF="Einsum",Kv="Elu",dF="EluGrad",Zv="Erf",sA="Equal",Qv="Exp",aA="ExpandDims",Jv="Expm1",hF="FFT",pF="Fill",mF="FlipLeftRight",ew="Floor",tw="FloorDiv",oA="FusedBatchNorm",lA="GatherV2",gF="GatherNd",uA="Greater",nw="GreaterEqual",rw="Identity",yF="IFFT",bF="Imag",iw="IsFinite",sw="IsInf",aw="IsNan",cA="LeakyRelu",fA="Less",dA="LessEqual",xF="LinSpace",ow="Log",lw="Log1p",hA="LogicalAnd",pA="LogicalNot",mA="LogicalOr",THe="LogicalXor",lxe="LogSoftmax",NHe="LowerBound",gA="LRN",vF="LRNGrad",DHe="MatrixBandPart",yA="Max",uw="Maximum",bA="MaxPool",wF="MaxPoolGrad",xA="MaxPool3D",SF="MaxPool3DGrad",CF="MaxPoolWithArgmax",vA="Mean",wA="Min",cw="Minimum",SA="MirrorPad",fw="Mod",$F="Multinomial",dw="Multiply",CA="Neg",$A="NotEqual",EF="NonMaxSuppressionV3",kF="NonMaxSuppressionV4",AF="NonMaxSuppressionV5",EA="OnesLike",kA="OneHot",AA="Pack",_A="PadV2",IHe="Pool",hw="Pow",TA="Prelu",NA="Prod",_F="RaggedGather",TF="RaggedRange",NF="RaggedTensorToTensor",DF="Range",IF="Real",pw="Reciprocal",mw="Relu",DA="Reshape",IA="ResizeNearestNeighbor",OF="ResizeNearestNeighborGrad",OA="ResizeBilinear",RF="ResizeBilinearGrad",gw="Relu6",RA="Reverse",yw="Round",bw="Rsqrt",FF="ScatterNd",MF="TensorScatterUpdate",LF="SearchSorted",FA="Select",xw="Selu",MA="Slice",vw="Sin",ww="Sinh",Sw="Sign",Cw="Sigmoid",$w="Softplus",Ew="Sqrt",LA="Sum",PA="SpaceToBatchND",BA="SplitV",zA="Softmax",PF="SparseFillEmptyRows",BF="SparseReshape",zF="SparseSegmentMean",jF="SparseSegmentSum",UF="SparseToDense",kw="SquaredDifference",VF="Square",jA="StaticRegexReplace",WF="StridedSlice",HF="StringNGrams",GF="StringSplit",qF="StringToHashBucketFast",Aw="Sub",_w="Tan",Tw="Tanh",Nw="Tile",XF="TopK",YF="Transform",P1="Transpose",KF="Unique",UA="Unpack",VA="UnsortedSegmentSum",OHe="UpperBound",WA="ZerosLike",Dw="Step",jO="FromPixels",ZF="RotateWithOffset",cE="_FusedMatMul",fE="FusedConv2D",dE="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kl(...e){pe().getBool("IS_TEST")||pe().getBool("PROD")||console.warn(...e)}function RHe(...e){pe().getBool("IS_TEST")||pe().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ax=pX("kernelRegistry",()=>new Map),hE=pX("gradRegistry",()=>new Map);function pE(e,t){const n=mX(e,t);return Ax.get(n)}function VV(e){return hE.get(e)}function UO(e){const t=Ax.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[s,a]=i,[o]=s.split("_");o===e&&n.push(a)}return n}function QF(e){const{kernelName:t,backendName:n}=e,r=mX(t,n);Ax.has(r)&&kl(`The kernel '${t}' for backend '${n}' is already registered`),Ax.set(r,e)}function uxe(e){const{kernelName:t}=e;hE.has(t)&&pe().getBool("DEBUG")&&kl(`Overriding the gradient for '${t}'`),hE.set(t,e)}function FHe(e,t){const n=mX(e,t);if(!Ax.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);Ax.delete(n)}function MHe(e){if(!hE.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);hE.delete(e)}function LHe(e,t){UO(e).forEach(r=>{const i=Object.assign({},r,{backendName:t});QF(i)})}function mX(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var JB,bue;function PHe(){if(bue)return JB;bue=1,JB=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(T,D,L){this.low=T|0,this.high=D|0,this.unsigned=!!L}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function n(T){return(T&&T.__isLong__)===!0}t.isLong=n;var r={},i={};function s(T,D){var L,P,M;return D?(T>>>=0,(M=0<=T&&T<256)&&(P=i[T],P)?P:(L=o(T,(T|0)<0?-1:0,!0),M&&(i[T]=L),L)):(T|=0,(M=-128<=T&&T<128)&&(P=r[T],P)?P:(L=o(T,T<0?-1:0,!1),M&&(r[T]=L),L))}t.fromInt=s;function a(T,D){if(isNaN(T))return D?w:x;if(D){if(T<0)return w;if(T>=m)return k}else{if(T<=-9223372036854776e3)return N;if(T+1>=g)return A}return T<0?a(-T,D).neg():o(T%h|0,T/h|0,D)}t.fromNumber=a;function o(T,D,L){return new t(T,D,L)}t.fromBits=o;var l=Math.pow;function u(T,D,L){if(T.length===0)throw Error("empty string");if(T==="NaN"||T==="Infinity"||T==="+Infinity"||T==="-Infinity")return x;if(typeof D=="number"?(L=D,D=!1):D=!!D,L=L||10,L<2||36<L)throw RangeError("radix");var P;if((P=T.indexOf("-"))>0)throw Error("interior hyphen");if(P===0)return u(T.substring(1),D,L).neg();for(var M=a(l(L,8)),F=x,R=0;R<T.length;R+=8){var j=Math.min(8,T.length-R),H=parseInt(T.substring(R,R+j),L);if(j<8){var G=a(l(L,j));F=F.mul(G).add(a(H))}else F=F.mul(M),F=F.add(a(H))}return F.unsigned=D,F}t.fromString=u;function c(T,D){return typeof T=="number"?a(T,D):typeof T=="string"?u(T,D):o(T.low,T.high,typeof D=="boolean"?D:T.unsigned)}t.fromValue=c;var f=65536,d=1<<24,h=f*f,m=h*h,g=m/2,b=s(d),x=s(0);t.ZERO=x;var w=s(0,!0);t.UZERO=w;var C=s(1);t.ONE=C;var S=s(1,!0);t.UONE=S;var E=s(-1);t.NEG_ONE=E;var A=o(-1,2147483647,!1);t.MAX_VALUE=A;var k=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=k;var N=o(0,-2147483648,!1);t.MIN_VALUE=N;var I=t.prototype;return I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(D){if(D=D||10,D<2||36<D)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(N)){var L=a(D),P=this.div(L),M=P.mul(L).sub(this);return P.toString(D)+M.toInt().toString(D)}else return"-"+this.neg().toString(D);for(var F=a(l(D,6),this.unsigned),R=this,j="";;){var H=R.div(F),G=R.sub(H.mul(F)).toInt()>>>0,z=G.toString(D);if(R=H,R.isZero())return z+j;for(;z.length<6;)z="0"+z;j=""+z+j}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var D=this.high!=0?this.high:this.low,L=31;L>0&&(D&1<<L)==0;L--);return this.high!=0?L+33:L+1},I.isZero=function(){return this.high===0&&this.low===0},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return(this.low&1)===1},I.isEven=function(){return(this.low&1)===0},I.equals=function(D){return n(D)||(D=c(D)),this.unsigned!==D.unsigned&&this.high>>>31===1&&D.high>>>31===1?!1:this.high===D.high&&this.low===D.low},I.eq=I.equals,I.notEquals=function(D){return!this.eq(D)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(D){return this.comp(D)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(D){return this.comp(D)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(D){return this.comp(D)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(D){return this.comp(D)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(D){if(n(D)||(D=c(D)),this.eq(D))return 0;var L=this.isNegative(),P=D.isNegative();return L&&!P?-1:!L&&P?1:this.unsigned?D.high>>>0>this.high>>>0||D.high===this.high&&D.low>>>0>this.low>>>0?-1:1:this.sub(D).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(C)},I.neg=I.negate,I.add=function(D){n(D)||(D=c(D));var L=this.high>>>16,P=this.high&65535,M=this.low>>>16,F=this.low&65535,R=D.high>>>16,j=D.high&65535,H=D.low>>>16,G=D.low&65535,z=0,Y=0,Z=0,Q=0;return Q+=F+G,Z+=Q>>>16,Q&=65535,Z+=M+H,Y+=Z>>>16,Z&=65535,Y+=P+j,z+=Y>>>16,Y&=65535,z+=L+R,z&=65535,o(Z<<16|Q,z<<16|Y,this.unsigned)},I.subtract=function(D){return n(D)||(D=c(D)),this.add(D.neg())},I.sub=I.subtract,I.multiply=function(D){if(this.isZero())return x;if(n(D)||(D=c(D)),e){var L=e.mul(this.low,this.high,D.low,D.high);return o(L,e.get_high(),this.unsigned)}if(D.isZero())return x;if(this.eq(N))return D.isOdd()?N:x;if(D.eq(N))return this.isOdd()?N:x;if(this.isNegative())return D.isNegative()?this.neg().mul(D.neg()):this.neg().mul(D).neg();if(D.isNegative())return this.mul(D.neg()).neg();if(this.lt(b)&&D.lt(b))return a(this.toNumber()*D.toNumber(),this.unsigned);var P=this.high>>>16,M=this.high&65535,F=this.low>>>16,R=this.low&65535,j=D.high>>>16,H=D.high&65535,G=D.low>>>16,z=D.low&65535,Y=0,Z=0,Q=0,se=0;return se+=R*z,Q+=se>>>16,se&=65535,Q+=F*z,Z+=Q>>>16,Q&=65535,Q+=R*G,Z+=Q>>>16,Q&=65535,Z+=M*z,Y+=Z>>>16,Z&=65535,Z+=F*G,Y+=Z>>>16,Z&=65535,Z+=R*H,Y+=Z>>>16,Z&=65535,Y+=P*z+M*G+F*H+R*j,Y&=65535,o(Q<<16|se,Y<<16|Z,this.unsigned)},I.mul=I.multiply,I.divide=function(D){if(n(D)||(D=c(D)),D.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&D.low===-1&&D.high===-1)return this;var L=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,D.low,D.high);return o(L,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w:x;var P,M,F;if(this.unsigned){if(D.unsigned||(D=D.toUnsigned()),D.gt(this))return w;if(D.gt(this.shru(1)))return S;F=w}else{if(this.eq(N)){if(D.eq(C)||D.eq(E))return N;if(D.eq(N))return C;var R=this.shr(1);return P=R.div(D).shl(1),P.eq(x)?D.isNegative()?C:E:(M=this.sub(D.mul(P)),F=P.add(M.div(D)),F)}else if(D.eq(N))return this.unsigned?w:x;if(this.isNegative())return D.isNegative()?this.neg().div(D.neg()):this.neg().div(D).neg();if(D.isNegative())return this.div(D.neg()).neg();F=x}for(M=this;M.gte(D);){P=Math.max(1,Math.floor(M.toNumber()/D.toNumber()));for(var j=Math.ceil(Math.log(P)/Math.LN2),H=j<=48?1:l(2,j-48),G=a(P),z=G.mul(D);z.isNegative()||z.gt(M);)P-=H,G=a(P,this.unsigned),z=G.mul(D);G.isZero()&&(G=C),F=F.add(G),M=M.sub(z)}return F},I.div=I.divide,I.modulo=function(D){if(n(D)||(D=c(D)),e){var L=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,D.low,D.high);return o(L,e.get_high(),this.unsigned)}return this.sub(this.div(D).mul(D))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return o(~this.low,~this.high,this.unsigned)},I.and=function(D){return n(D)||(D=c(D)),o(this.low&D.low,this.high&D.high,this.unsigned)},I.or=function(D){return n(D)||(D=c(D)),o(this.low|D.low,this.high|D.high,this.unsigned)},I.xor=function(D){return n(D)||(D=c(D)),o(this.low^D.low,this.high^D.high,this.unsigned)},I.shiftLeft=function(D){return n(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?o(this.low<<D,this.high<<D|this.low>>>32-D,this.unsigned):o(0,this.low<<D-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(D){return n(D)&&(D=D.toInt()),(D&=63)===0?this:D<32?o(this.low>>>D|this.high<<32-D,this.high>>D,this.unsigned):o(this.high>>D-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(D){if(n(D)&&(D=D.toInt()),D&=63,D===0)return this;var L=this.high;if(D<32){var P=this.low;return o(P>>>D|L<<32-D,L>>>D,this.unsigned)}else return D===32?o(L,0,this.unsigned):o(L>>>D-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},I.toBytes=function(D){return D?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var D=this.high,L=this.low;return[L&255,L>>>8&255,L>>>16&255,L>>>24,D&255,D>>>8&255,D>>>16&255,D>>>24]},I.toBytesBE=function(){var D=this.high,L=this.low;return[D>>>24,D>>>16&255,D>>>8&255,D&255,L>>>24,L>>>16&255,L>>>8&255,L&255]},t.fromBytes=function(D,L,P){return P?t.fromBytesLE(D,L):t.fromBytesBE(D,L)},t.fromBytesLE=function(D,L){return new t(D[0]|D[1]<<8|D[2]<<16|D[3]<<24,D[4]|D[5]<<8|D[6]<<16|D[7]<<24,L)},t.fromBytesBE=function(D,L){return new t(D[4]<<24|D[5]<<16|D[6]<<8|D[7],D[0]<<24|D[1]<<16|D[2]<<8|D[3],L)},JB}var fxe=PHe();const dxe=Am(fxe),BHe=Rbe({__proto__:null,default:dxe},[fxe]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i1=dxe||BHe;function HA(e){return i1.fromString(e,!0,16)}const hxe=HA("c3a5c85c97cb3127"),Qg=HA("b492b66fbe98f273"),Ea=HA("9ae16a3b2f90404f");function WV(e){return e.xor(e.shru(47))}function pxe(e,t,n){const r=e.slice(t,t+n);return i1.fromBytes(Array.from(r),!0,!0)}function Er(e,t){return pxe(e,t,8)}function xue(e,t){return pxe(e,t,4)}function es(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function L0(e,t,n=HA("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function zHe(e,t,n,r,i,s){i=i.add(e),s=es(s.add(i).add(r),21);const a=i;return i=i.add(t),i=i.add(n),s=s.add(es(i,44)),[i.add(r),s.add(a)]}function k4(e,t,n,r){return zHe(Er(e,t),Er(e,t+8),Er(e,t+16),Er(e,t+24),n,r)}function jHe(e,t=e.length){if(t>=8){const n=Ea.add(t*2),r=Er(e,0).add(Ea),i=Er(e,t-8),s=es(i,37).mul(n).add(r),a=es(r,25).add(i).mul(n);return L0(s,a,n)}if(t>=4){const n=Ea.add(t*2),r=xue(e,0);return L0(r.shl(3).add(t),xue(e,t-4),n)}if(t>0){const n=e[0],r=e[t>>1],i=e[t-1],s=n+(r<<8),a=t+(i<<2);return WV(Ea.mul(s).xor(hxe.mul(a))).mul(Ea)}return Ea}function UHe(e,t=e.length){const n=Ea.add(t*2),r=Er(e,0).mul(Qg),i=Er(e,8),s=Er(e,t-8).mul(n),a=Er(e,t-16).mul(Ea);return L0(es(r.add(i),43).add(es(s,30)).add(a),r.add(es(i.add(Ea),18)).add(s),n)}function VHe(e,t=e.length){const n=Ea.add(t*2),r=Er(e,0).mul(Ea),i=Er(e,8),s=Er(e,t-8).mul(n),a=Er(e,t-16).mul(Ea),o=es(r.add(i),43).add(es(s,30)).add(a),l=L0(o,r.add(es(i.add(Ea),18)).add(s),n),u=Er(e,16).mul(n),c=Er(e,24),f=o.add(Er(e,t-32)).mul(n),d=l.add(Er(e,t-24)).mul(n);return L0(es(u.add(c),43).add(es(f,30)).add(d),u.add(es(c.add(r),18)).add(f),n)}function mxe(e,t=e.length){const n=i1.fromNumber(81,!0);if(t<=32)return t<=16?jHe(e,t):UHe(e,t);if(t<=64)return VHe(e,t);let r=n,i=n.mul(Qg).add(113),s=WV(i.mul(Ea).add(113)).mul(Ea),a=[i1.UZERO,i1.UZERO],o=[i1.UZERO,i1.UZERO];r=r.mul(Ea).add(Er(e,0));let l=0;const u=(t-1>>6)*64,c=u+(t-1&63)-63;do r=es(r.add(i).add(a[0]).add(Er(e,l+8)),37).mul(Qg),i=es(i.add(a[1]).add(Er(e,l+48)),42).mul(Qg),r=r.xor(o[1]),i=i.add(a[0]).add(Er(e,l+40)),s=es(s.add(o[0]),33).mul(Qg),a=k4(e,l,a[1].mul(Qg),r.add(o[0])),o=k4(e,l+32,s.add(o[1]),i.add(Er(e,l+16))),[s,r]=[r,s],l+=64;while(l!==u);const f=Qg.add(s.and(255).shl(1));return l=c,o[0]=o[0].add(t-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=es(r.add(i).add(a[0]).add(Er(e,l+8)),37).mul(f),i=es(i.add(a[1]).add(Er(e,l+48)),42).mul(f),r=r.xor(o[1].mul(9)),i=i.add(a[0].mul(9).add(Er(e,l+40))),s=es(s.add(o[0]),33).mul(f),a=k4(e,l,a[1].mul(f),r.add(o[0])),o=k4(e,l+32,s.add(o[1]),i.add(Er(e,l+16))),[s,r]=[r,s],L0(L0(a[0],o[0],f).add(WV(i).mul(hxe)).add(s),L0(a[1],o[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rp(e,t){return t==="string"?Df(e):Dm([e],t)}function WHe(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Dm(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Hf(e)),pe().getBool("DEBUG")&&J2e(e,t),WHe(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Sa(){return pe().platform.now()}function HHe(e,t){return pe().platform.fetch(e,t)}function Df(e,t="utf-8"){return t=t||"utf-8",pe().platform.encode(e,t)}function Vh(e,t="utf-8"){return t=t||"utf-8",pe().platform.decode(e,t)}function ts(e){return pe().platform.isTypedArray!=null?pe().platform.isTypedArray(e):cxe(e)}function Hf(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Z0(e)||e==null||ts(e)&&n)t.push(e);else if(Array.isArray(e)||ts(e))for(let r=0;r<e.length;++r)Hf(e[r],t,n);else{let r=-1;for(const i of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Hf(e[i],t,n)}return t}const GHe=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:dn,arraysEqualWithNull:Q2e,assert:q,assertNonNegativeIntegerDimensions:dl,assertNonNull:Hy,assertShapesMatch:Us,bytesFromStringArray:txe,bytesPerElement:uE,checkConversionForErrors:J2e,clamp:Y0,computeStrides:Ct,convertBackendValuesAndArrayBuffer:ixe,createScalarValue:rp,createShuffledIndices:CHe,decodeString:Vh,distSquared:vHe,encodeString:Df,fetch:HHe,fingerPrint64:mxe,flatten:Hf,getArrayFromDType:ri,getTypedArrayFromDType:ls,hasEncodingLoss:fX,hexToLong:HA,indexToLoc:qy,inferDtype:Gy,inferFromImplicitShape:cX,isBoolean:nxe,isFunction:K0,isInt:oy,isNumber:LO,isPromise:Z0,isScalarShape:wHe,isString:kf,isTypedArray:ts,isValidDtype:exe,locToIndex:pc,makeOnesTypedArray:G6,makeZerosNestedTypedArray:dX,makeZerosTypedArray:Bs,nearestDivisor:PO,nearestLargerEven:H6,now:Sa,parseAxisParam:rn,randUniform:xHe,repeatedTry:UV,rightPad:L1,shuffle:uX,shuffleCombo:W6,sizeFromShape:we,sizeToSquarishShape:MO,squeezeShape:np,sum:Z2e,swap:bh,tanh:SHe,toNestedArray:Ol,toTypedArray:Dm},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qHe{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new YHe)}profileKernel(t,n,r){let i;const s=()=>{i=r()};let a;const o=Sa();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(s);else{s();for(const u of i)u.dataSync();a=Promise.resolve({kernelMs:Sa()-o})}if(pe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const c=i[u];c.data().then(f=>{XHe(f,c.dtype,t)})}return{kernelName:t,outputs:i,inputs:n,timeMs:a.then(u=>u.kernelMs),extraInfo:a.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:a}=t;r.forEach(o=>{Promise.all([o.data(),i,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],s,l[2])})})}}function XHe(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){const i=e[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class YHe{logKernelProfile(t,n,r,i,s,a){const o=typeof i=="number"?L1(`${i}ms`,9):i.error,l=L1(t,25),u=n.rank,c=n.size,f=L1(n.shape.toString(),14);let d="";for(const h in s){const m=s[h];if(m!=null){const g=m.shape||n.shape,b=g.length;d+=`${h}: ${b}D ${b>0?g:""} `}}console.log(`%c${l}	%c${o}	%c${u}D ${f}	%c${c}	%c${d}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(e,t,n){const r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const u=e[l],c=u.inputs;for(const f in c){const d=c[f];let h=!1;for(let m=0;m<t.length;m++)if(r[d.id]){u.outputs.forEach(g=>r[g.id]=!0),h=!0,i[u.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const u=e[l],c=u.inputs;for(let f=0;f<u.outputs.length;f++)if(s[u.outputs[f].id]){for(const d in c)s[c[d].id]=!0,a[u.id]=!0;break}}const o=[];for(let l=0;l<e.length;l++){const u=e[l];if(i[u.id]&&a[u.id]){const c={};for(const d in u.inputs){const h=u.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},u);f.inputs=c,f.outputs=u.outputs,o.push(f)}}return o}function ZHe(e,t,n,r){for(let i=t.length-1;i>=0;i--){const s=t[i],a=[];if(s.outputs.forEach(l=>{const u=e[l.id];u!=null?a.push(u):a.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(a);for(const l in s.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const u=n(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=s.inputs[l];if(!dn(u.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{const f=e[c.id];e[c.id]=r(f,u),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vue=20,t3=3,ez=7;function QHe(e,t,n,r){const i=Ct(t),s=JHe(e,t,n,i),a=t.length,o=AI(e,t,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function JHe(e,t,n,r){const i=we(t),s=r[r.length-1],a=new Array(s).fill(0),o=t.length,l=n==="complex64"?U3(e):e;if(o>1)for(let u=0;u<i/s;u++){const c=u*s;for(let f=0;f<s;f++)a[f]=Math.max(a[f],j3(l[c+f],0,n).length)}return a}function j3(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(ez))} + ${parseFloat(e[1].toFixed(ez))}j`:kf(e)?r=`'${e}'`:n==="bool"?r=gxe(e):r=parseFloat(e.toFixed(ez)).toString(),L1(r,t)}function gxe(e){return e===0?"false":"true"}function AI(e,t,n,r,i,s=!0){const a=n==="complex64"?2:1,o=t[0],l=t.length;if(l===0){if(n==="complex64"){const g=U3(e);return[j3(g[0],0,n)]}return n==="bool"?[gxe(e[0])]:[e[0].toString()]}if(l===1){if(o>vue){const b=t3*a;let x=Array.from(e.slice(0,b)),w=Array.from(e.slice((o-t3)*a,o*a));return n==="complex64"&&(x=U3(x),w=U3(w)),["["+x.map((C,S)=>j3(C,i[S],n)).join(", ")+", ..., "+w.map((C,S)=>j3(C,i[o-t3+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?U3(e):Array.from(e)).map((b,x)=>j3(b,i[x],n)).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),f=r[0]*a,d=[];if(o>vue){for(let g=0;g<t3;g++){const b=g*f,x=b+f;d.push(...AI(e.slice(b,x),u,n,c,i,!1))}d.push("...");for(let g=o-t3;g<o;g++){const b=g*f,x=b+f;d.push(...AI(e.slice(b,x),u,n,c,i,g===o-1))}}else for(let g=0;g<o;g++){const b=g*f,x=b+f;d.push(...AI(e.slice(b,x),u,n,c,i,g===o-1))}const h=l===2?",":"";d[0]="["+(o>0?d[0]+h:"");for(let g=1;g<d.length-1;g++)d[g]=" "+d[g]+h;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":m),d}function U3(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ni{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=we(t),r!=null){const i=r.length;q(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ri(n,this.size),this.strides=Ct(t)}set(t,...n){n.length===0&&(n=[0]),q(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const i of t){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=this.strides[i]*t[i];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return rc().makeTensor(this.values,this.shape,this.dtype)}}let rc=null,V2=null;function eGe(e){rc=e}function tGe(e){V2=e}class Wn{constructor(t,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=we(t),this.strides=Ct(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return V2.buffer(this.shape,this.dtype,t)}bufferSync(){return V2.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Ol(this.shape,t,this.dtype==="complex64")}arraySync(){return Ol(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=rc().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(r=>Vh(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),rc().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=rc().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Vh(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await rc().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),rc().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return V2.print(this,t)}clone(){return this.throwIfDisposed(),V2.clone(this)}toString(t=!1){const n=this.dataSync();return QHe(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),V2.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),rc().makeVariable(this,t,n,r)}}Object.defineProperty(Wn,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function Se(){return pX("Tensor",()=>Wn)}Se();class mE extends Wn{constructor(t,n,r,i){super(t.shape,t.dtype,t.dataId,i),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!dn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);rc().disposeTensor(this),this.dataId=t.dataId,rc().incRef(this,null)}dispose(){rc().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(mE,Symbol.hasInstance,{value:e=>e instanceof Wn&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var HV;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(HV||(HV={}));var GV;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(GV||(GV={}));var qV;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(qV||(qV={}));var XV;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(XV||(XV={}));var YV;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(YV||(YV={}));const nGe={float32:XV,int32:GV,bool:qV,complex64:YV};function yo(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return nGe[e][t]}function JF(e){return yo(e,"int32")}function yxe(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function bxe(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jr(e,t){if(e.dtype===t.dtype)return[e,t];const n=yo(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function xxe(e,t){q(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function rGe(e,t){return t.some(n=>n.id===e.id)}function gX(e){const t=[];return vxe(e,t,new Set),t}function vxe(e,t,n){if(e==null)return;if(e instanceof Wn){t.push(e);return}if(!iGe(e))return;const r=e;for(const i in r){const s=r[i];n.has(s)||(n.add(s),vxe(s,t,n))}}function iGe(e){return Array.isArray(e)||typeof e=="object"}const sGe=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:xxe,getTensorsInContainer:gX,isTensorInList:rGe,makeTypesMatch:Jr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tz(e){return e.kernelName!=null}class wue{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class _x{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new wue}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(kl(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new qHe(this.backendInstance),!0}setupRegisteredKernels(){UO(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){UO(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof V6)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(a=>i<this.pendingBackendInitId?!1:(this.registry[t]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,kl(`Initialization of backend ${t} failed`),kl(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return kl(`Initialization of backend ${t} failed`),kl(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),a=i.refCount(n);i.disposeData(n,!0),r.backend=t,t.move(n,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(t,n,r){t();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return _x.nextTensorId++}nextVariableId(){return _x.nextVariableId++}clone(t){const n=ee.runKernel(rw,{x:t}),r={x:t},i=a=>({x:()=>{const o="float32",l={x:a},u={dtype:o};return ee.runKernel(Wv,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,!(pE(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-s-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const u=tz(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(tz(t)){const{kernelName:m,inputs:g,attrs:b}=t;this.backendName==null&&this.backend;const x=pE(m,this.backendName);q(x!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),o=()=>{const w=this.backend.numDataIds();l=x.kernelFunc({inputs:g,attrs:b,backend:this.backend});const C=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,w,C);const S=C.map(E=>E.rank!=null?E:this.makeTensorFromTensorInfo(E));if(i){const E=this.getTensorsForGradient(m,g,S);r=this.saveTensorsForBackwardMode(E)}return S}}else{const{forwardFunc:m}=t,g=b=>{i&&(r=b.map(x=>this.keep(this.clone(x))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,g));const x=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,b,x),x}}const{inputs:c,attrs:f}=t,d=tz(t)?null:t.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(u,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(u,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,n,r){const i=VV(t);if(i!=null){const s=i.inputsToSave||[],a=i.outputsToSave||[];let o;i.saveAllInputs?(q(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(u=>n[u])):o=s.map(u=>n[u]);const l=r.filter((u,c)=>a[c]);return o.concat(l)}return[]}makeTensor(t,n,r,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=t;r==="string"&&kf(t[0])&&(s=t.map(l=>Df(l)));const a=i.write(s,n,r),o=new Wn(n,r,a,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(a),u=txe(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return o}makeTensorFromDataId(t,n,r,i){r=r||"float32";const s={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(t,n){const{dataId:r,shape:i,dtype:s}=t,a=new Wn(i,s,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(t,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.cast(i));const s=new mE(t,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*uE(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof mE||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const r=t.size*uE(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,i,s,a){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:s},l=VV(t);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=u=>(u=u.map((c,f)=>{if(c==null){const d=r[f],h=Bs(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=gX(t),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(t,n,r,i=!1){if(q(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));q(s instanceof Wn,()=>"The result y returned by f() must be a tensor.");const a=KHe(this.state.activeTape,n,s);if(!i&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[s.id]=r??aGe(s.shape),ZHe(o,a,u=>this.tidy(u),oGe);const l=n.map(u=>o[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(t){return q(K0(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{q(n.every(o=>o instanceof Wn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((o,l)=>{i[l]=o});const s=(o,l)=>(r=t(...n,l),q(r.value instanceof Wn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),q(K0(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const u=r.gradFunc(o,l),c=Array.isArray(u)?u:[u];q(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),q(c.every(d=>d instanceof Wn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Sa(),r=await this.backend.time(t);return r.wallMs=Sa()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new wue;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}_x.nextTensorId=0;_x.nextVariableId=0;function aGe(e){const t=G6(we(e),"float32");return ee.makeTensor(t,e,"float32")}function wxe(){const e=axe();if(e._tfengine==null){const t=new sxe(e);e._tfengine=new _x(t)}return AHe(e._tfengine.ENV),eGe(()=>e._tfengine),e._tfengine}const ee=wxe();function oGe(e,t){const n={a:e,b:t};return ee.runKernel(Xy,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lGe(){return typeof navigator<"u"&&navigator!=null}let KV;function uGe(e){KV=e}function yX(e){if(KV!==void 0)return KV;if(e||lGe()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function bX(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const cGe=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:bX,isMobile:yX,mockIsMobile:uGe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bo=pe();bo.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});bo.registerFlag("IS_BROWSER",()=>bX());bo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");bo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));bo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));bo.registerFlag("PROD",()=>!1);bo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>bo.getBool("DEBUG"));bo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);bo.registerFlag("IS_TEST",()=>!1);bo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>bo.getBool("DEBUG"));bo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);bo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);bo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gf(e,t){let n=e;if(ts(e))return t==="string"?[]:[e.length];if(yxe(e)){const i=e.channels||"RGBA";return[e.height,e.width*i.length]}else if(bxe(e))return[e.buffer.size/(t==null?4:uE(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||ts(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&pe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Sxe(e,r,[]),r}function Sxe(e,t,n){if(n=n||[],!Array.isArray(e)&&!ts(e)){q(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}q(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),q(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let i=0;i<e.length;++i)Sxe(e[i],r,n.concat(i))}function Sue(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function X(e,t,n,r="numeric"){if(e instanceof Se())return Sue(r,e.dtype,t,n),e;let i=Gy(e);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Sue(r,i,t,n),e==null||!ts(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=Gf(e,i);!ts(e)&&!Array.isArray(e)&&(e=[e]);const o=i!=="string"?Dm(e,i):Hf(e,[],!0);return ee.makeTensor(o,s,i)}function gE(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((s,a)=>X(s,`${t}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xX="__op";function te(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+xX;const i=(...s)=>{ee.startScope(n);try{const a=r(...s);return Z0(a)&&console.error("Cannot return a Promise inside of tidy."),ee.endScope(a),a}catch(a){throw ee.endScope(null),a}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fGe(e,t){const n=X(e,"real","complex"),r=X(t,"imag","complex");Us(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return ee.runKernel(J6,i)}const Wh=te({complex_:fGe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Im(e,t,n,r){if(r==null)r=Gy(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(bxe(e)||yxe(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ee.backend.createTensorFromGPUData(e,t||n,r)}if(!ts(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){dl(t);const i=we(t),s=we(n);q(i===s,()=>`Based on the provided shape, [${t}], the tensor should have ${i} values but has ${s}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==we(t.slice(a)):!0;q(n[a]===t[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!ts(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?Dm(e,r):Hf(e,[],!0),ee.makeTensor(e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $u(e,t,n){const r=Gf(e,n);return Im(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ly={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Tc{static join(t){return new Tc(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>ts(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){const i=t[r];r!==t.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);const r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);const i=n-t,s=new ArrayBuffer(i),a=new Uint8Array(s);let o=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],f=t+o-u.start,d=o,m=Math.min(n,u.end)-u.start,g=new Uint8Array(u.buffer,f,m-f);if(a.set(g,d),o+=g.length,n<u.end)break}return s}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(i){return t<i.start?-1:t>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=dGe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function dGe(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=t(e[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hGe(){pe().set("PROD",!0)}function pGe(){pe().set("DEBUG",!0)}function mGe(){pe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function gGe(e){pe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function yGe(){ee.disposeVariables()}function Cs(){return ee}function ZV(){return ee.memory()}function bGe(e){return ee.profile(e)}function he(e,t){return ee.tidy(e,t)}function Jt(e){gX(e).forEach(n=>n.dispose())}function zi(e){return ee.keep(e)}function xGe(e){return ee.time(e)}function Cxe(e){return ee.setBackend(e)}function $xe(){return ee.ready()}function Exe(){return ee.backendName}function vGe(e){ee.removeBackend(e)}function wGe(e){return ee.findBackend(e)}function SGe(e){return ee.findBackendFactory(e)}function vX(e,t,n=1){return ee.registerBackend(e,t,n)}function wX(){return ee.backend}function CGe(e,t){pe().setPlatform(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q0=4;async function QV(e,t){const n=[],r=[],i=Array.isArray(e)?e.map(a=>a.name):Object.keys(e);for(let a=0;a<i.length;++a){const o=i[a],l=Array.isArray(e)?e[a].tensor:e[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async f=>{const d=await l.bytes(),h=d.reduce((b,x)=>b+x.length,0)+Q0*d.length,m=new Uint8Array(h);let g=0;for(let b=0;b<d.length;b++){const x=d[b],w=new Uint8Array(new Uint32Array([x.length]).buffer);m.set(w,g),g+=Q0,m.set(x,g),g+=x.length}f(m)});r.push(c)}else r.push(l.data());t!=null&&(u.group=t),n.push(u)}const s=await Promise.all(r);return{data:kGe(s),specs:n}}function kxe(e,t){const n=new Tc(e),r={};let i=0;for(const s of t){const a=$Ge(s,(o,l)=>n.slice(i+o,i+l));r[s.name]=Axe(s,n.slice(i,i+a)),i+=a}return r}function $Ge(e,t){const n=we(e.shape);let r;if("quantization"in e){const i=e.quantization;r=ly[i.dtype]}else if(e.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=Q0+new Uint32Array(t(i,i+Q0))[0];return i}else r=ly[e.dtype];return n*r}async function EGe(e,t){const n=we(e.shape);let r;if("quantization"in e){const i=e.quantization;r=ly[i.dtype]}else if(e.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=Q0+new Uint32Array(await t(i,i+Q0))[0];return i}else r=ly[e.dtype];return n*r}function Axe(e,t){const n=e.name,r=e.dtype,i=e.shape,s=we(i);let a,o=0;if("quantization"in e){const l=e.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${e.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${e.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${e.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=ly[l.dtype],c=l.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){a=new Float32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];a[f]=d*l.scale+l.min}}else if(l.dtype==="float16")a=IGe()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);a=new Int32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];a[f]=Math.round(d*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=s*u}else if(r==="string"){const l=we(e.shape);a=[];for(let u=0;u<l;u++){const c=new Uint32Array(t.slice(o,o+Q0))[0];o+=Q0;const f=new Uint8Array(t.slice(o,o+c));a.push(f),o+=c}}else{const l=ly[r];if(r==="float32")a=new Float32Array(t);else if(r==="int32")a=new Int32Array(t);else if(r==="bool")a=new Uint8Array(t);else if(r==="complex64"){a=new Float32Array(t);const u=new Float32Array(a.length/2),c=new Float32Array(a.length/2);for(let m=0;m<u.length;m++)u[m]=a[m*2],c[m]=a[m*2+1];const f=$u(u,i,"float32"),d=$u(c,i,"float32"),h=Wh(f,d);return f.dispose(),d.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=s*l}return $u(a,i,r)}async function Cue(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:i,value:s}=await e.read();if(i&&s==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const a=new Uint8Array(r.length+s.byteLength);a.set(r,0),a.set(new Uint8Array(s),r.length),r=a}return r.buffer}async function _xe(e,t){const n={},r=e.getReader();let i=new ArrayBuffer(0);for(const s of t){const a=await EGe(s,async(u,c)=>(i=await Cue(r,i,c),i.slice(u,c)));i=await Cue(r,i,a);const o=i.slice(0,a);i=i.slice(a);const l=Axe(s,o);if(n[s.name]=l,Exe()==="webgpu"){const u=wX();"uploadToGPU"in u&&we(l.shape)>=pe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function kGe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(s=>{if(t+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(t);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const SX=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function $ue(e){return SX?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function AGe(e){if(SX)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function _Ge(e){if(SX){const r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function Txe(e){return Tc.join(e)}function Eue(e){const t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);const n=e.split(t);return n[n.length-1]}function Nxe(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function CX(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function $X(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),CX(e,n,r)}function GA(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:$ue(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:$ue(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Tc(e.weightData).byteLength}}function VO(e){const t=[];for(const n of e)t.push(...n.weights);return t}function TGe(){const e=n=>{let r=n<<13,i=0;for(;(r&8388608)===0;)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function NGe(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function DGe(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function IGe(){const e=TGe(),t=NGe(),n=DGe();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let a=0;a<r.length;a++){const o=r[a],l=e[n[o>>10]+(o&1023)]+t[o>>10];s[a]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Xr.instance==null&&(Xr.instance=new Xr),Xr.instance}static registerSaveRouter(t){Xr.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Xr.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Xr.getHandlers(t,"save")}static getLoadHandlers(t,n){return Xr.getHandlers(t,"load",n)}static getHandlers(t,n,r){const i=[];return(n==="load"?Xr.getInstance().loadRouters:Xr.getInstance().saveRouters).forEach(a=>{const o=a(t,r);o!==null&&i.push(o)}),i}}const OGe=e=>Xr.registerSaveRouter(e),RGe=e=>Xr.registerLoadRouter(e),Dxe=e=>Xr.getSaveHandlers(e),FGe=(e,t)=>Xr.getLoadHandlers(e,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV="tensorflowjs",eW=1,S1="models_store",w0="model_info_store";function Ixe(){if(!pe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function tW(e){const t=e.result;t.createObjectStore(S1,{keyPath:"modelPath"}),t.createObjectStore(w0,{keyPath:"modelPath"})}class uy{constructor(t){if(this.indexedDB=Ixe(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((r,i)=>{const s=this.indexedDB.open(JV,eW);s.onupgradeneeded=()=>tW(s),s.onsuccess=()=>{const a=s.result;if(n==null){const o=a.transaction(S1,"readonly"),u=o.objectStore(S1).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(a.close(),i(u.error)),o.oncomplete=()=>a.close()}else{n.weightData=Tc.join(n.weightData);const o=GA(n),l=a.transaction(w0,"readwrite");let u=l.objectStore(w0),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return i(d)}let f;c.onsuccess=()=>{f=a.transaction(S1,"readwrite");const d=f.objectStore(S1);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(m){return i(m)}h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=m=>{u=l.objectStore(w0);const g=u.delete(this.modelPath);g.onsuccess=()=>(a.close(),i(h.error)),g.onerror=b=>(a.close(),i(h.error))}},c.onerror=d=>(a.close(),i(c.error)),l.oncomplete=()=>{f==null?a.close():f.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}uy.URL_SCHEME="indexeddb://";const Oxe=e=>pe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(uy.URL_SCHEME)?MGe(e.slice(uy.URL_SCHEME.length)):null;Xr.registerSaveRouter(Oxe);Xr.registerLoadRouter(Oxe);function MGe(e){return new uy(e)}function LGe(e){return e.startsWith(uy.URL_SCHEME)?e.slice(uy.URL_SCHEME.length):e}class PGe{constructor(){this.indexedDB=Ixe()}async listModels(){return new Promise((t,n)=>{const r=this.indexedDB.open(JV,eW);r.onupgradeneeded=()=>tW(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(w0,"readonly"),o=s.objectStore(w0).getAll();o.onsuccess=()=>{const l={};for(const u of o.result)l[u.modelPath]=u.modelArtifactsInfo;t(l)},o.onerror=l=>(i.close(),n(o.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(t){return t=LGe(t),new Promise((n,r)=>{const i=this.indexedDB.open(JV,eW);i.onupgradeneeded=()=>tW(i),i.onsuccess=()=>{const s=i.result,a=s.transaction(w0,"readwrite"),o=a.objectStore(w0),l=o.get(t);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const c=o.delete(t),f=()=>{u=s.transaction(S1,"readwrite");const h=u.objectStore(S1).delete(t);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=m=>r(l.error)};c.onsuccess=f,c.onerror=d=>(f(),s.close(),r(l.error))}},l.onerror=c=>(s.close(),r(l.error)),a.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xh="/",W2="tensorflowjs_models",Rxe="info",BGe="model_topology",zGe="weight_specs",jGe="weight_data",UGe="model_metadata";function Fxe(e){return{info:[W2,e,Rxe].join(xh),topology:[W2,e,BGe].join(xh),weightSpecs:[W2,e,zGe].join(xh),weightData:[W2,e,jGe].join(xh),modelMetadata:[W2,e,UGe].join(xh)}}function Mxe(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function VGe(e){const t=e.split(xh);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(xh)}function WGe(e){return e.startsWith(cy.URL_SCHEME)?e.slice(cy.URL_SCHEME.length):e}class cy{constructor(t){if(!pe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Fxe(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=GA(t),s=Tc.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,AGe(s));const a={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw Mxe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const o=JSON.parse(s);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=_Ge(a),n}}cy.URL_SCHEME="localstorage://";const Lxe=e=>pe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(cy.URL_SCHEME)?HGe(e.slice(cy.URL_SCHEME.length)):null;Xr.registerSaveRouter(Lxe);Xr.registerLoadRouter(Lxe);function HGe(e){return new cy(e)}class GGe{constructor(){q(pe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),q(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=W2+xh,r=xh+Rxe;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const a=VGe(s);t[a]=JSON.parse(this.LS.getItem(s))}}return t}async removeModel(t){t=WGe(t);const n=Fxe(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return Mxe(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ix="://";class Ca{constructor(){this.managers={}}static getInstance(){return Ca.instance==null&&(Ca.instance=new Ca),Ca.instance}static registerManager(t,n){q(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(ix)&&(t=t.slice(0,t.indexOf(ix))),q(t.length>0,()=>"scheme must not be an empty string.");const r=Ca.getInstance();q(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){const n=Ca.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(Ca.getInstance().managers)}}function _I(e){if(e.indexOf(ix)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ca.getSchemes().join(",")}`);return{scheme:e.split(ix)[0],path:e.split(ix)[1]}}async function Pxe(e,t,n=!1){q(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=Xr.getLoadHandlers(e);q(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),q(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);const i=r[0],s=Xr.getSaveHandlers(t);q(s.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),q(s.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const a=s[0],o=_I(e).scheme,l=_I(e).path,u=o===_I(e).scheme,c=await i.load();n&&u&&await Ca.getManager(o).removeModel(l);const f=await a.save(c);return n&&!u&&await Ca.getManager(o).removeModel(l),f.modelArtifactsInfo}async function qGe(){const e=Ca.getSchemes(),t={};for(const n of e){const r=await Ca.getManager(n).listModels();for(const i in r){const s=n+ix+i;t[s]=r[i]}}return t}async function XGe(e){const t=_I(e);return Ca.getManager(t.scheme).removeModel(t.path)}async function YGe(e,t){return Pxe(e,t,!1)}async function KGe(e,t){return Pxe(e,t,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZGe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!pe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return cxe(t)}}if(pe().get("IS_BROWSER")){pe().setPlatform("browser",new ZGe);try{Ca.registerManager(cy.URL_SCHEME,new GGe)}catch{}try{Ca.registerManager(uy.URL_SCHEME,new PGe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QGe={importFetch:()=>require("node-fetch")};let nz;class JGe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return pe().global.fetch!=null?pe().global.fetch(t,n):(nz==null&&(nz=QGe.importFetch()),nz(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}pe().get("IS_NODE")&&!pe().get("IS_BROWSER")&&pe().setPlatform("node",new JGe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zt(e,t="float32",n){return t=t||"float32",dl(e),new Ni(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eqe(e,t){const n=X(e,"x","cast");if(!exe(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return ee.runKernel(Wv,r,i)}const qe=te({cast_:eqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tqe(e){const n={x:X(e,"x","clone","string_or_numeric")};return ee.runKernel(rw,n)}const If=te({clone_:tqe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */wxe();const nqe={buffer:Zt,cast:qe,clone:If,print:EX};tGe(nqe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rqe(e,t){let n=X(e,"a","add"),r=X(t,"b","add");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(Xy,i)}const Me=te({add_:rqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iqe(e,t){let n=X(e,"a","floorDiv"),r=X(t,"b","floorDiv");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(tw,i)}const eM=te({floorDiv_:iqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sqe(e,t){let n=X(e,"a","div"),r=X(t,"b","div");if([n,r]=Jr(n,r),n.dtype==="int32"&&r.dtype==="int32")return eM(n,r);const i={a:n,b:r},s={};return ee.runKernel(Yv,i,s)}const ct=te({div_:sqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aqe(e,t){let n=X(e,"a","mul"),r=X(t,"b","mul");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(dw,i)}const ie=te({mul_:aqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oqe(e){const t=X(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return ee.runKernel(Zk,n)}else{const n={x:t};return ee.runKernel(Uk,n)}}const $i=te({abs_:oqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lqe(e){const n={x:X(e,"x","acos")};return ee.runKernel(Lv,n)}const kX=te({acos_:lqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uqe(e){const n={x:X(e,"x","acosh")};return ee.runKernel(Pv,n)}const AX=te({acosh_:uqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cqe(e){q(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),q(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);const t=e.map((i,s)=>X(i,`tensors${s}`,"addN")),n=t[0];t.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(i=>{if(!dn(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return ee.runKernel(Vk,r)}const Bxe=te({addN_:cqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fqe(e,t=null,n=!1){const i={x:X(e,"x","all","bool")},s={axis:t,keepDims:n};return ee.runKernel(q6,i,s)}const tM=te({all_:fqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dqe(e,t=null,n=!1){const i={x:X(e,"x","any","bool")},s={axis:t,keepDims:n};return ee.runKernel(X6,i,s)}const yE=te({any_:dqe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hqe(e,t=0){const r={x:X(e,"x","argMax")},i={axis:t};return ee.runKernel(Wk,r,i)}const fy=te({argMax_:hqe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pqe(e,t=0){const r={x:X(e,"x","argMin")},i={axis:t};return ee.runKernel(Hk,r,i)}const _X=te({argMin_:pqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mqe(e){const n={x:X(e,"x","asin")};return ee.runKernel(Bv,n)}const TX=te({asin_:mqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gqe(e){const n={x:X(e,"x","asinh")};return ee.runKernel(zv,n)}const NX=te({asinh_:gqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yqe(e){const n={x:X(e,"x","atan")};return ee.runKernel(jv,n)}const DX=te({atan_:yqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bqe(e,t){let n=X(e,"a","atan2"),r=X(t,"b","atan2");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(Vv,i)}const IX=te({atan2_:bqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xqe(e){const n={x:X(e,"x","atanh")};return ee.runKernel(Uv,n)}const OX=te({atanh_:xqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qA(e,t,n,r,i="NHWC",s){const a=e[3],o=[...t,a],l=sp(i);return fs(e,o,n,s,r,null,null,l)}function Pu(e,t,n,r,i,s,a="channelsLast"){const[o,l]=bE(t);let u;if(a==="channelsLast")u=[o,l,e[3],e[3]];else if(a==="channelsFirst")u=[o,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return fs(e,u,n,r,i,s,!1,a)}function ip(e,t,n,r,i,s,a="NDHWC"){const[o,l,u]=nW(t);let c,f;if(a==="NDHWC")f="channelsLast",c=[o,l,u,e[4],e[4]];else if(a==="NCDHW")f="channelsFirst",c=[o,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return Om(e,c,n,r,i,!1,f,s)}function fs(e,t,n,r,i,s,a=!1,o="channelsLast"){let[l,u,c,f]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,f]=e;else if(o==="channelsFirst")[l,f,u,c]=e;else throw new Error(`Unknown dataFormat ${o}`);const[d,h,,m]=t,[g,b]=bE(n),[x,w]=bE(r),C=sx(d,x),S=sx(h,w),{padInfo:E,outHeight:A,outWidth:k}=Sqe(i,u,c,g,b,C,S,s,o),N=a?m*f:m;let I;return o==="channelsFirst"?I=[l,N,A,k]:o==="channelsLast"&&(I=[l,A,k,N]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:c,inChannels:f,outHeight:A,outWidth:k,outChannels:N,padInfo:E,strideHeight:g,strideWidth:b,filterHeight:d,filterWidth:h,effectiveFilterHeight:C,effectiveFilterWidth:S,dilationHeight:x,dilationWidth:w,inShape:e,outShape:I,filterShape:t}}function Om(e,t,n,r,i,s=!1,a="channelsLast",o){let[l,u,c,f,d]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,f,d]=e;else if(a==="channelsFirst")[l,d,u,c,f]=e;else throw new Error(`Unknown dataFormat ${a}`);const[h,m,g,,b]=t,[x,w,C]=nW(n),[S,E,A]=nW(r),k=sx(h,S),N=sx(m,E),I=sx(g,A),{padInfo:T,outDepth:D,outHeight:L,outWidth:P}=Cqe(i,u,c,f,x,w,C,k,N,I,o),M=s?b*d:b;let F;return a==="channelsFirst"?F=[l,M,D,L,P]:a==="channelsLast"&&(F=[l,D,L,P,M]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:f,inChannels:d,outDepth:D,outHeight:L,outWidth:P,outChannels:M,padInfo:T,strideDepth:x,strideHeight:w,strideWidth:C,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:k,effectiveFilterHeight:N,effectiveFilterWidth:I,dilationDepth:S,dilationHeight:E,dilationWidth:A,inShape:e,outShape:F,filterShape:t}}function vqe(e,t,n,r,i){r==null&&(r=RX(e,t,n));const s=e[0],a=e[1],o=xE((s-t+2*r)/n+1,i),l=xE((a-t+2*r)/n+1,i);return[o,l]}function wqe(e,t,n,r,i,s){i==null&&(i=RX(e,t[0],r[0]));const a=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*i>=t[o]&&(a[o]=xE((e[o]-t[o]+2*i)/r[o]+1,s));return a}function RX(e,t,n,r=1){const i=sx(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function bE(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function nW(e){return typeof e=="number"?[e,e,e]:e}function sx(e,t){return t<=1?e:e+(e-1)*(t-1)}function Sqe(e,t,n,r,i,s,a,o,l){let u,c,f;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=vqe([t,n],s,r,e,o);c=h[0],f=h[1]}else if(e==="same"){c=Math.ceil(t/r),f=Math.ceil(n/i);const d=Math.max(0,(c-1)*r+s-t),h=Math.max(0,(f-1)*i+a-n),m=Math.floor(d/2),g=d-m,b=Math.floor(h/2),x=h-b;u={top:m,bottom:g,left:b,right:x,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-s+1)/r),f=Math.ceil((n-a+1)/i);else if(typeof e=="object"){const d=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],m=l==="channelsLast"?e[2][0]:e[3][0],g=l==="channelsLast"?e[2][1]:e[3][1];u={top:d,bottom:h,left:m,right:g,type:d===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},c=xE((t-s+d+h)/r+1,o),f=xE((n-a+m+g)/i+1,o)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:f}}function Cqe(e,t,n,r,i,s,a,o,l,u,c){let f,d,h,m;if(e==="valid"&&(e=0),typeof e=="number"){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const b=wqe([t,n,r,1],[o,l,u],1,[i,s,a],e,c);d=b[0],h=b[1],m=b[2]}else if(e==="same"){d=Math.ceil(t/i),h=Math.ceil(n/s),m=Math.ceil(r/a);const g=(d-1)*i+o-t,b=(h-1)*s+l-n,x=(m-1)*a+u-r,w=Math.floor(g/2),C=g-w,S=Math.floor(b/2),E=b-S,A=Math.floor(x/2),k=x-A;f={top:S,bottom:E,left:A,right:k,front:w,back:C,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:m}}function xE(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function J0(e){const[t,n,r]=bE(e);return t===1&&n===1&&r===1}function Vs(e,t){return J0(e)||J0(t)}function dy(e){return bE(e).every(t=>t>0)}function sp(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function qa(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")q(oy(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(i=>{q(oy(i),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $qe(e,t){const r={x:X(e,"x","reshape","string_or_numeric")},i={shape:t};return ee.runKernel(DA,r,i)}const ae=te({reshape_:$qe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eqe(e,t,n,r,i){const s=X(e,"x","avgPool","float32"),a=1;q(Vs(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=s,l=!1;s.rank===3&&(l=!0,o=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),q(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),qa("avgPool",r,i);const u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let f=ee.runKernel(Gk,u,c);return f=qe(f,s.dtype),l?ae(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const XA=te({avgPool_:Eqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kqe(e,t,n,r,i,s="NDHWC"){const a=X(e,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),q(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),q(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),q(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),qa("avgPool3d",r,i);const u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let f=ee.runKernel(qk,u,c);return f=qe(f,o.dtype),l?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const FX=te({avgPool3d_:kqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aqe(e,t=0){q(e.length>=1,()=>"Pass at least one tensor to concat");const n=gE(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return If(n[0]);const r=n,i={axis:t};return ee.runKernel(Qk,r,i)}const pi=te({concat_:Aqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _qe(e,t,n=!1,r=!1){let i=X(e,"a","matMul"),s=X(t,"b","matMul");[i,s]=Jr(i,s);const a={a:i,b:s},o={transposeA:n,transposeB:r};return ee.runKernel(Xk,a,o)}const nn=te({matMul_:_qe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tqe(e){const n={x:X(e,"x","sigmoid","float32")};return ee.runKernel(Cw,n)}const mc=te({sigmoid_:Tqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nqe(e,t,n){const r=X(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:t,size:n};return ee.runKernel(MA,i,s)}const $n=te({slice_:Nqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dqe(e){const n={x:X(e,"x","tanh","float32")};return ee.runKernel(Tw,n)}const em=te({tanh_:Dqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iqe(e,t,n,r,i,s){const a=X(e,"forgetBias","basicLSTMCell"),o=X(t,"lstmKernel","basicLSTMCell"),l=X(n,"lstmBias","basicLSTMCell"),u=X(r,"data","basicLSTMCell"),c=X(i,"c","basicLSTMCell"),f=X(s,"h","basicLSTMCell"),d=pi([u,f],1),h=nn(d,o),m=Me(h,l),g=m.shape[0],b=m.shape[1]/4,x=[g,b],w=$n(m,[0,0],x),C=$n(m,[0,b],x),S=$n(m,[0,b*2],x),E=$n(m,[0,b*3],x),A=Me(ie(mc(w),em(C)),ie(c,mc(Me(a,S)))),k=ie(em(A),mc(E));return[A,k]}const zxe=te({basicLSTMCell_:Iqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oqe(e,t,n){const r=X(e,"x","batchToSpaceND"),i=t.reduce((o,l)=>o*l);q(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),q(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),q(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`);const s={x:r},a={blockShape:t,crops:n};return ee.runKernel(Yk,s,a)}const YA=te({batchToSpaceND_:Oqe});function Rqe(e){let t;return e.rank===0||e.rank===1?t=ae(e,[1,1,1,e.size]):e.rank===2?t=ae(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fqe(e,t,n,r,i,s){s==null&&(s=.001);const a=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;r!=null&&(c=X(r,"offset","batchNorm")),q(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:Rqe(a),scale:u,offset:c,mean:o,variance:l},h={varianceEpsilon:s},m=ee.runKernel(oA,d,h);return ae(m,a.shape)}const Iw=te({batchNorm_:Fqe});function Mqe(e,t,n,r,i,s){const a=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;return r!=null&&(c=X(r,"offset","batchNorm")),q(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),q(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),q(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&q(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&q(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Iw(a,o,l,c,u,s)}const MX=te({batchNorm2d_:Mqe});function Lqe(e,t,n,r,i,s){const a=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;return r!=null&&(c=X(r,"offset","batchNorm")),q(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),q(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),q(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&q(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&q(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Iw(a,o,l,c,u,s)}const LX=te({batchNorm3d_:Lqe});function Pqe(e,t,n,r,i,s){const a=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let u;i!=null&&(u=X(i,"scale","batchNorm"));let c;return r!=null&&(c=X(r,"offset","batchNorm")),q(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),q(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),q(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&q(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&q(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Iw(a,o,l,c,u,s)}const PX=te({batchNorm4d_:Pqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bqe(e,t,n){const r=X(e,"x","bincount"),i=X(t,"weights","bincount");q(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),q(n>=0,()=>`size must be non-negative, but got ${n}.`),q(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},a={size:n};return ee.runKernel(Z6,s,a)}const BX=te({bincount_:Bqe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zqe(e,t){const n=X(e,"x","bitwiseAnd"),r=X(t,"y","bitwiseAnd");if(!dn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const i={a:n,b:r};return ee.runKernel(Kk,i)}const jxe=te({bitwiseAnd_:zqe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jqe(e,t){const n=X(e,"s0","broadcastArgs","int32"),r=X(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:n,s1:r};return ee.runKernel(Q6,i)}const Uxe=te({broadcastArgs_:jqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uqe(e,t){let n=X(e,"broadcastTo","x");const r=n.shape;if(dl(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const u=n.shape.slice();for(;u.length<t.length;)u.unshift(1);n=ae(n,u)}const i=n.shape,s=Array.from(t);for(let u=t.length-1;u>=0;u--)if(i[u]===t[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(s.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return If(n);const o={x:n},l={reps:s};return ee.runKernel(Nw,o,l)}const B1=te({broadcastTo_:Uqe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vqe(e){const n={x:X(e,"x","ceil","float32")};return ee.runKernel(Hv,n)}const zX=te({ceil_:Vqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yy(e,t,n){dl(e),n=n||Gy(t);const r={shape:e,value:t,dtype:n};return ee.runKernel(pF,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wqe(e,t,n){const r=X(e,"x","clipByValue");if(q(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return Yy(r.shape,t,r.dtype);const i={x:r},s={clipValueMin:t,clipValueMax:n};return ee.runKernel(Gv,i,s)}const xo=te({clipByValue_:Wqe});function Hqe(e){return pi(e,0)}const jX=te({concat1d_:Hqe});function Gqe(e,t){return pi(e,t)}const UX=te({concat2d_:Gqe});function qqe(e,t){return pi(e,t)}const VX=te({concat3d_:qqe});function Xqe(e,t){return pi(e,t)}const WX=te({concat4d_:Xqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yqe(e,t,n,r,i="NHWC",s=[1,1],a){const o=X(e,"x","conv2d","float32"),l=X(t,"filter","conv2d","float32");let u=o,c=!1;o.rank===3&&(c=!0,u=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),q(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),qa("conv2d",r,a);const f=i==="NHWC"?u.shape[3]:u.shape[1];q(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),q(Vs(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),q(dy(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),q(dy(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},m=ee.runKernel(Jk,d,h);return c?ae(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Hh=te({conv2d_:Yqe});function Kqe(e,t,n,r,i="NWC",s=1,a){const o=X(e,"x","conv1d"),l=X(t,"filter","conv1d");let u=o,c=!1;o.rank===2&&(c=!0,u=ae(o,[1,o.shape[0],o.shape[1]])),q(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),q(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),qa("conv1d",r,a),q(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),q(Vs(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),q(dy(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),q(dy(n),()=>"Error in conv1D: Stride should be larger than 0."),q(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=ae(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=ae(u,[u.shape[0],1,u.shape[1],u.shape[2]]),b=Hh(d,f,[1,n],r,"NHWC",[1,s],a);return c?ae(b,[b.shape[2],b.shape[3]]):ae(b,[b.shape[0],b.shape[2],b.shape[3]])}const nM=te({conv1d_:Kqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zqe(e,t,n,r,i,s="NHWC",a){q(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,u=!1;t.rank===3&&(u=!0,l=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),q(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),q(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),q(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?o[3]:o[1],f=s==="NHWC"?l.shape[3]:l.shape[1];q(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),q(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),qa("conv2dDerInput",i,a);const d={dy:l,filter:n},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,inputShape:o},m=ee.runKernel(eA,d,h);return u?ae(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const HX=te({conv2DBackpropInput_:Zqe});function Qqe(e,t,n,r,i,s){const a=X(e,"x","conv2dTranspose"),o=X(t,"filter","conv2dTranspose");return HX(n,a,o,r,i,"NHWC",s)}const rM=te({conv2dTranspose_:Qqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jqe(e,t,n,r,i="NDHWC",s=[1,1,1]){const a=X(e,"x","conv3d"),o=X(t,"filter","conv3d");let l=a,u=!1;a.rank===4&&(u=!0,l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),q(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),q(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),q(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),q(Vs(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),q(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),q(dy(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),q(dy(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:o},f={strides:n,pad:r,dataFormat:i,dilations:s},d=ee.runKernel(tA,c,f);return u?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const GX=te({conv3d_:Jqe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eXe(e,t,n,r,i){q(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,a=t,o=!1;t.rank===4&&(o=!0,a=ae(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const l=s[4],u=a.shape[4];q(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),q(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),q(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),q(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),q(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:a,filter:n},f={pad:i,strides:r,inputShape:s},d=ee.runKernel(nF,c,f);return o?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Vxe=te({conv3DBackpropInput_:eXe});function tXe(e,t,n,r,i){const s=X(e,"x","conv3dTranspose"),a=X(t,"filter","conv3dTranspose");return Vxe(n,s,a,r,i)}const qX=te({conv3dTranspose_:tXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nXe(e){const n={x:X(e,"x","cos","float32")};return ee.runKernel(qv,n)}const KA=te({cos_:nXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rXe(e){const n={x:X(e,"x","cosh","float32")};return ee.runKernel(Xv,n)}const iM=te({cosh_:rXe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iXe(e,t=0,n=!1,r=!1){const s={x:X(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return ee.runKernel(rF,s,a)}const vE=te({cumprod_:iXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sXe(e,t=0,n=!1,r=!1){const s={x:X(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return ee.runKernel(nA,s,a)}const sM=te({cumsum_:sXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aXe(e,t,n,r=!1){const i=X(e,"x","denseBincount"),s=X(t,"weights","denseBincount");q(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),q(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),q(n>=0,()=>`size must be non-negative, but got ${n}.`),q(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const a={x:i,weights:s},o={size:n,binaryOutput:r};return ee.runKernel(sF,a,o)}const WO=te({denseBincount_:aXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oXe(e,t,n="NHWC"){const r=X(e,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];q(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),q(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t}  for depthToSpace with input shape
    ${r.shape}`),q(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${t} for depthToSpace with input shape
        ${r.shape}`),q(a%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:t,dataFormat:n};return ee.runKernel(aF,o,l)}const XX=te({depthToSpace_:oXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lXe(e,t,n,r,i="NHWC",s=[1,1],a){const o=X(e,"x","depthwiseConv2d","float32"),l=X(t,"filter","depthwiseConv2d","float32");let u=o,c=!1;o.rank===3&&(c=!0,u=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),q(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=i==="NHWC"?u.shape[3]:u.shape[1];q(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),qa("depthwiseConv2d",r,a);const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a},m=ee.runKernel(rA,d,h);return c?ae(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const Ow=te({depthwiseConv2d_:lXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uXe(e){const n={x:X(e,"x","diag")};return ee.runKernel(uF,n)}const Wxe=te({diag_:uXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cXe(e,t,n,r,i=[1,1],s="NHWC"){const a=X(e,"x","dilation2d"),o=X(t,"filter","dilation2d");q(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),q(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),q(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=a,u=!1;a.rank===3&&(l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),q(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const c={x:l,filter:o},f={strides:n,pad:r,dilations:i},d=ee.runKernel(iA,c,f);return u?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const YX=te({dilation2d_:cXe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,a=e[s]||1;(t[t.length-1-i]||1)>1&&a===1&&r.unshift(s)}return r}function Di(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],s=t.length-r-1,a=t[s];(i==null||i===1&&a>1)&&n.unshift(s)}return n}function Gt(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let s=e[e.length-i-1];s==null&&(s=1);let a=t[t.length-i-1];if(a==null&&(a=1),s===1)r[n-i-1]=a;else if(a===1)r[n-i-1]=s;else if(s!==a){const o=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(o)}else r[n-i-1]=s}return r}const fXe=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Gt,getBroadcastDims:hy,getReductionAxes:Di},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dXe(e,t){let n=X(e,"a","equal","string_or_numeric"),r=X(t,"b","equal","string_or_numeric");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(sA,i)}const _u=te({equal_:dXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hXe(e,t,n){const r=X(t,"a","where"),i=X(n,"b","where"),s=X(e,"condition","where","bool"),a=Gt(Gt(s.shape,r.shape),i.shape),o=B1(s,a),l=B1(r,a),u=B1(i,a),c={condition:o,t:l,e:u};return ee.runKernel(FA,c)}const Ls=te({where_:hXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pXe(e){const n={x:X(e,"x","zerosLike")};return ee.runKernel(WA,n)}const En=te({zerosLike_:pXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mXe(e,t){let n=X(e,"a","div"),r=X(t,"b","div");[n,r]=Jr(n,r);const i=ct(n,r),s=En(i),a=_u(r,s);return Ls(a,s,i)}const KX=te({divNoNan_:mXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gXe(e,t){const n=X(e,"t1","dot"),r=X(t,"t2","dot");q((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(q(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const a=ae(n,[1,-1]),o=ae(r,[-1,1]),l=nn(a,o);return ae(l,[])}else if(n.rank===1&&r.rank===2){const a=ae(n,[1,-1]),o=ae(r,[r.shape[0],r.shape[1]]),l=nn(a,o);return ae(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=ae(r,[-1,1]),o=nn(n,a);return ae(o,[o.size])}else{const a=ae(r,[r.shape[0],r.shape[1]]);return nn(n,a)}}const ZX=te({dot_:gXe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yXe(e,...t){const n=t.map((i,s)=>X(i,`tensors${s}`,"einsum")),r={equation:e};return ee.runKernel(fF,n,r)}const s1=te({einsum_:yXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bXe(e){const n={x:X(e,"x","elu","float32")};return ee.runKernel(Kv,n)}const Rw=te({elu_:bXe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xXe(e,t){const n=X(e,"x","ensureShape","string_or_numeric");if(!Q2e(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}const Hxe=te({ensureShape_:xXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vXe(e){let t=X(e,"x","erf");q(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=qe(t,"float32"));const n={x:t};return ee.runKernel(Zv,n)}const aM=te({erf_:vXe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Gxe(e,t,n){const r=e.length+t.length,i=[];let s=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(e[s++]):i.push(t[a++]);return i}function ds(e,t){const n=[],r=e.length;for(let s=0;s<r;s++)t.indexOf(s)===-1&&n.push(e[s]);const i=t.map(s=>e[s]);return[n,i]}function gi(e,t){const n=t.map(r=>1);return Gxe(e,n,t)}function Ws(e,t,n){q(QX(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function ei(e,t){if(QX(e,t))return null;const n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function Rm(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function yi(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wXe(e,t=null,n=!1){const i={x:X(e,"x","max")},s={reductionIndices:t,keepDims:n};return ee.runKernel(yA,i,s)}const Qo=te({max_:wXe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SXe(e,t=null,n=!1){const i={x:X(e,"x","min")},s={axis:t,keepDims:n};return ee.runKernel(wA,i,s)}const py=te({min_:SXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CXe(e,t){let n=X(e,"base","pow"),r=X(t,"exp","pow");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(hw,i)}const qf=te({pow_:CXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Et(e,t){if((ts(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ts(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Im(e,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Xe(e){const n={x:X(e,"x","sqrt","float32")};return ee.runKernel(Ew,n)}const us=te({sqrt_:$Xe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EXe(e){const t=X(e,"x","square"),n={};return ee.runKernel("Square",{x:t},n)}const lr=te({square_:EXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kXe(e,t=null,n=!1){let r=X(e,"x","sum");r.dtype==="bool"&&(r=qe(r,"int32"));const i={x:r},s={axis:t,keepDims:n};return ee.runKernel(LA,i,s)}const lt=te({sum_:kXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AXe(e,t="euclidean",n=null,r=!1){e=X(e,"x","norm");const i=qxe(e,t,n);let s=i.shape;if(r){const a=rn(n,e.shape);s=gi(i.shape,a)}return ae(i,s)}function qxe(e,t,n=null){if(e.rank===0)return $i(e);if(e.rank!==1&&n===null)return qxe(ae(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return lt($i(e),n);if(t===1/0)return Qo($i(e),n);if(t===-1/0)return py($i(e),n);if(t==="euclidean"||t===2)return us(lt(qf($i(e),Et(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return Qo(lt($i(e),n[0]),n[1]-1);if(t===1/0)return Qo(lt($i(e),n[1]),n[0]);if(t===-1/0)return py(lt($i(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return us(lt(lr(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Fw=te({norm_:AXe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Xe(e,t=null,n=!1){return Fw(e,"euclidean",t,n)}const JX=te({euclideanNorm_:_Xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TXe(e){const n={x:X(e,"x","exp")};return ee.runKernel(Qv,n)}const vo=te({exp_:TXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NXe(e,t=0){const n=X(e,"x","expandDims","string_or_numeric");q(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:t};return ee.runKernel(aA,r,i)}const ta=te({expandDims_:NXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DXe(e){const n={x:X(e,"x","expm1")};return ee.runKernel(Jv,n)}const eY=te({expm1_:DXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IXe(e,t){const n=X(e,"x","tile","string_or_numeric");q(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const r={x:n},i={reps:t};return ee.runKernel(Nw,r,i)}const _l=te({tile_:IXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OXe(e,t,n,r="float32"){t==null&&(t=e);const i=Zt([e,t],r),s=e<=t?e:t;for(let o=0;o<s;++o)i.set(1,o,o);const a=ae(i.toTensor(),[e,t]);if(n==null)return a;if(n.length===1)return _l(ta(a,0),[n[0],1,1]);if(n.length===2)return _l(ta(ta(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return _l(ta(ta(ta(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const oM=te({eye_:OXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RXe(e){const n={x:X(e,"x","floor","float32")};return ee.runKernel(ew,n)}const Mw=te({floor_:RXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FXe(e,t,n=0,r=0){const i=X(e,"x","gather"),s=X(t,"indices","gather","int32"),a={x:i,indices:s},o={axis:n,batchDims:r};return ee.runKernel(lA,a,o)}const Lw=te({gather_:FXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MXe(e,t){let n=X(e,"a","greater","string_or_numeric"),r=X(t,"b","greater","string_or_numeric");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(uA,i)}const Ao=te({greater_:MXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LXe(e,t){let n=X(e,"a","greaterEqual","string_or_numeric"),r=X(t,"b","greaterEqual","string_or_numeric");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(nw,i)}const ap=te({greaterEqual_:LXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PXe(e){const n={input:X(e,"input","imag")};return ee.runKernel(bF,n)}const ZA=te({imag_:PXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BXe(e){const n={x:X(e,"x","isFinite")};return ee.runKernel(iw,n)}const tY=te({isFinite_:BXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zXe(e){const n={x:X(e,"x","isInf")};return ee.runKernel(sw,n)}const nY=te({isInf_:zXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jXe(e){const n={x:X(e,"x","isNaN")};return ee.runKernel(aw,n)}const rY=te({isNaN_:jXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UXe(e,t=.2){const r={x:X(e,"x","leakyRelu")},i={alpha:t};return ee.runKernel(cA,r,i)}const QA=te({leakyRelu_:UXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VXe(e,t){let n=X(e,"a","less","string_or_numeric"),r=X(t,"b","less","string_or_numeric");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(fA,i)}const Tx=te({less_:VXe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WXe(e,t){let n=X(e,"a","lessEqual","string_or_numeric"),r=X(t,"b","lessEqual","string_or_numeric");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(dA,i)}const Fm=te({lessEqual_:WXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return ee.runKernel(xF,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HXe(e,t=5,n=1,r=1,i=.5){const s=X(e,"x","localResponseNormalization");q(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),q(oy(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let a=s,o=!1;s.rank===3&&(o=!0,a=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:a},u={depthRadius:t,bias:n,alpha:r,beta:i},c=ee.runKernel(gA,l,u);return o?ae(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const iY=te({localResponseNormalization_:HXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GXe(e){const n={x:X(e,"x","log","float32")};return ee.runKernel(ow,n)}const tl=te({log_:GXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qXe(e){const n={x:X(e,"x","log1p")};return ee.runKernel(lw,n)}const JA=te({log1p_:qXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XXe(e){return q(K0(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const r=X(t,"x","tf.grad","string_or_numeric"),i=n!=null?X(n,"dy","tf.grad"):null;return ee.tidy(()=>{const{value:s,grads:a}=ee.gradients(()=>e(r),[r],i);return i!=null&&Us(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),lM(a),a[0]})}}function YXe(e){return q(K0(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{q(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=gE(t,"args","tf.grads","string_or_numeric"),i=n!=null?X(n,"dy","tf.grads"):null;return ee.tidy(()=>{const{value:s,grads:a}=ee.gradients(()=>e(...r),r,i);return i!=null&&Us(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),lM(a),a})}}function KXe(e){return q(K0(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{q(t instanceof Wn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),q(n==null||n instanceof Wn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=ee.gradients(()=>e(t),[t],n);return lM(r),{grad:r[0],value:i}}}function ZXe(e){return q(K0(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{q(Array.isArray(t)&&t.every(i=>i instanceof Wn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),q(n==null||n instanceof Wn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=ee.gradients(()=>e(...t),t,n);return n!=null&&Us(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),lM(r.grads),r}}function Yxe(e,t){q(K0(e),()=>"The f passed in variableGrads(f) must be a function"),q(t==null||Array.isArray(t)&&t.every(u=>u instanceof mE),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const u in ee.registeredVariables)t.push(ee.registeredVariables[u])}const r=n?t.filter(u=>!u.trainable):null,i=t.length;t=t.filter(u=>u.trainable),q(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:a,grads:o}=ee.gradients(e,t,null,s);q(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),q(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return t.forEach((u,c)=>{o[c]!=null&&(l[u.name]=o[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:a,grads:l}}function Xf(e){return ee.customGrad(e)}function lM(e){if(e.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QXe(e){const n={x:X(e,"x","neg")};return ee.runKernel(CA,n)}const _r=te({neg_:QXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JXe(e){const n={x:X(e,"x","softplus")};return ee.runKernel($w,n)}const Ky=te({softplus_:JXe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eYe(e){const t=X(e,"x","logSigmoid");return Xf(r=>({value:_r(Ky(_r(r))),gradFunc:a=>ie(a,mc(_r(r)))}))(t)}const sY=te({logSigmoid_:eYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tYe(e,t){let n=X(e,"a","sub"),r=X(t,"b","sub");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(Aw,i)}const st=te({sub_:tYe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nYe(e,t=-1){const n=X(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Xf((i,s)=>{const o=Qo(i,t,!0),l=st(i,o),u=st(qe(l,"float32"),tl(lt(vo(l),t,!0)));return s([u]),{value:u,gradFunc:(f,d)=>{const[h]=d,m=!0,g=vo(h);return st(f,ie(lt(f,t,m),g))}}})(n)}const uM=te({logSoftmax_:nYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rYe(e,t=null,n=!1){const r=X(e,"x","logSumExp"),i=rn(t,r.shape),s=Qo(r,i,!0),a=st(r,s),o=vo(a),l=lt(o,i),u=tl(l),c=Me(ae(s,u.shape),u);if(n){const f=gi(c.shape,i);return ae(c,f)}return c}const e_=te({logSumExp_:rYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iYe(e,t){const n=X(e,"a","logicalAnd","bool"),r=X(t,"b","logicalAnd","bool");Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(hA,i)}const Sc=te({logicalAnd_:iYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sYe(e){const n={x:X(e,"x","logicalNot","bool")};return ee.runKernel(pA,n)}const t_=te({logicalNot_:sYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aYe(e,t){const n=X(e,"a","logicalOr","bool"),r=X(t,"b","logicalOr","bool");Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(mA,i)}const cM=te({logicalOr_:aYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oYe(e,t){const n=X(e,"a","logicalXor","bool"),r=X(t,"b","logicalXor","bool");return Gt(n.shape,r.shape),Sc(cM(e,t),t_(Sc(e,t)))}const aY=te({logicalXor_:oYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4=2147483648;function lYe(e,t,n="left"){const r=X(e,"sortedSequence","searchSorted"),i=X(t,"values","searchSorted"),s=r.shape[r.shape.length-1],a=i.shape[i.shape.length-1],o=ae(r,[-1,s]),l=ae(i,[-1,a]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(we(l.shape)>=A4)throw new Error(`values tensor size must less than ${A4}`);if(o.shape[1]>=A4)throw new Error(`trailing dim_size must less than ${A4} for int32 output type, was ${o.shape[1]}`);const u={sortedSequence:o,values:l},c={side:n};return ee.runKernel(LF,u,c)}const fM=te({searchSorted_:lYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(e,t){return fM(e,t,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uYe(e,t,n,r,i){const s=X(e,"x","maxPool"),a=1;let o=s,l=!1;s.rank===3&&(l=!0,o=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),q(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),q(Vs(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),qa("maxPool",r,i);const u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i},f=ee.runKernel(bA,u,c);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const n_=te({maxPool_:uYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cYe(e,t=[1,1,1],n,r,i,s="NDHWC"){const a=X(e,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),q(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),q(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),qa("maxPool3d",r,i);const u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},f=ee.runKernel(xA,u,c);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const oY=te({maxPool3d_:cYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fYe(e,t,n,r,i=!1){const a={x:X(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},l=ee.runKernel(CF,a,o);return{result:l[0],indexes:l[1]}}const Zxe=te({maxPoolWithArgmax_:fYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dYe(e,t){let n=X(e,"a","maximum"),r=X(t,"b","maximum");[n,r]=Jr(n,r),n.dtype==="bool"&&(n=qe(n,"int32"),r=qe(r,"int32")),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(uw,i)}const dd=te({maximum_:dYe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hYe(e,t=null,n=!1){const i={x:X(e,"x","mean")},s={axis:t,keepDims:n};return ee.runKernel(vA,i,s)}const Kr=te({mean_:hYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ai(e,t="float32"){if(dl(e),t==="complex64"){const r=Ai(e,"float32"),i=Ai(e,"float32");return Wh(r,i)}const n=Bs(we(e),t);return ee.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(e,t="float32"){if(dl(e),t==="complex64"){const r=uo(e,"float32"),i=Ai(e,"float32");return Wh(r,i)}const n=G6(we(e),t);return ee.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=X(e,"x","meshgrid",e instanceof Wn?e.dtype:"float32");if(t===void 0)return[r];let i=X(t,"y","meshgrid",t instanceof Wn?t.dtype:"float32");const s=we(r.shape),a=we(i.shape);return n==="xy"?(r=ae(r,[1,-1]),i=ae(i,[-1,1]),[nn(uo([a,1],r.dtype),r),nn(i,uo([1,s],i.dtype))]):(r=ae(r,[-1,1]),i=ae(i,[1,-1]),[nn(r,uo([1,a],r.dtype)),nn(uo([s,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pYe(e,t){let n=X(e,"a","minimum"),r=X(t,"b","minimum");[n,r]=Jr(n,r),n.dtype==="bool"&&(n=qe(n,"int32"),r=qe(r,"int32")),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel(cw,i)}const tm=te({minimum_:pYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mYe(e,t,n){q(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=X(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");q(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)q(t[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),q(t[o][0]>=0&&t[o][0]<=r.shape[o]-i&&t[o][1]>=0&&t[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:t,mode:n},a={x:r};return ee.runKernel(SA,a,s)}const lY=te({mirrorPad_:mYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gYe(e,t){let n=X(e,"a","mod"),r=X(t,"b","mod");[n,r]=Jr(n,r);const i={a:n,b:r};return ee.runKernel(fw,i)}const uY=te({mod_:gYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yYe(e,t=null,n=!1){e=X(e,"x","moments");const r=rn(t,e.shape),i=Kr(e,r,n);let s=i.shape;n||(s=gi(i.shape,r));const a=lr(st(qe(e,"float32"),ae(i,s))),o=Kr(a,r,n);return{mean:i,variance:o}}const r_=te({moments_:yYe});function bYe(e,t,n,r){const i=X(t,"data","multiRNNCell"),s=gE(n,"c","multiRNNCell"),a=gE(r,"h","multiRNNCell");let o=i;const l=[];for(let f=0;f<e.length;f++){const d=e[f](o,s[f],a[f]);l.push(d[0]),l.push(d[1]),o=d[1]}const u=[],c=[];for(let f=0;f<l.length;f+=2)u.push(l[f]),c.push(l[f+1]);return[u,c]}const Jxe=te({multiRNNCell_:bYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xYe(e,t,n,r=!1){const i=X(e,"logits","multinomial"),s=i.size,a=i.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const l={logits:a===1?ae(i,[1,-1]):i},u={numSamples:t,seed:n,normalized:r},c=ee.runKernel($F,l,u);return a===1?ae(c,[c.size]):c}const eve=te({multinomial_:xYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vYe(e,t){let n=X(e,"a","notEqual","string_or_numeric"),r=X(t,"b","notEqual","string_or_numeric");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r};return ee.runKernel($A,i)}const my=te({notEqual_:vYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wYe(e,t,n=1,r=0,i="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:X(e,"indices","oneHot","int32")},o={dtype:i,depth:t,onValue:n,offValue:r};return ee.runKernel(kA,a,o)}const nm=te({oneHot_:wYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SYe(e){const n={x:X(e,"x","onesLike")};return ee.runKernel(EA,n)}const nl=te({onesLike_:SYe});function CYe(e,t){const n=X(e,"v1","outerProduct"),r=X(t,"v2","outerProduct");q(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=ae(n,[-1,1]),s=ae(r,[1,-1]);return nn(i,s)}const tve=te({outerProduct_:CYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ye(e,t,n=0){const r=X(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},s={x:r};return ee.runKernel(_A,s,i)}const op=te({pad_:$Ye});function EYe(e,t,n=0){return q(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),op(e,[t],n)}const nve=te({pad1d_:EYe});function kYe(e,t,n=0){return q(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),op(e,t,n)}const rve=te({pad2d_:kYe});function AYe(e,t,n=0){return q(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),op(e,t,n)}const ive=te({pad3d_:AYe});function _Ye(e,t,n=0){return q(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),op(e,t,n)}const sve=te({pad4d_:_Ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TYe(e,t,n){const r=X(e,"x","spaceToBatchND");q(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),q(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),q(r.shape.reduce((a,o,l)=>l>0&&l<=t.length?a&&(o+n[l-1][0]+n[l-1][1])%t[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const i={x:r},s={blockShape:t,paddings:n};return ee.runKernel(PA,i,s)}const i_=te({spaceToBatchND_:TYe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NYe(e,t,n,r,i,s,a){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const o=X(e,"x","maxPool");let l=o,u=!1;o.rank===3&&(u=!0,l=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),q(Vs(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const c=Pu(l.shape,t,s,i,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=IYe([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[m,g]=DYe([c.inHeight,c.inWidth],f,d),b=h?r:"valid",x=h?l:i_(l,f,m),C=(n==="avg"?()=>XA(x,t,s,b,a):()=>n_(x,t,s,b,a))(),S=h?C:YA(C,f,g);return u?ae(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function DYe(e,t,n){const r=n.map(c=>c[0]),i=n.map(c=>c[1]),s=e.concat(r,i),a=t.map((c,f)=>(c-s[f]%c)%c),o=i.map((c,f)=>c+a[f]),l=t.map((c,f)=>[r[f],o[f]]),u=t.map((c,f)=>[0,a[f]]);return[l,u]}function IYe(e,t){const r=e.map((a,o)=>a+(a-1)*(t[o]-1)).map(a=>a-1),i=r.map(a=>Math.floor(a/2)),s=r.map((a,o)=>a-i[o]);return r.map((a,o)=>[i[o],s[o]])}const cY=te({pool_:NYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OYe(e,t){const n=X(e,"x","prelu"),r=X(t,"alpha","prelu"),i={x:n,alpha:r};return ee.runKernel(TA,i)}const s_=te({prelu_:OYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RYe(e,t=null,n=!1){let r=X(e,"x","prod");r.dtype==="bool"&&(r=qe(r,"int32"));const i={x:r},s={axis:t,keepDims:n};return ee.runKernel(NA,i,s)}const fY=te({prod_:RYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FYe(e,t,n,r){const i=e.map((c,f)=>X(c,`tensors${f}`,"raggedGather","int32")),s=X(t,"paramsDenseValues","raggedGather"),a=X(n,"indices","raggedGather","int32"),o={paramsNestedSplits:i,paramsDenseValues:s,indices:a},l={outputRaggedRank:r},u=ee.runKernel(_F,o,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const ave=te({raggedGather_:FYe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MYe(e,t,n){const r=X(e,"starts","raggedRange"),i=X(t,"limits","raggedRange",r.dtype),s=X(n,"deltas","raggedRange",r.dtype),a={starts:r,limits:i,deltas:s},o=ee.runKernel(TF,a);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const ove=te({raggedRange_:MYe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LYe(e,t,n,r,i){const s=X(e,"shape","raggedTensorToTensor","int32"),a=X(t,"values","raggedTensorToTensor"),o=X(n,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((f,d)=>X(f,`tensors${d}`,"raggedTensorToTensor","int32")),u={shape:s,values:a,defaultValue:o,rowPartitionTensors:l},c={rowPartitionTypes:i};return ee.runKernel(NF,u,c)}const lve=te({raggedTensorToTensor_:LYe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PYe(e,t,n){dl(e);const r=we(e);let i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else if(n==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let s=0;s<r;s++)i[s]=t();return ee.makeTensor(i,e,n)}const uve=te({rand_:PYe});var TI={exports:{}},BYe=TI.exports,kue;function zYe(){return kue||(kue=1,function(e){(function(t,n,r){function i(l){var u=this,c=o();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,c),d.state=function(){return s(c,{})}),d}function o(){var l=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){l+=c.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=a:this.alea=a})(BYe,e)}(TI)),TI.exports}var NI={exports:{}},jYe=NI.exports,Aue;function UYe(){return Aue||(Aue=1,function(e){(function(t,n,r){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:this.xor128=a})(jYe,e)}(NI)),NI.exports}var DI={exports:{}},VYe=DI.exports,_ue;function WYe(){return _ue||(_ue=1,function(e){(function(t,n,r){function i(o){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:this.xorwow=a})(VYe,e)}(DI)),DI.exports}var II={exports:{}},HYe=II.exports,Tue;function GYe(){return Tue||(Tue=1,function(e){(function(t,n,r){function i(o){var l=this;l.next=function(){var c=l.x,f=l.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,l.i=f+1&7,h};function u(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:this.xorshift7=a})(HYe,e)}(II)),II.exports}var OI={exports:{}},qYe=OI.exports,Nue;function XYe(){return Nue||(Nue=1,function(e){(function(t,n,r){function i(o){var l=this;l.next=function(){var c=l.w,f=l.X,d=l.i,h,m;return l.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,l.i=d,m+(c^c>>>16)|0};function u(c,f){var d,h,m,g,b,x=[],w=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,w=Math.max(w,f.length)),m=0,g=-32;g<w;++g)f&&(h^=f.charCodeAt((g+32)%f.length)),g===0&&(b=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(b=b+1640531527|0,d=x[g&127]^=h+b,m=d==0?m+1:0);for(m>=128&&(x[(f&&f.length||0)&127]=-1),m=127,g=4*128;g>0;--g)h=x[m+34&127],d=x[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,x[m]=h^d;c.w=b,c.X=x,c.i=m}u(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:this.xor4096=a})(qYe,e)}(OI)),OI.exports}var RI={exports:{}},YYe=RI.exports,Due;function KYe(){return Due||(Due=1,function(e){(function(t,n,r){function i(o){var l=this,u="";l.next=function(){var f=l.b,d=l.c,h=l.d,m=l.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^m,l.a=m-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&s(c,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=a:this.tychei=a})(YYe,e)}(RI)),RI.exports}var FI={exports:{}};const ZYe={},QYe=Object.freeze(Object.defineProperty({__proto__:null,default:ZYe},Symbol.toStringTag,{value:"Module"})),JYe=_m(QYe);var eKe=FI.exports,Iue;function tKe(){return Iue||(Iue=1,function(e){(function(t,n,r){var i=256,s=6,a=52,o="random",l=r.pow(i,s),u=r.pow(2,a),c=u*2,f=i-1,d;function h(S,E,A){var k=[];E=E==!0?{entropy:!0}:E||{};var N=x(b(E.entropy?[S,C(n)]:S??w(),3),k),I=new m(k),T=function(){for(var D=I.g(s),L=l,P=0;D<u;)D=(D+P)*i,L*=i,P=I.g(1);for(;D>=c;)D/=2,L/=2,P>>>=1;return(D+P)/L};return T.int32=function(){return I.g(4)|0},T.quick=function(){return I.g(4)/4294967296},T.double=T,x(C(I.S),n),(E.pass||A||function(D,L,P,M){return M&&(M.S&&g(M,I),D.state=function(){return g(I,{})}),P?(r[o]=D,L):D})(T,N,"global"in E?E.global:this==r,E.state)}function m(S){var E,A=S.length,k=this,N=0,I=k.i=k.j=0,T=k.S=[];for(A||(S=[A++]);N<i;)T[N]=N++;for(N=0;N<i;N++)T[N]=T[I=f&I+S[N%A]+(E=T[N])],T[I]=E;(k.g=function(D){for(var L,P=0,M=k.i,F=k.j,R=k.S;D--;)L=R[M=f&M+1],P=P*i+R[f&(R[M]=R[F=f&F+L])+(R[F]=L)];return k.i=M,k.j=F,P})(i)}function g(S,E){return E.i=S.i,E.j=S.j,E.S=S.S.slice(),E}function b(S,E){var A=[],k=typeof S,N;if(E&&k=="object")for(N in S)try{A.push(b(S[N],E-1))}catch{}return A.length?A:k=="string"?S:S+"\0"}function x(S,E){for(var A=S+"",k,N=0;N<A.length;)E[f&N]=f&(k^=E[f&N]*19)+A.charCodeAt(N++);return C(E)}function w(){try{var S;return d&&(S=d.randomBytes)?S=S(i):(S=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(S)),C(S)}catch{var E=t.navigator,A=E&&E.plugins;return[+new Date,t,A,t.screen,C(n)]}}function C(S){return String.fromCharCode.apply(0,S)}if(x(r.random(),n),e.exports){e.exports=h;try{d=JYe}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:eKe,[],Math)}(FI)),FI.exports}var rz,Oue;function nKe(){if(Oue)return rz;Oue=1;var e=zYe(),t=UYe(),n=WYe(),r=GYe(),i=XYe(),s=KYe(),a=tKe();return a.alea=e,a.xor128=t,a.xorwow=n,a.xorshift7=r,a.xor4096=i,a.tychei=s,rz=a,rz}var dM=nKe();/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rKe=.001,cve=.1;function iKe(e,t,n){return n==null&&(n=dY()),rW(e,t,(r,i)=>hY(r,i,n))}function dY(){return ee.backend.floatPrecision()===32?rKe:cve}function rW(e,t,n){let r=!0;if((ts(e)||ts(t))&&(r=!1),ts(e)&&ts(t)&&(r=!0),r){const a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error(`Arrays are of different type. Actual: ${a}. Expected: ${o}`)}if(Array.isArray(e)&&Array.isArray(t)){const a=Gf(e),o=Gf(t);if(!dn(a,o))throw new Error(`Arrays have different shapes. Actual: [${a}]. Expected: [${o}]`)}const i=ts(e)?e:Hf(e),s=ts(t)?t:Hf(t);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${s.length}.
Actual:   ${i}.
Expected: ${s}.`);for(let a=0;a<s.length;++a){const o=i[a],l=s[a];if(!n(o,l))throw new Error(`Arrays differ: actual[${a}] = ${o}, expected[${a}] = ${l}.
Actual:   ${i}.
Expected: ${s}.`)}typeof expect<"u"&&expect().nothing()}function sKe(e,t){e().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function aKe(e,t){const n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return kf(e)||kf(e[0])||kf(t)||kf(t[0])?rW(e,n,(r,i)=>r==i):rW(e,t,(r,i)=>hY(r,i,0))}function oKe(e,t,n){if(n==null&&(n=dY()),!hY(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);typeof expect<"u"&&expect().nothing()}function hY(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function lKe(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function uKe(e,t){const n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let i=0;i<r.length;i++)if(n[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${n[i]} instead`)}function fve(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?fve(n):e[t]=Df(n)}return e}function cKe(e){const t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(n=>{t.addEventListener("loadeddata",r=>n(t)),t.load()})}async function fKe(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}const dKe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:cve,createVideoElement:cKe,encodeStrings:fve,expectArrayBuffersEqual:uKe,expectArraysClose:iKe,expectArraysEqual:aKe,expectNumbersClose:oKe,expectPromiseToFail:sKe,expectValuesInRange:lKe,play:fKe,testEpsilon:dY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pY{constructor(t,n,r,i,s){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=s||Math.random();this.random=dM.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let t,n,r=!1;for(;!r;){let i,s,a;do i=2*this.random()-1,s=2*this.random()-1,a=i*i+s*s;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*i*o,n=this.mean+this.stdDev*s*o,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class hKe{constructor(t,n,r,i){this.alpha=t,this.beta=1/n,this.dtype=r;const s=i||Math.random();this.randu=dM.alea(s.toString()),this.randn=new pY(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,i,s,a;for(;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,t=i*i,n=1-.331*t*t,r=.5*t+this.d*(1-a+Math.log(a)),s=this.randu(),s<n||Math.log(s)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}}class pKe{constructor(t=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=dM.alea(i)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mKe(e,t,n=1,r="float32",i){if(dl(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const s=new hKe(t,n,r,i),a=Zt(e,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const dve=te({randomGamma_:mKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gKe(e,t=0,n=1,r,i){if(dl(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new pY(t,n,r,!1,i),a=Zt(e,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const hM=te({randomNormal_:gKe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yKe(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return hM(e,0,1,t,n)}const hve=te({randomStandardNormal_:yKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bKe(e,t=0,n=1,r="float32",i){dl(e);const s=Zt(e,r),a=new pKe(t,n,null,i);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const Mm=te({randomUniform_:bKe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xKe(e,t,n,r){return Mm(e,t,n,"int32",r)}const pve=te({randomUniformInt_:xKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gy(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return ee.runKernel(DF,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vKe(e){const n={input:X(e,"input","real")};return ee.runKernel(IF,n)}const Nx=te({real_:vKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wKe(e){const n={x:X(e,"x","reciprocal")};return ee.runKernel(pw,n)}const mY=te({reciprocal_:wKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SKe(e){const n={x:X(e,"x","relu")};return ee.runKernel(mw,n)}const Nc=te({relu_:SKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CKe(e){const n={x:X(e,"x","relu6")};return ee.runKernel(gw,n)}const pM=te({relu6_:CKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ke(e,t){const r={x:X(e,"x","reverse")},i={dims:t};return ee.runKernel(RA,r,i)}const Ml=te({reverse_:$Ke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EKe(e){const t=X(e,"x","reverse");return q(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Ml(t,0)}const mve=te({reverse1d_:EKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kKe(e,t){const n=X(e,"x","reverse");return q(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Ml(n,t)}const gve=te({reverse2d_:kKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AKe(e,t){const n=X(e,"x","reverse");return q(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Ml(n,t)}const yve=te({reverse3d_:AKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ke(e,t){const n=X(e,"x","reverse");return q(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Ml(n,t)}const bve=te({reverse4d_:_Ke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TKe(e){const n={x:X(e,"x","round")};return ee.runKernel(yw,n)}const mM=te({round_:TKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NKe(e){const n={x:X(e,"x","rsqrt","float32")};return ee.runKernel(bw,n)}const gM=te({rsqrt_:NKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DKe(e){const n={x:X(e,"x","selu")};return ee.runKernel(xw,n)}const yM=te({selu_:DKe});function IKe(e,t,n,r,i,s=[1,1],a="NHWC"){const o=X(e,"x","separableConv2d"),l=X(t,"depthwiseFilter","separableConv2d"),u=X(n,"pointwiseFilter","separableConv2d");let c=o,f=!1;if(o.rank===3&&(f=!0,c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");q(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),q(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),q(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),q(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),q(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const d=l.shape[2],h=l.shape[3];q(u.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`);const m=Ow(c,l,r,i,a,s),b=Hh(m,u,1,"valid",a);return f?ae(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const bM=te({separableConv2d_:IKe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function OKe(e,t){const n=X(e,"x","setdiff1d"),r=X(t,"y","setdiff1d");q(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),q(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),q(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),a=new Set(s);let o=0;for(let c=0;c<i.length;c++)a.has(i[c])||o++;const l=new Ni([o],n.dtype),u=new Ni([o],"int32");for(let c=0,f=0;c<i.length;c++)a.has(i[c])||(l.values[f]=i[c],u.values[f]=c,f++);return[l.toTensor(),u.toTensor()]}const xve=OKe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RKe(e){const n={x:X(e,"x","sign")};return ee.runKernel(Sw,n)}const gY=te({sign_:RKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FKe(e){const n={x:X(e,"x","sin","float32")};return ee.runKernel(vw,n)}const xM=te({sin_:FKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MKe(e){const n={x:X(e,"x","sinh")};return ee.runKernel(ww,n)}const vM=te({sinh_:MKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LKe(e,t,n){const r=X(e,"x","slice1d");return q(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),$n(r,[t],[n])}const a_=te({slice1d_:LKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PKe(e,t,n){const r=X(e,"x","slice2d");return q(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),$n(r,t,n)}const wM=te({slice2d_:PKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BKe(e,t,n){const r=X(e,"x","slice3d");return q(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),$n(r,t,n)}const o_=te({slice3d_:BKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zKe(e,t,n){const r=X(e,"x","slice4d");return q(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),$n(r,t,n)}const Dx=te({slice4d_:zKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jKe(e,t=-1){const n=X(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},i={dim:t};return ee.runKernel(zA,r,i)}const l_=te({softmax_:jKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UKe(e){q(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return ee.runKernel(hF,t)}const u_=te({fft_:UKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VKe(e){q(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return ee.runKernel(yF,t)}const Ix=te({ifft_:VKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WKe(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=ae(e,[n,t]);r=Ix(i)}else{const i=[n,2*(t-1)],s=ae(Nx(e),[n,t]),a=ae(ZA(e),[n,t]),o=Ml($n(s,[0,1],[n,t-2]),1),l=ie(Ml($n(a,[0,1],[n,t-2]),1),Et(-1)),u=pi([s,o],1),c=pi([a,l],1),f=ae(Wh(u,c),[i[0],i[1]]);r=Ix(f)}if(r=Nx(r),e.rank===3&&e.shape[0]!==0){const i=r,s=e.shape[0];r=ae(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const SM=te({irfft_:WKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HKe(e,t,n=0){const i={x:X(e,"x","split")},s={numOrSizeSplits:t,axis:n};return ee.runKernel(BA,i,s)}const ho=te({split_:HKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GKe(e,t){q(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(t!=null&&t<n){const m=e.shape.map(b=>0),g=e.shape.map(b=>b);g[e.shape.length-1]=t,i=$n(e,m,g),n=t}else if(t!=null&&t>n){const m=e.shape.map(g=>g);m[e.shape.length-1]=t-n,i=pi([e,Ai(m)],e.shape.length-1),n=t}else i=e;const s=En(i),a=ae(Wh(i,s),[r,n]),o=u_(a),l=Math.floor(n/2)+1,u=Nx(o),c=ZA(o),f=ho(u,[l,n-l],u.shape.length-1),d=ho(c,[l,n-l],c.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,ae(Wh(f[0],d[0]),h)}const c_=te({rfft_:GKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qKe(e,t){let n=X(e,"a","squaredDifference"),r=X(t,"b","squaredDifference");[n,r]=Jr(n,r),Gt(n.shape,r.shape);const i={a:n,b:r},s={};return ee.runKernel(kw,i,s)}const CM=te({squaredDifference_:qKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XKe(e,t){const n=X(e,"x","squeeze","string_or_numeric");return ae(n,np(n.shape,t).newShape)}const Lm=te({squeeze_:XKe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YKe(e,t=0){const n=gE(e,"tensors","stack","string_or_numeric");q(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&q(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:t};return ee.runKernel(AA,r,i)}const wo=te({stack_:YKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KKe(e,t=0){const r={x:X(e,"x","step")},i={alpha:t};return ee.runKernel(Dw,r,i)}const Zy=te({step_:KKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZKe(e,t,n,r,i=0,s=0,a=0,o=0,l=0){const c={x:X(e,"x","stridedSlice","string_or_numeric")},f={begin:t,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return ee.runKernel(WF,c,f)}const yY=te({stridedSlice_:ZKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QKe(e){const n={x:X(e,"x","tan","float32")};return ee.runKernel(_w,n)}const bY=te({tan_:QKe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ji(e,t){Hy(e);const n=Gf(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Im(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Of(e,t,n){if(Hy(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Gf(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Im(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY(e,t,n){if(Hy(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Gf(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Im(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vve(e,t,n){if(Hy(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Gf(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Im(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wve(e,t,n){if(Hy(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Gf(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Im(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sve(e,t,n){if(Hy(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Gf(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Im(e,t,r,n)}function vY(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(s+` update.rank != ${i+e.length-r}`);for(let a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(s+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(s+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${e[a+i]})`)}function $M(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}vY(n,t,e)}function Pm(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,s=n.length;let a=1;for(let f=i;f<s;++f)a*=n[f];const o=i<1?1:i,l=we(t.shape)/o,u=[...Ct(n.slice(0,i)),1],c=we(n);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:u,outputSize:c}}const JKe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Pm,validateInput:$M,validateUpdateShape:vY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eZe(e,t,n){const r=X(e,"tensor","tensorScatterupdate"),i=X(t,"indices","tensorScatterupdate","int32"),s=X(n,"updates","tensorScatterupdate");if($M(s,i,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const a={tensor:r,indices:i,updates:s},o={};return ee.runKernel(MF,a,o)}const Cve=te({tensorScatterUpdate_:eZe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZe(e,t=1,n=!0){const r=X(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const s={x:r},a={k:t,sorted:n},[o,l]=ee.runKernel(XF,s,a);return{values:o,indices:l}}const wY=te({topk_:tZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZe(e,t=0,n=1,r,i){if(dl(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new pY(t,n,r,!0,i),a=Zt(e,r);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const EM=te({truncatedNormal_:nZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rZe(e,t=0){const n=X(e,"x","unique","string_or_numeric");q(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:t},[s,a]=ee.runKernel(KF,r,i);return{values:s,indices:a}}const SY=te({unique_:rZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZe(e,t,n){const r=X(e,"x","unsortedSegmentSum"),i=X(t,"segmentIds","unsortedSegmentSum","int32");q(oy(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},a={numSegments:n};return ee.runKernel(VA,s,a)}const kM=te({unsortedSegmentSum_:iZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZe(e,t=0){const n=X(e,"x","unstack","string_or_numeric");q(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:t};return ee.runKernel(UA,r,i)}const Ll=te({unstack_:sZe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ve(e,t){return fM(e,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(e,t=!0,n,r){return ee.makeVariable(e,t,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AM(e,t){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(s);const r=Zt(e,"int32"),i=Zt([n.length,e.length],"int32");for(let s=0;s<n.length;s++){const a=r.indexToLoc(n[s]),o=s*e.length;i.values.set(a,o)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function aZe(e){const t=X(e,"condition","whereAsync","bool"),n=await t.data(),r=AM(t.shape,n);return e!==t&&t.dispose(),r}const $Y=aZe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function oZe(e,t,n){const r=X(e,"tensor","boolMask"),i=X(t,"mask","boolMask","bool"),s=n??0,a=i.rank,o=r.shape;q(a>0,()=>"mask cannot be scalar"),Us(o.slice(s,s+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=s;g<s+a;g++)l*=o[g];const u=o.slice(0,s).concat([l],o.slice(s+a)),c=ae(r,u),f=ae(i,[-1]),d=await $Y(f),h=Lm(d,[1]),m=Lw(c,h,s);return e!==r&&r.dispose(),t!==i&&i.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),m}const Eve=oZe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZe(e,t,n){const r=X(e,"x","transpose");if(t==null&&(t=r.shape.map((a,o)=>o).reverse()),q(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(a=>{q(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:t};return r.dtype==="complex64"?he(()=>{let a=Nx(r),o=ZA(r);return a=ee.runKernel(P1,{x:a},s),o=ee.runKernel(P1,{x:o},s),n&&(o=_r(o)),Wh(a,o)}):ee.runKernel(P1,i,s)}const yn=te({transpose_:lZe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZe(e,t,n,r,i=!0){const s=X(e,"v","movingAverage"),a=X(t,"x","movingAverage"),o=X(n,"decay","movingAverage");xxe(s,a),q(dn(s.shape,a.shape),()=>"Shape mismatch in v and x");const l=Et(1),u=st(l,o);let c=ie(st(a,s),u);if(i){q(r!=null,()=>"When using zeroDebias: true, step is required.");const f=X(r,"step","movingAverage");c=ct(c,st(l,qf(o,f)))}return Me(s,c)}const kve=te({movingAverage_:uZe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cZe(e,t,n){dl(n);const r=X(e,"indices","scatterND","int32"),i=X(t,"updates","scatterND");$M(i,r,n);const s={indices:r,updates:i},a={shape:n};return ee.runKernel(FF,s,a)}const Ave=te({scatterND_:cZe});function fZe(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const i=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const a=t.size;if(!(t.rank===0||t.rank===1&&a===i))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${i}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZe(e,t,n,r=0){dl(n);const i=X(e,"sparseIndices","sparseToDense","int32"),s=X(t,"sparseValues","sparseToDense","string_or_numeric"),a=X(r,"defaultValue","sparseToDense",s.dtype);fZe(i,s,n,a);const o={sparseIndices:i,sparseValues:s,defaultValue:a},l={outputShape:n};return ee.runKernel(UF,o,l)}const _ve=te({sparseToDense_:dZe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZe(e,t){const n=X(t,"indices","gatherND","int32"),i={params:X(e,"x","gatherND","string_or_numeric"),indices:n};return ee.runKernel(gF,i)}const Tve=te({gatherND_:hZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZe(e,t){if(t==null)return e.shape.slice();if(dn(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZe(e,t,n,r){const i=X(e,"x","dropout");if(q(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),q(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Wn?i.clone():i;const s=pZe(i,n),a=1-t,o=ct(Mw(Me(Mm(s,0,1,"float32",r),a)),a);return ie(i,o)}const EY=te({dropout_:mZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function _M(e,t,n){const r=1-e%2,i=new Float32Array(e);for(let s=0;s<e;++s){const a=2*Math.PI*s/(e+r-1);i[s]=t-n*Math.cos(a)}return ji(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gZe(e,t,n=1){const r=X(e,"predictions","inTopK"),i=X(t,"targets","inTopK");q(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),q(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Us(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];q(n>0&&n<=s,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`);const a=await r.data(),o=await i.data(),[l,u]=[a.length/s,s],c=ls("bool",l);for(let f=0;f<l;f++){const d=f*u,h=a.subarray(d,d+u),m=[];for(let g=0;g<h.length;g++)m.push({value:h[g],index:g});m.sort((g,b)=>b.value-g.value),c[f]=0;for(let g=0;g<n;g++)if(m[g].index===o[f]){c[f]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),$u(c,i.shape,"bool")}const Nve=gZe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZe(e,t,n,r,i,s="NHWC",a){let o=e;e.rank===3&&(o=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]])),q(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),q(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),q(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?o.shape[3]:o.shape[1],c=s==="NHWC"?l.shape[3]:l.shape[1];q(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),q(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),qa("conv2dDerFilter",i,a);const f={x:o,dy:l},d={strides:r,pad:i,dataFormat:s,dimRoundingMode:a,filterShape:n};return ee.runKernel(eF,f,d)}const AY=te({conv2DBackpropFilter_:yZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TM(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return ie(e,Zy(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function NM(e,t){let n=t;const r=Di(e.shape,t.shape);return r.length>0&&(n=lt(n,r)),ae(n,e.shape)}function DM(e,t,n,r){if(t==="linear")return e;if(t==="relu")return Nc(e);if(t==="elu")return Rw(e);if(t==="relu6")return pM(e);if(t==="prelu")return s_(e,n);if(t==="leakyrelu")return QA(e,r);if(t==="sigmoid")return mc(e);throw new Error(`Unknown fused activation ${t}.`)}const IM=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZe({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",IM(ee.state.gradientDepth,l)===!1){q(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let A=Hh(e,t,n,r,i,s,a);return o!=null&&(A=Me(A,o)),DM(A,l,u,c)}const f=X(e,"x","conv2d","float32"),d=X(t,"filter","conv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=ae(f,[1,f.shape[0],f.shape[1],f.shape[2]])),q(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),q(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),qa("fused conv2d",r,a);const g=i==="NHWC"?h.shape[3]:h.shape[1];q(d.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${d.shape[2]}.`),q(Vs(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const b=fs(h.shape,d.shape,n,s,r,a);let x;o!=null&&(x=X(o,"bias","fused conv2d"),[x]=Jr(x,f),i==="NHWC"?Gt(b.outShape,x.shape):(q(x.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${x.shape.length}.`),q(x.shape.length===0||x.shape[0]===b.outChannels||x.shape[0]===1,()=>`Error in fused conv2d: bias shape (${x.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let w;if(u!=null){const A=u.shape;if(q(A.length<=1||A.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${A.length}.`),A.length===1)q(A[0]===1||A[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${A}) is not compatible with the number of output channels (${b.outChannels}).`);else if(A.length===3)try{Gt(A,b.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${A}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(N)}w=X(u,"prelu weights","fused conv2d")}const C=(A,k)=>{q(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[N,I,T,D]=k,L=TM(A,T,l);q(J0(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const P=HX(I.shape,L,N,n,r),M=AY(I,L,N.shape,n,r),F=[P,M];if(D!=null){const R=NM(D,L);F.push(R)}return F},S={x:h,filter:d,bias:x,preluActivationWeights:w},E={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return o==null?Xf((k,N,I)=>{let T=ee.runKernel(fE,S,E);return I([N,k,T]),m&&(T=ae(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:C}})(h,d):Xf((k,N,I,T)=>{let D=ee.runKernel(fE,S,E);return T([N,k,D,I]),m&&(D=ae(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:C}})(h,d,x)}const Dve=te({fusedConv2d_:bZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZe(e,t,n,r,i,s=[1,1],a){let o=e;e.rank===3&&(o=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:o,dy:l},c={strides:r,pad:i,dimRoundingMode:a,dilations:s,filterShape:n};return ee.runKernel(oF,u,c)}const Ive=te({depthwiseConv2dNativeBackpropFilter_:xZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vZe(e,t,n,r,i,s=[1,1],a){let o=t,l=!1;t.rank===3&&(l=!0,o=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:o,filter:n},c={strides:r,pad:i,dimRoundingMode:a,dilations:s,inputShape:e},f=ee.runKernel(lF,u,c);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Ove=te({depthwiseConv2dNativeBackpropInput_:vZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZe({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(IM(ee.state.gradientDepth,l)===!1){let E=Ow(e,t,n,r,i,s,a);return o!=null&&(E=Me(E,o)),DM(E,l,u,c)}const f=X(e,"x","depthwiseConv2d","float32"),d=X(t,"filter","depthwiseConv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=ae(f,[1,f.shape[0],f.shape[1],f.shape[2]])),q(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),q(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),q(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),s==null&&(s=[1,1]),q(Vs(n,s),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),qa("fused depthwiseConv2d",r,a);const g=fs(h.shape,d.shape,n,s,r,a,!0);let b;o!=null&&(b=X(o,"bias","fused conv2d"),[b]=Jr(b,f),Gt(g.outShape,b.shape));let x;u!=null&&(x=X(u,"prelu weights","fused depthwiseConv2d"));const w=(E,A)=>{q(J0(s),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[k,N,I,T]=A,D=TM(E,I,l),L=Ove(N.shape,D,k,n,r,s,a),P=Ive(N,D,k.shape,n,r,s,a);if(T!=null){const M=NM(b,D);return[L,P,M]}return[L,P]},C={x:h,filter:d,bias:b,preluActivationWeights:x},S={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return o==null?Xf((A,k,N)=>{let I=ee.runKernel(dE,C,S);return N([k,A,I]),m&&(I=ae(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:w}})(h,d):Xf((A,k,N,I)=>{let T=ee.runKernel(dE,C,S);return I([k,A,T,N]),m&&(T=ae(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:w}})(h,d,b)}const SZe=te({fusedDepthwiseConv2d_:wZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZe({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(IM(ee.state.gradientDepth,s)===!1){let D=nn(e,t,n,r);return i!=null&&(D=Me(D,i)),DM(D,s,a,o)}let l=X(e,"a","fused matMul"),u=X(t,"b","fused matMul");[l,u]=Jr(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=l.shape.slice(0,-2),g=u.shape.slice(0,-2),b=we(m),x=we(g);q(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=Gt(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,h]),S=n?ae(l,[b,c,d]):ae(l,[b,d,c]),E=r?ae(u,[x,h,f]):ae(u,[x,f,h]);let A;i!=null&&(A=X(i,"bias","fused matMul"),[A]=Jr(A,l),Gt(C,A.shape));let k;a!=null&&(k=X(a,"prelu weights","fused matMul"));const N=(D,L)=>{const[P,M,F,R]=L,j=TM(ae(D,F.shape),F,s);let H,G;if(!n&&!r?(H=nn(j,M,!1,!0),G=nn(P,j,!0,!1)):!n&&r?(H=nn(j,M,!1,!1),G=nn(j,P,!0,!1)):n&&!r?(H=nn(M,j,!1,!0),G=nn(P,j,!1,!1)):(H=nn(M,j,!0,!0),G=nn(j,P,!0,!0)),i!=null){const z=NM(R,j);return[H,G,z]}else return[H,G]},I={a:S,b:E,bias:A,preluActivationWeights:k},T={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};return i==null?Xf((L,P,M)=>{const F=ee.runKernel(cE,I,T);return M([L,P,F]),{value:ae(F,C),gradFunc:N}})(S,E):Xf((L,P,M,F)=>{const R=ee.runKernel(cE,I,T);return F([L,P,R,M]),{value:ae(R,C),gradFunc:N}})(S,E,A)}const iW=te({fusedMatMul_:CZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rve=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Dve,depthwiseConv2d:SZe,matMul:iW},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ze(e){return _M(e,.54,.46)}const EZe=te({hammingWindow_:$Ze});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZe(e){return _M(e,.5,.5)}const Fve=te({hannWindow_:kZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZe(e,t,n,r=!1,i=0){let s=0;const a=[];for(;s+t<=e.size;)a.push($n(e,s,t)),s+=n;if(r)for(;s<e.size;){const o=s+t-e.size,l=pi([$n(e,s,t-o),Yy([o],i)]);a.push(l),s+=n}return a.length===0?Of([],[0,t]):ae(pi(a),[a.length,t])}const Mve=te({frame_:AZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ze(e,t,n,r,i=Fve){r==null&&(r=kY(t));const s=Mve(e,t,n),a=ie(s,i(t));return c_(a,r)}const TZe=te({stft_:_Ze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZe(e,t,n,r,i="bilinear",s=0){const a=X(e,"image","cropAndResize"),o=X(t,"boxes","cropAndResize","float32"),l=X(n,"boxInd","cropAndResize","int32"),u=o.shape[0];q(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),q(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),q(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),q(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),q(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),q(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:a,boxes:o,boxInd:l},f={method:i,extrapolationValue:s,cropSize:r};return ee.runKernel(iF,c,f)}const DZe=te({cropAndResize_:NZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IZe(e){const t=X(e,"image","flipLeftRight","float32");q(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return ee.runKernel(mF,n,{})}const OZe=te({flipLeftRight_:IZe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZe(e){const t=X(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];q(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),q(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,_l(t,i)}const FZe=te({grayscaleToRGB_:RZe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZe(e){const t=X(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];q(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),q(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=t.dtype,s=qe(t,"float32"),a=ji([.2989,.587,.114]);let o;switch(t.rank){case 2:o=s1("ij,j->i",s,a);break;case 3:o=s1("ijk,k->ij",s,a);break;case 4:o=s1("ijkl,l->ijk",s,a);break;case 5:o=s1("ijklm,m->ijkl",s,a);break;case 6:o=s1("ijklmn,n->ijklm",s,a);break;default:throw new Error("Not a valid tensor rank.")}return o=ta(o,-1),qe(o,i)}const LZe=te({rgbToGrayscale_:MZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZe(e,t,n=0,r=.5){const i=X(e,"image","rotateWithOffset","float32");q(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},a={radians:t,fillValue:n,center:r};return ee.runKernel(ZF,s,a)}const BZe=te({rotateWithOffset_:PZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pw(e,t,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const a=e.shape[0];return n=Math.min(n,a),q(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),q(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),q(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),q(t.rank===1,()=>"scores must be a 1D tensor"),q(t.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`),q(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zZe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=X(e,"boxes","nonMaxSuppression","float32"),a=X(t,"scores","nonMaxSuppression","float32"),o=Pw(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return ee.runKernel(EF,{boxes:s,scores:a},l)}const jZe=te({nonMaxSuppression_:zZe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZe(e,t,n){const r=VZe(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function VZe(e,t,n){return HZe(e,t,n||WZe)}function WZe(e,t){return e>t?1:e<t?-1:0}function HZe(e,t,n){let r=0,i=e.length,s=0,a=!1;for(;r<i;){s=r+(i-r>>>1);const o=n(t,e[s]);o>0?r=s+1:(i=s,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(e,t,n,r,i){return _Y(e,t,n,r,i,0)}function RM(e,t,n,r,i,s){return _Y(e,t,n,r,i,0,!1,s,!0)}function FM(e,t,n,r,i,s){return _Y(e,t,n,r,i,s,!0)}function _Y(e,t,n,r,i,s,a=!1,o=!1,l=!1){const u=[];for(let b=0;b<t.length;b++)t[b]>i&&u.push({score:t[b],boxIndex:b,suppressBeginIndex:0});u.sort(Rue);const c=s>0?-.5/s:0,f=[],d=[];for(;f.length<n&&u.length>0;){const b=u.pop(),{score:x,boxIndex:w,suppressBeginIndex:C}=b;if(x<i)break;let S=!1;for(let E=f.length-1;E>=C;--E){const A=GZe(e,w,f[E]);if(A>=r){S=!0;break}if(b.score=b.score*qZe(r,c,A),b.score<=i)break}b.suppressBeginIndex=f.length,S||(b.score===x?(f.push(w),d.push(b.score)):b.score>i&&UZe(u,b,Rue))}const h=f.length,m=n-h;o&&m>0&&(f.push(...new Array(m).fill(0)),d.push(...new Array(m).fill(0)));const g={selectedIndices:f};return a&&(g.selectedScores=d),l&&(g.validOutputs=h),g}function GZe(e,t,n){const r=e.subarray(t*4,t*4+4),i=e.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(o-s)*(l-a),m=(f-u)*(d-c);if(h<=0||m<=0)return 0;const g=Math.max(s,u),b=Math.max(a,c),x=Math.min(o,f),w=Math.min(l,d),C=Math.max(x-g,0)*Math.max(w-b,0);return C/(h+m-C)}function qZe(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function Rue(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function XZe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=X(e,"boxes","nonMaxSuppressionAsync"),a=X(t,"scores","nonMaxSuppressionAsync"),o=Pw(s,a,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([s.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:f}=OM(u,c,n,r,i);return s!==e&&s.dispose(),a!==t&&a.dispose(),ji(f,"int32")}const YZe=XZe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=X(e,"boxes","nonMaxSuppression"),o=X(t,"scores","nonMaxSuppression"),l=Pw(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:a,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},f=ee.runKernel(AF,u,c);return{selectedIndices:f[0],selectedScores:f[1]}}const ZZe=te({nonMaxSuppressionWithScore_:KZe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function QZe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const a=X(e,"boxes","nonMaxSuppressionAsync"),o=X(t,"scores","nonMaxSuppressionAsync"),l=Pw(a,o,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([a.data(),o.data()]),c=u[0],f=u[1],{selectedIndices:d,selectedScores:h}=FM(c,f,n,r,i,s);return a!==e&&a.dispose(),o!==t&&o.dispose(),{selectedIndices:ji(d,"int32"),selectedScores:ji(h)}}const JZe=QZe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=X(e,"boxes","nonMaxSuppression"),o=X(t,"scores","nonMaxSuppression"),l=Pw(a,o,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,d={boxes:a,scores:o},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:s},m=ee.runKernel(kF,d,h);return{selectedIndices:m[0],validOutputs:m[1]}}const tQe=te({nonMaxSuppressionPadded_:eQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nQe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const a=X(e,"boxes","nonMaxSuppressionAsync"),o=X(t,"scores","nonMaxSuppressionAsync"),l=Pw(a,o,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,f=l.scoreThreshold,[d,h]=await Promise.all([a.data(),o.data()]),{selectedIndices:m,validOutputs:g}=RM(d,h,u,c,f,s);return a!==e&&a.dispose(),o!==t&&o.dispose(),{selectedIndices:ji(m,"int32"),validOutputs:Et(g,"int32")}}const rQe=nQe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQe(e,t,n=!1,r=!1){const i=X(e,"images","resizeBilinear");q(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),q(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),q(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:t},u=ee.runKernel(OA,o,l);return a?ae(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Lve=te({resizeBilinear_:iQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQe(e,t,n=!1,r=!1){const i=X(e,"images","resizeNearestNeighbor");q(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),q(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),q(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),q(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,a=!1;i.rank===3&&(a=!0,s=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:s},l={alignCorners:n,halfPixelCenters:r,size:t},u=ee.runKernel(IA,o,l);return a?ae(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Pve=te({resizeNearestNeighbor_:sQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQe(e,t="binary",n=!1,r=.5){const i=X(e,"image","threshold"),s=.2989,a=.587,o=.114,l=i.shape[0]*i.shape[1];let u=ie(ji([r]),255),c,f,d,h;if(q(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),q(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),q(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),q(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),i.shape[2]===3){[c,f,d]=ho(i,[1,1,1],-1);const b=ie(c,s),x=ie(f,a),w=ie(d,o);h=Me(Me(b,x),w)}else h=e;if(t==="otsu"){const b=BX(qe(mM(h),"int32"),$u([]),256);u=oQe(b,l)}const m=n?Fm(h,u):Ao(h,u);return qe(ie(m,255),"int32")}function oQe(e,t){let n=ji([-1]),r=ji([0]),i=ji([0]),s,a,o,l,u,c;for(let f=0;f<e.size-1;f++){s=$n(e,0,f+1),a=$n(e,f+1),u=ct(lt(s),t),c=ct(lt(a),t);const d=lt(ie(s,gy(0,s.size)));o=ct(d,lt(s));const h=Yy(a.shape,s.size),m=Me(gy(0,a.size),h),g=ie(a,m);l=ct(lt(g),lt(a));const b=st(o,l),x=st(o,l),w=ie(u,c);i=ie(ie(w,b),x);const C=Ao(i,r);r=Ls(C,i,r),n=Ls(C,ji([f]),n)}return n}const lQe=te({threshold_:aQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQe(e,t,n="nearest",r="constant",i=0,s){const a=X(e,"image","transform","float32"),o=X(t,"transforms","transform","float32");q(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),q(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),q(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:a,transforms:o},u={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return ee.runKernel(YF,l,u)}const cQe=te({transform_:uQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQe(e,t,n){const r=X(e,"a","bandPart");q(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,a]=r.shape.slice(-2);let o,l;typeof t=="number"?(q(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),q(t<=s,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`),o=X(t<0?s:t,"numLower","bandPart")):(q(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Ls(Tx(t,0),s,tm(t,s))),typeof n=="number"?(q(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),q(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=X(n<0?a:n,"numUpper","bandPart")):(q(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ls(Tx(n,0),a,tm(n,a)));const u=ae(gy(0,s,1,"int32"),[-1,1]),c=gy(0,a,1,"int32"),f=st(u,c),d=Sc(Fm(f,o),ap(f,_r(l))),h=Ai([s,a],r.dtype);return ae(wo(Ll(ae(r,[-1,s,a])).map(m=>Ls(d,m,h))),i)}const dQe=te({bandPart_:fQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQe(e){let t;if(Array.isArray(e)){t=!1,q(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=e[0].shape[0];for(let s=1;s<e.length;++s)q(e[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[s].shape[0]} vs. ${i})`)}else t=!0,e=ho(e,e.shape[0],0).map(i=>Lm(i,[0]));q(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let i=0;i<e.length;++i)n.push(ee.tidy(()=>{let s=r[i];if(i>0)for(let a=0;a<i;++a){const o=ie(lt(ie(n[a],s)),n[a]);s=st(s,o)}return ct(s,Fw(s,"euclidean"))}));return t?wo(n,0):n}const pQe=te({gramSchmidt_:hQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mQe(e,t=!1){if(q(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return Fue(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),r=Ll(ae(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[u,c]=Fue(l,t);i.push(u),s.push(c)});const a=ae(wo(i,0),e.shape),o=ae(wo(s,0),e.shape);return[a,o]}}function Fue(e,t=!1){return ee.tidy(()=>{q(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let i=oM(n),s=If(e);const a=Of([[1]],[1,1]);let o=If(a);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=s,f=o,d=i;[o,s,i]=ee.tidy(()=>{const h=$n(s,[u,u],[n-u,1]),m=Fw(h),g=$n(s,[u,u],[1,1]),b=Ls(Ao(g,0),Of([[-1]]),Of([[1]])),x=st(g,ie(b,m)),w=ct(h,x);w.shape[0]===1?o=If(a):o=pi([a,$n(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);const C=_r(ct(nn(b,x),m)),S=$n(s,[u,0],[n-u,r]),E=ie(C,o),A=yn(o);if(u===0)s=st(S,nn(E,nn(A,S)));else{const I=st(S,nn(E,nn(A,S)));s=pi([$n(s,[0,0],[u,r]),I],0)}const k=yn(E),N=$n(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=st(N,nn(nn(N,o),k));else{const I=st(N,nn(nn(N,o),k));i=pi([$n(i,[0,0],[n,u]),I],1)}return[o,s,i]}),Jt([c,f,d])}return!t&&n>r&&(i=$n(i,[0,0],[n,r]),s=$n(s,[0,0],[r,r])),[i,s]})}const gQe=te({qr_:mQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Aa;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Aa||(Aa={}));function yQe(e,t,n=Aa.SUM_BY_NONZERO_WEIGHTS){const r=X(e,"losses","computeWeightedLoss");let i=null;t!=null&&(i=X(t,"weights","computeWeightedLoss"));const s=i==null?r:ie(r,i);if(n===Aa.NONE)return s;if(n===Aa.SUM)return lt(s);if(n===Aa.MEAN){if(i==null)return Kr(s);{const a=r.size/i.size,o=ct(lt(s),lt(i));return a>1?ct(o,Et(a)):o}}if(n===Aa.SUM_BY_NONZERO_WEIGHTS){if(i==null)return ct(lt(s),Et(r.size));{const a=ie(i,uo(r.shape)),o=qe(lt(my(a,Et(0))),"float32");return ct(lt(s),o)}}throw Error(`Unknown reduction: ${n}`)}const lp=te({computeWeightedLoss_:yQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQe(e,t,n,r=Aa.SUM_BY_NONZERO_WEIGHTS){const i=X(e,"labels","absoluteDifference"),s=X(t,"predictions","absoluteDifference");let a=null;n!=null&&(a=X(n,"weights","absoluteDifference")),Us(i.shape,s.shape,"Error in absoluteDifference: ");const o=$i(st(i,s));return lp(o,a,r)}const xQe=te({absoluteDifference_:bQe});function vQe(e,t,n,r,i=Aa.SUM_BY_NONZERO_WEIGHTS){const s=X(e,"labels","cosineDistance"),a=X(t,"predictions","cosineDistance");let o=null;r!=null&&(o=X(r,"weights","cosineDistance")),Us(s.shape,a.shape,"Error in cosineDistance: ");const l=Et(1),u=st(l,lt(ie(s,a),n,!0));return lp(u,o,i)}const wQe=te({cosineDistance_:vQe});function SQe(e,t,n,r=Aa.SUM_BY_NONZERO_WEIGHTS){let i=X(e,"labels","hingeLoss");const s=X(t,"predictions","hingeLoss");let a=null;n!=null&&(a=X(n,"weights","hingeLoss")),Us(i.shape,s.shape,"Error in hingeLoss: ");const o=Et(1);i=st(ie(Et(2),i),o);const l=Nc(st(o,ie(i,s)));return lp(l,a,r)}const CQe=te({hingeLoss_:SQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Qe(e,t,n,r=1,i=Aa.SUM_BY_NONZERO_WEIGHTS){const s=X(e,"labels","huberLoss"),a=X(t,"predictions","huberLoss");let o=null;n!=null&&(o=X(n,"weights","huberLoss")),Us(s.shape,a.shape,"Error in huberLoss: ");const l=Et(r),u=$i(st(a,s)),c=tm(u,l),f=st(u,c),d=Me(ie(Et(.5),lr(c)),ie(l,f));return lp(d,o,i)}const EQe=te({huberLoss_:$Qe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQe(e,t,n,r=1e-7,i=Aa.SUM_BY_NONZERO_WEIGHTS){const s=X(e,"labels","logLoss"),a=X(t,"predictions","logLoss");let o=null;n!=null&&(o=X(n,"weights","logLoss")),Us(s.shape,a.shape,"Error in logLoss: ");const l=Et(1),u=Et(r),c=_r(ie(s,tl(Me(a,u)))),f=ie(st(l,s),tl(Me(st(l,a),u))),d=st(c,f);return lp(d,o,i)}const AQe=te({logLoss_:kQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Qe(e,t,n,r=Aa.SUM_BY_NONZERO_WEIGHTS){const i=X(e,"labels","meanSquaredError"),s=X(t,"predictions","meanSquaredError");let a=null;n!=null&&(a=X(n,"weights","meanSquaredError")),Us(i.shape,s.shape,"Error in meanSquaredError: ");const o=CM(i,s);return lp(o,a,r)}const TQe=te({meanSquaredError_:_Qe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQe(e,t){const n=X(e,"labels","sigmoidCrossEntropyWithLogits"),r=X(t,"logits","sigmoidCrossEntropyWithLogits");Us(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Nc(r),s=ie(r,n),a=JA(vo(_r($i(r))));return Me(st(i,s),a)}function DQe(e,t,n,r=0,i=Aa.SUM_BY_NONZERO_WEIGHTS){let s=X(e,"multiClassLabels","sigmoidCrossEntropy");const a=X(t,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=X(n,"weights","sigmoidCrossEntropy")),Us(s.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=Et(r),c=Et(1),f=Et(.5);s=Me(ie(s,st(c,u)),ie(f,u))}const l=NQe(s,a);return lp(l,o,i)}const IQe=te({sigmoidCrossEntropy_:DQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Xf((i,s,a)=>{const l=e_(s,[n],!0),u=st(qe(s,"float32"),l);a([i,u]);const c=_r(ie(u,i));return{value:lt(c,[n]),gradFunc:(h,m)=>{const[g,b]=m,x=gi(h.shape,[n]);return[ie(ae(h,x),st(qe(g,"float32"),vo(b))),ie(ae(h,x),st(vo(b),qe(g,"float32")))]}}})(e,t)}function RQe(e,t,n,r=0,i=Aa.SUM_BY_NONZERO_WEIGHTS){let s=X(e,"onehotLabels","softmaxCrossEntropy");const a=X(t,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=X(n,"weights","softmaxCrossEntropy")),Us(s.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const u=Et(r),c=Et(1),f=Et(s.shape[1]);s=Me(ie(s,st(c,u)),ct(u,f))}const l=OQe(s,a);return lp(l,o,i)}const FQe=te({softmaxCrossEntropy_:RQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MQe(e,t,n,r){const i=X(e,"indices","sparseFillEmptyRows","int32"),s=X(t,"values","sparseFillEmptyRows"),a=X(n,"denseShape","sparseFillEmptyRows","int32"),o=X(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(s.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:i,values:s,denseShape:a,defaultValue:o},u=ee.runKernel(PF,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const LQe=te({sparseFillEmptyRows_:MQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQe(e,t,n){const r=X(e,"inputIndices","sparseReshape","int32"),i=X(t,"inputShape","sparseReshape","int32"),s=X(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const a={inputIndices:r,inputShape:i,newShape:s},o=ee.runKernel(BF,a);return{outputIndices:o[0],outputShape:o[1]}}const BQe=te({sparseReshape_:PQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQe(e,t,n){const r=X(e,"data","sparseSegmentMean"),i=X(t,"indices","sparseSegmentMean","int32"),s=X(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${s.shape}`);const a={data:r,indices:i,segmentIds:s};return ee.runKernel(zF,a)}const jQe=te({sparseSegmentMean_:zQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQe(e,t,n){const r=X(e,"data","sparseSegmentSum"),i=X(t,"indices","sparseSegmentSum","int32"),s=X(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(s.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${s.shape}`);const a={data:r,indices:i,segmentIds:s};return ee.runKernel(jF,a)}const VQe=te({sparseSegmentSum_:UQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WQe(e,t,n,r,i,s,a,o){const l=X(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=X(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:i,rightPad:s,padWidth:a,preserveShortSequences:o},f={data:l,dataSplits:u},d=ee.runKernel(HF,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const HQe=te({stringNGrams_:WQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQe(e,t,n=!0){const r=X(e,"input","stringSplit","string"),i=X(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const s={skipEmpty:n},a={input:r,delimiter:i},o=ee.runKernel(GF,a,s);return{indices:o[0],values:o[1],shape:o[2]}}const qQe=te({stringSplit_:GQe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQe(e,t){const n=X(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return ee.runKernel(qF,i,r)}const YQe=te({stringToHashBucketFast_:XQe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQe(e,t,n,r=!0){const i=X(e,"input","staticRegexReplace","string"),s={pattern:t,rewrite:n,replaceGlobal:r};return ee.runKernel(jA,{x:i},s)}const ZQe=te({staticRegexReplace_:KQe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bve={fft:u_,ifft:Ix,rfft:c_,irfft:SM},zve={hammingWindow:EZe,hannWindow:Fve,frame:Mve,stft:TZe},Tl={flipLeftRight:OZe,grayscaleToRGB:FZe,resizeNearestNeighbor:Pve,resizeBilinear:Lve,rgbToGrayscale:LZe,rotateWithOffset:BZe,cropAndResize:DZe,nonMaxSuppression:jZe,nonMaxSuppressionAsync:YZe,nonMaxSuppressionWithScore:ZZe,nonMaxSuppressionWithScoreAsync:JZe,nonMaxSuppressionPadded:tQe,nonMaxSuppressionPaddedAsync:rQe,threshold:lQe,transform:cQe},TY={bandPart:dQe,gramSchmidt:pQe,qr:gQe},jve={absoluteDifference:xQe,computeWeightedLoss:lp,cosineDistance:wQe,hingeLoss:CQe,huberLoss:EQe,logLoss:AQe,meanSquaredError:TQe,sigmoidCrossEntropy:IQe,softmaxCrossEntropy:FQe},Uve={sparseFillEmptyRows:LQe,sparseReshape:BQe,sparseSegmentMean:jQe,sparseSegmentSum:VQe},Vve={stringNGrams:HQe,stringSplit:qQe,stringToHashBucketFast:YQe,staticRegexReplace:ZQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QQe=new Map,sW=new Map;class Qy{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Al{constructor(){this.classNameMap={}}static getMap(){return Al.instance==null&&(Al.instance=new Al),Al.instance}static register(t){Al.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Pe(e,t,n){q(e.className!=null,()=>"Class being registered does not have the static className property defined."),q(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),q(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);const r=n,i=t+">"+r;return Al.register(e),QQe.set(i,e),sW.set(e,i),e}function JQe(e){return sW.has(e)?sW.get(e):e.className}const eJe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Qy,SerializationMap:Al,getRegisteredName:JQe,registerClass:Pe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let up=class extends Qy{minimize(t,n=!1,r){const{value:i,grads:s}=this.computeGradients(t,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:s[o.name]}));this.applyGradients(a)}else this.applyGradients(s);return Jt(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return Yxe(t,n)}dispose(){this.iterations_!=null&&Jt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Et(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}};Object.defineProperty(up,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NY extends up{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=ee.registeredVariables[r],a=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:he(()=>En(s).variable(a))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:he(()=>En(s).variable(a))});const o=Array.isArray(t)?t[i].tensor:t[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;he(()=>{const c=Me(ie(l,this.rho),ie(lr(o),1-this.rho)),f=ie(ct(us(Me(u,this.epsilon)),us(Me(l,this.epsilon))),o),d=Me(ie(u,this.rho),ie(lr(f),1-this.rho));l.assign(c),u.assign(d);const h=Me(ie(f,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Jt(this.accumulatedGrads.map(t=>t.variable)),Jt(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DY extends up{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=ee.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:he(()=>Yy(s.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(t)?t[i].tensor:t[r];if(a==null)return;const o=this.accumulatedGrads[i].variable;he(()=>{const l=Me(o,lr(a));o.assign(l);const u=Me(ie(ct(a,us(Me(l,ee.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Jt(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IY extends up{static get className(){return"Adam"}constructor(t,n,r,i=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],he(()=>{this.accBeta1=Et(n).variable(),this.accBeta2=Et(r).variable()}),i==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);he(()=>{const r=st(1,this.accBeta1),i=st(1,this.accBeta2);n.forEach((s,a)=>{const o=ee.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:he(()=>En(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${s}/v`,variable:he(()=>En(o).variable(l))});const u=Array.isArray(t)?t[a].tensor:t[s];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,f=this.accumulatedSecondMoment[a].variable,d=Me(ie(c,this.beta1),ie(u,1-this.beta1)),h=Me(ie(f,this.beta2),ie(lr(u),1-this.beta2)),m=ct(d,r),g=ct(h,i);c.assign(d),f.assign(h);const b=Me(ie(ct(m,Me(us(g),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(ie(this.accBeta1,this.beta1)),this.accBeta2.assign(ie(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Jt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Jt(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),he(()=>{this.accBeta1.assign(qf(this.beta1,this.iterations_+1)),this.accBeta2.assign(qf(this.beta2,this.iterations_+1))});const n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OY extends up{static get className(){return"Adamax"}constructor(t,n,r,i=null,s=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],he(()=>{this.iteration=Et(0).variable(),this.accBeta1=Et(n).variable()}),i==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);he(()=>{const r=st(1,this.accBeta1),i=ct(-this.learningRate,Me(ie(this.iteration,this.decay),1));n.forEach((s,a)=>{const o=ee.registeredVariables[s],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${s}/m`,variable:En(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${s}/v`,variable:En(o).variable(l)});const u=Array.isArray(t)?t[a].tensor:t[s];if(u==null)return;const c=this.accumulatedFirstMoment[a].variable,f=this.accumulatedWeightedInfNorm[a].variable,d=Me(ie(c,this.beta1),ie(u,1-this.beta1)),h=ie(f,this.beta2),m=$i(u),g=dd(h,m);c.assign(d),f.assign(g);const b=Me(ie(ct(i,r),ct(d,Me(g,this.epsilon))),o);o.assign(b)}),this.iteration.assign(Me(this.iteration,1)),this.accBeta1.assign(ie(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Jt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Jt(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MM extends up{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=Array.isArray(t)?t[i].tensor:t[r];if(s==null)return;const a=ee.registeredVariables[r];he(()=>{const o=Me(ie(this.c,s),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=zi(Et(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RY extends MM{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Et(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=ee.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:he(()=>En(s).variable(!1))});const a=this.accumulations[i].variable,o=Array.isArray(t)?t[i].tensor:t[r];o!=null&&he(()=>{let l;const u=Me(ie(this.m,a),o);this.useNesterov?l=Me(ie(this.c,Me(o,ie(u,this.m))),s):l=Me(ie(this.c,u),s),a.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Jt(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FY extends up{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=ee.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const s=ee.registeredVariables[r],a=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:he(()=>En(s).variable(a))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:he(()=>En(s).variable(a))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:he(()=>En(s).variable(a))});const o=Array.isArray(t)?t[i].tensor:t[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;he(()=>{const c=Me(ie(l,this.decay),ie(lr(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,d=Me(ie(f,this.decay),ie(o,1-this.decay)),h=ct(ie(o,this.learningRate),us(st(c,Me(lr(d),this.epsilon)))),m=Me(ie(u,this.momentum),h);l.assign(c),f.assign(d),u.assign(m);const g=st(s,m);s.assign(g)}else{const f=Me(ie(l,this.decay),ie(lr(o),1-this.decay)),d=Me(ie(u,this.momentum),ct(ie(o,this.learningRate),us(Me(f,this.epsilon))));l.assign(f),u.assign(d);const h=st(s,d);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Jt(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Jt(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Jt(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tJe=[NY,DY,IY,OY,RY,FY,MM];function nJe(){for(const e of tJe)Pe(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJe="model",iJe=".json",sJe=".weights.bin";function Mue(e){return new Promise(t=>setTimeout(t)).then(e)}class yy{constructor(t){if(!pe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(yy.URL_SCHEME)&&(t=t.slice(yy.URL_SCHEME.length)),(t==null||t.length===0)&&(t=rJe),this.modelJsonFileName=t+iJe,this.weightDataFileName=t+sJe}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Tc.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const i=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s=Nxe(t,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await Mue(()=>o.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await Mue(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:GA(t)}}}}yy.URL_SCHEME="downloads://";class aJe{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{const s=JSON.parse(i.target.result),a=s.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(s.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:a});return}const l=$X(s,u=>this.loadWeights(u));t(l)},r.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(t){const n=[],r=[];for(const a of t)n.push(...a.weights),r.push(...a.paths);const i=this.checkManifestAndWeightFiles(t),s=r.map(a=>this.loadWeightsFile(a,i[a]));return Promise.all(s).then(a=>[n,a])}loadWeightsFile(t,n){return new Promise((r,i)=>{const s=new FileReader;s.onload=a=>{const o=a.target.result;r(o)},s.onerror=a=>i(`Failed to weights data from file of path '${t}'.`),s.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){const n=[],r=this.weightsFiles.map(s=>Eue(s.name)),i={};for(const s of t)s.paths.forEach(a=>{const o=Eue(a);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);i[a]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const oJe=e=>pe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(yy.URL_SCHEME)?lJe(e.slice(yy.URL_SCHEME.length)):null;Xr.registerSaveRouter(oJe);function lJe(e="model"){return new yy(e)}function uJe(e){return new aJe(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lue(e,t,n,r){a(e),n=n??0,r=r??1,o(n,r);let i=0;const s=l=>(l.then(u=>{const c=n+ ++i/e.length*(r-n);return t(c),u}),l);function a(l){q(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){q(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),q(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),q(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Wve(e,t){t==null&&(t={});const n=t.fetchFunc==null?pe().platform.fetch:t.fetchFunc,r=e.map(f=>n(f,t.requestInit,{isBinary:!0})),o=(t.onProgress==null?await Promise.all(r):await Lue(r,t.onProgress,0,.5)).map(f=>f.arrayBuffer());return t.onProgress==null?await Promise.all(o):await Lue(o,t.onProgress,.5,1)}function cJe(e,t){var n;const r=t.fetchFunc==null?pe().platform.fetch:t.fetchFunc;let i=0,s;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:async a=>{for(var o;i<e.length;){s||(s=(await r(e[i],t.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await s.read();if(l){i++,s=void 0,(o=t.onProgress)===null||o===void 0||o.call(t,i/e.length);continue}a.enqueue(u);return}a.close()}})}async function fJe(e,t="",n,r){return Hve(a=>Wve(a,{requestInit:r}))(e,t,n)}function Hve(e){return async(t,n="",r)=>{const i=t.map(()=>!1),s={},a=r!=null?r.map(()=>!1):[],o=[];if(t.forEach((h,m)=>{let g=0;h.weights.forEach(b=>{const x="quantization"in b?b.quantization.dtype:b.dtype,w=ly[x]*we(b.shape),C=()=>{i[m]=!0,s[m]==null&&(s[m]=[]),s[m].push({manifestEntry:b,groupOffset:g,sizeBytes:w})};r!=null?r.forEach((S,E)=>{S===b.name&&(C(),a[E]=!0)}):C(),o.push(b.name),g+=w})}),!a.every(h=>h)){const h=r.filter((m,g)=>!a[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=i.reduce((h,m,g)=>(m&&h.push(g),h),[]),u=[];l.forEach(h=>{t[h].paths.forEach(m=>{const g=n+(n.endsWith("/")?"":"/")+m;u.push(g)})});const c=await e(u),f={};let d=0;return l.forEach(h=>{const m=t[h].paths.length,g=new Tc(c.slice(d,d+m));s[h].forEach(x=>{const w=g.slice(x.groupOffset,x.groupOffset+x.sizeBytes),C=kxe(w,[x.manifestEntry]);for(const S in C)f[S]=C[S]}),d+=m}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJe="application/octet-stream",hJe="application/json";class MY{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(q(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=pe().platform.fetch,q(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&q(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],i=Nxe(t,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:hJe}),"model.json"),t.weightData!=null){const a=Tc.join(t.weightData);n.body.append("model.weights.bin",new Blob([a],{type:dJe}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:GA(t),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const t=await this.loadModelJSON();return $X(t,n=>this.loadWeights(n))}async loadStream(){const t=await this.loadModelJSON(),n=await this.getWeightUrls(t.weightsManifest),r=VO(t.weightsManifest),i=()=>cJe(n,this.loadOptions);return Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=pJe(n),s=this.weightPathPrefix||r,a=[],o=[];for(const l of t)for(const u of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...await Promise.all(o)),a}async loadWeights(t){const n=await this.getWeightUrls(t),r=VO(t),i=await Wve(n,this.loadOptions);return[r,i]}}MY.URL_SCHEME_REGEX=/^https?:\/\//;function pJe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}function aW(e){return e.match(MY.URL_SCHEME_REGEX)!=null}const Gve=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>aW(r)):n=aW(e),n)return LY(e,t)}return null};Xr.registerSaveRouter(Gve);Xr.registerLoadRouter(Gve);function LY(e,t){return new MY(e,t)}function mJe(e,t){return LY(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iz{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class qve{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class gJe{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}}function yJe(e,t,n,r){const i=arguments;return new gJe(HO(...i))}function HO(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new iz(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new iz({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new iz({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function bJe(e){return new qve(e)}function xJe(e){return new qve(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PY=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Tc,browserFiles:uJe,browserHTTPRequest:mJe,concatenateArrayBuffers:Txe,copyModel:YGe,decodeWeights:kxe,decodeWeightsStream:_xe,encodeWeights:QV,fromMemory:yJe,fromMemorySync:HO,getLoadHandlers:FGe,getModelArtifactsForJSON:$X,getModelArtifactsForJSONSync:CX,getModelArtifactsInfoForJSON:GA,getSaveHandlers:Dxe,getWeightSpecs:VO,http:LY,isHTTPScheme:aW,listModels:qGe,loadWeights:fJe,moveModel:KGe,registerLoadRouter:RGe,registerSaveRouter:OGe,removeModel:XGe,weightsLoaderFactory:Hve,withSaveHandler:bJe,withSaveHandlerSync:xJe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vJe(e,t,n){const r=X(e,"labels","confusionMatrix"),i=X(t,"predictions","confusionMatrix");q(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),q(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),q(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),q(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),q(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const s=nm(qe(r,"int32"),n),a=nm(qe(i,"int32"),n),o=yn(s),l=nn(o,a);return qe(l,"int32")}const wJe=te({confusionMatrix_:vJe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SJe=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:wJe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _g,Pue=!1;function Xve(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,a=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)s=!0;else if(e.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(pE(jO,ee.backendName)!=null){const m={pixels:e},g={numChannels:t};return ee.runKernel(jO,m,g)}const[u,c]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];let f;if(a)f=e.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)f=e.data;else if(s||i||o){if(_g==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")_g=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else _g=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});_g.canvas.width=u,_g.canvas.height=c,_g.drawImage(e,0,0,u,c),f=_g.getImageData(0,0,u,c).data}let d;if(t===4)d=new Int32Array(f);else{const m=u*c;d=new Int32Array(m*t);for(let g=0;g<m;g++)for(let b=0;b<t;++b)d[g*t+b]=f[g*4+b]}return xY(d,[c,u,t],"int32")}function CJe(e){return e!=null&&e.data instanceof Uint8Array}function $Je(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function EJe(e){return e!=null&&e.width!==0&&e.height!==0}function kJe(e){return $Je()&&!(e instanceof ImageBitmap)&&EJe(e)&&!CJe(e)}async function AJe(e,t=3){let n=null;if(pe().getBool("WRAP_TO_IMAGEBITMAP")&&kJe(e)){let r;try{r=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return Xve(n,t)}function Yve(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);const t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function _Je(e){const t=(e==null?void 0:e.alpha)||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}async function TJe(e,t){let n=X(e,"img","toPixels");if(!(e instanceof Wn)){const u=n;n=qe(u,"int32"),u.dispose()}Yve(n);const[r,i]=n.shape.slice(0,2),s=n.rank===2?1:n.shape[2],a=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let u=0;u<r*i;++u){const c=[0,0,0,255];for(let d=0;d<s;d++){const h=a[u*s+d];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);s===1?(c[0]=h*o,c[1]=h*o,c[2]=h*o):c[d]=h*o}const f=u*4;l[f+0]=Math.round(c[0]),l[f+1]=Math.round(c[1]),l[f+2]=Math.round(c[2]),l[f+3]=Math.round(c[3])}if(t!=null){Pue||pE(cF,ee.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Pue=!0),t.width=i,t.height=r;const u=t.getContext("2d"),c=new ImageData(l,i,r);u.putImageData(c,0,0)}return n!==e&&n.dispose(),l}function NJe(e,t,n){let r=X(e,"img","draw");if(!(e instanceof Wn)){const a=r;r=qe(a,"int32"),a.dispose()}Yve(r),_Je(n==null?void 0:n.imageOptions);const i={image:r},s={canvas:t,options:n};ee.runKernel(cF,i,s)}const GO=te({fromPixels_:Xve}),DJe=Object.freeze(Object.defineProperty({__proto__:null,draw:NJe,fromPixels:GO,fromPixelsAsync:AJe,toPixels:TJe},Symbol.toStringTag,{value:"Module"}));function LM(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(we(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,s=i[i.length-1];let a=1;for(let f=0;f<i.length-1;++f)a*=i[f];const o=e.shape,l=i.slice();l.pop();let u=1;for(let f=s;f<n;++f)u*=o[f],l.push(o[f]);const c=[...Ct(e.shape).map(f=>f/u),1].slice(0,s);return[l,a,u,c]}const IJe=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:LM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oW=-2,OJe=-1;function BY(e,t,n){const r=e.shape.length;q(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),q(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)q(t[i]+n[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function RJe(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function zY(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function Kve(e,t,n,r){const i=[...e];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[t]=1:(i.splice(t,0,1),i.pop());return i}function Zve(e,t,n){return n<=e?n:n-(t-1)}function Qve(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function FJe(e,t,n,r,i,s,a,o,l){const u=e.length;let c=new Array(u),f=new Array(u),d=new Array(u);if(t.length&&n>0){const h=t[0],m=n+1;c=Jve(a,h,m,r,e),f=ewe(o,h,m,i,e),d=Kve(s,h,m,e)}else for(let h=0;h<u;h++)c[h]=nwe(a,r,s,e,h,l),f[h]=rwe(o,i,s,e,h,l),d[h]=twe(s,h,l);return{begin:c,end:f,strides:d}}function Jve(e,t,n,r,i){const s=[...i],a=Qve(n,t);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=0;else{const l=Zve(t,n,o);let u=r[l];e&1<<l&&(u=0),s[o]=u}return s}function ewe(e,t,n,r,i){const s=[...i],a=Qve(n,t);for(let o=0;o<s.length;o++)if(a.indexOf(o)>-1)s[o]=Number.MAX_SAFE_INTEGER;else{const l=Zve(t,n,o);let u=r[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[o]=u}for(let o=0;o<s.length;o++){const l=i[o];s[o]<0&&(s[o]+=l),s[o]=Y0(0,s[o],i[o])}return s}function twe(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function nwe(e,t,n,r,i,s){let a=t[i];const o=n[i]||1;(e&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=Y0(0,a,l-1),a}function rwe(e,t,n,r,i,s){let a=t[i];const o=n[i]||1;(e&1<<i||s&1<<i||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),o>0?a=Y0(0,a,l):a=Y0(-1,a,l-1),a}function jY(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function UY(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function PM(e,t,n){let r;const i=e.shape.length;typeof t=="number"?r=[t,...new Array(i-1).fill(0)]:t.length<i?r=t.concat(new Array(i-t.length).fill(0)):r=t.slice(),r.forEach(a=>{q(a!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((a,o)=>a>=0?a:(q(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),e.shape[o]-r[o])),[r,s]}function VY(e,t,n,r,i,s,a,o,l){let u;if(r==null?(u=new Array(t.length),u.fill(1)):u=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:s,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let C=0;C<f.dims;C++)c&&(1<<C&o)!==0&&f.numAddAxisAfterEllipsis++,1<<C&a&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};MJe(f,d);let h=!0,m=!0,g=!0;const b=[],x=[];for(let C=0;C<e.length;++C){if(d.strides[C]===0)throw Error(`strides[${C}] must be non-zero`);const S=!!(d.shrinkAxisMask&1<<C),E=e[C];if(E===-1){b.push(S?1:-1);continue}const A=[d.beginMask&1<<C,d.endMask&1<<C],k=[d.strides[C]>0?0:-1,d.strides[C]>0?E:E-1];if(S&&d.strides[C]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&d.strides[C]===1;const N=!!(d.beginMask&1<<C&&d.endMask&1<<C);if(d.beginValid&&d.endValid){if(S){const L=d.begin[C]<0?E+d.begin[C]:d.begin[C];if(d.begin[C]=L,d.end[C]=d.begin[C]+1,L<0||L>=E)throw Error(`slice index ${d.begin[C]} of dimension ${C} out of bounds.`)}else d.begin[C]=Bue(d.begin[C],0,d.strides[C],E,A,k),d.end[C]=Bue(d.end[C],1,d.strides[C],E,A,k);const D=d.strides[C]===1&&d.begin[C]===0&&d.end[C]===E;h=h&&D,m=m&&(C===0&&d.strides[C]===1||D)}else h=h&&d.strides[C]===1&&N,m=m&&(C===0&&d.strides[C]===1||N);let I,T=!1;if(d.beginValid&&d.endValid?(I=d.end[C]-d.begin[C],T=!0):S?(I=1,T=!0):N&&E>=0&&(d.strides[C]<0?I=-E:I=E,T=!0),T){let D;I===0||I<0!=d.strides[C]<0?D=0:D=Math.trunc(I/d.strides[C])+(I%d.strides[C]!==0?1:0),b.push(D)}else b.push(-1)}for(let C=0;C<d.finalShapeGatherIndices.length;++C){const S=d.finalShapeGatherIndices[C];S>=0?x.push(b[S]):S===oW&&x.push(1)}return{finalShapeSparse:x.filter((C,S)=>d.finalShapeGatherIndices[S]!==oW),finalShape:x,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:d.begin,end:d.end,strides:d.strides}}function MJe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(oW),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(OJe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function Bue(e,t,n,r,i,s){if(i[t])return n>0?s[t]:s[t+1&1];{const a=e<0?r+e:e;return a<s[0]?s[0]:a>s[1]?s[1]:a}}const iwe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:BY,computeFlatOffset:UY,computeOutShape:zY,getNormalizedAxes:FJe,isSliceContinous:jY,maskToAxes:RJe,parseSliceParams:PM,sliceInfo:VY,startForAxis:nwe,startIndicesWithElidedDims:Jve,stopForAxis:rwe,stopIndicesWithElidedDims:ewe,stridesForAxis:twe,stridesWithElidedDims:Kve},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const LJe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class swe{static sgd(t){return new MM(t)}static momentum(t,n,r=!1){return new RY(t,n,r)}static rmsprop(t,n=.9,r=0,i=null,s=!1){return new FY(t,n,r,i,s)}static adam(t=.001,n=.9,r=.999,i=null){return new IY(t,n,r,i)}static adadelta(t=.001,n=.95,r=null){return new NY(t,n,r)}static adamax(t=.002,n=.9,r=.999,i=null,s=0){return new OY(t,n,r,i,s)}static adagrad(t,n=.1){return new DY(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const no=swe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PJe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function f_(){return new Promise(e=>PJe(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WY(e,t){const n=e[0].length;e.forEach((i,s)=>{q(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),q(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((i,s)=>{for(let a=0;a<n;a++)q(a===t||i[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Rf(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ic;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(ic||(ic={}));function awe(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],a=r[r.length-n.length+i],o=r[a];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${s} but shape[${i+e}] = ${o}`)}else r[a]=s}return r}function owe(e){const t={FIRST_DIM_SIZE:ic.FIRST_DIM_SIZE,VALUE_ROWIDS:ic.VALUE_ROWIDS,ROW_LENGTHS:ic.ROW_LENGTHS,ROW_SPLITS:ic.ROW_SPLITS,ROW_LIMITS:ic.ROW_LIMITS,ROW_STARTS:ic.ROW_STARTS},n=[];for(const r of e)if(r in t)n.push(t[r]);else break;return n}function lwe(e){return e.length===0?0:e[0]===ic.FIRST_DIM_SIZE?e.length-1:e.length}function uwe(e,t){if(e==null||t==null)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=e[i],a=t[i+1];if(s>=0&&a>=0&&s!==1&&s!==a)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${s} but ragged tensor input.flatValues.shape[${i-e.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HY=30;function BM(e){return e<=HY?e:PO(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(e,t,n){const r=n*(typeof e=="number"?e:e[0]),i=t*(typeof e=="number"?e:e[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d_(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const s=t.length;for(let a=0;a<s;++a)i=i.concat([e[a+1]/t[a],t[a]]);i=i.concat(e.slice(s+1))}return i}function h_(e,t,n=!0){const r=[];if(n){r.push(t);for(let i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{const i=[],s=[];for(let a=1;a<e;++a)a>=t*2+1||a%2===1?s.push(a):i.push(a);r.push(...i),r.push(0),r.push(...s)}return r}function p_(e,t,n,r=!0){const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let s=1;s<e.length;++s)s<=t.length?r?i.push(t[s-1]*e[s]):i.push(e[s]/t[s-1]):i.push(e[s]);return i}function qY(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function XY(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zM=1.7580993408473768,jM=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YY=.3275911,KY=.254829592,ZY=-.284496736,QY=1.421413741,JY=-1.453152027,eK=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gh(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function cwe(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function fwe(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function dwe(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function tK(e,t){const n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function hwe(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function pwe(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const s=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function mwe(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sz="->",BJe=/->/g,zue=",",jue="...";function nK(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(BJe,"").length)/sz.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${sz}").`);const[r,i]=e.split(sz);q(r.indexOf(jue)===-1,()=>`The ellipsis notation ("${jue}") is not supported yet.`);const s=r.split(zue),a=s.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<i.length;++d){const h=i[d];if(!s.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let d=0;d<r.length;++d){const h=r[d];o.indexOf(h)===-1&&h!==zue&&o.push(h)}const l=new Array(s.length);for(let d=0;d<a;++d){if(new Set(s[d].split("")).size!==s[d].length)throw new Error(`Found duplicate axes in input component ${s[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let h=0;h<s[d].length;++h)l[d].push(o.indexOf(s[d][h]))}const u=o.length,c=i.length,f=[];for(let d=c;d<u;++d)f.push(d);return{allDims:o,summedDims:f,idDims:l}}function rK(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function iK(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let a=0;a<t[i].length;++a)r[t[i][a]]===void 0?r[t[i][a]]=s[a]:q(r[t[i][a]]===s[a],()=>`Expected dimension ${r[t[i][a]]} at axis ${a} of input shaped ${JSON.stringify(s)}, but got dimension ${s[a]}`)}}function sK(e,t){const n=e,r=[];let i=0;e.length===0&&n.push(-1),i=e.length+1;for(let a=0;a<i;++a)r.push([]);const s=[];for(let a=0;a<n.length;++a){const o=n[a],l=zJe(t,o);for(const u of l)s.indexOf(u)===-1&&(r[a].push(u),s.push(u))}return{path:n,steps:r}}function aK(e){return e.every((t,n)=>t===n)}function zJe(e,t){const n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function oK(e,t,n=0){let r=[];if(typeof t=="number")q(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce((a,o)=>(o===-1&&(a+=1),a),0);q(i<=1,()=>"There should be only one negative value in split array.");const s=t.indexOf(-1);if(s!==-1){const a=t.reduce((o,l)=>l>0?o+l:o);t[s]=e.shape[n]-a}q(e.shape[n]===t.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwe(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function ywe(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function bwe(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function vwe(e,t){return`size ${e} must be non-negative, not ${t}`}function wwe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Swe(e,t){const n=we(e),r=we(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function Cwe(e,t){const n=we(e),r=we(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(){return"segment ids must be >= 0"}function $we(){return"segment ids are not increasing"}function Ewe(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function kwe(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(e,t){let n=!1,r;for(e<=HY?(r=e,n=!0):r=PO(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=PO(e,r+1);return r}function _we(e,t,n){const r=[],i=e.length;for(let s=0;s<i;s++)s!==t?r.push(e[s]):r.push(n);return r}function lK(e,t,n,r){const i=t.shape.length,s=e.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(e.shape[f]!==t.shape[f])throw new Error(`x.shape[${f}]: ${e.shape[f]} should be equal to indices.shape[${f}]: ${t.shape[f]}.`);const a=e.shape[n],o=[];let l=1,u=1,c=1;for(let f=0;f<r;++f)o.push(e.shape[f]),l*=e.shape[f];for(let f=r;f<n;f++)o.push(e.shape[f]),u*=e.shape[f];for(let f=r;f<i;f++)o.push(t.shape[f]);for(let f=n+1;f<s;f++)o.push(e.shape[f]),c*=e.shape[f];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:o}}const jJe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:lK,computeOutShape:_we,segOpComputeOptimalWindowSize:Awe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qh(e){try{return e.map(t=>Vh(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function Twe(e){return e.map(t=>Df(t))}const Nwe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:KY,ERF_A2:ZY,ERF_A3:QY,ERF_A4:JY,ERF_A5:eK,ERF_P:YY,PARALLELIZE_THRESHOLD:HY,get RowPartitionType(){return ic},SELU_SCALE:jM,SELU_SCALEALPHA:zM,applyActivation:DM,assertAndGetBroadcastShape:Gt,assertAxesAreInnerMostDims:Ws,assertParamsConsistent:WY,assignToTypedArray:hwe,axesAreInnerMostDims:QX,calculateShapes:Pm,checkEinsumDimSizes:iK,checkPadOnDimRoundingMode:qa,combineLocations:Gxe,combineRaggedTensorToTensorShapes:awe,complexWithEvenIndex:fwe,complexWithOddIndex:dwe,computeConv2DInfo:fs,computeConv3DInfo:Om,computeDefaultPad:RX,computeDilation2DInfo:qA,computeOptimalWindowSize:BM,computeOutAndReduceShapes:ds,computeOutShape:Rf,computePool2DInfo:Pu,computePool3DInfo:ip,convertConv2DDataFormat:sp,decodeEinsumEquation:nK,eitherStridesOrDilationsAreOne:Vs,expandShapeToKeepDim:gi,exponent:mwe,exponents:pwe,fromStringArrayToUint8:Twe,fromUint8ToStringArray:qh,getAxesPermutation:ei,getBroadcastDims:hy,getComplexWithIndex:tK,getEinsumComputePath:sK,getEinsumPermutation:rK,getFusedBiasGradient:NM,getFusedDyActivation:TM,getImageCenter:GY,getInnerMostAxes:yi,getPermuted:h_,getRaggedRank:lwe,getReductionAxes:Di,getReshaped:d_,getReshapedPermuted:p_,getRowPartitionTypesHelper:owe,getSliceBeginCoords:qY,getSliceSize:XY,getSparseFillEmptyRowsIndicesDenseShapeMismatch:gwe,getSparseFillEmptyRowsNegativeIndexErrorMessage:ywe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:bwe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:wwe,getSparseReshapeInputOutputMismatchErrorMessage:Cwe,getSparseReshapeInputOutputMultipleErrorMessage:Swe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:xwe,getSparseReshapeNegativeOutputDimErrorMessage:vwe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:kwe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:lW,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:$we,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Ewe,getUndoAxesPermutation:Rm,isIdentityPermutation:aK,log:RHe,mergeRealAndImagArrays:Gh,prepareAndValidate:LM,prepareSplitSize:oK,segment_util:jJe,shouldFuse:IM,slice_util:iwe,splitRealAndImagArrays:cwe,stridesOrDilationsArePositive:dy,tupleValuesAreOne:J0,upcastType:yo,validateDefaultValueShape:uwe,validateInput:$M,validateUpdateShape:vY,warn:kl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UJe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:OM,nonMaxSuppressionV4Impl:RM,nonMaxSuppressionV5Impl:FM,whereImpl:AM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */nJe();const VJe=Object.freeze(Object.defineProperty({__proto__:null,Abs:Uk,Acos:Lv,Acosh:Pv,AdadeltaOptimizer:NY,AdagradOptimizer:DY,AdamOptimizer:IY,AdamaxOptimizer:OY,Add:Xy,AddN:Vk,All:q6,Any:X6,ArgMax:Wk,ArgMin:Hk,Asin:Bv,Asinh:zv,Atan:jv,Atan2:Vv,Atanh:Uv,AvgPool:Gk,AvgPool3D:qk,AvgPool3DGrad:K6,AvgPoolGrad:Y6,BatchMatMul:Xk,BatchToSpaceND:Yk,Bincount:Z6,BitwiseAnd:Kk,BroadcastArgs:Q6,BroadcastTo:oxe,Cast:Wv,Ceil:Hv,ClipByValue:Gv,Complex:J6,ComplexAbs:Zk,Concat:Qk,Conv2D:Jk,Conv2DBackpropFilter:eF,Conv2DBackpropInput:eA,Conv3D:tA,Conv3DBackpropFilterV2:tF,Conv3DBackpropInputV2:nF,Cos:qv,Cosh:Xv,CropAndResize:iF,Cumprod:rF,Cumsum:nA,DataStorage:lX,DenseBincount:sF,DepthToSpace:aF,DepthwiseConv2dNative:rA,DepthwiseConv2dNativeBackpropFilter:oF,DepthwiseConv2dNativeBackpropInput:lF,Diag:uF,Dilation2D:iA,Dilation2DBackpropFilter:zO,Dilation2DBackpropInput:BO,Draw:cF,get ENV(){return hX},Einsum:fF,Elu:Kv,EluGrad:dF,Environment:sxe,Equal:sA,Erf:Zv,Exp:Qv,ExpandDims:aA,Expm1:Jv,FFT:hF,Fill:pF,FlipLeftRight:mF,Floor:ew,FloorDiv:tw,FromPixels:jO,FusedBatchNorm:oA,FusedConv2D:fE,FusedDepthwiseConv2D:dE,GatherNd:gF,GatherV2:lA,Greater:uA,GreaterEqual:nw,IFFT:yF,Identity:rw,Imag:bF,IsFinite:iw,IsInf:sw,IsNan:aw,KernelBackend:V6,LRN:gA,LRNGrad:vF,LeakyRelu:cA,Less:fA,LessEqual:dA,LinSpace:xF,Log:ow,Log1p:lw,LogSoftmax:lxe,LogicalAnd:hA,LogicalNot:pA,LogicalOr:mA,LogicalXor:THe,LowerBound:NHe,MatrixBandPart:DHe,Max:yA,MaxPool:bA,MaxPool3D:xA,MaxPool3DGrad:SF,MaxPoolGrad:wF,MaxPoolWithArgmax:CF,Maximum:uw,Mean:vA,Min:wA,Minimum:cw,MirrorPad:SA,Mod:fw,MomentumOptimizer:RY,Multinomial:$F,Multiply:dw,Neg:CA,NonMaxSuppressionV3:EF,NonMaxSuppressionV4:kF,NonMaxSuppressionV5:AF,NotEqual:$A,OP_SCOPE_SUFFIX:xX,OneHot:kA,OnesLike:EA,Optimizer:up,OptimizerConstructors:swe,Pack:AA,PadV2:_A,Pool:IHe,Pow:hw,Prelu:TA,Prod:NA,RMSPropOptimizer:FY,RaggedGather:_F,RaggedRange:TF,RaggedTensorToTensor:NF,Range:DF,get Rank(){return HV},Real:IF,RealDiv:Yv,Reciprocal:pw,get Reduction(){return Aa},Relu:mw,Relu6:gw,Reshape:DA,ResizeBilinear:OA,ResizeBilinearGrad:RF,ResizeNearestNeighbor:IA,ResizeNearestNeighborGrad:OF,Reverse:RA,RotateWithOffset:ZF,Round:yw,Rsqrt:bw,SGDOptimizer:MM,ScatterNd:FF,SearchSorted:LF,Select:FA,Selu:xw,Sigmoid:Cw,Sign:Sw,Sin:vw,Sinh:ww,Slice:MA,Softmax:zA,Softplus:$w,SpaceToBatchND:PA,SparseFillEmptyRows:PF,SparseReshape:BF,SparseSegmentMean:zF,SparseSegmentSum:jF,SparseToDense:UF,SplitV:BA,Sqrt:Ew,Square:VF,SquaredDifference:kw,StaticRegexReplace:jA,Step:Dw,StridedSlice:WF,StringNGrams:HF,StringSplit:GF,StringToHashBucketFast:qF,Sub:Aw,Sum:LA,Tan:_w,Tanh:Tw,Tensor:Wn,TensorBuffer:Ni,TensorScatterUpdate:MF,Tile:Nw,TopK:XF,Transform:YF,Transpose:P1,Unique:KF,Unpack:UA,UnsortedSegmentSum:VA,UpperBound:OHe,Variable:mE,ZerosLike:WA,_FusedMatMul:cE,abs:$i,acos:kX,acosh:AX,add:Me,addN:Bxe,all:tM,any:yE,argMax:fy,argMin:_X,asin:TX,asinh:NX,atan:DX,atan2:IX,atanh:OX,avgPool:XA,avgPool3d:FX,backend:wX,backend_util:Nwe,basicLSTMCell:zxe,batchNorm:Iw,batchNorm2d:MX,batchNorm3d:LX,batchNorm4d:PX,batchToSpaceND:YA,bincount:BX,bitwiseAnd:jxe,booleanMaskAsync:Eve,broadcastArgs:Uxe,broadcastTo:B1,broadcast_util:fXe,browser:DJe,buffer:Zt,cast:qe,ceil:zX,clipByValue:xo,clone:If,complex:Wh,concat:pi,concat1d:jX,concat2d:UX,concat3d:VX,concat4d:WX,conv1d:nM,conv2d:Hh,conv2dTranspose:rM,conv3d:GX,conv3dTranspose:qX,copyRegisteredKernels:LHe,cos:KA,cosh:iM,cosineWindow:_M,cumprod:vE,cumsum:sM,customGrad:Xf,denseBincount:WO,deprecationWarn:gGe,depthToSpace:XX,depthwiseConv2d:Ow,device_util:cGe,diag:Wxe,dilation2d:YX,disableDeprecationWarnings:mGe,dispose:Jt,disposeVariables:yGe,div:ct,divNoNan:KX,dot:ZX,dropout:EY,einsum:s1,elu:Rw,enableDebugMode:pGe,enableProdMode:hGe,enclosingPowerOfTwo:kY,engine:Cs,ensureShape:Hxe,env:pe,equal:_u,erf:aM,euclideanNorm:JX,exp:vo,expandDims:ta,expm1:eY,eye:oM,fft:u_,fill:Yy,findBackend:wGe,findBackendFactory:SGe,floor:Mw,floorDiv:eM,fused:Rve,gather:Lw,gatherND:Tve,gather_util:IJe,getBackend:Exe,getGradient:VV,getKernel:pE,getKernelsForBackend:UO,grad:XXe,grads:YXe,greater:Ao,greaterEqual:ap,ifft:Ix,imag:ZA,image:Tl,inTopKAsync:Nve,io:PY,irfft:SM,isFinite:tY,isInf:nY,isNaN:rY,keep:zi,kernel_impls:UJe,leakyRelu:QA,less:Tx,lessEqual:Fm,linalg:TY,linspace:Xxe,localResponseNormalization:iY,log:tl,log1p:JA,logSigmoid:sY,logSoftmax:uM,logSumExp:e_,logicalAnd:Sc,logicalNot:t_,logicalOr:cM,logicalXor:aY,losses:jve,lowerBound:Kxe,matMul:nn,math:SJe,max:Qo,maxPool:n_,maxPool3d:oY,maxPoolWithArgmax:Zxe,maximum:dd,mean:Kr,memory:ZV,meshgrid:Qxe,min:py,minimum:tm,mirrorPad:lY,mod:uY,moments:r_,movingAverage:kve,mul:ie,multiRNNCell:Jxe,multinomial:eve,neg:_r,nextFrame:f_,norm:Fw,notEqual:my,oneHot:nm,ones:uo,onesLike:nl,op:te,outerProduct:tve,pad:op,pad1d:nve,pad2d:rve,pad3d:ive,pad4d:sve,pool:cY,pow:qf,prelu:s_,print:EX,prod:fY,profile:bGe,raggedGather:ave,raggedRange:ove,raggedTensorToTensor:lve,rand:uve,randomGamma:dve,randomNormal:hM,randomStandardNormal:hve,randomUniform:Mm,randomUniformInt:pve,range:gy,ready:$xe,real:Nx,reciprocal:mY,registerBackend:vX,registerGradient:uxe,registerKernel:QF,relu:Nc,relu6:pM,removeBackend:vGe,reshape:ae,reverse:Ml,reverse1d:mve,reverse2d:gve,reverse3d:yve,reverse4d:bve,rfft:c_,round:mM,rsqrt:gM,scalar:Et,scatterND:Ave,scatter_util:JKe,searchSorted:fM,selu:yM,separableConv2d:bM,serialization:eJe,setBackend:Cxe,setPlatform:CGe,setdiff1dAsync:xve,sigmoid:mc,sign:gY,signal:zve,sin:xM,sinh:vM,slice:$n,slice1d:a_,slice2d:wM,slice3d:o_,slice4d:Dx,slice_util:iwe,softmax:l_,softplus:Ky,spaceToBatchND:i_,sparse:Uve,sparseToDense:_ve,spectral:Bve,split:ho,sqrt:us,square:lr,squaredDifference:CM,squeeze:Lm,stack:wo,step:Zy,stridedSlice:yY,string:Vve,sub:st,sum:lt,sumOutType:JF,tan:bY,tanh:em,tensor:$u,tensor1d:ji,tensor2d:Of,tensor3d:xY,tensor4d:vve,tensor5d:wve,tensor6d:Sve,tensorScatterUpdate:Cve,tensor_util:sGe,test_util:dKe,tidy:he,tile:_l,time:xGe,topk:wY,train:no,transpose:yn,truncatedNormal:EM,unique:SY,unregisterGradient:MHe,unregisterKernel:FHe,unsortedSegmentSum:kM,unstack:Ll,upcastType:yo,upperBound:$ve,util:GHe,valueAndGrad:KXe,valueAndGrads:ZXe,variable:CY,variableGrads:Yxe,version_core:LJe,where:Ls,whereAsync:$Y,zeros:Ai,zerosLike:En},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe={kernelName:Uk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,Zy(qe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJe={kernelName:Lv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=lr(qe(n,"float32")),i=us(st(Et(1),r));return _r(ct(e,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJe={kernelName:Pv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=us(st(lr(qe(n,"float32")),1));return ct(e,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GJe={kernelName:Xy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{let o=e;const l=Di(n.shape,i);return l.length>0&&(o=lt(o,l)),ae(o,n.shape)},b:()=>{let o=e;const l=Di(r.shape,i);return l.length>0&&(o=lt(o,l)),ae(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJe={kernelName:Vk,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((r,i)=>{n[i]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XJe={kernelName:Wk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>En(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YJe={kernelName:Hk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>En(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJe={kernelName:Bv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,us(st(Et(1),lr(qe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZJe={kernelName:zv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=us(Me(Et(1),lr(qe(n,"float32"))));return ct(e,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QJe={kernelName:Vv,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{const o=Me(lr(n),lr(r));let l=ie(e,ct(r,o));const u=Di(n.shape,i);return u.length>0&&(l=lt(l,u)),ae(l,n.shape)},b:()=>{const o=Me(lr(n),lr(r));let l=_r(ie(e,ct(n,o)));const u=Di(r.shape,i);return u.length>0&&(l=lt(l,u)),ae(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JJe={kernelName:jv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,Me(lr(qe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eet={kernelName:Uv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,st(Et(1),lr(qe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tet(e,t,n,r,i,s){const a=X(e,"dy","avgPool3dGrad"),o=X(t,"input","avgPool3dGrad");let l=a,u=o,c=!1;o.rank===4&&(c=!0,l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),q(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),q(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),qa("avgPool3dGrad",i,s);const f={dy:l,input:u},d={filterSize:n,strides:r,pad:i,dimRoundingMode:s},h=ee.runKernel(K6,f,d);return c?ae(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const net=te({avgPool3dGrad_:tet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ret={kernelName:qk,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:s,pad:a,dimRoundingMode:o}=n;return{x:()=>net(e,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iet(e,t,n,r,i){const s=X(e,"dy","avgPoolGrad"),a=X(t,"input","avgPoolGrad");q(a.rank===s.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${s.rank})`);let o=a,l=s,u=!1;a.rank===3&&(u=!0,o=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),q(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),q(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:l,input:o},f={filterSize:n,strides:r,pad:i},d=ee.runKernel(Y6,c,f);return u?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const set=te({avgPoolGrad_:iet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aet={kernelName:Gk,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:s,pad:a}=n;return{x:()=>set(e,r,i,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oet={kernelName:Xk,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:s,transposeB:a}=n;return!s&&!a?{a:()=>nn(e,i,!1,!0),b:()=>nn(r,e,!0,!1)}:!s&&a?{a:()=>nn(e,i,!1,!1),b:()=>nn(e,r,!0,!1)}:s&&!a?{a:()=>nn(i,e,!1,!0),b:()=>nn(r,e,!1,!1)}:{a:()=>nn(i,e,!0,!0),b:()=>nn(e,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uet={kernelName:Yk,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>i_(e,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cet={kernelName:oxe,gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,s=r.shape,a=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])a[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>lt(e,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fet={kernelName:Wv,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const det={kernelName:Hv,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const het={kernelName:Gv,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Ls(Sc(ap(r,i),Fm(r,s)),e,En(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pet={kernelName:Zk,inputsToSave:["x"],gradFunc:Dwe.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const met={kernelName:Qk,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(l=>l.shape),{axis:i}=n,s=rn(i,t[0].shape)[0],a=r.map(l=>l[s]);return ho(e,a,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const get={kernelName:Jk,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:s,strides:a,pad:o,dataFormat:l}=n;return q(J0(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>HX(r.shape,e,i,a,o,l),filter:()=>AY(r,e,i.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yet={kernelName:eA,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:s,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Hh(e,i,s,a,o,1,l),filter:()=>AY(e,r,i.shape,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bet(e,t,n,r,i){let s=e;e.rank===4&&(s=ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;a.rank===4&&(a=ae(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),q(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),q(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),q(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),q(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),q(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:s,dy:a},l={strides:r,pad:i,filterShape:n};return ee.runKernel(tF,o,l)}const xet=te({conv3DBackpropFilter_:bet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vet={kernelName:tA,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:s}=n;q(J0(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=t;return{x:()=>Vxe(a.shape,e,o,i,s),filter:()=>xet(a,e,o.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wet={kernelName:qv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(_r(xM(qe(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cet={kernelName:Xv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(vM(qe(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $et={kernelName:nA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:s,reverse:a}=n;return{x:()=>{const o=ei([i],r.rank);let l=sM(e,i,s,!a);return o!=null&&(l=yn(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eet={kernelName:rA,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:a}=n,o=r??[1,1];q(J0(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,u]=t;return q(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),q(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),q(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),q(Vs(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),qa("depthwiseConv2d",s,a),{x:()=>Ove(l.shape,e,u,i,s,o,a),filter:()=>Ive(l,e,u.shape,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ket={kernelName:iA,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,s={x:r,filter:i,dy:e},a={x:r,filter:i,dy:e};return{x:()=>ee.runKernel(BO,s,n),filter:()=>ee.runKernel(zO,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aet={kernelName:Kv,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>ee.runKernel(dF,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _et={kernelName:Zv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=ie(vo(_r(lr(n))),2/Math.sqrt(Math.PI));return{x:()=>ie(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tet={kernelName:Qv,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Net={kernelName:aA,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>ae(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Det={kernelName:Jv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,vo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iet={kernelName:ew,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oet={kernelName:tw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{const o=ct(e,qe(r,"float32")),l=Di(n.shape,i);return l.length>0?ae(lt(o,l),n.shape):o},b:()=>{let o=ie(e,qe(n,"float32"));const l=Di(r.shape,i);l.length>0&&(o=ae(lt(o,l),r.shape));const u=lr(r);return _r(ct(o,qe(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ret={kernelName:oA,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,s,a,o]=t,l=o??Et(1),u=Di(s.shape,i.shape),c=[];if(s.rank===1){for(let S=0;S<i.shape.length-1;++S)c.push(i.shape[S]);c.push(1)}const f=st(i,s),d=ie(e,l),h=gM(Me(a,Et(r))),m=ie(ie(ie(h,h),h),Et(-.5));return{x:()=>s.rank===1?ae(ie(ie(e,_l(ae(h,[1,1,1,s.shape[0]]),c)),l),i.shape):ae(ie(ie(e,h),l),i.shape),mean:()=>{let S=ie(ie(h,Et(-1)),d);return s.rank===1&&(S=lt(S,u)),ae(S,s.shape)},variance:()=>{let S=ie(ie(m,f),d);return s.rank===1&&(S=lt(S,u)),ae(S,s.shape)},scale:()=>{const S=ie(f,h);let E=ie(e,S);return s.rank===1&&(E=lt(E,u)),ae(E,s.shape)},offset:()=>{let S=e;return s.rank===1&&(S=lt(S,u)),ae(S,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fet={kernelName:lA,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:s,batchDims:a}=n,o=rn(s,r.shape)[0],l=(u,c,f)=>()=>{const d=u.shape,h=c.size,m=d.slice(0,o),g=m.length,b=d.slice(s,d.length).slice(1),x=b.length,w=Uue(0,g),C=Uue(g+1,g+1+x),S=Vue([m,[h],b]),E=ae(f,S),A=ae(c,[h]),k=Vue([[g],w,C]),N=yn(E,k);let I=kM(N,A,u.shape[o]);const T=Rm(k);return I=yn(I,T),I};if(a===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>wo(c.map((h,m)=>l(h,i.slice(m,1),e.slice(m,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,e),indices:()=>i}}};function Uue(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Vue(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Met={kernelName:nw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>En(n),b:()=>En(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Let={kernelName:rw,gradFunc:e=>({x:()=>qe(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pet={kernelName:iw,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bet={kernelName:sw,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zet={kernelName:aw,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jet={kernelName:cA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,s=Ao(r,0);return{x:()=>Ls(s,e,ie(e,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uet={kernelName:lw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,Me(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vet={kernelName:ow,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,qe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wet={kernelName:lxe,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const a=vo(r);return st(e,ie(lt(e,i,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Het(e,t,n,r=5,i=1,s=1,a=.5){const o={x:e,y:t,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:a};return ee.runKernel(vF,o,l)}const Get=te({localResponseNormalizationBackprop_:Het});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qet={kernelName:gA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:s,bias:a,alpha:o,beta:l}=n;return{x:()=>Get(r,i,e,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(e,t,n,r){return t.rank<n.rank&&(t=ae(t,gi(t.shape,r))),e.rank<n.rank&&(e=ae(e,gi(e.shape,r))),{x:()=>ie(e,qe(_u(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wue={kernelName:yA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,s=t[0],a=t[1],o=rn(i,s.shape),l=Iwe(e,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xet={kernelName:uw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>ie(e,qe(ap(n,r),"float32")),b:()=>ie(e,qe(Tx(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yet(e,t,n,r,i,s,a){const o=X(e,"dy","maxPool3dGrad"),l=X(t,"input","maxPool3dGrad"),u=X(n,"output","maxPool3dGrad");let c=o,f=l,d=u,h=!1;l.rank===4&&(h=!0,c=ae(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=ae(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=ae(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),q(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),q(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),q(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),qa("maxPool3dGrad",s,a);const m={dy:c,input:f,output:d},g={filterSize:r,strides:i,pad:s,dimRoundingMode:a},b=ee.runKernel(SF,m,g);return h?ae(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const Ket=te({maxPool3dGrad_:Yet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zet={kernelName:xA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>Ket(e,r,i,s,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qet(e,t,n,r,i,s,a){const o=X(e,"dy","maxPoolGrad"),l=X(t,"input","maxPoolGrad"),u=X(n,"output","maxPoolGrad");q(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),q(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),q(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),qa("maxPoolGrad",s,a);const c={dy:o,input:l,output:u},f={filterSize:r,strides:i,pad:s,dimRoundingMode:a};return ee.runKernel(wF,c,f)}const Jet=te({maxPoolGrad_:Qet});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ett={kernelName:bA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:s,strides:a,pad:o}=n;return{x:()=>Jet(e,r,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ttt={kernelName:vA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,s=rn(i,r.shape),o=ds(r.shape,s)[1],l=we(o);return{x:()=>{const c=r.shape.slice();s.forEach(h=>{c[h]=1});const f=ae(e,c);return ct(ie(f,uo(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ntt={kernelName:wA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[s,a]=t,o=rn(i,s.shape),l=Iwe(e,a,s,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rtt={kernelName:cw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>ie(e,qe(Fm(n,r),"float32")),b:()=>ie(e,qe(Ao(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const itt={kernelName:SA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>$n(e,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const stt={kernelName:fw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{const o=Di(n.shape,i);return o.length>0?ae(lt(e,o),n.shape):e},b:()=>{const o=ie(e,_r(Mw(ct(n,r)))),l=Di(r.shape,i);return l.length>0?ae(lt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const att={kernelName:dw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{const o=ie(e,qe(r,"float32")),l=Di(n.shape,i);return l.length>0?ae(lt(o,l),n.shape):o},b:()=>{const o=ie(e,qe(n,"float32")),l=Di(r.shape,i);return l.length>0?ae(lt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ott={kernelName:CA,gradFunc:e=>({x:()=>_r(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ltt={kernelName:kA,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Ai(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const utt={kernelName:EA,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ctt={kernelName:AA,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return Ll(e,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hue={kernelName:_A,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,s=i.map(a=>a[0]);return{x:()=>$n(e,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ftt={kernelName:hw,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,s=n,a=r,o=Gt(s.shape,a.shape);return{a:()=>{const c=qe(a,"float32");let f=ie(e,ie(c,qf(s,st(c,Et(1)))));const d=Di(s.shape,o);return d.length>0&&(f=lt(f,d)),ae(f,s.shape)},b:()=>{const c=Ao(s,0),f=Ls(c,tl(s),En(s));let d=ie(e,ie(i,f));const h=Di(a.shape,o);return h.length>0&&(d=lt(d,h)),ae(d,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dtt={kernelName:TA,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=Ao(n,0);return{x:()=>Ls(i,e,ie(e,r)),alpha:()=>{let s=Ls(i,En(e),ie(e,n));const a=Di(r.shape,e.shape);return a.length>0&&(s=lt(s,a)),ae(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function htt(e,t,n){const r=e.shape.slice();r[n]=1;const i=ae(t,r),s=vE(e,n,!0,!1),a=vE(e,n,!0,!0),o=ie(s,a);return ie(i,o)}function ptt(e,t,n){const r=e.shape.length,i=r-n.length,s=ei(n,r);let a=e;s!=null&&(a=yn(e,s));const o=a.shape.slice(),u=o.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);o.push(u);const c=a.reshape(o);let f=htt(c,t,i);if(f=f.reshape(a.shape),s!=null){const d=Rm(s);f=yn(f,d)}return f}const mtt={kernelName:NA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let s=[];return i==null?s=r.shape.map((a,o)=>o):typeof i=="number"?s=[i]:s=i,{x:()=>ptt(r,e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gtt={kernelName:Yv,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{const o=ct(e,qe(r,"float32")),l=Di(n.shape,i);return l.length>0?ae(lt(o,l),n.shape):o},b:()=>{let o=ie(e,qe(n,"float32"));const l=Di(r.shape,i);l.length>0&&(o=ae(lt(o,l),r.shape));const u=lr(r);return _r(ct(o,qe(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ytt={kernelName:pw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,_r(lr(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const btt={kernelName:gw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=ie(Fm(n,6),Zy(n));return{x:()=>ie(e,qe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xtt={kernelName:mw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,qe(Zy(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vtt={kernelName:DA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ae(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wtt={kernelName:OA,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>ee.runKernel(RF,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Stt={kernelName:IA,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>ee.runKernel(OF,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ctt={kernelName:RA,gradFunc:(e,t,n)=>{const{dims:r}=n,i=rn(r,e.shape);return{x:()=>Ml(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $tt={kernelName:yw,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ett={kernelName:bw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>_r(ct(e,ie(qf(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ktt={kernelName:FA,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>qe(En(n),"float32"),t:()=>ie(e,qe(n,e.dtype)),e:()=>ie(e,qe(t_(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Att={kernelName:xw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=Ao(n,Et(0)),i=Et(zM),s=Et(jM),a=ie(e,s),o=ie(ie(e,i),vo(qe(n,"float32")));return Ls(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _tt={kernelName:Cw,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,ie(n,st(Et(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ttt={kernelName:Sw,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ntt={kernelName:vw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(KA(qe(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dtt={kernelName:ww,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(iM(qe(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Itt={kernelName:MA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:s}=n,a=r.shape,[o,l]=PM(r,i,s),u=[];for(let c=0;c<e.rank;c++)u.push([o[c],a[c]-o[c]-l[c]]);return{x:()=>op(e,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ott={kernelName:zA,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,s=!0,a=ie(e,r);return{logits:()=>st(a,ie(lt(a,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rtt={kernelName:$w,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,mc(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gue={kernelName:PA,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>YA(e,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const que={kernelName:BA,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>pi(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ftt={kernelName:Ew,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,ie(us(qe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mtt={kernelName:VF,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(e,ie(qe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ltt={kernelName:kw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Et(2);return{a:()=>ie(e,ie(i,st(n,r))),b:()=>ie(e,ie(i,st(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ptt={kernelName:Dw,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Btt={kernelName:Aw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Gt(n.shape,r.shape);return{a:()=>{let o=e;const l=Di(n.shape,i);return l.length>0&&(o=lt(o,l)),ae(o,n.shape)},b:()=>{let o=e;const l=Di(r.shape,i);return l.length>0&&(o=lt(o,l)),ae(_r(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ztt={kernelName:LA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:s}=n;rn(s,r.shape).forEach(u=>{i[u]=1});const o=ae(e,i),l=ie(o,uo(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jtt={kernelName:_w,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ct(e,lr(KA(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Utt={kernelName:Tw,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ie(st(Et(1),lr(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vtt={kernelName:Nw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let a=En(r);if(r.rank===1)for(let o=0;o<i[0];++o)a=Me(a,$n(e,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)a=Me(a,$n(e,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)a=Me(a,$n(e,[o*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let c=0;c<i[3];++c)a=Me(a,$n(e,[o*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wtt={kernelName:P1,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,s=Rm(i);return{x:()=>yn(e,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Htt={kernelName:UA,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>wo(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gtt={kernelName:VA,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qtt(e,n)}}};function qtt(e,t){const n=dd(t,En(t)),r=Lw(e,n);let i=ap(t,Et(0,"int32"));const s=r.rank-i.rank;for(let o=0;o<s;++o)i=ta(i,o+1);i=Sc(i,uo(r.shape,"bool"));const a=En(r);return Ls(i,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xtt={kernelName:WA,gradFunc:e=>({x:()=>En(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ytt=[Dwe,WJe,HJe,GJe,qJe,XJe,YJe,KJe,ZJe,QJe,JJe,eet,ret,aet,oet,uet,cet,fet,det,het,pet,met,yet,get,vet,wet,Cet,$et,Eet,ket,gtt,Aet,_et,Tet,Net,Det,Oet,Iet,Ret,Fet,Met,Let,Pet,Bet,zet,jet,Uet,Vet,Wet,qet,Wue,Wue,Xet,Zet,ett,ttt,ntt,rtt,itt,stt,att,ott,ltt,utt,ctt,Hue,Hue,ftt,dtt,mtt,ytt,btt,xtt,vtt,wtt,Stt,Ctt,$tt,Ett,ktt,Att,_tt,Ttt,Ntt,Dtt,Itt,Ott,Rtt,Gue,Gue,que,que,Ftt,Ltt,Mtt,Ptt,Btt,ztt,jtt,Utt,Vtt,Wtt,Htt,Gtt,Xtt];for(const e of Ytt)uxe(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.abs=function(){return this.throwIfDisposed(),$i(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.acos=function(){return this.throwIfDisposed(),kX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.acosh=function(){return this.throwIfDisposed(),AX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.add=function(e){return this.throwIfDisposed(),Me(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.all=function(e,t){return this.throwIfDisposed(),tM(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.any=function(e,t){return this.throwIfDisposed(),yE(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.argMax=function(e){return this.throwIfDisposed(),fy(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.argMin=function(e){return this.throwIfDisposed(),_X(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.asScalar=function(){return this.throwIfDisposed(),q(this.size===1,()=>"The array must have only 1 element."),ae(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.asType=function(e){return this.throwIfDisposed(),qe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.as1D=function(){return this.throwIfDisposed(),ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.as2D=function(e,t){return this.throwIfDisposed(),ae(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),ae(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),ae(this,[e,t,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),ae(this,[e,t,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.asin=function(){return this.throwIfDisposed(),TX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.asinh=function(){return this.throwIfDisposed(),NX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.atan=function(){return this.throwIfDisposed(),DX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.atan2=function(e){return this.throwIfDisposed(),IX(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.atanh=function(){return this.throwIfDisposed(),OX(this)};Se().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),XA(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),YA(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),Iw(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.broadcastTo=function(e){return this.throwIfDisposed(),B1(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.cast=function(e){return this.throwIfDisposed(),qe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.ceil=function(){return this.throwIfDisposed(),zX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),xo(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Wn&&(e=[e]),pi([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.conv1d=function(e,t,n,r,i,s){return this.throwIfDisposed(),nM(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),rM(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.conv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),Hh(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.cos=function(){return this.throwIfDisposed(),KA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.cosh=function(){return this.throwIfDisposed(),iM(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),vE(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),sM(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),XX(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.depthwiseConv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),Ow(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),YX(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.divNoNan=function(e){return this.throwIfDisposed(),KX(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.div=function(e){return this.throwIfDisposed(),ct(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.dot=function(e){return this.throwIfDisposed(),ZX(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.elu=function(){return this.throwIfDisposed(),Rw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.equal=function(e){return this.throwIfDisposed(),_u(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.erf=function(){return this.throwIfDisposed(),aM(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),JX(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.exp=function(){return this.throwIfDisposed(),vo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.expandDims=function(e){return this.throwIfDisposed(),ta(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.expm1=function(){return this.throwIfDisposed(),eY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.fft=function(){return this.throwIfDisposed(),u_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.flatten=function(){return this.throwIfDisposed(),ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.floor=function(){return this.throwIfDisposed(),Mw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.floorDiv=function(e){return this.throwIfDisposed(),eM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Lw(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ap(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.greater=function(e){return this.throwIfDisposed(),Ao(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.ifft=function(){return this.throwIfDisposed(),Ix(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.irfft=function(){return this.throwIfDisposed(),SM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.isFinite=function(){return this.throwIfDisposed(),tY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.isInf=function(){return this.throwIfDisposed(),nY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.isNaN=function(){return this.throwIfDisposed(),rY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.leakyRelu=function(e){return this.throwIfDisposed(),QA(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.lessEqual=function(e){return this.throwIfDisposed(),Fm(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.less=function(e){return this.throwIfDisposed(),Tx(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),iY(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logSigmoid=function(){return this.throwIfDisposed(),sY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logSoftmax=function(e){return this.throwIfDisposed(),uM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),e_(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.log=function(){return this.throwIfDisposed(),tl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.log1p=function(){return this.throwIfDisposed(),JA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Sc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logicalNot=function(){return this.throwIfDisposed(),t_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logicalOr=function(e){return this.throwIfDisposed(),cM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.logicalXor=function(e){return this.throwIfDisposed(),aY(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),nn(this,e,t,n)};Se().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),n_(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.max=function(e,t){return this.throwIfDisposed(),Qo(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.maximum=function(e){return this.throwIfDisposed(),dd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.mean=function(e,t){return this.throwIfDisposed(),Kr(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.min=function(e,t){return this.throwIfDisposed(),py(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.minimum=function(e){return this.throwIfDisposed(),tm(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),lY(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.mod=function(e){return this.throwIfDisposed(),uY(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.mul=function(e){return this.throwIfDisposed(),ie(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.neg=function(){return this.throwIfDisposed(),_r(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Fw(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.notEqual=function(e){return this.throwIfDisposed(),my(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),nm(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.onesLike=function(){return this.throwIfDisposed(),nl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.pad=function(e,t){return this.throwIfDisposed(),op(this,e,t)};Se().prototype.pool=function(e,t,n,r,i,s){return this.throwIfDisposed(),cY(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.pow=function(e){return this.throwIfDisposed(),qf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.prelu=function(e){return this.throwIfDisposed(),s_(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.prod=function(e,t){return this.throwIfDisposed(),fY(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.reciprocal=function(){return this.throwIfDisposed(),mY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.relu=function(){return this.throwIfDisposed(),Nc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.relu6=function(){return this.throwIfDisposed(),pM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.reshapeAs=function(e){return this.throwIfDisposed(),ae(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.reshape=function(e){return this.throwIfDisposed(),ae(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Lve(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Pve(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.reverse=function(e){return this.throwIfDisposed(),Ml(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.rfft=function(){return this.throwIfDisposed(),c_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.round=function(){return this.throwIfDisposed(),mM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.rsqrt=function(){return this.throwIfDisposed(),gM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.selu=function(){return this.throwIfDisposed(),yM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.separableConv2d=function(e,t,n,r,i,s){return this.throwIfDisposed(),bM(this,e,t,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sigmoid=function(){return this.throwIfDisposed(),mc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sign=function(){return this.throwIfDisposed(),gY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sin=function(){return this.throwIfDisposed(),xM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sinh=function(){return this.throwIfDisposed(),vM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.slice=function(e,t){return this.throwIfDisposed(),$n(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.softmax=function(e){return this.throwIfDisposed(),l_(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.softplus=function(){return this.throwIfDisposed(),Ky(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),i_(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.split=function(e,t){return this.throwIfDisposed(),ho(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sqrt=function(){return this.throwIfDisposed(),us(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.square=function(){return this.throwIfDisposed(),lr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.squaredDifference=function(e){return this.throwIfDisposed(),CM(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.squeeze=function(e){return this.throwIfDisposed(),Lm(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Wn?[this,e]:[this,...e];return wo(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.step=function(e){return this.throwIfDisposed(),Zy(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.stridedSlice=function(e,t,n,r,i,s,a,o){return this.throwIfDisposed(),yY(this,e,t,n,r,i,s,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sub=function(e){return this.throwIfDisposed(),st(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.sum=function(e,t){return this.throwIfDisposed(),lt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.tan=function(){return this.throwIfDisposed(),bY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.tanh=function(){return this.throwIfDisposed(),em(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.tile=function(e){return this.throwIfDisposed(),_l(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.toBool=function(){return this.throwIfDisposed(),qe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.toFloat=function(){return this.throwIfDisposed(),qe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.toInt=function(){return this.throwIfDisposed(),qe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.topk=function(e,t){return this.throwIfDisposed(),wY(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.transpose=function(e){return this.throwIfDisposed(),yn(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.unique=function(e){return this.throwIfDisposed(),SY(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),kM(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.unstack=function(e){return this.throwIfDisposed(),Ll(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.where=function(e,t){return this.throwIfDisposed(),Ls(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Se().prototype.zerosLike=function(){return this.throwIfDisposed(),En(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,gf.prototype)}}class gu extends Error{constructor(t){super(t),Object.setPrototypeOf(this,gu.prototype)}}class oe extends Error{constructor(t){super(t),Object.setPrototypeOf(this,oe.prototype)}}class Qt extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Qt.prototype)}}class uK extends Error{constructor(t){super(t),Object.setPrototypeOf(this,uK.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Owe{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let n;return this.cache.has(t)&&(n=this.cache.get(t),this.cache.delete(t),this.cache.set(t,n)),n}put(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let n=0;n<this.maxEntries-t;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function by(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function yf(e,t){if(!e)throw new uK(t)}function Xue(e,t){let n=0;for(const r of e)r===t&&n++;return n}function ro(e){return e.length===1?e[0]:e}function Zn(e){return Array.isArray(e)?e:[e]}function oh(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function a1(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let nu={};function cK(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function uW(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>uW(t));else{const t=Object.keys(e);for(const n of t){const r=e[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?e[n]=r.value:uW(r))}}}function m_(e,t={},n={},r="object",i=!1){if(typeof e=="string"){const s=e;let a;if(s in n)a=n[s];else if(s in nu)a=nu[s];else if(a=t[s],a==null)throw new oe(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const s=e;if(s.className==null||s.config==null)throw new oe(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const a=s.className;let o,l;if(a in n?[o,l]=n[a]:a in nu?[o,l]=nu.className:a in t&&([o,l]=t[a]),o==null)throw new oe(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(nu))u[h]=nu[h];for(const h of Object.keys(n))u[h]=n[h];const c=s.config;c.customObjects=u;const f=Object.assign({},nu);for(const h of Object.keys(n))nu[h]=n[h];uW(s.config);const d=l(o,s.config,n,i);return nu=Object.assign({},f),d}else{const u=Object.assign({},nu);for(const f of Object.keys(n))nu[f]=n[f];const c=new o(s.config);return nu=Object.assign({},u),c}}}function Ktt(e,t){return e<t?-1:e>t?1:0}function _4(e,t){return-1*Ktt(e,t)}function P0(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function Ztt(e){if(e==null)throw new oe(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Jy(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new oe(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function fK(e,t,n=0,r=1/0){return yf(n>=0),yf(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(i=>typeof i===t)}function rs(e,t){Array.isArray(e)?(q(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,r)=>rs(n,`element ${r+1} of ${t}`))):q(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${Rwe(e)}.`)}function Rwe(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>Rwe(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function Qtt(e,t,n){let r=n!=null?n():Sa(),i;return(...a)=>{const o=n!=null?n():Sa();return o-r<t||(r=o,i=e(...a)),i}}function Fwe(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Jtt=0;function Mwe(){return Jtt++}const T4={};function UM(e=""){return e in T4||(T4[e]=0),T4[e]+=1,e+T4[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ent=["channelsFirst","channelsLast"],tnt=["nearest","bilinear"],nnt=["valid","same","causal"],rnt=["max","avg"],int=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const x2=new Map;function bi(e){Jy(ent,"DataFormat",e)}function snt(e){Jy(tnt,"InterpolationFormat",e)}function ql(e){Jy(nnt,"PaddingMode",e)}function Lwe(e){Jy(rnt,"PoolMode",e)}const A$=[],Yue="/";function z1(e,t){A$.push(e);try{const n=t();return A$.pop(),n}catch(n){throw A$.pop(),n}}function ant(){return A$.length===0?"":A$.join(Yue)+Yue}function Pwe(e){if(!zwe(e))throw new Error("Not a valid tensor name: '"+e+"'");return ant()+e}function Bwe(e){if(!zwe(e))throw new Error("Not a valid tensor name: '"+e+"'");x2.has(e)||x2.set(e,0);const t=x2.get(e);if(x2.set(e,x2.get(e)+1),t>0){const n=`${e}_${t}`;return x2.set(n,1),n}else return e}const ont=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function zwe(e){return!!e.match(ont)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lnt(e){return e===parseInt(e.toString(),10)}function B0(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Ox(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function rm(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Cc(e,t){if(t<e)throw new oe(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let az;function Ui(){return az==null&&(az=wX().epsilon()),az}function $c(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ff(e,t){return qe(e,t)}function g_(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),ae(e,n)}function unt(e,t){return he(()=>{if(e.shape.length!==2)throw new oe(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=g_(e,1);return cW(n,[1,t,1])})}function cnt(e){const t=[B0(e.shape)];return ae(e,t)}function fnt(e){if(e.rank<=1)throw new oe(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],B0(e.shape,1)];return ae(e,t)}function j1(e,t,n){return he(()=>{switch(e.rank){case 1:return a_(e,t,n);case 2:return wM(e,[t,0],[n,e.shape[1]]);case 3:return o_(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Dx(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return $n(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return $n(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new oe(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function oz(e,t,n){return he(()=>{switch(e.rank){case 1:return a_(e,t,n);case 2:return wM(e,[0,t],[e.shape[0],n]);case 3:return o_(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Dx(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new oe(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function N4(e,t,n,r){return he(()=>{switch(e.rank){case 1:return a_(e,t,n);case 2:switch(r){case 1:return j1(e,t,n);case 2:return oz(e,t,n);default:throw new oe(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return j1(e,t,n);case 2:return o_(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return oz(e,t,n);default:throw new oe(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return j1(e,t,n);case 2:return Dx(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Dx(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return oz(e,t,n);default:throw new oe(`The axis is not within the rank of the tensor ${r}`)}default:throw new oe(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function dK(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),pi(e,t)}function Kue(e,t){switch(e.rank){case 1:return jX([e,t]);case 2:return UX([e,t],0);case 3:return VX([e,t],0);case 4:return WX([e,t],0);default:throw new oe(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function cW(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new oe(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return _l(e,t)}function VM(e,t=0,n=1,r,i){return hM(e,t,n,r,i)}function Mf(e,t,n,r){if(e.rank<2||t.rank<2)throw new Qt(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const i=e.shape.slice(-1)[0],s=t.shape.slice(-2)[0];if(i!==s)throw new Qt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return iW({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?fW(e.rank,r,$c()):null,activation:n});{const i=e.shape.slice(),s=i.pop();e=ae(e,[-1,s]);const a=t.shape.slice(),o=a.pop(),l=a.pop(),u=[...a,o],c=Array.from({length:t.rank},(m,g)=>g===0?t.rank-2:g<=t.rank-2?g-1:g);t=ae(yn(t,c),[l,-1]);const f=[...i,...u];return ae(iW({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?fW(e.rank,r,$c()):null,activation:n}),f)}}function jwe(e,t,n){return he(()=>(Array.isArray(t)?t=ji(t,"int32"):t=qe(t,"int32"),Lw(e,t,n)))}function y_(e){return ie(e,e)}function fW(e,t,n){const r=t.shape;if(t.rank!==1&&t.rank!==e)throw new oe(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return r.length===1?ae(t,[1,r[0],1,1,1]):ae(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ae(t,[1,1,1,1,r[0]]):ae(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?ae(t,[1,r[0],1,1]):ae(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ae(t,[1,1,1,r[0]]):ae(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?ae(t,[1,r[0],1]):ae(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ae(t,[1,1,r[0]]):ae(t,[1].concat(r))}else if(e<3)return t;throw new oe(`Unsupported input rank by biasAdd: ${t.rank}`)}function Dc(e,t,n){return he(()=>(n==null&&(n=$c()),bi(n),Me(e,fW(e.rank,t,n))))}function dnt(e,t=1){if(t!==1)throw new Qt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Rw(e)}function hnt(e){return he(()=>ct(e,Me($i(e),1)))}function Uwe(e,t,n,r){return he(()=>EY(e,t,n,r))}function pnt(e){return he(()=>{const t=Me(.5,ie(.2,e));return xo(t,0,1)})}function b_(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const mnt=["fanIn","fanOut","fanAvg"],gnt=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ynt(e){Jy(mnt,"FanMode",e)}function bnt(e){Jy(gnt,"Distribution",e)}class Bu extends Qy{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Vwe extends Bu{apply(t,n){return Ai(t,n)}}Vwe.className="Zeros";Pe(Vwe);class hK extends Bu{apply(t,n){return uo(t,n)}}hK.className="Ones";Pe(hK);class Wwe extends Bu{constructor(t){if(super(),typeof t!="object")throw new oe(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new oe(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return he(()=>ie(Et(this.value),uo(t,n)))}getConfig(){return{value:this.value}}}Wwe.className="Constant";Pe(Wwe);class Hwe extends Bu{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return Mm(t,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Hwe.className="RandomUniform";Pe(Hwe);class Gwe extends Bu{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qt(`randomNormal does not support dType ${n}.`);return VM(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Gwe.className="RandomNormal";Pe(Gwe);class qwe extends Bu{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qt(`truncatedNormal does not support dType ${n}.`);return EM(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}qwe.className="TruncatedNormal";Pe(qwe);let Xwe=class extends Bu{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,n){return he(()=>{if(t.length!==2||t[0]!==t[1])throw new oe("Identity matrix initializer can only be used for 2D square matrices.");return ie(this.gain,oM(t[0]))})}getConfig(){return{gain:this.gain}}};Xwe.className="Identity";Pe(Xwe);function xnt(e,t="channelsLast"){let n,r;if(bi(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const i=B0(e,2);n=e[1]*i,r=e[0]*i}else if(t==="channelsLast"){const i=B0(e,0,e.length-2);n=e[e.length-2]*i,r=e[e.length-1]*i}}else{const i=B0(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class rl extends Bu{constructor(t){if(super(),t.scale<0)throw new oe(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,ynt(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,bnt(this.distribution),this.seed=t.seed}apply(t,n){const r=xnt(t),i=r[0],s=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Qt(`${this.getClassName()} does not support dType ${n}.`);return EM(t,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return Mm(t,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}rl.className="VarianceScaling";Pe(rl);class pK extends rl{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return rl.className}}pK.className="GlorotUniform";Pe(pK);class mK extends rl{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return rl.className}}mK.className="GlorotNormal";Pe(mK);class gK extends rl{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return rl.className}}gK.className="HeNormal";Pe(gK);class yK extends rl{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return rl.className}}yK.className="HeUniform";Pe(yK);class bK extends rl{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return rl.className}}bK.className="LeCunNormal";Pe(bK);class xK extends rl{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return rl.className}}xK.className="LeCunUniform";Pe(xK);class Ywe extends Bu{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,n){return he(()=>{if(t.length<2)throw new Qt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=we(t.slice(0,-1)),i=t[t.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const a=[Math.max(i,r),Math.min(i,r)],o=VM(a,0,1,n,this.seed),l=TY.qr(o,!1);let u=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return u=ie(u,f.sign()),r<i&&(u=u.transpose()),ie(Et(this.gain),u.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Ywe.className="Orthogonal";Pe(Ywe);const Zue={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Que(e,t={}){return m_(e,Al.getMap().classNameMap,t,"initializer")}function Zr(e){return cK(e)}function Ur(e){if(typeof e=="string"){const t=e in Zue?Zue[e]:e;if(t==="GlorotNormal")return new mK;if(t==="GlorotUniform")return new pK;if(t==="HeNormal")return new gK;if(t==="HeUniform")return new yK;if(t==="LeCunNormal")return new bK;if(t==="LeCunUniform")return new xK;{const n={};return n.className=t,n.config={},Que(n)}}else return e instanceof Bu?e:Que(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dW(e){return Array.isArray(e)&&Array.isArray(e[0])}function qO(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function zt(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new oe(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Rn(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new oe(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XO(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((r,i)=>r*i);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Jue="Variable";class vnt{constructor(t,n="float32",r=Jue,i=!0,s=null){this.dtype=n??"float32",this.shape=t.shape,this.id=Mwe(),r=r??Jue,this.originalName=Pwe(r),this.name=Bwe(this.originalName),this.trainable_=i,this.constraint=s,this.val=CY(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),wnt(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function wnt(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function hW(e){return e.map(t=>t.read())}function vK(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Vi{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Yf{constructor(t,n,r,i,s,a,o){this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=o,this.id=Mwe(),a!=null&&(this.originalName=Pwe(a),this.name=Bwe(this.originalName)),this.rank=n.length}}let Snt=0,WM=class{constructor(t,n){this.callArgs=n,this.id=Snt++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const r of t.inboundLayers)r!=null&&r.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Cnt=0;class on extends Qy{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Cnt++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const r=this.getClassName();n=oh(r)+"_"+UM(r)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let r;if(t.batchInputShape!=null)r=t.batchInputShape;else if(t.inputShape!=null){let s=null;t.batchSize!=null&&(s=t.batchSize),r=[s].concat(t.inputShape)}this.batchInputShape=r;let i=t.dtype;i==null&&(i=t.inputDType),i==null&&(i="float32"),this.dtype=i}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new gu(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new oe(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return ro(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return ro(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new gf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new gf(`Layer ${this.name} is not connected, no input to return.`);return ro(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new gf(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new gf(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ro(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){const n=Zn(t);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Zn(this.inputSpec);if(n.length!==r.length)throw new oe(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${t}`);for(let i=0;i<n.length;i++){const s=n[i],a=r[i];if(a==null)continue;const o=s.rank;if(a.ndim!=null&&o!==a.ndim)throw new oe(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new oe(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new oe(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&s.dtype!==a.dtype)throw new oe(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${s.dtype}.`);if(a.axes){const l=s.shape;for(const u in a.axes){const c=Number(u),f=a.axes[u],d=c>=0?l[c]:l[l.length+c];if(f!=null&&[f,null].indexOf(d)===-1)throw new oe(`Input ${i} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const u=a.shape[l],c=s.shape[l];if(u!=null&&c!=null&&u!==c)throw new oe(`Input ${i} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${s.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const r=Zn(t),i=knt(t),s=Ant(t);if(i===s)throw new oe("Arguments to apply() must be all SymbolicTensors or all Tensors");return z1(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const a=[];for(const o of Zn(t))a.push(o.shape);this.build(ro(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(t),s){let a=this.call(t,n);this.supportsMasking&&this.setMaskMetadata(t,a);const o=Zn(a),l=[];for(let u of o)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(a=ro(l),this.activityRegularizer!=null)throw new Qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=$nt(t),o=this.computeOutputShape(a);let l;const u=Ent(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((c,f)=>new Yf(u,c,this,Zn(t),n,this.name,f)):l=new Yf(u,o,this,Zn(t),n,this.name),this.addInboundNode(t,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new Qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&t[i]!=null&&t[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new gf(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);t.indexOf(r)===-1&&t.push(r)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new gf(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new gu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return XO(this.weights)}build(t){this.built=!0}getWeights(t=!1){return hW(t?this.trainableWeights:this.weights)}setWeights(t){he(()=>{const n=this.weights;if(n.length!==t.length)throw new oe(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const r=[],i=hW(n);for(let s=0;s<i.length;++s){const a=i[s],o=n[s],l=t[s];if(!dn(a.shape,l.shape))throw new oe(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}vK(r)})}addWeight(t,n,r,i,s,a,o,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new oe(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Ur("zeros"));const u=i.apply(n,r),c=new vnt(u,r,t,a,o);return u.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),a==null&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Zn(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(t,n,r){if(!this.supportsMasking)return;const i=this.computeMask(t,r),s=Zn(n),a=Zn(i);if(s.length!==a.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let o=0;o<s.length;o++)s[o].kerasMask=a[o]}addInboundNode(t,n,r,i,s,a,o=null){const l=Zn(t);n=Zn(n),r=Zn(r),i=Zn(i),s=qO(s),a=qO(a);const u=[],c=[],f=[];for(const d of l)u.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new WM({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:f,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:a},o);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function $nt(e){e=Zn(e);const t=[];for(const n of e)t.push(n.shape);return ro(t)}function Ent(e){return"float32"}function Kwe(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const r=t.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const a=r.inputTensors[s],o=r.inboundLayers[s],l=r.nodeIndices[s],u=Kwe(a,o,l);for(const c of u)i.indexOf(c)===-1&&i.push(c)}return i}}}function knt(e){let t=!0;for(const n of Zn(e))if(!(n instanceof Yf)){t=!1;break}return t}function Ant(e){let t=!0;for(const n of Zn(e))if(n instanceof Yf){t=!1;break}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class x_ extends on{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:UM("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new oe("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new oe("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new oe("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=t.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Yf(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new WM({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new oe(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}x_.className="InputLayer";Pe(x_);function _nt(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new oe("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new x_({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tnt(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return qe(t,e.dtype)}catch{throw new oe(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class S0{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof S0)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=Tnt(t,n),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new oe(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Yf){if(this.id2Value[t.id]==null)throw new oe(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new oe(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof Yf){if(this.id2Value[t.id]==null)throw new oe(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new oe(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Jt(this.id2Mask)}}const YO=new Owe,KO=new Owe;function Nnt(e){YO!=null&&YO.setMaxEntries(e),KO!=null&&KO.setMaxEntries(e)}function V3(e,t,n,r){const i=n==null?!1:n.training,s=Array.isArray(e),a=s?e:[e],o=a.map(m=>m.name),l=[],u=t.names();for(const m of o)u.indexOf(m)!==-1?l.push(t.getValue(m)):l.push(null);const c=o.join(",")+"|"+t.names().sort().join(",");let f=YO.get(c),d;if(f==null){const m=Dnt(a,t);f=m.sorted,d=m.recipientCounts,YO.put(c,f),KO.put(c,d)}d={},i||Object.assign(d,KO.get(c));const h=new S0(t);for(let m=0;m<f.length;++m){const g=f[m],b=g.sourceLayer;if(b instanceof x_)continue;const x=[],w=[],C=[];let S=!1;for(const I of g.inputs){const T=h.getValue(I),D=h.getMask(I);x.push(T),w.push(D),D!=null&&(S=!0),i||(d[I.name]--,d[I.name]===0&&!t.hasKey(I)&&o.indexOf(I.name)===-1&&!T.isDisposed&&I.sourceLayer.stateful!==!0&&C.push(T))}S&&(n=n||{},n.mask=w[0]);const E=Zn(b.apply(x,n));let A=null;b.supportsMasking&&(A=b.computeMask(x,w));const k=Ont(g),N=Array.isArray(k)?k:[k];for(let I=0;I<N.length;++I){h.hasKey(N[I])||h.add(N[I],E[I],Array.isArray(A)?A[0]:A);const T=o.indexOf(N[I].name);T!==-1&&(l[T]=E[I])}i||Jt(C)}return h.disposeMasks(),s?l:l[0]}function Dnt(e,t){q(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(e.length===1){const i=ece(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of e){const{sorted:a,recipientMap:o}=ece(s,t);for(const l of a)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:Int(r)}}function Int(e){const t={};for(const n in e)t[n]=e[n].size;return t}function ece(e,t){const n=new Set,r=[],i={};for(const o of t.names())n.add(o);const s=[],a=[];for(s.push(e);s.length>0;){const o=s[s.length-1];if(n.has(o.name)){s.pop();continue}const l=a[a.length-1]===s.length-1;if(o.inputs.length===0||l)s.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(s.length-1);for(const u of o.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(o.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:i}}function Ont(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(const i of e.sourceLayer.inboundNodes[r].outputTensors)if(i.id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rnt=pe();Rnt.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Nnt);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wK(e,t){return he(()=>us(lt(ie(e,e),t,!0)))}class v_ extends Qy{getConfig(){return{}}}class Zwe extends v_{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return he(()=>{const n=wK(t,this.axis),r=xo(n,0,this.maxValue);return ie(t,ct(r,Me(Ui(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Zwe.className="MaxNorm";Pe(Zwe);class Qwe extends v_{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return he(()=>ct(t,Me(Ui(),wK(t,this.axis))))}getConfig(){return{axis:this.axis}}}Qwe.className="UnitNorm";Pe(Qwe);class Jwe extends v_{apply(t){return Nc(t)}}Jwe.className="NonNeg";Pe(Jwe);class eSe extends v_{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return he(()=>{const n=wK(t,this.axis),r=Me(ie(this.rate,xo(n,this.minValue,this.maxValue)),ie(1-this.rate,n));return ie(t,ct(r,Me(Ui(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}eSe.className="MinMaxNorm";Pe(eSe);const tce={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Wi(e){return cK(e)}function nce(e,t={}){return m_(e,Al.getMap().classNameMap,t,"constraint")}function Hi(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in tce?tce[e]:e,config:{}};return nce(n)}else return e instanceof v_?e:nce(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Tg(e){if(e==null)return;const t=[],n=[],r=[];for(const i in e){const s=e[i];if(typeof s!="number"){const a=s;t.push(a.data()),n.push(i),r.push(a)}}if(t.length>0){const i=await Promise.all(t);for(let s=0;s<i.length;++s)e[n[s]]=i[s][0];Jt(r)}}function tSe(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var rce;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(rce||(rce={}));const Fnt=125;class wE{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class Mnt{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class Lnt extends wE{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let a;i in this.totals?a=this.totals[i]:this.totals[i]=0;const o=he(()=>Me(this.totals[i],ie(s,r)));this.totals[i]=o,a!=null&&a.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:he(()=>{const i=ie(ct(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),zi(n[r])}))}}class Pnt extends wE{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const t=[],n=[],r=[];for(const s in this.history){const a=this.history[s];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];t.push(l.data()),n.push(s),r.push(o)}}const i=await Promise.all(t);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class Bnt extends wE{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||f_,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Fnt),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");LO(this.yieldEvery)&&(this.maybeWait=Qtt(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,r){const i=[];this.yield!=null&&(await Tg(r),i.push(this.yield(t,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await Tg(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const r=[];this.epochEnd!=null&&(await Tg(n),r.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(t,n){this.batchBegin!=null&&(await Tg(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const r=[];this.batchEnd!=null&&(await Tg(n),r.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):LO(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(r)}async onTrainBegin(t){this.trainBegin!=null&&(await Tg(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await Tg(t),await this.trainEnd(t))}}function nSe(e,t){return e==null&&(e={}),e instanceof wE?[e]:Array.isArray(e)&&e[0]instanceof wE?e:Zn(e).map(r=>new Bnt(r,t))}class cu{constructor(){}static registerCallbackConstructor(t,n){q(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),cu.checkForDuplicate(n),cu.constructors[t]==null&&(cu.constructors[t]=[]),cu.constructors[t].push(n)}static checkForDuplicate(t){for(const n in cu.constructors)cu.constructors[+n].forEach(i=>{if(i===t)throw new oe("Duplicate callback constructor.")})}static clear(){cu.constructors={}}static createCallbacks(t){const n=[];for(const r in cu.constructors){const i=+r;t>=i&&n.push(...cu.constructors[i])}return n.map(r=>new r)}}cu.constructors={};function rSe(e,t,n,r,i,s,a,o,l){const u=new Pnt,c=[new Lnt,...cu.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);const f=new Mnt(c);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:a,verbose:t,doValidation:o,metrics:l}),{callbackList:f,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Th(e,t={},n=!1){return m_(e,Al.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZO(e,t){return he(()=>{e.dtype!=="float32"&&(e=qe(e,"float32"));const n=lt(y_(e),t,!0),r=Yy(n.shape,Ui()),i=us(dd(n,r));return ct(e,i)})}function HM(e,t){return he(()=>Kr(y_(st(t,e)),-1))}function SK(e,t){return he(()=>Kr($i(st(t,e)),-1))}function CK(e,t){return he(()=>{const n=st(e,t),r=xo($i(e),Ui(),Number.MAX_VALUE),i=$i(ct(n,r));return ie(100,Kr(i,-1))})}function znt(e,t){return he(()=>{const n=xo(t,Ui(),Number.MAX_VALUE),r=tl(Me(1,n)),i=xo(e,Ui(),Number.MAX_VALUE),s=tl(Me(1,i));return Kr(y_(st(r,s)),-1)})}function jnt(e,t){return he(()=>{const n=dd(0,st(1,ie(e,t)));return Kr(y_(n),-1)})}function Unt(e,t){return he(()=>{const n=dd(0,st(1,ie(e,t)));return Kr(n,-1)})}function Vnt(e,t){return he(()=>{const n=lt(ie(e,t),-1),r=Qo(ie(st(1,e),t),-1);return dd(0,Me(1,st(r,n)))})}function Wnt(e,t){return he(()=>{const n=Math.log(2),r=st(t,e),i=st(Me(r,Ky(ie(-2,r))),n);return Kr(i,-1)})}function SE(e,t,n=!1){return he(()=>{if(n)t=l_(t);else{const r=lt(t,t.shape.length-1,!0);t=ct(t,r)}return t=xo(t,Ui(),1-Ui()),_r(lt(ie(qe(e,"float32"),tl(t)),t.shape.length-1))})}function QO(e,t,n=!1){return he(()=>{const r=qe(Mw(cnt(e)),"int32");t=xo(t,Ui(),1-Ui());const i=t.shape,s=ae(nm(r,i[i.length-1]),i);return SE(s,t,n)})}function Hnt(e,t){if(!dn(e.shape,t.shape))throw new oe(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return he(()=>{const n=Nc(t),r=_r($i(t));return Me(st(n,ie(t,e)),JA(vo(r)))})}function GM(e,t){return he(()=>{let n;return n=xo(t,Ui(),1-Ui()),n=tl(ct(n,st(1,n))),Kr(Hnt(e,n),-1)})}function Gnt(e,t){return he(()=>{const n=xo(e,Ui(),1),r=xo(t,Ui(),1);return lt(ie(e,tl(ct(n,r))),-1)})}function qnt(e,t){return he(()=>{const n=tl(Me(Ui(),t));return Kr(st(t,ie(e,n)),-1)})}function iSe(e,t){return he(()=>{const n=ZO(e,-1),r=ZO(t,-1),i=ie(n,r);return _r(lt(i,-1))})}const JO={meanSquaredError:HM,meanAbsoluteError:SK,meanAbsolutePercentageError:CK,meanSquaredLogarithmicError:znt,squaredHinge:jnt,hinge:Unt,categoricalHinge:Vnt,logcosh:Wnt,categoricalCrossentropy:SE,sparseCategoricalCrossentropy:QO,binaryCrossentropy:GM,kullbackLeiblerDivergence:Gnt,poisson:qnt,cosineProximity:iSe};function lz(e){if(typeof e=="string"){if(e in JO)return JO[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new oe(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sSe(e,t){return he(()=>{const n=ie(.5,nl(t)),r=Ff(Ao(t,n),e.dtype);return Kr(_u(e,r),-1)})}function aSe(e,t){return he(()=>Ff(_u(fy(e,-1),fy(t,-1)),"float32"))}function Xnt(e,t){return he(()=>qe(lt(Sc(_u(e,1),_u(t,1))),"float32"))}function Ynt(e,t){return he(()=>qe(lt(Sc(_u(e,0),_u(t,1))),"float32"))}function Knt(e,t){return he(()=>{const n=Xnt(e,t),r=Ynt(e,t),i=Me(n,r);return qe(Ls(Ao(i,0),ct(n,i),0),"float32")})}function Znt(e,t){return GM(e,t)}function Qnt(e,t){return e.rank===t.rank&&(e=Lm(e,[e.rank-1])),t=fy(t,-1),t.dtype!==e.dtype&&(t=qe(t,e.dtype)),qe(_u(e,t),"float32")}const Jnt=HM,ert=HM,trt=SK,nrt=SK,rrt=CK,irt=CK,oSe=SE,srt=iSe,lSe=QO,eR={binaryAccuracy:sSe,categoricalAccuracy:aSe,precision:Knt,categoricalCrossentropy:oSe,sparseCategoricalCrossentropy:lSe,mse:Jnt,MSE:ert,mae:trt,MAE:nrt,mape:rrt,MAPE:irt,cosine:srt};function art(e){if(typeof e=="string"&&e in eR)return eR[e];if(typeof e!="string"&&e!=null)return e;throw new oe(`Unknown metric ${e}`)}function D4(e){if(yf(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(JO))if(JO[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(eR))if(eR[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ort(e){const t={Adagrad:()=>no.adagrad(.01),Adadelta:()=>no.adadelta(1,.95,Ui()),Adam:()=>no.adam(.001,.9,.999,Ui()),Adamax:()=>no.adamax(.002,.9,.999,Ui(),0),RMSProp:()=>no.rmsprop(.001,.9,0,Ui()),SGD:()=>no.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new oe(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ice=1*1024*1024;function sce(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!pW(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(e);r.length>ice&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${ice}.`)}}function pW(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!pW(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!pW(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lrt(e,t,n,r=console.log){const i=crt(e),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let a;if(!i){s.push("Receives inputs"),a=[];for(const c in e.nodesByDepth)a.push(...e.nodesByDepth[c])}r("_".repeat(t)),tR(s,n,r),r("=".repeat(t));const o=e.layers;for(let c=0;c<o.length;++c)i?frt(o[c],n,r):drt(o[c],n,a,r),r((c===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=urt(e),u=XO(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function urt(e){let t;return e.collectedTrainableWeights!=null?t=XO(e.collectedTrainableWeights):t=XO(e.trainableWeights),t}function crt(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let s=!1;for(const a of i.inboundNodes)if(r.indexOf(a)!==-1)if(s){t=!1;break}else s=!0;if(!t)break}return t}function tR(e,t,n=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function frt(e,t,n){let r,i;try{i=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(e.outputShape)}catch{r="multiple"}const s=e.name,a=e.getClassName(),o=[`${s} (${a})`,i,r,e.countParams().toString()];tR(o,t,n)}function drt(e,t,n,r){let i,s;try{s=e.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(e.outputShape)}catch{i="multiple"}const a=[];for(const f of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const h=f.inboundLayers[d].name,m=f.nodeIndices[d],g=f.tensorIndices[d];a.push(`${h}[${m}][${g}]`)}const o=e.name,l=e.getClassName(),u=a.length===0?"":a[0],c=[`${o} (${l})`,s,i,e.countParams().toString(),u];tR(c,t,r);for(let f=1;f<a.length;++f)tR(["","","","",a[f]],t,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uSe(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function mW(e,t){if(e===null)return null;if(typeof e=="string")return a1(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];uSe(t,i,s)?n.push(s):n.push(mW(s,t))}return n}else{const n={};for(const r of Object.keys(e)){const i=e[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=a1(r);n[s]=mW(i,s)}}return n}}function gW(e,t){if(e==null)return null;if(typeof e=="string")return oh(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];uSe(t,i,s)?n.push(s):n.push(gW(s,t))}return n}else{const n={};for(const r of Object.keys(e)){const i=e[r],s=oh(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=gW(i,r)}return n}}/** @license See the LICENSE file. */const cSe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hrt=e=>{const t=Object.keys(e);if(t.length===0)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class tc extends on{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const w=this.getClassName().toLowerCase();this.name=UM(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],P0(this.inputs).length!==this.inputs.length)throw new oe(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);P0(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const w of this.outputs){const C=w.sourceLayer,S=w.nodeIndex,E=w.tensorIndex;this.outputLayers.push(C),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(E)}for(const w of this.inputs){const C=w.sourceLayer,S=w.nodeIndex,E=w.tensorIndex;yf(S===0,"input layer has >1 nodes"),yf(E===0,"input layer has >1 tensors"),this.inputLayers.push(C),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(E)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){const C=this.inputLayers[w];if(!(C instanceof x_))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${w} (0-based) originates from layer type ${C.getClassName()}.`);this.inputNames.push(C.name),this.feedInputShapes.push(C.batchInputShape),this.feedInputNames.push(C.name)}for(const w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);const n={},r={},i={},s={},a={},o=[],l=(w,C,S,E,A,k)=>{(E==null||A==null||k==null)&&(E=w.sourceLayer,A=w.nodeIndex,k=w.tensorIndex);const N=E.inboundNodes[A];if(S.indexOf(N)!==-1)throw new gu(`The tensor ${w.name} at layer "${E.name}" is part of a cycle.`);if(C.indexOf(N)!==-1)return;this.containerNodes.add(tc.nodeKey(E,A)),E.id in a||(a[E.id]=Object.keys(a).length),S.indexOf(N)===-1&&S.push(N);const I=N.inboundLayers.length;for(let T=0;T<I;T++){const D=N.inputTensors[T],L=N.inboundLayers[T],P=N.nodeIndices[T],M=N.tensorIndices[T];l(D,C,S,L,P,M)}for(C.push(N);S.indexOf(N)>=0;)S.splice(S.indexOf(N),1);o.push(N)},u=[],c=[];for(const w of this.outputs)l(w,u,c);const f=o.slice().reverse();for(const w of f){r[w.id]=w,w.id in n||(n[w.id]=0);let C=n[w.id];const S=i[w.outboundLayer.id]==null?0:i[w.outboundLayer.id];C=Math.max(C,S),i[w.outboundLayer.id]=C,s[w.outboundLayer.id]=w.outboundLayer,n[w.id]=C;for(let E=0;E<w.inboundLayers.length;E++){const A=w.inboundLayers[E],k=w.nodeIndices[E],N=A.inboundNodes[k],I=n[N.id]==null?0:n[N.id];n[N.id]=Math.max(C+1,I),r[N.id]=N}}const d={};for(const w in n){const C=n[w];C in d||(d[C]=[]),d[C].push(r[w])}const h={};for(const w in i){const C=i[w];C in h||(h[C]=[]),h[C].push(s[w])}let m=Object.keys(h).map(w=>parseInt(w,10)).sort(_4);this.layers=[];for(const w of m){const C=h[w];C.sort((S,E)=>{const A=a[S.id],k=a[E.id];return A<k?-1:A>k?1:0});for(const S of C)S instanceof tc&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=h,m=Object.keys(d).map(w=>parseInt(w,10)).sort(_4);const g=this.inputs.slice(),b=[];for(const w of m)for(const C of d[w]){const S=C.outboundLayer;if(S!=null){for(const E of C.inputTensors)if(g.indexOf(E)===-1)throw new gu(`Graph disconnected: cannot obtain value for tensor ${E} at layer "${S.name}". The following previous layers were accessed without issue: ${b}`);for(const E of C.outputTensors)g.push(E);b.push(S.name)}}this.nodesByDepth=d;const x=this.layers.map(w=>w.name);for(const w of x){const C=x.filter(S=>S===w).length;if(C!==1)throw new gu(`The name "${w}" is used ${C} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(x))}this.outboundNodes=[],this.inboundNodes=[],new WM({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new oe("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const r={};let i=0;const s=hrt(t);s&&this.parseWeights(t);for(const o of this.layers)for(const[l,u]of o.weights.entries()){const c=s?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new oe(`Duplicate weight name: ${c}`);r[c]=u,i++}const a=[];for(const o in t){let l=o;if(r[o]==null){const u=o.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],t[o]]);else if(n)throw new oe(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new oe(`${o.length} of ${i} weights are not set: ${o}`)}vK(a)}parseWeights(t){for(const n in Object.keys(t)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!i.includes(a)).join("/");s!==n&&(t[s]=t[n],delete t[n])}}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${cSe}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const r=gW(this.updatedConfig());return n?JSON.stringify(r):r}call(t,n){return he(()=>{t=Zn(t);const r=new S0;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],t[i]);return V3(this.outputs,r,n)})}computeMask(t,n){return he(()=>{t=Zn(t);let r;return n==null?r=by(null,t.length):r=Zn(n),this.runInternalGraph(t,r)[1]})}computeOutputShape(t){const n=qO(t);if(n.length!==this.inputLayers.length)throw new oe(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],u=n[o],c=l.name+"_0_0";r[c]=u}const i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(_4);if(i.length>1)for(const o of i){const l=this.nodesByDepth[o];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(c.id)!==-1)continue;const f=[];for(let g=0;g<u.inboundLayers.length;g++){const b=u.inboundLayers[g],x=u.nodeIndices[g],w=u.tensorIndices[g],C=`${b.name}_${x}_${w}`,S=r[C];f.push(S)}const d=c.computeOutputShape(ro(f)),h=qO(d),m=c.inboundNodes.indexOf(u);for(let g=0;g<h.length;g++){const b=`${c.name}_${m}_${g}`;r[b]=h[g]}}}const s=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],u=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],f=`${l.name}_${u}_${c}`;a.push(f)}for(let o=0;o<a.length;o++){const l=a[o];yf(l in r),s.push(r[l])}return ro(s)}runInternalGraph(t,n){n==null&&(n=by(null,t.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=t[l],f=n[l];r[u.id]=[c,f]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(_4);for(const l of i){const u=this.nodesByDepth[l];for(const c of u){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,m=new Array;for(const g of d)g.id in r&&m.push(r[g.id]);if(m.length===d.length){let g={},b,x,w,C;if(c.callArgs!=null&&(g=c.callArgs),m.length===1){const[S,E]=m[0];g.mask==null&&(g.mask=E),w=Zn(f.call(S,g)),C=Zn(f.computeMask(S,E)),b=[S],x=[E]}else b=m.map(S=>S[0]),x=m.map(S=>S[1]),g.mask==null&&(g.mask=x),w=Zn(f.call(b,g)),C=Zn(f.computeMask(b,x));if(f.activityRegularizer)throw new Qt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<h.length;++S){const E=h[S],A=w[S],k=C[S];r[E.id]=[A,k]}}}}const s=[],a=[],o=[];for(const l of this.outputs){yf(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];o.push(u.shape),s.push(u),a.push(c)}return[s,a,o]}buildNodeConversionMap(t){const n={};let r;for(const i of this.layers){r=i instanceof tc?1:0;for(let s=0;s<i.inboundNodes.length;s++){const a=tc.nodeKey(i,s);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(t,n){if(n!=null)return this.findLayer(n);if(t==null)throw new oe("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const r of this.layers)if(r.name===t)return r;throw new oe(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new oe(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return he(()=>{const t=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=tc.nodeKey(n,r);this.containerNodes.has(i)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),u=[];for(let f=0;f<a.inboundNodes.length;f++){const d=a.inboundNodes[f],h=tc.nodeKey(a,f);let m={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),m=d.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(d.inboundLayers.length>0){const g=[];for(let b=0;b<d.inboundLayers.length;b++){const x=d.inboundLayers[b],w=d.nodeIndices[b],C=d.tensorIndices[b],S=tc.nodeKey(x,w);let E=n[S];E==null&&(E=0),g.push([x.name,E,C,m])}u.push(g)}}}const c={};c.name=a.name,c.className=o,c.config=l,c.inboundNodes=u,r.push(c)}t.layers=r;const i=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],u=tc.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.inputLayersTensorIndices[a];i.push([o.name,c,f])}t.inputLayers=i;const s=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],u=tc.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const f=this.outputLayersTensorIndices[a];s.push([o.name,c,f])}return t.outputLayers=s,t}static fromConfig(t,n,r={},i=!1){const s={},a={};function o(b,x){b.name in a?a[b.name].push(x):a[b.name]=[x]}function l(b,x){const w=[];let C;for(const S of x){const E=S[0],A=S[1],k=S[2];if(C=S[3]==null?{}:S[3],!(E in s)){o(b,x);return}const N=s[E];if(N.inboundNodes.length<=A){o(b,x);return}const I=N.inboundNodes[A];w.push(I.outputTensors[k])}w.length>0&&b.apply(ro(w),C)}function u(b){const x=b.name,w=Th(b,n.customObjects!=null?n.customObjects:{});w.setFastWeightInitDuringBuild(i),s[x]=w,b.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new oe(`Corrupted configuration, expected array for nodeData: ${S}`);o(w,S)})}const c=n.name,f=n.layers;for(const b of f)u(b);for(;!Ztt(a);)for(const b of f){const x=s[b.name];if(x.name in a){const w=a[x.name];delete a[x.name];for(const C of w)l(x,C)}}const d=[],h=[],m=n.inputLayers;for(const b of m){const x=b[0],w=b[1],C=b[2];yf(x in s);const E=s[x].inboundNodes[w].outputTensors;d.push(E[C])}const g=n.outputLayers;for(const b of g){const x=b[0],w=b[1],C=b[2];yf(x in s);const E=s[x].inboundNodes[w].outputTensors;h.push(E[C])}return new t({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new oe("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){he(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function prt(e,t,n){const r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(i=>null);if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const i=[];return t.forEach(s=>{s in e?i.push(e[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function fSe(e,t){return prt(e,t,"classWeight")}async function dSe(e,t,n,r){if(n!=null){const i=he(()=>{if(e.shape.length===1)return If(e);if(e.shape.length===2){if(e.shape[1]>1)return fy(e,1);if(e.shape[1]===1)return ae(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());Jt(i);const a=[];return s.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),ji(a,"float32")}else return null}function mrt(e,t){return ie(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const grt=32;function hSe(e,t){let n,r;const i=t;n=i.xs,r=i.ys,q(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const s=ace("input",e.inputNames,n),a=ace("output",e.outputNames,r),o=s[0].shape[0];q(s.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),q(a.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<s.length;l++)q(s[l].shape[0]===o,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);for(let l=0;l<a.length;l++)q(a[l].shape[0]===o,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:s,ys:a}}function ace(e,t,n){if(n instanceof Wn)return[n];if(Array.isArray(n))return q(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const r=[];for(const i of t){if(n[i]==null)throw new oe(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}function yrt(e){if(e.length===3)throw new Qt("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function brt(e,t,n){const r=n.batchesPerEpoch!=null;if(q(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),q(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),q(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),q(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),q(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=n.validationData!=null;let s,a;if(i)if(oce(n.validationData))q(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const b=yrt(n.validationData);s=b.xs,a=b.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(b=>"val_"+b)):u=l.slice();const c=nSe(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=rSe(c,f,n.epochs,null,null,xrt(t,n),null,i,u);d.setModel(e),e.history=h,await d.onTrainBegin(),e.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=await t.iterator();for(;m<n.epochs;){const b={};await d.onEpochBegin(m);let x=0,w=0;for(r||(g=await t.iterator());!r||x<n.batchesPerEpoch;){const C=await g.next();if(r&&C.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${x} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(C.value!=null){const{xs:S,ys:E}=hSe(e,C.value),A={};A.batch=w,A.size=S[0].shape[0],await d.onBatchBegin(w,A);const k=[];if(n.classWeight!=null){const T=fSe(n.classWeight,e.outputNames);for(let D=0;D<T.length;++D)k.push(await dSe(E[D],null,T[D]))}const N=S.concat(E).concat(k),I=o(N);Jt(N);for(let T=0;T<l.length;++T){const D=l[T],L=I[T];A[D]=L,zi(L)}await d.onBatchEnd(w,A),tSe(A),w++,x++}if(r?x>=n.batchesPerEpoch:C.done){if(i){let S;oce(n.validationData)?S=Zn(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=Zn(e.evaluate(s,a,{batchSize:n.validationBatchSize==null?grt:n.validationBatchSize,verbose:0}));for(let E=0;E<e.metricsNames.length;++E)b[`val_${e.metricsNames[E]}`]=S[E]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(m,b),m++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function xrt(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function oce(e){return typeof e.iterator=="function"}function vrt(e){return typeof e.next=="function"}async function wrt(e,t,n){n=n||{};const r=n.batches!=null,i=e.testFunction;let s=[];if(n.verbose>0)throw new Qt("Verbose mode is not implemented yet.");q(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=vrt(t)?t:await t.iterator();let o=0,l=0;for(;!r||l<n.batches;){const u=await a.next();if(s=he(()=>{if(u.value){const{xs:c,ys:f}=hSe(e,u.value),d=c.concat(f),h=he(()=>i(d));if(Jt(d),l===0)for(let g=0;g<h.length;++g)s.push(Et(0));const m=d[0].shape[0];for(let g=0;g<h.length;++g){const b=h[g],x=s[g];s[g]=he(()=>Me(s[g],ie(m,b))),l>0&&Jt(x)}Jt(h),o+=m,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const c=s[u];s[u]=ct(s[u],o),Jt(c)}return ro(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uz(e){q(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function n3(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(r=>j1(r,t,n-t)):j1(e,t,n-t)}function yW(e,t){return he(()=>e==null?null:Array.isArray(e)?e.map(n=>yW(n,t)):jwe(e,t.dtype==="int32"?t:qe(t,"int32")))}function cz(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function pSe(e){const t=[];e instanceof Wn&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(r.rank===1)t.push(g_(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Yu(e,t){if(e==null)return;const n=[];if(t instanceof Wn)n.push(t.id);else if(Array.isArray(t))t.forEach(i=>n.push(i.id));else if(t!=null)for(const i in t){const s=t[i];n.push(s.id)}const r=[];if(e instanceof Wn)n.indexOf(e.id)===-1&&r.push(e);else if(Array.isArray(e))e.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(e!=null)for(const i in e){const s=e[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Srt(e){return e instanceof Wn}function bW(e){return Array.isArray(e)}function lce(e){return!Srt(e)&&!bW(e)}function uce(e,t,n,r=!0,i=""){if(t==null||t.length===0){if(e!=null){let a=!1;if(bW(e)&&e.length>0)a=!0;else if(lce(e)){for(const o in e)if(e.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new oe(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(a=>null);let s;if(lce(e)){e=e,s=[];for(const a of t){if(e[a]==null)throw new oe(`No data provided for "${a}". Need data for each key in: ${t}`);s.push(e[a])}}else if(bW(e)){if(e=e,e.length!==t.length)throw new oe(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);s=e}else{if(e=e,t.length>1)throw new oe(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=pSe(s),n!=null)for(let a=0;a<t.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new oe(`Error when checking ${i}: expected ${t[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[a][l];if(c!=null&&c>=0&&u!==c)throw new oe(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return s}function Crt(e,t,n){const r=P0(e.map(s=>s.shape[0]));r.sort();const i=P0(t.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new oe(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(i.length>1)throw new oe(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!dn(r,i))throw new oe(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function $rt(e,t,n){const r=[HM,GM,SE];for(let i=0;i<e.length;++i){const s=e[i],a=t[i],o=n[i];if(a!=null){if(a===SE&&s.shape[s.shape.length-1]===1)throw new oe(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=s.shape.slice(1),u=o.slice(1);for(let c=0;c<l.length;++c){const f=l[c],d=u[c];if(d!=null&&f!==d)throw new oe(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function cce(e,t,n,r=!0,i=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new oe(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new oe(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);s=[e]}if(n!=null)for(let a=0;a<t.length;++a){if(n[a]==null)continue;const o=s[a];if(o.shape.length!==n[a].length)throw new oe(`Error when checking ${i}: expected ${t[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[a][l];if(c!=null&&c!==u)throw new oe(`Error when checking ${i}: expected ${t[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function Ert(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(r=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(r=>n);{const r=[];for(const i of t){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const krt="layers-model";class ax extends tc{constructor(t){super(t),this.isTraining=!1}summary(t,n,r=console.log){if(!this.built)throw new oe("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");lrt(this,t,n,r)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=ort(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof up))throw new oe("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const a in t.loss)if(this.outputNames.indexOf(a)===-1)throw new oe(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)t.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(lz(t.loss[a]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new oe(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(o=>lz(o))}else{const a=lz(t.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],z1("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const i=Ert(t.metrics,this.outputNames),s=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};z1("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=i[a];(u=>{const c="";let f,d,h;for(const m of u){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const b=this.internalOutputShapes[a];b[b.length-1]===1||this.lossFunctions[a]===GM?["accuracy","acc"].indexOf(m)!==-1?d=sSe:["crossentropy","ce"].indexOf(m)!==-1&&(d=Znt):this.lossFunctions[a]===QO?["accuracy","acc"].indexOf(m)!==-1?d=Qnt:["crossentropy","ce"].indexOf(m)!==-1&&(d=lSe):["accuracy","acc"].indexOf(m)!==-1?d=aSe:["crossentropy","ce"].indexOf(m)!==-1&&(d=oSe);let x;["accuracy","acc"].indexOf(m)!==-1?x="acc":["crossentropy","ce"].indexOf(m)!==-1&&(x="ce"),h=d,f=c+x}else h=art(m),f=c+D4(m);let g;z1(f,()=>{g=h}),s(a,f,g)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,r={}){const i=r.batchSize==null?32:r.batchSize;uz(i);const a=this.standardizeUserDataXY(t,n,!0,i);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,o,i,r.verbose,r.steps);return ro(u)}finally{Yu(a[0],t),Yu(a[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),wrt(this,t,n)}checkNumSamples(t,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new oe(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?s=t[0].shape[0]:s=t.shape[0];else throw new oe(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new oe("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),a=new S0;if(t instanceof Wn&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new oe(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],t[l])}else for(const l of this.inputs){const u=t[l.name];if(u==null)throw new oe(`No value is provided for the model's input ${l.name}`);a.add(l,u)}const o=V3(s,a);return r?o:o[0]}retrieveSymbolicTensors(t){const n=by(null,t.length);let r=t.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],a=s.map(o=>o.name);for(let o=0;o<t.length;++o){const l=a.indexOf(t[o]);if(l!==-1&&(n[o]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,a)=>{s==null&&i.push(t[a])}),new oe(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(t,n=32,r=!1){return he(()=>{const i=this.checkNumSamples(t);if(r)throw new Qt("Verbose predictLoop() is not implemented yet.");const s=cz(i,n),a=this.outputs.map(o=>[]);for(let o=0;o<s.length;++o)he(()=>{const u=s[o][0],c=s[o][1],f=n3(t,u,c),d=[];if(Array.isArray(f))for(let m=0;m<f.length;++m)d.push({key:this.inputs[m],value:f[m]});else d.push({key:this.inputs[0],value:f});const h=new S0(d);return V3(this.outputs,h)}).forEach((u,c)=>a[c].push(u));return ro(a.map(o=>pi(o,0)))})}predict(t,n={}){const r=pSe(t);cce(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return uz(i),this.predictLoop(r,i)}finally{Yu(r,t)}}predictOnBatch(t){cce(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,r=!0,i){if(this.optimizer_==null)throw new gu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===QO?s.push(o.slice(0,o.length-1).concat([1])):s.push(o)}if(t=uce(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=uce(n,this.feedOutputNames,s,!1,"target"),Crt(t,n),$rt(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&t[0].shape[0]%i!==0)throw new oe(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,r,i,s=!0,a){const[o,l]=this.standardizeUserDataXY(t,n,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const c=fSe(i,this.outputNames);u=[];for(let f=0;f<c.length;++f)u.push(await dSe(l[f],null,c[f]))}return[o,l,u]}testLoop(t,n,r,i=0,s){return he(()=>{const a=this.checkNumSamples(n,r,s,"steps"),o=[];if(i>0)throw new Qt("Verbose mode is not implemented yet.");if(s!=null)throw new Qt("steps mode in testLoop() is not implemented yet");{const l=cz(a,r),u=ji(Cc(0,a));for(let c=0;c<l.length;++c){const f=l[c][0],d=l[c][1],h=j1(u,f,d-f),m=yW(n,h),g=t(m);if(c===0)for(let b=0;b<g.length;++b)o.push(Et(0));for(let b=0;b<g.length;++b){const x=g[b];o[b]=Me(o[b],ie(d-f,x))}}for(let c=0;c<o.length;++c)o[c]=ct(o[c],a)}return o})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let r=0;r<t.length;++r){const i=t[r];let s=i;if(Xue(t,i)>1){const a=Xue(t.slice(0,r),i);s+=`_${a}`}n.push(s)}return n}makeTrainFunction(){return t=>{const n=[],r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const f=[];for(let g=0;g<this.inputs.length;++g)f.push({key:this.inputs[g],value:r[g]});const d=new S0(f),h=V3(this.outputs,d,{training:!0});let m;for(let g=0;g<this.lossFunctions.length;++g){const b=this.lossFunctions[g];let x=b(i[g],h[g]);s[g]!=null&&(x=mrt(x,s[g]));const w=Kr(x);n.push(w),g===0?m=x:m=Me(m,x)}for(let g=0;g<this.metricsTensors.length;++g){let b;if(this.outputs.length>1&&g<this.outputs.length)b=n[g];else{const x=this.metricsTensors[g][0],w=this.metricsTensors[g][1];b=Kr(x(i[w],h[w]))}zi(b),a.push(b)}return m=Kr(m),this.calculateLosses().forEach(g=>{m=Me(m,g)}),m},l=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=t=>he(()=>{const n=[];let r;const i=t.slice(0,this.inputs.length),s=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:i[u]});const o=new S0(a),l=V3(this.outputs,o);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],f=Kr(c(s[u],l[u]));u===0?r=f:r=Me(r,f),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],f=this.metricsTensors[u][1],d=Kr(c(s[f],l[f]));n.push(d)}return n})}async fit(t,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,a,o,l,u,c,f,d;try{const h=r.batchSize==null?32:r.batchSize;uz(h);const g=await this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,!1,h);i=g[0],s=g[1],d=g[2];let b=!1,x;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new Qt("validationData including sample weights is not supported yet."):new oe(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const T=await this.standardizeUserData(l,u,null,null,!0,h);c=T[0],f=T[1],x=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const I=Math.floor(i[0].shape[0]*(1-r.validationSplit)),T=i[0].shape[0];c=n3(i,I,T),a=i,i=n3(i,0,I),f=n3(s,I,T),o=s,s=n3(s,0,I),x=c.concat(f)}else r.validationSteps!=null&&(b=!0);const w=i.concat(s).concat(d);this.checkTrainableWeightsConsistency();const C=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let E,A;b?(this.makeTestFunction(),E=this.testFunction,A=S.slice().concat(S.map(I=>"val_"+I))):(E=null,x=[],A=S.slice());const k=nSe(r.callbacks,r.yieldEvery);return await this.fitLoop(C,w,S,h,r.epochs,r.verbose,k,E,x,r.shuffle,A,r.initialEpoch,null,null)}finally{this.isTraining=!1,Yu(i,t),Yu(s,n),Yu(a,t),Yu(o,n),Yu(c,l),Yu(f,u),d!=null&&Jt(d)}}async fitLoop(t,n,r,i,s,a,o,l,u,c,f,d,h,m){i==null&&(i=32),s==null&&(s=1),c==null&&(c=!0),d==null&&(d=0);let g=!1;if(l!=null&&u!=null&&(g=!0),m!=null&&(g=!0,h==null))throw new oe("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,i,h,"steps_per_epoch");let x;b!=null&&(x=Cc(0,b)),a==null&&(a=1);const{callbackList:w,history:C}=rSe(o,a,s,d,b,h,i,g,f);w.setModel(this),this.history=C,await w.onTrainBegin(),this.stopTraining_=!1;for(let S=d;S<s;++S){await w.onEpochBegin(S);const E={};if(h!=null)throw new Qt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Qt("batch shuffling is not implemneted yet");c&&uX(x);const A=ji(x),k=cz(b,i);for(let N=0;N<k.length;++N){const I={};if(await w.onBatchBegin(N,I),he(()=>{const T=k[N][0],D=k[N][1],L=j1(A,T,D-T);I.batch=N,I.size=D-T;const P=yW(n,L),M=t(P);for(let F=0;F<r.length;++F){const R=r[F],j=M[F];I[R]=j,zi(j)}if(N===k.length-1&&g){const F=this.testLoop(l,u,i);for(let R=0;R<r.length;++R){const j=r[R],H=F[R];zi(H),E["val_"+j]=H}}}),await w.onBatchEnd(N,I),tSe(I),this.stopTraining_)break}A.dispose()}if(await w.onEpochEnd(S,E),this.stopTraining_)break}return await w.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,n){return brt(this,t,n)}async trainOnBatch(t,n){const r=await this.standardizeUserData(t,n),i=r[0],s=r[1],o=this.makeTrainFunction()(i.concat(s)),l=[];for(const u of o){const c=await u.data();l.push(c[0])}return Jt(o),Yu(r[0],t),Yu(r[1],n),ro(l)}getNamedWeights(t){const n=[],r=t!=null&&t.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<i.length;++a)r&&!i[a].trainable||n.push({name:i[a].originalName,tensor:s[a]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=ZV().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-ZV().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=oh(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>oh(n))}else{const n=Object.keys(this.loss);t={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")t[i]=oh(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[oh(D4(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>oh(D4(t)));{const t={};for(const n in this.metrics)t[n]=oh(D4(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=mW(t.optimizer_config),r=Th(n);let i;if(typeof t.loss=="string")i=a1(t.loss);else if(Array.isArray(t.loss))i=t.loss.map(a=>a1(a));else if(t.loss!=null){i={};for(const a in t.loss)i[a]=a1(t.loss[a])}let s;if(Array.isArray(t.metrics))s=t.metrics.map(a=>a1(a));else if(t.metrics!=null){s={};for(const a in t.metrics)s[a]=a1(t.metrics[a])}this.compile({loss:i,metrics:s,optimizer:r})}async save(t,n){if(typeof t=="string"){const u=Dxe(t);if(u.length===0)throw new oe(`Cannot find any save handlers for URL '${t}'`);if(u.length>1)throw new oe(`Found more than one (${u.length}) save handlers for URL '${t}'`);t=u[0]}if(t.save==null)throw new oe("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await QV(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:krt,generatedBy:`TensorFlow.js tfjs-layers v${cSe}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:f}=await QV(await this.optimizer.getWeights(),u);r.specs.push(...f),r.data=Txe([r.data,c])}return this.userDefinedMetadata!=null&&(sce(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,t.save(o)}setUserDefinedMetadata(t){sce(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}ax.className="Model";Pe(ax);class mSe extends ax{}mSe.className="Functional";Pe(mSe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let $K=class xW extends ax{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:UM("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new oe(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof xW||t instanceof ax;let r;if(n){if(r=t,r.outputs.length!==1)throw new oe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new oe("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new oe("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=_nt({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(t.inboundNodes.length!==1)throw new oe(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new oe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Kwe(this.outputs[0])}this.inboundNodes=[],new WM({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:by(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(Rn(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ax({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,r=console.log){this.built||this.build(),super.summary(t,n,r)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,r={}){if(!this.built)throw new gu("The model needs to be compiled before being used.");return this.model.evaluate(t,n,r)}async evaluateDataset(t,n){if(!this.built)throw new gu("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,r={}){if(!this.built)throw new gu("The model needs to be compiled before being used.");return this.model.fit(t,n,r)}async fitDataset(t,n){if(!this.built)throw new gu("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,r={},i=!1){let s,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new oe("Legacy serialization format not supported yet.");s=n}else q(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,a=n;const o=new t(a);if(!(o instanceof xW))throw new Qt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of s){const c=Th(l,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(t){if(this.model==null)throw new oe("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new oe("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),t.push(r)}return{name:this.name,layers:t}}};$K.className="Sequential";Pe($K);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EK(e){return new $K(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ua=class extends Qy{getConfig(){return{}}};class gSe extends ua{apply(t,n=1){return dnt(t,n)}}gSe.className="elu";Pe(gSe);class ySe extends ua{apply(t){return yM(t)}}ySe.className="selu";Pe(ySe);class bSe extends ua{apply(t){return Nc(t)}}bSe.className="relu";Pe(bSe);class xSe extends ua{apply(t){return he(()=>tm(6,Nc(t)))}}xSe.className="relu6";Pe(xSe);let vSe=class extends ua{apply(t){return t}};vSe.className="linear";Pe(vSe);class wSe extends ua{apply(t){return mc(t)}}wSe.className="sigmoid";Pe(wSe);class SSe extends ua{apply(t){return pnt(t)}}SSe.className="hardSigmoid";Pe(SSe);class CSe extends ua{apply(t){return Ky(t)}}CSe.className="softplus";Pe(CSe);class $Se extends ua{apply(t){return hnt(t)}}$Se.className="softsign";Pe($Se);class ESe extends ua{apply(t){return em(t)}}ESe.className="tanh";Pe(ESe);let kK=class extends ua{apply(t,n=-1){return l_(t,n)}};kK.className="softmax";Pe(kK);class kSe extends ua{apply(t,n=-1){return uM(t,n)}}kSe.className="logSoftmax";Pe(kSe);class ASe extends ua{apply(t){return he(()=>he(()=>{const n=Math.sqrt(2),r=ie(.5,Me(1,aM(ct(t,n))));return ie(t,r)}))}}ASe.className="gelu";Pe(ASe);class _Se extends ua{apply(t){return he(()=>ie(.5,ie(t,Me(1,em(ie(us(ct(2,Math.PI)),Me(t,ie(.044715,qf(t,3)))))))))}}_Se.className="gelu_new";Pe(_Se);class TSe extends ua{apply(t){return he(()=>ie(t,em(Ky(t))))}}TSe.className="mish";Pe(TSe);class NSe extends ua{apply(t,n=1){return he(()=>ie(mc(ie(t,n)),t))}}NSe.className="swish";Pe(NSe);function im(e){return e.getClassName()}function fz(e,t={}){return m_(e,Al.getMap().classNameMap,t,"activation")}function sm(e){if(e==null){const t={};return t.className="linear",t.config={},fz(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},fz(t)}else return e instanceof ua?e:fz(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Art(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class DSe extends Qy{}class ISe extends DSe{constructor(t){super(),Art(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return he(()=>{let n=Ai([1]);return this.hasL1&&(n=Me(n,lt(ie(this.l1,$i(t))))),this.hasL2&&(n=Me(n,lt(ie(this.l2,y_(t))))),ae(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}ISe.className="L1L2";Pe(ISe);const fce={l1l2:"L1L2"};function xr(e){return cK(e)}function dce(e,t={}){return m_(e,Al.getMap().classNameMap,t,"regularizer")}function Vr(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in fce?fce[e]:e,config:{}};return dce(n)}else return e instanceof DSe?e:dce(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OSe extends on{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=zt(t);let r=Nc(t);return this.maxValue!=null&&(r=xo(r,0,this.maxValue)),r}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}OSe.className="ReLU";Pe(OSe);class RSe extends on{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const r=zt(t);return QA(r,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}RSe.className="LeakyReLU";Pe(RSe);class FSe extends on{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=Ur(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Vr(t.alphaRegularizer),this.alphaConstraint=Hi(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new oe(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=Rn(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<t.length;++i)r[i]=t[i];this.inputSpec=[new Vi({ndim:t.length,axes:r})],this.built=!0}call(t,n){return t=zt(t),s_(t,this.alpha.read())}getConfig(){const t={alphaInitializer:Zr(this.alphaInitializer),alphaRegularizer:xr(this.alphaRegularizer),alphaConstraint:Wi(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}FSe.className="PReLU";Pe(FSe);let MSe=class extends on{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new Qt(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const r=zt(t);return Rw(r)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}};MSe.className="ELU";Pe(MSe);class LSe extends on{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const r=zt(t);return ie(r,qe(Ao(r,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}LSe.className="ThresholdedReLU";Pe(LSe);class PSe extends on{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new kK().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){return he(()=>{let r=zt(t);const i=n.mask;if(i!=null){const s=ie(st(uo(r.shape),qe(i,r.dtype)),Et(-1e9));r=Me(r,s)}return this.axis instanceof Array?this.axis.length>1?vo(st(r,e_(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}PSe.className="Softmax";Pe(PSe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ox(e,t,n){if(typeof e=="number")return by(e,t);if(e.length!==t)throw new oe(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const i=e[r];if(!lnt(i))throw new oe(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function gc(e,t,n,r,i=1){if(e==null)return e;const s=t+(t-1)*(i-1);let a;return n==="same"?a=e:a=e-s+1,Math.floor((a+r-1)/r)}function bf(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+rm([n-t,0]);else if(r==="same")e=e*t;else throw new oe(`Unsupport padding mode: ${r}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AK(e,t){return he(()=>(bi(t),t==="channelsFirst"?yn(e,[0,2,3,1]):e))}function BSe(e,t){return he(()=>(bi(t),t==="channelsFirst"?yn(e,[0,2,3,4,1]):e))}function _rt(e,t,n,r=1,i="valid",s,a=1){return he(()=>{if(s==null&&(s=$c()),bi(s),e.shape.length!==3)throw new oe(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new oe(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new oe(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(e=yn(e,[0,2,1])),i==="causal")throw new Qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=nM(e,t,r,i==="same"?"same":"valid","NWC",a);return n!=null&&(o=Dc(o,n)),o})}function hce(e,t,n,r=[1,1],i="valid",s,a,o=null){return he(()=>{if(s==null&&(s=$c()),bi(s),e.rank!==3&&e.rank!==4)throw new oe(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new oe(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=AK(e,s);if(i==="causal")throw new Qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Dve({x:l,filter:t,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),s==="channelsFirst"&&(l=yn(l,[0,3,1,2])),l})}function Trt(e,t,n,r=[1,1,1],i="valid",s,a){return he(()=>{if(s==null&&(s=$c()),bi(s),e.rank!==4&&e.rank!==5)throw new oe(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new oe(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=BSe(e,s);if(i==="causal")throw new Qt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=GX(o,t,r,i==="same"?"same":"valid","NDHWC",a),n!=null&&(o=Dc(o,n)),s==="channelsFirst"&&(o=yn(o,[0,4,1,2,3])),o})}class qM extends on{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",qM.verifyArgs(n),this.rank=t,rs(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Qt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ox(n.kernelSize,t,"kernelSize"),this.strides=ox(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,ql(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,bi(this.dataFormat),this.activation=sm(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Ur(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Hi(n.biasConstraint),this.biasRegularizer=Vr(n.biasRegularizer),this.activityRegularizer=Vr(n.activityRegularizer),this.dilationRate=ox(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new oe(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new oe(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new oe(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(yf("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!fK(t.kernelSize,"number",1,3))throw new oe(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:im(this.activation),useBias:this.useBias,biasInitializer:Zr(this.biasInitializer),biasRegularizer:xr(this.biasRegularizer),activityRegularizer:xr(this.activityRegularizer),biasConstraint:Wi(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class Bw extends qM{constructor(t,n){super(t,n),this.kernel=null,Bw.verifyArgs(n),this.filters=n.filters,rs(this.filters,"filters"),this.kernelInitializer=Ur(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Hi(n.kernelConstraint),this.kernelRegularizer=Vr(n.kernelRegularizer)}build(t){t=Rn(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new oe(`The channel dimension of the input should be defined. Found ${t[n]}`);const r=t[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(t,n){return he(()=>{t=zt(t);let r;const i=this.bias==null?null:this.bias.read(),s=Fwe(this.activation.getClassName());if(s!=null&&this.rank===2)r=hce(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=_rt(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=hce(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Trt(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Qt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(t){t=Rn(t);const n=[],r=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let s=0;s<r.length;++s){const a=gc(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(a)}let i=[t[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const t={filters:this.filters,kernelInitializer:Zr(this.kernelInitializer),kernelRegularizer:xr(this.kernelRegularizer),kernelConstraint:Wi(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new oe(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class zw extends Bw{constructor(t){super(2,t),zw.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!fK(t.kernelSize,"number",1,2))throw new oe(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}zw.className="Conv2D";Pe(zw);class w_ extends Bw{constructor(t){super(3,t),w_.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new oe(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}w_.className="Conv3D";Pe(w_);class zSe extends zw{constructor(t){if(super(t),this.inputSpec=[new Vi({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new oe(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Rn(t),t.length!==4)throw new oe("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new oe("The channel dimension of the inputs should be defined. Found `None`.");const r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vi({ndim:4,axes:{[n]:r}})],this.built=!0}call(t,n){return he(()=>{let r=zt(t);if(r.shape.length!==4)throw new oe(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=i[a],u=i[o],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],m=bf(l,d,c,this.padding),g=bf(u,h,f,this.padding),b=[s,m,g,this.filters];this.dataFormat!=="channelsLast"&&(r=yn(r,[0,2,3,1]));let x=rM(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=yn(x,[0,3,1,2])),this.bias!=null&&(x=Dc(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(t){t=Rn(t);const n=t.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[i]=bf(n[i],l,a,this.padding),n[s]=bf(n[s],u,o,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}zSe.className="Conv2DTranspose";Pe(zSe);class jSe extends w_{constructor(t){if(super(t),this.inputSpec=[new Vi({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new oe(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Rn(t),t.length!==5)throw new oe("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new oe("The channel dimension of the inputs should be defined. Found `None`.");const r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vi({ndim:5,axes:{[n]:r}})],this.built=!0}call(t,n){return he(()=>{let r=zt(t);if(r.shape.length!==5)throw new oe(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const u=i[l],c=i[a],f=i[o],d=this.kernelSize[0],h=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],b=this.strides[1],x=this.strides[2],w=bf(u,g,d,this.padding),C=bf(c,b,h,this.padding),S=bf(f,x,m,this.padding),E=[s,w,C,S,this.filters];this.dataFormat!=="channelsLast"&&(r=yn(r,[0,2,3,4,1]));let A=qX(r,this.kernel.read(),E,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(A=yn(A,[0,4,1,2,3])),this.bias!==null&&(A=Dc(A,this.bias.read(),this.dataFormat)),this.activation!==null&&(A=this.activation.apply(A)),A})}computeOutputShape(t){t=Rn(t);const n=t.slice();let r,i,s,a;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,a=4):(r=4,i=1,s=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],f=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[i]=bf(n[i],c,o,this.padding),n[s]=bf(n[s],f,l,this.padding),n[a]=bf(n[a],d,u,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}jSe.className="Conv3DTranspose";Pe(jSe);class USe extends Bw{constructor(t,n){if(super(t,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new oe("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new oe("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new oe(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Ur(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Vr(n.depthwiseRegularizer),this.depthwiseConstraint=Hi(n.depthwiseConstraint),this.pointwiseInitializer=Ur(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Vr(n.pointwiseRegularizer),this.pointwiseConstraint=Hi(n.pointwiseConstraint)}build(t){if(t=Rn(t),t.length<this.rank+2)throw new oe(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new oe(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const r=t[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let o=0;o<this.rank;++o)s.push(1);s.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Vi({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(t,n){return he(()=>{t=zt(t);let r;if(this.rank===1)throw new Qt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=yn(t,[0,2,3,1])),r=bM(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Dc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=yn(r,[0,3,1,2])),r})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Zr(this.depthwiseInitializer),t.pointwiseInitializer=Zr(this.pointwiseInitializer),t.depthwiseRegularizer=xr(this.depthwiseRegularizer),t.pointwiseRegularizer=xr(this.pointwiseRegularizer),t.depthwiseConstraint=Wi(this.depthwiseConstraint),t.pointwiseConstraint=Wi(this.pointwiseConstraint),t}}USe.className="SeparableConv";class VSe extends USe{constructor(t){super(2,t)}}VSe.className="SeparableConv2D";Pe(VSe);class XM extends Bw{constructor(t){super(1,t),XM.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!fK(t.kernelSize,"number",1,1))throw new oe(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}XM.className="Conv1D";Pe(XM);class WSe extends on{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return he(()=>{if(t=zt(t),this.dataFormat==="channelsLast"){const r=N4(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return N4(r,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=N4(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return N4(r,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}WSe.className="Cropping2D";Pe(WSe);class HSe extends on{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,bi(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,snt(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],r=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,r]}else{const n=t[1]==null?null:this.size[0]*t[1],r=t[2]==null?null:this.size[1]*t[2];return[t[0],n,r,t[3]]}}call(t,n){return he(()=>{let r=zt(t);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=yn(r,[0,2,3,1]);const s=this.size[0]*i[2],a=this.size[1]*i[3],o=this.interpolation==="nearest"?Tl.resizeNearestNeighbor(r,[s,a]):Tl.resizeBilinear(r,[s,a]);return yn(o,[0,3,1,2])}else{const s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?Tl.resizeNearestNeighbor(r,[s,a]):Tl.resizeBilinear(r,[s,a])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}}HSe.className="UpSampling2D";Pe(HSe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nrt(e,t,n=[1,1],r="valid",i,s){return he(()=>{i==null&&(i=$c()),bi(i);let a=AK(e,i);if(e.rank!==4)throw new oe(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new oe(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return a=Ow(a,t,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(a=yn(a,[0,3,1,2])),a})}class GSe extends qM{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Ur(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Hi(t.depthwiseConstraint),this.depthwiseRegularizer=Vr(t.depthwiseRegularizer)}build(t){if(t=Rn(t),t.length<4)throw new oe(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new oe(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const r=t[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return he(()=>{t=zt(t);let r=Nrt(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Dc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(t){t=Rn(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,s=gc(n,this.kernelSize[0],this.padding,this.strides[0]),a=gc(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],i,s,a]:[t[0],s,a,i]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Zr(this.depthwiseInitializer),t.depthwiseRegularizer=xr(this.depthwiseRegularizer),t.depthwiseConstraint=Wi(this.depthwiseRegularizer),t}}GSe.className="DepthwiseConv2D";Pe(GSe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qSe(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new oe("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return t=i(t),n=i(n),{inputs:e,initialState:t,constants:n}}function XSe(e,t,n,r=!1,i,s,a=!1,o=!1){return he(()=>{const l=t.shape.length;if(l<3)throw new oe(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Cc(2,l));t=yn(t,u),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=qe(qe(i,"bool"),"float32"),i.rank===l-1&&(i=ta(i,-1)),i=yn(i,u)),r&&(t=Ml(t,0),i!=null&&(i=Ml(i,0)));const c=[];let f,d=n;const h=t.shape[0],m=Ll(t);let g;i!=null&&(g=Ll(i));for(let x=0;x<h;++x){const w=m[x],C=he(()=>e(w,d));if(i==null)f=C[0],d=C[1];else{const S=he(()=>{const E=g[x],A=st(nl(E),E),k=Me(ie(C[0],E),ie(d[0],A)),N=d.map((I,T)=>Me(ie(C[1][T],E),ie(I,A)));return{output:k,newStates:N}});f=S.output,d=S.newStates}o&&c.push(f)}let b;return o&&(b=wo(c,1)),[f,b,d]})}class Bm extends on{constructor(t){super(t);let n;if(t.cell==null)throw new oe("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new NK({cells:t.cell}):n=t.cell,n.stateSize==null)throw new oe("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Vi({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Cc(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){dW(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[t[0],t[1],r]:i=[t[0],r],this.returnState){const s=[];for(const a of n)s.push([t[0],a]);return[i].concat(s)}else return i}computeMask(t,n){return he(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<t;++r)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new Qt("Constants support is not implemented in RNN yet.");dW(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new Vi({shape:[n,null,...r]});const i=[t[0]].concat(t.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!dn(this.stateSpec.map(a=>a.shape[a.shape.length-1]),s))throw new oe(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(a=>new Vi({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){he(()=>{if(!this.stateful)throw new gf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new oe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Ai([r,i])):this.states_=[Ai([r,this.cell.stateSize])];else if(t==null)Jt(this.states_),this.keptStates!=null&&(Jt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Ai([r,i])):this.states_[0]=Ai([r,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new oe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):Jt(this.states_);for(let i=0;i<this.states_.length;++i){const s=t[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,a];if(!dn(s.shape,o))throw new oe(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>zi(i.clone()))})}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=qSe(t,r,i,this.numConstants);t=s.inputs,r=s.initialState,i=s.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new Vi({shape:u.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(n.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof Yf){const u=[t].concat(a),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(u,n);return this.inputSpec=f,d}else return super.apply(t,n)}call(t,n){return he(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;t=zt(t),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(t));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new oe(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:i},u=XSe((m,g)=>{const b=this.cell.call([m].concat(g),o);return[b[0],b.slice(1)]},t,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],f=u[1],d=u[2];this.stateful&&this.resetStates(d,i);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(t){return he(()=>{let n=Ai(t.shape);return n=lt(n,[1,2]),n=g_(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?cW(n,[1,r]):n):this.cell.stateSize>1?[cW(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Bm.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),n)}static fromConfig(t,n,r={}){const i=n.cell,s=Th(i,r);return new t(Object.assign(n,{cell:s}))}}Bm.className="RNN";Pe(Bm);class YM extends on{}class _K extends YM{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,rs(this.units,"units"),this.activation=sm(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Ur(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ur(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ur(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Vr(t.kernelRegularizer),this.recurrentRegularizer=Vr(t.recurrentRegularizer),this.biasRegularizer=Vr(t.biasRegularizer),this.kernelConstraint=Hi(t.kernelConstraint),this.recurrentConstraint=Hi(t.recurrentConstraint),this.biasConstraint=Hi(t.biasConstraint),this.dropout=Ox([1,rm([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Ox([1,rm([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Rn(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return he(()=>{if(t=t,t.length!==2)throw new oe(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let r=t[1];t=t[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=am({ones:()=>nl(t),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=am({ones:()=>nl(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?s=Mf(ie(t,a),this.kernel.read()):s=Mf(t,this.kernel.read()),this.bias!=null&&(s=Dc(s,this.bias.read())),o!=null&&(r=ie(r,o));let l=Me(s,Mf(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:im(this.activation),useBias:this.useBias,kernelInitializer:Zr(this.kernelInitializer),recurrentInitializer:Zr(this.recurrentInitializer),biasInitializer:Zr(this.biasInitializer),kernelRegularizer:xr(this.kernelRegularizer),recurrentRegularizer:xr(this.recurrentRegularizer),biasRegularizer:xr(this.biasRegularizer),activityRegularizer:xr(this.activityRegularizer),kernelConstraint:Wi(this.kernelConstraint),recurrentConstraint:Wi(this.recurrentConstraint),biasConstraint:Wi(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),n)}}_K.className="SimpleRNNCell";Pe(_K);class YSe extends Bm{constructor(t){t.cell=new _K(t),super(t)}call(t,n){return he(()=>{this.cell.dropoutMask!=null&&(Jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}static fromConfig(t,n){return new t(n)}}YSe.className="SimpleRNN";Pe(YSe);class TK extends YM{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new oe("GRUCell does not support reset_after parameter set to true.");this.units=t.units,rs(this.units,"units"),this.activation=sm(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=sm(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Ur(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ur(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ur(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Vr(t.kernelRegularizer),this.recurrentRegularizer=Vr(t.recurrentRegularizer),this.biasRegularizer=Vr(t.biasRegularizer),this.kernelConstraint=Hi(t.kernelConstraint),this.recurrentConstraint=Hi(t.recurrentConstraint),this.biasConstraint=Hi(t.biasConstraint),this.dropout=Ox([1,rm([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Ox([1,rm([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Rn(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return he(()=>{if(t=t,t.length!==2)throw new oe(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const r=n.training==null?!1:n.training;let i=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=am({ones:()=>nl(t),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=am({ones:()=>nl(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,u;0<this.dropout&&this.dropout<1&&(t=ie(t,s[0]));let c=Mf(t,this.kernel.read());this.useBias&&(c=Dc(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ie(i,a[0]));const f=this.recurrentKernel.read(),[d,h]=ho(f,[2*this.units,this.units],f.rank-1),m=Mf(i,d),[g,b,x]=ho(c,3,c.rank-1),[w,C]=ho(m,2,m.rank-1);o=this.recurrentActivation.apply(Me(g,w)),l=this.recurrentActivation.apply(Me(b,C));const S=Mf(ie(l,i),h);u=this.activation.apply(Me(x,S));const E=Me(ie(o,i),ie(Me(1,_r(o)),u));return[E,E]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:im(this.activation),recurrentActivation:im(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Zr(this.kernelInitializer),recurrentInitializer:Zr(this.recurrentInitializer),biasInitializer:Zr(this.biasInitializer),kernelRegularizer:xr(this.kernelRegularizer),recurrentRegularizer:xr(this.recurrentRegularizer),biasRegularizer:xr(this.biasRegularizer),activityRegularizer:xr(this.activityRegularizer),kernelConstraint:Wi(this.kernelConstraint),recurrentConstraint:Wi(this.recurrentConstraint),biasConstraint:Wi(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),n)}}TK.className="GRUCell";Pe(TK);class KSe extends Bm{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new TK(t),super(t)}call(t,n){return he(()=>{this.cell.dropoutMask!=null&&(Jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}KSe.className="GRU";Pe(KSe);class KM extends YM{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,rs(this.units,"units"),this.activation=sm(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=sm(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Ur(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ur(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ur(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Vr(t.kernelRegularizer),this.recurrentRegularizer=Vr(t.recurrentRegularizer),this.biasRegularizer=Vr(t.biasRegularizer),this.kernelConstraint=Hi(t.kernelConstraint),this.recurrentConstraint=Hi(t.recurrentConstraint),this.biasConstraint=Hi(t.biasConstraint),this.dropout=Ox([1,rm([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Ox([1,rm([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=Rn(t);const r=t[t.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,a=this.units;i=new(n=class extends Bu{apply(l,u){const c=s.apply([a]),f=new hK().apply([a]),d=s.apply([a*2]);return Kue(Kue(c,f),d)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return he(()=>{const r=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new oe(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let i=t[1];const s=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=am({ones:()=>nl(t),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=am({ones:()=>nl(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,u,c,f;0<this.dropout&&this.dropout<1&&(t=ie(t,a[0]));let d=Mf(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=ie(i,o[0])),d=Me(d,Mf(i,this.recurrentKernel.read())),this.useBias&&(d=Dc(d,this.bias.read()));const[h,m,g,b]=ho(d,4,d.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(m),c=Me(ie(u,s),ie(l,this.activation.apply(g))),f=this.recurrentActivation.apply(b);const x=ie(f,this.activation.apply(c));return[x,x,c]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:im(this.activation),recurrentActivation:im(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Zr(this.kernelInitializer),recurrentInitializer:Zr(this.recurrentInitializer),biasInitializer:Zr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:xr(this.kernelRegularizer),recurrentRegularizer:xr(this.recurrentRegularizer),biasRegularizer:xr(this.biasRegularizer),activityRegularizer:xr(this.activityRegularizer),kernelConstraint:Wi(this.kernelConstraint),recurrentConstraint:Wi(this.recurrentConstraint),biasConstraint:Wi(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),n)}}KM.className="LSTMCell";Pe(KM);class ZSe extends Bm{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new KM(t),super(t)}call(t,n){return he(()=>{this.cell.dropoutMask!=null&&(Jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}ZSe.className="LSTM";Pe(ZSe);class NK extends YM{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return he(()=>{t=t;let r=t.slice(1);const i=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?i.push(r.splice(0,o.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=i[o],o===0?a=[t[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),s.push(a.slice(1))}r=[];for(const o of s.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(t){dW(t)&&(t=t[0]),t=t;let n;this.cells.forEach((r,i)=>{z1(`RNNCell_${i}`,()=>{r.build(t),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},t),i)}static fromConfig(t,n,r={}){const i=[];for(const s of n.cells)i.push(Th(s,r));return new t({cells:i})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return hW(t)}setWeights(t){const n=[];for(const r of this.cells){const i=r.weights.length,s=t.splice(i);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],s[a]])}vK(n)}}NK.className="StackedRNNCells";Pe(NK);function am(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=e,a=()=>s!=null?s(t(),n):Uwe(t(),n),o=()=>b_(a,t,r);return!i||i<=1?zi(o().clone()):Array(i).fill(void 0).map(o).map(u=>zi(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Drt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class QSe extends Bm{constructor(t){if(t.unroll)throw new Qt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new Qt("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Vi({ndim:5})]}call(t,n){return he(()=>{if(this.cell.dropoutMask!=null&&(Jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new oe("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:s})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return he(()=>{const{stateSize:n}=this.cell,r=t.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],a=Ai(s);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(t,n=!1){he(()=>{if(!this.stateful)throw new gf("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new oe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ai(s)):this.states_=[Ai(s)];else if(t==null)Jt(this.states_),this.keptStates!=null&&(Jt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ai(s)):this.states_[0]=Ai(s);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new oe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):Jt(this.states_);for(let o=0;o<this.states_.length;++o){const l=t[o],u=s;if(!dn(l.shape,u))throw new oe(`State ${o} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>zi(o.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",u=t[l?3:2],c=t[l?4:3],f=gc(u,i[0],s,a[0],o[0]),d=gc(c,i[1],s,a[1],o[1]);return[...t.slice(0,2),...l?[r,f,d]:[f,d,r]]}}QSe.className="ConvRNN2D";class DK extends KM{constructor(t){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:a,dilationRate:o}=t;super(Object.assign(Object.assign({},t),{units:n})),this.filters=n,rs(this.filters,"filters"),this.kernelSize=ox(r,2,"kernelSize"),this.kernelSize.forEach(l=>rs(l,"kernelSize")),this.strides=ox(i||1,2,"strides"),this.strides.forEach(l=>rs(l,"strides")),this.padding=s||"valid",ql(this.padding),this.dataFormat=a||"channelsLast",bi(this.dataFormat),this.dilationRate=ox(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>rs(l,"dilationRate"))}build(t){var n;t=Rn(t);const r=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[r]==null)throw new oe(`The channel dimension of the input should be defined. Found ${t[r]}`);const i=t[r],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Bu{apply(d,h){const m=u.apply([c]),g=uo([c]),b=u.apply([c*2]);return dK([m,g,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return he(()=>{if(t.length!==3)throw new oe(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const r=n.training||!1,i=t[0],s=t[1],a=t[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=am({ones:()=>nl(i),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(z,Y,Z)=>!Y||!Y[Z]?z:ie(Y[Z],z);let c=u(i,l,0),f=u(i,l,1),d=u(i,l,2),h=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=am({ones:()=>nl(s),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let g=u(s,m,0),b=u(s,m,1),x=u(s,m,2),w=u(s,m,3);const C=3,[S,E,A,k]=ho(this.kernel.read(),o,C),[N,I,T,D]=this.useBias?ho(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,S,N,this.padding),f=this.inputConv(f,E,I,this.padding),d=this.inputConv(d,A,T,this.padding),h=this.inputConv(h,k,D,this.padding);const[L,P,M,F]=ho(this.recurrentKernel.read(),o,C);g=this.recurrentConv(g,L),b=this.recurrentConv(b,P),x=this.recurrentConv(x,M),w=this.recurrentConv(w,F);const R=this.recurrentActivation.apply(Me(c,g)),j=this.recurrentActivation.apply(Me(f,b)),H=Me(ie(j,a),ie(R,this.activation.apply(Me(d,x)))),G=ie(this.recurrentActivation.apply(Me(h,w)),this.activation.apply(H));return[G,G,H]})}getConfig(){const t=super.getConfig(),{units:n}=t,r=Drt(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(t,n,r,i){const s=Hh(t,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Dc(s,r,this.dataFormat):s}recurrentConv(t,n){return Hh(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}DK.className="ConvLSTM2DCell";Pe(DK);class JSe extends QSe{constructor(t){const n=new DK(t);super(Object.assign(Object.assign({},t),{cell:n}))}static fromConfig(t,n){return new t(n)}}JSe.className="ConvLSTM2D";Pe(JSe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IK extends on{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return b_(()=>Uwe(r,this.rate,s,this.seed),()=>r,i)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}IK.className="Dropout";Pe(IK);class eCe extends IK{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}eCe.className="SpatialDropout1D";Pe(eCe);class OK extends on{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,rs(this.units,"units"),this.activation=sm(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=Ur(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ur(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Hi(t.kernelConstraint),this.biasConstraint=Hi(t.biasConstraint),this.kernelRegularizer=Vr(t.kernelRegularizer),this.biasRegularizer=Vr(t.biasRegularizer),this.activityRegularizer=Vr(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Rn(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=Rn(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t),i=Fwe(this.activation.getClassName());let s;return i!=null?s=Mf(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Mf(r,this.kernel.read()),this.bias!=null&&(s=Dc(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const t={units:this.units,activation:im(this.activation),useBias:this.useBias,kernelInitializer:Zr(this.kernelInitializer),biasInitializer:Zr(this.biasInitializer),kernelRegularizer:xr(this.kernelRegularizer),biasRegularizer:xr(this.biasRegularizer),activityRegularizer:xr(this.activityRegularizer),kernelConstraint:Wi(this.kernelConstraint),biasConstraint:Wi(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}OK.className="Dense";Pe(OK);let RK=class extends on{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Rn(t);for(const n of t.slice(1))if(n==null)throw new oe(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],B0(t,1)]}call(t,n){return he(()=>{this.invokeCallHook(t,n);let r=zt(t);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=yn(r,i)}return fnt(r)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}};RK.className="Flatten";Pe(RK);class tCe extends on{constructor(t){super(t),this.supportsMasking=!0,this.activation=sm(t.activation)}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t);return this.activation.apply(r)})}getConfig(){const t={activation:im(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}tCe.className="Activation";Pe(tCe);class nCe extends on{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return he(()=>(t=zt(t),unt(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}nCe.className="RepeatVector";Pe(nCe);class rCe extends on{constructor(t){super(t),this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,a=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(a===null)a=l;else throw new oe("Can only specifiy one unknown dimension.");else s*=u}const o=B0(t);if(a!==null){if(s===0||o%s!==0)throw new oe(r);i[a]=o/s}else if(o!==s)throw new oe(r);return i}computeOutputShape(t){let n=!1;for(let r=0;r<t.length;++r)if(this.isUnknown(t[r])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return ae(r,s)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}rCe.className="Reshape";Pe(rCe);class iCe extends on{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=Cc(1,t.dims.length+1);if(!dn(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Vi({ndim:this.dims.length+1})]}computeOutputShape(t){t=Rn(t);const n=t.slice();return this.dims.forEach((r,i)=>{n[i+1]=t[r]}),n}call(t,n){return yn(zt(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}iCe.className="Permute";Pe(iCe);class sCe extends on{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const r=zt(t);return yE(my(r,this.maskValue),-1)}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t),a=yE(my(r,this.maskValue),-1,!0);return ie(r,qe(a,r.dtype))})}}sCe.className="Masking";Pe(sCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aCe extends on{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Zn(t.inputLength))}this.inputDim=t.inputDim,rs(this.inputDim,"inputDim"),this.outputDim=t.outputDim,rs(this.outputDim,"outputDim"),this.embeddingsInitializer=Ur(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Vr(t.embeddingsRegularizer),this.activityRegularizer=Vr(t.activityRegularizer),this.embeddingsConstraint=Hi(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return he(()=>this.maskZero?(t=zt(t),my(t,En(t))):null)}computeOutputShape(t){if(t=Rn(t),this.inputLength==null)return[...t,this.outputDim];const n=Zn(this.inputLength);if(n.length!==t.length-1)throw new oe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],a=t[i+1];if(s!=null&&a!=null&&s!==a)throw new oe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);s==null&&(n[r]=a),r++}}return[t[0],...n,this.outputDim]}call(t,n){return he(()=>{this.invokeCallHook(t,n);let r=zt(t);r.dtype!=="int32"&&(r=Ff(r,"int32"));const i=jwe(this.embeddings.read(),ae(r,[r.size]));return ae(i,Rn(this.computeOutputShape(r.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Zr(this.embeddingsInitializer),embeddingsRegularizer:xr(this.embeddingsRegularizer),activityRegularizer:xr(this.activityRegularizer),embeddingsConstraint:Wi(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}aCe.className="Embedding";Pe(aCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eb extends on{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new Qt}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const r=t.slice(0,t.length-n.length);for(let i=0;i<n.length;++i){const s=t[t.length-n.length+i],a=n[i];if(s==null||a==null||s<0||a<0)r.push(null);else if(s===1)r.push(a);else if(a===1)r.push(s);else{if(s!==a)throw new oe("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));r.push(s)}}return r}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Rn(t)]),t=t,t.length<2)throw new oe(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const s of t)s!=null&&s[0]!==null&&n.push(s[0]);if(n=P0(n),n.length>1)throw new oe(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let r=t[0]==null?null:t[0].slice(1);for(let s=1;s<t.length;++s){const a=t[s]==null?null:t[s].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const i=t.map(s=>s.length);t.indexOf(null)===-1&&P0(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return he(()=>{if(t=t,this.reshapeRequired){const r=[],i=t.map(s=>s.rank);if(i.indexOf(null)===-1){const s=rm(i);for(let a of t){const o=a.rank;for(let l=0;l<s-o;++l)a=g_(a,1);r.push(a)}return this.mergeFunction(r)}else{let s=!1;for(const l of t){const u=l.rank;if(u==null){const c=l.shape,f=c[0],d=c.slice(1).concat([f]);let h=ae(l,[f].concat(B0(c.slice(1))));h=yn(h,[1,0]),h=ae(h,d),r.push(h),s=!0}else if(u>1){const c=Cc(1,u).concat([0]);r.push(yn(l,c)),s=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(s){if(o==null){const l=a.shape,u=l.length,c=l[u-1],f=[c].concat(l.slice(0,l.length-1));a=ae(yn(ae(a,[-1,c]),[1,0]),f)}else if(o>1){const l=[o-1].concat(Cc(0,o-1));a=yn(a,l)}}return a}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let i=1;i<t.length;++i){const s=t[i]==null?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of t)i!=null&&i[0]!==null&&r.push(i[0]);return r=P0(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(t,n){return he(()=>{if(n==null)return null;if(!Array.isArray(n))throw new oe("`mask` should be an Array");if(!Array.isArray(t))throw new oe("`inputs` should be an Array");if(n.length!==t.length)throw new oe(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:ta(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Sc(r,n[i]);return r})}}class oCe extends eb{constructor(t){super(t)}mergeFunction(t){return he(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=Me(n,t[r]);return n})}}oCe.className="Add";Pe(oCe);class lCe extends eb{constructor(t){super(t)}mergeFunction(t){return he(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=ie(n,t[r]);return n})}}lCe.className="Multiply";Pe(lCe);class uCe extends eb{constructor(t){super(t)}mergeFunction(t){return he(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=Me(n,t[r]);return ie(1/t.length,n)})}}uCe.className="Average";Pe(uCe);class cCe extends eb{constructor(t){super(t)}mergeFunction(t){return he(()=>{let n=t[0];for(let r=1;r<t.length;++r)n=dd(n,t[r]);return n})}}cCe.className="Maximum";Pe(cCe);class fCe extends eb{constructor(t){super(t)}mergeFunction(t){return he(()=>{let n=t[0];for(let r=1;r<t.length;++r)n=tm(n,t[r]);return n})}}fCe.className="Minimum";Pe(fCe);class dCe extends eb{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new oe("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const i of t)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<t.length;++i){const s=t[i].slice();s.splice(this.axis,1);let a=!1;for(const o of r)if(dn(o,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new oe("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return he(()=>dK(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new oe("A `Concatenate` layer should be called on a list of inputs.");const n=t,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new oe("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new oe("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new oe(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return he(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const i=[];for(let a=0;a<t.length;++a)n[a]==null?i.push(qe(nl(t[a]),"bool")):n[a].rank<t[a].rank?i.push(ta(n[a],-1)):i.push(n[a]);const s=pi(i,this.axis);return tM(s,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}dCe.className="Concatenate";Pe(dCe);function r3(e,t){for(;e<0;)e+=t;return e}function Irt(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Qt("batchDot is not implemented for tensors of 4D or higher rank yet");if(q(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),q(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new Qt("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return he(()=>{let a;if(r>i){a=r-i;const l=[];for(let u=0;u<a;++u)l.push(1);t=ae(t,t.shape.concat(l))}else if(i>r){a=i-r;const l=[];for(let u=0;u<a;++u)l.push(1);e=ae(e,e.shape.concat(l))}else a=0;let o;if(e.shape.length===2&&t.shape.length===2)s[0]===s[1]?o=lt(ie(e,t),s[0]):o=lt(ie(yn(e,[1,0]),t),s[1]);else{const l=s[0]!==e.shape.length-1,u=s[1]===t.shape.length-1;o=nn(e,t,l,u)}if(a>0){let l;r>i?l=r+i-3:l=r-1;const u=[];for(let c=l;c<l+a;++c)u.push(c);o=Lm(o,u)}return o.shape.length===1&&(o=ta(o,1)),o})}class hCe extends eb{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){q(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],r=t[1];if(n.length>3||r.length>3)throw new Qt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new oe(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(t){if(t.length!==2)throw new oe(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],r=t[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>r3(s,t[a].shape.length)):i=[r3(this.axes,n.shape.length),r3(this.axes,r.shape.length)],this.normalize&&(n=ZO(n,i[0]),r=ZO(r,i[1])),Irt(n,r,i)}interpretAxes(t,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[r3(this.axes,t.length),r3(this.axes,n.length)],r}computeOutputShape(t){q(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),r=t[1].slice();if(n.length>3||r.length>3)throw new Qt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}hCe.className="Dot";Pe(hCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pCe extends on{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t);return b_(()=>Me(VM(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}pCe.className="GaussianNoise";Pe(pCe);class mCe extends on{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return he(()=>{this.invokeCallHook(t,n);const r=zt(t);return this.rate>0&&this.rate<1?b_(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return ie(r,VM(r.shape,1,s))},()=>r,n.training||!1):r})}}mCe.className="GaussianDropout";Pe(mCe);class gCe extends on{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||zt(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return he(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(t);return b_(()=>{const s=zt(t),o=-1.6732632423543772*1.0507009873554805;let l=ap(Mm(r),this.rate);l=Ff(l,"float32");const u=((1-this.rate)*(1+this.rate*o**2))**-.5,c=-u*o*this.rate,f=Me(ie(s,l),ie(Me(l,-1),o));return Me(ie(f,u),c)},()=>zt(t),n.training||!1)}return t})}}gCe.className="AlphaDropout";Pe(gCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CE(e,t,n,r,i,s=.001){let a;if(e.rank===2)a=MX(e,t,n,r,i,s);else if(e.rank===3)a=LX(e,t,n,r,i,s);else if(e.rank===4)a=PX(e,t,n,r,i,s);else throw new Qt(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return a}function Ort(e,t,n,r,i=.001){return he(()=>{const s=r_(e,r),a=s.mean,o=s.variance;return[CE(e,a,o,n,t,i),a,o]})}function Rrt(e,t,n,r,i=.001){return he(()=>{const s=r_(e,r),a=s.mean,o=s.variance,l=[];for(const m of Cc(0,e.rank))r.indexOf(m)!==-1?l.push(1):l.push(e.shape[m]);const u=ae(a,l),c=ae(o,l),f=t==null?null:ae(t,l),d=n==null?null:ae(n,l);return[CE(e,u,c,d,f,i),a,o]})}function Frt(e,t,n,r,i=.001){return dn(r.slice().sort(),Cc(0,e.rank-1))?Ort(e,t,n,r,i):Rrt(e,t,n,r,i)}class yCe extends on{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Ur(t.betaInitializer||"zeros"),this.gammaInitializer=Ur(t.gammaInitializer||"ones"),this.movingMeanInitializer=Ur(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ur(t.movingVarianceInitializer||"ones"),this.betaConstraint=Hi(t.betaConstraint),this.gammaConstraint=Hi(t.gammaConstraint),this.betaRegularizer=Vr(t.betaRegularizer),this.gammaRegularizer=Vr(t.gammaRegularizer)}build(t){t=Rn(t);const n=this.axis>=0?this.axis:this.axis+t.length,r=t[n];if(r==null)throw new oe(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Vi({ndim:t.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return he(()=>{const r=n.training==null?!1:n.training,i=zt(t),s=i.shape,a=s.length,o=Cc(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const u=by(1,a);u[l]=s[l];const c=o.slice();c.sort();const f=!dn(c,Cc(0,a).slice(0,a-1)),d=()=>{if(f){const w=ae(this.movingMean.read(),u),C=ae(this.movingVariance.read(),u),S=this.center?ae(this.beta.read(),u):null,E=this.scale?ae(this.gamma.read(),u):null;return CE(i,w,C,S,E,this.epsilon)}else return CE(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,m,g]=Frt(i,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(w,C,S)=>{he(()=>{const E=1-S,A=w.read(),k=ie(st(A,C),E);w.write(st(A,k))})};return(()=>{b(this.movingMean,m,this.momentum),b(this.movingVariance,g,this.momentum)})(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Zr(this.betaInitializer),gammaInitializer:Zr(this.gammaInitializer),movingMeanInitializer:Zr(this.movingMeanInitializer),movingVarianceInitializer:Zr(this.movingVarianceInitializer),betaRegularizer:xr(this.betaRegularizer),gammaRegularizer:xr(this.gammaRegularizer),betaConstraint:Wi(this.betaConstraint),gammaConstraint:Wi(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}yCe.className="BatchNormalization";Pe(yCe);class bCe extends on{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Ur(t.betaInitializer||"zeros"),this.gammaInitializer=Ur(t.gammaInitializer||"ones"),this.betaRegularizer=Vr(t.betaRegularizer),this.gammaRegularizer=Vr(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Rn(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==P0(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>t[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(t,n){const r=zt(t),i=r.shape,s=i.length;return he(()=>{let{mean:o,variance:l}=r_(r,this.axis,!0);const u=by(1,s);for(const g of this.axis)u[g]=i[g];const c=g=>g!=null&&g.shape.length!==s?ae(g,u):g;let f=this.scale?c(this.gamma.read()):null,d=this.center?c(this.beta.read()):null;const h=[],m=[];for(let g=0;g<s;++g)this.axis.indexOf(g)!==-1?(h.push(i[g]),m.push(1)):(h.push(1),m.push(i[g]));return o=_l(o,h),l=_l(l,h),f!=null&&(f=_l(f,m)),d!=null&&(d=_l(d,m)),CE(r,o,l,d,f,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Zr(this.betaInitializer),gammaInitializer:Zr(this.gammaInitializer),betaRegularizer:xr(this.betaRegularizer),gammaRegularizer:xr(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}bCe.className="LayerNormalization";Pe(bCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mrt(e,t,n){return he(()=>{if(e.rank!==4)throw new oe(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new oe("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=$c()),n!=="channelsLast"&&n!=="channelsFirst")throw new oe(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],op(e,r)})}class xCe extends on{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?$c():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new oe(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,r;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],r=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new oe(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new oe(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);r=t.padding[1]}this.padding=[n,r]}this.inputSpec=[new Vi({ndim:4})]}computeOutputShape(t){t=Rn(t);let n,r;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?r=t[3]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],t[1],n,r]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?r=t[2]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],n,r,t[3]])}call(t,n){return he(()=>Mrt(zt(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}xCe.className="ZeroPadding2D";Pe(xCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZM(e,t,n,r,i,s){return he(()=>{bi(i),Lwe(s),ql(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=$c()),s==null&&(s="max"),e=AK(e,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=n_(e,t,n,o):a=XA(e,t,n,o),i==="channelsFirst"&&(a=yn(a,[0,3,1,2])),a})}function vCe(e,t,n,r,i,s){return he(()=>{bi(i),Lwe(s),ql(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=$c()),s==null&&(s="max"),e=BSe(e,i);let a;const o=r==="same"?"same":"valid";return s==="max"?a=oY(e,t,n,o):a=FX(e,t,n,o),i==="channelsFirst"&&(a=yn(a,[0,4,1,2,3])),a})}class wCe extends on{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new oe(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(rs(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new oe(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);rs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,ql(this.padding),this.inputSpec=[new Vi({ndim:3})]}computeOutputShape(t){t=Rn(t);const n=gc(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return he(()=>{this.invokeCallHook(t,n),t=g_(zt(t),2);const r=this.poolingFunction(zt(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Lm(r,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class SCe extends wCe{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return bi(s),ql(i),ZM(t,n,r,i,s,"max")}}SCe.className="MaxPooling1D";Pe(SCe);class CCe extends wCe{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return bi(s),ql(i),ZM(t,n,r,i,s,"avg")}}CCe.className="AveragePooling1D";Pe(CCe);class $Ce extends on{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new oe(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];rs(this.poolSize,"poolSize"),rs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,bi(this.dataFormat),ql(this.padding),this.inputSpec=[new Vi({ndim:4})]}computeOutputShape(t){t=Rn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=gc(n,this.poolSize[0],this.padding,this.strides[0]),r=gc(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,r]:[t[0],n,r,t[3]]}call(t,n){return he(()=>(this.invokeCallHook(t,n),this.poolingFunction(zt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class FK extends $Ce{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return bi(s),ql(i),ZM(t,n,r,i,s,"max")}}FK.className="MaxPooling2D";Pe(FK);class ECe extends $Ce{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return bi(s),ql(i),ZM(t,n,r,i,s,"avg")}}ECe.className="AveragePooling2D";Pe(ECe);class kCe extends on{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new oe(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];rs(this.poolSize,"poolSize"),rs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,bi(this.dataFormat),ql(this.padding),this.inputSpec=[new Vi({ndim:5})]}computeOutputShape(t){t=Rn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=gc(n,this.poolSize[0],this.padding,this.strides[0]),r=gc(r,this.poolSize[1],this.padding,this.strides[1]),i=gc(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,r,i]:[t[0],n,r,i,t[4]]}call(t,n){return he(()=>(this.invokeCallHook(t,n),this.poolingFunction(zt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class ACe extends kCe{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return bi(s),ql(i),vCe(t,n,r,i,s,"max")}}ACe.className="MaxPooling3D";Pe(ACe);class _Ce extends kCe{constructor(t){super(t)}poolingFunction(t,n,r,i,s){return bi(s),ql(i),vCe(t,n,r,i,s,"avg")}}_Ce.className="AveragePooling3D";Pe(_Ce);class TCe extends on{constructor(t){super(t),this.inputSpec=[new Vi({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new Qt}}class NCe extends TCe{constructor(t){super(t||{})}call(t,n){return he(()=>{const r=zt(t);return Kr(r,1)})}}NCe.className="GlobalAveragePooling1D";Pe(NCe);class DCe extends TCe{constructor(t){super(t||{})}call(t,n){return he(()=>{const r=zt(t);return Qo(r,1)})}}DCe.className="GlobalMaxPooling1D";Pe(DCe);class ICe extends on{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,bi(this.dataFormat),this.inputSpec=[new Vi({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new Qt}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class OCe extends ICe{call(t,n){return he(()=>{const r=zt(t);return this.dataFormat==="channelsLast"?Kr(r,[1,2]):Kr(r,[2,3])})}}OCe.className="GlobalAveragePooling2D";Pe(OCe);class RCe extends ICe{call(t,n){return he(()=>{const r=zt(t);return this.dataFormat==="channelsLast"?Qo(r,[1,2]):Qo(r,[2,3])})}}RCe.className="GlobalMaxPooling2D";Pe(RCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FCe extends on{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,r={}){const i=n.layer,s=Th(i,r);delete n.layer;const a={layer:s};return Object.assign(a,n),new t(a)}}class MCe extends FCe{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=Rn(t),t.length<3)throw new oe(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Rn(t);const n=[t[0]].concat(t.slice(2)),r=this.layer.computeOutputShape(n),i=t[1];return[r[0],i].concat(r.slice(1))}call(t,n){return he(()=>(t=zt(t),XSe((a,o)=>[zt(this.layer.call(a,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}MCe.className="TimeDistributed";Pe(MCe);function Lrt(e){Jy(int,"BidirectionalMergeMode",e)}const Prt="concat";class LCe extends FCe{constructor(t){super(t);const n=t.layer.getConfig(),r={};r.className=t.layer.getClassName(),r.config=n,this.forwardLayer=Th(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=t.layer.getClassName(),i.config=n,this.backwardLayer=Th(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?Prt:t.mergeMode,Lrt(this.mergeMode),t.weights)throw new Qt("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,r=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,r)),this.backwardLayer.setWeights(t.slice(r))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):ro(i)}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=qSe(t,r,i,this.numConstants);if(t=s.inputs,r=s.initialState,i=s.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(r==null||r.length===0)&&i==null)return super.apply(t,n);const a=[],o=[];if(r!=null){const u=r.length;if(u%2>0)throw new oe("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const c=r.map(f=>new Vi({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),o.push(...c)}if(i!=null)throw new Qt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof Yf;for(const u of a)if(u instanceof Yf!==l)throw new oe("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[t].concat(a),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(u,n);return this.inputSpec=f,d}else return super.apply(t,n)}call(t,n){return he(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(t,n),s=this.backwardLayer.call(t,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);i=this.forwardLayer.call(t,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(t,Object.assign(n,{initialState:u}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Ml(s,1));let o;return this.mergeMode==="concat"?o=dK([i,s]):this.mergeMode==="sum"?o=Me(i,s):this.mergeMode==="ave"?o=ie(.5,Me(i,s)):this.mergeMode==="mul"?o=ie(i,s):this.mergeMode==null&&(o=[i,s]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){z1(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),z1(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const r=Th(n.layer);if(delete n.layer,n.numConstants!=null)throw new Qt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new t(i)}}LCe.className="Bidirectional";Pe(LCe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class PCe extends on{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return he(()=>(t=zt(t),t.dtype!=="float32"&&(t=Ff(t,"float32")),Me(ie(t,this.scale),this.offset)))}}PCe.className="Rescaling";Pe(PCe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:Brt,cropAndResize:zrt}=Tl;class BCe extends on{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,n,r,i,s,a,o,l){return he(()=>{let u,c=!1;const f=n/a,d=r/o,h=(i+n)/a,m=(s+r)/o,g=[f,d,h,m],b=[];t.rank===3?(c=!0,u=wo([t])):u=t;for(let E=0;E<u.shape[0];E++)b.push(g);const x=$u(b,[b.length,4]),w=gy(0,b.length,1,"int32"),S=zrt(u,x,w,[i,s],"nearest");return Ff(c?zt(Ll(S)):S,l)})}upsize(t,n,r,i){return he(()=>{const s=Brt(t,[n,r]);return Ff(s,i)})}call(t,n){return he(()=>{const r=zt(t),i=r.dtype,s=r.shape,a=s[s.length-3],o=s[s.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let u=0;return o!==this.width&&(u=Math.floor((o-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,a,o,i):this.upsize(t,this.height,this.width,i)})}getConfig(){const t={height:this.height,width:this.width},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=Rn(t);const n=t.length-3,r=t.length-2;return t[n]=this.height,t[r]=this.width,t}}BCe.className="CenterCrop";Pe(BCe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jrt(e,t,n,r){let i=zt(e);if(i.dtype!=="int32"&&(i=Ff(i,"int32")),t==="int")return i;const s=i.shape;if(i.rank===0&&(i=ta(i,-1)),t==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=ta(i,-1)),i.rank>2)throw new oe(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${s} which would result in output rank ${i.rank}.`);const a=["multiHot","oneHot"].includes(t),o=i;let l;if(typeof r<"u"&&t==="count"?l=WO(o,r,n,a):l=WO(o,[],n,a),t!=="tfIdf")return l;if(r)return ie(l,r);throw new oe("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zCe extends on{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){return t=Rn(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,n){return he(()=>{t=zt(t),t.dtype!=="int32"&&(t=Ff(t,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new oe(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=zt(n.countWeights)}const i=Qo(t),s=py(t),a=Ao(this.numTokens,i).bufferSync().get(0),o=ap(s,0).bufferSync().get(0);if(!(a&&o))throw new oe(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return jrt(t,this.outputMode,this.numTokens,r)})}}zCe.className="CategoryEncoding";Pe(zCe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Urt=["bilinear","nearest"],pce=new Set(Urt);class jCe extends on{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(pce.has(t.interpolation))this.interpolation=t.interpolation;else throw new oe(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=Rn(t);const n=t[2];return[this.height,this.width,n]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return he(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Tl.resizeBilinear(t,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Tl.resizeNearestNeighbor(t,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...pce]} are supported`)})}}jCe.className="Resizing";Pe(jCe);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class UCe{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}UCe.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VCe extends on{constructor(t){super(t),this.randomGenerator=new UCe(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(t,n),t}}VCe.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vrt=["bilinear","nearest"],mce=new Set(Vrt);class WCe extends VCe{constructor(t){super(t);const{factor:n,interpolation:r="bilinear"}=t;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new oe(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new oe(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new oe(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(mce.has(r))this.interpolation=r;else throw new oe(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=Rn(t);const n=t[2];return[this.imgHeight,-1,n]}call(t,n){return he(()=>{const r=zt(t);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=Mm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Tl.resizeBilinear(t,a);case"nearest":return Tl.resizeNearestNeighbor(t,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...mce]} are supported`)}})}}WCe.className="RandomWidth";Pe(WCe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gce(e){return new zw(e)}function lx(e){return new OK(e)}function Wrt(e){return new RK(e)}function yce(e){return new FK(e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hrt=pe();Hrt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Lo;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(Lo||(Lo={}));var bce;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(bce||(bce={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MK={};function Grt(e,t){const n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};MK[e]=n}function HCe(e){return MK[e]}function qrt(e){delete MK[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B(e,t,n,r,i){const s=t.inputParams[e];if(s&&s.inputIndexStart!==void 0){const o=s.inputIndexStart,l=s.inputIndexEnd===0?void 0:s.inputIndexEnd===void 0?o+1:s.inputIndexEnd,u=o<0?t.inputNames.length+o:o;if(s.type==="tensor")return Es(t.inputNames[u],n,r,i);if(s.type==="tensors"){const d=t.inputs.slice(o,l);return t.inputNames.slice(o,l).filter((m,g)=>{var b;return((b=d[g])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(m=>Es(m,n,r,i))}const c=Es(t.inputNames[u],n,r,i),f=c.dataSync();return s.type==="number"?f[0]:Ol(c.shape,f)}const a=t.attrParams[e];return a&&a.value}function Es(e,t,n,r){const[i,s]=Bo(e,n);if(r!=null){const o=r.getHashTableHandleByName(i);if(o!=null)return o}const a=n.currentContextIds.find(o=>!!t[nR(i,o)]);return a!==void 0?t[nR(i,a)][s]:void 0}function xce(e,t,n){return t[nR(e,n.currentContextId)]}function lh(e,t){const[n,r,i]=Bo(e,t);return[nR(n,t&&t.currentContextId),r,i]}function nR(e,t){return t?`${e}-${t}`:e}function Bo(e,t){if(e==="")return["",0,void 0];const n=t!=null&&t.parseNodeNameCache!=null;if(n){const s=t.parseNodeNameCache.get(e);if(s!=null)return s}const r=e.split(":");let i;if(r.length===1)i=[e,0,void 0];else{const s=r[0],a=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);i=[s,o,a]}return n&&t.parseNodeNameCache.set(e,i),i}function MI(e,t,n){let r=B("pad",e,t,n);if(r==="explicit"){r=B("explicitPaddings",e,t,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let s=0;s<4;s++)i[s][0]=r[s*2],i[s][1]=r[s*2+1];return i}return r}function uh(e){return e.kept?e:If(e)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xrt=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Yrt=Object.freeze(Object.defineProperty({__proto__:null,json:Xrt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Krt=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Zrt=Object.freeze(Object.defineProperty({__proto__:null,json:Krt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qrt=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Jrt=Object.freeze(Object.defineProperty({__proto__:null,json:Qrt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eit=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],tit=Object.freeze(Object.defineProperty({__proto__:null,json:eit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nit=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],rit=Object.freeze(Object.defineProperty({__proto__:null,json:nit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iit=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sit=Object.freeze(Object.defineProperty({__proto__:null,json:iit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ait=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],oit=Object.freeze(Object.defineProperty({__proto__:null,json:ait},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lit=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],uit=Object.freeze(Object.defineProperty({__proto__:null,json:lit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cit=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],fit=Object.freeze(Object.defineProperty({__proto__:null,json:cit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dit=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],hit=Object.freeze(Object.defineProperty({__proto__:null,json:dit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pit=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],mit=Object.freeze(Object.defineProperty({__proto__:null,json:pit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const git=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],yit=Object.freeze(Object.defineProperty({__proto__:null,json:git},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bit=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],xit=Object.freeze(Object.defineProperty({__proto__:null,json:bit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vit=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],wit=Object.freeze(Object.defineProperty({__proto__:null,json:vit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sit=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Cit=Object.freeze(Object.defineProperty({__proto__:null,json:Sit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $it=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Eit=Object.freeze(Object.defineProperty({__proto__:null,json:$it},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kit=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Ait=Object.freeze(Object.defineProperty({__proto__:null,json:kit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _it=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Tit=Object.freeze(Object.defineProperty({__proto__:null,json:_it},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nit=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Dit=Object.freeze(Object.defineProperty({__proto__:null,json:Nit},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vce{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[Yrt,Zrt,Jrt,tit,rit,sit,oit,uit,fit,hit,mit,yit,xit,wit,Cit,Eit,Ait,Tit,Dit],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(t,n={}){const r=t.node,i=[],s=[],a=[],o=r.reduce((g,b)=>(g[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?i.push(g[b.name]):b.op==="Const"?s.push(g[b.name]):(b.input==null||b.input.length===0)&&a.push(g[b.name]),g),{});let l=[];const u=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(o);d.forEach(g=>{const b=o[g];b.inputNames.forEach((x,w)=>{const[C,,S]=lh(x),E=o[C];if(E.outputs!=null){const A=E.outputs.indexOf(S);if(A!==-1){const k=`${C}:${A}`;b.inputNames[w]=k}}b.inputs.push(E),E.children.push(b)})}),Object.keys(f).length===0?d.forEach(g=>{const b=o[g];b.children.length===0&&u.push(b)}):Object.keys(f).forEach(g=>{const[b]=lh(g),x=o[b];x!=null&&(x.signatureKey=f[g],u.push(x))}),Object.keys(c).length>0?Object.keys(c).forEach(g=>{const[b]=lh(g),x=o[b];x&&(x.signatureKey=c[g],l.push(x))}):l=i;let h={};t.library!=null&&t.library.function!=null&&(h=t.library.function.reduce((g,b)=>(g[b.signature.name]=this.mapFunction(b),g),{}));const m={nodes:o,inputs:l,outputs:u,weights:s,placeholders:i,signature:n,functions:h};return a.length>0&&(m.initNodes=a),m}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){const n=HCe(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((i,s)=>(i[s.name]={type:s.type,inputIndexStart:s.start,inputIndexEnd:s.end},i),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((i,s)=>{const a=s.type;let o;switch(s.type){case"string":o=vW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=vW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"string[]":o=AW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=AW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"number":o=SW(t.attr,s.tfName,s.defaultValue||0),o===void 0&&s.tfDeprecatedName&&(o=SW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"number[]":o=kW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=kW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool":o=wW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=wW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"bool[]":o=TW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=TW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape":o=EW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=EW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"shape[]":o=_W(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=_W(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype":o=CW(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=CW(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"dtype[]":o=$W(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=$W(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"func":o=wce(t.attr,s.tfName,s.defaultValue),o===void 0&&s.tfDeprecatedName&&(o=wce(t.attr,s.tfDeprecatedName,s.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${s.type} for op: ${t.op}`)}return i[s.name]={value:o,type:a},i},{})),r}mapFunction(t){const n=t.nodeDef,r=[],i=[];let s={};n!=null&&(s=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&i.push(f[d.name]),f),{}));const a=[],o=[];t.signature.inputArg.forEach(f=>{const[d]=lh(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:LK(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,a.push(h),s[d]=h}),Object.keys(s).forEach(f=>{const d=s[f];d.inputNames.forEach((h,m)=>{const[g,,b]=lh(h),x=s[g];if(x.outputs!=null){const w=x.outputs.indexOf(b);if(w!==-1){const C=`${g}:${w}`;d.inputNames[m]=C}}d.inputs.push(x),x.children.push(d)})});const u=t.ret;t.signature.outputArg.forEach(f=>{const[d,h]=lh(u[f.name]),m=s[d];m!=null&&(m.defaultOutput=h,o.push(m))});const c=this.mapArgsToSignature(t);return{nodes:s,inputs:a,outputs:o,weights:i,placeholders:r,signature:c}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}}function Iit(e){const t=pe().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function GCe(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):Iit(e);return t?n:n.toLowerCase()}function vW(e,t,n,r=!1){const i=e[t];return i!=null?GCe(i.s,r):n}function wW(e,t,n){const r=e[t];return r?r.b:n}function SW(e,t,n){const r=e[t]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function LK(e){switch(typeof e=="string"&&(e=Lo[e]),e){case Lo.DT_FLOAT:case Lo.DT_HALF:return"float32";case Lo.DT_INT32:case Lo.DT_INT64:case Lo.DT_INT8:case Lo.DT_UINT8:return"int32";case Lo.DT_BOOL:return"bool";case Lo.DT_DOUBLE:return"float32";case Lo.DT_STRING:return"string";case Lo.DT_COMPLEX64:case Lo.DT_COMPLEX128:return"complex64";default:return null}}function wce(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function CW(e,t,n){const r=e[t];return r&&r.type?LK(r.type):n}function $W(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(i=>LK(i)):n}function qCe(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function EW(e,t,n){const r=e[t];return r&&r.shape?qCe(r.shape):n}function kW(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):n}function AW(e,t,n,r=!1){const i=e[t];return i&&i.list&&i.list.s?i.list.s.map(s=>GCe(s,r)):n}function _W(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(i=>qCe(i)):n}function TW(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oit{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(i=>this.getInput(i)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((i,s)=>(i[s]=this.getAttr(s),i),{}))}getInput(t){return Es(t,this.tensorMap,this.context)}getAttr(t,n){const r=this.node.rawAttrs[t];if(r.tensor!=null)return Es(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return SW(this.node.rawAttrs,t,n);if(r.s!=null)return vW(this.node.rawAttrs,t,n);if(r.b!=null)return wW(this.node.rawAttrs,t,n);if(r.shape!=null)return EW(this.node.rawAttrs,t,n);if(r.type!=null)return CW(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return kW(this.node.rawAttrs,t,n);if(r.list.s!=null)return AW(this.node.rawAttrs,t,n);if(r.list.shape!=null)return _W(this.node.rawAttrs,t,n);if(r.list.b!=null)return TW(this.node.rawAttrs,t,n);if(r.list.type!=null)return $W(this.node.rawAttrs,t,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hs=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:xX,abs:$i,acos:kX,acosh:AX,add:Me,addN:Bxe,all:tM,any:yE,argMax:fy,argMin:_X,asin:TX,asinh:NX,atan:DX,atan2:IX,atanh:OX,avgPool:XA,avgPool3d:FX,basicLSTMCell:zxe,batchNorm:Iw,batchNorm2d:MX,batchNorm3d:LX,batchNorm4d:PX,batchToSpaceND:YA,bincount:BX,bitwiseAnd:jxe,booleanMaskAsync:Eve,broadcastArgs:Uxe,broadcastTo:B1,buffer:Zt,cast:qe,ceil:zX,clipByValue:xo,clone:If,complex:Wh,concat:pi,concat1d:jX,concat2d:UX,concat3d:VX,concat4d:WX,conv1d:nM,conv2d:Hh,conv2dTranspose:rM,conv3d:GX,conv3dTranspose:qX,cos:KA,cosh:iM,cosineWindow:_M,cumprod:vE,cumsum:sM,denseBincount:WO,depthToSpace:XX,depthwiseConv2d:Ow,diag:Wxe,dilation2d:YX,div:ct,divNoNan:KX,dot:ZX,dropout:EY,einsum:s1,elu:Rw,enclosingPowerOfTwo:kY,ensureShape:Hxe,equal:_u,erf:aM,euclideanNorm:JX,exp:vo,expandDims:ta,expm1:eY,eye:oM,fft:u_,fill:Yy,floor:Mw,floorDiv:eM,fused:Rve,gather:Lw,gatherND:Tve,greater:Ao,greaterEqual:ap,ifft:Ix,imag:ZA,image:Tl,inTopKAsync:Nve,irfft:SM,isFinite:tY,isInf:nY,isNaN:rY,leakyRelu:QA,less:Tx,lessEqual:Fm,linalg:TY,linspace:Xxe,localResponseNormalization:iY,log:tl,log1p:JA,logSigmoid:sY,logSoftmax:uM,logSumExp:e_,logicalAnd:Sc,logicalNot:t_,logicalOr:cM,logicalXor:aY,losses:jve,lowerBound:Kxe,matMul:nn,max:Qo,maxPool:n_,maxPool3d:oY,maxPoolWithArgmax:Zxe,maximum:dd,mean:Kr,meshgrid:Qxe,min:py,minimum:tm,mirrorPad:lY,mod:uY,moments:r_,movingAverage:kve,mul:ie,multiRNNCell:Jxe,multinomial:eve,neg:_r,norm:Fw,notEqual:my,oneHot:nm,ones:uo,onesLike:nl,op:te,outerProduct:tve,pad:op,pad1d:nve,pad2d:rve,pad3d:ive,pad4d:sve,pool:cY,pow:qf,prelu:s_,print:EX,prod:fY,raggedGather:ave,raggedRange:ove,raggedTensorToTensor:lve,rand:uve,randomGamma:dve,randomNormal:hM,randomStandardNormal:hve,randomUniform:Mm,randomUniformInt:pve,range:gy,real:Nx,reciprocal:mY,relu:Nc,relu6:pM,reshape:ae,reverse:Ml,reverse1d:mve,reverse2d:gve,reverse3d:yve,reverse4d:bve,rfft:c_,round:mM,rsqrt:gM,scalar:Et,scatterND:Ave,searchSorted:fM,selu:yM,separableConv2d:bM,setdiff1dAsync:xve,sigmoid:mc,sign:gY,signal:zve,sin:xM,sinh:vM,slice:$n,slice1d:a_,slice2d:wM,slice3d:o_,slice4d:Dx,softmax:l_,softplus:Ky,spaceToBatchND:i_,sparse:Uve,sparseToDense:_ve,spectral:Bve,split:ho,sqrt:us,square:lr,squaredDifference:CM,squeeze:Lm,stack:wo,step:Zy,stridedSlice:yY,string:Vve,sub:st,sum:lt,tan:bY,tanh:em,tensor:$u,tensor1d:ji,tensor2d:Of,tensor3d:xY,tensor4d:vve,tensor5d:wve,tensor6d:Sve,tensorScatterUpdate:Cve,tile:_l,topk:wY,transpose:yn,truncatedNormal:EM,unique:SY,unsortedSegmentSum:kM,unstack:Ll,upperBound:$ve,variable:CY,where:Ls,whereAsync:$Y,zeros:Ai,zerosLike:En},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rit=(e,t,n,r=Hs)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(B("a",e,t,n),B("b",e,t,n))];case"AddN":return[r.addN(B("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(B("a",e,t,n),B("b",e,t,n))];case"Mul":return[r.mul(B("a",e,t,n),B("b",e,t,n))];case"RealDiv":case"Div":return[r.div(B("a",e,t,n),B("b",e,t,n))];case"DivNoNan":return[r.divNoNan(B("a",e,t,n),B("b",e,t,n))];case"FloorDiv":return[r.floorDiv(B("a",e,t,n),B("b",e,t,n))];case"Sub":return[r.sub(B("a",e,t,n),B("b",e,t,n))];case"Minimum":return[r.minimum(B("a",e,t,n),B("b",e,t,n))];case"Maximum":return[r.maximum(B("a",e,t,n),B("b",e,t,n))];case"Pow":return[r.pow(B("a",e,t,n),B("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(B("a",e,t,n),B("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fit=(e,t,n,r=Hs)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(B("x",e,t,n))];case"Acos":return[r.acos(B("x",e,t,n))];case"Acosh":return[r.acosh(B("x",e,t,n))];case"Asin":return[r.asin(B("x",e,t,n))];case"Asinh":return[r.asinh(B("x",e,t,n))];case"Atan":return[r.atan(B("x",e,t,n))];case"Atan2":return[r.atan2(B("x",e,t,n),B("y",e,t,n))];case"Atanh":return[r.atanh(B("x",e,t,n))];case"Ceil":return[r.ceil(B("x",e,t,n))];case"Complex":return[r.complex(B("real",e,t,n),B("imag",e,t,n))];case"Cos":return[r.cos(B("x",e,t,n))];case"Cosh":return[r.cosh(B("x",e,t,n))];case"Elu":return[r.elu(B("x",e,t,n))];case"Erf":return[r.erf(B("x",e,t,n))];case"Exp":return[r.exp(B("x",e,t,n))];case"Expm1":return[r.expm1(B("x",e,t,n))];case"Floor":return[r.floor(B("x",e,t,n))];case"Log":return[r.log(B("x",e,t,n))];case"Log1p":return[r.log1p(B("x",e,t,n))];case"Imag":return[r.imag(B("x",e,t,n))];case"Neg":return[r.neg(B("x",e,t,n))];case"Reciprocal":return[r.reciprocal(B("x",e,t,n))];case"Real":return[r.real(B("x",e,t,n))];case"Relu":return[r.relu(B("x",e,t,n))];case"Round":return[r.round(B("x",e,t,n))];case"Selu":return[r.selu(B("x",e,t,n))];case"Sigmoid":return[r.sigmoid(B("x",e,t,n))];case"Sin":return[r.sin(B("x",e,t,n))];case"Sign":return[r.sign(B("x",e,t,n))];case"Sinh":return[r.sinh(B("x",e,t,n))];case"Softplus":return[r.softplus(B("x",e,t,n))];case"Sqrt":return[r.sqrt(B("x",e,t,n))];case"Square":return[r.square(B("x",e,t,n))];case"Tanh":return[r.tanh(B("x",e,t,n))];case"Tan":return[r.tan(B("x",e,t,n))];case"ClipByValue":return[r.clipByValue(B("x",e,t,n),B("clipValueMin",e,t,n),B("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(B("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Es(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(B("x",e,t,n),B("alpha",e,t,n))];case"Prelu":return[r.prelu(B("x",e,t,n),B("alpha",e,t,n))];case"IsNan":return[r.isNaN(Es(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(Es(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(Es(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fu(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){q(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){const i=e[r],s=t[r];q(i<0||s<0||i===s,()=>n+` Shapes ${e} and ${t} must match`)}}}function Sce(e){return!(typeof e=="number"||e.some(t=>t<0))}function i3(e,t,n){let r=NW(e,n);const i=!Sce(r);if(i&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&t.forEach(s=>{r=NW(s.shape,r)}),!Sce(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function NW(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const i=e[r],s=t[r];if(i>=0&&s>=0&&i!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mit{constructor(t,n,r,i,s,a,o){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=s,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=Et(0),zi(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),fu(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,zi(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,i)=>this.write(r,n[i]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let i=0;i<this.size();i++)t.push(i)}if(t.length===0)return $u([],[0].concat(this.elementShape));const r=this.readMany(t);return fu(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),wo(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return $u([],[0].concat(this.elementShape));const n=[];for(let i=0;i<this.size();i++)n.push(i);const r=this.readMany(n);return fu(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),pi(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,Ll(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const i=t.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const s=r===0?0:n.size/r,a=[];he(()=>{n=ae(n,[1,r,s]);for(let l=0;l<t.length;++l){const c=[0,l===0?0:i[l-1],0],f=[1,t[l],s];a[l]=ae($n(n,c,f),this.elementShape)}return a});const o=[];for(let l=0;l<t.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xy{get id(){return this.idTensor.id}constructor(t,n,r,i=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t!=null&&t.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);fu(n,s.shape,"TensorList shape mismatch: "),zi(s)}),this.idTensor=Et(0),this.maxNumElements=i,zi(this.idTensor)}copy(){return new xy([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);fu(t,this.elementShape,"TensorList shape mismatch: ");const i=i3(this.elementShape,this.tensors,t);return he(()=>{const s=this.tensors.map(a=>ae(a,i));return wo(s,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=i3(this.elementShape,this.tensors,t),i=this.tensors.pop();return i.kept=!1,fu(i.shape,t,"TensorList shape mismatch: "),ae(i,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(fu(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");zi(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const n=new xy([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);fu(this.tensors[t].shape,n,"TensorList shape mismatch: ");const i=i3(this.elementShape,this.tensors,n);return ae(this.tensors[t],i)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);fu(this.elementShape,n.shape,"TensorList shape mismatch: "),zi(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);fu(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());const i=i3(this.elementShape,this.tensors,r);return t.length===0?$u([],[0].concat(i)):he(()=>{const s=t.map(a=>ae(this.tensors[a],i));return wo(s,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);fu(this.elementShape,n,"TensorList shape mismatch: ");const r=i3(this.elementShape,this.tensors,n);return this.size()===0?$u([],[0].concat(r)):he(()=>{const i=this.tensors.map(s=>ae(s,r));return pi(i,0)})}}function Lit(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);const i=e.shape.slice(1);fu(i,t,"TensorList shape mismatch: ");const s=Ll(e);return new xy(s,t,r)}function Pit(e,t,n,r){return new xy([],e,t,r)}function Bit(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const i=Math.max(...t);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const s=new xy([],n,e.dtype,r),a=Ll(e,0);return t.forEach((o,l)=>{s.setItem(o,a[l])}),s}function zit(e,t,n){let r=0;const i=t.map(c=>(r+=c,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);const s=e.shape.slice(1),a=NW(s,n),o=r===0?0:e.size/r,l=he(()=>{const c=[];e=ae(e,[1,r,o]);for(let f=0;f<t.length;++f){const h=[0,f===0?0:i[f-1],0],m=[1,t[f],o];c[f]=ae($n(e,h,m),a)}return e.dispose(),c}),u=new xy([],n,e.dtype,t.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jit=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=B("thenBranch",e,t,n),i=B("elseBranch",e,t,n),s=B("cond",e,t,n),a=B("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=B("body",e,t,n),i=B("cond",e,t,n),s=B("args",e,t,n),a=await n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(c=>c.id);let l=await a[0].data();a.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let u=s;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const f=u.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[i].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await d[0].data(),d.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return u}case"LoopCond":{const r=B("pred",e,t,n);return[uh(r)]}case"Switch":{const r=B("pred",e,t,n);let i=B("data",e,t,n);return i.kept||(i=uh(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=e.inputNames.find(i=>Es(i,t,n)!==void 0);if(r){const i=Es(r,t,n);return[uh(i)]}return}case"Enter":{const r=B("frameName",e,t,n),i=B("tensor",e,t,n);return n.enterFrame(r),[uh(i)]}case"Exit":{const r=B("tensor",e,t,n);return n.exitFrame(),[uh(r)]}case"NextIteration":{const r=B("tensor",e,t,n);return n.nextIteration(),[uh(r)]}case"TensorArrayV3":{const r=B("size",e,t,n),i=B("dtype",e,t,n),s=B("elementShape",e,t,n),a=B("dynamicSize",e,t,n),o=B("clearAfterRead",e,t,n),l=B("identicalElementShapes",e,t,n),u=B("name",e,t,n),c=new Mit(u,i,r,s,l,a,o);return n.addTensorArray(c),[c.idTensor,Et(1)]}case"TensorArrayWriteV3":{const r=B("tensorArrayId",e,t,n),i=B("index",e,t,n),s=B("tensor",e,t,n),a=n.getTensorArray(r.id);return a.write(i,s),[a.idTensor]}case"TensorArrayReadV3":{const r=B("tensorArrayId",e,t,n),i=B("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=B("tensorArrayId",e,t,n),i=B("indices",e,t,n),s=B("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,s)]}case"TensorArrayScatterV3":{const r=B("tensorArrayId",e,t,n),i=B("indices",e,t,n),s=B("tensor",e,t,n),a=n.getTensorArray(r.id);return a.scatter(i,s),[a.idTensor]}case"TensorArrayConcatV3":{const r=B("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),s=B("dtype",e,t,n);return[i.concat(s)]}case"TensorArraySplitV3":{const r=B("tensorArrayId",e,t,n),i=B("tensor",e,t,n),s=B("lengths",e,t,n),a=n.getTensorArray(r.id);return a.split(s,i),[a.idTensor]}case"TensorArraySizeV3":{const r=B("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return[Et(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=B("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=B("tensorListId",e,t,n),i=B("index",e,t,n),s=B("tensor",e,t,n),a=n.getTensorList(r.id);return a.setItem(i,s),[a.idTensor]}case"TensorListGetItem":{const r=B("tensorListId",e,t,n),i=B("index",e,t,n),s=B("elementShape",e,t,n),a=B("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,s,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=B("indices",e,t,n),i=B("tensor",e,t,n),s=B("elementShape",e,t,n),a=B("numElements",e,t,n),o=Bit(i,r,s,a);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=B("elementShape",e,t,n),i=B("elementDType",e,t,n);let s;e.op==="TensorListReserve"?s="numElements":s="maxNumElements";const a=B(s,e,t,n),o=e.op==="TensorListReserve"?-1:a,l=Pit(r,i,a,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=B("tensorListId",e,t,n),i=B("indices",e,t,n),s=B("elementShape",e,t,n),a=B("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,a,s)]}case"TensorListStack":{const r=B("tensorListId",e,t,n),i=B("elementShape",e,t,n),s=B("elementDType",e,t,n),a=B("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,s,a)]}case"TensorListFromTensor":{const r=B("tensor",e,t,n),i=B("elementShape",e,t,n),s=B("elementDType",e,t,n),a=Lit(r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=B("tensorListId",e,t,n),i=n.getTensorList(r.id),s=B("dtype",e,t,n),a=B("elementShape",e,t,n);return[i.concat(s,a)]}case"TensorListPushBack":{const r=B("tensorListId",e,t,n),i=B("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(i),[s.idTensor]}case"TensorListPopBack":{const r=B("tensorListId",e,t,n),i=B("elementShape",e,t,n),s=B("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,s)]}case"TensorListSplit":{const r=B("tensor",e,t,n),i=B("elementShape",e,t,n),s=B("lengths",e,t,n),a=zit(r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=B("tensorListId",e,t,n),i=n.getTensorList(r.id);return[Et(i.size(),"int32")]}case"TensorListResize":{const r=B("tensorListId",e,t,n),i=B("size",e,t,n),a=n.getTensorList(r.id).resize(i);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cce(e,t,n){const[r,i]=B("fusedOps",e,t,n),s=r==="biasadd",a=!s,o=i==="prelu",l=r==="fusedbatchnorm",u=B("numArgs",e,t,n);if(s){if(o&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=B("strides",e,t,n),f=MI(e,t,n),d=B("dataFormat",e,t,n).toUpperCase(),h=B("dilations",e,t,n);let[m,g]=B("args",e,t,n);a&&(g=m,m=void 0);const b=B("leakyreluAlpha",e,t,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:m,preluArg:g,activationFunc:i,leakyreluAlpha:b}}const Uit=(e,t,n,r=Hs)=>{switch(e.op){case"Conv1D":{const i=B("stride",e,t,n),s=B("pad",e,t,n),a=B("dataFormat",e,t,n).toUpperCase(),o=B("dilation",e,t,n);return[r.conv1d(B("x",e,t,n),B("filter",e,t,n),i,s,a,o)]}case"Conv2D":{const i=B("strides",e,t,n),s=MI(e,t,n),a=B("dataFormat",e,t,n).toUpperCase(),o=B("dilations",e,t,n);return[r.conv2d(B("x",e,t,n),B("filter",e,t,n),[i[1],i[2]],s,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:i,pad:s,dataFormat:a,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:f}=Cce(e,t,n);return[r.fused.conv2d({x:B("x",e,t,n),filter:B("filter",e,t,n),strides:[i[1],i[2]],pad:s,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:s,dataFormat:a,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:f}=Cce(e,t,n);return[r.fused.depthwiseConv2d({x:B("x",e,t,n),filter:B("filter",e,t,n),strides:[i[1],i[2]],pad:s,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=B("outputShape",e,t,n),s=B("strides",e,t,n),a=MI(e,t,n);return[r.conv2dTranspose(B("x",e,t,n),B("filter",e,t,n),i,[s[1],s[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=B("strides",e,t,n),s=MI(e,t,n),a=B("dilations",e,t,n),o=B("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(B("input",e,t,n),B("filter",e,t,n),[i[1],i[2]],s,o,[a[1],a[2]])]}case"Conv3D":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("dataFormat",e,t,n).toUpperCase(),o=B("dilations",e,t,n);return[r.conv3d(B("x",e,t,n),B("filter",e,t,n),[i[1],i[2],i[3]],s,a,[o[1],o[2],o[3]])]}case"AvgPool":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("kernelSize",e,t,n);return[r.avgPool(B("x",e,t,n),[a[1],a[2]],[i[1],i[2]],s)]}case"MaxPool":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("kernelSize",e,t,n);return[r.maxPool(B("x",e,t,n),[a[1],a[2]],[i[1],i[2]],s)]}case"MaxPoolWithArgmax":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("kernelSize",e,t,n),o=B("includeBatchInIndex",e,t,n),{result:l,indexes:u}=r.maxPoolWithArgmax(B("x",e,t,n),[a[1],a[2]],[i[1],i[2]],s,o);return[l,u]}case"AvgPool3D":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("kernelSize",e,t,n);return[r.avgPool3d(B("x",e,t,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],s)]}case"MaxPool3D":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("kernelSize",e,t,n);return[r.maxPool3d(B("x",e,t,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],s)]}case"Dilation2D":{const i=B("strides",e,t,n),s=B("pad",e,t,n),a=B("dilations",e,t,n),o=i[1],l=i[2],u=a[1],c=a[2];return[r.dilation2d(B("x",e,t,n),B("filter",e,t,n),[o,l],s,[u,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vit=(e,t,n,r=Hs)=>{switch(e.op){case"Fill":{const i=B("shape",e,t,n),s=B("dtype",e,t,n),a=B("value",e,t,n);return[r.fill(i,a,s)]}case"LinSpace":{const i=B("start",e,t,n),s=B("stop",e,t,n),a=B("num",e,t,n);return[r.linspace(i,s,a)]}case"Multinomial":{const i=B("logits",e,t,n),s=B("numSamples",e,t,n),a=B("seed",e,t,n);return[r.multinomial(i,s,a)]}case"OneHot":{const i=B("indices",e,t,n),s=B("depth",e,t,n),a=B("onValue",e,t,n),o=B("offValue",e,t,n),l=B("dtype",e,t,n);return[r.oneHot(i,s,a,o,l)]}case"Ones":return[r.ones(B("shape",e,t,n),B("dtype",e,t,n))];case"OnesLike":return[r.onesLike(B("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(B("shape",e,t,n),B("dtype",e,t,n),B("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(B("shape",e,t,n),B("minval",e,t,n),B("maxval",e,t,n),B("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(B("shape",e,t,n),B("minval",e,t,n),B("maxval",e,t,n),B("seed",e,t,n))];case"Range":{const i=B("start",e,t,n),s=B("stop",e,t,n),a=B("step",e,t,n);return[r.range(i,s,a,B("dtype",e,t,n))]}case"TruncatedNormal":{const i=B("shape",e,t,n),s=B("mean",e,t,n),a=B("stdDev",e,t,n),o=B("seed",e,t,n);return[r.truncatedNormal(i,s,a,B("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(B("shape",e,t,n),B("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(B("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dz(e,t,n){const r=B("boxes",e,t,n),i=B("scores",e,t,n),s=B("maxOutputSize",e,t,n),a=B("iouThreshold",e,t,n),o=B("scoreThreshold",e,t,n),l=B("softNmsSigma",e,t,n);return{boxes:r,scores:i,maxOutputSize:s,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const Wit=async(e,t,n,r,i=Hs)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=dz(e,t,n),f=await i.image.nonMaxSuppressionWithScoreAsync(s,a,o,l,u,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=dz(e,t,n),c=B("padToMaxOutputSize",e,t,n),f=await i.image.nonMaxSuppressionPaddedAsync(s,a,o,l,u,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:s,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=dz(e,t,n);return[await i.image.nonMaxSuppressionAsync(s,a,o,l,u)]}case"Where":{const s=i.cast(B("condition",e,t,n),"bool"),a=[await i.whereAsync(s)];return s.dispose(),a}case"ListDiff":return i.setdiff1dAsync(B("x",e,t,n),B("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hit=(e,t,n,r=Hs)=>{switch(e.op){case"LowerBound":{const i=B("sortedSequence",e,t,n),s=B("values",e,t,n);return[r.lowerBound(i,s)]}case"TopKV2":{const i=B("x",e,t,n),s=B("k",e,t,n),a=B("sorted",e,t,n),o=r.topk(i,s,a);return[o.values,o.indices]}case"UpperBound":{const i=B("sortedSequence",e,t,n),s=B("values",e,t,n);return[r.upperBound(i,s)]}case"Unique":{const i=B("x",e,t,n),s=r.unique(i);return[s.values,s.indices]}case"UniqueV2":{const i=B("x",e,t,n),s=B("axis",e,t,n),a=r.unique(i,s);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Git=(e,t,n,r=Hs)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const i=B("default",e,t,n);return[Es(e.name,t,n)||i];case"Placeholder":return[Es(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=B("x",e,t,n);return[uh(c)]}case"IdentityN":return B("x",e,t,n).map(c=>uh(c));case"Snapshot":const s=B("x",e,t,n);return[uh(s)];case"Shape":return[r.tensor1d(B("x",e,t,n).shape,"int32")];case"ShapeN":return B("x",e,t,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(B("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(B("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=B("x",e,t,n),o=B("data",e,t,n),l=B("message",e,t,n),u=B("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,u));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qit{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=Et(0),this.tensorMap=new Map,zi(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Et(this.size(),"int32")}async import(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),he(()=>{const i=Ll(n),s=r.length,a=i.length;q(s===a,()=>`The number of elements doesn't match, keys has ${s} elements, the values has ${a} elements.`);for(let o=0;o<s;o++){const l=r[o],u=i[o];zi(u),this.tensorMap.set(l,u)}return this.handle})}async find(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return he(()=>{const i=[];for(let s=0;s<r.length;s++){const a=r[s],o=this.findWithDefault(a,n);i.push(o)}return wo(i)})}findWithDefault(t,n){const r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xit=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(e.name);if(i!=null)return[i];{const s=B("keyDType",e,t,n),a=B("valueDType",e,t,n),o=new qit(s,a);return r.addHashTable(e.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=B("tableHandle",e,t,n,r),s=B("keys",e,t,n),a=B("values",e,t,n);return[await r.getHashTableById(i.id).import(s,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=B("tableHandle",e,t,n,r),s=B("keys",e,t,n),a=B("defaultValue",e,t,n);return[await r.getHashTableById(i.id).find(s,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=B("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yit=(e,t,n,r=Hs)=>{switch(e.op){case"ResizeBilinear":{const i=B("images",e,t,n),s=B("size",e,t,n),a=B("alignCorners",e,t,n),o=B("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[s[0],s[1]],a,o)]}case"ResizeNearestNeighbor":{const i=B("images",e,t,n),s=B("size",e,t,n),a=B("alignCorners",e,t,n),o=B("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[s[0],s[1]],a,o)]}case"CropAndResize":{const i=B("image",e,t,n),s=B("boxes",e,t,n),a=B("boxInd",e,t,n),o=B("cropSize",e,t,n),l=B("method",e,t,n),u=B("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,s,a,o,l,u)]}case"ImageProjectiveTransformV3":{const i=B("images",e,t,n),s=B("transforms",e,t,n),a=B("outputShape",e,t,n),o=B("fillValue",e,t,n),l=B("interpolation",e,t,n),u=B("fillMode",e,t,n);return[r.image.transform(i,s,l.toLowerCase(),u.toLowerCase(),o,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kit=(e,t,n,r=Hs)=>{switch(e.op){case"Equal":return[r.equal(B("a",e,t,n),B("b",e,t,n))];case"NotEqual":return[r.notEqual(B("a",e,t,n),B("b",e,t,n))];case"Greater":return[r.greater(B("a",e,t,n),B("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(B("a",e,t,n),B("b",e,t,n))];case"Less":return[r.less(B("a",e,t,n),B("b",e,t,n))];case"LessEqual":return[r.lessEqual(B("a",e,t,n),B("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(B("a",e,t,n),B("b",e,t,n))];case"LogicalNot":return[r.logicalNot(B("a",e,t,n))];case"LogicalOr":return[r.logicalOr(B("a",e,t,n),B("b",e,t,n))];case"Select":case"SelectV2":return[r.where(B("condition",e,t,n),B("a",e,t,n),B("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(B("a",e,t,n),B("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zit=(e,t,n,r=Hs)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(B("a",e,t,n),B("b",e,t,n),B("transposeA",e,t,n),B("transposeB",e,t,n))];case"Einsum":return[r.einsum(B("equation",e,t,n),...B("tensors",e,t,n))];case"Transpose":return[r.transpose(B("x",e,t,n),B("perm",e,t,n))];case"_FusedMatMul":const[i,s]=B("fusedOps",e,t,n),a=i==="biasadd",o=s==="prelu",l=B("numArgs",e,t,n),u=B("leakyreluAlpha",e,t,n);if(a){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=B("args",e,t,n);return[r.fused.matMul({a:B("a",e,t,n),b:B("b",e,t,n),transposeA:B("transposeA",e,t,n),transposeB:B("transposeB",e,t,n),bias:c,activation:s,preluActivationWeights:f,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(B("a",e,t,n),B("numLower",e,t,n),B("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qit=(e,t,n,r=Hs)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(B("x",e,t,n),B("axis",e,t,n),B("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(B("x",e,t,n),B("mean",e,t,n),B("variance",e,t,n),B("offset",e,t,n),B("scale",e,t,n),B("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(B("x",e,t,n),B("mean",e,t,n),B("variance",e,t,n),B("offset",e,t,n),B("scale",e,t,n),B("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(B("x",e,t,n),B("radius",e,t,n),B("bias",e,t,n),B("alpha",e,t,n),B("beta",e,t,n))];case"Softmax":return[r.softmax(B("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(B("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jit=(e,t,n,r=Hs)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:s}=r.raggedGather(B("paramsNestedSplits",e,t,n),B("paramsDenseValues",e,t,n),B("indices",e,t,n),B("outputRaggedRank",e,t,n));return i.concat(s)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:s}=r.raggedRange(B("starts",e,t,n),B("limits",e,t,n),B("splits",e,t,n));return[i,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(B("shape",e,t,n),B("values",e,t,n),B("defaultValue",e,t,n),B("rowPartitionTensors",e,t,n),B("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const est=(e,t,n,r=Hs)=>{switch(e.op){case"Max":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.max(B("x",e,t,n),o,l)]}case"Mean":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.mean(B("x",e,t,n),o,l)]}case"Min":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.min(B("x",e,t,n),o,l)]}case"Sum":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.sum(B("x",e,t,n),o,l)]}case"All":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.all(B("x",e,t,n),o,l)]}case"Any":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.any(B("x",e,t,n),o,l)]}case"ArgMax":{const o=B("axis",e,t,n);return[r.argMax(B("x",e,t,n),o)]}case"ArgMin":{const o=B("axis",e,t,n);return[r.argMin(B("x",e,t,n),o)]}case"Prod":{const o=B("axis",e,t,n),l=B("keepDims",e,t,n);return[r.prod(B("x",e,t,n),o,l)]}case"Cumprod":{const o=B("axis",e,t,n),l=B("exclusive",e,t,n),u=B("reverse",e,t,n);return[r.cumprod(B("x",e,t,n),o,l,u)]}case"Cumsum":{const o=B("axis",e,t,n),l=B("exclusive",e,t,n),u=B("reverse",e,t,n);return[r.cumsum(B("x",e,t,n),o,l,u)]}case"Bincount":const i=B("x",e,t,n),s=B("weights",e,t,n),a=B("size",e,t,n);return[r.bincount(i,s,a)];case"DenseBincount":{const o=B("x",e,t,n),l=B("weights",e,t,n),u=B("size",e,t,n),c=B("binaryOutput",e,t,n);return[r.denseBincount(o,l,u,c)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tst=(e,t,n,r=Hs)=>{switch(e.op){case"ConcatV2":case"Concat":{const i=B("n",e,t,n),s=B("axis",e,t,n);let a=B("tensors",e,t,n);return a=a.slice(0,i),[r.concat(a,s)]}case"Gather":{const i=B("x",e,t,n),s=B("indices",e,t,n);return[r.gather(i,r.cast(s,"int32"),0)]}case"GatherV2":{const i=B("axis",e,t,n),s=B("batchDims",e,t,n),a=B("x",e,t,n),o=B("indices",e,t,n);return[r.gather(a,r.cast(o,"int32"),i,s)]}case"Reverse":{const i=B("dims",e,t,n),s=[];for(let o=0;o<i.length;o++)i[o]&&s.push(o);const a=B("x",e,t,n);return[r.reverse(a,s)]}case"ReverseV2":{const i=B("axis",e,t,n),s=B("x",e,t,n);return[r.reverse(s,i)]}case"Slice":{const i=B("begin",e,t,n),s=B("size",e,t,n);return[r.slice(B("x",e,t,n),i,s)]}case"StridedSlice":{const i=B("begin",e,t,n),s=B("end",e,t,n),a=B("strides",e,t,n),o=B("beginMask",e,t,n),l=B("endMask",e,t,n),u=B("ellipsisMask",e,t,n),c=B("newAxisMask",e,t,n),f=B("shrinkAxisMask",e,t,n),d=B("x",e,t,n);return[r.stridedSlice(d,i,s,a,o,l,u,c,f)]}case"Pack":return he(()=>{const i=B("axis",e,t,n),s=B("tensors",e,t,n),a=s[0].shape,o=r.squeeze(s[0]).shape,l=s.map(u=>{const c=dn(u.shape,a);if(!c&&!dn(r.squeeze(u).shape,o))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,a)});return[r.stack(l,i)]});case"Unpack":{const i=B("axis",e,t,n),s=B("tensor",e,t,n);return r.unstack(s,i)}case"Tile":{const i=B("reps",e,t,n);return[r.tile(B("x",e,t,n),i)]}case"Split":case"SplitV":{const i=B("axis",e,t,n),s=B("numOrSizeSplits",e,t,n),a=B("x",e,t,n);return r.split(a,s,i)}case"ScatterNd":{const i=B("indices",e,t,n),s=B("values",e,t,n),a=B("shape",e,t,n);return[r.scatterND(i,s,a)]}case"GatherNd":{const i=B("x",e,t,n),s=B("indices",e,t,n);return[r.gatherND(i,s)]}case"SparseToDense":{const i=B("sparseIndices",e,t,n),s=B("outputShape",e,t,n),a=B("sparseValues",e,t,n),o=B("defaultValue",e,t,n);return[r.sparseToDense(i,a,s,a.dtype===o.dtype?o:r.cast(o,a.dtype))]}case"TensorScatterUpdate":{const i=B("indices",e,t,n),s=B("values",e,t,n),a=B("tensor",e,t,n);return[r.tensorScatterUpdate(a,i,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nst=(e,t,n,r=Hs)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:s,emptyRowIndicator:a,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(B("indices",e,t,n),B("values",e,t,n),B("denseShape",e,t,n),B("defaultValue",e,t,n));return[i,s,a,o]}case"SparseReshape":{const{outputIndices:i,outputShape:s}=r.sparse.sparseReshape(B("inputIndices",e,t,n),B("inputShape",e,t,n),B("newShape",e,t,n));return[i,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(B("data",e,t,n),B("indices",e,t,n),B("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(B("data",e,t,n),B("indices",e,t,n),B("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rst=(e,t,n,r=Hs)=>{switch(e.op){case"FFT":return[r.fft(B("x",e,t,n))];case"IFFT":return[r.ifft(B("x",e,t,n))];case"RFFT":return[r.rfft(B("x",e,t,n))];case"IRFFT":return[r.irfft(B("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ist=(e,t,n,r=Hs)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(B("input",e,t,n),B("pattern",e,t,n),B("rewrite",e,t,n),B("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:s}=r.string.stringNGrams(B("data",e,t,n),B("dataSplits",e,t,n),B("separator",e,t,n),B("nGramWidths",e,t,n),B("leftPad",e,t,n),B("rightPad",e,t,n),B("padWidth",e,t,n),B("preserveShortSequences",e,t,n));return[i,s]}case"StringSplit":{const{indices:i,values:s,shape:a}=r.string.stringSplit(B("input",e,t,n),B("delimiter",e,t,n),B("skipEmpty",e,t,n));return[i,s,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(B("input",e,t,n),B("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sst=(e,t,n,r=Hs)=>{switch(e.op){case"Cast":return[r.cast(B("x",e,t,n),B("dtype",e,t,n))];case"ExpandDims":{const i=B("axis",e,t,n);return[r.expandDims(B("x",e,t,n),i)]}case"Squeeze":{const i=B("axis",e,t,n);return[r.squeeze(B("x",e,t,n),i)]}case"Reshape":return[r.reshape(B("x",e,t,n),B("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(B("x",e,t,n),B("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(B("x",e,t,n),B("padding",e,t,n),B("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(B("x",e,t,n),B("padding",e,t,n),B("constantValue",e,t,n))];case"SpaceToBatchND":{const i=B("blockShape",e,t,n),s=B("paddings",e,t,n);return[r.spaceToBatchND(B("x",e,t,n),i,s)]}case"BatchToSpaceND":{const i=B("blockShape",e,t,n),s=B("crops",e,t,n);return[r.batchToSpaceND(B("x",e,t,n),i,s)]}case"DepthToSpace":{const i=B("blockSize",e,t,n),s=B("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(B("x",e,t,n),i,s)]}case"BroadcastTo":return[r.broadcastTo(B("x",e,t,n),B("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(B("s0",e,t,n),B("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ce(e,t,n,r,i=he){const s=((a,o,l)=>{switch(a.category){case"arithmetic":return i(()=>Rit(a,o,l));case"basic_math":return i(()=>Fit(a,o,l));case"control":return jit(a,o,l);case"convolution":return i(()=>Uit(a,o,l));case"creation":return i(()=>Vit(a,o,l));case"dynamic":return Wit(a,o,l);case"evaluation":return i(()=>Hit(a,o,l));case"image":return i(()=>Yit(a,o,l));case"graph":return i(()=>Git(a,o,l));case"logical":return i(()=>Kit(a,o,l));case"matrices":return i(()=>Zit(a,o,l));case"normalization":return i(()=>Qit(a,o,l));case"ragged":return i(()=>Jit(a,o,l));case"reduction":return i(()=>est(a,o,l));case"slice_join":return i(()=>tst(a,o,l));case"sparse":return i(()=>nst(a,o,l));case"spectral":return i(()=>rst(a,o,l));case"string":return i(()=>ist(a,o,l));case"transformation":return i(()=>sst(a,o,l));case"hash_table":return Xit(a,o,l,r);case"custom":const u=HCe(a.op);if(u&&u.customExecutor)return u.customExecutor(new Oit(a,o,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return Z0(s)?s.then(a=>[].concat(a)):[].concat(s)}class Ece{constructor(t={},n={},r={},i={},s){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=i,this.parseNodeNameCache=s,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kce(e,t,n,r){const i=new Set,s=[];let a=null,o=null;const l=new Set,u=new Set(Object.keys(e).map(d=>Bo(d)[0]));r=r||[];const c=new Set(r.map(d=>Bo(d.name)[0])),f=[...t];for(;f.length>0;){const d=f.pop();if((o1(d)||hst(d)||pst(d))&&a==null&&(a=d,o=a.children.map(h=>h.name).filter(h=>i.has(h))),i.add(d.name),n[d.name]==null&&!u.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){s.push(d.name);continue}d.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),f.push(h))})}}return{inputs:e,outputs:t,usedNodes:i,missingInputs:s,dynamicNode:a,syncInputs:o}}function ast(e,t){const{usedNodes:n,inputs:r}=t,i=Object.keys(r).map(b=>Bo(b)[0]).map(b=>e.nodes[b]),s=e.initNodes||[],a=b=>n.has(typeof b=="string"?b:b.name);function o(b){return[...new Map(b.map(x=>[x.name,x])).values()]}const l=o([...i,...e.weights,...s]).filter(a),u=o([...l,...Object.values(e.nodes)]).filter(a),c=new Map(u.map(b=>[b.name,b])),f={};for(const b of u){f[b.name]=f[b.name]||0;for(const x of b.children)a(x)||(f[x.name]=Number.POSITIVE_INFINITY),f[x.name]=(f[x.name]||0)+1}const d=Object.entries(f).filter(([,b])=>b===0).map(([b])=>b),h=[...d];for(;d.length>0;){const b=d.pop(),x=c.get(b);for(const w of x.children.filter(a))--f[w.name]===0&&(h.push(w.name),d.push(w.name))}const m=h.map(b=>c.get(b)),g=ost(m,l);return lst(g,l),g}function ost(e,t){const n=new Map(e.map(a=>[a.name,a])),r=t.map(a=>a.name),i=new Set(r);for(;r.length>0;){const a=r.pop(),o=n.get(a);for(const l of o.children)!n.has(l.name)||i.has(l.name)||(i.add(l.name),r.push(l.name))}return e.filter(a=>i.has(a.name))}class I4 extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}function lst(e,t){const n=new Map(e.map((o,l)=>[o.name,l])),r=new Set(t.map(o=>o.name)),i=o=>r.has(typeof o=="string"?o:o.name),s=new Set(e.map(o=>o.name)),a=o=>s.has(typeof o=="string"?o:o.name);for(const o of e){for(const l of o.children.filter(a)){if(!n.has(l.name))throw new I4(`Child ${l.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(l.name))throw new I4(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!i(o))for(const l of o.inputs){if(!n.has(l.name))throw new I4(`Input ${l.name} of node ${o.name} is unreachable.`);if(n.get(l.name)>n.get(o.name))throw new I4(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function ust(e){const t=new Map(e.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=e.map((o,l)=>o1(o)?n:l),i=o=>{const l=r[t.get(o.name)];return l??-1},s=e.map((o,l)=>o.children.map(i).reduce((u,c)=>Math.max(u,c),r[l])),a=new Map;for(let o=0;o<e.length;++o){const l=s[o];if(l===n)continue;const u=e[o],c=e[l];a.has(c.name)||a.set(c.name,[]),a.get(c.name).push(u)}return a}const cst=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),fst=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),dst=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function o1(e){return cst.has(e.op)}function hst(e){return fst.has(e.op)}function pst(e){return dst.has(e.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rR{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const n=Object.keys(t).map(r=>t[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new rR(t.functions[r],this)})}getCompilationKey(t,n){const r=t.map(s=>s.name).sort(),i=n.map(s=>s.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(t,n){const r=kce(t,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:s,syncInputs:a}=r;if(s!=null)throw new Error(`This execution contains the node '${s.name}', which has the dynamic op '${s.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(i.length>0){const u=n.map(f=>f.name),c=Object.keys(t);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${i}]`)}const o=ast(this.graph,r),l=ust(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(t){if(t==null)return null;const n=t.clone();return zi(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);const r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);const i=r.map(d=>this.graph.nodes[Bo(d)[0]]),s=n.map(d=>Bo(d)[0]),a=new Set(s);let o=s.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(i,o);let u=this.compiledMap.get(l);u==null&&(u=this.compile(t,o),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=pe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return he(()=>{const d=new Ece(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(x=>{const[w,C]=Bo(x,d),S=[];S[C]=t[x],h[w]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(S))});const m=this.getFrozenTensorIds(h),{orderedNodes:g,nodeLiveUntilMap:b}=u;for(const x of g){if(h[x.name])continue;const w=$ce(x,h,d,this._resourceManager);if(Z0(w))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);h[x.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[x.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(x,h,d,m,a,b.get(x.name))}return this.parent==null&&d.dispose(m),n.map(x=>Es(x,h,d))})}getFrozenTensorIds(t){const n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(t,n,r,i,s,a,o){if(!(o1(n)||a.has(t))){for(const l of r[t])l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length);for(const l of n.inputs){if(o1(l))continue;const u=xce(l.name,r,i);if(u!=null)for(const c of u){if(!c||c.kept||s.has(c.id))continue;const f=o[c.id];f===1?(c.dispose(),delete o[c.id]):f!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,i,s,a){function o(l){return o1(l)||s.has(l.name)}if(!(o1(t)||a==null))for(const l of a){if(o(l))continue;const u=xce(l.name,n,r);for(const c of u)!c||c.kept||i.has(c.id)||c.dispose()}}async executeAsync(t,n){return this._executeAsync(t,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,n,r=!1,i={},s={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=pe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const a=new Ece(this.weightMap,i,s,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(t,a,n,r),l=n.map(d=>Es(d,o,a)),u=l.map(d=>d.id),c=Object.keys(t).map(d=>t[d].id),f=new Set([...u,...c,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&a.dispose(f),l}async executeFunctionAsync(t,n,r){const i=t.reduce((s,a,o)=>(s[this.inputs[o].name]=a,s),{});return this._executeAsync(i,this.outputNodes,!0,n,r)}async executeWithControlFlow(t,n,r,i){const s=Object.keys(t),a=s.map(S=>this.graph.nodes[Bo(S)[0]]),o=r.map(S=>Bo(S)[0]),l=new Set(o);let u=o.map(S=>this.graph.nodes[S]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=kce(t,u,this.weightMap,this._initNodes),m=[...a,...this.graph.weights,...this._initNodes||[]].map(S=>({node:S,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(t).forEach(S=>{const[E,A]=Bo(S),k=[];k[A]=t[S],g[E]=k});const b={},x=this.getFrozenTensorIds(g),w={};for(;m.length>0;){const S=this.processStack(a,m,n,g,w,x,l,b,c);await Promise.all(S)}d==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const C=u.filter(S=>!o1(S)&&!Es(S.name,g,n)).map(S=>S.name);if(C.length>0){let S="";throw d!=null&&(S=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${C}] from the provided inputs [${s}]. Consider providing the following inputs: [${f}]. ${S}`)}return g}processStack(t,n,r,i,s,a,o,l,u){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&B("isConstant",f.node,i,r)&&([d]=lh(f.node.name,r)),i[f.node.name]==null){const h=$ce(f.node,i,r,this._resourceManager);d||([d]=lh(f.node.name,r));const m=r.currentContext;Z0(h)?c.push(h.then(g=>(i[d]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(g)),r.currentContext=m,this.checkTensorForDisposal(d,f.node,i,r,a,o,l),this.processChildNodes(f.node,n,r,i,s,u),g))):(i[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,i,r,a,o,l),this.processChildNodes(f.node,n,r,i,s,u))}else this.processChildNodes(f.node,n,r,i,s,u)}return c}processChildNodes(t,n,r,i,s,a){t.children.forEach(o=>{const[l]=lh(o.name,r);s[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(u=>!!Es(u,i,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(u=>!!Es(u,i,r))&&(s[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{const r=t[n],[i]=Bo(n),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const a=s.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,u)=>a[u]===-1||a[u]===l);q(o,()=>`The shape of dict['${s.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&q(r.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in model.execute(dict) must be ${s.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;const i={};for(const s in t){const a=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[s];a!=null?i[a.name]=t[s]:i[s]=t[s]}return i}checkInputs(t){const n=Object.keys(t).filter(r=>{const[i]=Bo(r);return this.graph.nodes[i]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,i;const s=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[n];return s!=null?s.name:n},{})}checkOutputs(t){t.forEach(n=>{const[r]=Bo(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class mst{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gst="?tfjs-format=file",yst="model.json";class PK{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=PY){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new mst}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return Z0(t)?t.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(t)}loadSync(t){const n=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,n)}async loadStreaming(t){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await _xe(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,n)}loadWithWeightMap(t,n){this.artifacts=t;const r=this.artifacts.modelTopology;let i=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const s=this.artifacts.userDefinedMetadata;s.signature!=null&&(i=s.signature),s.structuredOutputKeys!=null&&(this.structuredOutputKeys=s.structuredOutputKeys)}if(this.signature=i,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new rR(vce.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const s=vce.Instance.transformGraph(t.modelInitializer);this.initializer=new rR(s),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,n){if(typeof t=="string"){const r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const n=t instanceof Wn?[t]:t,r={};return n.forEach((i,s)=>r[this.structuredOutputKeys[s]]=i),r}return t}predict(t,n){const r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(t,n){const r=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(t){var n;if(!(t instanceof Wn)&&!Array.isArray(t)){const s=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(s!=null)for(const a in s){const o=s[a];o.resourceId!=null&&(t[a]=this.resourceIdToCapturedInput[o.resourceId])}return t}t=Array.isArray(t)?t:[t];const r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let i=0;return this.inputNodes.reduce((s,a)=>{var o,l,u;const c=(u=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[a])===null||u===void 0?void 0:u.resourceId;return c!=null?s[a]=this.resourceIdToCapturedInput[c]:s[a]=t[i++],s},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let i=0;i<r.length;i++){const s=r[i],a=n[s];this.resourceIdToCapturedInput[a.resourceId]=t[i]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=this.executor.execute(t,n);return r.length>1?r:r[0]}async executeAsync(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(t,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Jt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function bst(e,t={},n=PY){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=vst(e));const r=new PK(e,t,n);return await r.load(),r}function xst(e){if(e==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){const[r,i]=e;if(!r)throw new Error("modelJSON must be the first element of the array");if(!i||!(i instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const s=VO(r.weightsManifest),a=CX(r,s,i);t=HO(a)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=HO(e);else throw new Error("Unknown model format");const n=new PK(t);return n.load(),n}function vst(e){return e.endsWith("/")||(e=e+"/"),`${e}${yst}${gst}`}/** @license See the LICENSE file. */const wst="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sst=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:PK,deregisterOp:qrt,loadGraphModel:bst,loadGraphModelSync:xst,registerOp:Grt,version_converter:wst},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Ace;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(Ace||(Ace={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ft(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&q(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cst=AM;class QM extends V6{nextDataId(){return QM.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new lX(this,Cs())}write(t,n,r){this.firstUse&&(this.firstUse=!1,pe().get("IS_NODE")&&kl(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:t,dtype:r,refCount:1}),i}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&kf(r[0])){const s=r.map(a=>Df(a));i=this.write(s,t,n)}else i=this.write(r,t,n);return{dataId:i,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,r,i,s){this.data.set(t,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:r}=this.data.get(t);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Gh(i,s)}return ixe(this.data.get(t).values,n)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(i=>Vh(i));return Zt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Zt(t.shape,t.dtype,n)}makeOutput(t,n,r){return Cs().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,t),this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(t);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Sa();return t(),{kernelMs:Sa()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){ft([t],"where");const n=this.readSync(t.dataId);return Cst(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}QM.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XCe(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const $st=e=>{const{x:t}=e.inputs,n=e.backend;ft(t,"abs");let r=new Float32Array(we(t.shape));const i=n.data.get(t.dataId).values;return r=XCe(i),n.makeOutput(r,t.shape,t.dtype)},Est={kernelName:Uk,backendName:"cpu",kernelFunc:$st};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xi(e){return(t,n,r,i,s)=>{const a=Gt(t,n),o=a.length,l=Ct(a),u=we(a),c=ls(s,u),f=t.length,d=n.length,h=Ct(t),m=Ct(n),g=hy(t,a),b=hy(n,a);if(g.length+b.length===0)for(let x=0;x<c.length;++x)c[x]=e(r[x%r.length],i[x%i.length]);else for(let x=0;x<c.length;++x){const w=qy(x,o,l),C=w.slice(-f);g.forEach(k=>C[k]=0);const S=pc(C,f,h),E=w.slice(-d);b.forEach(k=>E[k]=0);const A=pc(E,d,m);c[x]=e(r[S],i[A])}return[c,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wo(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",a)},o}const kst={kernelName:J6,backendName:"cpu",kernelFunc:Wo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iR(e,t,n="float32"){if(n==="complex64"){const i=iR(e,t,"float32"),s=iR(e,t,"float32");return Wo({inputs:{real:i,imag:s},backend:e})}const r=Bs(we(t),n);return e.makeTensorInfo(t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kf(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Ast={kernelName:rw,backendName:"cpu",kernelFunc:Kf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vy(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const _st={kernelName:IF,backendName:"cpu",kernelFunc:vy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YCe(e,t,n,r){if(r==="int32"){const i=Int32Array.from(e);return[t,"int32",i]}if(r==="bool"){const i=Dm([0],n),[s,a]=xi((o,l)=>o!==l?1:0)(t,[],e,i,"bool");return[a,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function om(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Kf({inputs:{x:i},backend:n});const c=iR(n,i.shape,i.dtype),f=om({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),d=Wo({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(i.dtype==="complex64"){const c=vy({inputs:{input:i},backend:n}),f=om({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),f}if(!fX(i.dtype,s)){const c=Kf({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const a=n.data.get(i.dataId).values,[o,l,u]=YCe(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,u)}const Tst={kernelName:Wv,backendName:"cpu",kernelFunc:om};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yi(e,t,n,r){return n==null?({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;ft([a,o],e);const u=l.data.get(a.dataId).values,c=l.data.get(o.dataId).values,f=a.dtype==="string"?qh(u):u,d=a.dtype==="string"?qh(c):c,h=r||a.dtype,[m,g]=t(a.shape,o.shape,f,d,h);return l.makeTensorInfo(g,h,m)}:({inputs:i,backend:s})=>{const{a,b:o}=i,l=s;if(a.dtype==="complex64"||o.dtype==="complex64"){const u=om({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=l.data.get(f.dataId).values,m=l.data.get(d.dataId).values,g=om({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(g.dataId),x=b.complexTensorInfos.real,w=b.complexTensorInfos.imag,C=l.data.get(x.dataId).values,S=l.data.get(w.dataId).values,[E,A,k]=n(a.shape,o.shape,h,m,C,S),N=l.makeTensorInfo(k,"float32",E),I=l.makeTensorInfo(k,"float32",A),T=Wo({inputs:{real:N,imag:I},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(I),T}else{const u=l.data.get(a.dataId).values,c=l.data.get(o.dataId).values,f=r||a.dtype,[d,h]=t(a.shape,o.shape,u,c,f);return l.makeTensorInfo(h,f,d)}}}function BK(e){return(t,n,r,i,s,a)=>{const o=Gt(t,n),l=we(o),u=o.length,c=Ct(o),f=ls("float32",l),d=ls("float32",l),h=hy(t,o),m=hy(n,o),g=Gh(r,i),b=Gh(s,a),x=t.length,w=Ct(t),C=n.length,S=Ct(n);if(h.length+m.length===0)for(let E=0;E<f.length;E++){const A=E%g.length,k=E%b.length,N=e(g[A*2],g[A*2+1],b[k*2],b[k*2+1]);f[E]=N.real,d[E]=N.imag}else for(let E=0;E<f.length;E++){const A=qy(E,u,c),k=A.slice(-x);h.forEach(L=>k[L]=0);const N=pc(k,x,w),I=A.slice(-C);m.forEach(L=>I[L]=0);const T=pc(I,C,S),D=e(g[N*2],g[N*2+1],b[T*2],b[T*2+1]);f[E]=D.real,d[E]=D.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KCe=xi((e,t)=>e+t),Nst=BK((e,t,n,r)=>({real:e+n,imag:t+r})),Rx=Yi(Xy,KCe,Nst),Dst={kernelName:Xy,backendName:"cpu",kernelFunc:Rx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(e,t,n,r,i){const s=we(r),a=Bs(i,n);for(let o=0;o<e.length;o++){const l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?a[l]+=t[o]:a[l]+=1)}return a}function ZCe(e,t,n,r=!1){const i=e.shape[0],s=e.shape[1],a=Zt([i,n],t.dtype);for(let o=0;o<i;o++)for(let l=0;l<s;l++){const u=e.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?a.set(1,o,u):t.size>0?a.set(a.get(o,u)+t.get(o,l),o,u):a.set(a.get(o,u)+1,o,u))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QCe=xi((e,t)=>e&t),Ist=Yi(Kk,QCe),Ost={kernelName:Kk,backendName:"cpu",kernelFunc:Ist};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hd(e){return(t,n,r)=>{const i=ri(n,t.length);for(let s=0;s<t.length;++s)i[s]=e(t[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function er(e,t,n){const r=hd(t);return zm(e,r,n)}function zm(e,t,n){return({inputs:r,attrs:i,backend:s})=>{const{x:a}=r;ft(a,e);const o=s,l=o.data.get(a.dataId).values;let u;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=qh(l)}else u=l;const c=n||a.dtype,f=t(u,c,i);return o.makeTensorInfo(a.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JCe=hd(e=>Math.ceil(e)),Rst=zm(Hv,JCe),Fst={kernelName:Hv,backendName:"cpu",kernelFunc:Rst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(e,t,n,r){const i=ri(n,we(t));if(r&&n!=="string"){let s=0;e.forEach(a=>{const o=we(a.shape);i.set(a.vals,s),s+=o})}else{let s=0;e.forEach(a=>{const o=n==="string"?qh(a.vals):a.vals;let l=0;for(let u=0;u<a.shape[0];++u){const c=u*t[1]+s;for(let f=0;f<a.shape[1];++f)i[c+f]=o[l++]}s+=a.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e=xi((e,t)=>e===t?1:0),n3e=Yi(sA,t3e,null,"bool"),Mst={kernelName:sA,backendName:"cpu",kernelFunc:n3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e=hd(e=>Math.exp(e)),i3e=zm(Qv,r3e,"float32"),Lst={kernelName:Qv,backendName:"cpu",kernelFunc:i3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e=hd(e=>Math.expm1(e)),Pst=zm(Jv,s3e),Bst={kernelName:Jv,backendName:"cpu",kernelFunc:Pst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e=hd(e=>Math.floor(e)),zst=zm(ew,a3e),jst={kernelName:ew,backendName:"cpu",kernelFunc:zst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o3e=xi((e,t)=>Math.floor(e/t)),Ust=Yi(tw,o3e,null,"int32"),Vst={kernelName:tw,backendName:"cpu",kernelFunc:Ust};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(e,t,n,r,i,s,a,o,l){const u=Zt([r,s],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<i;h++){const m=e[c*i+h];d+=m*a[h],f.push(m)}if(d<0||d>=l/s)throw new Error(`Invalid indices: ${f} does not index into ${o}`);for(let h=0;h<s;h++)u.values[c*s+h]=t.get(...t.indexToLoc(d*s+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3e(e,t,n){const r=Zt(n,e.dtype);for(let i=0;i<r.size;++i){const a=r.indexToLoc(i).slice(),o=a[0],l=a[2],u=t.locToIndex([o,l]);a[2]=t.values[u];const c=e.locToIndex(a);0<=c&&c<e.values.length&&(r.values[i]=e.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3e=xi((e,t)=>e>t?1:0),Wst=Yi(uA,c3e,null,"bool"),Hst={kernelName:uA,backendName:"cpu",kernelFunc:Wst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e=xi((e,t)=>e>=t?1:0),Gst=Yi(nw,f3e,null,"bool"),qst={kernelName:nw,backendName:"cpu",kernelFunc:Gst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3e=xi((e,t)=>e<t?1:0),Xst=Yi(fA,d3e,null,"bool"),Yst={kernelName:fA,backendName:"cpu",kernelFunc:Xst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3e=xi((e,t)=>e<=t?1:0),Kst=Yi(dA,h3e,null,"bool"),Zst={kernelName:dA,backendName:"cpu",kernelFunc:Kst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(e,t,n){const r=(t-e)/(n-1),i=Bs(n,"float32");i[0]=e;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e=hd(e=>Math.log(e)),Qst=zm(ow,m3e),Jst={kernelName:ow,backendName:"cpu",kernelFunc:Qst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(e,t,n,r){const i=ls(r,we(n));for(let s=0;s<i.length;++s){const a=s*t;let o=e[a];for(let l=0;l<t;++l){const u=e[a+l];(Number.isNaN(u)||u>o)&&(o=u)}i[s]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y3e=xi((e,t)=>Math.max(e,t)),eat=Yi(uw,y3e),tat={kernelName:uw,backendName:"cpu",kernelFunc:eat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b3e=xi((e,t)=>Math.min(e,t)),nat=Yi(cw,b3e),rat={kernelName:cw,backendName:"cpu",kernelFunc:nat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jK=xi((e,t)=>e*t),iat=BK((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),JM=Yi(dw,jK,iat),sat={kernelName:dw,backendName:"cpu",kernelFunc:JM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(e,t,n){const r=rp(-1,n);return jK([],t,r,e,n)}function aat(e){const{inputs:t,backend:n}=e,{x:r}=t;ft(r,"neg");const i=n.data.get(r.dataId).values,[s,a]=x3e(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}const oat={kernelName:CA,backendName:"cpu",kernelFunc:aat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3e=xi((e,t)=>e!==t?1:0),lat=Yi($A,v3e,null,"bool"),uat={kernelName:$A,backendName:"cpu",kernelFunc:lat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UK(e,t,n,r,i){const s=t.length,a=we(t),o=Ct(t),l=Ct(i),u=ls(n,we(i));for(let c=0;c<a;++c){const f=qy(c,s,o),d=new Array(f.length);for(let m=0;m<d.length;m++)d[m]=f[r[m]];const h=pc(d,s,l);u[h]=e[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function So(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:s}=n;ft(i,"transpose");const a=i.shape.length,o=new Array(a);for(let f=0;f<o.length;f++)o[f]=i.shape[s[f]];const l=r.data.get(i.dataId).values,u=UK(l,i.shape,i.dtype,s,o);return{dataId:r.write(u,o,i.dtype),shape:o,dtype:i.dtype}}const cat={kernelName:P1,backendName:"cpu",kernelFunc:So};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(e,t,n,r){const[i,s]=ds(e,r),a=yo(t,"int32"),o=Bs(we(i),a),l=we(s);for(let u=0;u<o.length;++u){const c=u*l;let f=1;for(let d=0;d<l;++d)f*=n[c+d];o[u]=f}return{outVals:o,outShape:i,outDtype:a}}function fat(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r;ft(i,"prod");const o=i.shape.length,l=rn(s,i.shape),u=ei(l,o);let c=l,f=i;const d=[];u!=null&&(f=So({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(f),c=yi(c.length,o));const h=n.data.get(f.dataId).values,{outVals:m,outShape:g,outDtype:b}=w3e(f.shape,f.dtype,h,c);let x=g;return a&&(x=gi(g,l)),d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(x,b,m)}const dat={kernelName:NA,backendName:"cpu",kernelFunc:fat};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hat(e,t,n){e.forEach((r,i)=>{if(r<0||r>=n){const s=qy(i,t.length,Ct(t)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function pat(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function mat(e,t,n,r){const i=[];let s=0;const a=t.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);pat(n,r);let l=1;for(let u=0;u<t.length-1;++u){l*=t[u];const c=t[u+1];for(let f=1;f<l+1;++f)o[u].push(f*c)}for(let u=0;u<e.length;++u){let c=e[u],f=e[u]+1;for(let d=0;d<n.length;++d){const h=n[d],m=d+t.length-1;if(m>=0){const g=o[m],b=g[g.length-1]-h[c];for(let x=c;x<f;++x)o[m].push(h[x+1]+b)}c=h[c],f=h[f]}f!==c&&(i.push([c,f]),s+=f-c)}return{outSplits:o,valueSlices:i,numValues:s}}function gat(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].length,i=ri("int32",r);t.push(i),e[n].forEach((s,a)=>i[a]=s)}return t}function _ce(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function yat(e,t,n,r,i,s){const a=_ce(t,2)[1],o=_ce(s,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let f=0;f<r;++f)i[l*o+f]=e[c*a+f];++l}}function bat(e,t,n,r,i){const s=t.slice();s[0]=i;const a=ri(n,we(s)),o=e.length,l=o===0?0:o/t[0];return yat(e,t,r,l,a,s),[a,s]}function S3e(e,t,n,r,i,s,a,o){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const l=t[0][0]-1;if(hat(s,a,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:f,numValues:d}=mat(s,a,e,u),h=gat(c),m=bat(n,r,i,f,d);return[h,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tce=2147483647;function C3e(e,t,n,r,i,s,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=t.length===0,l=i.length===0,u=a.length===0,c=[];o||c.push(t[0]),l||c.push(i[0]),u||c.push(a[0]);for(let b=1;b<c.length;++b)if(c[b]!==c[b-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=ri("int32",f+1);d[0]=0;for(let b=0;b<f;++b){const x=o?e[0]:e[b],w=l?r[0]:r[b],C=u?s[0]:s[b];if(C===0)throw new Error("Requires delta != 0");let S;if(C>0&&w<x||C<0&&w>x)S=0;else if(S=Math.ceil(Math.abs((w-x)/C)),S>Tce)throw new Error(`Requires ((limit - start) / delta) <= ${Tce}`);d[b+1]=d[b]+S}const h=d[f],m=ri(n,h);let g=0;for(let b=0;b<f;++b){const x=d[b+1]-d[b];let w=o?e[0]:e[b];const C=u?s[0]:s[b];for(let S=0;S<x;++S)m[g++]=w,w+=C}return[d,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ru=ic;class sR{constructor(t,n,r,i,s,a,o,l,u,c){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=owe(c),this.raggedRank=lwe(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===ru.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===ru.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case ru.VALUE_ROWIDS:return sR.getMaxWidthValueRowID(n);case ru.ROW_SPLITS:return sR.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ru[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const n=t.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=t[i+1]-t[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(t){const n=t.length;if(n===0)return 0;let r=0,i=t[0],s=0;for(let a=1;a<n;++a){const o=t[a];o!==i&&(i=o,s=Math.max(a-r,s),r=a)}return Math.max(n-r,s)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Dce(t,r)}calculateOutputSize(t){const n=this.valuesShape,r=this.defaultValueShape;uwe(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=awe(this.raggedRank,i,n);a[0]<0&&(a[0]=t);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(t,n,r){const i=Math.min(t,r),s=[];let a=0;for(let o=0;o<i;++o,a+=n)s.push(a);for(let o=i;o<t;++o)s.push(-1);return q(s.length===t,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(t,n,r,i){const s=t.length,a=[];for(let o=0;o<s-1;++o){const l=t[o+1]-t[o];let u=Math.min(i,l),c=n[o];c===-1&&(u=0);for(let f=0;f<u;++f)a.push(c),c+=r;for(let f=0;f<l-u;++f)a.push(-1)}if(s>0&&a.length!==t[s-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(t,n,r,i){const s=t.length,a=[];if(s===0)return[];let o=0,l=t[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];a.push(u);for(let c=1;c<s;++c){const f=t[c];if(f===l)u>=0&&(++o,o<i?u+=r:u=-1);else{if(o=0,l=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);u=n[f]}a.push(u)}if(a.length!==t.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(t,n,r,i){const s=this.getRowPartitionTensor(t),a=this.getRowPartitionTypeByDimension(t);switch(a){case ru.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case ru.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${ru[a]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ru.FIRST_DIM_SIZE:return t[0];case ru.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ru.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ru[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=Dce(r,!1),a=ri(this.valuesDType,we(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,i[u],r[u]);this.setOutput(this.raggedRank,l,a,s)}return[s,a]}setOutput(t,n,r,i){if(r.length===0)return;const s=this.values,a=r;let o=i.slice();o=o.slice(t+1);const l=we(o),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const m=this.defaultValueShape;he(()=>{const g=ae(c,m);c=B1(g,o).dataSync()})}let f=0,d=0,h=0;for(let m=0;m<=u;++m){let g=m<u?n[m]:-1;if(g===h){++h;continue}if(d<h){const b=s.subarray(f*l),x=a.subarray(d*l),w=(h-d)*l;Nce(x,b,w)}if(m>=u){const b=r.length;g=Math.floor(b/l)}if(g>h)if(this.defaultValue.length===1)a.subarray(h*l,g*l).fill(this.defaultValue[0]),h=g;else for(;g>h;){const b=a.slice(h*l);Nce(b,c,l),++h}g<0?(f=m+1,d=h):(f=m,d=h,h=d+1)}}}function Nce(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Dce(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function $3e(e,t,n,r,i,s,a,o,l,u){return new sR(e,t,n,r,i,s,a,o,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(e,t,n,r){const i=e===t,s=e<t&&n<0,a=t<e&&n>1;if(i||s||a)return Bs(0,r);const o=Math.abs(Math.ceil((t-e)/n)),l=Bs(o,r);t<e&&n===1&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k3e=hd(e=>1/Math.sqrt(e)),xat=zm(bw,k3e),vat={kernelName:bw,backendName:"cpu",kernelFunc:xat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1(e,t,n,r,i,s,a,o,l,u){const c=[r/i,i],f=e.values,d=t.values;if(r===0)return Zt(n,t.dtype);const h=l instanceof Ni?l:Zt(c,t.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let m=0;m<s;m++){const g=[];let b=0;for(let x=0;x<a;x++){const w=f[m*a+x];g.push(w),b+=w*o[x]}if(b<0||b>=r/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let x=0;x<i;x++)u?h.values[b*i+x]+=d[m*i+x]:h.values[b*i+x]=t.rank===0?d[0]:d[m*i+x]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wat=hd(e=>1/(1+Math.exp(-e))),A3e=er(Cw,e=>1/(1+Math.exp(-e))),Sat={kernelName:Cw,backendName:"cpu",kernelFunc:A3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(e,t,n,r,i){const s=jY(r,t,n),a=we(n),o=Ct(r);if(s){const f=UY(t,o);return i==="string"?e.slice(f,f+a):e.subarray(f,f+a)}const l=i==="string"?qh(e):e,u=Zt(r,i,l),c=Zt(n,i);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((m,g)=>m+t[g]);c.set(u.get(...h),...d)}return i==="string"?Twe(c.values):c.values}function wy(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,size:a}=r;ft(i,"slice");const[o,l]=PM(i,s,a);BY(i,o,l);const u=n.data.get(i.dataId).values,c=_3e(u,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const Cat={kernelName:MA,backendName:"cpu",kernelFunc:wy};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(e,t,n,r,i,s,a){const o=t[0],l=s[0],u=new Array(l),c=new Array(o),f=t[1];if(l===0){if(o!==0)throw new Error(gwe(o));const b=ri(n,0),x=ri(i,0);return[b,[0,f],x,u,c]}let d=!0,h=0;const m=new Array(l).fill(0);for(let b=0;b<o;++b){const x=e[b*f];if(x<0)throw new Error(ywe(b,x));if(x>=l)throw new Error(bwe(b,x,l));++m[x],d=d&&x>=h,h=x}let g=!0;for(let b=0;b<l;++b){const x=m[b]===0;u[b]=x,g=g&&!x,m[b]=Math.max(m[b],1),b>0&&(m[b]+=m[b-1])}if(g&&d){const b=e,x=r;for(let w=0;w<o;++w)c[w]=w;return[b,[o,f],x,u,c]}else{const b=m[l-1],x=ri(n,b*f),w=ri(i,b),C=new Array(l).fill(0);for(let S=0;S<o;++S){const E=e[S*f],A=C[E],k=(E===0?0:m[E-1])+A;C[E]++;for(let N=0;N<f;++N)x[k*f+N]=e[S*f+N];w[k]=r[S],c[S]=k}for(let S=0;S<l;++S)if(C[S]===0){const A=S===0?0:m[S-1];x[A*f+0]=S;for(let k=1;k<f;++k)x[A*f+k]=0;w[A]=a}return[x,[b,f],w,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(e,t,n,r,i){const s=we(r),a=t[0],o=i.length,l=[];let u=1,c=-1;for(let b=0;b<o;++b){const x=i[b];if(x===-1){if(c!==-1)throw new Error(xwe(c,b));c=b,l.push(1)}else{if(x<0)throw new Error(vwe(b,x));u*=x,l.push(x)}}if(c!==-1){if(u<=0)throw new Error(wwe());const b=Math.trunc(s/u);if(u*b!==s)throw new Error(Swe(r,l));l[c]=b}if(we(l)!==s)throw new Error(Cwe(r,l));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let b=d-2;b>=0;--b)h[b]=h[b+1]*r[b+1]}const m=[];if(o>0){m[o-1]=1;for(let b=o-2;b>=0;--b)m[b]=m[b+1]*l[b+1]}const g=ri(n,a*o);for(let b=0;b<a;++b){let x=0;for(let w=0;w<d;++w)x+=e[b*d+w]*h[w];for(let w=0;w<o;++w)g[b*o+w]=Math.trunc(x/m[w]),x%=m[w]}return[g,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(e,t,n,r,i,s=!1,a=0){const o=r.length,l=[t[0],e.length/t[0]],u=l[1],f=o>0?i[o-1]+1:0;if(f<0)throw new Error(lW());const d=t.slice();d[0]=f;const h=d.reduce((C,S)=>C*S,1),m=ri(n,h);if(o===0)return f>0&&m.fill(a),[m,d];if(f<=0)throw new Error(lW());let g=0,b=1,x=0,w=i[g];for(;;){let C=0;if(b<o){if(C=i[b],w===C){++b;continue}if(w>=C)throw new Error($we())}if(w<0||w>=f)throw new Error(Ewe(w,f));w>x&&m.fill(a,x*u,w*u);for(let S=g;S<b;++S){const E=r[S];if(E<0||E>=l[0])throw new Error(kwe(S,r[S],l[0]));for(let A=0;A<u;A++)m[w*u+A]+=e[E*u+A]}if(s)for(let S=0;S<u;S++)m[w*u+S]/=b-g;if(g=b,++b,x=w+1,w=C,b>o)break}return x<f&&m.fill(a,x*u,f*u),[m,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $at=hd(e=>Math.sqrt(e)),Eat=er(Ew,e=>Math.sqrt(e)),kat={kernelName:Ew,backendName:"cpu",kernelFunc:Eat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3e=xi((e,t)=>{const n=e-t;return n*n}),Aat=Yi(kw,D3e),_at={kernelName:kw,backendName:"cpu",kernelFunc:Aat};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e=hd((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),Tat=zm(jA,I3e),Nat={kernelName:jA,backendName:"cpu",kernelFunc:Tat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(e,t,n,r){const i=Zt(e,t.dtype);for(let s=0;s<i.size;s++){const a=i.indexToLoc(s),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];i.set(t.get(...o),...a)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dat{constructor(t,n,r,i,s,a){this.separator=Df(t),this.nGramWidths=n,this.leftPad=Df(r),this.rightPad=Df(i),this.padWidth=s,this.preserveShort=a}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,i,s,a){for(let o=0;o<s;++o){const l=this.getPadWidth(a),u=Math.max(0,l-o),c=Math.max(0,l-(s-(o+1))),f=a-(u+c),d=n+(u>0?0:o-l);let h=0;h+=u*this.leftPad.length;for(let w=0;w<f;++w)h+=t[d+w].length;h+=c*this.rightPad.length;const m=u+c+f-1;h+=m*this.separator.length,r[i+o]=new Uint8Array(h);const g=r[i+o];let b=0;const x=w=>w.forEach(C=>g[b++]=C);for(let w=0;w<u;++w)x(this.leftPad),x(this.separator);for(let w=0;w<f-1;++w)x(t[d+w]),x(this.separator);if(f>0){x(t[d+f-1]);for(let w=0;w<c;++w)x(this.separator),x(this.rightPad)}else{for(let w=0;w<c-1;++w)x(this.rightPad),x(this.separator);x(this.rightPad)}}}compute(t,n){const r=t.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<i;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,a=ri("int32",i);if(r===0||i===0){const l=new Array(r);for(let u=0;u<=s;++u)a[u]=0;return[l,a]}a[0]=0;for(let l=1;l<=s;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&c===0&&(c=1),a[l]=a[l-1]+c}const o=new Array(a[s]);for(let l=0;l<s;++l){const u=n[l];let c=a[l];if(this.nGramWidths.forEach(f=>{const d=n[l+1]-n[l],h=this.getNumNGrams(d,f);this.createNGrams(t,u,o,c,h,f),c+=h}),this.preserveShort&&c===a[l]){const f=n[l+1]-n[l];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(t,u,o,c,1,d)}}return[o,a]}}function R3e(e,t,n,r,i,s,a,o){return new Dat(n,r,i,s,a,o).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iat(e,t,n,r){if(!e.length)return;if(t.length===0){for(let s=0;s<e.length;++s)r.push(e.subarray(s,s+1));return}if(t.length===1){const s=t[0];let a=e.indexOf(s);for(;a!==-1;){const o=e.subarray(0,a);(!n||o.length!==0)&&r.push(o),e=e.subarray(a+1),a=e.indexOf(s)}(!n||e.length!==0)&&r.push(e);return}let i=0;for(let s=0;s<e.length+1;s++)if(s===e.length||t.indexOf(e[s])!==-1){const a=e.subarray(i,s);(!n||a.length!==0)&&r.push(a),i=s+1}}function F3e(e,t,n){const r=e.length,i=[];let s=0,a=0;const o=new Array(r);for(let d=0;d<r;++d){const h=i.length;Iat(e[d],t,n,i);const m=i.length-h;o[d]=m,s+=m,a=Math.max(a,m)}const l=ri("int32",s*2),u=new Array(s),c=[r,a];let f=0;for(let d=0;d<r;++d)for(let h=0;h<o[d];++h)l[f*2]=d,l[f*2+1]=h,u[f]=i[f],++f;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(e,t){const n=ri("int32",e.length);for(let r=0;r<e.length;++r)n[r]=mxe(e[r]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e=xi((e,t)=>e-t),Oat=BK((e,t,n,r)=>({real:e-n,imag:t-r})),WK=Yi(Aw,L3e,Oat),Rat={kernelName:Aw,backendName:"cpu",kernelFunc:WK};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=Zt(n,e.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),a=new Array(e.rank);for(let l=0;l<a.length;l++)a[l]=s[l]%e.shape[l];const o=e.locToIndex(a);r.values[i]=e.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function B3e(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=t-n+1,u=Math.log(o),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(o-c)/o)*Math.sign(l-o/2),d=Math.max(n,Math.floor(t-l*c/o+f)),h=Math.min(r,Math.floor(t+(o-l)*c/o+f));B3e(e,t,d,h)}const i=e[t];let s=n,a=r;for(bh(e,n,t),W3(e[r],i)>0&&bh(e,n,r);s<a;){for(bh(e,s,a),s++,a--;W3(e[s],i)<0;)s=s+1;for(;W3(e[a],i)>0;)a=a-1}W3(e[n],i)===0?bh(e,n,a):(a=a+1,bh(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function z3e(e,t,n,r,i){const s=t[t.length-1],[a,o]=[e.length/s,s],l=ls(n,a*r),u=ls("int32",a*r);for(let f=0;f<a;f++){const d=f*o,h=e.subarray(d,d+o);let m=new Array(h.length);h.forEach((w,C)=>m[C]={value:w,index:C}),r<m.length&&(B3e(m,r),m=m.slice(0,r)),i&&m.sort(W3);const g=f*r,b=l.subarray(g,g+r),x=u.subarray(g,g+r);for(let w=0;w<r;w++)b[w]=m[w].value,x[w]=m[w].index}const c=t.slice();return c[c.length-1]=r,[Zt(c,n,l),Zt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(e,t,n,r){const i=rn(t,n)[0],s=[1,n[0],1];for(let m=0;m<i;m++)s[0]*=n[m];s[1]=n[i];for(let m=i+1;m<n.length;m++)s[2]*=n[m];const a=new Map,o=new Int32Array(n[i]),l=new Ni(s,r,e),u=[],c=s[0]===1&&s[2]===1;for(let m=0;m<n[i];m++){let g;if(c)g=e[m].toString();else{const x=[];for(let w=0;w<s[0];w++)for(let C=0;C<s[2];C++)x.push(l.get(w,m,C));g=x.join(",")}const b=a.get(g);if(b!=null)o[m]=b;else{const x=a.size;a.set(g,x),o[m]=x,u.push(m)}}const f=s.slice();f[1]=a.size;const d=new Ni(f,r);u.forEach((m,g)=>{for(let b=0;b<s[0];b++)for(let x=0;x<s[2];x++)d.set(l.get(b,m,x),b,g,x)});const h=n.slice();return h[i]=f[1],{outputValues:d.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fat=Object.freeze(Object.defineProperty({__proto__:null,addImpl:KCe,bincountImpl:zK,bincountReduceImpl:ZCe,bitwiseAndImpl:QCe,castImpl:YCe,ceilImpl:JCe,concatImpl:e3e,equalImpl:t3e,expImpl:r3e,expm1Impl:s3e,floorDivImpl:o3e,floorImpl:a3e,gatherNdImpl:l3e,gatherV2Impl:u3e,greaterEqualImpl:f3e,greaterImpl:c3e,lessEqualImpl:h3e,lessImpl:d3e,linSpaceImpl:p3e,logImpl:m3e,maxImpl:g3e,maximumImpl:y3e,minimumImpl:b3e,multiplyImpl:jK,negImpl:x3e,notEqualImpl:v3e,prodImpl:w3e,raggedGatherImpl:S3e,raggedRangeImpl:C3e,raggedTensorToTensorImpl:$3e,rangeImpl:E3e,rsqrtImpl:k3e,scatterImpl:C1,sigmoidImpl:wat,simpleAbsImpl:XCe,sliceImpl:_3e,sparseFillEmptyRowsImpl:T3e,sparseReshapeImpl:N3e,sparseSegmentReductionImpl:VK,sqrtImpl:$at,squaredDifferenceImpl:D3e,staticRegexReplaceImpl:I3e,stridedSliceImpl:O3e,stringNGramsImpl:R3e,stringSplitImpl:F3e,stringToHashBucketFastImpl:M3e,subImpl:L3e,tileImpl:P3e,topKImpl:z3e,transposeImpl:UK,uniqueImpl:j3e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vX("cpu",()=>new QM,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=er(Kv,e=>e>=0?e:Math.exp(e)-1),Mat={kernelName:Kv,backendName:"cpu",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:s}=r;ft([i],"leakyRelu");const a=we(i.shape),o=n.data.get(i.dataId).values,l=ls("float32",a);for(let u=0;u<o.length;u++)l[u]=o[u]<0?s*o[u]:o[u];return n.makeTensorInfo(i.shape,"float32",l)}const Lat={kernelName:cA,backendName:"cpu",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pat=xi((e,t)=>e<0?t*e:e);function W3e(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;ft([r,i],"prelu");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[o,l]=Pat(r.shape,i.shape,s,a,"float32");return n.makeTensorInfo(l,"float32",o)}const Bat={kernelName:TA,backendName:"cpu",kernelFunc:W3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e=er(mw,e=>Math.max(0,e)),zat={kernelName:mw,backendName:"cpu",kernelFunc:H3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e=er(gw,e=>Math.min(Math.max(0,e),6)),jat={kernelName:gw,backendName:"cpu",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aR(e,t,n,r,i){if(n==="linear")return Kf({inputs:{x:t},backend:e});if(n==="relu")return H3e({inputs:{x:t},backend:e});if(n==="elu")return U3e({inputs:{x:t},backend:e});if(n==="relu6")return G3e({inputs:{x:t},backend:e});if(n==="prelu")return W3e({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return V3e({inputs:{x:t},backend:e,attrs:{alpha:i}});if(n==="sigmoid")return A3e({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nr(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:s}=r,a=we(i.shape),o=cX(s,a),l=we(o);q(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;c.shape=o,f.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const Uat={kernelName:DA,backendName:"cpu",kernelFunc:Nr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3e(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s}=t,{transposeA:a,transposeB:o}=r;ft([i,s],"matMul");const l=i.shape.length,u=s.shape.length,c=a?i.shape[l-2]:i.shape[l-1],f=o?s.shape[u-1]:s.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],h=o?s.shape[u-2]:s.shape[u-1],m=i.shape.slice(0,-2),g=s.shape.slice(0,-2),b=we(m),x=we(g),C=Gt(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([d,h]);q(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${a} and transposeB=${o} must match.`);const S=a?[b,c,d]:[b,d,c],E=o?[x,h,f]:[x,f,h],A=Nr({inputs:{x:i},backend:n,attrs:{shape:S}}),k=Nr({inputs:{x:s},backend:n,attrs:{shape:E}}),N=a?A.shape[1]:A.shape[2],I=a?A.shape[2]:A.shape[1],T=o?k.shape[1]:k.shape[2],D=Math.max(b,x),L=n.data.get(A.dataId).values,P=n.data.get(k.dataId).values,M=Ct(A.shape),F=Ct(k.shape),[R,j,H]=a?[M[0],1,M[1]]:[M[0],M[1],1],[G,z,Y]=o?[1,F[1],F[0]]:[F[1],1,F[0]],Z=I*T,Q=Zt([D,I,T],A.dtype),se=Q.values,re=n.blockSize;for(let de=0;de<D;de++){const Oe=de%b,Le=de%x;for(let me=0;me<I;me+=re){const xe=Math.min(me+re,I);for(let Ee=0;Ee<T;Ee+=re){const ce=Math.min(Ee+re,T);for(let Xe=0;Xe<N;Xe+=re){const ze=Math.min(Xe+re,N);for(let Je=me;Je<xe;Je++)for(let at=Ee;at<ce;at++){let et=0;for(let nt=Xe;nt<ze;nt++){const Yn=L[Oe*R+Je*j+nt*H],Yt=P[nt*G+at*z+Le*Y];et+=Yn*Yt}se[de*Z+(Je*T+at)]+=et}}}}}return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(C,Q.dtype,Q.values)}const Vat={kernelName:Xk,backendName:"cpu",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wat(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s,bias:a,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;let d,h,m;const g=[];d=q3e({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),a&&(h=Rx({inputs:{a:d,b:a},backend:n}),g.push(d),d=h),c&&(m=aR(n,d,c,o,f),g.push(d),d=m);for(const x of g)n.disposeIntermediateTensorInfo(x);return d}const Hat={kernelName:cE,backendName:"cpu",kernelFunc:Wat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gat=er(Lv,e=>Math.acos(e)),qat={kernelName:Lv,backendName:"cpu",kernelFunc:Gat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xat=er(Pv,e=>Math.acosh(e)),Yat={kernelName:Pv,backendName:"cpu",kernelFunc:Xat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kat(e){const{inputs:t,backend:n}=e,r=t;ft(t,"addN");const i=r.map(o=>n.data.get(o.dataId).values),s=Zt(r[0].shape,r[0].dtype),a=s.values;for(let o=0;o<r.length;o++){const l=i[o];for(let u=0;u<a.length;u++)a[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const Zat={kernelName:Vk,backendName:"cpu",kernelFunc:Kat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qat(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r;ft(i,"all");const o=rn(s,i.shape);let l=o;const u=ei(l,i.shape.length);let c=i;u!=null&&(c=So({inputs:{x:i},backend:n,attrs:{perm:u}}),l=yi(l.length,i.shape.length)),Ws("all",l,c.shape.length);const[f,d]=ds(c.shape,l),h=we(d),m=Bs(we(f),c.dtype),g=n.data.get(c.dataId).values;for(let x=0;x<m.length;++x){const w=x*h;let C=g[w];for(let S=0;S<h;++S){const E=g[w+S];C=C&&E}m[x]=C}u!=null&&n.disposeIntermediateTensorInfo(c);const b=n.makeTensorInfo(f,c.dtype,m);if(a){const x=gi(f,o),w=Nr({inputs:{x:b},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(b),w}return b}const Jat={kernelName:q6,backendName:"cpu",kernelFunc:Qat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r;ft(i,"any");const o=rn(s,i.shape);let l=o;const u=ei(l,i.shape.length);let c=i;u!=null&&(c=So({inputs:{x:i},backend:n,attrs:{perm:u}}),l=yi(l.length,i.shape.length)),Ws("any",l,c.shape.length);const[f,d]=ds(c.shape,l),h=we(d),m=Bs(we(f),c.dtype),g=n.data.get(c.dataId).values;for(let x=0;x<m.length;++x){const w=x*h;let C=g[w];for(let S=0;S<h;++S){const E=g[w+S];C=C||E}m[x]=C}u!=null&&n.disposeIntermediateTensorInfo(c);const b=n.makeTensorInfo(f,c.dtype,m);if(a){const x=gi(f,o),w=Nr({inputs:{x:b},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(b),w}return b}const tot={kernelName:X6,backendName:"cpu",kernelFunc:eot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function not(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;ft(i,"argMax");let a=rn(s,i.shape);const o=ei(a,i.shape.length);let l=i;const u=[];o!=null&&(l=So({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=yi(a.length,l.shape.length)),a=[a[0]],Ws("argMax",a,l.shape.length);const[c,f]=ds(l.shape,a),d=we(c),h=Bs(d,"int32"),m=we(f),g=n.data.get(l.dataId).values;for(let b=0;b<h.length;++b){const x=b*m;let w=g[x],C=0;for(let S=0;S<m;++S){const E=g[x+S];E>w&&(w=E,C=S)}h[b]=C}return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(c,"int32",h)}const rot={kernelName:Wk,backendName:"cpu",kernelFunc:not};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;ft(i,"argMin");let a=rn(s,i.shape);const o=ei(a,i.shape.length);let l=i;const u=[];o!=null&&(l=So({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=yi(a.length,l.shape.length)),a=[a[0]],Ws("argMin",a,l.shape.length);const[c,f]=ds(l.shape,a),d=we(c),h=Bs(d,"int32"),m=we(f),g=n.data.get(l.dataId).values;for(let b=0;b<h.length;++b){const x=b*m;let w=g[x],C=0;for(let S=0;S<m;++S){const E=g[x+S];E<w&&(w=E,C=S)}h[b]=C}return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(c,"int32",h)}const sot={kernelName:Hk,backendName:"cpu",kernelFunc:iot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aot=er(Bv,e=>Math.asin(e)),oot={kernelName:Bv,backendName:"cpu",kernelFunc:aot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lot=er(zv,e=>Math.asinh(e)),uot={kernelName:zv,backendName:"cpu",kernelFunc:lot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cot=er(jv,e=>Math.atan(e)),fot={kernelName:jv,backendName:"cpu",kernelFunc:cot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dot=xi((e,t)=>Math.atan2(e,t)),hot=Yi(Vv,dot),pot={kernelName:Vv,backendName:"cpu",kernelFunc:hot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mot=er(Uv,e=>Math.atanh(e)),got={kernelName:Uv,backendName:"cpu",kernelFunc:mot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HK(e,t,n,r,i,s){const a=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=i.padInfo.top,h=i.padInfo.left,m=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Zt(i.outShape,n),b=g.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3],w=i.outShape[2]*i.outShape[3],C=i.outShape[3];for(let S=0;S<i.batchSize;++S){const E=S*x,A=S*r[0];for(let k=0;k<i.inChannels;++k)for(let N=0;N<i.outHeight;++N){const I=N*a-d,T=Math.max(0,I),D=Math.min(i.inHeight,c+I),L=E+N*w;for(let P=0;P<i.outWidth;++P){const M=P*o-h,F=Math.max(0,M),R=Math.min(i.inWidth,f+M);let j=m,H=0,G=0;for(let Y=T;Y<D;Y+=l){const Z=A+Y*r[1];for(let Q=F;Q<R;Q+=u){const se=Z+Q*r[2],re=e[se+k];s==="max"&&re>j?j=re:s==="avg"&&(H+=re,G++)}if(isNaN(j))break}const z=L+P*C+k;b[z]=s==="avg"?H/G:j}}}return g}function X3e(e,t,n,r,i=!1,s=!1){const a=Zt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left,g=Zt(t,n,e);for(let b=0;b<r.batchSize;++b)for(let x=0;x<r.inChannels;++x)for(let w=0;w<r.outHeight;++w){const C=w*o-h;let S=C;for(;S<0;)S+=u;const E=Math.min(r.inHeight,f+C);for(let A=0;A<r.outWidth;++A){const k=A*l-m;let N=k;for(;N<0;)N+=c;const I=Math.min(r.inWidth,d+k);let T=Number.NEGATIVE_INFINITY,D=-1;for(let L=S;L<E;L+=u){const P=L-C;for(let M=N;M<I;M+=c){const F=M-k,R=g.get(b,L,M,x);R>T&&(T=R,i?D=s?((b*r.inHeight+L)*r.inWidth+M)*r.inChannels+x:(L*r.inWidth+M)*r.inChannels+x:D=P*d+F)}}a.set(D,b,w,A,x)}}return a}function Y3e(e,t,n,r,i,s){const a=i.strideDepth,o=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,f=i.dilationWidth,d=i.effectiveFilterDepth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=i.padInfo.front,b=i.padInfo.top,x=i.padInfo.left,w=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=Zt(i.outShape,n),S=C.values,E=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],A=i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[3]*i.outShape[4],N=i.outShape[4];for(let I=0;I<i.batchSize;++I){const T=I*E,D=I*r[0];for(let L=0;L<i.inChannels;++L)for(let P=0;P<i.outDepth;++P){const M=P*a-g;let F=M;for(;F<0;)F+=u;const R=Math.min(i.inDepth,d+M),j=T+P*A;for(let H=0;H<i.outHeight;++H){const G=H*o-b;let z=G;for(;z<0;)z+=c;const Y=Math.min(i.inHeight,h+G),Z=j+H*k;for(let Q=0;Q<i.outWidth;++Q){const se=Q*l-x;let re=se;for(;re<0;)re+=f;const de=Math.min(i.inWidth,m+se),Oe=Z+Q*N;let Le=w,me=0,xe=0;for(let ce=F;ce<R;ce+=u){const Xe=D+ce*r[1];for(let ze=z;ze<Y;ze+=c){const Je=Xe+ze*r[2];for(let at=re;at<de;at+=f){const et=Je+at*r[3],nt=e[et+L];if(s==="max"&&nt>Le?Le=nt:s==="avg"&&(me+=nt,xe++),isNaN(Le))break}if(isNaN(Le))break}if(isNaN(Le))break}const Ee=Oe+L;S[Ee]=s==="avg"?me/Math.max(xe,1):Le}}}}return C}function yot(e,t){const n=Zt(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,m=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let b=0;b<t.inChannels;++b)for(let x=0;x<t.outDepth;++x){const w=x*r-d;let C=w;for(;C<0;)C+=a;const S=Math.min(t.inDepth,u+w);for(let E=0;E<t.outHeight;++E){const A=E*i-h;let k=A;for(;k<0;)k+=o;const N=Math.min(t.inHeight,c+A);for(let I=0;I<t.outWidth;++I){const T=I*s-m;let D=T;for(;D<0;)D+=l;const L=Math.min(t.inWidth,f+T);let P=Number.NEGATIVE_INFINITY,M=-1;for(let F=C;F<S;F+=a){const R=F-w;for(let j=k;j<N;j+=o){const H=j-A;for(let G=D;G<L;G+=l){const z=G-T,Y=e.get(g,F,j,G,b);Y>=P&&(P=Y,M=R*c*f+H*c+z)}}}n.set(M,g,x,E,I,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;ft(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;q(Vs(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Pu(i.shape,s,a,u,o,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&dn(c.inShape,c.outShape))f=Kf({inputs:{x:i},backend:n});else{const d=n.data.get(i.dataId).values,h=Ct(i.shape),m=HK(d,i.shape,i.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,i.dtype,m.values)}return f}const xot={kernelName:Gk,backendName:"cpu",kernelFunc:bot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r;ft(i,"avgPool3d");const c=ip(i.shape,s,a,1,o,l,u),f=n.data.get(i.dataId).values,d=Y3e(f,i.shape,i.dtype,Ct(i.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const wot={kernelName:qk,backendName:"cpu",kernelFunc:vot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sot(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,{filterSize:a,strides:o,pad:l,dimRoundingMode:u}=r;ft([i,s],"avgPool3DGrad");const c=ip(s.shape,a,o,1,l,u),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,m=c.filterDepth,g=c.filterHeight,b=c.filterWidth,x=c.dilationDepth,w=c.dilationHeight,C=c.dilationWidth,S=c.effectiveFilterDepth,E=c.effectiveFilterHeight,A=c.effectiveFilterWidth,k=S-1-c.padInfo.front,N=A-1-c.padInfo.left,I=E-1-c.padInfo.top,T=Zt(s.shape,"float32"),D=1/(m*g*b),L=n.bufferSync(i);for(let P=0;P<c.batchSize;++P)for(let M=0;M<c.inChannels;++M)for(let F=0;F<c.inDepth;++F)for(let R=0;R<c.inHeight;++R)for(let j=0;j<c.inWidth;++j){const H=F-k,G=R-I,z=j-N;let Y=0;for(let Z=0;Z<S;Z+=x){const Q=(H+Z)/f;if(!(Q<0||Q>=c.outDepth||Math.floor(Q)!==Q))for(let se=0;se<E;se+=w){const re=(G+se)/d;if(!(re<0||re>=c.outHeight||Math.floor(re)!==re))for(let de=0;de<A;de+=C){const Oe=(z+de)/h;if(Oe<0||Oe>=c.outWidth||Math.floor(Oe)!==Oe)continue;const Le=L.get(P,Q,re,Oe,M);Y+=Le}}}T.set(Y*D,P,F,R,j,M)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const Cot={kernelName:K6,backendName:"cpu",kernelFunc:Sot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ot(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s;ft([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=Pu(a.shape,o,l,1,u),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,m=c.filterWidth,g=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,C=w-1-c.padInfo.left,S=x-1-c.padInfo.top,E=Zt(a.shape,"float32"),A=1/(h*m),k=n.data.get(i.dataId).values,N=Zt(i.shape,"float32",k);for(let I=0;I<c.batchSize;++I)for(let T=0;T<c.inChannels;++T)for(let D=0;D<c.inHeight;++D)for(let L=0;L<c.inWidth;++L){const P=D-S,M=L-C;let F=0;for(let R=0;R<x;R+=g){const j=(P+R)/f;if(!(j<0||j>=c.outHeight||Math.floor(j)!==j))for(let H=0;H<w;H+=b){const G=(M+H)/d;if(G<0||G>=c.outWidth||Math.floor(G)!==G)continue;const z=N.get(I,j,G,T);F+=z}}E.set(F*A,I,D,L,T)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Eot={kernelName:Y6,backendName:"cpu",kernelFunc:$ot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:s,offset:a,mean:o,variance:l}=t;q(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),ft([i,o,l,s,a],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(i.dataId).values,f=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),m=a?n.data.get(a.dataId).values:new Float32Array([0]),g=new Float32Array(c.length),b=m.length,x=h.length,w=d.length,C=f.length;let S=0,E=0,A=0,k=0;for(let N=0;N<c.length;++N)g[N]=m[S++]+(c[N]-f[E++])*h[A++]/Math.sqrt(d[k++]+u),S>=b&&(S=0),E>=C&&(E=0),A>=x&&(A=0),k>=w&&(k=0);return n.makeTensorInfo(i.shape,i.dtype,g)}const Aot={kernelName:oA,backendName:"cpu",kernelFunc:kot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,crops:a}=r;ft([i],"batchToSpaceND");const o=s.reduce((x,w)=>x*w),l=d_(i.shape,s,o),u=h_(l.length,s.length),c=p_(i.shape,s,o),f=qY(a,s.length),d=XY(c,a,s.length),h=Nr({inputs:{x:i},backend:n,attrs:{shape:l}}),m=So({inputs:{x:h},backend:n,attrs:{perm:u}}),g=Nr({inputs:{x:m},backend:n,attrs:{shape:c}}),b=wy({inputs:{x:g},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}const Tot={kernelName:Yk,backendName:"cpu",kernelFunc:_ot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Not(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=zK(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,u)}const Dot={kernelName:Z6,backendName:"cpu",kernelFunc:Not};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iot(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,o=Gt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const Oot={kernelName:Q6,backendName:"cpu",kernelFunc:Iot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rot=er(Gv,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),Fot={kernelName:Gv,backendName:"cpu",kernelFunc:Rot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mot=e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(we(t.shape)),i=n.data.get(t.dataId),s=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<o.length;u++){const c=o[u],f=l[u];r[u]=Math.hypot(c,f)}return n.makeOutput(r,t.shape,"float32")},Lot={kernelName:Zk,backendName:"cpu",kernelFunc:Mot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fx(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const Pot={kernelName:bF,backendName:"cpu",kernelFunc:Fx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mx(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,s=rn(i,t[0].shape)[0],a=t.map(g=>g.shape);WY(a,s);let o=Rf(t.map(g=>g.shape),s);if(we(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(g=>we(g.shape)>0);if(l.length===1)return Kf({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const g=l.map(S=>vy({inputs:{input:S},backend:n})),b=l.map(S=>Fx({inputs:{input:S},backend:n})),x=Mx({inputs:g,backend:n,attrs:{axis:s}}),w=Mx({inputs:b,backend:n,attrs:{axis:s}}),C=Wo({inputs:{real:x,imag:w},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),b.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),C}const u=l.map(g=>{const x=[-1,we(g.shape.slice(s))];return Nr({inputs:{x:g},backend:n,attrs:{shape:x}})}),c=u.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));o=Rf(u.map(g=>g.shape),1);const f=u[0].shape[0]===1,d=e3e(c,o,t[0].dtype,f),h=Rf(l.map(g=>g.shape),s),m=n.makeTensorInfo(h,t[0].dtype,d);return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const Bot={kernelName:Qk,backendName:"cpu",kernelFunc:Mx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r;ft([i,s],"conv2d");const f=sp(l),d=fs(i.shape,s.shape,a,u,o,c,!1,f),h=d.filterHeight,m=d.filterWidth,g=d.dilationHeight,b=d.dilationWidth,x=d.padInfo.left,w=d.padInfo.top,C=d.dataFormat==="channelsLast",S=new Ni(d.outShape,i.dtype),E=Ct(i.shape),A=Ct(s.shape),k=E[0],N=C?E[1]:E[2],I=C?E[2]:1,T=C?1:E[1],D=S.strides[0],L=C?S.strides[1]:S.strides[2],P=C?S.strides[2]:1,M=C?1:S.strides[1],F=n.data.get(i.dataId).values,R=n.data.get(s.dataId).values,j=S.values;for(let H=0;H<d.batchSize;++H){const G=H*k,z=H*D;for(let Y=0;Y<d.outHeight;++Y){const Z=z+Y*L,Q=Y*d.strideHeight-w;for(let se=0;se<h;++se){const re=Q+se*g;if(re<0||re>=d.inHeight)continue;const de=se*A[0],Oe=G+re*N;for(let Le=0;Le<d.outWidth;++Le){const me=Z+Le*P,xe=Le*d.strideWidth-x;for(let Ee=0;Ee<m;++Ee){const ce=xe+Ee*b;if(ce<0||ce>=d.inWidth)continue;const Xe=de+Ee*A[1],ze=Oe+ce*I;let Je=Xe;for(let at=0;at<d.inChannels;++at){const et=F[ze+at*T];for(let nt=0;nt<d.outChannels;++nt)j[me+nt*M]+=et*R[Je+nt];Je+=d.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,j)}const zot={kernelName:Jk,backendName:"cpu",kernelFunc:K3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;ft([i,s],"conv2dBackpropFilter");const f=sp(l),d=fs(i.shape,c,a,1,o,u,!1,f),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:b}=d,x=d.dataFormat==="channelsLast",w=new Ni(d.filterShape,"float32"),C=d.padInfo.left,S=d.padInfo.top,E=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,k=new Ni(i.shape,i.dtype,E),N=new Ni(s.shape,s.dtype,A);for(let I=0;I<g;++I){const T=Math.max(0,Math.ceil((S-I)/h)),D=Math.min(d.outHeight,(d.inHeight+S-I)/h);for(let L=0;L<b;++L){const P=Math.max(0,Math.ceil((C-L)/m)),M=Math.min(d.outWidth,(d.inWidth+C-L)/m);for(let F=0;F<d.inChannels;++F)for(let R=0;R<d.outChannels;++R){let j=0;for(let H=0;H<d.batchSize;++H)for(let G=T;G<D;++G){const z=I+G*h-S;for(let Y=P;Y<M;++Y){const Z=L+Y*m-C;x?j+=k.get(H,z,Z,F)*N.get(H,G,Y,R):j+=k.get(H,F,z,Z)*N.get(H,R,G,Y)}}w.set(j,I,L,F,R)}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const Uot={kernelName:eF,backendName:"cpu",kernelFunc:jot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vot(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{inputShape:a,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r;ft([i,s],"conv2dBackpropInput");const f=Ct(s.shape),d=Ct(i.shape);let h=sp(u);const m=fs(a,s.shape,o,1,l,c,!1,h),g=new Ni(m.inShape,"float32"),b=g.values,x=n.data.get(i.dataId).values,w=n.data.get(s.dataId).values,[C,S,E]=f,{batchSize:A,filterHeight:k,filterWidth:N,inChannels:I,inHeight:T,inWidth:D,outChannels:L,outHeight:P,outWidth:M,strideHeight:F,strideWidth:R}=m;h=m.dataFormat;const j=k-1-m.padInfo.top,H=N-1-m.padInfo.left,G=h==="channelsLast",z=g.strides[0],Y=G?g.strides[1]:g.strides[2],Z=G?g.strides[2]:1,Q=G?1:g.strides[1],se=d[0],re=G?d[1]:d[2],de=G?d[2]:1,Oe=G?1:d[1];for(let Le=0;Le<A;++Le)for(let me=0;me<I;++me)for(let xe=0;xe<T;++xe){const Ee=xe-j,ce=Math.max(0,Math.ceil(Ee/F)),Xe=Math.min(P,(k+Ee)/F);for(let ze=0;ze<D;++ze){const Je=ze-H,at=Math.max(0,Math.ceil(Je/R)),et=Math.min(M,(N+Je)/R);let nt=0;for(let Yt=ce;Yt<Xe;++Yt){const sn=Yt*F-Ee;for(let it=at;it<et;++it){const fr=it*R-Je,an=se*Le+re*Yt+de*it,Fe=C*(k-1-sn)+S*(N-1-fr)+E*me;for(let Ue=0;Ue<L;++Ue){const Ne=x[an+Oe*Ue],wt=w[Fe+Ue];nt+=Ne*wt}}}const Yn=z*Le+Y*xe+Z*ze+Q*me;b[Yn]=nt}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Wot={kernelName:eA,backendName:"cpu",kernelFunc:Vot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:l}=r;ft([i,s],"conv3d");const u=Om(i.shape,s.shape,a,l,o),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:b}=u,x=b.front,w=b.left,C=b.top,S=new Ni(u.outShape,i.dtype),E=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,k=S.values,N=Ct(i.shape),I=Ct(s.shape);for(let T=0;T<u.batchSize;++T){const D=T*N[0],L=T*S.strides[0];for(let P=0;P<u.outDepth;++P){const M=L+P*S.strides[1],F=P*u.strideDepth-x;for(let R=0;R<c;++R){const j=F+R*h;if(j<0||j>=u.inDepth)continue;const H=R*I[0],G=D+j*N[1];for(let z=0;z<u.outHeight;++z){const Y=M+z*S.strides[2],Z=z*u.strideHeight-C;for(let Q=0;Q<f;++Q){const se=Z+Q*m;if(se<0||se>=u.inHeight)continue;const re=H+Q*I[1],de=G+se*N[2];for(let Oe=0;Oe<u.outWidth;++Oe){const Le=Y+Oe*u.outChannels,me=Oe*u.strideWidth-w;for(let xe=0;xe<d;++xe){const Ee=me+xe*g;if(Ee<0||Ee>=u.inWidth)continue;const ce=re+xe*I[2],Xe=de+Ee*u.inChannels;let ze=ce;for(let Je=0;Je<u.inChannels;++Je){const at=E[Xe+Je];for(let et=0;et<u.outChannels;++et)k[Le+et]+=at*A[ze+et];ze+=u.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Got={kernelName:tA,backendName:"cpu",kernelFunc:Hot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,filterShape:l}=r;ft([i,s],"conv3dBackpropFilterV2");const u=Ct(i.shape),c=Ct(s.shape),f=Om(i.shape,l,a,1,o),d=f.strideDepth,h=f.strideHeight,m=f.strideWidth,g=f.filterDepth,b=f.filterHeight,x=f.filterWidth,w=new Ni(f.filterShape,"float32"),C=w.values,[S,E,A,k]=w.strides,N=n.data.get(s.dataId).values,[I,T,D,L]=c,P=n.data.get(i.dataId).values,[M,F,R,j]=u,H=f.padInfo.front,G=f.padInfo.left,z=f.padInfo.top;for(let Y=0;Y<g;++Y){const Z=Math.max(0,Math.ceil((H-Y)/d)),Q=Math.min(f.outDepth,(f.inDepth+H-Y)/d),se=Y*S;for(let re=0;re<b;++re){const de=Math.max(0,Math.ceil((z-re)/h)),Oe=Math.min(f.outHeight,(f.inHeight+z-re)/h),Le=re*E+se;for(let me=0;me<x;++me){const xe=Math.max(0,Math.ceil((G-me)/m)),Ee=Math.min(f.outWidth,(f.inWidth+G-me)/m),ce=me*A+Le;for(let Xe=0;Xe<f.inChannels;++Xe){const ze=Xe*k+ce;for(let Je=0;Je<f.outChannels;++Je){let at=0;for(let et=0;et<f.batchSize;++et){const nt=et*M,Yn=et*I;for(let Yt=Z;Yt<Q;++Yt){const it=(Y+Yt*d-H)*F+nt,fr=Yt*T+Yn;for(let an=de;an<Oe;++an){const Ue=(re+an*h-z)*R+it,Ne=an*D+fr;for(let wt=xe;wt<Ee;++wt){const pt=(me+wt*m-G)*j+Ue,Lt=wt*L+Ne;at+=P[pt+Xe]*N[Lt+Je]}}}}C[ze+Je]=at}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const Xot={kernelName:tF,backendName:"cpu",kernelFunc:qot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yot(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{pad:a,strides:o,inputShape:l}=r;ft([i],"conv3dBackpropInputV2");const u=Ct(i.shape),c=Ct(s.shape),f=Om(l,s.shape,o,1,a),d=new Ni(f.inShape,"float32"),h=d.values,[m,g,b,x]=d.strides,w=n.data.get(i.dataId).values,[C,S,E,A]=u,k=n.data.get(s.dataId).values,[N,I,T,D]=c,{batchSize:L,filterDepth:P,filterHeight:M,filterWidth:F,inChannels:R,inDepth:j,inHeight:H,inWidth:G,outChannels:z,outDepth:Y,outHeight:Z,outWidth:Q,strideDepth:se,strideHeight:re,strideWidth:de}=f,Oe=P-1-f.padInfo.front,Le=M-1-f.padInfo.top,me=F-1-f.padInfo.left;for(let xe=0;xe<L;++xe)for(let Ee=0;Ee<R;++Ee)for(let ce=0;ce<j;++ce){const Xe=ce-Oe,ze=Math.max(0,Math.ceil(Xe/se)),Je=Math.min(Y,(P+Xe)/se);for(let at=0;at<H;++at){const et=at-Le,nt=Math.max(0,Math.ceil(et/re)),Yn=Math.min(Z,(M+et)/re);for(let Yt=0;Yt<G;++Yt){const sn=Yt-me,it=Math.max(0,Math.ceil(sn/de)),fr=Math.min(Q,(F+sn)/de);let an=0;for(let Fe=ze;Fe<Je;++Fe){const Ue=Fe*se-Xe;for(let Ne=nt;Ne<Yn;++Ne){const wt=Ne*re-et;for(let At=it;At<fr;++At){const pt=At*de-sn,Lt=C*xe+S*Fe+E*Ne+A*At,dr=N*(P-1-Ue)+I*(M-1-wt)+T*(F-1-pt)+D*Ee;for(let vn=0;vn<z;++vn){const Wr=w[Lt+vn],ot=k[dr+vn];an+=Wr*ot}}}}h[m*xe+g*ce+b*at+x*Yt+Ee]=an}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const Kot={kernelName:nF,backendName:"cpu",kernelFunc:Yot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zot=er(qv,e=>Math.cos(e)),Qot={kernelName:qv,backendName:"cpu",kernelFunc:Zot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jot=er(Xv,e=>Math.cosh(e)),elt={kernelName:Xv,backendName:"cpu",kernelFunc:Jot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tlt(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:s,boxInd:a}=t,{cropSize:o,method:l,extrapolationValue:u}=r,[c,f,d,h]=i.shape,m=s.shape[0],[g,b]=o,x=Zt([m,g,b,h],"float32"),w=n.data.get(s.dataId).values,C=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,E=Ct(i.shape),A=Ct(x.shape);for(let k=0;k<m;k++){const N=k*4,I=w[N],T=w[N+1],D=w[N+2],L=w[N+3],P=C[k];if(P>=c)continue;const M=g>1?(D-I)*(f-1)/(g-1):0,F=b>1?(L-T)*(d-1)/(b-1):0;for(let R=0;R<g;R++){const j=g>1?I*(f-1)+R*M:.5*(I+D)*(f-1);if(j<0||j>f-1){for(let H=0;H<b;H++)for(let G=0;G<h;G++){const z=G+H*A[2]+R*A[1]+k*A[0];x.values[z]=u}continue}if(l==="bilinear"){const H=Math.floor(j),G=Math.ceil(j),z=j-H;for(let Y=0;Y<b;Y++){const Z=b>1?T*(d-1)+Y*F:.5*(T+L)*(d-1);if(Z<0||Z>d-1){for(let de=0;de<h;de++){const Oe=de+Y*A[2]+R*A[1]+k*A[0];x.values[Oe]=u}continue}const Q=Math.floor(Z),se=Math.ceil(Z),re=Z-Q;for(let de=0;de<h;de++){let Oe=de+Q*E[2]+H*E[1]+P*E[0];const Le=S[Oe];Oe=de+se*E[2]+H*E[1]+P*E[0];const me=S[Oe];Oe=de+Q*E[2]+G*E[1]+P*E[0];const xe=S[Oe];Oe=de+se*E[2]+G*E[1]+P*E[0];const Ee=S[Oe],ce=Le+(me-Le)*re,Xe=xe+(Ee-xe)*re;Oe=de+Y*A[2]+R*A[1]+k*A[0],x.values[Oe]=ce+(Xe-ce)*z}}}else for(let H=0;H<b;++H){const G=b>1?T*(d-1)+H*F:.5*(T+L)*(d-1);if(G<0||G>d-1){for(let Z=0;Z<h;Z++){const Q=Z+H*A[2]+R*A[1]+k*A[0];x.values[Q]=u}continue}const z=Math.round(G),Y=Math.round(j);for(let Z=0;Z<h;Z++){const Q=Z+z*E[2]+Y*E[1]+P*E[0],se=Z+H*A[2]+R*A[1]+k*A[0];x.values[se]=S[Q]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const nlt={kernelName:iF,backendName:"cpu",kernelFunc:tlt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rlt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:a,reverse:o}=r;ft(i,"cumprod");const l=ei([s],i.shape.length);let u=i;l!=null&&(u=So({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=yi(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=yo(u.dtype,"int32"),d=G6(we(u.shape),f),h=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],g=o?(x,w)=>x+m-w-1:(x,w)=>x+w;for(let x=0;x<h.length;x+=m)for(let w=0;w<m;w++){const C=g(x,w);if(w===0)d[C]=a?1:h[C];else{const S=g(x,w-1);d[C]=a?h[S]*d[S]:h[C]*d[S]}}const b=n.makeTensorInfo(u.shape,f,d);if(l!=null){const x=Rm(l),w=So({inputs:{x:b},backend:n,attrs:{perm:x}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),w}return b}const ilt={kernelName:rF,backendName:"cpu",kernelFunc:rlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:a,reverse:o}=r;ft(i,"cumsum");const l=ei([s],i.shape.length);let u=i;l!=null&&(u=So({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=yi(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const f=yo(u.dtype,"int32"),d=Bs(we(u.shape),f),h=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],g=o?(x,w)=>x+m-w-1:(x,w)=>x+w;for(let x=0;x<h.length;x+=m)for(let w=0;w<m;w++){const C=g(x,w);if(w===0)d[C]=a?0:h[C];else{const S=g(x,w-1);d[C]=a?h[S]+d[S]:h[C]+d[S]}}const b=n.makeTensorInfo(u.shape,f,d);if(l!=null){const x=Rm(l),w=So({inputs:{x:b},backend:n,attrs:{perm:x}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),w}return b}const alt={kernelName:nA,backendName:"cpu",kernelFunc:slt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function olt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=zK(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=ZCe(l,u,a,o);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const llt={kernelName:sF,backendName:"cpu",kernelFunc:olt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ult(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:s,dataFormat:a}=r;q(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],f=l*s,d=u*s,h=c/(s*s),m=n.data.get(i.dataId).values,g=new Float32Array(o*f*d*h);let b=0;for(let x=0;x<o;++x)for(let w=0;w<f;++w){const C=Math.floor(w/s),S=w%s;for(let E=0;E<d;++E){const A=Math.floor(E/s),k=E%s,N=(S*s+k)*h;for(let I=0;I<h;++I){const D=I+N+c*(A+u*(C+l*x));g[b++]=m[D]}}}return n.makeTensorInfo([o,f,d,h],i.dtype,g)}const clt={kernelName:aF,backendName:"cpu",kernelFunc:ult};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:l,dimRoundingMode:u}=r;ft([i,s],"depthwiseConv2DNative");const c=Ct(i.shape),f=Ct(s.shape);let d=l;d==null&&(d=[1,1]),q(Vs(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const h=fs(i.shape,s.shape,a,d,o,u,!0),{filterHeight:m,filterWidth:g,dilationHeight:b,dilationWidth:x,padInfo:w}=h,C=w.left,S=w.top,E=h.outChannels/h.inChannels,A=new Ni(h.outShape,i.dtype),k=n.data.get(i.dataId).values,N=n.data.get(s.dataId).values,I=A.values;for(let T=0;T<h.batchSize;++T){const D=T*c[0],L=T*A.strides[0];for(let P=0;P<h.outHeight;++P){const M=L+P*A.strides[1],F=P*h.strideHeight-S;for(let R=0;R<m;++R){const j=F+R*b;if(j<0||j>=h.inHeight)continue;const H=R*f[0],G=D+j*c[1];for(let z=0;z<h.outWidth;++z){const Y=M+z*A.strides[2],Z=z*h.strideWidth-C;for(let Q=0;Q<g;++Q){const se=Z+Q*x;if(se<0||se>=h.inWidth)continue;const re=H+Q*f[1],de=G+se*h.inChannels;let Oe=Y,Le=re;for(let me=0;me<h.inChannels;++me){const xe=k[de+me];for(let Ee=0;Ee<E;++Ee)I[Oe+Ee]+=xe*N[Le+Ee];Oe+=E,Le+=E}}}}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const flt={kernelName:rA,backendName:"cpu",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dlt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r;ft([i,s],"depthwiseConv2dNativeBackpropFilter");const f=fs(i.shape,c,a,o,l,u,!0),{strideHeight:d,strideWidth:h,filterHeight:m,filterWidth:g}=f,b=new Ni(f.filterShape,"float32"),x=f.padInfo.left,w=f.padInfo.top,C=f.outChannels/f.inChannels,S=n.data.get(i.dataId).values,E=new Ni(i.shape,i.dtype,S),A=n.data.get(s.dataId).values,k=new Ni(s.shape,s.dtype,A);for(let N=0;N<m;++N){const I=Math.max(0,Math.ceil((w-N)/d)),T=Math.min(f.outHeight,(f.inHeight+w-N)/d);for(let D=0;D<g;++D){const L=Math.max(0,Math.ceil((x-D)/h)),P=Math.min(f.outWidth,(f.inWidth+x-D)/h);for(let M=0;M<f.outChannels;++M){const F=Math.trunc(M/C),R=M%C;let j=0;for(let H=0;H<f.batchSize;++H)for(let G=I;G<T;++G){const z=N+G*d-w;for(let Y=L;Y<P;++Y){const Z=D+Y*h-x;j+=E.get(H,z,Z,F)*k.get(H,G,Y,M)}}b.set(j,N,D,F,R)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const hlt={kernelName:oF,backendName:"cpu",kernelFunc:dlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function plt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{strides:a,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r;ft([i,s],"depthwiseConv2DNativeBackpropInput");const f=Ct(i.shape),d=Ct(s.shape),h=fs(c,s.shape,a,o,l,u,!0),m=new Ni(h.inShape,"float32"),g=m.values,[b,x,w]=m.strides,C=n.data.get(i.dataId).values,[S,E,A]=f,k=n.data.get(s.dataId).values,[N,I,T]=d,{batchSize:D,filterHeight:L,filterWidth:P,inChannels:M,inHeight:F,inWidth:R,outChannels:j,outHeight:H,outWidth:G,strideHeight:z,strideWidth:Y}=h,Z=L-1-h.padInfo.top,Q=P-1-h.padInfo.left,se=j/M;for(let re=0;re<D;++re)for(let de=0;de<M;++de)for(let Oe=0;Oe<F;++Oe){const Le=Oe-Z,me=Math.max(0,Math.ceil(Le/z)),xe=Math.min(H,(L+Le)/z);for(let Ee=0;Ee<R;++Ee){const ce=Ee-Q,Xe=Math.max(0,Math.ceil(ce/Y)),ze=Math.min(G,(P+ce)/Y);let Je=0;for(let at=me;at<xe;++at){const et=at*z-Le;for(let nt=Xe;nt<ze;++nt){const Yn=nt*Y-ce,Yt=S*re+E*at+A*nt,sn=N*(L-1-et)+I*(P-1-Yn)+T*de;for(let it=0;it<se;++it){const fr=de*se+it,an=C[Yt+fr],Fe=k[sn+it];Je+=an*Fe}}}g[b*re+x*Oe+w*Ee+de]=Je}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const mlt={kernelName:lF,backendName:"cpu",kernelFunc:plt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function glt(e){const{inputs:t,backend:n}=e,{x:r}=t,i=we(r.shape),s=n.data.get(r.dataId).values,a=Zt([i,i],r.dtype),o=a.values;for(let u=0;u<s.length;u++)o[u*i+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const ylt={kernelName:uF,backendName:"cpu",kernelFunc:glt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const blt={kernelName:iA,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i}=e,{strides:s,pad:a,dilations:o}=n,l=t,u=l.data.get(r.dataId).values,c=r.shape.length,f=l.data.get(i.dataId).values,d=i.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:b,outHeight:x,outWidth:w,padInfo:C,strideHeight:S,strideWidth:E,filterHeight:A,filterWidth:k,dilationHeight:N,dilationWidth:I,outShape:T}=qA(r.shape,i.shape,s,a,"NHWC",o),D=we(T),L=T.length,P=ri(r.dtype,D);for(let F=0;F<h;++F)for(let R=0;R<x;++R){const j=R*S-C.top;for(let H=0;H<w;++H){const G=H*E-C.left;for(let z=0;z<b;++z){let Y=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<A;++Q){const se=j+Q*N;if(se>=0&&se<m)for(let re=0;re<k;++re){const de=G+re*I;if(de>=0&&de<g){const Oe=pc([F,se,de,z],c,Ct(r.shape)),Le=pc([Q,re,z],d,Ct(i.shape)),me=u[Oe]+f[Le];me>Y&&(Y=me)}}}const Z=pc([F,R,H,z],L,Ct(T));P[Z]=Y}}}return{dataId:l.write(Dm(P,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xlt={kernelName:zO,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:s}=e,{strides:a,pad:o,dilations:l}=n,u=t,c=Ol(r.shape,u.data.get(r.dataId).values),f=Ol(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:g,outHeight:b,outWidth:x,padInfo:w,strideHeight:C,strideWidth:S,filterHeight:E,filterWidth:A,dilationHeight:k,dilationWidth:N,outShape:I}=qA(r.shape,i.shape,a,o,"NHWC",l);q(s.rank===I.length,()=>`Error in ${zO}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);const T=Ol(I,u.data.get(s.dataId).values),D=dX(i.shape,i.dtype);for(let P=0;P<d;++P)for(let M=0;M<b;++M){const F=M*C-w.top;for(let R=0;R<x;++R){const j=R*S-w.left;for(let H=0;H<g;++H){let G=Number.MIN_SAFE_INTEGER,z=0,Y=0;for(let Z=0;Z<E;++Z){const Q=F+Z*k;if(Q>=0&&Q<h)for(let se=0;se<A;++se){const re=j+se*N;if(re>=0&&re<m){const de=c[P][Q][re][H]+f[Z][se][H];de>G&&(G=de,z=Z,Y=se)}}}D[z][Y][H]+=T[P][M][R][H]}}}return{dataId:u.write(Dm(D,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vlt={kernelName:BO,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:s}=e,{strides:a,pad:o,dilations:l}=n,u=t,c=Ol(r.shape,u.data.get(r.dataId).values),f=Ol(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:g,outHeight:b,outWidth:x,padInfo:w,strideHeight:C,strideWidth:S,filterHeight:E,filterWidth:A,dilationHeight:k,dilationWidth:N,outShape:I}=qA(r.shape,i.shape,a,o,"NHWC",l);q(s.rank===I.length,()=>`Error in ${BO}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);const T=Ol(I,u.data.get(s.dataId).values),D=dX(r.shape,r.dtype);for(let P=0;P<d;++P)for(let M=0;M<b;++M){const F=M*C-w.top;for(let R=0;R<x;++R){const j=R*S-w.left;for(let H=0;H<g;++H){let G=Number.MIN_SAFE_INTEGER,z=F<0?0:F,Y=j<0?0:j;for(let Z=0;Z<E;++Z){const Q=F+Z*k;if(Q>=0&&Q<h)for(let se=0;se<A;++se){const re=j+se*N;if(re>=0&&re<m){const de=c[P][Q][re][H]+f[Z][se][H];de>G&&(G=de,z=Q,Y=re)}}}D[P][z][Y][H]+=T[P][M][R][H]}}}return{dataId:u.write(Dm(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wlt(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:s,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},u=(l==null?void 0:l.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const f=s.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[d,h]=i.shape.slice(0,2),m=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,b=i.dtype==="float32"?255:1,x=new Uint8ClampedArray(h*d*4);for(let C=0;C<d*h;++C){const S=[0,0,0,255*u];for(let A=0;A<m;A++){const k=g[C*m+A];if(i.dtype==="float32"){if(k<0||k>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${k}.`)}else if(i.dtype==="int32"&&(k<0||k>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${k}.`);m===1?(S[0]=k*b,S[1]=k*b,S[2]=k*b):S[A]=k*b}const E=C*4;x[E+0]=Math.round(S[0]),x[E+1]=Math.round(S[1]),x[E+2]=Math.round(S[2]),x[E+3]=Math.round(S[3])}s.width=h,s.height=d;const w=new ImageData(x,h,d);return f.putImageData(w,0,0),i}const Slt={kernelName:cF,backendName:"cpu",kernelFunc:wlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r;ft(i,"sum");let o;i.dtype==="bool"?o=om({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=Kf({inputs:{x:i},backend:n});const l=o.shape.length,u=rn(s,o.shape),c=ei(u,l);let f=u,d=o;c!=null&&(d=So({inputs:{x:o},backend:n,attrs:{perm:c}}),f=yi(f.length,l)),Ws("sum",f,d.shape.length);const[h,m]=ds(d.shape,f),g=yo(d.dtype,"int32");let b=iR(n,h,g);const x=we(m),w=n.data.get(b.dataId).values,C=n.data.get(d.dataId).values;for(let S=0;S<w.length;++S){const E=S*x;let A=0;for(let k=0;k<x;++k)A+=C[E+k];w[S]=A}if(a){const S=gi(b.shape,u),E=b;b=Nr({inputs:{x:b},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(E)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(d),b}const Clt={kernelName:LA,backendName:"cpu",kernelFunc:S_};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $lt(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,s=t,{allDims:a,summedDims:o,idDims:l}=nK(i,s.length);iK(a.length,l,s);const{path:u,steps:c}=sK(o,l),f=c.length;let d=null,h=a.length;const m=[];for(let g=0;g<f;++g){for(const b of c[g]){const{permutationIndices:x,expandDims:w}=rK(h,l[b]);let C;aK(x)?C=s[b]:(C=So({inputs:{x:s[b]},backend:n,attrs:{perm:x}}),m.push(C));const S=C.shape.slice();for(let E=0;E<w.length;++E)S.splice(w[E],0,1);dn(C.shape,S)||(C=Nr({inputs:{x:C},backend:n,attrs:{shape:S}}),m.push(C)),d===null?d=C:(d=JM({inputs:{a:C,b:d},backend:n}),m.push(d))}g<f-1&&(u[g]>=0&&(d=S_({inputs:{x:d},backend:n,attrs:{axis:u[g]-(a.length-h),keepDims:!1}}),m.push(d)),h--)}for(const g of m)g!==d&&n.disposeIntermediateTensorInfo(g);return d}const Elt={kernelName:fF,backendName:"cpu",kernelFunc:$lt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function klt(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;ft([r,i],"eluGrad");const s=new Float32Array(we(i.shape)),a=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const u=a[l];u>=0?s[l]=o[l]:s[l]=o[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",s)}const Alt={kernelName:dF,backendName:"cpu",kernelFunc:klt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _lt=YY,Tlt=KY,Nlt=ZY,Dlt=QY,Ilt=JY,Olt=eK,Rlt=er(Zv,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+_lt*n);return t*(1-((((Olt*r+Ilt)*r+Dlt)*r+Nlt)*r+Tlt)*r*Math.exp(-n*n))}),Flt={kernelName:Zv,backendName:"cpu",kernelFunc:Rlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oR(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:s}=r,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(q(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Nr({inputs:{x:i},backend:n,attrs:{shape:o}})}const Mlt={kernelName:aA,backendName:"cpu",kernelFunc:oR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Llt=xi((e,t)=>e/t),GK=Yi(Yv,Llt),DW={kernelName:Yv,backendName:"cpu",kernelFunc:GK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q3e(e,t,n){const r=e.shape,i=r[0],s=r[1],a=n.data.get(e.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[i,s],c=we(u),f=ls("float32",c),d=ls("float32",c);for(let b=0;b<i;b++){const x=wy({inputs:{x:o},backend:n,attrs:{begin:[b,0],size:[1,s]}}),w=wy({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,s]}}),C=Wo({inputs:{real:x,imag:w},backend:n}),{real:S,imag:E}=Plt(C,t,n),A=Gh(S,E);for(let k=0;k<s;k++){const N=tK(A,k);f[b*s+k]=N.real,d[b*s+k]=N.imag}n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(C)}const h=n.makeTensorInfo(u,"float32",f),m=n.makeTensorInfo(u,"float32",d),g=Wo({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}function Plt(e,t,n){const r=we(e.shape),i=n.data.get(e.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(Blt(r)){const o=IW(s,a,r,t,n),l=[e.shape[0],e.shape[1]];if(t){const u=n.makeTensorInfo(l,"float32",o.real),c=n.makeTensorInfo(l,"float32",o.imag),f=n.makeTensorInfo([],"float32",rp(r,"float32")),d=Kf({inputs:{x:f},backend:n}),h=DW.kernelFunc({inputs:{a:u,b:f},backend:n}),m=DW.kernelFunc({inputs:{a:c,b:d},backend:n}),g=n.data.get(h.dataId).values,b=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:b}}return o}else{const o=Gh(s,a),l=zlt(o,r,t);return cwe(l)}}function Blt(e){return(e&e-1)===0}function IW(e,t,n,r,i){if(n===1)return{real:e,imag:t};const s=Gh(e,t),a=n/2,o=fwe(s),l=o.real,u=o.imag,c=[l.length],f=i.makeTensorInfo(c,"float32",l),d=i.makeTensorInfo(c,"float32",u),h=Wo({inputs:{real:f,imag:d},backend:i}),m=dwe(s),g=m.real,b=m.imag,x=[g.length],w=i.makeTensorInfo(x,"float32",g),C=i.makeTensorInfo(x,"float32",b),S=Wo({inputs:{real:w,imag:C},backend:i}),E=IW(l,u,a,r,i),A=E.real,k=E.imag,N=[A.length],I=i.makeTensorInfo(N,"float32",A),T=i.makeTensorInfo(N,"float32",k),D=Wo({inputs:{real:I,imag:T},backend:i}),L=IW(g,b,a,r,i),P=L.real,M=L.imag,F=[P.length],R=i.makeTensorInfo(F,"float32",P),j=i.makeTensorInfo(F,"float32",M),H=Wo({inputs:{real:R,imag:j},backend:i}),G=pwe(n,r),z=[G.real.length],Y=i.makeTensorInfo(z,"float32",G.real),Z=i.makeTensorInfo(z,"float32",G.imag),Q=Wo({inputs:{real:Y,imag:Z},backend:i}),se=JM({inputs:{a:Q,b:H},backend:i}),re=Rx({inputs:{a:D,b:se},backend:i}),de=WK({inputs:{a:D,b:se},backend:i}),Oe=vy({inputs:{input:re},backend:i}),Le=vy({inputs:{input:de},backend:i}),me=Fx({inputs:{input:re},backend:i}),xe=Fx({inputs:{input:de},backend:i}),Ee=Mx({inputs:[Oe,Le],backend:i,attrs:{axis:0}}),ce=Mx({inputs:[me,xe],backend:i,attrs:{axis:0}}),Xe=i.data.get(Ee.dataId).values,ze=i.data.get(ce.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(de),i.disposeIntermediateTensorInfo(Oe),i.disposeIntermediateTensorInfo(me),i.disposeIntermediateTensorInfo(Le),i.disposeIntermediateTensorInfo(xe),i.disposeIntermediateTensorInfo(Ee),i.disposeIntermediateTensorInfo(ce),{real:Xe,imag:ze}}function zlt(e,t,n){const r=new Float32Array(t*2);for(let i=0;i<t;i++){let s=0,a=0;for(let o=0;o<t;o++){const l=mwe(i*o,t,n),u=tK(e,o);s+=u.real*l.real-u.imag*l.imag,a+=u.real*l.imag+u.imag*l.real}n&&(s/=t,a/=t),hwe(r,s,a,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jlt(e){const{inputs:t,backend:n}=e,{input:r}=t,i=we(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Nr({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=Q3e(o,!1,n),u=Nr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const Ult={kernelName:hF,backendName:"cpu",kernelFunc:jlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qK(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:s}=n,a=s||Gy(i),o=ri(a,we(r));return Wlt(o,i,a),t.makeTensorInfo(r,a,o)}const Vlt={kernelName:pF,backendName:"cpu",kernelFunc:qK};function Wlt(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hlt={kernelName:mF,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,i=n,s=ls(r.dtype,we(r.shape)),[a,o,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let d=0;d<a;d++){const h=d*l*o*u;for(let m=0;m<o;m++){const g=m*(l*u);for(let b=0;b<l;b++){const x=b*u;for(let w=0;w<u;w++){const C=Math.round(l-b-1),S=h+g+x+w;let E=c[S];if(C>=0&&C<l){const A=C*u,k=h+g+A+w;E=c[k]}s[S]=E}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Glt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:a,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let g=K3e({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d}});if(a){const b=g;if(c==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const x=Nr({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=Rx({inputs:{a:g,b:x},backend:n}),n.disposeIntermediateTensorInfo(x)}else g=Rx({inputs:{a:g,b:a},backend:n});n.disposeIntermediateTensorInfo(b)}if(h){const b=g;if(c==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const x=Nr({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=aR(n,g,h,x,m),n.disposeIntermediateTensorInfo(x)}else g=aR(n,g,h,o,m);n.disposeIntermediateTensorInfo(b)}return g}const qlt={kernelName:fE,backendName:"cpu",kernelFunc:Glt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xlt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:a,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let g=Z3e({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d}});if(a){const b=g;g=Rx({inputs:{a:g,b:a},backend:n}),n.disposeIntermediateTensorInfo(b)}if(h){const b=g;g=aR(n,g,h,o,m),n.disposeIntermediateTensorInfo(b)}return g}const Ylt={kernelName:dE,backendName:"cpu",kernelFunc:Xlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Klt(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,s=we(r.shape),a=i.shape,o=a[a.length-1],[l,u,c,f]=LM(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const d=n.data.get(i.dataId).values,h=n.bufferSync(r),m=l3e(d,h,r.dtype,u,o,c,f,r.shape,s);return n.makeTensorInfo(l,r.dtype,m.values)}const Zlt={kernelName:gF,backendName:"cpu",kernelFunc:Klt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qlt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:s}=t,{axis:a,batchDims:o}=r;ft([i,s],"gatherV2");const l=rn(a,i.shape)[0],u=n.data.get(s.dataId).values,c=i.shape[l];for(let S=0;S<u.length;++S){const E=u[S];q(E<=c-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${c-1}]`)}let f=o;o==null&&(f=0);const d=we(s.shape),h=lK(i,s,l,f),m=Nr({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=Nr({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),b=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],x=n.bufferSync(g),w=n.bufferSync(m),C=u3e(w,x,b);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,C.dtype,C.values)}const Jlt={kernelName:lA,backendName:"cpu",kernelFunc:Qlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eut(e){const{inputs:t,backend:n}=e,{input:r}=t,i=we(r.shape),s=r.shape[r.shape.length-1],a=i/s,o=Nr({inputs:{x:r},backend:n,attrs:{shape:[a,s]}}),l=Q3e(o,!0,n),u=Nr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const tut={kernelName:yF,backendName:"cpu",kernelFunc:eut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nut=er(iw,e=>Number.isFinite(e)?1:0,"bool"),rut={kernelName:iw,backendName:"cpu",kernelFunc:nut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iut=er(sw,e=>Math.abs(e)===1/0?1:0,"bool"),sut={kernelName:sw,backendName:"cpu",kernelFunc:iut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aut=er(aw,e=>Number.isNaN(e)?1:0,"bool"),out={kernelName:aw,backendName:"cpu",kernelFunc:aut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lut(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:s}=n,a=p3e(r,i,s);return t.makeTensorInfo([a.length],"float32",a)}const uut={kernelName:xF,backendName:"cpu",kernelFunc:lut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cut=er(lw,e=>Math.log1p(e)),fut={kernelName:lw,backendName:"cpu",kernelFunc:cut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dut=xi((e,t)=>e&&t),hut=Yi(hA,dut,null,"bool"),put={kernelName:hA,backendName:"cpu",kernelFunc:hut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mut=er(pA,e=>e?0:1,"bool"),gut={kernelName:pA,backendName:"cpu",kernelFunc:mut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yut=xi((e,t)=>e||t),but=Yi(mA,yut,null,"bool"),xut={kernelName:mA,backendName:"cpu",kernelFunc:but};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vut(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:s,bias:a,alpha:o,beta:l}=r;ft(i,"LRN");const u=i.shape[3],c=u-1,f=n.data.get(i.dataId).values,d=we(i.shape),h=new Float32Array(d);function m(g){const b=g%u;let x=g-b+Math.max(0,b-s);const w=g-b+Math.min(b+s,c);let C=0;for(;x<=w;x++){const S=f[x];C+=S*S}return C}for(let g=0;g<d;g++){const b=m(g),x=f[g]*Math.pow(a+o*b,-l);h[g]=x}return n.makeTensorInfo(i.shape,i.dtype,h)}const wut={kernelName:gA,backendName:"cpu",kernelFunc:vut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sut(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:s,dy:a}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=r;ft(a,"LRNGrad");const f=we(a.shape),d=a.shape[3],h=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,b=new Float32Array(f),x=f;for(let w=0;w<x;w++){const C=w%d,S=w-C+Math.max(0,C-o),E=w-C+Math.min(d,C+o+1);let A=0;for(let k=S;k<E;k++)A+=Math.pow(m[k],2);A=u*A+l;for(let k=S;k<E;k++){let N=-2*u*c*m[k]*g[w]/A;w===k&&(N+=Math.pow(A,-c)),N*=h[w],b[k]+=N}}return n.makeTensorInfo(a.shape,i.dtype,b)}const Cut={kernelName:vF,backendName:"cpu",kernelFunc:Sut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:s,keepDims:a}=r,o=n;let l=i.shape;const u=l.length,c=rn(s,l);let f=c;const d=ei(f,u);let h=o.data.get(i.dataId).values;if(d!=null){const S=new Array(u);for(let E=0;E<S.length;E++)S[E]=l[d[E]];h=UK(h,l,i.dtype,d,S),f=yi(f.length,u),l=S}ft(i,"max"),Ws("max",f,u);const[m,g]=ds(l,f),b=we(g),x=g3e(h,b,m,i.dtype),w=o.write(x,m,i.dtype);let C=m;return a&&(C=gi(m,c)),{dataId:w,shape:C,dtype:i.dtype}}const $ut={kernelName:yA,backendName:"cpu",kernelFunc:J3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eut(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;ft(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;q(Vs(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Pu(i.shape,s,a,u,o,l);let f;if(c.filterWidth===1&&c.filterHeight===1&&dn(c.inShape,c.outShape))f=Kf({inputs:{x:i},backend:n});else{const d=n.data.get(i.dataId).values,h=Ct(i.shape),m=HK(d,i.shape,i.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,i.dtype,m.values)}return f}const kut={kernelName:bA,backendName:"cpu",kernelFunc:Eut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aut(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r;ft(i,"maxPool3d");const c=ip(i.shape,s,a,1,o,l,u),f=n.data.get(i.dataId).values,d=Y3e(f,i.shape,i.dtype,Ct(i.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const _ut={kernelName:xA,backendName:"cpu",kernelFunc:Aut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tut(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,{filterSize:a,strides:o,pad:l,dimRoundingMode:u}=r;ft([i,s],"maxPool3DGrad");const c=ip(s.shape,a,o,1,l,u),f=n.bufferSync(s),d=yot(f,c),h=c.strideDepth,m=c.strideHeight,g=c.strideWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,C=c.effectiveFilterDepth,S=c.effectiveFilterHeight,E=c.effectiveFilterWidth,A=C-1-c.padInfo.front,k=E-1-c.padInfo.left,N=S-1-c.padInfo.top,I=Zt(s.shape,"float32"),T=n.bufferSync(i);for(let D=0;D<c.batchSize;++D)for(let L=0;L<c.inChannels;++L)for(let P=0;P<c.inDepth;++P)for(let M=0;M<c.inHeight;++M)for(let F=0;F<c.inWidth;++F){const R=P-A,j=M-N,H=F-k;let G=0;for(let z=0;z<C;z+=b){const Y=(R+z)/h;if(!(Y<0||Y>=c.outDepth||Math.floor(Y)!==Y))for(let Z=0;Z<S;Z+=x){const Q=(j+Z)/m;if(!(Q<0||Q>=c.outHeight||Math.floor(Q)!==Q))for(let se=0;se<E;se+=w){const re=(H+se)/g;if(re<0||re>=c.outWidth||Math.floor(re)!==re)continue;const de=C*S*E-1-d.get(D,Y,Q,re,L),Oe=z*S*E+Z*E+se,Le=de===Oe?1:0;if(Le===0)continue;const me=T.get(D,Y,Q,re,L);G+=me*Le}}}I.set(G,D,P,M,F,L)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const Nut={kernelName:SF,backendName:"cpu",kernelFunc:Tut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dut(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s,output:a}=t,o=s;ft([s,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=Pu(o.shape,l,u,1,c,f),h=n.data.get(o.dataId).values,m=Zt(d.outShape,o.dtype,X3e(h,o.shape,o.dtype,d).values),g=d.strideHeight,b=d.strideWidth,x=d.dilationHeight,w=d.dilationWidth,C=d.effectiveFilterHeight,S=d.effectiveFilterWidth,E=S-1-d.padInfo.left,A=C-1-d.padInfo.top,k=Zt(o.shape,"float32"),N=n.data.get(i.dataId).values,I=Zt(i.shape,"float32",N);for(let T=0;T<d.batchSize;++T)for(let D=0;D<d.inChannels;++D)for(let L=0;L<d.inHeight;++L)for(let P=0;P<d.inWidth;++P){const M=L-A,F=P-E;let R=0;for(let j=0;j<C;j+=x){const H=(M+j)/g;if(!(H<0||H>=d.outHeight||Math.floor(H)!==H))for(let G=0;G<S;G+=w){const z=(F+G)/b;if(z<0||z>=d.outWidth||Math.floor(z)!==z)continue;const Y=C*S-1-m.get(T,H,z,D),Z=j*S+G,Q=Y===Z?1:0;if(Q===0)continue;const se=I.get(T,H,z,D);R+=se*Q}}k.set(R,T,L,P,D)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Iut={kernelName:wF,backendName:"cpu",kernelFunc:Dut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Out(e,t,n,r,i){const s=Ct(t),a=HK(e,t,n,s,i,"max"),o=X3e(e,t,n,i,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rut={kernelName:CF,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=t,l=n;ft(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Pu(r.shape,i,s,[1,1],a),[f,d]=Out(u,r.shape,r.dtype,o,c),h=l.write(f,c.outShape,r.dtype),m=l.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fut(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r,o=rn(s,i.shape),u=ds(i.shape,o)[1],c=we(u),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=om({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(h);const m=GK({inputs:{a:h,b:d},backend:n});f.push(m);const g=S_({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:a}});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),g}const Mut={kernelName:vA,backendName:"cpu",kernelFunc:Fut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lut(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r;ft(i,"min");const o=rn(s,i.shape);let l=o;const u=ei(l,i.shape.length);let c=i;u!=null&&(c=So({inputs:{x:i},backend:n,attrs:{perm:u}}),l=yi(l.length,i.shape.length)),Ws("min",l,c.shape.length);const[f,d]=ds(c.shape,l),h=we(d),m=Bs(we(f),c.dtype),g=n.data.get(c.dataId).values;for(let x=0;x<m.length;++x){const w=x*h;let C=g[w];for(let S=0;S<h;++S){const E=g[w+S];(Number.isNaN(E)||E<C)&&(C=E)}m[x]=C}u!=null&&n.disposeIntermediateTensorInfo(c);const b=n.makeTensorInfo(f,c.dtype,m);if(a){const x=gi(f,o),w=Nr({inputs:{x:b},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(b),w}return b}const Put={kernelName:wA,backendName:"cpu",kernelFunc:Lut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function But(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,mode:a}=r;ft(i,"mirrorPad");const o=s.map((C,S)=>C[0]+i.shape[S]+C[1]),l=s.map(C=>C[0]),u=s.map((C,S)=>C[0]+i.shape[S]),c=a==="reflect"?0:1,f=n.data.get(i.dataId).values,d=i.shape.length,h=Ct(i.shape),m=we(o),g=o.length,b=Ct(o),x=ls(i.dtype,m);for(let C=0;C<m;C++){let S=qy(C,g,b);for(let A=0;A<g;A++)S[A]<l[A]?S[A]=l[A]*2-S[A]-c:S[A]>=u[A]&&(S[A]=(u[A]-1)*2-S[A]+c);S=S.map((A,k)=>A-l[k]);const E=pc(S,d,h);x[C]=f[E]}return{dataId:n.write(x,o,i.dtype),shape:o,dtype:i.dtype}}const zut={kernelName:SA,backendName:"cpu",kernelFunc:But};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jut=xi((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),Uut=Yi(fw,jut),Vut={kernelName:fw,backendName:"cpu",kernelFunc:Uut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:s}=r,a=i.shape.length;let o=s;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=rn([o],i.shape),u=J3e({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=gi(u.shape,l),f=Nr({inputs:{x:u},backend:n,attrs:{shape:c}}),d=WK({inputs:{a:i,b:f},backend:n}),h=i3e({inputs:{x:d},backend:n}),m=S_({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),g=Nr({inputs:{x:m},backend:n,attrs:{shape:c}}),b=GK({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}const Wut={kernelName:zA,backendName:"cpu",kernelFunc:e$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hut(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:s,seed:a,normalized:o}=r;ft(i,"multinomial");const l=o?i:e$e({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],f=n.data.get(l.dataId).values,d=[u,s],h=Bs(we(d),"int32");for(let m=0;m<u;++m){const g=m*c,b=new Float32Array(c-1);b[0]=f[g];for(let C=1;C<b.length;++C)b[C]=b[C-1]+f[g+C];const x=dM.alea(a.toString()),w=m*s;for(let C=0;C<s;++C){const S=x();h[w+C]=b.length;for(let E=0;E<b.length;E++)if(S<b[E]){h[w+C]=E;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}const Gut={kernelName:$F,backendName:"cpu",kernelFunc:Hut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qut=OM;function Xut(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;ft(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:f}=qut(u,c,a,o,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const Yut={kernelName:EF,backendName:"cpu",kernelFunc:Xut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kut=RM;function Zut(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;ft(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:h}=Kut(c,f,a,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const Qut={kernelName:kF,backendName:"cpu",kernelFunc:Zut};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jut=FM;function ect(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;ft(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=a,h=o,m=l,g=u,{selectedIndices:b,selectedScores:x}=Jut(c,f,d,h,m,g);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const tct={kernelName:AF,backendName:"cpu",kernelFunc:ect};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nct(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:s,depth:a,onValue:o,offValue:l}=r;ft(i,"oneHot");const u=we(i.shape),c=new Float32Array(u*a);c.fill(l);const f=n.data.get(i.dataId).values;for(let d=0;d<u;++d)f[d]>=0&&f[d]<a&&(c[d*a+f[d]]=o);return n.makeTensorInfo([...i.shape,a],s,c)}const rct={kernelName:kA,backendName:"cpu",kernelFunc:nct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lR(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=vy({inputs:{input:r},backend:n}),s=lR({inputs:{x:i},backend:n}),a=Fx({inputs:{input:r},backend:n}),o=lR({inputs:{x:a},backend:n}),l=Wo({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return qK({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const ict={kernelName:WA,backendName:"cpu",kernelFunc:lR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$e(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=vy({inputs:{input:r},backend:n}),s=t$e({inputs:{x:i},backend:n}),a=Fx({inputs:{input:r},backend:n}),o=lR({inputs:{x:a},backend:n}),l=Wo({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return qK({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const sct={kernelName:EA,backendName:"cpu",kernelFunc:t$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return oR({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const s=t[0].shape,a=t[0].dtype;t.forEach(c=>{Us(s,c.shape,"All tensors passed to stack must have matching shapes"),q(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(c=>{const f=oR({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(f),f}),u=Mx({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const act={kernelName:AA,backendName:"cpu",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oct(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,constantValue:a}=r;ft(i,"pad");const o=s.map((w,C)=>w[0]+i.shape[C]+w[1]),l=s.map(w=>w[0]),u=n.data.get(i.dataId).values,c=we(i.shape),f=i.shape.length,d=Ct(i.shape),h=we(o),m=o.length,g=Ct(o),b=ls(i.dtype,h);a!==0&&b.fill(a);for(let w=0;w<c;w++){const S=qy(w,f,d).map((A,k)=>A+l[k]),E=pc(S,m,g);b[E]=u[w]}return{dataId:n.write(b,o,i.dtype),shape:o,dtype:i.dtype}}const r$e={kernelName:_A,backendName:"cpu",kernelFunc:oct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lct=xi((e,t)=>Math.pow(e,t)),uct=Yi(hw,lct),cct={kernelName:hw,backendName:"cpu",kernelFunc:uct};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fct(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=t,{outputRaggedRank:o}=r,l=i.map(x=>n.data.get(x.dataId).values),u=i.map(x=>x.shape),c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,[d,h,m]=S3e(l,u,c,s.shape,s.dtype,f,a.shape),g=d.map(x=>n.makeTensorInfo([x.length],"int32",x)),b=n.makeTensorInfo(m,s.dtype,h);return g.concat([b])}const dct={kernelName:_F,backendName:"cpu",kernelFunc:fct};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hct(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:s}=t,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=C3e(a,r.shape,r.dtype,o,i.shape,l,s.shape),f=n.makeTensorInfo([u.length],"int32",u),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const pct={kernelName:TF,backendName:"cpu",kernelFunc:hct};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mct(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,d=o.map(b=>n.data.get(b.dataId).values),h=o.map(b=>b.shape),[m,g]=$3e(u,i.shape,c,s.shape,s.dtype,f,a.shape,d,h,l);return n.makeTensorInfo(m,s.dtype,g)}const gct={kernelName:NF,backendName:"cpu",kernelFunc:mct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yct(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:s,step:a}=n,o=E3e(r,i,a,s);return t.makeTensorInfo([o.length],s,o)}const bct={kernelName:DF,backendName:"cpu",kernelFunc:yct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xct=er(pw,e=>1/e),vct={kernelName:pw,backendName:"cpu",kernelFunc:xct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wct(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:a,size:o}=r;ft(i,"resizeBilinear");const l=Ct(i.shape),[u,c]=o,[f,d,h,m]=i.shape,g=n.data.get(i.dataId).values,b=new Float32Array(we([f,u,c,m])),x=[s&&u>1?d-1:d,s&&c>1?h-1:h],w=[s&&u>1?u-1:u,s&&c>1?c-1:c];let C=0;const S=x[0]/w[0],E=x[1]/w[1];for(let A=0;A<f;A++)for(let k=0;k<u;k++){let N;a?N=S*(k+.5)-.5:N=S*k;const I=Math.max(0,Math.floor(N)),T=N-I,D=Math.min(d-1,Math.ceil(N)),L=A*l[0]+I*l[1],P=A*l[0]+D*l[1];for(let M=0;M<c;M++){let F;a?F=E*(M+.5)-.5:F=E*M;const R=Math.max(0,Math.floor(F)),j=F-R,H=Math.min(h-1,Math.ceil(F)),G=L+R*l[2],z=P+R*l[2],Y=L+H*l[2],Z=P+H*l[2];for(let Q=0;Q<m;Q++){const se=g[G+Q],re=g[z+Q],de=g[Y+Q],Oe=g[Z+Q],Le=se+(de-se)*j,me=re+(Oe-re)*j,xe=Le+(me-Le)*T;b[C++]=xe}}}return n.makeTensorInfo([f,u,c,m],"float32",b)}const Sct={kernelName:OA,backendName:"cpu",kernelFunc:wct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cct(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:a}=r;ft([s,i],"resizeBilinearGrad");const o=Ct(i.shape),[l,u,c,f]=i.shape,[,d,h]=s.shape,m=new Float32Array(l*u*c*f),g=[a&&d>1?u-1:u,a&&h>1?c-1:c],b=[a&&d>1?d-1:d,a&&h>1?h-1:h],x=g[0]/b[0],w=g[1]/b[1],C=n.data.get(s.dataId).values;let S=0;for(let E=0;E<l;E++){const A=E*o[0];for(let k=0;k<d;k++){const N=k*x,I=Math.floor(N),T=Math.min(Math.ceil(N),u-1),D=A+I*o[1],L=A+T*o[1],P=N-I,M=1-P;for(let F=0;F<h;F++){const R=F*w,j=Math.floor(R),H=Math.min(Math.ceil(R),c-1),G=R-j,z=1-G,Y=D+j*o[2],Z=D+H*o[2],Q=L+j*o[2],se=L+H*o[2],re=M*z,de=M*G,Oe=P*z,Le=P*G;for(let me=0;me<f;me++){const xe=C[S++];m[Y+me]+=xe*re,m[Z+me]+=xe*de,m[Q+me]+=xe*Oe,m[se+me]+=xe*Le}}}}return n.makeTensorInfo([l,c,u,f],"float32",m)}const $ct={kernelName:RF,backendName:"cpu",kernelFunc:Cct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ect(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:a,size:o}=r;ft(i,"resizeNearestNeighbor");const l=Ct(i.shape),[u,c]=o,[f,d,h,m]=i.shape,g=n.data.get(i.dataId).values,b=new Float32Array(f*u*c*m),x=[s&&u>1?d-1:d,s&&c>1?h-1:h],w=[s&&u>1?u-1:u,s&&c>1?c-1:c],C=x[0]/w[0],S=x[1]/w[1];let E=0;for(let A=0;A<f;A++){const k=A*l[0];for(let N=0;N<u;N++){const I=a?C*(N+.5):C*N;let T=Math.min(d-1,s?Math.round(I):Math.floor(I));a&&(T=Math.max(0,T));const D=k+T*l[1];for(let L=0;L<c;L++){const P=a?S*(L+.5):S*L;let M=Math.min(h-1,s?Math.round(P):Math.floor(P));a&&(M=Math.max(0,M));const F=D+M*l[2];for(let R=0;R<m;R++){const j=g[F+R];b[E++]=j}}}}return n.makeTensorInfo([f,u,c,m],i.dtype,b)}const kct={kernelName:IA,backendName:"cpu",kernelFunc:Ect};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Act(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:a}=r;ft([s,i],"resizeNearestNeighborGrad");const o=Ct(i.shape),l=Ct(s.shape),[u,c,f,d]=i.shape,[,h,m]=s.shape,g=new Float32Array(u*c*f*d),b=n.data.get(s.dataId).values,x=[a&&h>1?c-1:c,a&&m>1?f-1:f],w=[a&&h>1?h-1:h,a&&m>1?m-1:m],C=x[0]/w[0],S=x[1]/w[1],E=1/C,A=1/S,k=Math.ceil(E)*2+2,N=Math.ceil(A)*2+2;for(let I=0;I<u;I++){const T=I*o[0];for(let D=0;D<c;D++){const L=T+D*o[1],P=Math.floor(D*E),M=Math.floor(P-k/2);for(let F=0;F<f;F++){const R=L+F*o[2],j=Math.floor(F*A),H=Math.floor(j-N/2);for(let G=0;G<d;G++){let z=0;for(let Y=0;Y<k;Y++){const Z=Y+M;if(Z<0||Z>=h)continue;const Q=T+Z*l[1],se=Z*C,re=Math.min(c-1,a?Math.round(se):Math.floor(se));if(D===re)for(let de=0;de<N;de++){const Oe=de+H;if(Oe<0||Oe>=m)continue;const Le=Q+Oe*l[2],me=Oe*S,xe=Math.min(f-1,a?Math.round(me):Math.floor(me));F===xe&&(z+=b[Le+G])}}g[R+G]=z}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}const _ct={kernelName:OF,backendName:"cpu",kernelFunc:Act};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tct(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:s}=r;ft(i,"reverse");const a=i.shape.length,o=rn(s,i.shape);if(a===0)return Kf({inputs:{x:i},backend:n});const l=new Ni(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const f=l.indexToLoc(c),d=f.slice();o.forEach(h=>d[h]=i.shape[h]-1-d[h]),l.set(u.get(...d),...f)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const Nct={kernelName:RA,backendName:"cpu",kernelFunc:Tct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dct={kernelName:ZF,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:s,center:a}=t,o=n,l=ls(r.dtype,we(r.shape)),[u,c,f,d]=r.shape,[h,m]=GY(a,c,f),g=255,b=Math.sin(i),x=Math.cos(i),w=o.data.get(r.dataId).values;for(let S=0;S<u;S++){const E=S*f*c*d;for(let A=0;A<c;A++){const k=A*(f*d);for(let N=0;N<f;N++){const I=N*d;for(let T=0;T<d;T++){const D=[u,A,N,T],L=D[2],P=D[1];let M=(L-h)*x-(P-m)*b,F=(L-h)*b+(P-m)*x;M=Math.round(M+h),F=Math.round(F+m);let R=s;if(typeof s!="number"&&(T===3?R=g:R=s[T]),M>=0&&M<f&&F>=0&&F<c){const H=F*(f*d),G=M*d,z=E+H+G+T;R=w[z]}const j=E+k+I+T;l[j]=R}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ict=er(yw,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),Oct={kernelName:yw,backendName:"cpu",kernelFunc:Ict};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rct(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:s}=t,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=Pm(s,i,a),d=!0,h=n.bufferSync(i),m=n.bufferSync(s),g=C1(h,m,a,f,u,l,o,c,0,d);return n.makeTensorInfo(a,g.dtype,g.values)}const Fct={kernelName:FF,backendName:"cpu",kernelFunc:Rct};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mct(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function Lct(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}function Pct(e,t,n,r,i,s){const a=ri("int32",n*i);for(let o=0;o<n;++o){const l=e.slice(o*r,(o+1)*r),u=o*i;for(let c=0;c<i;++c)a[u+c]=s==="left"?Mct(l,t[c+u]):Lct(l,t[c+u])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bct(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:s}=t,{side:a}=r,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,u=Pct(o,l,i.shape[0],i.shape[1],s.shape[1],a);return n.makeTensorInfo(s.shape,"int32",u)}const zct={kernelName:LF,backendName:"cpu",kernelFunc:Bct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jct(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:s}=t;ft([r,i,s],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=yo(i.dtype,s.dtype),f=Bs(we(i.shape),c);let d=0;const h=a===0||a>1||i.shape.length===1?1:we(i.shape.slice(1));for(let m=0;m<o.length;m++)for(let g=0;g<h;g++)o[m]===1?f[d++]=l[m]:f[d++]=u[m];return n.makeTensorInfo(i.shape,c,f)}const Uct={kernelName:FA,backendName:"cpu",kernelFunc:jct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vct=zM,Wct=jM,Hct=er(xw,e=>e>=0?Wct*e:Vct*(Math.exp(e)-1)),Gct={kernelName:xw,backendName:"cpu",kernelFunc:Hct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qct=er(Sw,e=>e<0?-1:e>0?1:0),Xct={kernelName:Sw,backendName:"cpu",kernelFunc:qct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yct=er(vw,e=>Math.sin(e)),Kct={kernelName:vw,backendName:"cpu",kernelFunc:Yct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zct=er(ww,e=>Math.sinh(e)),Qct={kernelName:ww,backendName:"cpu",kernelFunc:Zct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jct=11920928955078125e-23,Ice=Math.log(Jct)+2,eft=er($w,e=>{const t=e>-Ice,n=e<Ice,r=Math.exp(e);let i;return n?i=r:t?i=e:i=Math.log(1+r),i}),tft={kernelName:$w,backendName:"cpu",kernelFunc:eft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nft(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,paddings:a}=r;ft([i],"spaceToBatchND");const o=we(s),l=[[0,0]];l.push(...a);for(let A=1+s.length;A<i.shape.length;++A)l.push([0,0]);const u=r$e.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=d_(u.shape,s,o,!1),f=h_(c.length,s.length,!1),d=p_(u.shape,s,o,!1),g=Nr({inputs:{x:u},backend:n,attrs:{shape:c}}),w=So({inputs:{x:g},backend:n,attrs:{perm:f}}),E=Nr({inputs:{x:w},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(w),E}const rft={kernelName:PA,backendName:"cpu",kernelFunc:nft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ift(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:s,defaultValue:a}=t;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values[0],[f,d,h,m,g]=T3e(o,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(b=>Number(b)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const sft={kernelName:PF,backendName:"cpu",kernelFunc:ift};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aft(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:s}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,c,f]=N3e(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const oft={kernelName:BF,backendName:"cpu",kernelFunc:aft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lft(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=VK(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const uft={kernelName:zF,backendName:"cpu",kernelFunc:lft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cft(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[u,c]=VK(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}const fft={kernelName:jF,backendName:"cpu",kernelFunc:cft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dft(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:s,defaultValue:a}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=Pm(s,i,o),h=!1,m=n.bufferSync(i);let g;switch(s.dtype){case"bool":{const b=n.bufferSync(s),x=!!n.data.get(a.dataId).values[0];g=C1(m,b,o,d,c,u,l,f,x,h);break}case"float32":{const b=n.bufferSync(s),x=n.data.get(a.dataId).values[0];g=C1(m,b,o,d,c,u,l,f,x,h);break}case"int32":{const b=n.bufferSync(s),x=n.data.get(a.dataId).values[0];g=C1(m,b,o,d,c,u,l,f,x,h);break}case"string":{const b=n.bufferSync(s),x=Vh(n.data.get(a.dataId).values[0]);g=C1(m,b,o,d,c,u,l,f,x,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(o,g.dtype,g.values)}const hft={kernelName:UF,backendName:"cpu",kernelFunc:dft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pft(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:s,axis:a}=r,o=rn(a,i.shape)[0],l=oK(i,s,o),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(f=>{const d=[...c];d[o]=f;const h=wy({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});return u[o]+=f,h})}const mft={kernelName:BA,backendName:"cpu",kernelFunc:pft};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gft={kernelName:VF,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;ft(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];s[o]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yft=er(Dw,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),bft={kernelName:Dw,backendName:"cpu",kernelFunc:yft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xft(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,end:a,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;ft(i,"stridedSlice");const{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:b,isSimpleSlice:x,begin:w,end:C,strides:S}=VY(i.shape,s,a,o,l,u,c,f,d);let E;if(g)E=Nr({inputs:{x:i},backend:n,attrs:{shape:m}});else if(b||x){q(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const A=zY(w,C,S),k=wy({inputs:{x:i},backend:n,attrs:{begin:w,size:A}});E=Nr({inputs:{x:k},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(k)}else{const A=n.bufferSync(i),k=O3e(h,A,S,w);E=n.makeTensorInfo(m,k.dtype,k.values)}return E}const vft={kernelName:WF,backendName:"cpu",kernelFunc:xft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wft(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=t,d=n.data.get(c.dataId).values,h=n.data.get(f.dataId).values,[m,g]=R3e(d,h,i,s,a,o,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",g)]}const Sft={kernelName:HF,backendName:"cpu",kernelFunc:wft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cft(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:s,delimiter:a}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,f]=F3e(o,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const $ft={kernelName:GF,backendName:"cpu",kernelFunc:Cft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eft(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(s.dataId).values,o=M3e(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const kft={kernelName:qF,backendName:"cpu",kernelFunc:Eft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aft=er(_w,e=>Math.tan(e)),_ft={kernelName:_w,backendName:"cpu",kernelFunc:Aft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tft=er(Tw,e=>Math.tanh(e)),Nft={kernelName:Tw,backendName:"cpu",kernelFunc:Tft};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dft(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:s}=t,{sliceRank:a,numUpdates:o,sliceSize:l,strides:u,outputSize:c}=Pm(s,i,r.shape),f=!1,d=n.bufferSync(i),h=n.bufferSync(s),m=n.bufferSync(r),g=C1(d,h,r.shape,c,l,o,a,u,m,f);return n.makeTensorInfo(r.shape,g.dtype,g.values)}const Ift={kernelName:MF,backendName:"cpu",kernelFunc:Dft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oft(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:s}=r;ft(i,"tile");const a=P3e(n.bufferSync(i),s);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const Rft={kernelName:Nw,backendName:"cpu",kernelFunc:Oft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fft(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:s,sorted:a}=r;ft(i,"topk");const o=n.data.get(i.dataId).values,[l,u]=z3e(o,i.shape,i.dtype,s,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const Mft={kernelName:XF,backendName:"cpu",kernelFunc:Fft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lft(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:s}=t,{interpolation:a,fillMode:o,fillValue:l,outputShape:u}=n,[c,f,d,h]=i.shape,[m,g]=u??[f,d],b=[c,m,g,h],x=Ct(i.shape),w=x[0],C=x[1],S=x[2],E=Ct(b),A=E[0],k=E[1],N=E[2],I=ls(i.dtype,we(b));I.fill(l);const T=r.data.get(i.dataId).values,D=r.data.get(s.dataId).values;for(let P=0;P<c;++P){const M=s.shape[0]===1?D:D.subarray(P*8,P*8+8);for(let F=0;F<m;++F)for(let R=0;R<g;++R)for(let j=0;j<h;++j){let H;const G=M[6]*R+M[7]*F+1;if(G===0)continue;const z=(M[0]*R+M[1]*F+M[2])/G,Y=(M[3]*R+M[4]*F+M[5])/G,Z=Oce(z,d,o),Q=Oce(Y,f,o);switch(a){case"nearest":H=Vft(T,f,d,w,C,S,P,Q,Z,j,l);break;case"bilinear":H=Wft(T,f,d,w,C,S,P,Q,Z,j,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const se=P*A+F*k+R*N+j;I[se]=H}return r.makeTensorInfo(b,i.dtype,I)}return{dataId:r.write(I,b,i.dtype),shape:i.shape,dtype:i.dtype}}const Pft={kernelName:YF,backendName:"cpu",kernelFunc:Lft};function Oce(e,t,n){switch(n){case"reflect":return Bft(e,t);case"wrap":return zft(e,t);case"nearest":return Uft(e,t);case"constant":default:return jft(e)}}function Bft(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{const r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return Y0(0,n,t-1)}function zft(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{const r=t-1;n-=t*Math.trunc(n/r)}return Y0(0,n,t-1)}function jft(e,t){return e}function Uft(e,t){return Y0(0,e,t-1)}function H3(e,t,n,r,i,s,a,o,l,u,c){const f=a*r+o*i+l*s+u;return 0<=o&&o<t&&0<=l&&l<n?e[f]:c}function Vft(e,t,n,r,i,s,a,o,l,u,c){const f=Math.round(o),d=Math.round(l);return H3(e,t,n,r,i,s,a,f,d,u,c)}function Wft(e,t,n,r,i,s,a,o,l,u,c){const f=Math.floor(o),d=Math.floor(l),h=f+1,m=d+1,g=(m-l)*H3(e,t,n,r,i,s,a,f,d,u,c)+(l-d)*H3(e,t,n,r,i,s,a,f,m,u,c),b=(m-l)*H3(e,t,n,r,i,s,a,h,d,u,c)+(l-d)*H3(e,t,n,r,i,s,a,h,m,u,c);return(h-o)*g+(o-f)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hft(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:s}=t;ft(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:u}=j3e(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const Gft={kernelName:KF,backendName:"cpu",kernelFunc:Hft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qft(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i.shape.length,o=i.shape[s],l=new Array(a-1);let u=0;for(let h=0;h<a;h++)h!==s&&(l[u++]=i.shape[h]);const c=new Array(a).fill(0),f=i.shape.slice();f[s]=1;const d=new Array(o);for(let h=0;h<d.length;h++){c[s]=h;const m=wy({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});d[h]=Nr({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return d}const Xft={kernelName:UA,backendName:"cpu",kernelFunc:qft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yft(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:s}=t,{numSegments:a}=r;ft(i,"unsortedSegmentSum");const o=i.shape.length,l=s.shape.length,u=[],c=[],f=o-l;let d=s;for(let m=0;m<f;++m){const g=oR({inputs:{input:d},backend:n,attrs:{dim:m+1}});d=g,c.push(g)}for(let m=0;m<a;++m){const g=rp(m,"int32"),b=n.makeTensorInfo([],"int32",g),x=n3e({inputs:{a:b,b:d},backend:n}),w=om({inputs:{x},backend:n,attrs:{dtype:"float32"}}),C=JM({inputs:{a:w,b:i},backend:n}),S=S_({inputs:{x:C},backend:n,attrs:{axis:0,keepDims:!1}});u.push(S),c.push(b),c.push(x),c.push(w),c.push(C),c.push(S)}const h=n$e({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const Kft={kernelName:VA,backendName:"cpu",kernelFunc:Yft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zft=[Hat,Est,qat,Yat,Dst,Zat,Jat,tot,rot,sot,oot,uot,fot,pot,got,xot,wot,Cot,Eot,Vat,Aot,Tot,Dot,Ost,Oot,Tst,Fst,Fot,kst,Lot,Bot,zot,Uot,Wot,Got,Xot,Kot,Qot,elt,nlt,ilt,alt,llt,clt,flt,hlt,mlt,ylt,blt,xlt,vlt,Slt,Elt,Mat,Alt,Mst,Flt,Lst,Mlt,Bst,Ult,Vlt,Hlt,jst,Vst,qlt,Ylt,Zlt,Jlt,Hst,qst,Ast,tut,Pot,rut,sut,out,Lat,Yst,Zst,uut,Jst,fut,put,gut,xut,wut,Cut,$ut,tat,kut,_ut,Nut,Iut,Rut,Mut,Put,rat,zut,Vut,Gut,sat,oat,Yut,Qut,tct,uat,rct,sct,act,r$e,cct,Bat,dat,dct,pct,gct,bct,_st,DW,vct,zat,jat,Uat,Sct,$ct,kct,_ct,Nct,Dct,Oct,vat,Fct,zct,Uct,Gct,Sat,Xct,Kct,Qct,Cat,Wut,tft,rft,sft,oft,uft,fft,hft,mft,kat,gft,_at,Nat,bft,vft,Sft,$ft,kft,Rat,Clt,_ft,Nft,Ift,Rft,Mft,Pft,cat,Gft,Xft,Kft,ict];for(const e of Zft)QF(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1={},O4={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Qft(e,t){l1[e]=t}function Ec(e,t){if(!(e in l1)||t!=null){const r=edt(e,t);if(r!==null)l1[e]=r;else return console.log("Could not get context for WebGL version",e),null}const n=l1[e];return n==null||n.isContextLost()?(delete l1[e],Ec(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),l1[e])}function Jft(e){if(!pe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function edt(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t??Jft(e);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete l1[e]},!1),pe().getBool("SOFTWARE_WEBGL_ENABLED")&&(O4.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",O4)||n.getContext("experimental-webgl",O4):n.getContext("webgl2",O4)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var $E;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})($E||($E={}));var Nl;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Nl||(Nl={}));var ks;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ks||(ks={}));function C_(e,t){return[t,e]}function tdt(e,t){return e*t}function R4(e){const t=we(e),n=Math.ceil(t/4);return MO(n)}function jw(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ndt(e,t){const[n,r]=jw(e,t);return n*r*4}function XK(e,t){const n=e;let r,i,s,a,o,l,u,c,f,d;return pe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,a=n.RGBA32F,o=n.RED,u=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,s=e.RGBA,a=n.RGBA,o=e.RGBA,u=4,c=4,f=t!=null?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rt(e,t){const n=t();return pe().getBool("DEBUG")&&rdt(e),n}function rdt(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+odt(e,t))}const idt=596e-10,sdt=65504;function adt(e){return!!(pe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||idt<Math.abs(e)&&Math.abs(e)<sdt)}function odt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function F4(e,t){return cp(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function ldt(e,t){const n=cp(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(rt(e,()=>e.shaderSource(n,t)),rt(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function udt(e,t){const n=cp(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(rt(e,()=>e.shaderSource(n,t)),rt(e,()=>e.compileShader(n)),pe().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw i$e(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const cdt=/ERROR: [0-9]+:([0-9]+):/g;function i$e(e,t){const n=cdt.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const r=+n[1],i=e.split(`
`),s=i.length.toString().length+2,a=i.map((f,d)=>L1((d+1).toString(),s)+f);let o=0;for(let f=0;f<a.length;f++)o=Math.max(a[f].length,o);const l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${L1(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function fdt(e){return cp(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function ddt(e,t){if(rt(e,()=>e.linkProgram(t)),!pe().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function hz(e,t){if(rt(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function hdt(e,t){const n=cp(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return rt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),rt(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function pdt(e,t){const n=cp(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return rt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),rt(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function mdt(e){return cp(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function gdt(e,t){const n=pe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){const r=`[${e}x${t}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function ydt(e){return cp(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Rce(e,t,n,r,i,s,a){const o=e.getAttribLocation(t,n);return o===-1?!1:(rt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),rt(e,()=>e.vertexAttribPointer(o,i,e.FLOAT,!1,s,a)),rt(e,()=>e.enableVertexAttribArray(o)),!0)}function bdt(e,t,n){Cdt(e,n),rt(e,()=>e.activeTexture(e.TEXTURE0+n)),rt(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function xdt(e,t,n){return cp(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function vdt(e,t,n){return e.getUniformLocation(t,n)}function wdt(e,t,n,r){rt(e,()=>bdt(e,t,r)),rt(e,()=>e.uniform1i(n,r))}function pz(e,t,n){rt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),rt(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function Fce(e,t){rt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),rt(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function M4(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Sdt(e,t))}function Sdt(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function cp(e,t,n){const r=rt(e,()=>t());if(r==null)throw new Error(n);return r}function Cdt(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Lx(e,t=2){return we(e.slice(0,e.length-t))}function Px(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function L4(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Lx(e),...Px(e)]),t}function $dt(e,t=!1){let n=pe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=pe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&pe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((o,l)=>l>=e.length-2?H6(e[l]):e[l]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=np(e).newShape);let i=we(e),s=null;e.length<=1&&i<=n?s=[1,i]:e.length===2&&e[0]<=n&&e[1]<=n?s=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);const a=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(t?2:1)&&Math.min(...s)>0;if(s==null||a)if(t){const o=Lx(e);let l=2,u=2;e.length&&([l,u]=Px(e)),i=o*(l/2)*(u/2),s=MO(i).map(c=>c*2)}else s=MO(i);return s}function P4(e){return e%2===0}function uR(e,t){if(e=e.slice(-2),t=t.slice(-2),dn(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r||P4(n)&&P4(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&P4(e[0])&&P4(t[0])}let mz,gz;function Edt(e){if(mz==null){const t=Ec(e);mz=t.getParameter(t.MAX_TEXTURE_SIZE)}return mz}function kdt(e){if(gz==null){const t=Ec(e);gz=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,gz)}function Adt(e){if(e===0)return 0;let t;const n=Ec(e);return yu(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:yu(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function yu(e,t){return e.getExtension(t)!=null}function Mce(e){try{if(Ec(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function _dt(e){if(e===0)return!1;const t=Ec(e);if(e===1){if(!yu(t,"OES_texture_float"))return!1}else if(!yu(t,"EXT_color_buffer_float"))return!1;return OW(t)}function Tdt(e){if(e===0)return!1;const t=Ec(e);if(e===1){if(!yu(t,"OES_texture_float")||!yu(t,"WEBGL_color_buffer_float"))return!1}else{if(yu(t,"EXT_color_buffer_float"))return OW(t);const r="EXT_color_buffer_half_float";if(yu(t,r)){const i=t.getExtension(r);return Ndt(t,i)}return!1}return OW(t)}function OW(e){const t=XK(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(s),a}function Ndt(e,t){const n=XK(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),o}function Ddt(e){return e!==2?!1:Ec(e).fenceSync!=null}function $_(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&q(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ht=pe();ht.registerFlag("HAS_WEBGL",()=>ht.getNumber("WEBGL_VERSION")>0);ht.registerFlag("WEBGL_VERSION",()=>Mce(2)?2:Mce(1)?1:0);ht.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ht.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ht.get("WEBGL_VERSION")===2);ht.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ht.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ht.registerFlag("WEBGL_PACK",()=>ht.getBool("HAS_WEBGL"));ht.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_CLIP",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_REDUCE",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_LAZILY_UNPACK",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_CONV_IM2COL",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ht.getBool("WEBGL_PACK"));ht.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Edt(ht.getNumber("WEBGL_VERSION")));ht.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>kdt(ht.getNumber("WEBGL_VERSION")));ht.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=ht.getNumber("WEBGL_VERSION");return e===0?0:Adt(e)});ht.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ht.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!yX());ht.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>_dt(ht.getNumber("WEBGL_VERSION")));ht.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ht.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ht.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ht.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Tdt(ht.getNumber("WEBGL_VERSION")));ht.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Ddt(ht.getNumber("WEBGL_VERSION")));ht.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ht.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ht.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});ht.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>yX()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});ht.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ht.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ht.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ht.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ht.registerFlag("WEBGL_EXP_CONV",()=>!1);ht.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ht.getBool("IS_TEST"));ht.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ht.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ht.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ht.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(){let e,t,n,r,i,s,a,o,l,u;return pe().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",i="texture",s="outputColor",a="out vec4 outputColor;",o=pe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tb(e,t,n="index"){const r=Ct(t);return r.map((i,s)=>{const a=`int ${e[s]} = ${n} / ${i}`,o=s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${i}`:`index -= ${e[s]} * ${i}`;return`${a}; ${o};`}).join("")}function e8(e,t,n="index"){const r=Ct(t);return r.map((i,s)=>{const a=`int ${e[s]} = ${n} / outShapeStrides[${s}]`,o=s===r.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * outShapeStrides[${s}]`:`index -= ${e[s]} * outShapeStrides[${s}]`;return`${a}; ${o};`}).join("")}function Idt(e,t){const n=e.length,r=e.map(s=>`${t}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function Odt(e,t,n="index"){const r=e.map((s,a)=>a),i=Idt(r,t);return i.map((s,a)=>{const o=`int ${e[a]} = ${n} / ${i[a]}`,l=a===i.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${i[a]}`:`index -= ${e[a]} * ${i[a]}`;return`${o}; ${l};`}).join("")}function YK(e){const t=Ct(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function KK(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const s$e=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:a$e}=Nwe;function Rdt(e,t,n){const r=[];if(e.forEach(h=>{const m=we(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:g}=ZK(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),s=e.map(h=>Fdt(h,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=t.texShape,o=Xa(),l=Pdt(o);let u,c,f=jdt(o);return t.isPacked?(u=Mdt(t.logicalShape,a,n.enableShapeUniforms),c=zdt(o)):(u=Ldt(t.logicalShape,a,n.enableShapeUniforms),c=Bdt(o)),n.packedInputs&&(f+=Hdt),[f,l,c,i,u,s,n.userCode].join(`
`)}function Uw(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return rht(e,t);case 1:return sht(e,t);case 2:return oht(e,t);case 3:return uht(e,t);case 4:return fht(e,t);case 5:return dht(e);case 6:return hht(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function o$e(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return nht(e);case 1:return iht(e,t);case 2:return aht(e,t);case 3:return lht(e,t);default:return cht(e,t)}}function Fdt(e,t,n=!1,r){let i="";n?i+=o$e(e,r):i+=Uw(e,r);const s=e.shapeInfo.logicalShape,a=t.logicalShape;return s.length<=a.length&&(n?i+=pht(e,t):i+=mht(e,t)),i}function Mdt(e,t,n){switch(e.length){case 0:return l$e();case 1:return Gdt(e,t,n);case 2:return eht(e,t,n);case 3:return Xdt(e,t,n);default:return Kdt(e,t,n)}}function Ldt(e,t,n){switch(e.length){case 0:return l$e();case 1:return qdt(e,t,n);case 2:return tht(e,t,n);case 3:return Ydt(e,t,n);case 4:return Zdt(e,t,n);case 5:return Qdt(e,t);case 6:return Jdt(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function Pdt(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function Bdt(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function zdt(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function jdt(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Udt}
    ${Vdt}
    ${Wdt}
  `}const Udt=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Vdt=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Wdt=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Hdt=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function l$e(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Gdt(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function qdt(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function Xdt(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),s=i*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function Ydt(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${e8(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const r=tb(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Kdt(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),s=i*Math.ceil(e[e.length-2]/2);let a=s,o="",l="b, r, c";for(let u=2;u<e.length-1;u++)a*=e[e.length-u-1],o=`
      int b${u} = index / ${a};
      index -= b${u} * ${a};
    `+o,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${e.length}(${l});
    }
  `}function Zdt(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${e8(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const r=tb(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Qdt(e,t){const n=tb(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Jdt(e,t){const n=tb(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function eht(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(dn(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function tht(e,t,n){return dn(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function nb(e){return`offset${e}`}function nht(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Xa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function rht(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=e.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=nb(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function iht(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,s=Xa();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function sht(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Vw(e)}
      }
    `;const i=e.shapeInfo.texShape,s=i[0],a=i[1];if(a===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=nb(n);return a===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function aht(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,a=s[0],o=s[1],l=Xa();if(s!=null&&dn(n,s))return t?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function oht(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape;if(s!=null&&dn(n,s)){if(t)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=np(n),l=a;if(l.length<n.length){const d=Ww(e,l),h=["row","col"];return`
      ${Uw(d,t)}
      float ${i}(int row, int col) {
        return ${i}(${Hw(h,o)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Vw(e)}
      }
    `;const u=s[0],c=s[1],f=nb(r);return c===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function lht(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],m=Ww(e,d),g=["b","row","col"];return`
        ${o$e(m,t)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Hw(g,h)});
        }
      `}const o=Xa();if(t)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],u=a[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function uht(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=np(n),u=o;if(u.length<n.length){const g=Ww(e,u),b=["row","col","depth"];return`
        ${Uw(g,t)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Hw(b,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${a}, 1)));
        ${Vw(e)}
      }
    `;const c=e.shapeInfo.texShape,f=c[0],d=c[1],h=e.shapeInfo.flatOffset;if(d===s&&h==null)return t?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===a&&h==null)return t?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=nb(r);return t?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${a} + depth + ${m};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function cht(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Xa();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=e.shapeInfo.logicalShape,a=s.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=l[0],c=l[1],f=Math.ceil(s[a-1]/2);let d=f*Math.ceil(s[a-2]/2),h="int b, int row, int col",m=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let g=2;g<a-1;g++)h=`int b${g}, `+h,d*=s[a-g-1],m=`b${g} * ${d} + `+m;return`
    vec4 ${r}(${h}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${i.texture2D}(${n}, uv);
    }
  `}function fht(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],a=n[2]*s,o=n[1]*a,{newShape:l,keptDims:u}=np(n);if(l.length<n.length){const w=Ww(e,l),C=["row","col","depth","depth2"];return`
      ${Uw(w,t)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Hw(C,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${s}, 1)));
        ${Vw(e)}
      }
    `;const c=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],h=f[1],m=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&c==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&c==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const x=nb(r);return t?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${x});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${x});
      return sampleTexture(${r}, uv);
    }
  `}function dht(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],s=t[3]*i,a=t[2]*s,o=t[1]*a,{newShape:l,keptDims:u}=np(t);if(l.length<t.length){const g=Ww(e,l),b=["row","col","depth","depth2","depth3"];return`
      ${Uw(g)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Hw(b,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${s}, ${i})) +
          depth3;
        ${Vw(e)}
      }
    `;const c=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],h=f[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=nb(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${s} +
          depth2 * ${i} + depth3 + ${m};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function hht(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=np(t);if(i.length<t.length){const b=Ww(e,i),x=["row","col","depth","depth2","depth3","depth4"];return`
      ${Uw(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Hw(x,s)});
      }
    `}const a=t[5],o=t[4]*a,l=t[3]*o,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${Vw(e)}
      }
    `;const f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],m=d[1];if(m===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===a&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=nb(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Vw(e){const t=e.name,n=we(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function pht(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,o=a$e(e.shapeInfo.logicalShape,t.logicalShape),l=ur(a),u=a-s;let c;const f=["x","y","z","w","u","v"];s===0?c="":a<2&&o.length>=1?c="coords = 0;":c=o.map(w=>`coords.${f[w+u]} = 0;`).join(`
`);let d="";a<2&&s>0?d="coords":d=e.shapeInfo.logicalShape.map((w,C)=>`coords.${f[C+u]}`).join(", ");let h="return outputValue;";const g=we(e.shapeInfo.logicalShape)===1,x=we(t.logicalShape)===1;if(s===1&&!g&&!x)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!x)a===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const w=s-2,C=s-1;o.indexOf(w)>-1&&o.indexOf(C)>-1?h="return vec4(outputValue.x);":o.indexOf(w)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(C)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function mht(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.texShape,a=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&e.shapeInfo.flatOffset==null&&dn(a,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=ur(l),c=a$e(e.shapeInfo.logicalShape,t.logicalShape),f=l-o;let d;const h=["x","y","z","w","u","v"];o===0?d="":l<2&&c.length>=1?d="coords = 0;":d=c.map(g=>`coords.${h[g+f]} = 0;`).join(`
`);let m="";return l<2&&o>0?m="coords":m=e.shapeInfo.logicalShape.map((g,b)=>`coords.${h[b+f]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${d}
      return get${r}(${m});
    }
  `}function ur(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function ZK(e,t,n){const{newShape:r,keptDims:i}=np(t),s=t.length,a=e&&s===3&&t[0]===1,o=a?t.slice(1):r,l=!e&&s>1&&!dn(t,n)&&r.length<s||a;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:i}}function Ww(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Hw(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ght(e,t,n,r){const i=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:t.variableNames[f],shapeInfo:d}}),s=i.map(c=>c.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=Rdt(i,a,t),l=udt(e.gl,o),u=e.createProgram(l);return pe().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:s,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:s,outShapeInfo:a},u$e(e,t,u)))}function u$e(e,t,n){const r=[],i=[];let s,a,o,l=null,u=null;u=e.getUniformLocation(n,"NAN",!1),pe().getNumber("WEBGL_VERSION")===1&&(l=e.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of t.variableNames){const d={name:f,uniform:e.getUniformLocation(n,f,c),offset:e.getUniformLocation(n,`offset${f}`,c)};t.enableShapeUniforms&&(d.shape=e.getUniformLocation(n,`${f}Shape`,c),d.texShape=e.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(t.enableShapeUniforms&&(s=e.getUniformLocation(n,"outShape",c),o=e.getUniformLocation(n,"outShapeStrides",c),a=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(const f of t.customUniforms)i.push(e.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:a}}function Lce(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{const i=n.logicalShape,s=t[r],a=s.shape;if(!dn(i,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${a} must match`);if(n.isUniform&&s.isUniform)return;const o=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!dn(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function yht(e,t,n,r,i){t.program.enableShapeUniforms||(Lce(t.inShapeInfos,n),Lce([t.outShapeInfo],[r]));const s=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,a[0],a[1]):e.setOutputMatrixTexture(s.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),pe().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:f,shape:d,texShape:h}=t.variablesLocations[l];if(d){const{uniformShape:m}=ZK(t.program.packedInputs,u.shape,u.texData.texShape);switch(m.length){case 1:e.gl.uniform1iv(d,new Int32Array(m));break;case 2:e.gl.uniform2iv(d,new Int32Array(m));break;case 3:e.gl.uniform3iv(d,new Int32Array(m));break;case 4:e.gl.uniform4iv(d,new Int32Array(m));break}}if(h&&e.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(we(u.shape)<2)e.gl.uniform1f(c,u.uniformValues[0]);else{let m=u.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),e.gl.uniform1fv(c,m)}continue}u.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){const l=Ct(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){const u=t.program.customUniforms[l],c=t.customUniformLocations[l],f=i[l];if(u.type==="float")e.gl.uniform1fv(c,f);else if(u.type==="vec2")e.gl.uniform2fv(c,f);else if(u.type==="vec3")e.gl.uniform3fv(c,f);else if(u.type==="vec4")e.gl.uniform4fv(c,f);else if(u.type==="int")e.gl.uniform1iv(c,f);else if(u.type==="ivec2")e.gl.uniform2iv(c,f);else if(u.type==="ivec3")e.gl.uniform3iv(c,f);else if(u.type==="ivec4")e.gl.uniform4iv(c,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}e.executeProgram()}function bht(e,t,n){let r="";t.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:f}=ZK(e.packedInputs,a.shape,l);let d="",h="",m="";if(c.length===1&&e.packedInputs){const E=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${E[0]>1}_${E[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){const E=Ct(c);m=`${E[0]===l[1]}_${E[E.length-1]===l[1]}`}const g=a.shape.length,b=c.length===2&&dn(a.shape,l),x=we(a.shape)===1,w=hy(a.shape,n.shape),C=!e.packedInputs&&g===n.shape.length&&dn(l,n.texData.texShape),S=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${g}_${C}_${u?f:""}_${c.length}_${x}_${w}_${b}_${d}_${h}_${m}_${S}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const i=e.userCode;let s=e.constructor.name;return s+="_"+r+"_"+i+`${pe().getNumber("WEBGL_VERSION")}`,s}function ca(e){return pe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xht{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=$E.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Xa();this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?e8(["r","c","d"],t):tb(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vht{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=$E.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Xa();this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?e8(["r","c","d"],t):tb(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wht{constructor(t){this.variableNames=["A"],this.outTexUsage=Nl.DOWNLOAD;const n=Xa();this.outputShape=t,this.userCode=`
      ${s$e}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sht{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Nl.DOWNLOAD;const n=Xa();this.outputShape=t,this.userCode=`
      ${s$e}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cht={R:0,G:1,B:2,A:3};class Pce{constructor(t,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Xa();this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${Cht[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?KK():YK(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${a}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ht{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Xa();this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;i+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?KK():YK(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eht(e){const t=Xa(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return ldt(e,n)}function kht(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return hdt(e,t)}function Aht(e){const t=new Uint16Array([0,1,2,2,1,3]);return pdt(e,t)}function E_(e,t,n,r,i,s){gdt(t,n);const a=mdt(e),o=e.TEXTURE_2D;return rt(e,()=>e.bindTexture(o,a)),rt(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),rt(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),rt(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),rt(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),pe().getNumber("WEBGL_VERSION")===1?rt(e,()=>e.texImage2D(o,0,r,t,n,0,i,s,null)):rt(e,()=>e.texStorage2D(o,1,r,t,n)),rt(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:a,texShape:[n,t]}}function c$e(e){return e.internalFormatFloat}function _ht(e,t,n,r){const[i,s]=C_(t,n);return E_(e,i,s,c$e(r),r.textureFormatFloat,e.FLOAT)}function f$e(e){return e.internalFormatHalfFloat}function Tht(e,t,n,r){const[i,s]=C_(t,n);return E_(e,i,s,f$e(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function d$e(e){return e.downloadTextureFormat}function Nht(e,t,n,r){const[i,s]=C_(t,n);return E_(e,i,s,d$e(r),e.RGBA,e.UNSIGNED_BYTE)}function h$e(e){return e.internalFormatPackedFloat}function Dht(e,t,n,r){const[i,s]=jw(t,n);return E_(e,i,s,h$e(r),e.RGBA,e.FLOAT)}function p$e(e){return e.internalFormatPackedHalfFloat}function Iht(e,t,n,r){const[i,s]=jw(t,n);return E_(e,i,s,p$e(r),e.RGBA,r.textureTypeHalfFloat)}function Oht(e,t,n){return rt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Rce(e,t,"clipSpacePos",n,3,20,0)&&Rce(e,t,"uv",n,2,20,12)}function Rht(e,t,n,r,i,s){rt(e,()=>e.bindTexture(e.TEXTURE_2D,t));let a,o,l;i instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),o=e.FLOAT,l=s.internalFormatPackedFloat),a.set(i),pe().getNumber("WEBGL_VERSION")===2?rt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,a)):rt(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,a)),rt(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Fht(e,t,n){rt(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?pe().getNumber("WEBGL_VERSION")===2?rt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):rt(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):pe().getNumber("WEBGL_VERSION")===2?rt(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):rt(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),rt(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Mht(e,t,n,r){const i=e.createBuffer();rt(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));const o=4*4*t*n;return rt(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)),rt(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),rt(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function Lht(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Pht(e,t,n,r){const[i,s]=C_(t,n),a=4,o=new Uint8Array(tdt(t*n,a));return rt(e,()=>e.readPixels(0,0,i,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Bht(e,t,n,r,i,s,a,o){const l=e,u=new Float32Array(ndt(s,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function zht(e,t,n){const r=new Float32Array(t*n*4);return rt(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yz{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=pe().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,Qft(n,t)):this.gl=Ec(n),t=this.gl,pe().getNumber("WEBGL_VERSION")===2){const s=t;this.createVertexArray=()=>rt(s,()=>s.createVertexArray()),this.bindVertexArray=a=>rt(s,()=>s.bindVertexArray(a)),this.deleteVertexArray=a=>rt(s,()=>s.deleteVertexArray(a)),this.getVertexArray=()=>rt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(t!=null){const s=t.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>rt(t,()=>s.createVertexArrayOES()),this.bindVertexArray=a=>rt(t,()=>s.bindVertexArrayOES(a)),this.deleteVertexArray=a=>rt(t,()=>s.deleteVertexArrayOES(a)),this.getVertexArray=()=>rt(t,()=>t.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),pe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=F4(this.gl,s),yu(this.gl,a))this.textureHalfFloatExtension=F4(this.gl,a);else if(pe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),yu(this.gl,i))this.colorBufferHalfFloatExtension=F4(this.gl,i);else if(pe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",yu(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(yu(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=kht(this.gl),this.indexBuffer=Aht(this.gl),this.framebuffer=ydt(this.gl),this.textureConfig=XK(this.gl,this.textureHalfFloatExtension)}get debug(){return pe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;rt(t,()=>t.finish()),rt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),rt(t,()=>t.deleteFramebuffer(this.framebuffer)),rt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),rt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),rt(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),_ht(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),Tht(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),Nht(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),Fht(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,r,i){this.throwIfDisposed(),Rht(this.gl,t,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),Iht(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),Dht(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(Fce(this.gl,this.framebuffer),this.outputTexture=null),rt(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,r){return this.downloadMatrixDriver(t,()=>Pht(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,r,i,s,a){return Bht(this.gl,t,n,r,i,s,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return Lht(this.gl,t,n)}createBufferFromTexture(t,n,r){this.bindTextureToFrameBuffer(t);const i=Mht(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,r;if(pe().getBool("WEBGL_FENCE_API_ENABLED")){const i=t,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{const a=i.clientWaitSync(s,0,0);return a===i.ALREADY_SIGNALED||a===i.CONDITION_SATISFIED},n=s}else pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(t,n,r){return this.downloadMatrixDriver(t,()=>zht(this.gl,n,r))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Eht(n));const r=fdt(n);rt(n,()=>n.attachShader(r,this.vertexShader)),rt(n,()=>n.attachShader(r,t)),ddt(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&hz(n,i),i}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const n=this.gl;rt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Oht(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(rt(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&hz(this.gl,this.program),rt(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,r=!0){return this.throwIfDisposed(),r?xdt(this.gl,t,n):vdt(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),rt(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),wdt(this.gl,t,n,r)}setOutputMatrixTexture(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)}setOutputPackedMatrixTexture(t,n,r){this.throwIfDisposed();const[i,s]=jw(n,r);this.setOutputMatrixTextureDriver(t,i,s)}setOutputMatrixWriteRegion(t,n,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,n)}setOutputPackedMatrixWriteRegion(t,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&hz(this.gl,this.program),M4(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}rt(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),rt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=F4(this.gl,pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await UV(()=>this.disposed||this.isQueryAvailable(t,pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=jht(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in pe().platform&&(r=pe().platform.setTimeoutCustom.bind(pe().platform)),UV(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),pz(this.gl,t,this.framebuffer),this.debug&&M4(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(pz(this.gl,this.outputTexture,this.framebuffer),this.debug&&M4(this.gl)):Fce(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,n,r){this.throwIfDisposed();const i=this.gl;pz(i,t,this.framebuffer),this.debug&&M4(i),this.outputTexture=t,rt(i,()=>i.viewport(0,0,n,r)),rt(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(t,n,r,i){this.throwIfDisposed(),rt(this.gl,()=>this.gl.scissor(t,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function jht(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Uht,bincountImpl:m$e,bincountReduceImpl:Vht,bitwiseAndImpl:Wht,castImpl:Hht,ceilImpl:Ght,concatImpl:qht,equalImpl:Xht,expImpl:Yht,expm1Impl:Kht,floorImpl:Zht,gatherNdImpl:Qht,gatherV2Impl:Jht,greaterImpl:ept,greaterEqualImpl:tpt,lessImpl:npt,lessEqualImpl:rpt,linSpaceImpl:ipt,logImpl:spt,maxImpl:apt,maximumImpl:opt,minimumImpl:lpt,multiplyImpl:upt,negImpl:cpt,notEqualImpl:fpt,prodImpl:dpt,raggedGatherImpl:hpt,raggedRangeImpl:ppt,raggedTensorToTensorImpl:mpt,rangeImpl:gpt,rsqrtImpl:ypt,scatterImpl:bpt,sigmoidImpl:xpt,simpleAbsImpl:g$e,sliceImpl:vpt,sparseFillEmptyRowsImpl:wpt,sparseReshapeImpl:Spt,sparseSegmentReductionImpl:y$e,sqrtImpl:Cpt,staticRegexReplaceImpl:$pt,stridedSliceImpl:Ept,stringNGramsImpl:kpt,stringSplitImpl:Apt,stringToHashBucketFastImpl:_pt,subImpl:Tpt,tileImpl:Npt,topKImpl:Dpt,transposeImpl:QK,uniqueImpl:Ipt}=Fat;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$e(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function _a(e,t){return t===1?[e]:b$e(e,t)}function Opt(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rpt{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=ca(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=_a("rc",this.rank),r=ur(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)s=`${t[t.length-1-a]},`+s;n.push(s)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x$e{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${Fpt(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?KK():YK(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}}function Fpt(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?Odt(["r","c","d"],"inputShape"):tb(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mpt{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,r){const i=zce(n,r),s=jce(t,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const a=Bce(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let o;return i===ks.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===ks.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===ks.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===ks.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===ks.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(t,n,r,i){if(this.freeTextures==null)return;const s=zce(r,i),a=jce(n,s,i);a in this.freeTextures||(this.freeTextures[a]=[]);const o=Bce(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=pe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(t),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const u=this.usedTextures[a],c=u&&u.indexOf(t);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Lpt(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function Bce(e,t,n,r,i){const s=Ppt(t,r);let a;if(i){const[l,u]=jw(e[0],e[1]);a=l*u}else{const[l,u]=C_(e[0],e[1]);a=l*u}const o=Lpt(n,s);return a*o}function Ppt(e,t){switch(e){case ks.PACKED_2X2_FLOAT32:return h$e(t);case ks.PACKED_2X2_FLOAT16:return p$e(t);case ks.UNPACKED_FLOAT32:return c$e(t);case ks.UNPACKED_FLOAT16:return f$e(t);case ks.PACKED_4X1_UNSIGNED_BYTE:return d$e(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function Bpt(e){return pe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ks.PACKED_2X2_FLOAT32:ks.UNPACKED_FLOAT32:e?ks.PACKED_2X2_FLOAT16:ks.UNPACKED_FLOAT16}function zce(e,t){if(e===Nl.UPLOAD)return ks.PACKED_2X2_FLOAT32;if(e===Nl.RENDER||e==null)return Bpt(t);if(e===Nl.DOWNLOAD||e===Nl.PIXELS)return ks.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function jce(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Af{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const zu="if (isnan(x)) return x;",zpt="return x;",Uce="return abs(x);",jpt="return (x >= 0.0) ? x : (exp(x) - 1.0);",Upt=zu+`
  return (x < 0.0) ? 0.0 : x;
`,Vpt=zu+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,f0="return x;",Wpt="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpt="return x;",Gpt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,qpt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xpt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ypt="return 1.0 / (1.0 + exp(-1.0 * x));";class C0{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kpt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length);const n=t.length,r=_a("rc",n),i=ur(n),s=Opt(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zpt=AM,Qpt=1e-7,Jpt=1e-4,B4={};function e0t(e){return e in B4||(B4[e]={}),B4[e]}const t0t=pe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),n0t=600;function r0t(){return pe().global.screen==null?1024:pe().global.screen.height*pe().global.screen.width*window.devicePixelRatio*n0t/1024/1024}class t8 extends V6{nextDataId(){return t8.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!pe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof yz)n=t;else{const r=Ec(pe().getNumber("WEBGL_VERSION"),t);n=new yz(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ec(pe().getNumber("WEBGL_VERSION"));n=new yz(r),this.binaryCache=e0t(pe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Mpt(this.gpgpu),this.numMBBeforeWarning=r0t(),this.texData=new lX(this,Cs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,n,r,i,s,a){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:t,texShape:[i,s]},l.texShape=[i,s];const u=L4(n),c=new Pce(u,!1,a),f=this.runWebGLProgram(c,[o],r,[[i,s]]);return f.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),f.dataId}write(t,n,r){if((pe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||pe().getBool("DEBUG"))&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:t,usage:Nl.UPLOAD,refCount:1}),i}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,r,i,s){if(pe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:i,values:n,usage:Nl.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:r,dtype:i,complexTensorInfos:s,slice:a,shape:o,isPacked:l}=n;if(a!=null){let d;l?d=new C0(o,f0):d=new Af(o,f0);const h=this.runWebGLProgram(d,[{dataId:t,shape:o,dtype:i}],i),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(r!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=Sa());let f;if(i==="complex64"){const d=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);f=Gh(d,h)}else f=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=Sa()-c),this.convertAndCacheOnCPU(t,f)}async read(t){if(this.pendingRead.has(t)){const m=this.pendingRead.get(t);return new Promise(g=>m.push(g))}const n=this.texData.get(t),{values:r,shape:i,slice:s,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(s!=null){let m;l?m=new C0(i,f0):m=new Af(i,f0);const g=this.runWebGLProgram(m,[{dataId:t,shape:i,dtype:a}],a),b=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),b}if(r!=null)return this.convertAndCacheOnCPU(t);if(pe().getBool("DEBUG")&&!pe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&pe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(a!=="complex64"&&pe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const m=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...R4(i))}this.pendingRead.set(t,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(a==="complex64"){const m=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),g=m[0],b=m[1];f=Gh(g,b)}else if(u==null)f=this.getValuesFromTexture(t);else{const m=we(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const m=this.gpgpu.gl;rt(m,()=>m.deleteBuffer(u))}const d=this.convertAndCacheOnCPU(t,f),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(m=>m(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Cs().removeDataId(t,this),this.pendingDeletes--),d}readToGPU(t,n={}){const r=this.texData.get(t),{values:i,shape:s,slice:a,dtype:o,isPacked:l,texture:u}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let h;l?h=new C0(s,f0):h=new Af(s,f0);const m=this.runWebGLProgram(h,[{dataId:t,shape:s,dtype:o}],o),g=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),g}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,n.customTexShape),f=Cs().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(i=>Vh(i));return Zt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Zt(t.shape,t.dtype,n)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const r=t[n];if(!adt(r))throw pe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:r,isPacked:i}=this.texData.get(t),s=we(n);if(pe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(t),h=this.texData.get(d.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...R4(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(d),m}const a=pe().getBool("WEBGL_PACK")&&i===!0,o=a?L4(n):n,l=a?new Sht(o):new wht(o),u=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:t}],"float32"),c=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t();const s=Hf(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=Hf(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);o.kernelMs=Z2e(l),o.getExtraProfileInfo=()=>l.map((u,c)=>({name:a[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Sa(),endMs:null}}endTimer(t){return pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Sa(),t)}async getQueryTime(t){if(pe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:r}=this.texData.get(t);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:a,slice:o}=this.texData.get(t),l=o&&o.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,a)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=t0t){return pe().getBool("WEBGL_CPU_FORWARD")&&t.every(r=>this.texData.get(r.dataId).texture==null&&we(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){kl("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return Zpt(t.shape,n)}packedUnaryOp(t,n,r){const i=new C0(t.shape,n),s=this.compileAndRun(i,[t],r);return Cs().makeTensorFromTensorInfo(s)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const i=g$e(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,i)}if(pe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Uce,t.dtype);const n=new Af(t.shape,Uce),r=this.compileAndRun(n,[t]);return Cs().makeTensorFromTensorInfo(r)}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&kf(r[0])){const s=r.map(a=>Df(a));i=this.write(s,t,n)}else i=this.write(r,t,n);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:n}}makeOutput(t,n,r){return Cs().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,r),this)}unpackTensor(t){const n=new Kpt(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new Rpt(t.shape);return this.runWebGLProgram(n,[t],t.dtype,null,!0)}packedReshape(t,n){const r=[Lx(t.shape),...Px(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Lx(n),...Px(n)],a=new x$e(s,r),o=!0,l=[r],u=this.runWebGLProgram(a,[i],t.dtype,l,o);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(t,n){const r=this.texData.get(t),{isPacked:i,shape:s,dtype:a}=r;if(n!=null){const d=we(s),h=n[0]*n[1]*4;q(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=L4(s);let l;i?l=new vht(o):l=new xht(o);const u=!0,c=[n??R4(o)],f=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:t}],a,c,u,n);return{dtype:a,shape:s,dataId:f.dataId}}runWebGLProgram(t,n,r,i,s=!1,a){const o=this.makeTensorInfo(t.outputShape,r),l=this.texData.get(o.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===$E.DENSE){const x=a??R4(t.outputShape);l.texShape=x.map(w=>w*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),we(o.shape)===0)return l.values=ls(o.dtype,0),o;const u=[],c=n.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let w=this.texData.get(x.dataId);if(w.texture==null){if(!t.packedInputs&&we(x.shape)<=pe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:w.values};t.packedInputs&&(w.isPacked=!0,w.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!w.isPacked!=!!t.packedInputs)x=w.isPacked?this.unpackTensor(x):this.packTensor(x),u.push(x),w=this.texData.get(x.dataId);else if(w.isPacked&&!uR(w.shape,x.shape)){const C=x,S=x.shape;x.shape=w.shape,x=this.packedReshape(x,S),u.push(x),w=this.texData.get(x.dataId),C.shape=S}return{shape:x.shape,texData:w,isUniform:!1}});this.uploadToGPU(o.dataId);const f={shape:o.shape,texData:l,isUniform:!1},d=bht(t,c,f),h=this.getAndSaveBinary(d,()=>ght(this.gpgpu,t,c,f)),m=this.activeTimers!=null;let g;m&&(g=this.startTimer()),pe().get("ENGINE_COMPILE_ONLY")||yht(this.gpgpu,h,c,f,i),u.forEach(x=>this.disposeIntermediateTensorInfo(x)),m&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)}));const b=pe().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const x=Sa();x-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!pe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const x=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),x}return o}compileAndRun(t,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(t,n,r,i,s)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(pe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=he(()=>{if(!pe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=pe().getBool("DEBUG");pe().set("DEBUG",!1);const n=this.abs(Et(1e-8)).dataSync()[0];if(pe().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Qpt:Jpt}uploadToGPU(t){const n=this.texData.get(t),{shape:r,dtype:i,values:s,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Sa());let f=n.texShape;if(f==null&&(f=$dt(r,l),n.texShape=f),s!=null){const d=L4(r);let h,m=f[1],g=f[0];const b=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!b)&&([m,g]=jw(f[0],f[1])),l?h=new $ht(d,b):h=new Pce(d,b);const x=b?[g,m]:f,w=this.makeTensorInfo(x,i),C=this.texData.get(w.dataId);b?C.usage=Nl.PIXELS:C.usage=Nl.UPLOAD,C.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),m,g,s);const S=[[g,m]],A=this.runWebGLProgram(h,[w],i,S,!0),k=this.texData.get(A.dataId);n.texShape=k.texShape,n.isPacked=k.isPacked,n.usage=k.usage,pe().get("ENGINE_COMPILE_ONLY")?this.disposeData(A.dataId):(n.texture=k.texture,n.values=null,this.texData.delete(A.dataId)),this.disposeIntermediateTensorInfo(w),u&&(this.uploadWaitMs+=Sa()-c)}else{const d=this.acquireTexture(f,o,i,l);n.texture=d}}convertAndCacheOnCPU(t,n){const r=this.texData.get(t),{dtype:i}=r;return n!=null&&(r.values=i0t(n,i)),r.values}acquireTexture(t,n,r,i){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,i)}computeBytes(t,n){return t[0]*t[1]*uE(n)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});t.push(r)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await f_(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(i$e(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=u$e(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=n,t.customUniformLocations=r,t.infLoc=i,t.nanLoc=s,t.outShapeLocation=a,t.outShapeStridesLocation=o,t.outTexShapeLocation=l}}createTensorFromGPUData(t,n,r){t.channels=t.channels||"RGBA";const{texture:i,height:s,width:a,channels:o}=t,l=Cs().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(i,n,r,s,a,o);return Cs().makeTensorFromDataId(u,n,r,l)}}t8.nextDataId=0;function i0t(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */bX()&&vX("webgl",()=>new t8,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JK=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Sy{constructor(t,n,r){this.variableNames=["A","B"],this.outputShape=Gt(n,r),this.enableShapeUniforms=ca(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rb=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Gw{constructor(t,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Gt(n,r);const s=this.outputShape.length;this.enableShapeUniforms=ca(s);let a="";if(i)if(s===0||we(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${ur(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=_a("coords",s);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function il(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const s0t={kernelName:rw,backendName:"webgl",kernelFunc:il};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jm(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,s=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(s.dataId),o=il({inputs:{x:r},backend:n}),l=il({inputs:{x:i},backend:n});return a.complexTensorInfos={real:o,imag:l},s}const a0t={kernelName:J6,backendName:"webgl",kernelFunc:jm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e="return (a < 0.) ? b * a : a;",w$e=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function o0t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:s}=r,a=n.makeTensorInfo([],"float32",rp(s,"float32")),o=pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Gw(w$e,i.shape,a.shape):new Sy(v$e,i.shape,a.shape),l=n.runWebGLProgram(o,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const l0t={kernelName:cA,backendName:"webgl",kernelFunc:o0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e="return (a < 0.) ? b * a : a;",C$e=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function u0t(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,s=pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Gw(C$e,r.shape,i.shape):new Sy(S$e,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const c0t={kernelName:TA,backendName:"webgl",kernelFunc:u0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qw="if (isnan(x)) return x;";function _n({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:a}=i,o=s,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const f=o.texData.get(a.dataId),d=n(f.values,l);return o.makeTensorInfo(a.shape,l,d)}const u=pe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let c;return u?c=new C0(a.shape,t):c=new Af(a.shape,e),o.runWebGLProgram(c,[a],l)}}function Gs({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:a,backend:o})=>{const{a:l,b:u}=a,c=o;if(r&&l.dtype==="complex64"){const m=c.texData.get(l.dataId),g=c.texData.get(u.dataId),[b,x]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(C=>{const[S,E]=C,A={dataId:S.dataId,dtype:S.dtype,shape:l.shape},k={dataId:E.dataId,dtype:E.dtype,shape:u.shape},N=new Sy(e,l.shape,u.shape);return c.runWebGLProgram(N,[A,k],yo(S.dtype,E.dtype))}),w=jm({inputs:{real:b,imag:x},backend:c});return c.disposeIntermediateTensorInfo(b),c.disposeIntermediateTensorInfo(x),w}const f=s||yo(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&i!=null){const m=c.texData.get(l.dataId).values,g=c.texData.get(u.dataId).values,b=l.dtype==="string"?qh(m):m,x=l.dtype==="string"?qh(g):g,[w,C]=i(l.shape,u.shape,b,x,f),S=c.makeTensorInfo(C,f),E=c.texData.get(S.dataId);return E.values=w,S}const d=pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return d?h=new Gw(t,l.shape,u.shape,n):h=new Sy(e,l.shape,u.shape),c.runWebGLProgram(h,[l,u],f)}}function EE(e,t=!1){if(e==="linear")return t?Hpt:zpt;if(e==="relu")return t?qpt:Upt;if(e==="elu")return t?Gpt:jpt;if(e==="relu6")return t?Xpt:Vpt;if(e==="prelu")return t?C$e:S$e;if(e==="leakyrelu")return t?w$e:v$e;if(e==="sigmoid")return t?Ypt:Wpt;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $$e{constructor(t,n,r,i=!1,s=!1,a=!1,o=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ca(this.outputShape.length);const c=i?t[1]:t[2],f=Math.ceil(c/2),d=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",m=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",x="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:u?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,x="result = activation(result);");const w=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let C="rc.x",S="rc.x";t[0]<n[0]?C=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${C};
        int batchB = ${S};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${x}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vce={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Wce{constructor(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Gt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hce="return a * b;";function eZ(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,s=yo(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new Wce(Vce.REAL,r.shape,i.shape),c=new Wce(Vce.IMAG,r.shape,i.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=jm({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([r,i])){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,c]=upt(r.shape,i.shape,o.values,l.values,s),f=n.makeTensorInfo(c,s),d=n.texData.get(f.dataId);return d.values=u,f}let a;return pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new Gw(Hce,r.shape,i.shape):a=new Sy(Hce,r.shape,i.shape),n.runWebGLProgram(a,[r,i],s)}const f0t={kernelName:dw,backendName:"webgl",kernelFunc:eZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0t(e,t,n){const r=[Lx(e.shape),...Px(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Lx(t),...Px(t)],a=new x$e(s,r),o=!0,l=[r],u=n.runWebGLProgram(a,[i],e.dtype,l,o);return{dataId:u.dataId,shape:t,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ke(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:s}=r,a=n,o=we(i.shape),l=cX(s,o),u=we(l);q(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=a.texData.get(i.dataId);return c.isPacked&&!uR(i.shape,l)&&!(c.texture!==null&&uR(c.shape,l))?d0t(i,l,a):(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const h0t={kernelName:DA,backendName:"webgl",kernelFunc:Ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gce{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=t;this.outputShape=[i,a];const o=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const f=1/n;u=`sumValue += dot(values * ${oy(f)?f.toPrecision(2):f}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p0t{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:a}=t;this.outputShape=[i,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";s%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0t(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],r=BM(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function ib(e,t,n,r){const i=m0t(e.shape);let s=e;for(let a=0;a<i.length;a++){const{inSize:o,windowSize:l,outSize:u}=i[a];let c,f;n==="mean"?c=a===0?new Gce({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},o):new Gce({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u}):c=new p0t({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},n),f=s,s=r.runWebGLProgram(c,[s],t),f.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(f)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g0t{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;const i=ur(this.rank),s=y0t(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function y0t(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b0t{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(t.length);for(let c=0;c<r.length;c++)r[c]=t[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=ur(this.rank),s=b$e("rc",this.rank),a=new Array(this.rank);for(let c=0;c<n.length;c++)a[n[c]]=s[c];const o=`vec2(${a.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(e,t,n){const r=pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new b0t(e.shape,t):new g0t(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0t(e,t,n,r){const i=t,s=e.shape.length,a=rn(i,e.shape);let o=a;const l=ei(o,s),u=l!=null;let c=e;u&&(c=n8(e,l,r),o=yi(o.length,s)),Ws("sum",o,s);const[f,d]=ds(c.shape,o);let h=f;n&&(h=gi(f,a));const m=we(d),b=we(e.shape)/m,x=Ke({inputs:{x:c},attrs:{shape:[b,m]},backend:r}),w=JF(e.dtype),C=ib(x,w,"sum",r),S=Ke({inputs:{x:C},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(C),u&&r.disposeIntermediateTensorInfo(c),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r;return x0t(i,s,a,n)}const v0t={kernelName:LA,backendName:"webgl",kernelFunc:r8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wa(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:s}=r,a=n,o=i.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=i.shape[s[c]];let u;if(a.shouldExecuteOnCPU([i])){const f=a.texData.get(i.dataId).values,d=QK(f,i.shape,i.dtype,s,l);u=a.makeTensorInfo(l,i.dtype);const h=a.texData.get(u.dataId);h.values=d}else u=n8(i,s,a);return u}const w0t={kernelName:P1,backendName:"webgl",kernelFunc:Wa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$e=1e3;function cR({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,f=n?e.shape[u-2]:e.shape[u-1],d=r?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],m=r?t.shape[c-2]:t.shape[c-1],g=e.shape.slice(0,-2),b=t.shape.slice(0,-2),x=we(g),w=we(b),S=Gt(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,m]);q(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=n?[x,f,h]:[x,h,f],A=r?[w,m,d]:[w,d,m],k=Ke({inputs:{x:e},backend:i,attrs:{shape:E}}),N=Ke({inputs:{x:t},backend:i,attrs:{shape:A}}),I=[k,N],T=Math.max(x,w),D=n?k.shape[1]:k.shape[2],L=s!=null,P=a!=null,M=l==="leakyrelu",F=l!=null?EE(l,!0):null,R=L||P||M||F!=null;let j;if((h===1||m===1)&&D>E$e&&R===!1){let G=k,z=N;n&&(G=Wa({inputs:{x:k},backend:i,attrs:{perm:[0,2,1]}}),I.push(G)),r&&(z=Wa({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),I.push(z));const Y=m!==1,Z=m===1;let Q=G;Y&&(Q=Ke({inputs:{x:G},backend:i,attrs:{shape:[T,D,1]}}),I.push(Q));const se=m===1?2:1;let re=z;Z&&(re=Ke({inputs:{x:z},backend:i,attrs:{shape:[T,1,D]}}),I.push(re));const de=eZ({inputs:{a:Q,b:re},backend:i});j=r8({inputs:{x:de},backend:i,attrs:{axis:se,keepDims:!0}}),I.push(de)}else{const G=yo(e.dtype,t.dtype),z=new $$e(E,A,[T,h,m],n,r,L,F,P,M),Y=[k,N];if(s!=null&&Y.push(s),P&&Y.push(a),M){const Z=i.makeTensorInfo([],"float32",rp(o,"float32"));Y.push(Z),I.push(Z)}j=i.runWebGLProgram(z,Y,G)}const H=Ke({inputs:{x:j},backend:i,attrs:{shape:S}});I.push(j);for(const G of I)i.disposeIntermediateTensorInfo(G);return H}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0t(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s,bias:a,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:f}=r;return cR({a:i,b:s,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:f,activation:c})}const C0t={kernelName:cE,backendName:"webgl",kernelFunc:S0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qce="return abs(x);";function $0t(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),a=g$e(s.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let i;return pe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new C0(r.shape,qce):i=new Af(r.shape,qce),n.runWebGLProgram(i,[r],r.dtype)}const E0t={kernelName:Uk,backendName:"webgl",kernelFunc:$0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0t=zu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,A0t=_n({opSnippet:k0t}),_0t={kernelName:Lv,backendName:"webgl",kernelFunc:A0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0t=zu+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,N0t=_n({opSnippet:T0t}),D0t={kernelName:Pv,backendName:"webgl",kernelFunc:N0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xce="return a + b;",I0t=Gs({opSnippet:Xce,packedOpSnippet:Xce,supportsComplex:!0,cpuKernelImpl:Uht}),O0t={kernelName:Xy,backendName:"webgl",kernelFunc:I0t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R0t{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F0t{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((s,a)=>`T${a}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LI(e){const{inputs:t,backend:n}=e,r=t;if(r.length===1)return il({inputs:{x:r[0]},backend:n});if(r.length>pe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=LI({inputs:r.slice(0,l),backend:n}),c=LI({inputs:r.slice(l),backend:n});return LI({inputs:[u,c],backend:n})}const i=r.map(l=>l.dtype).reduce((l,u)=>yo(l,u)),s=r.map(l=>l.shape),o=pe().getBool("WEBGL_PACK")?new F0t(r[0].shape,s):new R0t(r[0].shape,s);return n.runWebGLProgram(o,r,i)}const M0t={kernelName:Vk,backendName:"webgl",kernelFunc:LI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r,o=i.shape.length,l=rn(s,i.shape);let u=l;const c=ei(u,o);let f=i;c!=null&&(f=Wa({inputs:{x:i},backend:n,attrs:{perm:c}}),u=yi(u.length,o)),Ws("all",u,o);const[d,h]=ds(f.shape,u),m=we(h),g=Ke({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),b=ib(g,g.dtype,"all",n);let x;if(a){const w=gi(d,l);x=Ke({inputs:{x:b},backend:n,attrs:{shape:w}})}else x=Ke({inputs:{x:b},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(f),x}const P0t={kernelName:q6,backendName:"webgl",kernelFunc:L0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r,o=i.shape.length,l=rn(s,i.shape);let u=l;const c=ei(u,o);let f=i;c!=null&&(f=Wa({inputs:{x:i},backend:n,attrs:{perm:c}}),u=yi(u.length,o)),Ws("any",u,o);const[d,h]=ds(f.shape,u),m=we(h),g=Ke({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),b=ib(g,g.dtype,"any",n);let x;if(a){const w=gi(d,l);x=Ke({inputs:{x:b},backend:n,attrs:{shape:w}})}else x=Ke({inputs:{x:b},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(f),x}const z0t={kernelName:X6,backendName:"webgl",kernelFunc:B0t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j0t{constructor(t,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U0t{constructor(t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,q(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=t[t.length-1],a=Math.ceil(s/n);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,u=ur(l),c=_a("coords",l);let f,d;if(a===1){d=l+1;const N=ur(d);f=`
        ${N} sourceLocR = ${N}(${c.join()}, 0);
        ++${c[l-1]};
        ${N} sourceLocG = ${N}(${c.join()}, 0);
        ++${c[l-2]};
        ${N} sourceLocA = ${N}(${c.join()}, 0);
        --${c[l-1]};
        ${N} sourceLocB = ${N}(${c.join()}, 0);
        --${c[l-2]};`}else d=l,f=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),m="."+h[d-1],g=h.map(N=>"int "+N),b=_a("sourceLocR",d-1).concat("inIdx.r"),x=_a("sourceLocG",d-1).concat("inIdx.g"),w=_a("sourceLocB",d-1).concat("inIdx.b"),C=_a("sourceLocA",d-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",E=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${C.join()})));`,A=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${x.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${C.join()}) : 0.)`,k=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${o[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${A};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${E}
          vec4 candidate = ${A};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$e(e,t,n,r=null){let i=t.shape[0],s=t.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const a=BM(s),o={windowSize:a,inSize:s,batchSize:i,outSize:Math.ceil(s/a)},l=new j0t(o,n,r==null),u=[t];r!=null&&u.push(r);const c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const f=k$e(e,t,n,c);return e.disposeIntermediateTensorInfo(c),f}function A$e(e,t,n,r=null){const i=r!=null?r.shape:t.shape,s=i[i.length-1],a=BM(s),o=new U0t(i,a,n,r==null),l=r==null?[t]:[t,r],u=e.runWebGLProgram(o,l,"int32");if(u.shape.length===t.shape.length){const c=A$e(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function _$e(e,t,n,r){const i=[n];if(Ws("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!pe().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const s=[],a=e.texData.get(t.dataId),o=a!==null&&a.isPacked;let l=t;o&&(l=e.unpackTensor(t),s.push(l));const[u,c]=ds(l.shape,i),f=we(c),d=Ke({inputs:{x:l},backend:e,attrs:{shape:[-1,f]}});s.push(d);const h=k$e(e,d,r);s.push(h);const m=Ke({inputs:{x:h},backend:e,attrs:{shape:u}});return s.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}return A$e(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V0t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;let a=rn(s,i.shape);const o=ei(a,i.shape.length);let l=i;const u=[];o!=null&&(l=Wa({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=yi(a.length,l.shape.length)),Ws("argMax",[a[0]],l.shape.length);const c=_$e(n,l,a[0],"max");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const W0t={kernelName:Wk,backendName:"webgl",kernelFunc:V0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H0t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s}=r;let a=rn(s,i.shape);const o=ei(a,i.shape.length);let l=i;const u=[];o!=null&&(l=Wa({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),a=yi(a.length,l.shape.length)),Ws("argMin",[a[0]],l.shape.length);const c=_$e(n,l,a[0],"min");return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const G0t={kernelName:Hk,backendName:"webgl",kernelFunc:H0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q0t=zu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,X0t=_n({opSnippet:q0t}),Y0t={kernelName:Bv,backendName:"webgl",kernelFunc:X0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K0t=zu+"return log(x + sqrt(x * x + 1.0));",Z0t=_n({opSnippet:K0t}),Q0t={kernelName:zv,backendName:"webgl",kernelFunc:Z0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J0t=zu+`
  return atan(x);
`,emt=_n({opSnippet:J0t}),tmt={kernelName:jv,backendName:"webgl",kernelFunc:emt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nmt=JK+`
  return atan(a, b);
`,rmt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rb+`
  return result;
`,imt=Gs({opSnippet:nmt,packedOpSnippet:rmt}),smt={kernelName:Vv,backendName:"webgl",kernelFunc:imt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const amt=zu+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,omt=_n({opSnippet:amt}),lmt={kernelName:Uv,backendName:"webgl",kernelFunc:omt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kE{constructor(t,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,o=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;const g=n==="avg",b=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,x=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let w="0.0";if(g||(w="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?b:x:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const E=Math.floor(a/4)*4,A=a%4,k=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${E}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${E};
          if (${A===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${A===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${A===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${S});
      }
    `}}class tZ{constructor(t,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,o=t.strideDepth,l=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,f=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,m=t.effectiveFilterHeight,g=t.effectiveFilterWidth,b=t.padInfo.front,x=t.padInfo.top,w=t.padInfo.left;this.outputShape=t.outShape;const C=n==="avg";let S="0.0";if(C||(S="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${u});
        const ivec3 pads = ivec3(${b}, ${x}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${T} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let A=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(A="avgValue / max(count, 1.0)");const k=Math.floor(a/4)*4,N=a%4,I=`
      if (${C}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${u});
      const ivec3 pads = ivec3(${b}, ${x}, ${w});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${k};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${I}
            }
          }
        }
        setOutput(${A});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function umt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;$_(i,"avgPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;q(Vs(a,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Pu(i.shape,s,a,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&dn(c.inShape,c.outShape))return il({inputs:{x:i},backend:n});const f=new kE(c,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const cmt={kernelName:Gk,backendName:"webgl",kernelFunc:umt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fmt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:a,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],f=ip(i.shape,s,a,c,o,l,u),d=new tZ(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const dmt={kernelName:qk,backendName:"webgl",kernelFunc:fmt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hmt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=l-1-t.padInfo.top,f=u-1-t.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class pmt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,i=t.filterWidth,s=t.strideDepth,a=t.strideHeight,o=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=f-1-t.padInfo.front,g=d-1-t.padInfo.top,b=h-1-t.padInfo.left,x=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${b});
      const float avgMultiplier = float(${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mmt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=ip(a.shape,o,l,f,u,c),h=new pmt(d);return n.runWebGLProgram(h,[i],a.dtype)}const gmt={kernelName:K6,backendName:"webgl",kernelFunc:mmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ymt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s;$_([i,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=Pu(a.shape,o,l,1,u),f=new hmt(c);return n.runWebGLProgram(f,[i],a.dtype)}const bmt={kernelName:Y6,backendName:"webgl",kernelFunc:ymt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xmt(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:s}=t,{transposeA:a,transposeB:o}=r;return cR({a:i,b:s,transposeA:a,transposeB:o,backend:n})}const vmt={kernelName:Xk,backendName:"webgl",kernelFunc:xmt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wmt{constructor(t,n,r,i,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Gt(t,n),Gt(t,r);let o="0.0";i!=null&&(Gt(t,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";s!=null&&(Gt(t,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Smt{constructor(t,n,r,i,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Gt(t,n),Gt(t,r);let o="vec4(0.0)";i!=null&&(Gt(t,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(Gt(t,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cmt=({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:i,variance:s,offset:a,scale:o}=e;q(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,i,s];let c=null;a!=null&&(c=a.shape,u.push(a));let f=null;o!=null&&(f=o.shape,u.push(o));const d=pe().getBool("WEBGL_PACK_NORMALIZATION")?new Smt(r.shape,i.shape,s.shape,c,f,l):new wmt(r.shape,i.shape,s.shape,c,f,l);return t.runWebGLProgram(d,u,u[0].dtype)},$mt={kernelName:oA,backendName:"webgl",kernelFunc:Cmt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Emt{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=ur(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=kmt(this.rank);let i;const s=t.map((a,o)=>`sourceLoc.${RW[o]} = start[${o}] + coords.${RW[o]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const RW=["x","y","z","w","u","v"];function kmt(e){if(e===1)return"sourceLoc";if(e<=6)return RW.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Amt{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=ur(this.rank),r=_a("coords",this.rank),i=_a("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,a=`getChannel(getSource(${i.join()}), ${s})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${a};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${a};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((c,f)=>`start[${f}]`).join()});`:t.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _mt(e,t,n,r){const i=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),a=r.texData.get(s.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=e.dtype;let o=UY(t,Ct(e.shape));i.slice&&(o+=i.slice.flatOffset),a.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),s}function Xw(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,size:a}=r,[o,l]=PM(i,s,a);if(BY(i,o,l),we(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=n.texData.get(i.dataId),d=vpt(f.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,d)}const{isPacked:u}=n.texData.get(i.dataId),c=jY(i.shape,o,l);if(u||!c){const f=pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Amt(l):new Emt(l),d=[o];return n.runWebGLProgram(f,[i],i.dtype,d)}return n.uploadToGPU(i.dataId),_mt(i,o,l,n)}const Tmt={kernelName:MA,backendName:"webgl",kernelFunc:Xw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nmt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,crops:a}=r;q(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((w,C)=>w*C),l=d_(i.shape,s,o),u=h_(l.length,s.length),c=p_(i.shape,s,o),f=qY(a,s.length),d=XY(c,a,s.length),h=[],m=Ke({inputs:{x:i},backend:n,attrs:{shape:l}}),g=Wa({inputs:{x:m},backend:n,attrs:{perm:u}}),b=Ke({inputs:{x:g},backend:n,attrs:{shape:c}}),x=Xw({inputs:{x:b},backend:n,attrs:{begin:f,size:d}});return h.push(m),h.push(g),h.push(b),h.forEach(w=>n.disposeIntermediateTensorInfo(w)),x},Dmt={kernelName:Yk,backendName:"webgl",kernelFunc:Nmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Imt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a}=r,o=n.readSync(i.dataId),l=n.readSync(s.dataId),u=m$e(o,l,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,u)}const Omt={kernelName:Z6,backendName:"webgl",kernelFunc:Imt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rmt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Fmt=`
  return float(int(a.r) & int(b.r));
`;function Mmt(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,s=pe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=pe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||a===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(i.dataId).values,[c,f]=Wht(r.shape,i.shape,l,u,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let o;return s?o=new Gw(Rmt,r.shape,i.shape,!1):o=new Sy(Fmt,r.shape,i.shape),n.runWebGLProgram(o,[r,i],r.dtype)}const Lmt={kernelName:Kk,backendName:"webgl",kernelFunc:Mmt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pmt(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,s=n.readSync(r.dataId),a=n.readSync(i.dataId),o=Gt(Array.from(s),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const Bmt={kernelName:Q6,backendName:"webgl",kernelFunc:Pmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zmt="return float(a != b);",T$e=Gs({opSnippet:zmt,cpuKernelImpl:fpt,dtype:"bool"}),jmt={kernelName:$A,backendName:"webgl",kernelFunc:T$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return il({inputs:{x:i.complexTensorInfos.real},backend:n})}const Umt={kernelName:IF,backendName:"webgl",kernelFunc:k_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vmt="return float(int(x));";function Wmt(e,t){const n=new Af(e.shape,Vmt),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return il({inputs:{x:i},backend:n});const a=Ai(i.shape),o=FW({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=jm({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const a=k_({inputs:{input:i},backend:n}),o=FW({inputs:{x:a},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(a),o}if(!fX(i.dtype,s)){const a=il({inputs:{x:i},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const a=n.texData.get(i.dataId).values,[o,l,u]=Hht(a,i.shape,i.dtype,s);return n.makeTensorInfo(o,l,u)}if(s==="int32")return Wmt(i,n);if(s==="bool"){const a=n.makeTensorInfo([],"bool",ls("bool",1)),l=T$e({inputs:{a:i,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const Hmt={kernelName:Wv,backendName:"webgl",kernelFunc:FW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yce="return ceil(x);",Gmt=_n({opSnippet:Yce,packedOpSnippet:Yce,cpuKernelImpl:Ght}),qmt={kernelName:Hv,backendName:"webgl",kernelFunc:Gmt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xmt{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ymt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kmt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:s,clipValueMax:a}=r;let o;pe().getBool("WEBGL_PACK_CLIP")?o=new Ymt(i.shape):o=new Xmt(i.shape);const l=[[s],[a]];return n.runWebGLProgram(o,[i],i.dtype,l)}const Zmt={kernelName:Gv,backendName:"webgl",kernelFunc:Kmt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qmt{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kce(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function Jmt(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),s=new Qmt(r.shape),a=[Kce(r,i.complexTensorInfos.real),Kce(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,a,a[0].dtype)}const egt={kernelName:Zk,backendName:"webgl",kernelFunc:Jmt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tgt{constructor(t){this.outputShape=[],this.outputShape=Rf(t,1),this.variableNames=t.map((a,o)=>`T${o}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+t[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ngt{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Rf(t,n);const r=this.outputShape,i=r.length,s=ur(i),a=_a("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=t.map((g,b)=>`T${b}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+t[g][n];const u=o[n],c=o.slice(-2),f=o.join();let d=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let g=1;g<l.length;g++){const b=l[g-1];d+=`
        if (${u} < ${l[g]}  && ${u} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${z4(o,u,b)}),
            vec2(${z4(c,u,b)}));
        }`}const h=l.length,m=l[l.length-1];d+=`
        return getChannel(
          getT${h}(${z4(o,u,m)}),
          vec2(${z4(c,u,m)}));`,this.userCode=`
      float getValue(${o.map(g=>"int "+g)}) {
        ${d}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[i-1]} = ${a[i-1]} + 1;
        if (${a[i-1]} < ${r[i-1]}) {
          result.g = getValue(${a});
        }

        ${a[i-2]} = ${a[i-2]} + 1;
        if (${a[i-2]} < ${r[i-2]}) {
          result.a = getValue(${a});
        }

        ${a[i-1]} = ${a[i-1]} - 1;
        if (${a[i-2]} < ${r[i-2]} &&
            ${a[i-1]} < ${r[i-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function z4(e,t,n){const r=e.indexOf(t);return e.map((s,a)=>a===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return il({inputs:{x:i.complexTensorInfos.imag},backend:n})}const rgt={kernelName:bF,backendName:"webgl",kernelFunc:i8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3(e,t,n){const r=e[0].dtype;if(r==="complex64"){const h=e.map(w=>k_({inputs:{input:w},backend:n})),m=e.map(w=>i8({inputs:{input:w},backend:n})),g=G3(h,t,n),b=G3(m,t,n),x=jm({inputs:{real:g,imag:b},backend:n});return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}let i=n.shouldExecuteOnCPU(e);if(r==="string"&&(i=!0),i){const h=e.map(S=>{const A=[-1,we(S.shape.slice(t))];return Ke({inputs:{x:S},backend:n,attrs:{shape:A}})}),m=h.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),g=Rf(h.map(S=>S.shape),1),b=h[0].shape[0]===1,x=qht(m,g,r,b),w=Rf(e.map(S=>S.shape),t),C=n.makeTensorInfo(w,r,x);return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),C}const s=e.filter(h=>we(h.shape)>0),a=pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=a?new Af(e[0].shape,f0):new C0(e[0].shape,f0);return n.runWebGLProgram(h,e,r)}const o=pe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const h=[];for(let g=0;g<s.length;g+=o){const b=s.slice(g,g+o);h.push(G3(b,t,n))}const m=G3(h,t,n);for(const g of h)n.disposeIntermediateTensorInfo(g);return m}if(a){const h=new ngt(s.map(m=>m.shape),t);return n.runWebGLProgram(h,s,r)}const{tensors2D:l,outShape:u}=igt(s,t,n),c=new tgt(l.map(h=>h.shape)),f=n.runWebGLProgram(c,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=Ke({inputs:{x:f},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(f),d}function igt(e,t,n){const r=Rf(e.map(s=>s.shape),t);return{tensors2D:e.map(s=>Ke({inputs:{x:s},attrs:{shape:[-1,we(s.shape.slice(t))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$e(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,s=rn(i,t[0].shape)[0],a=t.map(u=>u.shape);WY(a,s);const o=Rf(t.map(u=>u.shape),s);if(we(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(u=>we(u.shape)>0);return l.length===1?il({inputs:{x:l[0]},backend:n}):G3(l,s,n)}const sgt={kernelName:Qk,backendName:"webgl",kernelFunc:N$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D$e{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const a=t.padInfo.top,o=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,m=Math.floor(t.inChannels/4)*4,g=t.inChannels%4,b=t.dataFormat==="channelsLast",x=b?1:2,w=b?2:3,C=b?3:1;let S="",E="";r&&(i?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,E="result = activation(result);");const A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${C}];

        ivec2 xRCCorner =
            ivec2(coords[${x}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${A}
        ${E}
        setOutput(result);
      }
    `}}class agt{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,r=t.padInfo.top,i=t.padInfo.left,s=t.strideDepth,a=t.strideHeight,o=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,f=t.filterDepth,d=t.filterHeight,h=t.filterWidth,m=Math.floor(t.inChannels/4)*4,g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I$e{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ca(this.outputShape.length);const a=t.padInfo.left,o=t.strideWidth,l=t.dilationWidth,u=t.filterHeight,c=t.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<c;b++)d+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;d+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let b=0;b<c;b++)d+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(f+1)/2;b++){const x=b*2;if(d+=`
           xC = xCCorner + ${x*l};
           `,o===1){if(x<c&&(a%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }
               `,l===1&&x>0?d+=`
                 xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                   } else {
                     xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xC${x} = xTexelC${x};
                 `,x+1<c)){const w=a%2===0?H6(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                     xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${x+1}.zw = vec2(0.0);
                     }
                     xTexelC${x+1}Ready = 1;
                   }
                   `,l>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                     } else {
                      xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                     }
                     `:d+=`
                     xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                     `):w===1?d+=`
                     xC${x+1} = xTexelC${x};
                     `:d+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                       xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${x+1}.zw = vec2(0.0);
                       }
                       xTexelC${x+1}Ready = 1;
                     }

                     xC${x+1} = xTexelC${x+1};
                     `}}else x<c&&(a%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.0);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
               `,x+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(
                   xTexelC${x}.xy, xTexelC${x+1}.xy);
               `,x+1<c&&(d+=`
                   xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                 `)));x<c&&(d+=`
             wTexel = getW(r, ${x}, d1, d2);
             dotProd += xC${x}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${x}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,x+1<c&&(d+=`
               wTexel = getW(r, ${x+1}, d1, d2);
               dotProd += xC${x+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${x+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",m="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ogt{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=ca(this.outputShape.length);const{dataFormat:r}=n,i=Xa(),s=r==="channelsLast",a=s?1:2,o=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fR(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function O$e({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const l=e.shape,u=r.texData.get(e.dataId),c=n.inChannels,f=l[0]*l[1]*l[2],d=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,g=!1;let b;const x=[];if(s!=null){const S=fR(s.shape,h);S!=null&&(s=Ke({inputs:{x:s},backend:r,attrs:{shape:S}}),x.push(s))}if(i!=null){const S=fR(i.shape,h);S!=null&&(i=Ke({inputs:{x:i},backend:r,attrs:{shape:S}}),x.push(i))}if(!((f===1||d===1)&&c>E$e)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&dn(u.shape.slice(-3),l.slice(-3))){const S=l[0]*l[1]*(l[2]+1),E={dataId:e.dataId,shape:[1,S,n.inChannels],dtype:e.dtype},A=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,q(uR(u.shape,E.shape),()=>`packed reshape ${u.shape} to ${E.shape} isn't free`);const k=Ke({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});x.push(k);const N=cR({a:E,b:k,backend:r,transposeA:m,transposeB:g,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a}),I=r.texData.get(N.dataId);q(I.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=A,I.shape=n.outShape,b=il({inputs:{x:N},backend:r}),b.shape=n.outShape,x.push(N)}else{const S=n.outHeight*n.outWidth,E=Ke({inputs:{x:e},backend:r,attrs:{shape:h?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),A=Ke({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),k=cR({a:h?E:A,b:h?A:E,transposeA:!h,transposeB:g,backend:r,bias:i,activation:o,preluActivationWeights:s,leakyreluAlpha:a});b=Ke({inputs:{x:k},backend:r,attrs:{shape:n.outShape}}),x.push(E),x.push(A),x.push(k)}for(const S of x)r.disposeIntermediateTensorInfo(S);return b}function R$e({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,m=h==="channelsLast",g=l*u*c,b=d*f,x=[n.batchSize,g,b],w=!0,C=!1,S=[];if(s!=null){const H=fR(s.shape,m);H!=null&&(s=Ke({inputs:{x:s},backend:r,attrs:{shape:H}}),S.push(s))}if(i!=null){const H=fR(i.shape,m);H!=null&&(i=Ke({inputs:{x:i},backend:r,attrs:{shape:H}}),S.push(i))}const E=Ke({inputs:{x:t},backend:r,attrs:{shape:[1,g,we(t.shape)/g]}});S.push(E);const A=new ogt(x,n),k=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(A,[e],"float32",k),I=Ke({inputs:{x:N},backend:r,attrs:{shape:x}});S.push(N),S.push(I);const T=i!=null,D=s!=null,L=o==="leakyrelu",P=o?EE(o,!0):null,M=new $$e(m?I.shape:E.shape,m?E.shape:I.shape,m?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],w,C,T,P,D,L),F=m?[I,E]:[E,I];if(i&&F.push(i),D&&F.push(s),L){const H=r.makeTensorInfo([],"float32",rp(a,"float32"));F.push(H),S.push(H)}const R=r.runWebGLProgram(M,F,"float32"),j=Ke({inputs:{x:R},backend:r,attrs:{shape:n.outShape}});S.push(R);for(const H of S)r.disposeIntermediateTensorInfo(H);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r,f=sp(l),d=fs(i.shape,s.shape,a,u,o,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=O$e({x:i,filter:s,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&pe().getBool("WEBGL_EXP_CONV")){const g=new I$e(d),b=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(g,[i,s],"float32",b)}else if(pe().getBool("WEBGL_CONV_IM2COL"))h=R$e({x:i,filter:s,convInfo:d,backend:n});else{const g=new D$e(d);h=n.runWebGLProgram(g,[i,s],"float32")}const m=Ke({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),m}const ugt={kernelName:Jk,backendName:"webgl",kernelFunc:lgt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cgt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,i=t.padInfo.top,s=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class fgt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,a=t.dataFormat==="channelsLast",o=n-1-t.padInfo.top,l=r-1-t.padInfo.left,u=a?1:2,c=a?2:3,f=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class dgt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,r=t.strideHeight,i=t.strideWidth,s=t.padInfo.front,a=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class hgt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,i=t.filterWidth,s=t.strideDepth,a=t.strideHeight,o=t.strideWidth,l=n-1-t.padInfo.front,u=r-1-t.padInfo.top,c=i-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,f=sp(l),d=fs(i.shape,c,a,1,o,u,!1,f),h=new cgt(d);return n.runWebGLProgram(h,[i,s],"float32")}const mgt={kernelName:eF,backendName:"webgl",kernelFunc:pgt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ggt{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=ca(this.outputShape.length);const n=t.filterHeight,r=t.filterWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ygt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{inputShape:a,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r,f=sp(u),d=fs(a,s.shape,o,1,l,c,!1,f);if(pe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],m=new ggt(d);return n.runWebGLProgram(m,[i,s],"float32",h)}else{const h=new fgt(d);return n.runWebGLProgram(h,[i,s],"float32")}}const bgt={kernelName:eA,backendName:"webgl",kernelFunc:ygt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:l}=r,u=Om(i.shape,s.shape,a,l,o),c=new agt(u);return n.runWebGLProgram(c,[i,s],"float32")}const vgt={kernelName:tA,backendName:"webgl",kernelFunc:xgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,pad:o,filterShape:l}=r,u=Om(i.shape,l,a,1,o),c=new dgt(u);return n.runWebGLProgram(c,[i,s],"float32")}const Sgt={kernelName:tF,backendName:"webgl",kernelFunc:wgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cgt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{pad:a,strides:o,inputShape:l}=r,u=Om(l,s.shape,o,1,a),c=new hgt(u);return n.runWebGLProgram(c,[i,s],"float32")}const $gt={kernelName:nF,backendName:"webgl",kernelFunc:Cgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Egt=qw+`
  return cos(x);
`,kgt=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${rb}
  return result;
`,Agt=_n({opSnippet:Egt,packedOpSnippet:kgt}),_gt={kernelName:qv,backendName:"webgl",kernelFunc:Agt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tgt=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Ngt=_n({opSnippet:Tgt}),Dgt={kernelName:Xv,backendName:"webgl",kernelFunc:Ngt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Igt{constructor(t,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,u]=t,[c]=n,[f,d]=r;this.outputShape=[c,f,d,u];const h=i==="bilinear"?1:0,[m,g]=[`${o-1}.0`,`${l-1}.0`],[b,x,w]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[C,S,E]=d>1?[`${(l-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${C});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${x};
        float width_scale = ${S};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${E};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ogt=e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:s,boxInd:a}=t,{cropSize:o,method:l,extrapolationValue:u}=r,c=new Igt(i.shape,s.shape,o,l,u);return n.runWebGLProgram(c,[i,s,a],"float32")},Rgt={kernelName:iF,backendName:"webgl",kernelFunc:Ogt};var AE;(function(e){e.Prod="*",e.Sum="+"})(AE||(AE={}));class Zce{constructor(t,n,r,i){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,a=this.op===AE.Prod?"1.0":"0.0",o=r?a:`getX(${Qce(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=i?`end != ${l-1}`:"end != 0",c=i?"end + 1":"end - 1"):(u=i?`end + pow2 < ${l}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${ur(s)} coords = getOutputCoords();
        int end = ${Jce(s,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${Jce(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${Qce(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Qce(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Jce(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(e,t,n,r,i,s){const a=t.shape.length,o=ei([r],a);let l=t;o!=null&&(l=Wa({inputs:{x:t},backend:n,attrs:{perm:o}}));const u=yi(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const c=l.shape[u];let f=il({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new Zce(e,l.shape,!1,s),m=[[d]],g=f;f=n.runWebGLProgram(h,[f],f.dtype,m),n.disposeIntermediateTensorInfo(g)}if(i){const d=new Zce(e,l.shape,i,s),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){const d=Rm(o),h=Wa({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:a,reverse:o}=r;return F$e(AE.Prod,i,n,s,a,o)}const Mgt={kernelName:rF,backendName:"webgl",kernelFunc:Fgt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,exclusive:a,reverse:o}=r;return F$e(AE.Sum,i,n,s,a,o)}const Pgt={kernelName:nA,backendName:"webgl",kernelFunc:Lgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:s}=t,{size:a,binaryOutput:o}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=m$e(l,u,s.dtype,s.shape,a);return n.makeTensorInfo([a],s.dtype,c)}else if(i.shape.length===2){const l=n.bufferSync(i),u=n.bufferSync(s),c=Vht(l,u,a,o);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const zgt={kernelName:sF,backendName:"webgl",kernelFunc:Bgt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jgt{constructor(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ugt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:s,dataFormat:a}=r,o=i.shape[0],l=a==="NHWC"?i.shape[1]:i.shape[2],u=a==="NHWC"?i.shape[2]:i.shape[3],c=a==="NHWC"?i.shape[3]:i.shape[1],f=l*s,d=u*s,h=c/(s*s),m=a==="NHWC"?[o,f,d,h]:[o,h,f,d],g=new jgt(m,s,a);return n.runWebGLProgram(g,[i],i.dtype)}const Vgt={kernelName:aF,backendName:"webgl",kernelFunc:Ugt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M$e{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ca(this.outputShape.length);const a=t.filterHeight,o=t.filterWidth,l=t.outChannels/t.inChannels;let u="",c="";r&&(i?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L$e{constructor(t,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ca(this.outputShape.length);const a=t.outChannels/t.inChannels,o=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<f;x++)h+=`
          vec4 xTexelC${x*2};
          int xTexelC${x*2}Ready;
          vec4 xTexelC${x*2+1};
          int xTexelC${x*2+1}Ready;
          vec4 xC${x};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let x=0;x<f;x++)h+=`
          xTexelC${x*2} = vec4(0.0);
          xTexelC${x*2}Ready = 0;
          xTexelC${x*2+1} = vec4(0.0);
          xTexelC${x*2+1}Ready = 0;
          xC${x} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let x=0;x<(d+1)/2;x++){const w=x*2;if(h+=`
          xC = xCCorner + ${w*u};
          `,l===1){if(w<f&&(o%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,u===1&&w>0?h+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<f)){const C=o%2===0?H6(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${C};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,u>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:h+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):C===1?h+=`
                    xC${w+1} = xTexelC${w};
                    `:h+=`
                    xCOffset = xC + ${C};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<f&&(o%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<f&&(h+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<f&&(h+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<f&&(h+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",g="";r&&(i?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,g="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),q(Vs(a,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=fs(i.shape,s.shape,a,c,o,u,!0);let d;pe().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new L$e(f):d=new M$e(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[i,s],"float32",h)}const Hgt={kernelName:rA,backendName:"webgl",kernelFunc:Wgt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ggt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,i=t.padInfo.top,s=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class qgt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,s=t.strideWidth,a=n-1-t.padInfo.top,o=r-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xgt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:s}=t,{strides:a,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r,f=fs(i.shape,c,a,o,l,u,!0),d=new Ggt(f);return n.runWebGLProgram(d,[i,s],"float32")}const Ygt={kernelName:oF,backendName:"webgl",kernelFunc:Xgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kgt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:s}=t,{strides:a,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r,f=fs(c,s.shape,a,o,l,u,!0),d=new qgt(f);return n.runWebGLProgram(d,[i,s],"float32")}const Zgt={kernelName:lF,backendName:"webgl",kernelFunc:Kgt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qgt{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jgt(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],s=we(r.shape),a=Ke({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new Qgt(s),l=n.runWebGLProgram(o,[a],a.dtype),u=Ke({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const e1t={kernelName:uF,backendName:"webgl",kernelFunc:Jgt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t1t{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:u,dilationWidth:c}=t,{top:f,left:d}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${a});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s}=t,{strides:a,pad:o,dilations:l}=r,u=qA(i.shape,s.shape,a,o,"NHWC",l);let c;const f=new t1t(u);c=n.runWebGLProgram(f,[i,s],"float32");const d=Ke({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}const r1t={kernelName:iA,backendName:"webgl",kernelFunc:n1t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1t(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,s=t,{allDims:a,summedDims:o,idDims:l}=nK(i,s.length);iK(a.length,l,s);const{path:u,steps:c}=sK(o,l),f=c.length;let d=null,h=a.length;const m=[];for(let g=0;g<f;++g){for(const b of c[g]){const{permutationIndices:x,expandDims:w}=rK(h,l[b]);let C;aK(x)?C=s[b]:(C=Wa({inputs:{x:s[b]},backend:n,attrs:{perm:x}}),m.push(C));const S=C.shape.slice();for(let E=0;E<w.length;++E)S.splice(w[E],0,1);dn(C.shape,S)||(C=Ke({inputs:{x:C},backend:n,attrs:{shape:S}}),m.push(C)),d===null?d=C:(d=eZ({inputs:{a:C,b:d},backend:n}),m.push(d))}g<f-1&&(u[g]>=0&&(d=r8({inputs:{x:d},backend:n,attrs:{axis:u[g]-(a.length-h),keepDims:!1}}),m.push(d)),h--)}for(const g of m)g!==d&&n.disposeIntermediateTensorInfo(g);return d}const s1t={kernelName:fF,backendName:"webgl",kernelFunc:i1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a1t="return (x >= 0.0) ? x : (exp(x) - 1.0);",o1t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,l1t=_n({opSnippet:a1t,packedOpSnippet:o1t}),u1t={kernelName:Kv,backendName:"webgl",kernelFunc:l1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c1t="return (b >= 0.0) ? a : a * (b + 1.0);",f1t=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,d1t=e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,s=pe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Gw(f1t,r.shape,i.shape):new Sy(c1t,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},h1t={kernelName:dF,backendName:"webgl",kernelFunc:d1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1t=`
  return vec4(equal(a, b));
`,m1t="return float(a == b);",g1t=Gs({opSnippet:m1t,packedOpSnippet:p1t,dtype:"bool",cpuKernelImpl:Xht}),y1t={kernelName:sA,backendName:"webgl",kernelFunc:g1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b1t=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${YY};
  float a1 = ${KY};
  float a2 = ${ZY};
  float a3 = ${QY};
  float a4 = ${JY};
  float a5 = ${eK};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,x1t=_n({opSnippet:b1t}),v1t={kernelName:Zv,backendName:"webgl",kernelFunc:x1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w1t=qw+`
  return exp(x);
`,S1t=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,P$e=_n({opSnippet:w1t,packedOpSnippet:S1t,cpuKernelImpl:Yht,dtype:"float32"}),C1t={kernelName:Qv,backendName:"webgl",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:s}=t,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(q(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Ke({inputs:{x:s},backend:r,attrs:{shape:o}})}const $1t={kernelName:aA,backendName:"webgl",kernelFunc:MW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const efe="return exp(x) - 1.0;",E1t=_n({opSnippet:efe,packedOpSnippet:efe,cpuKernelImpl:Kht}),k1t={kernelName:Jv,backendName:"webgl",kernelFunc:E1t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tfe{constructor(t,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${i}.0`:"1.0";let o;if(t==="real")o="return real * expR - imag * expI;";else if(t==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(e,t,n){const r=n.texData.get(e.dataId),i=we(e.shape),s=e.shape[e.shape.length-1],a=i/s,o=Ke({inputs:{x:e},backend:n,attrs:{shape:[a,s]}}),l=o.shape,u=new tfe("real",l,t),c=new tfe("imag",l,t),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(u,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=jm({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const g=Ke({inputs:{x:m},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1t(e){const{inputs:t,backend:n}=e,{input:r}=t;return B$e(r,!1,n)}const _1t={kernelName:hF,backendName:"webgl",kernelFunc:A1t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T1t{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||Gy(i),s==="string"){const a=ri(s,we(r));return a.fill(i),t.makeTensorInfo(r,s,a)}else{const a=new T1t(r,i),o=[[i]];return t.runWebGLProgram(a,[],s,o)}}const N1t={kernelName:pF,backendName:"webgl",kernelFunc:A_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D1t{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I1t={kernelName:mF,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,i=new D1t(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nfe="return floor(x);",O1t=_n({opSnippet:nfe,packedOpSnippet:nfe,cpuKernelImpl:Zht}),R1t={kernelName:ew,backendName:"webgl",kernelFunc:O1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1t=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,M1t=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,L1t=Gs({opSnippet:F1t,packedOpSnippet:M1t,dtype:"int32"}),P1t={kernelName:tw,backendName:"webgl",kernelFunc:L1t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B1t{constructor(t){this.variableNames=["A"];const n=Xa(),[r,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z1t{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Xa(),[r,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j1t={kernelName:jO,backendName:"webgl",kernelFunc:U1t};let v2,bz=pe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function U1t(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:s}=r,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],f=[u,l,s];if(o||a){const g=pe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(v2==null||g!==bz)&&(bz=g,v2=document.createElement("canvas").getContext("2d",{willReadFrequently:bz})),v2.canvas.width=l,v2.canvas.height=u,v2.drawImage(i,0,0,l,u),i=v2.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=Nl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const h=pe().getBool("WEBGL_PACK")?new z1t(f):new B1t(f),m=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:a,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r,g=sp(c),b=fs(i.shape,s.shape,l,f,u,d,!1,g);let x;const w=[],C=a!=null,S=o!=null,E=h==="leakyrelu",A=()=>{const N=[i,s],I=(T,D)=>{if(D==="NCHW"&&T.shape.length===1&&T.shape[0]!==1){const L=Ke({inputs:{x:T},backend:n,attrs:{shape:[T.shape[0],1,1]}});return w.push(L),L}return T};if(C&&N.push(I(a,c)),S&&N.push(I(o,c)),E){const T=n.makeTensorInfo([],"float32",rp(m,"float32"));N.push(T),w.push(T)}return N};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))x=O$e({x:i,filter:s,convInfo:b,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else if(b.strideWidth<=2&&g==="channelsLast"&&pe().getBool("WEBGL_EXP_CONV")){const N=h?EE(h,!0):null,I=new I$e(b,C,N,S,E),T=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],D=A();x=n.runWebGLProgram(I,D,"float32",T)}else if(pe().getBool("WEBGL_CONV_IM2COL"))x=R$e({x:i,filter:s,convInfo:b,backend:n,bias:a,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else{const N=h?EE(h,!1):null,I=new D$e(b,C,N,S,E),T=A();x=n.runWebGLProgram(I,T,"float32")}const k=Ke({inputs:{x},backend:n,attrs:{shape:b.outShape}});return w.push(x),w.forEach(N=>n.disposeIntermediateTensorInfo(N)),k}const W1t={kernelName:fE,backendName:"webgl",kernelFunc:V1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:s,bias:a,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=[];let g=c;g==null&&(g=[1,1]),q(Vs(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const b=fs(i.shape,s.shape,l,g,u,f,!0),x=pe().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,w=d?EE(d,x):null,C=[i,s],S=a!=null,E=o!=null,A=d==="leakyrelu";if(S&&C.push(a),E&&C.push(o),A){const T=n.makeTensorInfo([],"float32",rp(h,"float32"));C.push(T),m.push(T)}let k;x?k=new L$e(b,S,w,E,A):k=new M$e(b,S,w,E,A);const N=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],I=n.runWebGLProgram(k,C,"float32",N);return m.forEach(T=>n.disposeIntermediateTensorInfo(T)),I}const G1t={kernelName:dE,backendName:"webgl",kernelFunc:H1t};class q1t{constructor(t,n,r,i){this.sliceDim=t,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=ur(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1t(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,s=i.shape,a=s[s.length-1],o=we(r.shape),[l,u,c,f]=LM(r,i),d=Ke({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),h=Ke({inputs:{x:r},backend:n,attrs:{shape:[we(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const x=n.readSync(i.dataId),w=n.bufferSync(r),C=Qht(x,w,r.dtype,u,a,c,f,r.shape,o);return n.makeTensorInfo(l,r.dtype,C.values)}const m=new q1t(a,f,[u,c],r.shape),g=n.runWebGLProgram(m,[h,d],h.dtype),b=Ke({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),b}const Y1t={kernelName:gF,backendName:"webgl",kernelFunc:X1t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K1t{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=ur(this.rank),i=Z1t(t);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function Z1t(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:s}=t,{axis:a,batchDims:o}=r,l=rn(a,i.shape)[0];if(pe().get("DEBUG")){const w=n.readSync(s.dataId),C=i.shape[l];for(let S=0;S<w.length;++S){const E=w[S];q(E<=C-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${C-1}]`)}}const u=lK(i,s,l,o),c=we(s.shape),f=[],d=Ke({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=Ke({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});f.push(d),f.push(h);const m=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const w=n.bufferSync(h),C=n.bufferSync(d),S=Jht(C,w,m);return f.forEach(E=>n.disposeIntermediateTensorInfo(E)),n.makeTensorInfo(u.outputShape,S.dtype,S.values)}const g=new K1t(d.shape,m),b=n.runWebGLProgram(g,[d,h],d.dtype);f.push(b);const x=Ke({inputs:{x:b},backend:n,attrs:{shape:u.outputShape}});return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),x}const Q1t={kernelName:lA,backendName:"webgl",kernelFunc:z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1t="return float(a > b);",eyt=`
  return vec4(greaterThan(a, b));
`,tyt=Gs({opSnippet:J1t,packedOpSnippet:eyt,cpuKernelImpl:ept,dtype:"bool"}),nyt={kernelName:uA,backendName:"webgl",kernelFunc:tyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ryt="return float(a >= b);",iyt=`
  return vec4(greaterThanEqual(a, b));
`,syt=Gs({opSnippet:ryt,packedOpSnippet:iyt,dtype:"bool",cpuKernelImpl:tpt}),ayt={kernelName:nw,backendName:"webgl",kernelFunc:syt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oyt(e){const{inputs:t,backend:n}=e,{input:r}=t;return B$e(r,!0,n)}const lyt={kernelName:yF,backendName:"webgl",kernelFunc:oyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uyt="return float(!isnan(x) && !isinf(x));",cyt=_n({opSnippet:uyt,dtype:"bool"}),fyt={kernelName:iw,backendName:"webgl",kernelFunc:cyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dyt="return float(isinf(x));",hyt=_n({opSnippet:dyt,dtype:"bool"}),pyt={kernelName:sw,backendName:"webgl",kernelFunc:hyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const myt="return float(isnan(x));",gyt=_n({opSnippet:myt,dtype:"bool"}),yyt={kernelName:aw,backendName:"webgl",kernelFunc:gyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const byt="return float(a < b);",xyt=`
  return vec4(lessThan(a, b));
`,vyt=Gs({opSnippet:byt,packedOpSnippet:xyt,cpuKernelImpl:npt,dtype:"bool"}),wyt={kernelName:fA,backendName:"webgl",kernelFunc:vyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Syt="return float(a <= b);",Cyt=`
  return vec4(lessThanEqual(a, b));
`,$yt=Gs({opSnippet:Syt,packedOpSnippet:Cyt,cpuKernelImpl:rpt,dtype:"bool"}),Eyt={kernelName:dA,backendName:"webgl",kernelFunc:$yt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kyt(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:s}=n,a=ipt(r,i,s);return t.makeTensorInfo([a.length],"float32",a)}const Ayt={kernelName:xF,backendName:"webgl",kernelFunc:kyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _yt=qw+`
  return x < 0.0 ? 0./0. : log(x);
`,Tyt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,Nyt=_n({opSnippet:_yt,packedOpSnippet:Tyt,cpuKernelImpl:spt}),Dyt={kernelName:ow,backendName:"webgl",kernelFunc:Nyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iyt=qw+`
  return log(1.0 + x);
`,Oyt=_n({opSnippet:Iyt}),Ryt={kernelName:lw,backendName:"webgl",kernelFunc:Oyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fyt="return float(a >= 1.0 && b >= 1.0);",Myt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Lyt=Gs({opSnippet:Fyt,packedOpSnippet:Myt,dtype:"bool"}),Pyt={kernelName:hA,backendName:"webgl",kernelFunc:Lyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Byt="return float(!(x >= 1.0));",zyt=_n({opSnippet:Byt}),jyt={kernelName:pA,backendName:"webgl",kernelFunc:zyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uyt="return float(a >= 1.0 || b >= 1.0);",Vyt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Wyt=Gs({opSnippet:Uyt,packedOpSnippet:Vyt,dtype:"bool"}),Hyt={kernelName:mA,backendName:"webgl",kernelFunc:Wyt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gyt{constructor(t,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const a=n,o=t[3]-1;this.outputShape=t;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qyt{constructor(t,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=t[3]-1;this.outputShape=t;let l;const u=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xyt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:s,bias:a,alpha:o,beta:l}=r,u=pe().getBool("WEBGL_PACK_NORMALIZATION")?new qyt(i.shape,s,a,o,l):new Gyt(i.shape,s,a,o,l);return n.runWebGLProgram(u,[i],i.dtype)},Yyt={kernelName:gA,backendName:"webgl",kernelFunc:Xyt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kyt{constructor(t,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zyt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:s,dy:a}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=r,f=new Kyt(i.shape,o,l,u,c);return n.runWebGLProgram(f,[i,s,a],i.dtype)},Qyt={kernelName:vF,backendName:"webgl",kernelFunc:Zyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jyt(e,t,n,r){const i=we(t),a=we(e.shape)/i,o=Ke({inputs:{x:e},attrs:{shape:[a,i]},backend:r}),l=ib(o,e.dtype,"max",r),u=Ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:s,keepDims:a}=r,o=i.shape.length,l=rn(s,i.shape);let u=l;const c=ei(u,o),f=c!=null,d=n.shouldExecuteOnCPU([i]);let h=i;if(f){if(d){const C=n.texData.get(h.dataId).values,S=new Array(o);for(let k=0;k<S.length;k++)S[k]=i.shape[c[k]];const E=QK(C,i.shape,i.dtype,c,S);h=n.makeTensorInfo(S,i.dtype);const A=n.texData.get(h.dataId);A.values=E}else h=n8(i,c,n);u=yi(u.length,o)}Ws("max",u,o);const[m,g]=ds(h.shape,u);let b=m;a&&(b=gi(m,l));let x;if(d){const C=n.texData.get(h.dataId).values,S=apt(C,we(g),b,i.dtype);x=n.makeTensorInfo(b,i.dtype);const E=n.texData.get(x.dataId);E.values=S}else x=Jyt(h,g,b,n);return f&&n.disposeIntermediateTensorInfo(h),x}const ebt={kernelName:yA,backendName:"webgl",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tbt=JK+`
  return max(a, b);
`,nbt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rb+`
  return result;
`,rbt=Gs({opSnippet:tbt,packedOpSnippet:nbt,cpuKernelImpl:opt}),ibt={kernelName:uw,backendName:"webgl",kernelFunc:rbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;$_(i,"maxPool");const{filterSize:s,strides:a,pad:o,dimRoundingMode:l}=r,u=1;q(Vs(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=Pu(i.shape,s,a,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&dn(c.inShape,c.outShape))return il({inputs:{x:i},backend:n});const f=new kE(c,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const abt={kernelName:bA,backendName:"webgl",kernelFunc:sbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:s,strides:a,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],f=ip(i.shape,s,a,c,o,u,l),d=new tZ(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const lbt={kernelName:xA,backendName:"webgl",kernelFunc:obt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ubt{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,r=t.strideWidth,i=t.dilationHeight,s=t.effectiveFilterHeight,a=t.effectiveFilterWidth,o=s-1-t.padInfo.top,l=a-1-t.padInfo.left,u=s*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class cbt{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,r=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,a=t.dilationHeight,o=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=l-1-t.padInfo.front,d=u-1-t.padInfo.top,h=c-1-t.padInfo.left,m=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s}=t,a=s,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,f=[1,1,1],d=ip(a.shape,o,l,f,u,c),h=new tZ(d,"max",!0),m=n.runWebGLProgram(h,[a],a.dtype),g=new cbt(d),b=n.runWebGLProgram(g,[i,m],a.dtype);return n.disposeIntermediateTensorInfo(m),b}const dbt={kernelName:SF,backendName:"webgl",kernelFunc:fbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:s,output:a}=t,o=s;$_([s,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:f}=r,d=Pu(o.shape,l,u,1,c,f),h=!0,m=new kE(d,"max",h),g=n.runWebGLProgram(m,[o],o.dtype),b=new ubt(d),x=n.runWebGLProgram(b,[i,g],o.dtype);return n.disposeIntermediateTensorInfo(g),x}const pbt={kernelName:wF,backendName:"webgl",kernelFunc:hbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbt(e,t,n,r){let i=new kE(n,"max",!1);const s=r.runWebGLProgram(i,[e],"float32");i=new kE(n,"max",!0,!0,t);const a=r.runWebGLProgram(i,[e],"float32");return[s,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbt={kernelName:CF,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:s,pad:a,includeBatchInIndex:o}=t,l=n;q(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];q(Vs(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=Pu(r.shape,i,s,u,a),[f,d]=mbt(r,o,c,l);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybt(e,t,n,r){const i=we(t),a=we(e.shape)/i,o=Ke({inputs:{x:e},attrs:{shape:[a,i]},backend:r}),l=ib(o,"float32","mean",r),u=Ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bbt={kernelName:vA,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:i,axis:s}=t,a=n,o=r.shape.length,l=rn(s,r.shape);let u=l;const c=ei(u,o),f=c!=null,d=a.shouldExecuteOnCPU([r]),h=[];let m=r;if(f){if(d){const S=a.texData.get(m.dataId).values,E=new Array(o);for(let N=0;N<E.length;N++)E[N]=r.shape[c[N]];const A=QK(S,r.shape,r.dtype,c,E);m=a.makeTensorInfo(E,r.dtype);const k=a.texData.get(m.dataId);k.values=A}else m=n8(r,c,a);h.push(m),u=yi(u.length,o)}Ws("sum",u,o);const[g,b]=ds(m.shape,u);let x=g;i&&(x=gi(g,l));const w=ybt(m,b,x,a);for(const C of h)a.disposeIntermediateTensorInfo(C);return w}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r,o=i.shape.length,l=rn(s,i.shape);let u=l;const c=ei(u,o);let f=i;c!=null&&(f=Wa({inputs:{x:i},backend:n,attrs:{perm:c}}),u=yi(u.length,i.shape.length)),Ws("min",u,o);const[d,h]=ds(f.shape,u),m=we(h),g=Ke({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),b=ib(g,g.dtype,"min",n);let x;if(a){const w=gi(d,l);x=Ke({inputs:{x:b},backend:n,attrs:{shape:w}})}else x=Ke({inputs:{x:b},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(f),x}const vbt={kernelName:wA,backendName:"webgl",kernelFunc:xbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wbt=JK+`
  return min(a, b);
`,Sbt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+rb+`
  return result;
`,Cbt=Gs({opSnippet:wbt,packedOpSnippet:Sbt,cpuKernelImpl:lpt}),$bt={kernelName:cw,backendName:"webgl",kernelFunc:Cbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ebt{constructor(t,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+t[f]+c[1]);const i=t.length,s=ur(i),a=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+t[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kbt{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,g)=>m[0]+t[g]+m[1]);const i=t.length,s=ur(i),a=n.map(m=>m[0]).join(","),o=n.map((m,g)=>m[0]+t[g]).join(","),l=_a("rc",i),u=_a("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(i===1){const m=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const m=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${m}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[i-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Abt=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:i,mode:s}=n,a=pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kbt(r.shape,i,s):new Ebt(r.shape,i,s);return t.runWebGLProgram(a,[r],r.dtype)},_bt={kernelName:SA,backendName:"webgl",kernelFunc:Abt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tbt=`if (b == 0.0) return NAN;
  return mod(a, b);`,Nbt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+rb+`
  return result;
`,Dbt=Gs({opSnippet:Tbt,packedOpSnippet:Nbt}),Ibt={kernelName:fw,backendName:"webgl",kernelFunc:Dbt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Obt{constructor(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbt=`
if (a == b) {
  return 1.0;
};
return a / b;`,Fbt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,U$e=Gs({opSnippet:Rbt,packedOpSnippet:Fbt,checkOutOfBounds:!0}),Mbt={kernelName:Yv,backendName:"webgl",kernelFunc:U$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rfe="return a - b;",V$e=Gs({opSnippet:rfe,packedOpSnippet:rfe,supportsComplex:!0,cpuKernelImpl:Tpt}),Lbt={kernelName:Aw,backendName:"webgl",kernelFunc:V$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:s}=r,a=rn([s],i.shape),o=j$e({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=gi(o.shape,a),u=Ke({inputs:{x:o},backend:n,attrs:{shape:l}}),c=V$e({inputs:{a:i,b:u},backend:n}),f=P$e({inputs:{x:c},backend:n}),d=r8({inputs:{x:f},backend:n,attrs:{axis:a,keepDims:!1}}),h=Ke({inputs:{x:d},backend:n,attrs:{shape:l}}),m=U$e({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}const Pbt={kernelName:zA,backendName:"webgl",kernelFunc:W$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbt(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:s,seed:a,normalized:o}=r,l=o?i:W$e({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],f=new Obt(u,c,s),d=[[a]],h=n.runWebGLProgram(f,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),h}const zbt={kernelName:$F,backendName:"webgl",kernelFunc:Bbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jbt=zu+`
  return -x;
`,Ubt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Vbt(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[a,o]=cpt(s.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let i;return pe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new C0(r.shape,Ubt):i=new Af(r.shape,jbt),n.runWebGLProgram(i,[r],r.dtype)}const Wbt={kernelName:CA,backendName:"webgl",kernelFunc:Vbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hbt=OM;function Gbt(e){kl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),{selectedIndices:f}=Hbt(u,c,a,o,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const qbt={kernelName:EF,backendName:"webgl",kernelFunc:Gbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xbt=RM;function Ybt(e){kl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),{selectedIndices:d,validOutputs:h}=Xbt(c,f,a,o,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const Kbt={kernelName:kF,backendName:"webgl",kernelFunc:Ybt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zbt=FM;function Qbt(e){kl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:s}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=a,h=o,m=l,g=u,{selectedIndices:b,selectedScores:x}=Zbt(c,f,d,h,m,g);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const Jbt={kernelName:AF,backendName:"webgl",kernelFunc:Qbt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e2t{constructor(t,n,r,i){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2t=e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:s,depth:a,onValue:o,offValue:l}=r,u=we(i.shape),c=new e2t(u,a,o,l),f=Ke({inputs:{x:i},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[f],s);n.disposeIntermediateTensorInfo(f);const h=[...i.shape,a],m=Ke({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),m},n2t={kernelName:kA,backendName:"webgl",kernelFunc:t2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dR(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){const i=k_({inputs:{input:r},backend:n}),s=dR({inputs:{x:i},backend:n}),a=i8({inputs:{input:r},backend:n}),o=dR({inputs:{x:a},backend:n}),l=jm({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return A_({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const r2t={kernelName:WA,backendName:"webgl",kernelFunc:dR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=k_({inputs:{input:r},backend:n}),s=H$e({inputs:{x:i},backend:n}),a=i8({inputs:{input:r},backend:n}),o=dR({inputs:{x:a},backend:n}),l=jm({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return A_({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const i2t={kernelName:EA,backendName:"webgl",kernelFunc:H$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2t(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return MW({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const s=t[0].shape,a=t[0].dtype;t.forEach(c=>{Us(s,c.shape,"All tensors passed to stack must have matching shapes"),q(a===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(c=>{const f=MW({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(f),f}),u=N$e({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const a2t={kernelName:AA,backendName:"webgl",kernelFunc:s2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o2t{constructor(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+t[c]+u[1]);const i=t.length,s=ur(i),a=n.map(u=>u[0]).join(","),o=n.map((u,c)=>u[0]+t[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${a});
      ${s} end = ${s}(${o});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l2t{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,b)=>g[0]+t[b]+g[1]);const i=t.length,s=ur(i),a=n.map(g=>g[0]).join(","),o=n.map((g,b)=>g[0]+t[b]).join(","),l=_a("rc",i),u=_a("source",i),c=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,d=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${c}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let g=0,b=i===1?2:4;g<b;g++)m+=`
        ${d[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${g}] = getChannel(getX(${u.join()}), ${f});
        }
      `;m+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${a});
      const ${s} end = ${s}(${o});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G$e=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:s,constantValue:a}=r;if(we(i.shape)===0){const u=s.map((c,f)=>c[0]+i.shape[f]+c[1]);return A_({backend:n,attrs:{shape:u,value:a,dtype:i.dtype}})}const o=pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new l2t(i.shape,s,a):new o2t(i.shape,s,a),l=[[a]];return n.runWebGLProgram(o,[i],i.dtype,l)},u2t={kernelName:_A,backendName:"webgl",kernelFunc:G$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2t=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,f2t=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+rb+`
  return result;
`,d2t=Gs({opSnippet:c2t,packedOpSnippet:f2t}),h2t={kernelName:hw,backendName:"webgl",kernelFunc:d2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:s,keepDims:a}=r,o=i.shape.length,l=[],u=rn(s,i.shape);let c=u;const f=ei(c,o);let d=i;f!=null&&(d=Wa({inputs:{x:i},backend:n,attrs:{perm:f}}),c=yi(c.length,o),l.push(d)),Ws("prod",c,o);let h;if(n.shouldExecuteOnCPU([d])){const m=n.texData.get(d.dataId).values,{outVals:g,outShape:b,outDtype:x}=dpt(d.shape,d.dtype,m,c);h=n.makeTensorInfo(b,x,g)}else{const[m,g]=ds(d.shape,c),b=we(g),x=Ke({inputs:{x:d},backend:n,attrs:{shape:[-1,b]}}),w=JF(i.dtype),C=ib(x,w,"prod",n);h=Ke({inputs:{x:C},backend:n,attrs:{shape:m}}),l.push(x),l.push(C)}if(a){l.push(h);const m=gi(h.shape,u);h=Ke({inputs:{x:h},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const m2t={kernelName:NA,backendName:"webgl",kernelFunc:p2t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2t(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:s,indices:a}=t,{outputRaggedRank:o}=r,l=i.map(x=>n.readSync(x.dataId)),u=i.map(x=>x.shape),c=n.readSync(s.dataId),f=n.readSync(a.dataId),[d,h,m]=hpt(l,u,c,s.shape,s.dtype,f,a.shape,o),g=d.map(x=>n.makeTensorInfo([x.length],"int32",x)),b=n.makeTensorInfo(m,s.dtype,h);return g.concat([b])}const y2t={kernelName:_F,backendName:"webgl",kernelFunc:g2t};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2t(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:s}=t,a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=ppt(a,r.shape,r.dtype,o,i.shape,l,s.shape),f=n.makeTensorInfo([u.length],"int32",u),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const x2t={kernelName:TF,backendName:"webgl",kernelFunc:b2t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2t(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:s,defaultValue:a,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(s.dataId),f=n.readSync(a.dataId),d=o.map(b=>n.readSync(b.dataId)),h=o.map(b=>b.shape),[m,g]=mpt(u,i.shape,c,s.shape,s.dtype,f,a.shape,d,h,l);return n.makeTensorInfo(m,s.dtype,g)}const w2t={kernelName:NF,backendName:"webgl",kernelFunc:v2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$e=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:s,dtype:a}=n,o=gpt(r,i,s,a);return t.makeTensorInfo([o.length],a,o)},S2t={kernelName:DF,backendName:"webgl",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C2t="return 1.0 / x;",$2t=_n({opSnippet:C2t}),E2t={kernelName:pw,backendName:"webgl",kernelFunc:$2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2t=zu+`
  return (x < 0.0) ? 0.0 : x;
`,A2t=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_2t=_n({opSnippet:k2t,packedOpSnippet:A2t}),T2t={kernelName:mw,backendName:"webgl",kernelFunc:_2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2t=zu+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,D2t=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,I2t=_n({opSnippet:N2t,packedOpSnippet:D2t}),O2t={kernelName:gw,backendName:"webgl",kernelFunc:I2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R2t{constructor(t,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,u]=t;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let d;s?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F2t{constructor(t,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,u]=t;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r];let d;s?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,u]=o,c=pe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new F2t(i.shape,l,u,s,a):new R2t(i.shape,l,u,s,a);return n.runWebGLProgram(c,[i],"float32")}const L2t={kernelName:OA,backendName:"webgl",kernelFunc:M2t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P2t{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=t,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],u=[r&&a>1?a-1:a,r&&o>1?o-1:o],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:a}=r,o=new P2t(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const z2t={kernelName:RF,backendName:"webgl",kernelFunc:B2t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j2t{constructor(t,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[a,o,l,u]=t;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],d=i?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U2t{constructor(t,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,u]=t;this.outputShape=[a,n,r,u];const c=[i&&n>1?o-1:o,i&&r>1?l-1:l],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],d=i?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:s,halfPixelCenters:a,size:o}=r,[l,u]=o,c=pe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new U2t(i.shape,l,u,s,a):new j2t(i.shape,l,u,s,a);return n.runWebGLProgram(c,[i],i.dtype)}const W2t={kernelName:IA,backendName:"webgl",kernelFunc:V2t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H2t{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,a,o]=t,l=[r&&a>1?i-1:i,r&&o>1?s-1:s],u=[r&&a>1?a-1:a,r&&o>1?o-1:o],c=l[0]/u[0],f=l[1]/u[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:s}=t,{alignCorners:a}=r,o=new H2t(s.shape,i.shape,a);return n.runWebGLProgram(o,[s],s.dtype)}const q2t={kernelName:OF,backendName:"webgl",kernelFunc:G2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X2t{constructor(t,n){this.variableNames=["x"];const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const i=o=>n.indexOf(o)!==-1&&t[o]!==1?`${t[o]} - coords[${o}] - 1`:`coords[${o}]`,s=t.map((o,l)=>i(l)).join(","),a=ur(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y2t{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;const i=_a("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=ur(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${u(i.slice())};
          }
          if(${a}) {
            result.b = ${c(i.slice())};
            if(${s}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return d(m)}function u(m){return m[r-1]="("+m[r-1]+" + 1)",d(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",d(m)}function f(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",d(m)}function d(m){const g=t.map((w,C)=>h(C,m)),b=g.join(","),x=g.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${x}))`}function h(m,g){return n.indexOf(m)!==-1&&t[m]!==1?`${t[m]} - ${g[m]} - 1`:`${g[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:s}=r,a=i.shape.length,o=rn(s,i.shape);if(a===0)return il({inputs:{x:i},backend:n});const l=pe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Y2t(i.shape,o):new X2t(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}const Z2t={kernelName:RA,backendName:"webgl",kernelFunc:K2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q2t{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=t[1],i=t[2];this.outputShape=t;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2t={kernelName:ZF,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:s,center:a}=t,o=n,l=new Q2t(r.shape,s),[u,c]=GY(a,r.shape[1],r.shape[2]),f=[[u,c,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ext=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,txt=_n({opSnippet:ext}),nxt={kernelName:yw,backendName:"webgl",kernelFunc:txt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rxt="return inversesqrt(x);",ixt=_n({opSnippet:rxt,cpuKernelImpl:ypt}),sxt={kernelName:bw,backendName:"webgl",kernelFunc:ixt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nZ{constructor(t,n,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const u=ur(s.length),c=ur(a.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let g="";l&&(g="coords[0], coords[1]");const b=`getDefaultValue(${g})`,x=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${x};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class axt{constructor(t,n,r,i,s,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const u=ur(s.length),c=ur(a.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let g="";l&&(g="coords[0], coords[1]");const b=`getDefaultValue(${g})`,x=n>1?"strides[j]":"strides",w=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${x};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxt(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:s}=t,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=Pm(s,i,a),d=[f/u,u];if(f===0)return n.makeTensorInfo(a,i.dtype);const h=Ke({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),m=Ke({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;pe().getBool("WEBGL_PACK")?b=new axt(l,o,h.shape.length,m.shape.length,c,d):b=new nZ(l,o,h.shape.length,m.shape.length,c,d);const x=n.runWebGLProgram(b,[m,h,g],m.dtype),w=Ke({inputs:{x},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(g),w}const lxt={kernelName:FF,backendName:"webgl",kernelFunc:oxt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uxt{constructor(t,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];const s="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=pe().getNumber("WEBGL_VERSION")===2?s:a,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxt(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:s}=t,{side:a}=r,o=new uxt(i.shape[0],i.shape[1],s.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(o,[i,s],"int32",l)}const fxt={kernelName:LF,backendName:"webgl",kernelFunc:cxt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dxt{constructor(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${o[c]}`),c<t&&l.push(`${o[c]}`);i=l.join(),s=u.join()}const a=ur(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxt(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:s}=t,a=new dxt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,s],yo(i.dtype,s.dtype))}const pxt={kernelName:FA,backendName:"webgl",kernelFunc:hxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mxt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${zM};
  float scale = ${jM};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,gxt=_n({opSnippet:mxt}),yxt={kernelName:xw,backendName:"webgl",kernelFunc:gxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bxt=qw+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,xxt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vxt=_n({opSnippet:bxt,packedOpSnippet:xxt,cpuKernelImpl:xpt}),wxt={kernelName:Cw,backendName:"webgl",kernelFunc:vxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sxt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Cxt=_n({opSnippet:Sxt}),$xt={kernelName:Sw,backendName:"webgl",kernelFunc:Cxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ext=qw+`
  return sin(x);
`,kxt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${rb}
  return result;
`,Axt=_n({opSnippet:Ext,packedOpSnippet:kxt}),_xt={kernelName:vw,backendName:"webgl",kernelFunc:Axt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Txt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Nxt=_n({opSnippet:Txt}),Dxt={kernelName:ww,backendName:"webgl",kernelFunc:Nxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ixt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Oxt=_n({opSnippet:Ixt}),Rxt={kernelName:$w,backendName:"webgl",kernelFunc:Oxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fxt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:s,paddings:a}=r;q(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=s.reduce((x,w)=>x*w),l=[[0,0]];l.push(...a);for(let x=1+s.length;x<i.shape.length;++x)l.push([0,0]);const u=[],c=G$e({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),f=d_(c.shape,s,o,!1),d=h_(f.length,s.length,!1),h=p_(c.shape,s,o,!1),m=Ke({inputs:{x:c},backend:n,attrs:{shape:f}}),g=Wa({inputs:{x:m},backend:n,attrs:{perm:d}}),b=Ke({inputs:{x:g},backend:n,attrs:{shape:h}});return u.push(c),u.push(m),u.push(g),u.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},Mxt={kernelName:PA,backendName:"webgl",kernelFunc:Fxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxt(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:s,defaultValue:a}=t;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(s.dataId),c=n.readSync(a.dataId)[0],[f,d,h,m,g]=wpt(o,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(b=>Number(b)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const Pxt={kernelName:PF,backendName:"webgl",kernelFunc:Lxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxt(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:s}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const a=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,c,f]=Spt(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([f.length],s.dtype,new Int32Array(f))]}const zxt={kernelName:BF,backendName:"webgl",kernelFunc:Bxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxt(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=y$e(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const Uxt={kernelName:zF,backendName:"webgl",kernelFunc:jxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxt(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const a=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(s.dataId),[u,c]=y$e(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}const Wxt={kernelName:jF,backendName:"webgl",kernelFunc:Vxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hxt(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:s,defaultValue:a}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=Pm(s,i,o),h=!1;if(s.dtype==="string"){const x=n.bufferSync(i),w=n.bufferSync(s),C=Vh(n.readSync(a.dataId)[0]),S=bpt(x,w,o,d,c,u,l,f,C,h);return n.makeTensorInfo(o,S.dtype,S.values)}const m=new nZ(u,l,i.shape.length,s.shape.length,f,[d,1],h),g=n.runWebGLProgram(m,[s,i,a],s.dtype),b=Ke({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(g),b}const Gxt={kernelName:UF,backendName:"webgl",kernelFunc:Hxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:s,axis:a}=r,o=rn(a,i.shape)[0],l=oK(i,s,o),u=i.shape.length,c=new Array(u).fill(0),f=i.shape.slice();return l.map(d=>{const h=[...f];h[o]=d;const m=Xw({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,m})}const Xxt={kernelName:BA,backendName:"webgl",kernelFunc:qxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ife="return sqrt(x);",Yxt=_n({opSnippet:ife,packedOpSnippet:ife,cpuKernelImpl:Cpt}),Kxt={kernelName:Ew,backendName:"webgl",kernelFunc:Yxt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zxt="return x * x;",Qxt=_n({opSnippet:Zxt}),Jxt={kernelName:VF,backendName:"webgl",kernelFunc:Qxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sfe="return (a - b) * (a - b);",evt=Gs({opSnippet:sfe,packedOpSnippet:sfe}),tvt={kernelName:kw,backendName:"webgl",kernelFunc:evt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nvt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),a=qh(s),o=$pt(a,"string",r);return n.makeTensorInfo(i.shape,"string",o)}const rvt={kernelName:jA,backendName:"webgl",kernelFunc:nvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ivt({inputs:e,attrs:t,backend:n}){const{x:r}=e,i=zu+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,s=new Af(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const svt={kernelName:Dw,backendName:"webgl",kernelFunc:ivt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class avt{constructor(t,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=ur(r.length),a=ur(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${t});
      ${s} strides = ${s}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ovt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:s,end:a,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:b,isSimpleSlice:x,begin:w,end:C,strides:S}=VY(i.shape,s,a,o,l,u,c,f,d);let E;if(g)E=Ke({inputs:{x:i},backend:n,attrs:{shape:m}});else if(b||x){q(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const k=zY(w,C,S),N=Xw({inputs:{x:i},backend:n,attrs:{begin:w,size:k}});E=Ke({inputs:{x:N},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([i])){const N=n.readSync(i.dataId),I=Zt(i.shape,i.dtype,N),T=Ept(h,I,S,w);E=n.makeTensorInfo(m,i.dtype,T.values)}else{const N=new avt(w,S,h);E=n.runWebGLProgram(N,[i],i.dtype)}const A=Ke({inputs:{x:E},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(E),A}const lvt={kernelName:WF,backendName:"webgl",kernelFunc:ovt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uvt(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:s,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:f}=t,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[m,g]=kpt(d,h,i,s,a,o,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",g)]}const cvt={kernelName:HF,backendName:"webgl",kernelFunc:uvt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fvt(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:s,delimiter:a}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(s.dataId),l=n.readSync(a.dataId)[0],[u,c,f]=Apt(o,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const dvt={kernelName:GF,backendName:"webgl",kernelFunc:fvt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hvt(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(s.dataId),o=_pt(a,i);return n.makeTensorInfo(s.shape,"int32",o)}const pvt={kernelName:qF,backendName:"webgl",kernelFunc:hvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mvt="return tan(x);",gvt=_n({opSnippet:mvt}),yvt={kernelName:_w,backendName:"webgl",kernelFunc:gvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bvt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,xvt=_n({opSnippet:bvt}),vvt={kernelName:Tw,backendName:"webgl",kernelFunc:xvt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wvt(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:s,updates:a}=t,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:f}=Pm(a,s,i.shape),d=[f/u,u];if(f===0)return n.makeTensorInfo(i.shape,s.dtype);const h=Ke({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),m=Ke({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),g=Ke({inputs:{x:i},backend:n,attrs:{shape:d}}),b=new nZ(l,o,h.shape.length,m.shape.length,c,d,!1,!0),x=n.runWebGLProgram(b,[m,h,g],g.dtype),w=Ke({inputs:{x},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),w}const Svt={kernelName:MF,backendName:"webgl",kernelFunc:wvt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cvt{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;const i=ur(this.rank),s=$vt(t);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function $vt(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),u=i.dtype==="string"?l.map(d=>Vh(d)):l,c=Zt(i.shape,i.dtype,u),f=Npt(c,s);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const a=new Cvt(i.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}const Evt={kernelName:Nw,backendName:"webgl",kernelFunc:X$e};class kvt{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Avt{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ng(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function afe(e){let t=1;for(;t<e;)t*=2;return t}function _vt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:s,sorted:a}=r,o=pe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=pe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<o||s>l){const T=n.readSync(i.dataId),[D,L]=Dpt(T,u,i.dtype,s,a);return[n.makeTensorInfo(D.shape,D.dtype,D.values),n.makeTensorInfo(L.shape,L.dtype,L.values)]}if(s===0)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[i,A_({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const f=n.texData.get(i.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(i):i,g=we(u)/c,b=Ke({inputs:{x:h},attrs:{shape:[g,c]},backend:n});d&&Ng(n,h);const x=afe(s),w=afe(c);let C=null;const S=()=>C===null?[b,b]:[b,C],E=(T,D,L)=>{const P=S(),M=new kvt(L),R=[[c],[C===null?1:0],[Number.NEGATIVE_INFINITY],[T],[D]],j=C;C=n.runWebGLProgram(M,P,"int32",R),Ng(n,j)};for(let T=1;T<x;T*=2){const D=T*2;for(let L=T;L>=1;L/=2)E(D,L,[g,w])}for(let T=w;T>x;T/=2){const D=S(),L=new Avt([g,T/2]),M=[[c],[C===null?1:0],[x]],F=C;C=n.runWebGLProgram(L,D,"int32",M),Ng(n,F);const R=x/2,j=R*2;for(let H=R;H>=1;H/=2)E(j,H,C.shape)}let A=C;C=Xw({inputs:{x:C},backend:n,attrs:{begin:0,size:[g,s]}}),Ng(n,A);let k=z$e({inputs:{x:b,indices:C},backend:n,attrs:{axis:1,batchDims:1}});Ng(n,b);const N=u.slice(0,-1);N.push(s),A=C,C=Ke({inputs:{x:C},attrs:{shape:N},backend:n}),Ng(n,A);const I=k;return k=Ke({inputs:{x:k},attrs:{shape:N},backend:n}),Ng(n,I),[k,C]}const Tvt={kernelName:XF,backendName:"webgl",kernelFunc:_vt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nvt{constructor(t,n,r,i,s,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dvt(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:s}=t,{interpolation:a,fillMode:o,fillValue:l,outputShape:u}=r,[c,f,d,h]=i.shape,[m,g]=u??[f,d],b=[c,m,g,h],x=new Nvt(f,d,a,o,l,b);return n.runWebGLProgram(x,[i,s],"float32")}const Ivt={kernelName:YF,backendName:"webgl",kernelFunc:Dvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ovt(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:s}=t;$_(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:u}=Ipt(a,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const Rvt={kernelName:KF,backendName:"webgl",kernelFunc:Ovt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fvt(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:s}=r;s<0&&(s+=i.shape.length);const a=i,o=a.shape.length,l=i.shape[s],u=new Array(o-1);let c=0;for(let g=0;g<o;g++)g!==s&&(u[c++]=a.shape[g]);const f=[],d=new Array(o).fill(0),h=a.shape.slice();h[s]=1;const m=new Array(l);for(let g=0;g<m.length;g++){d[s]=g;const b=Xw({inputs:{x:a},backend:n,attrs:{begin:d,size:h}}),x=Ke({inputs:{x:b},backend:n,attrs:{shape:u}});m[g]=x,f.push(b)}return f.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const Mvt={kernelName:UA,backendName:"webgl",kernelFunc:Fvt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lvt{constructor(t,n){this.variableNames=["x","segmentIds"];const r=t.windowSize,i=t.batchSize,s=t.inSize,a=t.numSegments,o=a*Math.ceil(s/r);this.outputShape=[i,o];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let m="";s%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pvt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:s}=t,{numSegments:a}=r,o=i.shape.length,l=[];let u=0;const c=ei([u],o);let f=i;c!=null&&(f=Wa({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(f),u=yi(1,o)[0]);const d=_we(f.shape,u,a),h=we([f.shape[u]]),m=Ke({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});l.push(m);const g=JF(i.dtype),b=(S,E,A,k,N)=>{const I=S.shape[0],T=S.shape[1],D=Awe(T,N),L={windowSize:D,inSize:T,batchSize:I,numSegments:N},P=new Lvt(L,E),M=n.compileAndRun(P,[S,A],k);if(l.push(M),M.shape[1]===N)return M;const F=q$e({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),R=X$e({inputs:{x:F},backend:n,attrs:{reps:[T/D]}});return l.push(F),l.push(R),b(M,E,R,k,N)},x=b(m,"unsortedSegmentSum",s,g,a),w=Ke({inputs:{x},backend:n,attrs:{shape:d}});let C=w;if(c!=null){l.push(w);const S=Rm(c);C=Wa({inputs:{x:C},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),C}const Bvt={kernelName:VA,backendName:"webgl",kernelFunc:Pvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zvt=[C0t,E0t,_0t,D0t,O0t,M0t,P0t,z0t,W0t,G0t,Y0t,Q0t,tmt,smt,lmt,cmt,dmt,gmt,bmt,vmt,$mt,Dmt,Omt,Lmt,Bmt,Hmt,qmt,Zmt,a0t,egt,sgt,ugt,mgt,bgt,vgt,Sgt,$gt,_gt,Dgt,Rgt,Mgt,Pgt,zgt,Vgt,Hgt,Ygt,Zgt,e1t,r1t,s1t,u1t,h1t,y1t,v1t,C1t,$1t,k1t,_1t,N1t,I1t,R1t,P1t,j1t,W1t,G1t,Y1t,Q1t,nyt,ayt,s0t,lyt,rgt,fyt,pyt,yyt,l0t,wyt,Eyt,Ayt,Dyt,Ryt,Pyt,jyt,Hyt,Yyt,Qyt,ebt,ibt,abt,lbt,dbt,pbt,gbt,bbt,vbt,$bt,_bt,Ibt,zbt,f0t,Wbt,qbt,Kbt,Jbt,jmt,n2t,i2t,a2t,u2t,h2t,c0t,m2t,y2t,x2t,w2t,S2t,Umt,Mbt,E2t,T2t,O2t,h0t,L2t,z2t,W2t,q2t,Z2t,J2t,nxt,sxt,lxt,fxt,pxt,yxt,wxt,$xt,_xt,Dxt,Tmt,Pbt,Rxt,Mxt,Pxt,zxt,Uxt,Wxt,Gxt,Xxt,Kxt,Jxt,tvt,rvt,svt,lvt,cvt,dvt,pvt,Lbt,v0t,yvt,vvt,Svt,Evt,Tvt,Ivt,w0t,Rvt,Mvt,Bvt,r2t];for(const e of zvt)QF(e);var q3={exports:{}};const jvt=_m(Sst),rZ=_m(VJe);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Uvt=q3.exports,ofe;function Vvt(){return ofe||(ofe=1,function(e,t){(function(n,r){r(t,jvt,rZ)})(Uvt,function(n,r,i){const s={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class a{constructor(l,u){this.modelPath=u||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=i.zeros([1,300,300,3],"int32"),u=await this.model.executeAsync(l);await Promise.all(u.map(c=>c.data())),u.map(c=>c.dispose()),l.dispose()}async infer(l,u,c){const f=i.tidy(()=>(l instanceof i.Tensor||(l=i.browser.fromPixels(l)),i.expandDims(l))),d=f.shape[1],h=f.shape[2],m=await this.model.executeAsync(f),g=m[0].dataSync(),b=m[1].dataSync();f.dispose(),i.dispose(m);const[x,w]=this.calculateMaxScores(g,m[0].shape[1],m[0].shape[2]),C=i.getBackend();i.getBackend()==="webgl"&&i.setBackend("cpu");const S=i.tidy(()=>{const A=i.tensor2d(b,[m[1].shape[1],m[1].shape[3]]);return i.image.nonMaxSuppression(A,x,u,c,c)}),E=S.dataSync();return S.dispose(),C!==i.getBackend()&&i.setBackend(C),this.buildDetectedObjects(h,d,b,x,E,w)}buildDetectedObjects(l,u,c,f,d,h){const m=d.length,g=[];for(let b=0;b<m;b++){const x=[];for(let A=0;A<4;A++)x[A]=c[4*d[b]+A];const w=x[0]*u,C=x[1]*l,S=x[2]*u,E=x[3]*l;x[0]=C,x[1]=w,x[2]=E-C,x[3]=S-w,g.push({bbox:x,class:s[h[d[b]]+1].displayName,score:f[d[b]]})}return g}calculateMaxScores(l,u,c){const f=[],d=[];for(let h=0;h<u;h++){let m=Number.MIN_VALUE,g=-1;for(let b=0;b<c;b++)l[h*c+b]>m&&(m=l[h*c+b],g=b);f[h]=m,d[h]=g}return[f,d]}async detect(l,u=20,c=.5){return this.infer(l,u,c)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=a,n.load=async function(o={}){if(i==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=o.base||"lite_mobilenet_v2",u=o.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const c=new a(l,u);return await c.load(),c},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})})}(q3,q3.exports)),q3.exports}var Wvt=Vvt();const Hvt=({videoRef:e,canvasRef:t,enabled:n})=>{const[r,i]=U.useState(null),[s,a]=U.useState(!1),[o,l]=U.useState(!1),u=U.useRef(null),c=U.useRef(!0),f=100,d=()=>{u.current&&(clearTimeout(u.current),u.current=null)},h=U.useCallback(async()=>{if(c.current)try{await $xe(),await Cxe("webgl"),l(!0)}catch(w){console.error("Error initializing TensorFlow:",w)}},[]),m=U.useCallback(async()=>{if(!(!c.current||!o))try{const w=await Wvt.load();c.current&&(i(w),a(!0))}catch(w){console.error("Error loading COCO-SSD model:",w)}},[o]),g=U.useCallback(async()=>{if(!(!c.current||!r||!e.current||!t.current||!n||!o))try{if(e.current.readyState!==4||e.current.videoWidth===0||e.current.videoHeight===0){u.current=setTimeout(g,f);return}t.current.width!==e.current.videoWidth&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight);let w=[];await Cs().startScope();try{w=await r.detect(e.current)}finally{Cs().endScope()}if(!c.current||!t.current)return;const C=t.current.getContext("2d");if(!C)return;C.clearRect(0,0,C.canvas.width,C.canvas.height),w.forEach(S=>{const[E,A,k,N]=S.bbox;C.strokeStyle="#00ff00",C.lineWidth=2,C.strokeRect(E,A,k,N),C.fillStyle="rgba(0, 255, 0, 0.3)";const I=`${S.class} ${Math.round(S.score*100)}%`,T=C.measureText(I).width;C.fillRect(E,A-20,T+10,20),C.fillStyle="#000000",C.font="16px Arial",C.fillText(I,E+5,A-5)}),c.current&&n&&(u.current=setTimeout(g,f))}catch(w){console.error("Error during detection:",w),Cs().isTapeOn()&&Cs().endScope(),c.current&&n&&(u.current=setTimeout(g,f))}},[r,e,t,n,o]),b=U.useCallback(()=>{!s||!o||(d(),g())},[s,g,o]),x=U.useCallback(()=>{if(d(),t.current){const w=t.current.getContext("2d");w&&w.clearRect(0,0,t.current.width,t.current.height)}Cs().isTapeOn()&&Cs().endScope(),Cs().disposeVariables()},[t]);return U.useEffect(()=>{h()},[]),U.useEffect(()=>{o&&m()},[o,m]),U.useEffect(()=>(n&&s&&o?b():x(),d),[n,s,o,b,x]),U.useEffect(()=>(c.current=!0,()=>{c.current=!1,x()}),[]),{isModelLoaded:s&&o,startDetection:b,stopDetection:x}},Gvt={},qvt=()=>{const e=U.useRef(null),t=U.useRef(null),n=U.useRef(null),r=U.useRef(!0),[i,s]=U.useState(!1),[a,o]=U.useState(!0),{stopDetection:l,isModelLoaded:u}=Hvt({videoRef:e,canvasRef:t,enabled:a&&i}),c=async()=>{if(r.current)try{const h=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});if(!r.current){h.getTracks().forEach(m=>m.stop());return}n.current=h,e.current&&(e.current.srcObject=h,await e.current.play(),r.current&&s(!0))}catch(h){console.error("Error accessing camera:",h),s(!1)}},f=()=>{try{n.current&&(n.current.getTracks().forEach(m=>{try{m.stop()}catch(g){console.error("Error stopping track:",g)}}),n.current=null),e.current&&(e.current.srcObject=null,e.current.load()),l(),r.current&&s(!1)}catch(h){console.error("Error stopping camera:",h)}},d=h=>{if(r.current&&(o(h),!h&&(l(),t.current))){const m=t.current.getContext("2d");m==null||m.clearRect(0,0,t.current.width,t.current.height)}};return U.useEffect(()=>(r.current=!0,()=>{r.current=!1,f()}),[]),W.jsxs(Xt,{children:[W.jsxs(Xt,{className:Gvt.header,children:[W.jsx(Y2e,{color:"primary"}),W.jsx(mt,{variant:"h5",component:"h2",children:"Camera Feed"})]}),W.jsxs(rx,{spacing:2,children:[W.jsx(mHe,{videoRef:e,canvasRef:t,isStarted:i}),W.jsx(gHe,{isStarted:i,isClassifying:a,isModelLoaded:u,onStart:c,onStop:f,onClassificationToggle:d})]})]})},Xvt=()=>W.jsxs(Wy,{maxWidth:"lg",sx:{py:4},children:[W.jsx(mt,{variant:"h4",component:"h1",gutterBottom:!0,children:"Smart Cam Exercise"}),W.jsx(LV,{sx:{mb:4},children:W.jsx(PV,{children:W.jsx(fHe,{})})}),W.jsx(LV,{children:W.jsx(PV,{children:W.jsx(M1,{children:W.jsx(qvt,{})})})})]});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function __(e){return e+.5|0}const $0=(e,t,n)=>Math.max(Math.min(e,n),t);function X3(e){return $0(__(e*2.55),0,255)}function z0(e){return $0(__(e*255),0,255)}function ch(e){return $0(__(e/2.55)/100,0,1)}function lfe(e){return $0(__(e*100),0,100)}const iu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},LW=[..."0123456789ABCDEF"],Yvt=e=>LW[e&15],Kvt=e=>LW[(e&240)>>4]+LW[e&15],j4=e=>(e&240)>>4===(e&15),Zvt=e=>j4(e.r)&&j4(e.g)&&j4(e.b)&&j4(e.a);function Qvt(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&iu[e[1]]*17,g:255&iu[e[2]]*17,b:255&iu[e[3]]*17,a:t===5?iu[e[4]]*17:255}:(t===7||t===9)&&(n={r:iu[e[1]]<<4|iu[e[2]],g:iu[e[3]]<<4|iu[e[4]],b:iu[e[5]]<<4|iu[e[6]],a:t===9?iu[e[7]]<<4|iu[e[8]]:255})),n}const Jvt=(e,t)=>e<255?t(e):"";function ewt(e){var t=Zvt(e)?Yvt:Kvt;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Jvt(e.a,t):void 0}const twt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Y$e(e,t,n){const r=t*Math.min(n,1-n),i=(s,a=(s+e/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function nwt(e,t,n){const r=(i,s=(i+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function rwt(e,t,n){const r=Y$e(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function iwt(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}function iZ(e){const n=e.r/255,r=e.g/255,i=e.b/255,s=Math.max(n,r,i),a=Math.min(n,r,i),o=(s+a)/2;let l,u,c;return s!==a&&(c=s-a,u=o>.5?c/(2-s-a):c/(s+a),l=iwt(n,r,i,c,s),l=l*60+.5),[l|0,u||0,o]}function sZ(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(z0)}function aZ(e,t,n){return sZ(Y$e,e,t,n)}function swt(e,t,n){return sZ(rwt,e,t,n)}function awt(e,t,n){return sZ(nwt,e,t,n)}function K$e(e){return(e%360+360)%360}function owt(e){const t=twt.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?X3(+t[5]):z0(+t[5]));const i=K$e(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=swt(i,s,a):t[1]==="hsv"?r=awt(i,s,a):r=aZ(i,s,a),{r:r[0],g:r[1],b:r[2],a:n}}function lwt(e,t){var n=iZ(e);n[0]=K$e(n[0]+t),n=aZ(n),e.r=n[0],e.g=n[1],e.b=n[2]}function uwt(e){if(!e)return;const t=iZ(e),n=t[0],r=lfe(t[1]),i=lfe(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${ch(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const ufe={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cfe={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cwt(){const e={},t=Object.keys(cfe),n=Object.keys(ufe);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,ufe[s]);s=parseInt(cfe[a],16),e[o]=[s>>16&255,s>>8&255,s&255]}return e}let U4;function fwt(e){U4||(U4=cwt(),U4.transparent=[0,0,0,0]);const t=U4[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const dwt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hwt(e){const t=dwt.exec(e);let n=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];n=t[8]?X3(a):$0(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?X3(r):$0(r,0,255)),i=255&(t[4]?X3(i):$0(i,0,255)),s=255&(t[6]?X3(s):$0(s,0,255)),{r,g:i,b:s,a:n}}}function pwt(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ch(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const xz=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,w2=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function mwt(e,t,n){const r=w2(ch(e.r)),i=w2(ch(e.g)),s=w2(ch(e.b));return{r:z0(xz(r+n*(w2(ch(t.r))-r))),g:z0(xz(i+n*(w2(ch(t.g))-i))),b:z0(xz(s+n*(w2(ch(t.b))-s))),a:e.a+n*(t.a-e.a)}}function V4(e,t,n){if(e){let r=iZ(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=aZ(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function Z$e(e,t){return e&&Object.assign(t||{},e)}function ffe(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=z0(e[3]))):(t=Z$e(e,{r:0,g:0,b:0,a:1}),t.a=z0(t.a)),t}function gwt(e){return e.charAt(0)==="r"?hwt(e):owt(e)}let Q$e=class PW{constructor(t){if(t instanceof PW)return t;const n=typeof t;let r;n==="object"?r=ffe(t):n==="string"&&(r=Qvt(t)||fwt(t)||gwt(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=Z$e(this._rgb);return t&&(t.a=ch(t.a)),t}set rgb(t){this._rgb=ffe(t)}rgbString(){return this._valid?pwt(this._rgb):void 0}hexString(){return this._valid?ewt(this._rgb):void 0}hslString(){return this._valid?uwt(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,i=t.rgb;let s;const a=n===s?.5:n,o=2*a-1,l=r.a-i.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=mwt(this._rgb,t._rgb,n)),this}clone(){return new PW(this.rgb)}alpha(t){return this._rgb.a=z0(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=__(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return V4(this._rgb,2,t),this}darken(t){return V4(this._rgb,2,-t),this}saturate(t){return V4(this._rgb,1,t),this}desaturate(t){return V4(this._rgb,1,-t),this}rotate(t){return lwt(this._rgb,t),this}};/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Kd(){}const ywt=(()=>{let e=0;return()=>e++})();function kr(e){return e==null}function As(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Gn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Tu(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function rf(e,t){return Tu(e)?e:t}function In(e,t){return typeof e>"u"?t:e}const bwt=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Pr(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function ir(e,t,n,r){let i,s,a;if(As(e))for(s=e.length,i=0;i<s;i++)t.call(n,e[i],i);else if(Gn(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function hR(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function pR(e){if(As(e))return e.map(pR);if(Gn(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=pR(e[n[i]]);return t}return e}function J$e(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function xwt(e,t,n,r){if(!J$e(e))return;const i=t[e],s=n[e];Gn(i)&&Gn(s)?_E(i,s,r):t[e]=pR(s)}function _E(e,t,n){const r=As(t)?t:[t],i=r.length;if(!Gn(e))return e;n=n||{};const s=n.merger||xwt;let a;for(let o=0;o<i;++o){if(a=r[o],!Gn(a))continue;const l=Object.keys(a);for(let u=0,c=l.length;u<c;++u)s(l[u],e,a,n)}return e}function _$(e,t){return _E(e,t,{merger:vwt})}function vwt(e,t,n){if(!J$e(e))return;const r=t[e],i=n[e];Gn(r)&&Gn(i)?_$(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=pR(i))}const dfe={"":e=>e,x:e=>e.x,y:e=>e.y};function wwt(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Swt(e){const t=wwt(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function mR(e,t){return(dfe[t]||(dfe[t]=Swt(t)))(e)}function oZ(e){return e.charAt(0).toUpperCase()+e.slice(1)}const gR=e=>typeof e<"u",lm=e=>typeof e=="function",hfe=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Cwt(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ps=Math.PI,Lf=2*Ps,$wt=Lf+Ps,yR=Number.POSITIVE_INFINITY,Ewt=Ps/180,cc=Ps/2,Dg=Ps/4,pfe=Ps*2/3,eEe=Math.log10,Bx=Math.sign;function T$(e,t,n){return Math.abs(e-t)<n}function mfe(e){const t=Math.round(e);e=T$(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(eEe(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function kwt(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((i,s)=>i-s).pop(),t}function Awt(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function zx(e){return!Awt(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function _wt(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Twt(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function $1(e){return e*(Ps/180)}function Nwt(e){return e*(180/Ps)}function gfe(e){if(!Tu(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Dwt(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Ps&&(s+=Lf),{angle:s,distance:i}}function BW(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Iwt(e,t){return(e-t+$wt)%Lf-Ps}function o0(e){return(e%Lf+Lf)%Lf}function tEe(e,t,n,r){const i=o0(e),s=o0(t),a=o0(n),o=o0(s-i),l=o0(a-i),u=o0(i-s),c=o0(i-a);return i===s||i===a||r&&s===a||o>l&&u<c}function bu(e,t,n){return Math.max(t,Math.min(n,e))}function Owt(e){return bu(e,-32768,32767)}function Y3(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function lZ(e,t,n){n=n||(a=>e[a]<t);let r=e.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const E1=(e,t,n,r)=>lZ(e,n,r?i=>{const s=e[i][t];return s<n||s===n&&e[i+1][t]===n}:i=>e[i][t]<n),Rwt=(e,t,n)=>lZ(e,n,r=>e[r][t]>=n);function Fwt(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}const nEe=["push","pop","shift","splice","unshift"];function Mwt(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),nEe.forEach(n=>{const r="_onData"+oZ(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return e._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function yfe(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(nEe.forEach(s=>{delete e[s]}),delete e._chartjs)}function Lwt(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const rEe=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function iEe(e,t){let n=[],r=!1;return function(...i){n=i,r||(r=!0,rEe.call(window,()=>{r=!1,e.apply(t,n)}))}}function Pwt(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const uZ=e=>e==="start"?"left":e==="end"?"right":"center",va=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Bwt=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function sEe(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,c=a.axis,{min:f,max:d,minDefined:h,maxDefined:m}=a.getUserBounds();if(h){if(i=Math.min(E1(l,c,f).lo,n?r:E1(t,c,a.getPixelForValue(f)).lo),u){const g=l.slice(0,i+1).reverse().findIndex(b=>!kr(b[o.axis]));i-=Math.max(0,g)}i=bu(i,0,r-1)}if(m){let g=Math.max(E1(l,a.axis,d,!0).hi+1,n?0:E1(t,c,a.getPixelForValue(d),!0).hi+1);if(u){const b=l.slice(g-1).findIndex(x=>!kr(x[o.axis]));g+=Math.max(0,b)}s=bu(g,i,r)-i}else s=r-i}return{start:i,count:s}}function aEe(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const W4=e=>e===0||e===1,bfe=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Lf/n)),xfe=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Lf/n)+1,N$={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*cc)+1,easeOutSine:e=>Math.sin(e*cc),easeInOutSine:e=>-.5*(Math.cos(Ps*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>W4(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>W4(e)?e:bfe(e,.075,.3),easeOutElastic:e=>W4(e)?e:xfe(e,.075,.3),easeInOutElastic(e){return W4(e)?e:e<.5?.5*bfe(e*2,.1125,.45):.5+.5*xfe(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-N$.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?N$.easeInBounce(e*2)*.5:N$.easeOutBounce(e*2-1)*.5+.5};function cZ(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function vfe(e){return cZ(e)?e:new Q$e(e)}function vz(e){return cZ(e)?e:new Q$e(e).saturate(.5).darken(.1).hexString()}const zwt=["x","y","borderWidth","radius","tension"],jwt=["color","borderColor","backgroundColor"];function Uwt(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:jwt},numbers:{type:"number",properties:zwt}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Vwt(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const wfe=new Map;function Wwt(e,t){t=t||{};const n=e+JSON.stringify(t);let r=wfe.get(n);return r||(r=new Intl.NumberFormat(e,t),wfe.set(n,r)),r}function oEe(e,t,n){return Wwt(t,n).format(e)}const Hwt={values(e){return As(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=Gwt(e,n)}const a=eEe(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),oEe(e,r,l)}};function Gwt(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var lEe={formatters:Hwt};function qwt(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lEe.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Cy=Object.create(null),zW=Object.create(null);function D$(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];e=e[s]||(e[s]=Object.create(null))}return e}function wz(e,t,n){return typeof t=="string"?_E(D$(e,t),n):_E(D$(e,""),t)}class Xwt{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>vz(i.backgroundColor),this.hoverBorderColor=(r,i)=>vz(i.borderColor),this.hoverColor=(r,i)=>vz(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return wz(this,t,n)}get(t){return D$(this,t)}describe(t,n){return wz(zW,t,n)}override(t,n){return wz(Cy,t,n)}route(t,n,r,i){const s=D$(this,t),a=D$(this,r),o="_"+n;Object.defineProperties(s,{[o]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[o],u=a[i];return Gn(l)?Object.assign({},u,l):In(l,u)},set(l){this[o]=l}}})}apply(t){t.forEach(n=>n(this))}}var _i=new Xwt({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Uwt,Vwt,qwt]);function Ywt(e){return!e||kr(e.size)||kr(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Sfe(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ig(e,t,n){const r=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Cfe(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function jW(e,t,n,r){uEe(e,t,n,r,null)}function uEe(e,t,n,r,i){let s,a,o,l,u,c,f,d;const h=t.pointStyle,m=t.rotation,g=t.radius;let b=(m||0)*Ewt;if(h&&typeof h=="object"&&(s=h.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(b),e.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),h){default:i?e.ellipse(n,r,i/2,g,0,0,Lf):e.arc(n,r,g,0,Lf),e.closePath();break;case"triangle":c=i?i/2:g,e.moveTo(n+Math.sin(b)*c,r-Math.cos(b)*g),b+=pfe,e.lineTo(n+Math.sin(b)*c,r-Math.cos(b)*g),b+=pfe,e.lineTo(n+Math.sin(b)*c,r-Math.cos(b)*g),e.closePath();break;case"rectRounded":u=g*.516,l=g-u,a=Math.cos(b+Dg)*l,f=Math.cos(b+Dg)*(i?i/2-u:l),o=Math.sin(b+Dg)*l,d=Math.sin(b+Dg)*(i?i/2-u:l),e.arc(n-f,r-o,u,b-Ps,b-cc),e.arc(n+d,r-a,u,b-cc,b),e.arc(n+f,r+o,u,b,b+cc),e.arc(n-d,r+a,u,b+cc,b+Ps),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,c=i?i/2:l,e.rect(n-c,r-l,2*c,2*l);break}b+=Dg;case"rectRot":f=Math.cos(b)*(i?i/2:g),a=Math.cos(b)*g,o=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),e.moveTo(n-f,r-o),e.lineTo(n+d,r-a),e.lineTo(n+f,r+o),e.lineTo(n-d,r+a),e.closePath();break;case"crossRot":b+=Dg;case"cross":f=Math.cos(b)*(i?i/2:g),a=Math.cos(b)*g,o=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),e.moveTo(n-f,r-o),e.lineTo(n+f,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"star":f=Math.cos(b)*(i?i/2:g),a=Math.cos(b)*g,o=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),e.moveTo(n-f,r-o),e.lineTo(n+f,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a),b+=Dg,f=Math.cos(b)*(i?i/2:g),a=Math.cos(b)*g,o=Math.sin(b)*g,d=Math.sin(b)*(i?i/2:g),e.moveTo(n-f,r-o),e.lineTo(n+f,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"line":a=i?i/2:Math.cos(b)*g,o=Math.sin(b)*g,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(b)*(i?i/2:g),r+Math.sin(b)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function TE(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function fZ(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function dZ(e){e.restore()}function Kwt(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else i==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Zwt(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Qwt(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),kr(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Jwt(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,c),e.lineTo(o,c),e.stroke()}}function eSt(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function NE(e,t,n,r,i,s={}){const a=As(t)?t:[t],o=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(e.save(),e.font=i.string,Qwt(e,s),l=0;l<a.length;++l)u=a[l],s.backdrop&&eSt(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),kr(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(u,n,r,s.maxWidth)),e.fillText(u,n,r,s.maxWidth),Jwt(e,n,r,u,s),r+=Number(i.lineHeight);e.restore()}function UW(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Ps,Ps,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Ps,cc,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,cc,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-cc,!0),e.lineTo(n+a.topLeft,r)}const tSt=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,nSt=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rSt(e,t){const n=(""+e).match(tSt);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const iSt=e=>+e||0;function cEe(e,t){const n={},r=Gn(t),i=r?Object.keys(t):t,s=Gn(e)?r?a=>In(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of i)n[a]=iSt(s(a));return n}function sSt(e){return cEe(e,{top:"y",right:"x",bottom:"y",left:"x"})}function I$(e){return cEe(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Nu(e){const t=sSt(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Na(e,t){e=e||{},t=t||_i.font;let n=In(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=In(e.style,t.style);r&&!(""+r).match(nSt)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:In(e.family,t.family),lineHeight:rSt(In(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:In(e.weight,t.weight),string:""};return i.string=Ywt(i),i}function H4(e,t,n,r){let i,s,a;for(i=0,s=e.length;i<s;++i)if(a=e[i],a!==void 0&&a!==void 0)return a}function aSt(e,t,n){const{min:r,max:i}=e,s=bwt(t,(i-r)/2),a=(o,l)=>n&&o===0?0:o+l;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function sb(e,t){return Object.assign(Object.create(e),t)}function hZ(e,t=[""],n,r,i=()=>e[0]){const s=n||e;typeof r>"u"&&(r=pEe("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>hZ([o,...e],t,s,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete e[0][l],!0},get(o,l){return dEe(o,l,()=>pSt(l,t,e,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,l){return Efe(o).includes(l)},ownKeys(o){return Efe(o)},set(o,l,u){const c=o._storage||(o._storage=i());return o[l]=c[l]=u,delete o._keys,!0}})}function jx(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:fEe(e,r),setContext:s=>jx(e,s,n,r),override:s=>jx(e.override(s),t,n,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete e[a],!0},get(s,a,o){return dEe(s,a,()=>lSt(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(s,a,o){return e[a]=o,delete s[a],!0}})}function fEe(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:lm(n)?n:()=>n,isIndexable:lm(r)?r:()=>r}}const oSt=(e,t)=>e?e+oZ(t):t,pZ=(e,t)=>Gn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function dEe(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function lSt(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];return lm(o)&&a.isScriptable(t)&&(o=uSt(t,o,e,n)),As(o)&&o.length&&(o=cSt(t,o,e,a.isIndexable)),pZ(t,o)&&(o=jx(o,i,s&&s[t],a)),o}function uSt(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);return o.delete(e),pZ(e,l)&&(l=mZ(i._scopes,i,e,l)),l}function cSt(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if(typeof s.index<"u"&&r(e))return t[s.index%t.length];if(Gn(t[0])){const l=t,u=i._scopes.filter(c=>c!==l);t=[];for(const c of l){const f=mZ(u,i,e,c);t.push(jx(f,s,a&&a[e],o))}}return t}function hEe(e,t,n){return lm(e)?e(t,n):e}const fSt=(e,t)=>e===!0?t:typeof e=="string"?mR(t,e):void 0;function dSt(e,t,n,r,i){for(const s of t){const a=fSt(n,s);if(a){e.add(a);const o=hEe(a._fallback,n,i);if(typeof o<"u"&&o!==n&&o!==r)return o}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function mZ(e,t,n,r){const i=t._rootScopes,s=hEe(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=$fe(o,a,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=$fe(o,a,s,l,r),l===null)?!1:hZ(Array.from(o),[""],i,s,()=>hSt(t,n,r))}function $fe(e,t,n,r,i){for(;n;)n=dSt(e,t,n,r,i);return n}function hSt(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];return As(i)&&Gn(n)?n:i||{}}function pSt(e,t,n,r){let i;for(const s of t)if(i=pEe(oSt(s,e),n),typeof i<"u")return pZ(e,i)?mZ(n,r,e,i):i}function pEe(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function Efe(e){let t=e._keys;return t||(t=e._keys=mSt(e._scopes)),t}function mSt(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const gSt=Number.EPSILON||1e-14,Ux=(e,t)=>t<e.length&&!e[t].skip&&e[t],mEe=e=>e==="x"?"y":"x";function ySt(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=BW(s,i),l=BW(a,s);let u=o/(o+l),c=l/(o+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const f=r*u,d=r*c;return{previous:{x:s.x-f*(a.x-i.x),y:s.y-f*(a.y-i.y)},next:{x:s.x+d*(a.x-i.x),y:s.y+d*(a.y-i.y)}}}function bSt(e,t,n){const r=e.length;let i,s,a,o,l,u=Ux(e,0);for(let c=0;c<r-1;++c)if(l=u,u=Ux(e,c+1),!(!l||!u)){if(T$(t[c],0,gSt)){n[c]=n[c+1]=0;continue}i=n[c]/t[c],s=n[c+1]/t[c],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),n[c]=i*a*t[c],n[c+1]=s*a*t[c])}}function xSt(e,t,n="x"){const r=mEe(n),i=e.length;let s,a,o,l=Ux(e,0);for(let u=0;u<i;++u){if(a=o,o=l,l=Ux(e,u+1),!o)continue;const c=o[n],f=o[r];a&&(s=(c-a[n])/3,o[`cp1${n}`]=c-s,o[`cp1${r}`]=f-s*t[u]),l&&(s=(l[n]-c)/3,o[`cp2${n}`]=c+s,o[`cp2${r}`]=f+s*t[u])}}function vSt(e,t="x"){const n=mEe(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,u=Ux(e,0);for(a=0;a<r;++a)if(o=l,l=u,u=Ux(e,a+1),!!l){if(u){const c=u[t]-l[t];i[a]=c!==0?(u[n]-l[n])/c:0}s[a]=o?u?Bx(i[a-1])!==Bx(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}bSt(e,i,s),xSt(e,s,t)}function G4(e,t,n){return Math.max(Math.min(e,n),t)}function wSt(e,t){let n,r,i,s,a,o=TE(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&TE(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=G4(i.cp1x,t.left,t.right),i.cp1y=G4(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=G4(i.cp2x,t.left,t.right),i.cp2y=G4(i.cp2y,t.top,t.bottom)))}function SSt(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")vSt(e,i);else{let u=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=ySt(u,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}t.capBezierPoints&&wSt(e,n)}function gZ(){return typeof window<"u"&&typeof document<"u"}function yZ(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function bR(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const s8=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function CSt(e,t){return s8(e).getPropertyValue(t)}const $St=["top","right","bottom","left"];function U1(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=$St[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const ESt=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function kSt(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a=!1,o,l;if(ESt(i,s,e.target))o=i,l=s;else{const u=t.getBoundingClientRect();o=r.clientX-u.left,l=r.clientY-u.top,a=!0}return{x:o,y:l,box:a}}function Jg(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=s8(n),s=i.boxSizing==="border-box",a=U1(i,"padding"),o=U1(i,"border","width"),{x:l,y:u,box:c}=kSt(e,n),f=a.left+(c&&o.left),d=a.top+(c&&o.top);let{width:h,height:m}=t;return s&&(h-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-f)/h*n.width/r),y:Math.round((u-d)/m*n.height/r)}}function ASt(e,t,n){let r,i;if(t===void 0||n===void 0){const s=e&&yZ(e);if(!s)t=e.clientWidth,n=e.clientHeight;else{const a=s.getBoundingClientRect(),o=s8(s),l=U1(o,"border","width"),u=U1(o,"padding");t=a.width-u.width-l.width,n=a.height-u.height-l.height,r=bR(o.maxWidth,s,"clientWidth"),i=bR(o.maxHeight,s,"clientHeight")}}return{width:t,height:n,maxWidth:r||yR,maxHeight:i||yR}}const q4=e=>Math.round(e*10)/10;function _St(e,t,n,r){const i=s8(e),s=U1(i,"margin"),a=bR(i.maxWidth,e,"clientWidth")||yR,o=bR(i.maxHeight,e,"clientHeight")||yR,l=ASt(e,t,n);let{width:u,height:c}=l;if(i.boxSizing==="content-box"){const d=U1(i,"border","width"),h=U1(i,"padding");u-=h.width+d.width,c-=h.height+d.height}return u=Math.max(0,u-s.width),c=Math.max(0,r?u/r:c-s.height),u=q4(Math.min(u,a,l.maxWidth)),c=q4(Math.min(c,o,l.maxHeight)),u&&!c&&(c=q4(u/2)),(t!==void 0||n!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,u=q4(Math.floor(c*r))),{width:u,height:c}}function kfe(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const TSt=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};gZ()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Afe(e,t){const n=CSt(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function e1(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function NSt(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function DSt(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=e1(e,i,n),o=e1(i,s,n),l=e1(s,t,n),u=e1(a,o,n),c=e1(o,l,n);return e1(u,c,n)}const ISt=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},OSt=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ux(e,t,n){return e?ISt(t,n):OSt()}function gEe(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function yEe(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function bEe(e){return e==="angle"?{between:tEe,compare:Iwt,normalize:o0}:{between:Y3,compare:(t,n)=>t-n,normalize:t=>t}}function _fe({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:i}}function RSt(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=bEe(r),l=t.length;let{start:u,end:c,loop:f}=e,d,h;if(f){for(u+=l,c+=l,d=0,h=l;d<h&&a(o(t[u%l][r]),i,s);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:f,style:e.style}}function FSt(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:u}=bEe(r),{start:c,end:f,loop:d,style:h}=RSt(e,t,n),m=[];let g=!1,b=null,x,w,C;const S=()=>l(i,C,x)&&o(i,C)!==0,E=()=>o(s,x)===0||l(s,C,x),A=()=>g||S(),k=()=>!g||E();for(let N=c,I=c;N<=f;++N)w=t[N%a],!w.skip&&(x=u(w[r]),x!==C&&(g=l(x,i,s),b===null&&A()&&(b=o(x,i)===0?N:I),b!==null&&k()&&(m.push(_fe({start:b,end:N,loop:d,count:a,style:h})),b=null),I=N,C=x));return b!==null&&m.push(_fe({start:b,end:f,loop:d,count:a,style:h})),m}function MSt(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=FSt(r[i],e.points,t);s.length&&n.push(...s)}return n}function LSt(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}function PSt(e,t,n,r){const i=e.length,s=[];let a=t,o=e[t],l;for(l=t+1;l<=n;++l){const u=e[l%i];u.skip||u.stop?o.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=a=u.stop?l:null):(a=l,o.skip&&(t=l)),o=u}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function BSt(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=LSt(n,i,s,r);if(r===!0)return Tfe(e,[{start:a,end:o,loop:s}],n,t);const l=o<a?o+i:o,u=!!e._fullLoop&&a===0&&o===i-1;return Tfe(e,PSt(n,a,l,u),n,t)}function Tfe(e,t,n,r){return!r||!r.setContext||!n?t:zSt(e,t,n,r)}function zSt(e,t,n,r){const i=e._chart.getContext(),s=Nfe(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,u=[];let c=s,f=t[0].start,d=f;function h(m,g,b,x){const w=o?-1:1;if(m!==g){for(m+=l;n[m%l].skip;)m-=w;for(;n[g%l].skip;)g+=w;m%l!==g%l&&(u.push({start:m%l,end:g%l,loop:b,style:x}),c=x,f=g%l)}}for(const m of t){f=o?f:m.start;let g=n[f%l],b;for(d=f+1;d<=m.end;d++){const x=n[d%l];b=Nfe(r.setContext(sb(i,{type:"segment",p0:g,p1:x,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),jSt(b,c)&&h(f,d-1,m.loop,c),g=x,c=b}f<d-1&&h(f,d-1,m.loop,c)}return u}function Nfe(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function jSt(e,t){if(!t)return!1;const n=[],r=function(i,s){return cZ(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function X4(e,t,n){return e.options.clip?e[n]:t[n]}function USt(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:X4(n,t,"left"),right:X4(n,t,"right"),top:X4(r,t,"top"),bottom:X4(r,t,"bottom")}:t}function VSt(e,t){const n=t._clip;if(n.disabled)return!1;const r=USt(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class WSt{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,i){const s=n.listeners[i],a=n.duration;s.forEach(o=>o({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=rEe.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),n+=s.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var rh=new WSt;const Dfe="transparent",HSt={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=vfe(e||Dfe),i=r.valid&&vfe(t||Dfe);return i&&i.valid?i.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class GSt{constructor(t,n,r,i){const s=n[r];i=H4([t.to,i,s,t.from]);const a=H4([t.from,s,i]);this._active=!0,this._fn=t.fn||HSt[t.type||typeof a],this._easing=N$[t.easing]||N$.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=H4([t.to,n,i,t.from]),this._from=H4([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||n<r),!this._active){this._target[i]=o,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class xEe{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Gn(t))return;const n=Object.keys(_i.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!Gn(s))return;const a={};for(const o of n)a[o]=s[o];(As(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(t,n){const r=n.options,i=XSt(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&qSt(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,n){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(n),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const u=a[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,n));continue}const c=n[u];let f=s[u];const d=r.get(u);if(f)if(d&&f.active()){f.update(d,c,o);continue}else f.cancel();if(!d||!d.duration){t[u]=c;continue}s[u]=f=new GSt(d,t,u,c),i.push(f)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return rh.add(this._chart,r),!0}}function qSt(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=e[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function XSt(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Ife(e,t){const n=e&&e.options||{},r=n.reverse,i=n.min===void 0?t:0,s=n.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function YSt(e,t,n){if(n===!1)return!1;const r=Ife(e,n),i=Ife(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function KSt(e){let t,n,r,i;return Gn(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:e===!1}}function vEe(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Ofe(e,t,n,r={}){const i=e.keys,s=r.mode==="single";let a,o,l,u;if(t===null)return;let c=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(c=!0,r.all)continue;break}u=e.values[l],Tu(u)&&(s||t===0||Bx(t)===Bx(u))&&(t+=u)}return!c&&!r.all?0:t}function ZSt(e,t){const{iScale:n,vScale:r}=t,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,u,c;for(l=0,u=a.length;l<u;++l)c=a[l],o[l]={[i]:c,[s]:e[c]};return o}function Sz(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function QSt(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function JSt(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function eCt(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Rfe(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=e[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Ffe(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,u=a.axis,c=QSt(s,a,r),f=t.length;let d;for(let h=0;h<f;++h){const m=t[h],{[l]:g,[u]:b}=m,x=m._stacks||(m._stacks={});d=x[u]=eCt(i,c,g),d[o]=b,d._top=Rfe(d,a,!0,r.type),d._bottom=Rfe(d,a,!1,r.type);const w=d._visualValues||(d._visualValues={});w[o]=b}}function Cz(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function tCt(e,t){return sb(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nCt(e,t,n){return sb(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function s3(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const $z=e=>e==="reset"||e==="none",Mfe=(e,t)=>t?e:Object.assign({},e),rCt=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:vEe(n,!0),values:null};class cx{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Sz(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&s3(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,d,h,m)=>f==="x"?d:f==="r"?m:h,s=n.xAxisID=In(r.xAxisID,Cz(t,"x")),a=n.yAxisID=In(r.yAxisID,Cz(t,"y")),o=n.rAxisID=In(r.rAxisID,Cz(t,"r")),l=n.indexAxis,u=n.iAxisID=i(l,s,a,o),c=n.vAxisID=i(l,a,s,o);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&yfe(this._data,this),t._stacked&&s3(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Gn(n)){const i=this._cachedMeta;this._data=ZSt(n,i)}else if(r!==n){if(r){yfe(r,this);const i=this._cachedMeta;s3(i),i._parsed=[]}n&&Object.isExtensible(n)&&Mwt(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=Sz(n.vScale,n),n.stack!==r.stack&&(i=!0,s3(n),n.stack=r.stack),this._resyncElements(t),(i||s!==n._stacked)&&(Ffe(this,n._parsed),n._stacked=Sz(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let l=t===0&&n===i.length?!0:r._sorted,u=t>0&&r._parsed[t-1],c,f,d;if(this._parsing===!1)r._parsed=i,r._sorted=!0,d=i;else{As(i[t])?d=this.parseArrayData(r,i,t,n):Gn(i[t])?d=this.parseObjectData(r,i,t,n):d=this.parsePrimitiveData(r,i,t,n);const h=()=>f[o]===null||u&&f[o]<u[o];for(c=0;c<n;++c)r._parsed[c+t]=f=d[c],l&&(h()&&(l=!1),u=f);r._sorted=l}a&&Ffe(this,d)}parsePrimitiveData(t,n,r,i){const{iScale:s,vScale:a}=t,o=s.axis,l=a.axis,u=s.getLabels(),c=s===a,f=new Array(i);let d,h,m;for(d=0,h=i;d<h;++d)m=d+r,f[d]={[o]:c||s.parse(u[m],m),[l]:a.parse(n[m],m)};return f}parseArrayData(t,n,r,i){const{xScale:s,yScale:a}=t,o=new Array(i);let l,u,c,f;for(l=0,u=i;l<u;++l)c=l+r,f=n[c],o[l]={x:s.parse(f[0],c),y:a.parse(f[1],c)};return o}parseObjectData(t,n,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let c,f,d,h;for(c=0,f=i;c<f;++c)d=c+r,h=n[d],u[c]={x:s.parse(mR(h,o),d),y:a.parse(mR(h,l),d)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const i=this.chart,s=this._cachedMeta,a=n[t.axis],o={keys:vEe(i,!0),values:n._stacks[t.axis]._visualValues};return Ofe(o,a,s.index,{mode:r})}updateRangeFromParsed(t,n,r,i){const s=r[n.axis];let a=s===null?NaN:s;const o=i&&r._stacks[n.axis];i&&o&&(i.values=o,a=Ofe(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,o=this._getOtherScale(t),l=rCt(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=JSt(o);let d,h;function m(){h=i[d];const g=h[o.axis];return!Tu(h[t.axis])||c>g||f<g}for(d=0;d<a&&!(!m()&&(this.updateRangeFromParsed(u,t,h,l),s));++d);if(s){for(d=a-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(u,t,h,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=n.length;i<s;++i)a=n[i][t.axis],Tu(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=KSt(In(this.options.clip,YSt(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,u=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(t,s,o,l),c=o;c<o+l;++c){const f=i[c];f.hidden||(f.active&&u?a.push(f):f.draw(t,s))}for(c=0;c<a.length;++c)a[c].draw(t,s)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=nCt(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=tCt(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const i=n==="active",s=this._cachedDataOpts,a=t+"-"+n,o=s[a],l=this.enableOptionSharing&&gR(r);if(o)return Mfe(o,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],d=u.getOptionScopes(this.getDataset(),c),h=Object.keys(_i.elements[t]),m=()=>this.getContext(r,i,n),g=u.resolveNamedOptions(d,h,m,f);return g.$shared&&(g.$shared=l,s[a]=Object.freeze(Mfe(g,l))),g}_resolveAnimations(t,n,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${n}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){const c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,n),d=c.getOptionScopes(this.getDataset(),f);l=c.createResolver(d,this.getContext(t,r,n))}const u=new xEe(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||$z(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:a}}updateElement(t,n,r,i){$z(i)?Object.assign(t,r):this._resolveAnimations(n,i).update(t,r)}updateSharedOptions(t,n,r){t&&!$z(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,i){t.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[o,l,u]of this._syncList)this[o](l,u);this._syncList=[];const i=r.length,s=n.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,n,r=!0){const i=this._cachedMeta,s=i.data,a=t+n;let o;const l=u=>{for(u.length+=n,o=u.length-1;o>=a;o--)u[o]=u[o-n]};for(l(s),o=t;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),r&&this.updateElements(s,t,n,"reset")}updateElements(t,n,r,i){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,n);r._stacked&&s3(r,i)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,i]=t;this[n](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}jt(cx,"defaults",{}),jt(cx,"datasetElementType",null),jt(cx,"dataElementType",null);class PI extends cx{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,a=this.chart._animationsDisabled;let{start:o,count:l}=sEe(n,i,a);this._drawStart=o,this._drawCount=l,aEe(n)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(i,o,l,t)}updateElements(t,n,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(n,i),d=a.axis,h=o.axis,{spanGaps:m,segment:g}=this.options,b=zx(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",w=n+r,C=t.length;let S=n>0&&this.getParsed(n-1);for(let E=0;E<C;++E){const A=t[E],k=x?A:{};if(E<n||E>=w){k.skip=!0;continue}const N=this.getParsed(E),I=kr(N[h]),T=k[d]=a.getPixelForValue(N[d],E),D=k[h]=s||I?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,N,l):N[h],E);k.skip=isNaN(T)||isNaN(D)||I,k.stop=E>0&&Math.abs(N[d]-S[d])>b,g&&(k.parsed=N,k.raw=u.data[E]),f&&(k.options=c||this.resolveDataElementOptions(E,A.active?"active":i)),x||this.updateElement(A,E,k,i),S=N}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}jt(PI,"id","line"),jt(PI,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),jt(PI,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class O$ extends cx{getLabelAndValue(t){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,a=this.getParsed(t),o=i.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:r[t]||"",value:"("+o+", "+l+")"}}update(t){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:a}=sEe(n,r,i);if(this._drawStart=s,this._drawCount=a,aEe(n)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=n;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=r;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:u},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(n,i),f=this.getSharedOptions(c),d=this.includeOptions(i,f),h=a.axis,m=o.axis,{spanGaps:g,segment:b}=this.options,x=zx(g)?g:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none";let C=n>0&&this.getParsed(n-1);for(let S=n;S<n+r;++S){const E=t[S],A=this.getParsed(S),k=w?E:{},N=kr(A[m]),I=k[h]=a.getPixelForValue(A[h],S),T=k[m]=s||N?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,A,l):A[m],S);k.skip=isNaN(I)||isNaN(T)||N,k.stop=S>0&&Math.abs(A[h]-C[h])>x,b&&(k.parsed=A,k.raw=u.data[S]),d&&(k.options=f||this.resolveDataElementOptions(S,E.active?"active":i)),w||this.updateElement(E,S,k,i),C=A}this.updateSharedOptions(f,i,c)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let o=0;for(let l=n.length-1;l>=0;--l)o=Math.max(o,n[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const r=t.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,a)/2}}jt(O$,"id","scatter"),jt(O$,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),jt(O$,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Og(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bZ{constructor(t){jt(this,"options");this.options=t||{}}static override(t){Object.assign(bZ.prototype,t)}init(){}formats(){return Og()}parse(){return Og()}format(){return Og()}add(){return Og()}diff(){return Og()}startOf(){return Og()}endOf(){return Og()}}var iCt={_date:bZ};function sCt(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&s.length){const u=o._reversePixels?Rwt:E1;if(r){if(i._sharedOptions){const c=s[0],f=typeof c.getRange=="function"&&c.getRange(t);if(f){const d=u(s,t,n-f),h=u(s,t,n+f);return{lo:d.lo,hi:h.hi}}}}else{const c=u(s,t,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:d}=e,h=d.slice(0,c.lo+1).reverse().findIndex(g=>!kr(g[f.axis]));c.lo-=Math.max(0,h);const m=d.slice(c.hi).findIndex(g=>!kr(g[f.axis]));c.hi+=Math.max(0,m)}return c}}return{lo:0,hi:s.length-1}}function a8(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:u,data:c}=s[o],{lo:f,hi:d}=sCt(s[o],t,a,i);for(let h=f;h<=d;++h){const m=c[h];m.skip||r(m,u,h)}}}function aCt(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function Ez(e,t,n,r,i){const s=[];return!i&&!e.isPointInArea(t)||a8(e,n,t,function(o,l,u){!i&&!TE(o,e.chartArea,0)||o.inRange(t.x,t.y,r)&&s.push({element:o,datasetIndex:l,index:u})},!0),s}function oCt(e,t,n,r){let i=[];function s(a,o,l){const{startAngle:u,endAngle:c}=a.getProps(["startAngle","endAngle"],r),{angle:f}=Dwt(a,{x:t.x,y:t.y});tEe(f,u,c)&&i.push({element:a,datasetIndex:o,index:l})}return a8(e,n,t,s),i}function lCt(e,t,n,r,i,s){let a=[];const o=aCt(n);let l=Number.POSITIVE_INFINITY;function u(c,f,d){const h=c.inRange(t.x,t.y,i);if(r&&!h)return;const m=c.getCenterPoint(i);if(!(!!s||e.isPointInArea(m))&&!h)return;const b=o(t,m);b<l?(a=[{element:c,datasetIndex:f,index:d}],l=b):b===l&&a.push({element:c,datasetIndex:f,index:d})}return a8(e,n,t,u),a}function kz(e,t,n,r,i,s){return!s&&!e.isPointInArea(t)?[]:n==="r"&&!r?oCt(e,t,n,i):lCt(e,t,n,r,i,s)}function Lfe(e,t,n,r,i){const s=[],a=n==="x"?"inXRange":"inYRange";let o=!1;return a8(e,n,t,(l,u,c)=>{l[a]&&l[a](t[n],i)&&(s.push({element:l,datasetIndex:u,index:c}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:s}var uCt={modes:{index(e,t,n,r){const i=Jg(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Ez(e,i,s,r,a):kz(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const c=o[0].index,f=u.data[c];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:c})}),l):[]},dataset(e,t,n,r){const i=Jg(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Ez(e,i,s,r,a):kz(e,i,s,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,u=e.getDatasetMeta(l).data;o=[];for(let c=0;c<u.length;++c)o.push({element:u[c],datasetIndex:l,index:c})}return o},point(e,t,n,r){const i=Jg(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Ez(e,i,s,r,a)},nearest(e,t,n,r){const i=Jg(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return kz(e,i,s,n.intersect,r,a)},x(e,t,n,r){const i=Jg(t,e);return Lfe(e,i,"x",n.intersect,r)},y(e,t,n,r){const i=Jg(t,e);return Lfe(e,i,"y",n.intersect,r)}}};const wEe=["left","top","right","bottom"];function a3(e,t){return e.filter(n=>n.pos===t)}function Pfe(e,t){return e.filter(n=>wEe.indexOf(n.pos)===-1&&n.box.axis===t)}function o3(e,t){return e.sort((n,r)=>{const i=t?r:n,s=t?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function cCt(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],{position:s,options:{stack:a,stackWeight:o=1}}=i,t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}function fCt(e){const t={};for(const n of e){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!wEe.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function dCt(e,t){const n=fCt(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:l}=o.box,u=n[o.stack],c=u&&o.stackWeight/u.weight;o.horizontal?(o.width=c?c*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:l&&t.availableHeight)}return n}function hCt(e){const t=cCt(e),n=o3(t.filter(u=>u.box.fullSize),!0),r=o3(a3(t,"left"),!0),i=o3(a3(t,"right")),s=o3(a3(t,"top"),!0),a=o3(a3(t,"bottom")),o=Pfe(t,"x"),l=Pfe(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:a3(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function Bfe(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function SEe(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function pCt(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!Gn(i)){n.size&&(e[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,e[i]+=n.size}s.getPadding&&SEe(a,s.getPadding());const o=Math.max(0,t.outerWidth-Bfe(a,e,"left","right")),l=Math.max(0,t.outerHeight-Bfe(a,e,"top","bottom")),u=o!==e.w,c=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function mCt(e){const t=e.maxPadding;function n(r){const i=Math.max(t[r]-e[r],0);return e[r]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function gCt(e,t){const n=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],n[a])}),s}return r(e?["left","right"]:["top","bottom"])}function K3(e,t,n,r){const i=[];let s,a,o,l,u,c;for(s=0,a=e.length,u=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,gCt(o.horizontal,t));const{same:f,other:d}=pCt(t,n,o,r);u|=f&&i.length,c=c||d,l.fullSize||i.push(o)}return u&&K3(i,t,n,r)||c}function Y4(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function zfe(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const l=o.box,u=r[o.stack]||{placed:0,weight:1},c=o.stackWeight/u.weight||1;if(o.horizontal){const f=t.w*c,d=u.size||l.height;gR(u.start)&&(a=u.start),l.fullSize?Y4(l,i.left,a,n.outerWidth-i.right-i.left,d):Y4(l,t.left+u.placed,a,f,d),u.start=a,u.placed+=f,a=l.bottom}else{const f=t.h*c,d=u.size||l.width;gR(u.start)&&(s=u.start),l.fullSize?Y4(l,s,i.top,d,n.outerHeight-i.bottom-i.top):Y4(l,s,t.top+u.placed,d,f),u.start=s,u.placed+=f,s=l.right}}t.x=s,t.y=a}var xu={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=Nu(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=hCt(e.boxes),l=o.vertical,u=o.horizontal;ir(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),d=Object.assign({},i);SEe(d,Nu(r));const h=Object.assign({maxPadding:d,w:s,h:a,x:i.left,y:i.top},i),m=dCt(l.concat(u),f);K3(o.fullSize,h,f,m),K3(l,h,f,m),K3(u,h,f,m)&&K3(l,h,f,m),mCt(h),zfe(o.leftAndTop,h,f,m),h.x+=h.w,h.y+=h.h,zfe(o.rightAndBottom,h,f,m),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},ir(o.chartArea,g=>{const b=g.box;Object.assign(b,e.chartArea),b.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class CEe{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,i){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(t){return!0}updateConfig(t){}}class yCt extends CEe{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const BI="$chartjs",bCt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},jfe=e=>e===null||e==="";function xCt(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[BI]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",jfe(i)){const s=Afe(e,"width");s!==void 0&&(e.width=s)}if(jfe(r))if(e.style.height==="")e.height=e.width/(t||2);else{const s=Afe(e,"height");s!==void 0&&(e.height=s)}return e}const $Ee=TSt?{passive:!0}:!1;function vCt(e,t,n){e&&e.addEventListener(t,n,$Ee)}function wCt(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,$Ee)}function SCt(e,t){const n=bCt[e.type]||e.type,{x:r,y:i}=Jg(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:i!==void 0?i:null}}function xR(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function CCt(e,t,n){const r=e.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||xR(o.addedNodes,r),a=a&&!xR(o.removedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function $Ct(e,t,n){const r=e.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||xR(o.removedNodes,r),a=a&&!xR(o.addedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const DE=new Map;let Ufe=0;function EEe(){const e=window.devicePixelRatio;e!==Ufe&&(Ufe=e,DE.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function ECt(e,t){DE.size||window.addEventListener("resize",EEe),DE.set(e,t)}function kCt(e){DE.delete(e),DE.size||window.removeEventListener("resize",EEe)}function ACt(e,t,n){const r=e.canvas,i=r&&yZ(r);if(!i)return;const s=iEe((o,l)=>{const u=i.clientWidth;n(o,l),u<i.clientWidth&&n()},window),a=new ResizeObserver(o=>{const l=o[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||s(u,c)});return a.observe(i),ECt(e,s),a}function Az(e,t,n){n&&n.disconnect(),t==="resize"&&kCt(e)}function _Ct(e,t,n){const r=e.canvas,i=iEe(s=>{e.ctx!==null&&n(SCt(s,e))},e);return vCt(r,t,i),i}class TCt extends CEe{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(xCt(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[BI])return!1;const r=n[BI].initial;["height","width"].forEach(s=>{const a=r[s];kr(a)?n.removeAttribute(s):n.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[BI],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),a={attach:CCt,detach:$Ct,resize:ACt}[n]||_Ct;i[n]=a(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),i=r[n];if(!i)return;({attach:Az,detach:Az,resize:Az}[n]||wCt)(t,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,i){return _St(t,n,r,i)}isAttached(t){const n=t&&yZ(t);return!!(n&&n.isConnected)}}function NCt(e){return!gZ()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?yCt:TCt}class Xh{constructor(){jt(this,"x");jt(this,"y");jt(this,"active",!1);jt(this,"options");jt(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return zx(this.x)&&zx(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}jt(Xh,"defaults",{}),jt(Xh,"defaultRoutes");function DCt(e,t){const n=e.options.ticks,r=ICt(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?RCt(t):[],a=s.length,o=s[0],l=s[a-1],u=[];if(a>i)return FCt(t,u,s,a/i),u;const c=OCt(s,t,i);if(a>0){let f,d;const h=a>1?Math.round((l-o)/(a-1)):null;for(K4(t,u,c,kr(h)?0:o-h,o),f=0,d=a-1;f<d;f++)K4(t,u,c,s[f],s[f+1]);return K4(t,u,c,l,kr(h)?t.length:l+h),u}return K4(t,u,c),u}function ICt(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}function OCt(e,t,n){const r=MCt(e),i=t.length/n;if(!r)return Math.max(i,1);const s=kwt(r);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>i)return l}return Math.max(i,1)}function RCt(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function FCt(e,t,n,r){let i=0,s=n[0],a;for(r=Math.ceil(r),a=0;a<e.length;a++)a===s&&(t.push(e[a]),i++,s=n[i*r])}function K4(e,t,n,r,i){const s=In(r,0),a=Math.min(In(i,e.length),e.length);let o=0,l,u,c;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),c=s;c<0;)o++,c=Math.round(s+o*n);for(u=Math.max(s,0);u<a;u++)u===c&&(t.push(e[u]),o++,c=Math.round(s+o*n))}function MCt(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const LCt=e=>e==="left"?"right":e==="right"?"left":e,Vfe=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Wfe=(e,t)=>Math.min(t||e,e);function Hfe(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function PCt(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l=e.getPixelForTick(i),u;if(!(n&&(r===1?u=Math.max(l-s,a-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(i-1))/2,l+=i<t?u:-u,l<s-o||l>a+o)))return l}function BCt(e,t){ir(e,n=>{const r=n.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function l3(e){return e.drawTicks?e.tickLength:0}function Gfe(e,t){if(!e.display)return 0;const n=Na(e.font,t),r=Nu(e.padding);return(As(e.text)?e.text.length:1)*n.lineHeight+r.height}function zCt(e,t){return sb(e,{scale:t,type:"scale"})}function jCt(e,t,n){return sb(e,{tick:n,index:t,type:"tick"})}function UCt(e,t,n){let r=uZ(e);return(n&&t!=="right"||!n&&t==="right")&&(r=LCt(r)),r}function VCt(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:u,scales:c}=l;let f=0,d,h,m;const g=a-i,b=o-s;if(e.isHorizontal()){if(h=va(r,s,o),Gn(n)){const x=Object.keys(n)[0],w=n[x];m=c[x].getPixelForValue(w)+g-t}else n==="center"?m=(u.bottom+u.top)/2+g-t:m=Vfe(e,n,t);d=o-s}else{if(Gn(n)){const x=Object.keys(n)[0],w=n[x];h=c[x].getPixelForValue(w)-b+t}else n==="center"?h=(u.left+u.right)/2-b+t:h=Vfe(e,n,t);m=va(r,a,i),f=n==="left"?-cc:cc}return{titleX:h,titleY:m,maxWidth:d,rotation:f}}let o8=class kEe extends Xh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return t=rf(t,Number.POSITIVE_INFINITY),n=rf(n,Number.NEGATIVE_INFINITY),r=rf(r,Number.POSITIVE_INFINITY),i=rf(i,Number.NEGATIVE_INFINITY),{min:rf(t,r),max:rf(n,i),minDefined:Tu(t),maxDefined:Tu(n)}}getMinMax(t){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)a=o[l].controller.getMinMax(this,t),i||(n=Math.min(n,a.min)),s||(r=Math.max(r,a.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:rf(n,rf(r,n)),max:rf(r,rf(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pr(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=aSt(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?Hfe(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=DCt(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pr(this.options.afterUpdate,[this])}beforeSetDimensions(){Pr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Pr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=Pr(n.callback,[s.value,r,t],this)}afterTickToLabelConversion(){Pr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=Wfe(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let a=i,o,l,u;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const c=this._getLabelSizes(),f=c.widest.width,d=c.highest.height,h=bu(this.chart.width-f,0,this.maxWidth);o=t.offset?this.maxWidth/r:h/(r-1),f+6>o&&(o=h/(r-(t.offset?.5:1)),l=this.maxHeight-l3(t.grid)-n.padding-Gfe(t.title,this.chart.options.font),u=Math.sqrt(f*f+d*d),a=Nwt(Math.min(Math.asin(bu((c.highest.height+6)/o,-1,1)),Math.asin(bu(l/u,-1,1))-Math.asin(bu(d/u,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Pr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=Gfe(i,n.options.font);if(o?(t.width=this.maxWidth,t.height=l3(s)+l):(t.height=this.maxHeight,t.width=l3(s)+l),r.display&&this.ticks.length){const{first:u,last:c,widest:f,highest:d}=this._getLabelSizes(),h=r.padding*2,m=$1(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(o){const x=r.mirror?0:b*f.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+x+h)}else{const x=r.mirror?0:g*f.width+b*d.height;t.width=Math.min(this.maxWidth,t.width+x+h)}this._calculatePadding(u,c,b,g)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;l?u?(d=i*t.width,h=r*n.height):(d=r*t.height,h=i*n.width):s==="start"?h=n.width:s==="end"?d=t.width:s!=="inner"&&(d=t.width/2,h=n.width/2),this.paddingLeft=Math.max((d-c+a)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-f+a)*this.width/(this.width-f),0)}else{let c=n.height/2,f=t.height/2;s==="start"?(c=0,f=t.height):s==="end"&&(c=n.height,f=0),this.paddingTop=c+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)kr(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Hfe(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(n/Wfe(n,r));let u=0,c=0,f,d,h,m,g,b,x,w,C,S,E;for(f=0;f<n;f+=l){if(m=t[f].label,g=this._resolveTickFontOptions(f),i.font=b=g.string,x=s[b]=s[b]||{data:{},gc:[]},w=g.lineHeight,C=S=0,!kr(m)&&!As(m))C=Sfe(i,x.data,x.gc,C,m),S=w;else if(As(m))for(d=0,h=m.length;d<h;++d)E=m[d],!kr(E)&&!As(E)&&(C=Sfe(i,x.data,x.gc,C,E),S+=w);a.push(C),o.push(S),u=Math.max(C,u),c=Math.max(S,c)}BCt(s,n);const A=a.indexOf(u),k=o.indexOf(c),N=I=>({width:a[I]||0,height:o[I]||0});return{first:N(0),last:N(n-1),widest:N(A),highest:N(k),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Owt(this._alignToPixels?Ig(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=jCt(this.getContext(),t,r))}return this.$context||(this.$context=zCt(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=$1(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),d=l3(s),h=[],m=o.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,x=function(R){return Ig(r,R,g)};let w,C,S,E,A,k,N,I,T,D,L,P;if(a==="top")w=x(this.bottom),k=this.bottom-d,I=w-b,D=x(t.top)+b,P=t.bottom;else if(a==="bottom")w=x(this.top),D=t.top,P=x(t.bottom)-b,k=w+b,I=this.top+d;else if(a==="left")w=x(this.right),A=this.right-d,N=w-b,T=x(t.left)+b,L=t.right;else if(a==="right")w=x(this.left),T=t.left,L=x(t.right)-b,A=w+b,N=this.left+d;else if(n==="x"){if(a==="center")w=x((t.top+t.bottom)/2+.5);else if(Gn(a)){const R=Object.keys(a)[0],j=a[R];w=x(this.chart.scales[R].getPixelForValue(j))}D=t.top,P=t.bottom,k=w+b,I=k+d}else if(n==="y"){if(a==="center")w=x((t.left+t.right)/2);else if(Gn(a)){const R=Object.keys(a)[0],j=a[R];w=x(this.chart.scales[R].getPixelForValue(j))}A=w-b,N=A-d,T=t.left,L=t.right}const M=In(i.ticks.maxTicksLimit,f),F=Math.max(1,Math.ceil(f/M));for(C=0;C<f;C+=F){const R=this.getContext(C),j=s.setContext(R),H=o.setContext(R),G=j.lineWidth,z=j.color,Y=H.dash||[],Z=H.dashOffset,Q=j.tickWidth,se=j.tickColor,re=j.tickBorderDash||[],de=j.tickBorderDashOffset;S=PCt(this,C,l),S!==void 0&&(E=Ig(r,S,G),u?A=N=T=L=E:k=I=D=P=E,h.push({tx1:A,ty1:k,tx2:N,ty2:I,x1:T,y1:D,x2:L,y2:P,width:G,color:z,borderDash:Y,borderDashOffset:Z,tickWidth:Q,tickColor:se,tickBorderDash:re,tickBorderDashOffset:de}))}return this._ticksLength=f,this._borderValue=w,h}_computeLabelItems(t){const n=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:c,mirror:f}=s,d=l3(r.grid),h=d+c,m=f?-c:h,g=-$1(this.labelRotation),b=[];let x,w,C,S,E,A,k,N,I,T,D,L,P="middle";if(i==="top")A=this.bottom-m,k=this._getXAxisLabelAlignment();else if(i==="bottom")A=this.top+m,k=this._getXAxisLabelAlignment();else if(i==="left"){const F=this._getYAxisLabelAlignment(d);k=F.textAlign,E=F.x}else if(i==="right"){const F=this._getYAxisLabelAlignment(d);k=F.textAlign,E=F.x}else if(n==="x"){if(i==="center")A=(t.top+t.bottom)/2+h;else if(Gn(i)){const F=Object.keys(i)[0],R=i[F];A=this.chart.scales[F].getPixelForValue(R)+h}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")E=(t.left+t.right)/2-h;else if(Gn(i)){const F=Object.keys(i)[0],R=i[F];E=this.chart.scales[F].getPixelForValue(R)}k=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const M=this._getLabelSizes();for(x=0,w=o.length;x<w;++x){C=o[x],S=C.label;const F=s.setContext(this.getContext(x));N=this.getPixelForTick(x)+s.labelOffset,I=this._resolveTickFontOptions(x),T=I.lineHeight,D=As(S)?S.length:1;const R=D/2,j=F.color,H=F.textStrokeColor,G=F.textStrokeWidth;let z=k;a?(E=N,k==="inner"&&(x===w-1?z=this.options.reverse?"left":"right":x===0?z=this.options.reverse?"right":"left":z="center"),i==="top"?u==="near"||g!==0?L=-D*T+T/2:u==="center"?L=-M.highest.height/2-R*T+T:L=-M.highest.height+T/2:u==="near"||g!==0?L=T/2:u==="center"?L=M.highest.height/2-R*T:L=M.highest.height-D*T,f&&(L*=-1),g!==0&&!F.showLabelBackdrop&&(E+=T/2*Math.sin(g))):(A=N,L=(1-D)*T/2);let Y;if(F.showLabelBackdrop){const Z=Nu(F.backdropPadding),Q=M.heights[x],se=M.widths[x];let re=L-Z.top,de=0-Z.left;switch(P){case"middle":re-=Q/2;break;case"bottom":re-=Q;break}switch(k){case"center":de-=se/2;break;case"right":de-=se;break;case"inner":x===w-1?de-=se:x>0&&(de-=se/2);break}Y={left:de,top:re,width:se+Z.width,height:Q+Z.height,color:F.backdropColor}}b.push({label:S,font:I,textOffset:L,options:{rotation:g,color:j,strokeColor:H,strokeWidth:G,textAlign:z,textBaseline:P,translation:[E,A],backdrop:Y}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-$1(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=t+s,l=a.widest.width;let u,c;return n==="left"?i?(c=this.right+s,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-o,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?i?(c=this.left+s,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+o,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:i,width:s,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const o=(l,u,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(s=0,a=i.length;s<a;++s){const l=i[s];n.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,f,d;this.isHorizontal()?(u=Ig(t,this.left,a)-a/2,c=Ig(t,this.right,o)+o/2,f=d=l):(f=Ig(t,this.top,a)-a/2,d=Ig(t,this.bottom,o)+o/2,u=c=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,f),n.lineTo(c,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&fZ(r,i);const s=this.getLabelItems(t);for(const a of s){const o=a.options,l=a.font,u=a.label,c=a.textOffset;NE(r,u,0,c,l,o)}i&&dZ(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Na(r.font),a=Nu(r.padding),o=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Gn(n)?(l+=a.bottom,As(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:u,titleY:c,maxWidth:f,rotation:d}=VCt(this,l,n,o);NE(t,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:d,textAlign:UCt(o,n,i),textBaseline:"middle",translation:[u,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=In(t.grid&&t.grid.z,-1),i=In(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==kEe.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=n.length;s<a;++s){const o=n[s];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Na(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}};class Z4{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;GCt(n)&&(r=this.register(n));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,WCt(t,a,r),this.override&&_i.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,i=this.scope;r in n&&delete n[r],i&&r in _i[i]&&(delete _i[i][r],this.override&&delete Cy[r])}}function WCt(e,t,n){const r=_E(Object.create(null),[n?_i.get(n):{},_i.get(t),e.defaults]);_i.set(t,r),e.defaultRoutes&&HCt(t,e.defaultRoutes),e.descriptors&&_i.describe(t,e.descriptors)}function HCt(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");_i.route(s,i,l,o)})}function GCt(e){return"id"in e&&"defaults"in e}class qCt{constructor(){this.controllers=new Z4(cx,"datasets",!0),this.elements=new Z4(Xh,"elements"),this.plugins=new Z4(Object,"plugins"),this.scales=new Z4(o8,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):ir(i,a=>{const o=r||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,n,r){const i=oZ(t);Pr(r["before"+i],[],r),n[t](r),Pr(r["after"+i],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var df=new qCt;class XCt{constructor(){this._init=[]}notify(t,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,n,r);return n==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,r,i){i=i||{};for(const s of t){const a=s.plugin,o=a[r],l=[n,i,s.options];if(Pr(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){kr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,i=In(r.options&&r.options.plugins,{}),s=YCt(r);return i===!1&&!n?[]:ZCt(t,s,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(n,r),t,"stop"),this._notify(i(r,n),t,"start")}}function YCt(e){const t={},n=[],r=Object.keys(df.plugins.items);for(let s=0;s<r.length;s++)n.push(df.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function KCt(e,t){return!t&&e===!1?null:e===!0?{}:e}function ZCt(e,{plugins:t,localIds:n},r,i){const s=[],a=e.getContext();for(const o of t){const l=o.id,u=KCt(r[l],i);u!==null&&s.push({plugin:o,options:QCt(e.config,{plugin:o,local:n[l]},u,a)})}return s}function QCt(e,{plugin:t,local:n},r,i){const s=e.pluginScopeKeys(t),a=e.getOptionScopes(r,s);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function VW(e,t){const n=_i.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function JCt(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function e3t(e,t){return e===t?"_index_":"_value_"}function qfe(e){if(e==="x"||e==="y"||e==="r")return e}function t3t(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function WW(e,...t){if(qfe(e))return e;for(const n of t){const r=n.axis||t3t(n.position)||e.length>1&&qfe(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Xfe(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function n3t(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return Xfe(e,"x",n[0])||Xfe(e,"y",n[0])}return{}}function r3t(e,t){const n=Cy[e.type]||{scales:{}},r=t.scales||{},i=VW(e.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!Gn(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=WW(a,o,n3t(a,e),_i.scales[o.type]),u=e3t(l,i),c=n.scales||{};s[a]=_$(Object.create(null),[{axis:l},o,c[l],c[u]])}),e.data.datasets.forEach(a=>{const o=a.type||e.type,l=a.indexAxis||VW(o,t),c=(Cy[o]||{}).scales||{};Object.keys(c).forEach(f=>{const d=JCt(f,l),h=a[d+"AxisID"]||d;s[h]=s[h]||Object.create(null),_$(s[h],[{axis:d},r[h],c[f]])})}),Object.keys(s).forEach(a=>{const o=s[a];_$(o,[_i.scales[o.type],_i.scale])}),s}function AEe(e){const t=e.options||(e.options={});t.plugins=In(t.plugins,{}),t.scales=r3t(e,t)}function _Ee(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function i3t(e){return e=e||{},e.data=_Ee(e.data),AEe(e),e}const Yfe=new Map,TEe=new Set;function Q4(e,t){let n=Yfe.get(e);return n||(n=t(),Yfe.set(e,n),TEe.add(n)),n}const u3=(e,t,n)=>{const r=mR(t,n);r!==void 0&&e.add(r)};class s3t{constructor(t){this._config=i3t(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_Ee(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),AEe(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Q4(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Q4(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Q4(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return Q4(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let i=r.get(t);return(!i||n)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,n,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),o=a.get(n);if(o)return o;const l=new Set;n.forEach(c=>{t&&(l.add(t),c.forEach(f=>u3(l,t,f))),c.forEach(f=>u3(l,i,f)),c.forEach(f=>u3(l,Cy[s]||{},f)),c.forEach(f=>u3(l,_i,f)),c.forEach(f=>u3(l,zW,f))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),TEe.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Cy[n]||{},_i.datasets[n]||{},{type:n},_i,zW]}resolveNamedOptions(t,n,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=Kfe(this._resolverCache,t,i);let l=a;if(o3t(a,n)){s.$shared=!1,r=lm(r)?r():r;const u=this.createResolver(t,r,o);l=jx(a,r,u)}for(const u of n)s[u]=l[u];return s}createResolver(t,n,r=[""],i){const{resolver:s}=Kfe(this._resolverCache,t,r);return Gn(n)?jx(s,n,void 0,i):s}}function Kfe(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);return s||(s={resolver:hZ(t,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const a3t=e=>Gn(e)&&Object.getOwnPropertyNames(e).some(t=>lm(e[t]));function o3t(e,t){const{isScriptable:n,isIndexable:r}=fEe(e);for(const i of t){const s=n(i),a=r(i),o=(a||s)&&e[i];if(s&&(lm(o)||a3t(o))||a&&As(o))return!0}return!1}var l3t="4.4.9";const u3t=["top","bottom","left","right","chartArea"];function Zfe(e,t){return e==="top"||e==="bottom"||u3t.indexOf(e)===-1&&t==="x"}function Qfe(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Jfe(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Pr(n&&n.onComplete,[e],t)}function c3t(e){const t=e.chart,n=t.options.animation;Pr(n&&n.onProgress,[e],t)}function NEe(e){return gZ()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const zI={},ede=e=>{const t=NEe(e);return Object.values(zI).filter(n=>n.canvas===t).pop()};function f3t(e,t,n){const r=Object.keys(e);for(const i of r){const s=+i;if(s>=t){const a=e[i];delete e[i],(n>0||s>t)&&(e[s+n]=a)}}}function d3t(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var a0;let T_=(a0=class{static register(...t){df.add(...t),tde()}static unregister(...t){df.remove(...t),tde()}constructor(t,n){const r=this.config=new s3t(n),i=NEe(t),s=ede(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||NCt(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,u=l&&l.height,c=l&&l.width;if(this.id=ywt(),this.ctx=o,this.canvas=l,this.width=c,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new XCt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Pwt(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],zI[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}rh.listen(this,"complete",Jfe),rh.listen(this,"progress",c3t),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return kr(t)?n&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return df}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():kfe(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Cfe(this.canvas,this.ctx),this}stop(){return rh.stop(this),this}resize(t,n){rh.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,n,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,kfe(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Pr(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ir(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];n&&(s=s.concat(Object.keys(n).map(a=>{const o=n[a],l=WW(a,o),u=l==="r",c=l==="x";return{options:o,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),ir(s,a=>{const o=a.options,l=o.id,u=WW(l,o),c=In(o.type,a.dtype);(o.position===void 0||Zfe(o.position,u)!==Zfe(a.dposition))&&(o.position=a.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===c)f=r[l];else{const d=df.getScale(c);f=new d({id:l,type:c,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(o,t)}),ir(i,(a,o)=>{a||delete r[o]}),ir(r,a=>{xu.configure(this,a,a.options),xu.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(Qfe("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||VW(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=df.getController(o),{datasetElementType:u,dataElementType:c}=_i.datasets[o];Object.assign(l,{dataElementType:df.getElement(c),datasetElementType:u&&df.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ir(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:f}=this.getDatasetMeta(u),d=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(d),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||ir(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Qfe("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ir(this.scales,t=>{xu.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!hfe(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const a=r==="_removeElements"?-s:s;f3t(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!hfe(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xu.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ir(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,lm(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rh.has(this)?this.attached&&!rh.running(this)&&rh.start(this):(this.draw(),Jfe({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const a=n[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=VSt(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&fZ(n,i),t.controller.draw(),i&&dZ(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return TE(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,i){const s=uCt.modes[n];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=sb(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);gR(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),rh.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Cfe(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete zI[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(s,a)=>{n.addEventListener(this,s,a),t[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};ir(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},i=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},n.isAttached(this.canvas)?o():a()}unbindEvents(){ir(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},ir(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const i=r?"set":"remove";let s,a,o,l;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){a=t[o];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!hR(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const i=this.options.hover,s=(l,u)=>l.filter(c=>!u.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),a=s(n,t),o=r?t:s(t,n);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:i=[],options:s}=this,a=n,o=this._getActiveElements(t,i,r,a),l=Cwt(t),u=d3t(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Pr(s.onHover,[t,o,this],this),l&&Pr(s.onClick,[t,o,this],this));const c=!hR(o,i);return(c||n)&&(this._active=o,this._updateHoverStyles(o,i,n)),this._lastEvent=u,c}_getActiveElements(t,n,r,i){if(t.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},jt(a0,"defaults",_i),jt(a0,"instances",zI),jt(a0,"overrides",Cy),jt(a0,"registry",df),jt(a0,"version",l3t),jt(a0,"getChart",ede),a0);function tde(){return ir(T_.instances,e=>e._plugins.invalidate())}function DEe(e,t,n=t){e.lineCap=In(n.borderCapStyle,t.borderCapStyle),e.setLineDash(In(n.borderDash,t.borderDash)),e.lineDashOffset=In(n.borderDashOffset,t.borderDashOffset),e.lineJoin=In(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=In(n.borderWidth,t.borderWidth),e.strokeStyle=In(n.borderColor,t.borderColor)}function h3t(e,t,n){e.lineTo(n.x,n.y)}function p3t(e){return e.stepped?Kwt:e.tension||e.cubicInterpolationMode==="monotone"?Zwt:h3t}function IEe(e,t,n={}){const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),u=Math.min(s,o),c=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:u<l&&!c?r+u-l:u-l}}function m3t(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:u}=IEe(i,n,r),c=p3t(s);let{move:f=!0,reverse:d}=r||{},h,m,g;for(h=0;h<=u;++h)m=i[(o+(d?u-h:h))%a],!m.skip&&(f?(e.moveTo(m.x,m.y),f=!1):c(e,g,m,d,s.stepped),g=m);return l&&(m=i[(o+(d?u:0))%a],c(e,g,m,d,s.stepped)),!!l}function g3t(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=IEe(i,n,r),{move:l=!0,reverse:u}=r||{};let c=0,f=0,d,h,m,g,b,x;const w=S=>(a+(u?o-S:S))%s,C=()=>{g!==b&&(e.lineTo(c,b),e.lineTo(c,g),e.lineTo(c,x))};for(l&&(h=i[w(0)],e.moveTo(h.x,h.y)),d=0;d<=o;++d){if(h=i[w(d)],h.skip)continue;const S=h.x,E=h.y,A=S|0;A===m?(E<g?g=E:E>b&&(b=E),c=(f*c+S)/++f):(C(),e.lineTo(S,E),m=A,f=0,g=b=E),x=E}C()}function HW(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?g3t:m3t}function y3t(e){return e.stepped?NSt:e.tension||e.cubicInterpolationMode==="monotone"?DSt:e1}function b3t(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),DEe(e,t.options),e.stroke(i)}function x3t(e,t,n,r){const{segments:i,options:s}=t,a=HW(t);for(const o of i)DEe(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const v3t=typeof Path2D=="function";function w3t(e,t,n,r){v3t&&!t.options.segment?b3t(e,t,n,r):x3t(e,t,n,r)}class q2 extends Xh{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;SSt(this._points,r,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=BSt(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,i=t[n],s=this.points,a=MSt(this,{property:n,start:i,end:i});if(!a.length)return;const o=[],l=y3t(r);let u,c;for(u=0,c=a.length;u<c;++u){const{start:f,end:d}=a[u],h=s[f],m=s[d];if(h===m){o.push(h);continue}const g=Math.abs((i-h[n])/(m[n]-h[n])),b=l(h,m,g,r.stepped);b[n]=t[n],o.push(b)}return o.length===1?o[0]:o}pathSegment(t,n,r){return HW(this)(t,this,n,r)}path(t,n,r){const i=this.segments,s=HW(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const o of i)a&=s(t,this,o,{start:n,end:n+r-1});return!!a}draw(t,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),w3t(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}jt(q2,"id","line"),jt(q2,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),jt(q2,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),jt(q2,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function nde(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}class R$ extends Xh{constructor(n){super();jt(this,"parsed");jt(this,"skip");jt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(n-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return nde(this,n,"x",r)}inYRange(n,r){return nde(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!TE(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,jW(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}jt(R$,"id","point"),jt(R$,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),jt(R$,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const rde=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},S3t=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class ide extends Xh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Pr(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=Na(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=rde(r,s);let u,c;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(a,s,o,l)+10):(c=this.maxHeight,u=this._fitCols(a,i,o,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=i+o;let f=t;s.textAlign="left",s.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((m,g)=>{const b=r+n/2+s.measureText(m.text).width;(g===0||u[u.length-1]+b+2*o>a)&&(f+=c,u[u.length-(g>0?0:1)]=0,h+=c,d++),l[g]={left:0,top:h,row:d,width:b,height:i},u[u.length-1]+=b+o}),f}_fitCols(t,n,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=a-t;let f=o,d=0,h=0,m=0,g=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:w,itemHeight:C}=C3t(r,n,s,b,i);x>0&&h+C+2*o>c&&(f+=d+o,u.push({width:d,height:h}),m+=d+o,g++,d=h=0),l[x]={left:m,top:h,col:g,width:w,height:C},d=Math.max(d,w),h+=C+o}),f+=d,u.push({width:d,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,a=ux(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=va(r,this.left+i,this.right-this.lineWidths[o]);for(const u of n)o!==u.row&&(o=u.row,l=va(r,this.left+i,this.right-this.lineWidths[o])),u.top+=this.top+t+i,u.left=a.leftForLtr(a.x(l),u.width),l+=u.width+i}else{let o=0,l=va(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const u of n)u.col!==o&&(o=u.col,l=va(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+i,u.left=a.leftForLtr(a.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;fZ(t,this),this._draw(),dZ(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,o=_i.color,l=ux(t.rtl,this.left,this.width),u=Na(a.font),{padding:c}=a,f=u.size,d=f/2;let h;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=rde(a,f),x=function(A,k,N){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const I=In(N.lineWidth,1);if(i.fillStyle=In(N.fillStyle,o),i.lineCap=In(N.lineCap,"butt"),i.lineDashOffset=In(N.lineDashOffset,0),i.lineJoin=In(N.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=In(N.strokeStyle,o),i.setLineDash(In(N.lineDash,[])),a.usePointStyle){const T={radius:g*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:I},D=l.xPlus(A,m/2),L=k+d;uEe(i,T,D,L,a.pointStyleWidth&&m)}else{const T=k+Math.max((f-g)/2,0),D=l.leftForLtr(A,m),L=I$(N.borderRadius);i.beginPath(),Object.values(L).some(P=>P!==0)?UW(i,{x:D,y:T,w:m,h:g,radius:L}):i.rect(D,T,m,g),i.fill(),I!==0&&i.stroke()}i.restore()},w=function(A,k,N){NE(i,N.text,A,k+b/2,u,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},C=this.isHorizontal(),S=this._computeTitleHeight();C?h={x:va(s,this.left+c,this.right-r[0]),y:this.top+c+S,line:0}:h={x:this.left+c,y:va(s,this.top+S+c,this.bottom-n[0].height),line:0},gEe(this.ctx,t.textDirection);const E=b+c;this.legendItems.forEach((A,k)=>{i.strokeStyle=A.fontColor,i.fillStyle=A.fontColor;const N=i.measureText(A.text).width,I=l.textAlign(A.textAlign||(A.textAlign=a.textAlign)),T=m+d+N;let D=h.x,L=h.y;l.setWidth(this.width),C?k>0&&D+T+c>this.right&&(L=h.y+=E,h.line++,D=h.x=va(s,this.left+c,this.right-r[h.line])):k>0&&L+E>this.bottom&&(D=h.x=D+n[h.line].width+c,h.line++,L=h.y=va(s,this.top+S+c,this.bottom-n[h.line].height));const P=l.x(D);if(x(P,L,A),D=Bwt(I,D+m+d,C?D+T:this.right,t.rtl),w(l.x(D),L,A),C)h.x+=T+c;else if(typeof A.text!="string"){const M=u.lineHeight;h.y+=OEe(A,M)+c}else h.y+=E}),yEe(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=Na(n.font),i=Nu(n.padding);if(!n.display)return;const s=ux(t.rtl,this.left,this.width),a=this.ctx,o=n.position,l=r.size/2,u=i.top+l;let c,f=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,f=va(t.align,f,this.right-d);else{const m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);c=u+va(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const h=va(o,f,f+d);a.textAlign=s.textAlign(uZ(o)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,NE(a,n.text,h,c,r)}_computeTitleHeight(){const t=this.options.title,n=Na(t.font),r=Nu(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,i,s;if(Y3(t,this.left,this.right)&&Y3(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Y3(t,i.left,i.left+i.width)&&Y3(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!k3t(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=S3t(i,r);i&&!s&&Pr(n.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&Pr(n.onHover,[t,r,this],this)}else r&&Pr(n.onClick,[t,r,this],this)}}function C3t(e,t,n,r,i){const s=$3t(r,e,t,n),a=E3t(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function $3t(e,t,n,r){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+n.size/2+r.measureText(i).width}function E3t(e,t,n){let r=e;return typeof t.text!="string"&&(r=OEe(t,n)),r}function OEe(e,t){const n=e.text?e.text.length:0;return t*n}function k3t(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var REe={id:"legend",_element:ide,start(e,t,n){const r=e.legend=new ide({ctx:e.ctx,options:n,chart:e});xu.configure(e,r,n),xu.addBox(e,r)},stop(e){xu.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;xu.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),c=Nu(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:a&&(o||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class FEe extends Xh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=As(r.text)?r.text.length:1;this._padding=Nu(r.padding);const s=i*Na(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:i,right:s,options:a}=this,o=a.align;let l=0,u,c,f;return this.isHorizontal()?(c=va(o,r,s),f=n+t,u=s-r):(a.position==="left"?(c=r+t,f=va(o,i,n),l=Ps*-.5):(c=s-t,f=va(o,n,i),l=Ps*.5),u=i-n),{titleX:c,titleY:f,maxWidth:u,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=Na(n.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(s);NE(t,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:u,textAlign:uZ(n.align),textBaseline:"middle",translation:[a,o]})}}function A3t(e,t){const n=new FEe({ctx:e.ctx,options:t,chart:e});xu.configure(e,n,t),xu.addBox(e,n),e.titleBlock=n}var MEe={id:"title",_element:FEe,start(e,t,n){A3t(e,n)},stop(e){const t=e.titleBlock;xu.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;xu.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Z3={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=e.length;s<a;++s){const l=e[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=BW(t,u);c<i&&(i=c,o=l)}}if(o){const l=o.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function uf(e,t){return t&&(As(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ih(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function _3t(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function sde(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=Na(t.bodyFont),u=Na(t.titleFont),c=Na(t.footerFont),f=s.length,d=i.length,h=r.length,m=Nu(t.padding);let g=m.height,b=0,x=r.reduce((S,E)=>S+E.before.length+E.lines.length+E.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,f&&(g+=f*u.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),x){const S=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;g+=h*S+(x-h)*l.lineHeight+(x-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let w=0;const C=function(S){b=Math.max(b,n.measureText(S).width+w)};return n.save(),n.font=u.string,ir(e.title,C),n.font=l.string,ir(e.beforeBody.concat(e.afterBody),C),w=t.displayColors?a+2+t.boxPadding:0,ir(r,S=>{ir(S.before,C),ir(S.lines,C),ir(S.after,C)}),w=0,n.font=c.string,ir(e.footer,C),n.restore(),b+=m.width,{width:b,height:g}}function T3t(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function N3t(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;if(e==="left"&&i+s+a>t.width||e==="right"&&i-s-a<0)return!0}function D3t(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let u="center";return r==="center"?u=i<=(o+l)/2?"left":"right":i<=s/2?u="left":i>=a-s/2&&(u="right"),N3t(u,e,t,n)&&(u="center"),u}function ade(e,t,n){const r=n.yAlign||t.yAlign||T3t(e,n);return{xAlign:n.xAlign||t.xAlign||D3t(e,t,n,r),yAlign:r}}function I3t(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function O3t(e,t,n){let{y:r,height:i}=e;return t==="top"?r+=n:t==="bottom"?r-=i+n:r-=i/2,r}function ode(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,u=i+s,{topLeft:c,topRight:f,bottomLeft:d,bottomRight:h}=I$(a);let m=I3t(t,o);const g=O3t(t,l,u);return l==="center"?o==="left"?m+=u:o==="right"&&(m-=u):o==="left"?m-=Math.max(c,d)+i:o==="right"&&(m+=Math.max(f,h)+i),{x:bu(m,0,r.width-t.width),y:bu(g,0,r.height-t.height)}}function J4(e,t,n){const r=Nu(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function lde(e){return uf([],ih(e))}function R3t(e,t,n){return sb(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function ude(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const LEe={beforeTitle:Kd,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Kd,beforeBody:Kd,beforeLabel:Kd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return kr(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Kd,afterBody:Kd,beforeFooter:Kd,footer:Kd,afterFooter:Kd};function Mo(e,t,n,r){const i=e[t].call(n,r);return typeof i>"u"?LEe[t].call(n,r):i}class GW extends Xh{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new xEe(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=R3t(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,i=Mo(r,"beforeTitle",this,t),s=Mo(r,"title",this,t),a=Mo(r,"afterTitle",this,t);let o=[];return o=uf(o,ih(i)),o=uf(o,ih(s)),o=uf(o,ih(a)),o}getBeforeBody(t,n){return lde(Mo(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,i=[];return ir(t,s=>{const a={before:[],lines:[],after:[]},o=ude(r,s);uf(a.before,ih(Mo(o,"beforeLabel",this,s))),uf(a.lines,Mo(o,"label",this,s)),uf(a.after,ih(Mo(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,n){return lde(Mo(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,i=Mo(r,"beforeFooter",this,t),s=Mo(r,"footer",this,t),a=Mo(r,"afterFooter",this,t);let o=[];return o=uf(o,ih(i)),o=uf(o,ih(s)),o=uf(o,ih(a)),o}_createItems(t){const n=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],l,u;for(l=0,u=n.length;l<u;++l)o.push(_3t(this.chart,n[l]));return t.filter&&(o=o.filter((c,f,d)=>t.filter(c,f,d,r))),t.itemSort&&(o=o.sort((c,f)=>t.itemSort(c,f,r))),ir(o,c=>{const f=ude(t.callbacks,c);i.push(Mo(f,"labelColor",this,c)),s.push(Mo(f,"labelPointStyle",this,c)),a.push(Mo(f,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(t,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Z3[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=sde(this,r),u=Object.assign({},o,l),c=ade(this.chart,r,u),f=ode(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,i){const s=this.getCaretPosition(t,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:f}=I$(o),{x:d,y:h}=t,{width:m,height:g}=n;let b,x,w,C,S,E;return s==="center"?(S=h+g/2,i==="left"?(b=d,x=b-a,C=S+a,E=S-a):(b=d+m,x=b+a,C=S-a,E=S+a),w=b):(i==="left"?x=d+Math.max(l,c)+a:i==="right"?x=d+m-Math.max(u,f)-a:x=this.caretX,s==="top"?(C=h,S=C-a,b=x-a,w=x+a):(C=h+g,S=C+a,b=x+a,w=x-a),E=C),{x1:b,x2:x,x3:w,y1:C,y2:S,y3:E}}drawTitle(t,n,r){const i=this.title,s=i.length;let a,o,l;if(s){const u=ux(r.rtl,this.x,this.width);for(t.x=J4(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",a=Na(r.titleFont),o=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,l=0;l<s;++l)n.fillText(i[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,l+1===s&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,n,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,c=Na(s.bodyFont),f=J4(this,"left",s),d=i.x(f),h=l<c.lineHeight?(c.lineHeight-l)/2:0,m=n.y+h;if(s.usePointStyle){const g={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},b=i.leftForLtr(d,u)+u/2,x=m+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,jW(t,g,b,x),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,jW(t,g,b,x)}else{t.lineWidth=Gn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=i.leftForLtr(d,u),b=i.leftForLtr(i.xPlus(d,1),u-2),x=I$(a.borderRadius);Object.values(x).some(w=>w!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,UW(t,{x:g,y:m,w:u,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),UW(t,{x:b,y:m+1,w:u-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(g,m,u,l),t.strokeRect(g,m,u,l),t.fillStyle=a.backgroundColor,t.fillRect(b,m+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:u,boxPadding:c}=r,f=Na(r.bodyFont);let d=f.lineHeight,h=0;const m=ux(r.rtl,this.x,this.width),g=function(N){n.fillText(N,m.x(t.x+h),t.y+d/2),t.y+=d+s},b=m.textAlign(a);let x,w,C,S,E,A,k;for(n.textAlign=a,n.textBaseline="middle",n.font=f.string,t.x=J4(this,b,r),n.fillStyle=r.bodyColor,ir(this.beforeBody,g),h=o&&b!=="right"?a==="center"?u/2+c:u+2+c:0,S=0,A=i.length;S<A;++S){for(x=i[S],w=this.labelTextColors[S],n.fillStyle=w,ir(x.before,g),C=x.lines,o&&C.length&&(this._drawColorBox(n,t,S,m,r),d=Math.max(f.lineHeight,l)),E=0,k=C.length;E<k;++E)g(C[E]),d=f.lineHeight;ir(x.after,g)}h=0,d=f.lineHeight,ir(this.afterBody,g),t.y-=s}drawFooter(t,n,r){const i=this.footer,s=i.length;let a,o;if(s){const l=ux(r.rtl,this.x,this.width);for(t.x=J4(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",a=Na(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,o=0;o<s;++o)n.fillText(i[o],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,n,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=t,{width:u,height:c}=r,{topLeft:f,topRight:d,bottomLeft:h,bottomRight:m}=I$(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(o+f,l),a==="top"&&this.drawCaret(t,n,r,i),n.lineTo(o+u-d,l),n.quadraticCurveTo(o+u,l,o+u,l+d),a==="center"&&s==="right"&&this.drawCaret(t,n,r,i),n.lineTo(o+u,l+c-m),n.quadraticCurveTo(o+u,l+c,o+u-m,l+c),a==="bottom"&&this.drawCaret(t,n,r,i),n.lineTo(o+h,l+c),n.quadraticCurveTo(o,l+c,o,l+c-h),a==="center"&&s==="left"&&this.drawCaret(t,n,r,i),n.lineTo(o,l+f),n.quadraticCurveTo(o,l,o+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=Z3[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=sde(this,t),l=Object.assign({},a,this._size),u=ade(n,t,l),c=ode(t,l,u,n);(i._to!==c.x||s._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Nu(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,n),gEe(t,n.textDirection),s.y+=a.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),yEe(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[l],index:l}}),s=!hR(r,i),a=this._positionChanged(i,n);(s||a)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,n,r),o=this._positionChanged(a,t),l=n||!hR(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:r,caretY:i,options:s}=this,a=Z3[s.position].call(this,t,n);return a!==!1&&(r!==a.x||i!==a.y)}}jt(GW,"positioners",Z3);var PEe={id:"tooltip",_element:GW,positioners:Z3,afterInit(e,t,n){n&&(e.tooltip=new GW({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LEe},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const F3t=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function M3t(e,t,n,r){const i=e.indexOf(t);if(i===-1)return F3t(e,t,n,r);const s=e.lastIndexOf(t);return i!==s?n:i}const L3t=(e,t)=>e===null?null:bu(Math.round(e),0,t);function cde(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class vR extends o8{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(kr(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:M3t(r,t,In(n,t),this._addedLabels),L3t(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=n;a++)i.push({value:a});return i}getLabelForValue(t){return cde.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}jt(vR,"id","category"),jt(vR,"defaults",{ticks:{callback:cde}});function P3t(e,t){const n=[],{bounds:i,step:s,min:a,max:o,precision:l,count:u,maxTicks:c,maxDigits:f,includeBounds:d}=e,h=s||1,m=c-1,{min:g,max:b}=t,x=!kr(a),w=!kr(o),C=!kr(u),S=(b-g)/(f+1);let E=mfe((b-g)/m/h)*h,A,k,N,I;if(E<1e-14&&!x&&!w)return[{value:g},{value:b}];I=Math.ceil(b/E)-Math.floor(g/E),I>m&&(E=mfe(I*E/m/h)*h),kr(l)||(A=Math.pow(10,l),E=Math.ceil(E*A)/A),i==="ticks"?(k=Math.floor(g/E)*E,N=Math.ceil(b/E)*E):(k=g,N=b),x&&w&&s&&_wt((o-a)/s,E/1e3)?(I=Math.round(Math.min((o-a)/E,c)),E=(o-a)/I,k=a,N=o):C?(k=x?a:k,N=w?o:N,I=u-1,E=(N-k)/I):(I=(N-k)/E,T$(I,Math.round(I),E/1e3)?I=Math.round(I):I=Math.ceil(I));const T=Math.max(gfe(E),gfe(k));A=Math.pow(10,kr(l)?T:l),k=Math.round(k*A)/A,N=Math.round(N*A)/A;let D=0;for(x&&(d&&k!==a?(n.push({value:a}),k<a&&D++,T$(Math.round((k+D*E)*A)/A,a,fde(a,S,e))&&D++):k<a&&D++);D<I;++D){const L=Math.round((k+D*E)*A)/A;if(w&&L>o)break;n.push({value:L})}return w&&d&&N!==o?n.length&&T$(n[n.length-1].value,o,fde(o,S,e))?n[n.length-1].value=o:n.push({value:o}):(!w||N===o)&&n.push({value:N}),n}function fde(e,t,{horizontal:n,minRotation:r}){const i=$1(r),s=(n?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}class B3t extends o8{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return kr(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=l=>i=n?i:l,o=l=>s=r?s:l;if(t){const l=Bx(i),u=Bx(s);l<0&&u<0?o(0):l>0&&u>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),t||a(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,a=P3t(i,s);return t.bounds==="ticks"&&Twt(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-n)/Math.max(t.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return oEe(t,this.chart.options.locale,this.options.ticks.format)}}class wR extends B3t{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Tu(t)?t:0,this.max=Tu(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=$1(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}jt(wR,"id","linear"),jt(wR,"defaults",{ticks:{callback:lEe.formatters.numeric}});const l8={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ho=Object.keys(l8);function dde(e,t){return e-t}function hde(e,t){if(kr(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),Tu(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(i&&(a=i==="week"&&(zx(s)||s===!0)?n.startOf(a,"isoWeek",s):n.startOf(a,i)),+a)}function pde(e,t,n,r){const i=Ho.length;for(let s=Ho.indexOf(e);s<i-1;++s){const a=l8[Ho[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(o*a.size))<=r)return Ho[s]}return Ho[i-1]}function z3t(e,t,n,r,i){for(let s=Ho.length-1;s>=Ho.indexOf(n);s--){const a=Ho[s];if(l8[a].common&&e._adapter.diff(i,r,a)>=t-1)return a}return Ho[n?Ho.indexOf(n):0]}function j3t(e){for(let t=Ho.indexOf(e)+1,n=Ho.length;t<n;++t)if(l8[Ho[t]].common)return Ho[t]}function mde(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:i}=lZ(n,t),s=n[r]>=t?n[r]:n[i];e[s]=!0}}function U3t(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}function gde(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return s===0||!n?r:U3t(e,r,i,n)}class SR extends o8{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),i=this._adapter=new iCt._date(t.adapters.date);i.init(n),_$(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:hde(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!o&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Tu(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Tu(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=Fwt(i,s,a);return this._unit=n.unit||(r.autoSkip?pde(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):z3t(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:j3t(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),gde(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=bu(n,0,a),r=bu(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||pde(s.minUnit,n,r,this._getLabelCapacity(n)),o=In(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=zx(l)||l===!0,c={};let f=n,d,h;if(u&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,u?"day":a),t.diff(r,n,a)>1e5*o)throw new Error(n+" and "+r+" are too far apart with stepSize of "+o+" "+a);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(d=f,h=0;d<r;d=+t.add(d,o,a),h++)mde(c,d,m);return(d===r||i.bounds==="ticks"||h===1)&&mde(c,d,m),Object.keys(c).sort(dde).map(g=>+g)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,s=this._unit,a=n||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,n,r,i){const s=this.options,a=s.ticks.callback;if(a)return Pr(a,[t,n,r],this);const o=s.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&o[l],f=u&&o[u],d=r[n],h=u&&f&&d&&d.major;return this._adapter.format(t,i||(h?f:c))}generateTickLabels(t){let n,r,i;for(n=0,r=t.length;n<r;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,i=$1(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(t,0,gde(this,[t],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)t.push(hde(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Lwt(t.sort(dde))}}jt(SR,"id","time"),jt(SR,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function eD(e,t,n){let r=0,i=e.length-1,s,a,o,l;n?(t>=e[r].pos&&t<=e[i].pos&&({lo:r,hi:i}=E1(e,"pos",t)),{pos:s,time:o}=e[r],{pos:a,time:l}=e[i]):(t>=e[r].time&&t<=e[i].time&&({lo:r,hi:i}=E1(e,"time",t)),{time:s,pos:o}=e[r],{time:a,pos:l}=e[i]);const u=a-s;return u?o+(l-o)*(t-s)/u:o}class yde extends SR{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=eD(n,this.min),this._tableRange=eD(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,i=[],s=[];let a,o,l,u,c;for(a=0,o=t.length;a<o;++a)u=t[a],u>=n&&u<=r&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)c=i[a+1],l=i[a-1],u=i[a],Math.round((c+l)/2)!==u&&s.push({time:u,pos:a/(o-1)});return s}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(eD(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return eD(this._table,r*this._tableRange+this._minPos,!0)}}jt(yde,"id","timeseries"),jt(yde,"defaults",SR.defaults);const BEe="label";function bde(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function V3t(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function zEe(e,t){e.labels=t}function jEe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BEe;const r=[];e.datasets=t.map(i=>{const s=e.datasets.find(a=>a[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function W3t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:BEe;const n={labels:[],datasets:[]};return zEe(n,e.labels),jEe(n,e.datasets,t),n}function H3t(e,t){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:u=[],fallbackContent:c,updateMode:f,...d}=e,h=U.useRef(null),m=U.useRef(null),g=()=>{h.current&&(m.current=new T_(h.current,{type:a,data:W3t(o,s),options:l&&{...l},plugins:u}),bde(t,m.current))},b=()=>{bde(t,null),m.current&&(m.current.destroy(),m.current=null)};return U.useEffect(()=>{!i&&m.current&&l&&V3t(m.current,l)},[i,l]),U.useEffect(()=>{!i&&m.current&&zEe(m.current.config.data,o.labels)},[i,o.labels]),U.useEffect(()=>{!i&&m.current&&o.datasets&&jEe(m.current.config.data,o.datasets,s)},[i,o.datasets]),U.useEffect(()=>{m.current&&(i?(b(),setTimeout(g)):m.current.update(f))},[i,l,o.labels,o.datasets,f]),U.useEffect(()=>{m.current&&(b(),setTimeout(g))},[a]),U.useEffect(()=>(g(),()=>b()),[]),Ko.createElement("canvas",{ref:h,role:"img",height:n,width:r,...d},c)}const G3t=U.forwardRef(H3t);function UEe(e,t){return T_.register(t),U.forwardRef((n,r)=>Ko.createElement(G3t,{...n,ref:r,type:e}))}const xZ=UEe("line",PI),q3t=UEe("scatter",O$);var Da=(e=>(e.ADAM="adam",e.SGD="sgd",e.RMS="rmsprop",e))(Da||{});const X3t=[[3225,3],[3789,3],[3636,3],[3109,3],[3836,3],[3510,3],[3849,3],[3619,3],[3619,3],[3619,3],[3858,3],[3858,3],[3762,3],[3660,3],[3510,3],[3774,3],[3774,3],[3774,3],[3774,3],[2889,3],[2889,3],[3927,3],[3927,3],[3348,3],[3696,3],[4020,3],[3849,3],[3691,3],[2760,3],[2760,3],[2760,3],[3394,3],[3666,3],[3570,3],[3570,3],[3732,3],[3887,3],[3341,3],[3394,3],[3588,3],[3588,3],[3588,3],[3588,3],[3540,3],[2858,3],[2743,3],[2743,3],[3966,3],[3945,3],[3729,3],[3780,3],[3943,3],[3432,3],[3432,3],[3432,3],[3540,3],[3726,3],[3318,3],[3753,3],[3753,3],[3753,3],[3097,3],[3675,3],[3238,3],[4050,3],[4050,3],[3292,3],[3292,3],[3292,3],[3851,3],[3087,3],[3087,3],[3714,3],[3461,3],[3461,3],[3888,3],[3888,3],[3693,3],[4029,3],[3432,3],[3525,3],[3154,3],[3990,3],[3638,3],[3638,3],[3133,3],[3936,3],[3481,3],[3657,3],[3660,3],[3660,3],[3660,3],[3354,3],[3510,3],[4032,3],[3588,3],[3192,3],[3639,3],[3639,3],[3450,3],[3708,3],[3708,3],[3982,3],[3504,3],[3504,3],[3795,3],[2520,3],[3797,3],[2802,3],[3130,3],[3588,3],[3005,3],[3744,3],[3169,3],[3169,3],[3476,3],[3476,3],[2379,3],[3482,3],[3936,3],[3936,3],[3404,3],[3404,3],[3849,3],[4026,3],[4026,3],[3588,3],[3492,3],[3492,3],[4032,3],[3561,3],[3573,3],[3265,3],[3852,3],[3588,3],[3636,3],[3636,3],[3063,3],[3435,3],[3552,3],[3055,3],[3603,3],[3645,3],[3852,3],[3233,3],[3233,3],[3240,3],[3240,3],[3425,3],[3425,3],[3672,3],[3666,3],[3744,3],[2831,3],[3440,3],[3440,3],[3440,3],[3576,3],[3118,3],[3723,3],[3723,3],[3132,3],[3880,3],[3880,3],[3880,3],[3885,3],[3885,3],[3885,3],[2784,3],[3120,3],[3375,3],[3375,3],[3354,3],[3501,3],[3501,3],[3501,3],[3244,3],[2875,3],[2875,3],[3096,3],[3240,3],[3410,3],[3510,3],[3250,3],[3523,3],[3523,3],[2610,3],[2610,3],[3202,3],[2330,3],[3811,3],[2964,3],[3315,3],[3429,3],[3744,3],[4017,3],[3090,3],[3023,3],[3350,3],[3861,3],[4040,3],[3432,3],[2970,3],[3492,3],[3262,3],[3444,3],[2960,3],[3726,3],[3559,3],[3105,3],[3146,3],[3354,3],[3354,3],[3696,3],[2950,3],[2950,3],[2950,3],[3681,3],[2940,3],[3518,3],[3518,3],[3518,3],[3744,3],[3954,3],[2784,3],[2784,3],[3204,3],[3899,3],[3172,3],[2961,3],[3912,3],[3843,3],[4031,3],[3365,3],[3365,3],[3402,3],[3458,3],[3885,3],[3354,3],[3354,3],[3915,3],[3432,3],[2873,3],[2846,3],[3663,3],[3663,3],[3663,3],[3163,3],[3461,3],[3461,3],[3961,3],[3024,3],[3355,3],[3355,3],[3355,3],[3240,3],[3836,3],[3273,3],[3559,3],[3168,3],[3726,3],[3726,3],[3411,3],[3149,3],[3459,3],[3393,3],[3393,3],[4059,3],[3752,3],[2888,3],[3402,3],[2855,3],[2855,3],[3311,3],[3696,3],[3588,3],[2382,3],[2382,3],[2382,3],[2382,3],[3096,3],[2985,3],[3963,3],[3e3,3],[3666,3],[2930,3],[2930,3],[2930,3],[2930,3],[3447,3],[3895,3],[3377,3],[3794,3],[3492,3],[3928,3],[2803,3],[3361,3],[3197,3],[3197,3],[3038,3],[3696,3],[3696,3],[3582,3],[3582,3],[3432,3],[3270,3],[3270,3],[3270,3],[2846,3],[2846,3],[2796,3],[2796,3],[3036,3],[3307,3],[2803,3],[2803,3],[3930,3],[2292,3],[3082,3],[3198,3],[3325,3],[3666,3],[3666,3],[2988,3],[2988,3],[2803,3],[2803,3],[2803,3],[2803,3],[3798,3],[3427,3],[3427,3],[3517,3],[3517,3],[3888,3],[3888,3],[3594,3],[3594,3],[3076,3],[4040,3],[4040,3],[3714,3],[3249,3],[3053,3],[3306,3],[3588,3],[3948,3],[3542,3],[3050,3],[3480,3],[3888,3],[4032,3],[3368,3],[3392,3],[3516,3],[3918,3],[2330,3],[3668,3],[3668,3],[2371,3],[3684,3],[3666,3],[2716,3],[2716,3],[3640,3],[3203,3],[3510,3],[3701,3],[2707,3],[3107,3],[3645,3],[3645,3],[3048,3],[3228,3],[3228,3],[3253,3],[3253,3],[3566,3],[2964,3],[3645,3],[3826,3],[3826,3],[2986,3],[4050,3],[3945,3],[2901,3],[2901,3],[3744,3],[3744,3],[3795,3],[3795,3],[3252,3],[3888,3],[3888,3],[2548,3],[3474,3],[3888,3],[3485,3],[3485,3],[2630,3],[2829,3],[2730,3],[2510,3],[3297,3],[3996,3],[3996,3],[3726,3],[3726,3],[3459,3],[3726,3],[3859,3],[3386,3],[3741,3],[3501,3],[2902,3],[2884,3],[2884,3],[3489,3],[3489,3],[3450,3],[3063,3],[3063,3],[3864,3],[3864,3],[1920,3],[2550,3],[3744,3],[3533,3],[3922,3],[3242,3],[3348,3],[3483,3],[2729,3],[2729,3],[3969,3],[3969,3],[3969,3],[3969,3],[3120,3],[3483,3],[3676,3],[3791,3],[3588,3],[3900,3],[3900,3],[3372,3],[2599,3],[3783,3],[3144,3],[3477,3],[3477,3],[3398,3],[3015,3],[3093,3],[3093,3],[3339,3],[2761,3],[2761,3],[2761,3],[2761,3],[3367,3],[3222,3],[3588,3],[3078,3],[3102,3],[3297,3],[2698,3],[2947,3],[2986,3],[2986,3],[2473,3],[3223,3],[2841,3],[2841,3],[4023,3],[3933,3],[2748,3],[3342,3],[3342,3],[4057,3],[3168,3],[3315,3],[3804,3],[3375,3],[2832,3],[3150,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[2824,3],[3354,3],[3657,3],[3390,3],[3951,3],[3951,3],[3514,3],[2904,3],[2904,3],[4032,3],[3693,3],[3693,3],[2662,3],[2662,3],[3741,3],[3714,3],[3735,3],[2375,3],[2838,3],[2838,3],[2998,2],[2998,2],[3230,2],[2732,2],[2632,2],[2732,2],[2732,2],[2732,2],[3899,2],[2594,2],[3068,2],[3623,2],[2930,2],[2930,2],[2396,2],[2396,2],[3310,2],[2624,2],[2624,2],[3479,2],[2884,2],[2586,2],[2586,2],[3120,2],[2912,2],[3499,2],[3580,2],[3146,2],[3360,2],[3138,2],[3138,2],[3138,2],[3138,2],[3711,2],[2726,2],[3392,2],[3927,2],[3927,2],[2990,2],[2990,2],[2630,2],[3672,2],[2900,2],[2560,2],[2560,2],[2953,2],[2514,2],[2514,2],[2150,2],[2150,2],[2334,2],[3118,2],[2200,2],[2520,2],[3052,2],[2386,2],[2632,2],[2933,2],[2933,2],[2524,2],[2830,2],[2464,2],[2686,2],[2686,2],[2870,2],[3548,2],[2484,2],[2584,2],[2584,2],[3390,2],[3861,2],[3714,2],[3738,2],[3738,2],[3375,2],[2800,2],[3088,2],[2313,2],[2313,2],[2313,2],[3024,2],[3024,2],[2926,2],[3912,2],[3912,2],[3235,2],[2344,2],[2344,2],[2858,2],[3024,2],[2594,2],[2963,2],[2856,2],[3744,2],[2240,2],[2240,2],[2800,2],[2800,2],[3080,2],[2912,2],[2912,2],[3136,2],[2560,2],[2666,2],[2666,2],[2756,2],[3210,2],[2258,2],[2258,2],[3940,2],[3940,2],[2178,2],[2560,2],[2708,2],[3864,2],[3864,2],[3118,2],[3118,2],[2624,2],[3508,2],[3508,2],[4028,2],[4028,2],[3e3,2],[2091,2],[2552,2],[2252,2],[3928,2],[2162,2],[2496,2],[2390,2],[2801,2],[2869,2],[3187,2],[2734,2],[2590,2],[3248,2],[3248,2],[3038,2],[2600,2],[2600,2],[2392,2],[2392,2],[3369,2],[2911,2],[3745,2],[2625,2],[2284,2],[2374,2],[2680,2],[2716,2],[2284,2],[2600,2],[2600,2],[3311,2],[2480,2],[2480,2],[2160,2],[2160,2],[2160,2],[2392,2],[2442,2],[3575,2],[3013,2],[2562,2],[3421,2],[2180,2],[2524,2],[2524,2],[2684,2],[2732,2],[2368,2],[4023,2],[2392,2],[2392,2],[2816,2],[2990,2],[2990,2],[2990,2],[2990,2],[2370,2],[2800,2],[2800,2],[3170,2],[3170,2],[3600,2],[3600,2],[1860,2],[2760,2],[2596,2],[2547,2],[2218,2],[2197,2],[3250,2],[2188,2],[3388,2],[3388,2],[1780,2],[2803,2],[2240,2],[2971,2],[2971,2],[3110,2],[3110,2],[3110,2],[2640,2],[2236,2],[3803,2],[3803,2],[3803,2],[2874,2],[2184,2],[2415,2],[3723,2],[3723,2],[2421,2],[2464,2],[2288,2],[3068,2],[2117,2],[2117,2],[2160,2],[2160,2],[2791,2],[2960,2],[2960,2],[2960,2],[2370,2],[3509,2],[2520,2],[2240,2],[2240,2],[2240,2],[3443,2],[2963,2],[2963,2],[2460,2],[1822,2],[2626,2],[2626,2],[3700,2],[3053,2],[2112,2],[2870,2],[2870,2],[1939,2],[2596,2],[2620,2],[3055,2],[2392,2],[2304,2],[3399,2],[3399,2],[3399,2],[2870,2],[2496,2],[1822,2],[1822,2],[3460,2],[3822,2],[3822,2],[2610,2],[2834,2],[2834,2],[2540,2],[3398,2],[2560,2],[2560,2],[2254,2],[2375,2],[2966,2],[2966,2],[2338,2],[2338,2],[1860,2],[1860,2],[2198,2],[3433,2],[3433,2],[2889,2],[2985,2],[2009,2],[1588,2],[2458,2],[3429,2],[2360,2],[2360,2],[3517,2],[2071,2],[2132,2],[2500,2],[2616,2],[2616,2],[2373,2],[2373,2],[2373,2],[2165,2],[2206,2],[2206,2],[2980,2],[3400,2],[3289,2],[3289,2],[3289,2],[2213,2],[1594,2],[1594,2],[2782,2],[2782,2],[2782,2],[2782,2],[1812,2],[1600,2],[1904,2],[1904,2],[1904,2],[1904,2],[2458,2],[1938,2],[2290,2],[2290,2],[2290,2],[2125,2],[2131,2],[2716,2],[2716,2],[2543,2],[1702,2],[1802,2],[1802,2],[2160,2],[2160,2],[2750,2],[2154,2],[2154,2],[2154,2],[2395,2],[2929,2],[1938,2],[1873,2],[2925,2],[2160,2],[2184,2],[2498,2],[1992,2],[2112,2],[1600,2],[1760,2],[1274,2],[1550,2],[2208,2],[2208,2],[2208,2],[2208,2],[2304,2],[2235,2],[2235,2],[1938,2],[1664,2],[2612,2],[2612,2],[1746,2],[2423,2],[2423,2],[1776,2],[1776,2],[2554,2],[1664,2],[1664,2],[2128,2],[2856,2],[2090,2],[2546,2],[3168,2],[2616,2],[2616,2],[2616,2],[1771,2],[2621,2],[1624,2],[1584,2],[2110,2],[2436,2],[1664,2],[1600,2],[1664,2],[1536,2],[1559,2],[1559,2],[2508,2],[2464,2],[1960,2],[2256,2],[1608,2],[2023,2],[2274,2],[1600,2],[1972,2],[3009,2],[2600,2],[2600,2],[2014,2],[2014,2],[3197,2],[2084,2],[1882,2],[1882,2],[1882,2],[2076,2],[2161,2],[2161,2],[2161,2],[2530,2],[1662,1],[1662,1],[1133,1],[1456,1],[1518,1],[1966,1],[1243,1],[2158,1],[1717,1],[1902,1],[1902,1],[1902,1],[1790,1],[1800,1],[1568,1],[1944,1],[1861,1],[1896,1],[1896,1],[1896,1],[3001,1],[1611,1],[1832,1],[1832,1],[1832,1],[3387,1],[1715,1],[2655,1],[1706,1],[1914,1],[1930,1],[1930,1],[2034,1],[2034,1],[2242,1],[1400,1],[1516,1],[1918,1],[1580,1],[1580,1],[2281,1],[1587,1],[1587,1],[1308,1],[1308,1],[1752,1],[1245,1],[1248,1],[2470,1],[2470,1],[1200,1],[1148,1],[1774,1],[1774,1],[1774,1],[1284,1],[1284,1],[1760,1],[1532,1],[3494,1],[3494,1],[1637,1],[1638,1],[1914,1],[1531,1],[1531,1],[1754,1],[809,1],[1231,1],[1499,1],[1499,1],[1499,1],[1500,1],[1500,1],[1952,1],[1952,1],[2037,1],[1652,1],[809,1],[1324,1],[1834,1],[1834,1],[1834,1],[1776,1],[894,1],[1384,1],[1924,1],[1536,1],[1224,1],[1691,1],[1485,1],[1485,1],[2142,1],[2142,1],[2142,1],[2142,1],[2164,1],[1591,1],[1591,1],[1835,1],[1835,1],[1835,1],[1835,1],[809,1],[805,1],[1251,1],[1251,1],[1251,1],[1251,1],[1251,1],[1532,1],[1532,1],[1532,1],[2082,1],[1523,1],[1532,1],[1532,1],[1532,1],[1532,1],[1568,1],[1568,1],[1534,1],[1600,1],[1600,1],[2284,1],[1750,1],[1750,1],[1750,1],[2105,1],[2105,1],[1544,1],[1841,1],[1841,1],[1671,1],[1567,1],[1457,1],[3573,1],[1596,1],[1690,1],[1835,1],[1955,1],[1955,1],[1955,1],[1795,1],[1756,1],[1756,1],[809,1],[1479,1],[1479,1],[2482,1],[1322,1],[1322,1],[1576,1],[1576,1],[1161,1],[1161,1],[1161,1],[1116,1],[1986,1],[1188,1],[1188,1],[1201,1],[1559,1],[1624,1],[1176,1],[1566,1],[1810,1],[894,1],[894,1],[1634,1],[1634,1],[809,1],[1446,1],[1446,1],[1488,1],[1512,1],[1870,1],[1870,1],[1480,1],[805,1],[1397,1],[2114,1],[2202,1],[1815,1],[794,1],[1547,1],[1124,1],[894,1],[894,1],[1556,1],[2514,1],[2514,1],[2470,1],[794,1],[1374,1],[1456,1],[1456,1],[1528,1],[1544,1],[1167,1],[1592,1],[1592,1],[2506,1],[1094,1],[1230,1],[1230,1],[1120,1],[1792,1],[1470,1],[2230,1],[2230,1],[1350,1],[1350,1],[1260,1],[1260,1],[1613,1],[894,1],[1386,1],[1386,1],[1470,1],[960,1],[960,1],[1680,1],[1985,1],[1441,1],[2666,1],[1862,1],[1380,1],[1380,1],[1560,1],[1192,1],[1572,1],[1920,1],[1920,1],[1084,1],[2246,1],[1536,1],[1103,1],[1087,1],[794,1],[794,1],[1474,1],[1384,1],[1040,1],[1040,1],[1040,1],[1040,1],[1605,1],[2380,1],[2380,1],[1075,1],[1075,1],[1075,1],[1075,1],[1254,1],[805,1],[903,1],[903,1],[903,1],[1066,1],[1363,1],[1470,1],[1218,1],[1667,1],[794,1],[1724,1],[1724,1],[1249,1],[1249,1],[1984,1],[1224,1],[1224,1],[1224,1],[1262,1],[1470,1],[1623,1],[1352,1],[1352,1],[1474,1],[1474,1],[1474,1],[1208,1],[1510,1],[1493,1],[1630,1],[1630,1],[1834,1],[1487,1],[1096,1],[1274,1],[1480,1],[1776,1],[1776,1],[1889,1],[1503,1],[1028,1],[1568,1],[2482,1],[1090,1],[1090,1],[1658,1],[1752,1],[1752,1],[1390,1],[1406,1],[1080,1],[1258,1],[1798,1],[1636,1],[1094,1],[1094,1],[1106,1],[1500,1],[1720,1],[1720,1],[1720,1],[1932,1],[1716,1],[1344,1],[1378,1],[1764,1],[1356,1],[1887,1],[1887,1],[1887,1],[1887,1],[1008,1],[1470,1],[1470,1],[1470,1],[1470,1],[1859,1],[1859,1],[1282,1],[1050,1],[1050,1],[1050,1],[1050,1],[1440,1],[1568,1],[928,1],[1200,1],[1664,1],[1664,1],[1664,1],[1362,1],[1518,1],[1518,1],[1747,1],[1747,1],[1019,1],[1966,1],[1568,1],[1860,1],[1860,1],[1179,1],[1404,1],[1439,1],[1096,1],[1470,1],[1215,1],[1215,1],[1288,1],[1381,1],[1773,1],[1042,1],[1772,1],[1512,1],[1776,1],[1472,1],[1706,1],[1706,1],[1080,1],[1478,1],[899,1],[899,1],[1934,1],[1153,1],[1558,1],[1826,1],[1135,1],[1260,1],[1260,1],[1260,1],[1024,1],[1024,1],[1024,1],[1024,1],[1096,1],[1192,1],[1990,1],[1152,1],[1152,1],[1048,1],[1163,1],[1163,1],[1896,1],[1896,1],[1044,1],[980,1],[980,1],[1056,1],[1331,1],[1140,1],[1192,1],[1192,1],[1192,1],[1192,1],[1638,1],[1638,1],[1638,1],[1400,1],[1256,1],[1340,1],[1422,1],[1391,1],[1626,1],[1580,1],[1580,1],[1273,1],[1273,1],[1273,1],[1664,1],[1232,1],[1600,1],[1694,1],[1694,1],[1530,1],[1530,1],[1050,1],[1050,1],[1456,1],[1467,1],[1467,1],[2558,1],[2558,1],[1200,1],[1836,1],[1400,1],[1180,1],[1248,1],[1764,1],[1006,1],[1688,1],[1688,1],[1570,1],[1655,1],[1655,1],[1476,1],[936,1],[936,1],[936,1],[1249,1],[1780,1],[1062,1],[1404,1],[1404,1],[1614,1],[1015,1],[1155,1],[1260,1],[1888,1],[2650,1],[1260,1],[1040,1],[1040,1],[1224,1],[1224,1],[1644,1],[1644,1],[1644,1],[1675,1],[1348,1],[1344,1],[1630,1],[1092,1],[1092,1],[1092,1],[1086,1],[1086,1],[1348,1],[1348,1],[1176,1],[2880,1],[1332,1],[1632,1],[2290,1],[1566,1],[1075,1],[1566,1],[1566,1],[1566,1],[1302,1],[1408,1],[1532,1],[1532,1],[1473,1],[1048,1],[1048,1],[1048,1],[1048,1],[1048,1],[1175,1],[1107,1],[1260,1],[1421,1],[1137,1],[900,1],[1195,1],[1375,1],[1375,1],[1375,1],[1350,1],[1350,1],[1350,1],[1350,1],[1575,1],[1872,1],[1872,1],[1928,1],[1928,1],[1504,1],[1620,1],[1886,1],[1038,1],[1312,1],[1392,1],[3222,1],[1344,1],[1392,1],[899,1],[1170,1],[1344,1],[1420,1],[1116,1],[1116,1],[1229,1],[1941,1],[1660,1],[1015,1],[1368,1],[1368,1],[1042,1],[1264,1],[1264,1],[1264,1],[2393,1],[1716,1],[1006,1],[1006,1],[1110,1],[1052,1],[900,1],[1338,1],[948,1],[2031,1],[900,1],[1374,1],[1075,1],[1530,1],[1021,1],[1021,1],[1044,1],[1209,1],[900,1],[1048,1],[1048,1],[1048,1],[1312,1],[1392,1],[1392,1],[1392,1],[1428,1],[1428,1],[1428,1],[900,1],[1078,1],[1078,1],[1119,1],[1119,1],[1224,1],[1188,1],[1232,1],[1232,1],[1506,1],[1085,1],[1043,1],[1043,1],[1043,1],[973,1],[1442,1],[1654,1],[1654,1],[2053,1],[2053,1],[1318,1],[1486,1],[1486,1],[1275,1],[1412,1],[1560,1],[1386,1],[1386,1],[1386,1],[1192,1],[1192,1],[1254,1],[1344,1],[1380,1],[1530,1],[1530,1],[1030,1],[1452,1],[1482,1],[1680,1],[1820,1],[2158,1],[2158,1],[900,1],[1685,1],[1110,1],[1110,1],[1110,1],[1156,1],[1280,1],[1280,1],[1241,1],[1291,1],[1291,1],[1305,1],[1480,1],[1248,1],[1051,1],[900,1],[1400,1],[1400,1],[1102,1],[1300,1],[1300,1],[942,1],[1776,1],[1288,1],[1288,1],[1342,1],[1342,1],[1392,1],[1291,1],[1046,1],[1046,1],[1046,1],[1152,1],[1152,1],[1152,1],[1480,1],[1676,1],[1833,1],[900,1],[1450,1],[1450,1],[1042,1],[1042,1],[1103,1],[1103,1],[1255,1],[1094,1],[1164,1],[1232,1],[1232,1],[1470,1],[1666,1],[1666,1],[1467,1],[1384,1],[1329,1],[1120,1],[1698,1],[1015,1],[1015,1],[1015,1],[1120,1],[1120,1],[965,1],[1015,1],[1015,1],[1015,1],[1075,1],[1536,1],[1536,1],[1008,1],[1244,1],[1244,1],[1382,1],[1382,1],[1382,1],[1039,1],[1513,1],[1513,1],[1048,1],[1152,1],[900,1],[1344,1],[1367,1],[1007,1],[1096,1],[1322,1],[1322,1],[1322,1],[720,1],[1344,1],[1574,1],[1008,1],[1008,1],[546,1],[1428,1],[720,1],[768,1],[1226,1],[1296,1],[1632,1],[1126,1],[1200,1],[1849,1],[900,1],[1380,1],[1148,1],[2218,1],[1013,1],[1068,1],[1068,1],[2607,1],[900,1],[1370,1],[1180,1],[974,1],[1167,1],[1167,1],[899,1],[1408,1],[900,1],[900,1],[930,1],[1173,1],[964,1],[1376,1],[1376,1],[1338,1],[973,1],[1079,1],[1079,1],[881,1],[1050,1],[1050,1],[900,1],[900,1],[900,1],[900,1],[1350,1],[1075,1],[1008,1],[1376,1],[1376,1],[1056,1],[1056,1],[1056,1],[1586,1],[1392,1],[1285,1],[1285,1],[1368,1],[975,1],[900,1],[1599,1],[1599,1],[900,1],[900,1],[1096,1],[1273,1],[1408,1],[546,1],[1024,1],[1074,1],[1111,1],[900,1],[1092,1],[1248,1],[1600,1],[1831,1],[1831,1],[1831,1],[2105,1],[720,1],[767,1],[974,1],[974,1],[3904,1],[1042,1],[1042,1],[1075,1],[3001,1],[988,1],[988,1],[1075,1],[1350,1],[1350,1],[1350,1],[1883,1],[1123,1],[1123,1],[1263,1],[1263,1],[1368,1],[801,1],[801,1],[1664,1],[900,1],[912,1],[912,1],[1239,1],[1368,1],[1368,1],[1008,1],[1384,1],[1384,1],[1056,1],[1056,1],[1056,1],[1117,1],[1152,1],[720,1],[720,1],[1075,1],[1075,1],[1075,1],[1075,1],[1075,1],[1036,1],[1036,1],[899,1],[1210,1],[1210,1],[1940,1],[900,1],[1394,1],[1092,1],[1260,1],[1330,1],[900,1],[2399,1],[1200,1],[935,1],[546,1],[1188,1],[2079,1],[720,1],[1397,1],[1230,1],[1242,1],[1242,1],[1390,1],[2531,1],[1042,1],[1536,1],[1536,1],[1536,1],[1684,1],[1486,1],[2414,1],[2414,1],[2414,1],[1198,1],[1198,1],[1198,1],[926,1],[1048,1],[1048,1],[1048,1],[1075,1],[1075,1],[1184,1],[1298,1],[1298,1],[1298,1],[1875,1],[1104,1],[1161,1],[1153,1],[1245,1],[1152,1],[1585,1],[1315,1],[1315,1],[1171,1],[1446,1],[1972,1],[672,1],[900,1],[1218,1],[1218,1],[1555,1],[978,1],[1015,1],[1015,1],[1170,1],[1560,1],[1008,1],[912,1],[667,1],[667,1],[975,1],[1015,1],[1144,1],[1191,1],[1682,1],[1100,1],[972,1],[972,1],[972,1],[1442,1],[1442,1],[1434,1],[1434,1],[1120,1],[1120,1],[1120,1],[1620,1],[900,1],[900,1],[903,1],[1153,1],[1153,1],[1120,1],[1120,1],[1120,1],[1656,1],[1656,1],[1656,1],[1050,1],[840,1],[1008,1],[1008,1],[1300,1],[1300,1],[1568,1],[864,1],[1328,1],[1328,1],[900,1],[1075,1],[1190,1],[1360,1],[1157,1],[1190,1],[1382,1],[1364,1],[1364,1],[1364,1],[1388,1],[1651,1],[2022,1],[1190,1],[1260,1],[1075,1],[1260,1],[1050,1],[983,1],[983,1],[983,1],[986,1],[986,1],[1176,1],[864,1],[1182,1],[1131,1],[1152,1],[1224,1],[1096,1],[899,1],[1330,1],[1330,1],[1096,1],[433,1],[1024,1],[1519,1],[1494,1],[958,1],[433,1],[1336,1],[1075,1],[1498,1],[1092,1],[1181,1],[1181,1],[1008,1],[1112,1],[1112,1],[1326,1],[1326,1],[1326,1],[1326,1],[864,1],[864,1],[864,1],[1381,1],[1075,1],[2058,1],[1445,1],[1520,1],[992,1],[1116,1],[1116,1],[1694,1],[1386,1],[1174,1],[1430,1],[950,1],[1204,1],[1204,1],[1204,1],[1610,1],[1610,1],[1610,1],[1881,1],[1024,1],[900,1],[900,1],[1050,1],[1164,1],[1164,1],[2525,1],[1440,1],[1440,1],[952,1],[1156,1],[1156,1],[1156,1],[1156,1],[2482,1],[1344,1],[1344,1],[1344,1],[1881,1],[675,1],[2307,1],[1228,1],[675,1],[900,1],[919,1],[1006,1],[1006,1],[1241,1],[1881,1],[1350,1],[1350,1],[1350,1],[1529,0],[2600,0],[1271,0],[1990,0],[1990,0],[1792,0],[1792,0],[1792,0],[1234,0],[1680,0],[714,0],[2362,0],[2362,0],[2362,0],[1154,0],[1211,0],[3953,0],[2580,0],[1650,0],[1436,0],[1139,0],[1139,0],[3887,0],[697,0],[1659,0],[1365,0],[3637,0],[2778,0],[1052,0],[1784,0],[1784,0],[1031,0],[1096,0],[832,0],[536,0],[522,0],[1492,0],[2587,0],[1214,0],[1958,0],[1956,0],[1737,0],[1701,0],[1787,0],[1212,0],[1634,0],[647,0],[2287,0],[2266,0],[2301,0],[1148,0],[1197,0],[3926,0],[2535,0],[1582,0],[1369,0],[1097,0],[1092,0],[3848,0],[646,0],[1592,0],[1325,0],[3594,0],[2697,0],[1e3,0],[1759,0],[1727,0],[953,0],[1080,0],[819,0],[460,0],[432,0],[595,0]],Y3t=[262300,27e4,262e3,259700,259e3,258800,258600,258500,258500,258500,258400,258400,258200,257400,257200,257100,257100,257100,257100,255700,255700,255600,255600,255500,254600,254400,254200,254100,253800,253800,253800,253600,253200,252700,252700,252600,252600,252500,252100,252100,252100,252100,252100,252e3,251700,251600,251600,251400,251300,250600,250600,250200,249600,249600,249600,249400,248900,248400,248200,248200,248200,247200,247200,247e3,246900,246900,246700,246700,246700,246500,245600,245600,245e3,244800,244800,244200,244200,242600,242500,242300,242300,242100,242100,241800,241800,241700,241200,240900,240900,240900,240900,240900,240700,240700,240700,240600,240500,240500,240500,24e4,239900,239900,239800,239500,239500,239500,239300,239200,239100,238900,238900,238800,238800,238600,238600,238600,238600,238500,238200,238200,238e3,237800,237800,237700,237700,237700,237100,236800,236800,236700,236500,236500,236200,236e3,235800,235600,235600,235500,235500,235400,235200,235100,235100,235e3,234600,234600,234400,234400,234400,234400,234400,234300,233900,233600,233600,233600,233600,233600,233400,232900,232900,232100,232100,232100,232100,231900,231900,231900,231700,231500,231500,231500,231400,231300,231300,231300,230900,230800,230800,230700,230600,230600,230100,23e4,23e4,23e4,229900,229900,229800,229300,229300,229100,229e3,228900,228800,228700,228600,228200,228200,228200,228200,228100,228e3,227900,227700,227700,227300,227300,227200,227100,227100,227100,227100,227e3,226800,226800,226800,226600,226500,226400,226400,226400,226400,226300,225800,225800,225800,225700,225600,225400,225300,225100,225e3,224900,224900,224400,224200,224200,223700,223700,223700,223500,223e3,222900,222400,222400,222400,222200,222200,222200,222200,222100,222100,222100,222100,222e3,221900,221800,221800,221700,221700,221700,221600,221400,221400,221200,221200,221100,221e3,220800,220800,220700,220700,220300,220300,22e4,219900,219900,219900,219900,219900,219700,219700,219600,219600,219500,219500,219500,219500,219400,219400,219e3,219e3,218900,218900,218700,218500,218300,218300,218200,218200,218200,218100,218100,218e3,217900,217900,217900,217400,217400,217300,217300,217300,217200,217e3,217e3,217e3,216600,216600,216600,216200,216200,216200,216100,216100,215900,215900,215900,215900,215900,215600,215600,215300,215300,214800,214800,214700,214700,214200,214200,214200,214e3,213900,213300,213200,213200,213e3,212800,212700,212600,212600,212500,212200,212200,212200,212200,212100,212100,212100,212e3,211700,211600,211500,211500,211400,211300,211e3,210900,210800,210700,210700,210700,210600,210500,210500,210500,210500,210500,210300,210300,210300,210300,210200,210200,209800,209200,209200,208700,208700,208500,208500,207900,207800,207800,207400,207200,207200,207e3,207e3,206800,206700,206500,206200,206100,205800,205800,205600,205600,205500,205500,205300,205100,205e3,204900,204300,204e3,204e3,204e3,204e3,203800,203500,203500,203300,203300,203200,203e3,203e3,202900,202500,202400,202300,202300,202e3,202e3,202e3,202e3,202e3,202e3,201100,201100,200900,200400,200300,200200,200200,2e5,199600,199500,198400,198300,198300,198100,197900,197700,197700,14e4,197300,197300,197300,197300,197200,196900,196700,196600,172e3,145e3,15e4,195100,195100,195100,194800,194200,193700,193700,193200,192900,192400,192100,192100,192100,191700,190800,190600,190300,190200,190200,190100,190100,190100,190100,190100,190100,190100,190100,190100,190100,190100,190100,190100,189800,189700,189700,189700,189600,189e3,189e3,188700,188500,188500,186900,186900,186700,186300,185100,184400,183500,183500,25e4,210800,210700,235e3,209400,209400,222e3,209300,208300,208100,208100,207900,207800,207800,207500,207500,207400,207300,207300,207200,206e3,205400,205400,205200,205e3,205e3,204900,204800,204800,203900,203900,203900,203900,203900,202800,202600,202400,202400,202e3,202e3,201900,201900,201300,200800,200800,200800,200700,200700,200500,200500,200500,200400,200300,200200,199900,199500,199300,199200,199200,198300,197800,197600,197200,197200,196700,196500,196400,196200,196200,196e3,195900,195800,195800,195800,195400,195300,195e3,194300,194300,194300,193400,193400,193100,192600,192600,192300,192100,192100,191700,191500,191200,191200,190900,190600,190100,190100,189600,189600,189600,189500,189500,189500,188900,188900,188900,188900,188800,188700,188700,188700,188700,188600,188600,188500,188500,188500,188400,188400,188200,187100,187100,186600,186600,186100,186e3,185800,185600,185500,185400,185400,185300,185300,185300,185200,185100,184900,183700,183700,183200,183100,183100,182500,182200,181900,181800,181800,181500,181400,181200,180600,180600,179700,179500,179500,179500,178300,178300,178200,178200,178200,178200,178e3,177400,177200,177e3,176900,176700,176700,176700,176600,176500,176300,175900,175700,175700,175700,175100,175100,175100,175100,175e3,174500,174500,174100,174100,173300,173300,173200,172700,172300,172100,171900,171800,171e3,170900,170900,170900,170800,170800,170100,17e4,17e4,169100,169100,169100,168900,168300,168200,168200,168200,167900,167500,167400,167400,167400,167300,167200,167e3,166800,166500,166500,166500,166500,166500,166500,166500,166500,166400,166300,165700,165500,165500,165500,165300,165e3,165e3,164900,164700,164600,164600,164500,164100,163700,163700,163700,163500,163200,163100,163e3,162900,162800,162800,162800,162800,162600,162300,162e3,162e3,161900,161800,161800,161e3,160700,160700,160600,160500,160400,160400,160300,160300,159800,159800,159300,159300,158500,158500,158500,157900,157900,157800,157500,157300,157200,157200,157100,157e3,157e3,156400,156300,156100,156e3,156e3,156e3,155800,155800,155800,155700,155700,155700,155600,155500,155200,155200,155200,154700,154500,154500,154100,154100,154100,154100,153500,153400,152900,152900,152900,152900,152900,152700,152600,152600,152600,152e3,151900,151900,151900,151e3,150900,150700,150700,150300,150300,150200,150100,150100,150100,15e4,15e4,149600,148400,148e3,146800,146700,146400,146200,145800,145700,145600,145400,145400,144800,144800,144800,144800,144100,144e3,144e3,143900,143200,143e3,143e3,142800,142700,142700,142500,142500,142500,142200,142200,141800,141700,141600,141300,140100,139500,139500,139500,139300,139200,138800,138700,138e3,138e3,137700,137500,136700,136200,136100,136100,136e3,135900,135800,135700,135400,135200,135200,134500,133300,133e3,132200,132200,131900,131900,111e3,131800,131300,12e4,75e3,131e3,130300,130300,130300,1e5,18e4,195e3,185e3,174e3,179e3,172900,172700,172500,172400,171900,171900,171900,171800,171200,170800,170300,169900,169700,169700,169700,169300,168800,168700,168700,168700,168500,168200,167700,167600,167200,166300,166300,166e3,166e3,165400,164400,163600,163600,163400,163400,163300,163200,163200,163100,163100,162900,162600,162600,162300,162300,162200,162e3,162e3,162e3,162e3,161900,161900,161100,160900,160700,160700,160400,160300,160300,16e4,16e4,159700,159500,159500,159500,159500,159500,159500,159500,159400,159400,159400,158900,158800,158800,158600,158600,158600,158500,158400,158400,158400,158200,158100,158100,158e3,158e3,157800,157800,157800,157800,157800,157500,157500,157300,157300,157300,157300,156600,156400,156100,156100,156100,156100,156100,156e3,156e3,156e3,155800,155600,155600,155600,155600,155600,155600,155600,155200,155200,155200,155200,154800,154800,154800,154800,154800,154600,154500,154500,154400,154e3,153900,153700,153600,153600,153600,153200,153200,153200,152800,152700,152700,152300,152200,152200,152200,151900,151900,151900,151900,151700,151700,151700,151600,151500,151400,151400,151400,151300,151200,151100,151100,151100,151e3,151e3,151e3,151e3,150800,150800,150800,150800,150800,150800,150800,150700,150600,150600,150600,150600,150400,150200,150200,150100,149600,149600,149600,149600,149600,149400,149300,149300,149300,149300,149300,149300,149100,149e3,149e3,149e3,148800,148800,148800,148700,148600,148500,148500,148500,148300,148300,148200,148200,148200,148100,148100,148100,148e3,147900,147900,147900,147900,147700,147700,147500,147400,147400,147400,147e3,146700,146600,146600,146500,146400,146200,146100,146e3,145900,145900,145900,145800,145700,145700,145700,145700,145700,145700,145700,145e3,145e3,145e3,145e3,145e3,144900,144900,144900,144900,144900,144800,144800,144700,144600,144500,144500,144500,144400,144400,144300,144200,144200,144200,144200,144100,144100,144e3,144e3,143700,143700,143700,143400,143400,143300,143200,143200,143200,143100,143e3,143e3,143e3,143e3,143e3,143e3,142900,142800,142800,142800,142600,142600,142500,142500,142500,142400,142400,142300,142e3,142e3,141900,141800,141800,141600,141600,141600,141600,141600,141600,141500,141400,141300,141300,140700,140700,140700,140700,140700,140500,140500,140500,140500,140500,140500,140500,140400,140300,140300,140300,140300,140300,140300,140100,140100,140100,140100,140100,14e4,14e4,14e4,14e4,14e4,139900,139900,139800,139800,139800,139700,139700,139700,139600,139500,139400,139400,139400,139400,139400,139300,139300,139e3,139e3,138900,138900,138900,138800,138800,138600,138600,138600,138200,138200,138200,138100,138100,138100,138100,138e3,138e3,138e3,138e3,137900,137900,137700,137600,137600,137500,137500,137500,137400,137400,137300,137200,137200,137100,137e3,136900,136900,136900,136900,136900,136900,136900,136900,136800,136700,136600,136600,136500,136500,136400,136400,136200,136200,136200,136100,136e3,136e3,136e3,136e3,135800,135800,135700,135700,135700,135700,135700,135600,135600,135500,135500,135400,135300,135100,135100,135e3,135e3,135e3,134900,134700,134700,134600,134500,134500,134500,134500,134500,134200,134200,134200,134200,134e3,134e3,134e3,134e3,134e3,133900,133800,133800,133800,133800,133800,133800,133800,133800,133700,133500,133500,133400,133100,133100,132900,132900,132700,132700,132600,132500,132300,132300,132300,132100,132e3,132e3,132e3,132e3,131900,131900,131900,131900,131800,131700,131700,131700,131700,131700,131700,131600,131600,131600,131500,131400,131400,131400,131400,131400,131200,131200,131200,131200,131200,131100,131100,131100,131100,131e3,131e3,131e3,130900,130900,130900,130900,130800,130700,130600,130600,130500,130500,130400,130400,130400,130400,130300,130200,130200,130200,130100,130100,130100,130100,130100,13e4,129900,129900,129900,129700,129600,129600,129400,129400,129100,129100,128900,128900,128700,128700,128500,128300,128200,128200,128200,128200,128200,128100,128100,128100,128100,128100,128100,128e3,127900,127900,127900,127900,127900,127800,127800,127800,127700,127600,127500,127500,127500,127400,127400,127400,127400,127400,127400,127300,127300,127300,127200,127200,127100,127e3,127e3,127e3,126900,126900,126900,126900,126900,126800,126800,126700,126700,126600,126600,126600,126600,126600,126500,126500,126300,126300,126300,126300,126200,126200,126100,126100,126100,126e3,126e3,125900,125800,125700,125600,125600,125500,125400,125400,125200,125200,125100,125100,125100,125100,125100,125e3,124900,124900,124900,124500,124500,124500,124500,124500,124200,124100,124100,124100,124e3,124e3,124e3,124e3,124e3,123900,123900,123700,123700,123700,123700,123700,123500,123100,123e3,122800,122800,122500,122500,122500,122500,122500,122400,122400,122400,122400,122300,122300,122300,122100,122100,122100,122100,122100,122100,122e3,122e3,122e3,121800,121600,121400,121200,121100,121e3,121e3,121e3,121e3,121e3,120900,120900,120800,120700,120700,120600,120600,120500,120300,120300,120300,120200,120100,120100,120100,119900,119900,119600,119500,119400,119300,119300,119100,119e3,118900,118800,118700,118700,118700,118600,118600,118500,118500,118400,118200,118100,118100,118100,118e3,117900,117900,117900,117800,117700,117700,117600,117200,117200,117200,117200,117100,117e3,117e3,117e3,116900,116900,116900,116700,116600,116500,116500,116500,116400,116300,116300,116300,116200,116200,116200,116200,116200,116100,116100,116100,116100,116e3,116e3,115900,115900,115800,115800,115800,115800,115700,115700,115700,115700,115600,115500,115500,115500,115500,115400,115400,115400,115300,115300,115300,115300,115100,115100,115100,115100,115100,115e3,115e3,115e3,114900,114800,114800,114800,114800,114800,114700,114700,114700,114600,114600,114600,114300,114200,114e3,114e3,113600,113600,113600,113600,113600,113400,113400,113200,113100,113100,113100,112900,112800,112300,112300,112300,112100,112e3,111800,111700,111600,111600,111500,111400,111300,111100,111e3,111e3,110900,110800,110700,110600,110600,110600,110600,109900,109900,109900,109900,109700,109700,109700,109500,109400,109400,109400,109400,109400,109300,109e3,109e3,109e3,108900,108800,108800,108600,108600,108100,108e3,107900,107900,107800,107800,107700,107400,107400,107400,107400,107300,107200,107200,107200,107200,106900,106700,106600,106400,106400,106200,106200,106200,106200,106200,106100,105900,105900,105900,105900,105900,105700,105700,105600,105600,105600,105500,105400,105400,105e3,105e3,105e3,104900,104900,104900,104900,104900,104900,104800,104500,104500,104500,104400,104400,104400,104300,104e3,104e3,103800,103800,103800,103800,103700,103400,103200,103e3,103e3,103e3,103e3,102700,102700,102600,102500,102100,102100,101700,101500,101500,101500,101400,101400,101400,101300,100100,99900,99900,99600,99400,99300,99100,99100,99e3,98900,98900,98800,98300,98200,98e3,98e3,97800,97600,97400,97300,97300,97100,96700,96700,96600,96600,96600,96600,96400,96400,96400,96e3,95200,95100,95e3,94700,94300,94200,94200,93600,93300,93100,92800,92600,92300,92300,92300,92300,92300,92300,91700,91500,91400,91400,91400,91100,91100,91100,90900,90900,90300,90100,90100,90100,90100,9e4,89800,89800,89800,89600,89200,89200,88500,88300,87100,87100,86700,86700,86300,67e3,75e3,7e4,6e4,127700,126600,117200,115100,115100,113700,113700,113700,103100,101400,99400,97100,97100,97100,96400,96300,91900,87e3,86900,82100,78800,78800,78800,74300,72200,70900,70100,64600,61600,53900,53900,52200,47700,46800,44800,43600,137667,129343,126735,116717,122654,119598,118594,122823,112819,104765,108896,104448,100437,106377,96794,96827,96947,92889,88445,83879,87069,80764,85231,75751,79712,71678,73940,66959,65625,60733,63317,56487,52692,50366,46867,46517,48921],u1={inputs:X3t,outputs:Y3t};T_.register(vR,wR,R$,q2,MEe,PEe,REe,O$);const K3t=({isTraining:e,trainingHistory:t,onStartTraining:n,onStopTraining:r,onShowDetails:i,onUpdateParams:s,predictions:a})=>{const o={labels:t.map(c=>c.epoch),datasets:[{label:"Training Loss",data:t.map(c=>c.loss),borderColor:"rgb(75, 192, 192)",tension:.1},{label:"Validation Loss",data:t.map(c=>c.validationLoss),borderColor:"rgb(255, 99, 132)",tension:.1}]},l=["#003f5c","#7a5195","#bc5090","#ffa600"],u={datasets:[{label:"Predictions",data:a.map(c=>({x:c.size,y:c.price})),backgroundColor:"#ff0000",pointRadius:6,order:1,pointHoverRadius:8,pointStyle:"circle"},...Array.from(new Set(u1.inputs.map(c=>c[1]))).sort((c,f)=>c-f).map((c,f)=>({label:`${c} Bedrooms`,data:u1.inputs.map((d,h)=>({x:d[0],y:u1.outputs[h]})).filter(d=>u1.inputs[u1.inputs.findIndex(h=>h[0]===d.x)][1]===c),backgroundColor:l[f%l.length],pointRadius:4,order:f+2}))].reverse()};return W.jsxs(Hl,{sx:{p:3,mb:3},children:[W.jsx(mt,{variant:"h5",gutterBottom:!0,children:"Training Parameters"}),W.jsxs(Xt,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2,mb:3},children:[W.jsx(ka,{fullWidth:!0,label:"Learning Rate",type:"number",defaultValue:.01,slotProps:{htmlInput:{step:.001,min:.001,max:1}},onChange:c=>s({learningRate:parseFloat(c.target.value)})}),W.jsxs($x,{fullWidth:!0,children:[W.jsx(Ex,{children:"Optimizer"}),W.jsxs(ay,{label:"Optimizer",defaultValue:Da.SGD,onChange:c=>s({optimizer:c.target.value}),children:[W.jsx(gh,{value:Da.ADAM,children:"Adam"}),W.jsx(gh,{value:Da.SGD,children:"SGD"})]})]}),W.jsx(ka,{fullWidth:!0,label:"Epochs",type:"number",defaultValue:10,slotProps:{htmlInput:{min:1,max:1e3}},onChange:c=>s({epochs:parseInt(c.target.value)})}),W.jsx(ka,{fullWidth:!0,label:"Batch Size",type:"number",defaultValue:64,slotProps:{htmlInput:{min:1,max:256}},onChange:c=>s({batchSize:parseInt(c.target.value)})}),W.jsx(ka,{fullWidth:!0,label:"Validation Split",type:"number",defaultValue:.15,slotProps:{htmlInput:{step:.1,min:0,max:.5}},onChange:c=>s({validationSplit:parseFloat(c.target.value)})})]}),W.jsxs(Xt,{sx:{display:"flex",gap:2,mb:3},children:[W.jsx($s,{variant:"contained",color:"primary",onClick:n,disabled:e,children:"Start Training"}),W.jsx($s,{variant:"outlined",color:"secondary",onClick:r,disabled:!e,children:"Stop Training"}),W.jsx($s,{variant:"outlined",onClick:i,children:"Show Model Details"})]}),t.length>0&&W.jsxs("div",{children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Training Progress"}),W.jsxs(Xt,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:3},children:[W.jsx("div",{style:{height:"300px"},children:W.jsx(xZ,{data:o,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"RMSE"}},x:{title:{display:!0,text:"Epoch"}}},plugins:{title:{display:!0,text:"Training Progress"}}}})}),W.jsx("div",{style:{height:"300px"},children:W.jsx(q3t,{data:u,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Price ($)"}},x:{beginAtZero:!0,title:{display:!0,text:"House Size (sq ft)"}}},plugins:{title:{display:!0,text:"House Prices by Size and Bedrooms"}},animation:{duration:0},elements:{point:{borderWidth:0}}}})})]})]})]})},Z3t=({modelStatus:e,onPredict:t,onCleanup:n})=>{const[r,i]=U.useState(750),[s,a]=U.useState(1),[o,l]=U.useState(null),u=async()=>{const f=await t(r,s);l(f)},c=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(f);return W.jsxs(Hl,{sx:{p:3},children:[W.jsx(mt,{variant:"h5",gutterBottom:!0,children:"Predict House Price"}),W.jsxs(Xt,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2,mb:3},children:[W.jsx(ka,{fullWidth:!0,label:"Floor Size (sq ft)",type:"number",value:r,onChange:f=>i(parseInt(f.target.value)),slotProps:{htmlInput:{step:50,min:500,max:5e3}}}),W.jsx(ka,{fullWidth:!0,label:"Number of Bedrooms",type:"number",value:s,onChange:f=>a(parseInt(f.target.value)),slotProps:{htmlInput:{min:1,max:8}}})]}),W.jsxs(Xt,{sx:{display:"flex",gap:2},children:[W.jsx($s,{variant:"contained",onClick:u,disabled:e!=="ready",children:"Predict Price"}),W.jsx($s,{variant:"outlined",color:"secondary",onClick:n,children:"Clean Up Model"})]}),o!==null&&W.jsxs(mt,{variant:"h6",sx:{mt:3},children:["Estimated Price: ",c(o)]})]})},Q3t=()=>W.jsxs(Hl,{sx:{p:3,mb:3},children:[W.jsx(mt,{variant:"h4",gutterBottom:!0,children:"House Price Prediction"}),W.jsxs(mt,{variant:"body1",paragraph:!0,children:["This exercise demonstrates a simple neural network that predicts house prices based on floor size and number of bedrooms provided by ",W.jsx(kx,{href:"https://storage.googleapis.com/jmstore/TensorFlowJS/EdX/TrainingData/real-estate-data.js",children:"Google"})," for the course. The model uses a single dense layer with one unit to perform linear regression."]}),W.jsxs(Xt,{component:"ul",children:[W.jsx(mt,{component:"li",children:"Training data is provided by Google and includes synthetic real estate data with floor size, bedrooms, and prices."}),W.jsx(mt,{component:"li",children:"The data is normalized before training to improve model performance."}),W.jsx(mt,{component:"li",children:"You can adjust training parameters like learning rate, optimizer, and number of epochs."}),W.jsx(mt,{component:"li",children:"After training, you can input floor size and bedrooms to get a price prediction."})]})]});var _z={},Kp={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var J3t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e$t=Object.prototype.hasOwnProperty;function qW(e,t){return e$t.call(e,t)}function XW(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)qW(e,i)&&r.push(i);return r}function Dl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function YW(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function t1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function VEe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function KW(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(KW(e[t]))return!0}else if(typeof e=="object"){for(var r=XW(e),i=r.length,s=0;s<i;s++)if(KW(e[r[s]]))return!0}}return!1}function xde(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var WEe=function(e){J3t(t,e);function t(n,r,i,s,a){var o=this.constructor,l=e.call(this,xde(n,{name:r,index:i,operation:s,tree:a}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=a,Object.setPrototypeOf(l,o.prototype),l.message=xde(n,{name:r,index:i,operation:s,tree:a}),l}return t}(Error),fi=WEe,t$t=Dl,X2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=CR(n,this.path);r&&(r=Dl(r));var i=V1(n,{op:"remove",path:this.from}).removed;return V1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=CR(n,this.from);return V1(n,{op:"add",path:this.path,value:Dl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:IE(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},n$t={add:function(e,t,n){return YW(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:X2.move,copy:X2.copy,test:X2.test,_get:X2._get};function CR(e,t){if(t=="")return e;var n={op:"_get",path:t};return V1(e,n),n.value}function V1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):$R(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=CR(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=IE(e,t.value),a.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return a}}else{r||(e=Dl(e));var o=t.path||"",l=o.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=$R;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=VEe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&m(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!YW(h))throw new fi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);YW(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new fi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var a=n$t[t.op].call(t,u,h,e);if(a.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}}else if(c>=f){var a=X2[t.op].call(t,u,h,e);if(a.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new fi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function u8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Dl(e));for(var s=new Array(t.length),a=0,o=t.length;a<o;a++)s[a]=V1(e,t[a],n,!0,i,a),e=s[a].newDocument;return s.newDocument=e,s}function r$t(e,t,n){var r=V1(e,t);if(r.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function $R(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new fi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(X2[e.op]){if(typeof e.path!="string")throw new fi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new fi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new fi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&KW(e.value))throw new fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new fi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new fi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},o=HEe([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new fi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function HEe(e,t,n){try{if(!Array.isArray(e))throw new fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)u8(Dl(t),Dl(e),n||!0);else{n=n||$R;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof fi)return i;throw i}}function IE(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,a;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!IE(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(e);if(s=o.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!IE(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const i$t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:fi,_areEquals:IE,applyOperation:V1,applyPatch:u8,applyReducer:r$t,deepClone:t$t,getValueByPointer:CR,validate:HEe,validator:$R},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var vZ=new WeakMap,s$t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),a$t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function o$t(e){return vZ.get(e)}function l$t(e,t){return e.observers.get(t)}function u$t(e,t){e.observers.delete(t.callback)}function c$t(e,t){t.unobserve()}function f$t(e,t){var n=[],r,i=o$t(e);if(!i)i=new s$t(e),vZ.set(e,i);else{var s=l$t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Dl(e),t){r.callback=t,r.next=null;var a=function(){ZW(r)},o=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return r.patches=n,r.object=e,r.unobserve=function(){ZW(r),clearTimeout(r.next),u$t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},i.observers.set(t,new a$t(t,r)),r}function ZW(e,t){t===void 0&&(t=!1);var n=vZ.get(e.object);wZ(n.value,e.object,e.patches,"",t),e.patches.length&&u8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function wZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=XW(t),a=XW(e),o=!1,l=a.length-1;l>=0;l--){var u=a[l],c=e[u];if(qW(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?wZ(c,f,n,r+"/"+t1(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+t1(u),value:Dl(c)}),n.push({op:"replace",path:r+"/"+t1(u),value:Dl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+t1(u),value:Dl(c)}),n.push({op:"remove",path:r+"/"+t1(u)}),o=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!o&&s.length==a.length))for(var l=0;l<s.length;l++){var u=s[l];!qW(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+t1(u),value:Dl(t[u])})}}}function d$t(e,t,n){n===void 0&&(n=!1);var r=[];return wZ(e,t,r,"",n),r}const h$t=Object.freeze(Object.defineProperty({__proto__:null,compare:d$t,generate:ZW,observe:f$t,unobserve:c$t},Symbol.toStringTag,{value:"Module"}));Object.assign({},i$t,h$t,{JsonPatchError:WEe,deepClone:Dl,escapePathComponent:t1,unescapePathComponent:VEe});var Tz,vde;function p$t(){if(vde)return Tz;vde=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return Tz=function(n,r){var i,s,a;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,a=r.replacer,function o(l,u,c){var f,d,h,m,g,b,x,w,C,S,E,A;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),E=JSON.stringify(l,a),E===void 0)return E;if(x=s-u.length-c,E.length<=x&&(C=E.replace(e,function(k,N){return N||k+" "}),C.length<=x))return C;if(a!=null&&(l=JSON.parse(E),a=void 0),typeof l=="object"&&l!==null){if(w=u+i,h=[],d=0,Array.isArray(l))for(S="[",f="]",x=l.length;d<x;d++)h.push(o(l[d],w,d===x-1?0:1)||"null");else for(S="{",f="}",b=Object.keys(l),x=b.length;d<x;d++)m=b[d],g=JSON.stringify(m)+": ",A=o(l[m],w,g.length+(d===x-1?0:1)),A!==void 0&&h.push(g+A);if(h.length>0)return[S,i+h.join(`,
`+w),f].join(`
`+u)}return E}(n,"",0)},Tz}var m$t=p$t();const Nz=Am(m$t);var tD={exports:{}},Dz,wde;function c8(){if(wde)return Dz;wde=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return Dz={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Dz}var Iz,Sde;function f8(){if(Sde)return Iz;Sde=1;var e={};return Iz=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Iz}var Cde;function N_(){return Cde||(Cde=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=c8(),s=f8();t=e.exports={};const a=t.re=[],o=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={};let f=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,r]],m=b=>{for(const[x,w]of h)b=b.split(`${x}*`).join(`${x}{0,${w}}`).split(`${x}+`).join(`${x}{1,${w}}`);return b},g=(b,x,w)=>{const C=m(x),S=f++;s(b,S,x),c[b]=S,l[S]=x,u[S]=C,a[S]=new RegExp(x,w?"g":void 0),o[S]=new RegExp(C,w?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),g("FULL",`^${l[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),g("LOOSE",`^${l[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),g("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[c.COERCE],!0),g("COERCERTLFULL",l[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(tD,tD.exports)),tD.exports}var Oz,$de;function SZ(){if($de)return Oz;$de=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Oz=r=>r?typeof r!="object"?e:r:t,Oz}var Rz,Ede;function GEe(){if(Ede)return Rz;Ede=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),a=e.test(i);return s&&a&&(r=+r,i=+i),r===i?0:s&&!a?-1:a&&!s?1:r<i?-1:1};return Rz={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},Rz}var Fz,kde;function _o(){if(kde)return Fz;kde=1;const e=f8(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=c8(),{safeRe:r,t:i}=N_(),s=SZ(),{compareIdentifiers:a}=GEe();class o{constructor(u,c){if(c=s(c),u instanceof o){if(u.loose===!!c.loose&&u.includePrerelease===!!c.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const f=u.trim().match(c.loose?r[i.LOOSE]:r[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof o)){if(typeof u=="string"&&u===this.version)return 0;u=new o(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof o||(u=new o(u,this.options)),a(this.major,u.major)||a(this.minor,u.minor)||a(this.patch,u.patch)}comparePre(u){if(u instanceof o||(u=new o(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let c=0;do{const f=this.prerelease[c],d=u.prerelease[c];if(e("prerelease compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return a(f,d)}while(++c)}compareBuild(u){u instanceof o||(u=new o(u,this.options));let c=0;do{const f=this.build[c],d=u.build[c];if(e("build compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return a(f,d)}while(++c)}inc(u,c,f){if(u.startsWith("pre")){if(!c&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(c){const d=`-${c}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!d||d[1]!==c)throw new Error(`invalid identifier: ${c}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,f),this.inc("pre",c,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,f),this.inc("pre",c,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(c===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(c){let h=[c,d];f===!1&&(h=[c]),a(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Fz=o,Fz}var Mz,Ade;function Yw(){if(Ade)return Mz;Ade=1;const e=_o();return Mz=(n,r,i=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(s){if(!i)return null;throw s}},Mz}var Lz,_de;function g$t(){if(_de)return Lz;_de=1;const e=Yw();return Lz=(n,r)=>{const i=e(n,r);return i?i.version:null},Lz}var Pz,Tde;function y$t(){if(Tde)return Pz;Tde=1;const e=Yw();return Pz=(n,r)=>{const i=e(n.trim().replace(/^[=v]+/,""),r);return i?i.version:null},Pz}var Bz,Nde;function b$t(){if(Nde)return Bz;Nde=1;const e=_o();return Bz=(n,r,i,s,a)=>{typeof i=="string"&&(a=s,s=i,i=void 0);try{return new e(n instanceof e?n.version:n,i).inc(r,s,a).version}catch{return null}},Bz}var zz,Dde;function x$t(){if(Dde)return zz;Dde=1;const e=Yw();return zz=(n,r)=>{const i=e(n,null,!0),s=e(r,null,!0),a=i.compare(s);if(a===0)return null;const o=a>0,l=o?i:s,u=o?s:i,c=!!l.prerelease.length;if(!!u.prerelease.length&&!c){if(!u.patch&&!u.minor)return"major";if(u.compareMain(l)===0)return u.minor&&!u.patch?"minor":"patch"}const d=c?"pre":"";return i.major!==s.major?d+"major":i.minor!==s.minor?d+"minor":i.patch!==s.patch?d+"patch":"prerelease"},zz}var jz,Ide;function v$t(){if(Ide)return jz;Ide=1;const e=_o();return jz=(n,r)=>new e(n,r).major,jz}var Uz,Ode;function w$t(){if(Ode)return Uz;Ode=1;const e=_o();return Uz=(n,r)=>new e(n,r).minor,Uz}var Vz,Rde;function S$t(){if(Rde)return Vz;Rde=1;const e=_o();return Vz=(n,r)=>new e(n,r).patch,Vz}var Wz,Fde;function C$t(){if(Fde)return Wz;Fde=1;const e=Yw();return Wz=(n,r)=>{const i=e(n,r);return i&&i.prerelease.length?i.prerelease:null},Wz}var Hz,Mde;function Ic(){if(Mde)return Hz;Mde=1;const e=_o();return Hz=(n,r,i)=>new e(n,i).compare(new e(r,i)),Hz}var Gz,Lde;function $$t(){if(Lde)return Gz;Lde=1;const e=Ic();return Gz=(n,r,i)=>e(r,n,i),Gz}var qz,Pde;function E$t(){if(Pde)return qz;Pde=1;const e=Ic();return qz=(n,r)=>e(n,r,!0),qz}var Xz,Bde;function CZ(){if(Bde)return Xz;Bde=1;const e=_o();return Xz=(n,r,i)=>{const s=new e(n,i),a=new e(r,i);return s.compare(a)||s.compareBuild(a)},Xz}var Yz,zde;function k$t(){if(zde)return Yz;zde=1;const e=CZ();return Yz=(n,r)=>n.sort((i,s)=>e(i,s,r)),Yz}var Kz,jde;function A$t(){if(jde)return Kz;jde=1;const e=CZ();return Kz=(n,r)=>n.sort((i,s)=>e(s,i,r)),Kz}var Zz,Ude;function d8(){if(Ude)return Zz;Ude=1;const e=Ic();return Zz=(n,r,i)=>e(n,r,i)>0,Zz}var Qz,Vde;function $Z(){if(Vde)return Qz;Vde=1;const e=Ic();return Qz=(n,r,i)=>e(n,r,i)<0,Qz}var Jz,Wde;function qEe(){if(Wde)return Jz;Wde=1;const e=Ic();return Jz=(n,r,i)=>e(n,r,i)===0,Jz}var ej,Hde;function XEe(){if(Hde)return ej;Hde=1;const e=Ic();return ej=(n,r,i)=>e(n,r,i)!==0,ej}var tj,Gde;function EZ(){if(Gde)return tj;Gde=1;const e=Ic();return tj=(n,r,i)=>e(n,r,i)>=0,tj}var nj,qde;function kZ(){if(qde)return nj;qde=1;const e=Ic();return nj=(n,r,i)=>e(n,r,i)<=0,nj}var rj,Xde;function YEe(){if(Xde)return rj;Xde=1;const e=qEe(),t=XEe(),n=d8(),r=EZ(),i=$Z(),s=kZ();return rj=(o,l,u,c)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof u=="object"&&(u=u.version),o===u;case"!==":return typeof o=="object"&&(o=o.version),typeof u=="object"&&(u=u.version),o!==u;case"":case"=":case"==":return e(o,u,c);case"!=":return t(o,u,c);case">":return n(o,u,c);case">=":return r(o,u,c);case"<":return i(o,u,c);case"<=":return s(o,u,c);default:throw new TypeError(`Invalid operator: ${l}`)}},rj}var ij,Yde;function _$t(){if(Yde)return ij;Yde=1;const e=_o(),t=Yw(),{safeRe:n,t:r}=N_();return ij=(s,a)=>{if(s instanceof e)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;a=a||{};let o=null;if(!a.rtl)o=s.match(a.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const h=a.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let m;for(;(m=h.exec(s))&&(!o||o.index+o[0].length!==s.length);)(!o||m.index+m[0].length!==o.index+o[0].length)&&(o=m),h.lastIndex=m.index+m[1].length+m[2].length;h.lastIndex=-1}if(o===null)return null;const l=o[2],u=o[3]||"0",c=o[4]||"0",f=a.includePrerelease&&o[5]?`-${o[5]}`:"",d=a.includePrerelease&&o[6]?`+${o[6]}`:"";return t(`${l}.${u}.${c}${f}${d}`,a)},ij}var sj,Kde;function T$t(){if(Kde)return sj;Kde=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return sj=e,sj}var aj,Zde;function Oc(){if(Zde)return aj;Zde=1;const e=/\s+/g;class t{constructor(F,R){if(R=i(R),F instanceof t)return F.loose===!!R.loose&&F.includePrerelease===!!R.includePrerelease?F:new t(F.raw,R);if(F instanceof s)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(H=>!g(H[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&b(H[0])){this.set=[H];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const R=this.set[F];for(let j=0;j<R.length;j++)j>0&&(this.formatted+=" "),this.formatted+=R[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const j=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+F,H=r.get(j);if(H)return H;const G=this.options.loose,z=G?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];F=F.replace(z,L(this.options.includePrerelease)),a("hyphen replace",F),F=F.replace(l[u.COMPARATORTRIM],c),a("comparator trim",F),F=F.replace(l[u.TILDETRIM],f),a("tilde trim",F),F=F.replace(l[u.CARETTRIM],d),a("caret trim",F);let Y=F.split(" ").map(re=>w(re,this.options)).join(" ").split(/\s+/).map(re=>D(re,this.options));G&&(Y=Y.filter(re=>(a("loose invalid filter",re,this.options),!!re.match(l[u.COMPARATORLOOSE])))),a("range list",Y);const Z=new Map,Q=Y.map(re=>new s(re,this.options));for(const re of Q){if(g(re))return[re];Z.set(re.value,re)}Z.size>1&&Z.has("")&&Z.delete("");const se=[...Z.values()];return r.set(j,se),se}intersects(F,R){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(j=>x(j,R)&&F.set.some(H=>x(H,R)&&j.every(G=>H.every(z=>G.intersects(z,R)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new o(F,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(P(this.set[R],F,this.options))return!0;return!1}}aj=t;const n=T$t(),r=new n,i=SZ(),s=h8(),a=f8(),o=_o(),{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:d}=N_(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=c8(),g=M=>M.value==="<0.0.0-0",b=M=>M.value==="",x=(M,F)=>{let R=!0;const j=M.slice();let H=j.pop();for(;R&&j.length;)R=j.every(G=>H.intersects(G,F)),H=j.pop();return R},w=(M,F)=>(a("comp",M,F),M=A(M,F),a("caret",M),M=S(M,F),a("tildes",M),M=N(M,F),a("xrange",M),M=T(M,F),a("stars",M),M),C=M=>!M||M.toLowerCase()==="x"||M==="*",S=(M,F)=>M.trim().split(/\s+/).map(R=>E(R,F)).join(" "),E=(M,F)=>{const R=F.loose?l[u.TILDELOOSE]:l[u.TILDE];return M.replace(R,(j,H,G,z,Y)=>{a("tilde",M,j,H,G,z,Y);let Z;return C(H)?Z="":C(G)?Z=`>=${H}.0.0 <${+H+1}.0.0-0`:C(z)?Z=`>=${H}.${G}.0 <${H}.${+G+1}.0-0`:Y?(a("replaceTilde pr",Y),Z=`>=${H}.${G}.${z}-${Y} <${H}.${+G+1}.0-0`):Z=`>=${H}.${G}.${z} <${H}.${+G+1}.0-0`,a("tilde return",Z),Z})},A=(M,F)=>M.trim().split(/\s+/).map(R=>k(R,F)).join(" "),k=(M,F)=>{a("caret",M,F);const R=F.loose?l[u.CARETLOOSE]:l[u.CARET],j=F.includePrerelease?"-0":"";return M.replace(R,(H,G,z,Y,Z)=>{a("caret",M,H,G,z,Y,Z);let Q;return C(G)?Q="":C(z)?Q=`>=${G}.0.0${j} <${+G+1}.0.0-0`:C(Y)?G==="0"?Q=`>=${G}.${z}.0${j} <${G}.${+z+1}.0-0`:Q=`>=${G}.${z}.0${j} <${+G+1}.0.0-0`:Z?(a("replaceCaret pr",Z),G==="0"?z==="0"?Q=`>=${G}.${z}.${Y}-${Z} <${G}.${z}.${+Y+1}-0`:Q=`>=${G}.${z}.${Y}-${Z} <${G}.${+z+1}.0-0`:Q=`>=${G}.${z}.${Y}-${Z} <${+G+1}.0.0-0`):(a("no pr"),G==="0"?z==="0"?Q=`>=${G}.${z}.${Y}${j} <${G}.${z}.${+Y+1}-0`:Q=`>=${G}.${z}.${Y}${j} <${G}.${+z+1}.0-0`:Q=`>=${G}.${z}.${Y} <${+G+1}.0.0-0`),a("caret return",Q),Q})},N=(M,F)=>(a("replaceXRanges",M,F),M.split(/\s+/).map(R=>I(R,F)).join(" ")),I=(M,F)=>{M=M.trim();const R=F.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return M.replace(R,(j,H,G,z,Y,Z)=>{a("xRange",M,j,H,G,z,Y,Z);const Q=C(G),se=Q||C(z),re=se||C(Y),de=re;return H==="="&&de&&(H=""),Z=F.includePrerelease?"-0":"",Q?H===">"||H==="<"?j="<0.0.0-0":j="*":H&&de?(se&&(z=0),Y=0,H===">"?(H=">=",se?(G=+G+1,z=0,Y=0):(z=+z+1,Y=0)):H==="<="&&(H="<",se?G=+G+1:z=+z+1),H==="<"&&(Z="-0"),j=`${H+G}.${z}.${Y}${Z}`):se?j=`>=${G}.0.0${Z} <${+G+1}.0.0-0`:re&&(j=`>=${G}.${z}.0${Z} <${G}.${+z+1}.0-0`),a("xRange return",j),j})},T=(M,F)=>(a("replaceStars",M,F),M.trim().replace(l[u.STAR],"")),D=(M,F)=>(a("replaceGTE0",M,F),M.trim().replace(l[F.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=M=>(F,R,j,H,G,z,Y,Z,Q,se,re,de)=>(C(j)?R="":C(H)?R=`>=${j}.0.0${M?"-0":""}`:C(G)?R=`>=${j}.${H}.0${M?"-0":""}`:z?R=`>=${R}`:R=`>=${R}${M?"-0":""}`,C(Q)?Z="":C(se)?Z=`<${+Q+1}.0.0-0`:C(re)?Z=`<${Q}.${+se+1}.0-0`:de?Z=`<=${Q}.${se}.${re}-${de}`:M?Z=`<${Q}.${se}.${+re+1}-0`:Z=`<=${Z}`,`${R} ${Z}`.trim()),P=(M,F,R)=>{for(let j=0;j<M.length;j++)if(!M[j].test(F))return!1;if(F.prerelease.length&&!R.includePrerelease){for(let j=0;j<M.length;j++)if(a(M[j].semver),M[j].semver!==s.ANY&&M[j].semver.prerelease.length>0){const H=M[j].semver;if(H.major===F.major&&H.minor===F.minor&&H.patch===F.patch)return!0}return!1}return!0};return aj}var oj,Qde;function h8(){if(Qde)return oj;Qde=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new o(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new o(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}oj=t;const n=SZ(),{safeRe:r,t:i}=N_(),s=YEe(),a=f8(),o=_o(),l=Oc();return oj}var lj,Jde;function p8(){if(Jde)return lj;Jde=1;const e=Oc();return lj=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},lj}var uj,ehe;function N$t(){if(ehe)return uj;ehe=1;const e=Oc();return uj=(n,r)=>new e(n,r).set.map(i=>i.map(s=>s.value).join(" ").trim().split(" ")),uj}var cj,the;function D$t(){if(the)return cj;the=1;const e=_o(),t=Oc();return cj=(r,i,s)=>{let a=null,o=null,l=null;try{l=new t(i,s)}catch{return null}return r.forEach(u=>{l.test(u)&&(!a||o.compare(u)===-1)&&(a=u,o=new e(a,s))}),a},cj}var fj,nhe;function I$t(){if(nhe)return fj;nhe=1;const e=_o(),t=Oc();return fj=(r,i,s)=>{let a=null,o=null,l=null;try{l=new t(i,s)}catch{return null}return r.forEach(u=>{l.test(u)&&(!a||o.compare(u)===1)&&(a=u,o=new e(a,s))}),a},fj}var dj,rhe;function O$t(){if(rhe)return dj;rhe=1;const e=_o(),t=Oc(),n=d8();return dj=(i,s)=>{i=new t(i,s);let a=new e("0.0.0");if(i.test(a)||(a=new e("0.0.0-0"),i.test(a)))return a;a=null;for(let o=0;o<i.set.length;++o){const l=i.set[o];let u=null;l.forEach(c=>{const f=new e(c.semver.version);switch(c.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!u||n(f,u))&&(u=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),u&&(!a||n(a,u))&&(a=u)}return a&&i.test(a)?a:null},dj}var hj,ihe;function R$t(){if(ihe)return hj;ihe=1;const e=Oc();return hj=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},hj}var pj,she;function AZ(){if(she)return pj;she=1;const e=_o(),t=h8(),{ANY:n}=t,r=Oc(),i=p8(),s=d8(),a=$Z(),o=kZ(),l=EZ();return pj=(c,f,d,h)=>{c=new e(c,h),f=new r(f,h);let m,g,b,x,w;switch(d){case">":m=s,g=o,b=a,x=">",w=">=";break;case"<":m=a,g=l,b=s,x="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(c,f,h))return!1;for(let C=0;C<f.set.length;++C){const S=f.set[C];let E=null,A=null;if(S.forEach(k=>{k.semver===n&&(k=new t(">=0.0.0")),E=E||k,A=A||k,m(k.semver,E.semver,h)?E=k:b(k.semver,A.semver,h)&&(A=k)}),E.operator===x||E.operator===w||(!A.operator||A.operator===x)&&g(c,A.semver))return!1;if(A.operator===w&&b(c,A.semver))return!1}return!0},pj}var mj,ahe;function F$t(){if(ahe)return mj;ahe=1;const e=AZ();return mj=(n,r,i)=>e(n,r,">",i),mj}var gj,ohe;function M$t(){if(ohe)return gj;ohe=1;const e=AZ();return gj=(n,r,i)=>e(n,r,"<",i),gj}var yj,lhe;function L$t(){if(lhe)return yj;lhe=1;const e=Oc();return yj=(n,r,i)=>(n=new e(n,i),r=new e(r,i),n.intersects(r,i)),yj}var bj,uhe;function P$t(){if(uhe)return bj;uhe=1;const e=p8(),t=Ic();return bj=(n,r,i)=>{const s=[];let a=null,o=null;const l=n.sort((d,h)=>t(d,h,i));for(const d of l)e(d,r,i)?(o=d,a||(a=d)):(o&&s.push([a,o]),o=null,a=null);a&&s.push([a,null]);const u=[];for(const[d,h]of s)d===h?u.push(d):!h&&d===l[0]?u.push("*"):h?d===l[0]?u.push(`<=${h}`):u.push(`${d} - ${h}`):u.push(`>=${d}`);const c=u.join(" || "),f=typeof r.raw=="string"?r.raw:String(r);return c.length<f.length?c:r},bj}var xj,che;function B$t(){if(che)return xj;che=1;const e=Oc(),t=h8(),{ANY:n}=t,r=p8(),i=Ic(),s=(f,d,h={})=>{if(f===d)return!0;f=new e(f,h),d=new e(d,h);let m=!1;e:for(const g of f.set){for(const b of d.set){const x=l(g,b,h);if(m=m||x!==null,x)continue e}if(m)return!1}return!0},a=[new t(">=0.0.0-0")],o=[new t(">=0.0.0")],l=(f,d,h)=>{if(f===d)return!0;if(f.length===1&&f[0].semver===n){if(d.length===1&&d[0].semver===n)return!0;h.includePrerelease?f=a:f=o}if(d.length===1&&d[0].semver===n){if(h.includePrerelease)return!0;d=o}const m=new Set;let g,b;for(const N of f)N.operator===">"||N.operator===">="?g=u(g,N,h):N.operator==="<"||N.operator==="<="?b=c(b,N,h):m.add(N.semver);if(m.size>1)return null;let x;if(g&&b){if(x=i(g.semver,b.semver,h),x>0)return null;if(x===0&&(g.operator!==">="||b.operator!=="<="))return null}for(const N of m){if(g&&!r(N,String(g),h)||b&&!r(N,String(b),h))return null;for(const I of d)if(!r(N,String(I),h))return!1;return!0}let w,C,S,E,A=b&&!h.includePrerelease&&b.semver.prerelease.length?b.semver:!1,k=g&&!h.includePrerelease&&g.semver.prerelease.length?g.semver:!1;A&&A.prerelease.length===1&&b.operator==="<"&&A.prerelease[0]===0&&(A=!1);for(const N of d){if(E=E||N.operator===">"||N.operator===">=",S=S||N.operator==="<"||N.operator==="<=",g){if(k&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===k.major&&N.semver.minor===k.minor&&N.semver.patch===k.patch&&(k=!1),N.operator===">"||N.operator===">="){if(w=u(g,N,h),w===N&&w!==g)return!1}else if(g.operator===">="&&!r(g.semver,String(N),h))return!1}if(b){if(A&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===A.major&&N.semver.minor===A.minor&&N.semver.patch===A.patch&&(A=!1),N.operator==="<"||N.operator==="<="){if(C=c(b,N,h),C===N&&C!==b)return!1}else if(b.operator==="<="&&!r(b.semver,String(N),h))return!1}if(!N.operator&&(b||g)&&x!==0)return!1}return!(g&&S&&!b&&x!==0||b&&E&&!g&&x!==0||k||A)},u=(f,d,h)=>{if(!f)return d;const m=i(f.semver,d.semver,h);return m>0?f:m<0||d.operator===">"&&f.operator===">="?d:f},c=(f,d,h)=>{if(!f)return d;const m=i(f.semver,d.semver,h);return m<0?f:m>0||d.operator==="<"&&f.operator==="<="?d:f};return xj=s,xj}var vj,fhe;function z$t(){if(fhe)return vj;fhe=1;const e=N_(),t=c8(),n=_o(),r=GEe(),i=Yw(),s=g$t(),a=y$t(),o=b$t(),l=x$t(),u=v$t(),c=w$t(),f=S$t(),d=C$t(),h=Ic(),m=$$t(),g=E$t(),b=CZ(),x=k$t(),w=A$t(),C=d8(),S=$Z(),E=qEe(),A=XEe(),k=EZ(),N=kZ(),I=YEe(),T=_$t(),D=h8(),L=Oc(),P=p8(),M=N$t(),F=D$t(),R=I$t(),j=O$t(),H=R$t(),G=AZ(),z=F$t(),Y=M$t(),Z=L$t(),Q=P$t(),se=B$t();return vj={parse:i,valid:s,clean:a,inc:o,diff:l,major:u,minor:c,patch:f,prerelease:d,compare:h,rcompare:m,compareLoose:g,compareBuild:b,sort:x,rsort:w,gt:C,lt:S,eq:E,neq:A,gte:k,lte:N,cmp:I,coerce:T,Comparator:D,Range:L,satisfies:P,toComparators:M,maxSatisfying:F,minSatisfying:R,minVersion:j,validRange:H,outside:G,gtr:z,ltr:Y,intersects:Z,simplifyRange:Q,subset:se,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},vj}var KEe=z$t();function hl(e,t,n){return e.fields=t||[],e.fname=n,e}function mi(e){return e==null?null:e.fname}function Fa(e){return e==null?null:e.fields}function ZEe(e){return e.length===1?j$t(e[0]):U$t(e)}const j$t=e=>function(t){return t[e]},U$t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ce(e){throw Error(e)}function m8(e){const t=[],n=e.length;let r=null,i=0,s="",a,o,l;e=e+"";function u(){t.push(s+e.substring(a,o)),s="",a=o+1}for(a=o=0;o<n;++o)if(l=e[o],l==="\\")s+=e.substring(a,o++),a=o;else if(l===r)u(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=o+1,r=l):l==="."&&!i?o>a?u():a=o+1:l==="["?(o>a&&u(),i=a=o+1):l==="]"&&(i||Ce("Access path missing open bracket: "+e),i>0&&u(),i=0,a=o+1)}return i&&Ce("Access path missing closing bracket: "+e),r&&Ce("Access path missing closing quote: "+e),o>a&&(o++,u()),t}function Pl(e,t,n){const r=m8(e);return e=r.length===1?r[0]:e,hl((n&&n.get||ZEe)(r),[e],t||e)}const D_=Pl("id"),Ha=hl(e=>e,[],"identity"),b0=hl(()=>0,[],"zero"),Kw=hl(()=>1,[],"one"),zs=hl(()=>!0,[],"true"),l0=hl(()=>!1,[],"false");function V$t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const QEe=0,_Z=1,JEe=2,eke=3,tke=4;function nke(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:V$t,r=e||QEe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=_Z&&n(t||"error","ERROR",arguments),this},warn(){return r>=JEe&&n(t||"warn","WARN",arguments),this},info(){return r>=eke&&n(t||"log","INFO",arguments),this},debug(){return r>=tke&&n(t||"log","DEBUG",arguments),this}}}var Qe=Array.isArray;function Ht(e){return e===Object(e)}const dhe=e=>e!=="__proto__";function g8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=W$t(r.signals,i.signals);else{const a=s==="legend"?{layout:1}:s==="style"?!0:null;y8(r,s,i[s],a)}return r},{})}function y8(e,t,n,r){if(!dhe(t))return;let i,s;if(Ht(n)&&!Qe(n)){s=Ht(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?y8(s,i,n[i]):dhe(i)&&(s[i]=n[i])}else e[t]=n}function W$t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function en(e){return e[e.length-1]}function Ti(e){return e==null||e===""?null:+e}const rke=e=>t=>e*Math.exp(t),ike=e=>t=>Math.log(e*t),ske=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),ake=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,ER=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function b8(e,t,n,r){const i=n(e[0]),s=n(en(e)),a=(s-i)*t;return[r(i-a),r(s-a)]}function TZ(e,t){return b8(e,t,Ti,Ha)}function NZ(e,t){var n=Math.sign(e[0]);return b8(e,t,ike(n),rke(n))}function DZ(e,t,n){return b8(e,t,ER(n),ER(1/n))}function IZ(e,t,n){return b8(e,t,ske(n),ake(n))}function x8(e,t,n,r,i){const s=r(e[0]),a=r(en(e)),o=t!=null?r(t):(s+a)/2;return[i(o+(s-o)*n),i(o+(a-o)*n)]}function v8(e,t,n){return x8(e,t,n,Ti,Ha)}function w8(e,t,n){const r=Math.sign(e[0]);return x8(e,t,n,ike(r),rke(r))}function OE(e,t,n,r){return x8(e,t,n,ER(r),ER(1/r))}function S8(e,t,n,r){return x8(e,t,n,ske(r),ake(r))}function OZ(e){return 1+~~(new Date(e).getMonth()/3)}function RZ(e){return 1+~~(new Date(e).getUTCMonth()/3)}function vt(e){return e!=null?Qe(e)?e:[e]:[]}function FZ(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Wt(e){return typeof e=="function"}const H$t="descending";function MZ(e,t,n){n=n||{},t=vt(t)||[];const r=[],i=[],s={},a=n.comparator||G$t;return vt(e).forEach((o,l)=>{o!=null&&(r.push(t[l]===H$t?-1:1),i.push(o=Wt(o)?o:Pl(o,null,n)),(Fa(o)||[]).forEach(u=>s[u]=1))}),i.length===0?null:hl(a(i,r),Object.keys(s))}const I_=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),G$t=(e,t)=>e.length===1?q$t(e[0],t[0]):X$t(e,t,e.length),q$t=(e,t)=>function(n,r){return I_(e(n),e(r))*t},X$t=(e,t,n)=>(t.push(0),function(r,i){let s,a=0,o=-1;for(;a===0&&++o<n;)s=e[o],a=I_(s(r),s(i));return a*t[o]});function oa(e){return Wt(e)?e:()=>e}function LZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Kt(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function kc(e,t){let n=0,r,i,s,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=a=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function oke(e,t){const n=e.length;let r=-1,i,s,a,o,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}return[o,l]}function gt(e,t){return Object.hasOwn(e,t)}const nD={};function Zw(e){let t={},n;function r(s){return gt(t,s)&&t[s]!==nD}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,a){return r(s)||(++i.size,t[s]===nD&&--i.empty),t[s]=a,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=nD),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let a=0;for(const o in t){const l=t[o];l!==nD&&(!n||!n(l))&&(s[o]=l,++a)}i.size=a,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function PZ(e,t,n,r,i,s){if(!n&&n!==0)return s;const a=+n;let o=e[0],l=en(e),u;l<o&&(u=o,o=l,l=u),u=Math.abs(t-o);const c=Math.abs(l-t);return u<c&&u<=a?r:c<=a?i:s}function Ve(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Kt(r,n)}function k1(e,t,n,r){let i=t[0],s=t[t.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function C8(e){return typeof e=="boolean"}function Nh(e){return Object.prototype.toString.call(e)==="[object Date]"}function lke(e){return e&&Wt(e[Symbol.iterator])}function Yh(e){return typeof e=="number"}function $8(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Fn(e){return typeof e=="string"}function BZ(e,t,n){e&&(e=t?vt(e).map(o=>o.replace(/\\(.)/g,"$1")):vt(e));const r=e&&e.length,i=n&&n.get||ZEe,s=o=>i(t?[o]:m8(o));let a;if(!r)a=function(){return""};else if(r===1){const o=s(e[0]);a=function(l){return""+o(l)}}else{const o=e.map(s);a=function(l){let u=""+o[0](l),c=0;for(;++c<r;)u+="|"+o[c](l);return u}}return hl(a,e,"key")}function zZ(e,t){const n=e[0],r=en(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Y$t=1e4;function E8(e){e=+e||Y$t;let t,n,r;const i=()=>{t={},n={},r=0},s=(a,o)=>(++r>e&&(n=t,t={},r=1),t[a]=o);return i(),{clear:i,has:a=>gt(t,a)||gt(n,a),get:a=>gt(t,a)?t[a]:gt(n,a)?s(a,n[a]):void 0,set:(a,o)=>gt(t,a)?t[a]=o:s(a,o)}}function uke(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const a=r||new t.constructor(i+s);let o=0,l=0,u=0;for(;o<i&&l<s;++u)a[u]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<i;++o,++u)a[u]=t[o];for(;l<s;++l,++u)a[u]=n[l];return a}function Q3(e,t){let n="";for(;--t>=0;)n+=e;return n}function jZ(e,t,n,r){const i=n||" ",s=e+"",a=t-s.length;return a<=0?s:r==="left"?Q3(i,a)+s:r==="center"?Q3(i,~~(a/2))+s+Q3(i,Math.ceil(a/2)):s+Q3(i,a)}function Qw(e){return e&&en(e)-e[0]||0}function $t(e){return Qe(e)?"["+e.map($t)+"]":Ht(e)||Fn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function k8(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const K$t=e=>Yh(e)||Nh(e)?e:Date.parse(e);function A8(e,t){return t=t||K$t,e==null||e===""?null:t(e)}function _8(e){return e==null||e===""?null:e+""}function cs(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function UZ(e,t,n,r){const i=r??"",s=e+"",a=s.length,o=Math.max(0,t-i.length);return a<=t?s:n==="left"?i+s.slice(a-o):n==="center"?s.slice(0,Math.ceil(o/2))+i+s.slice(a-~~(o/2)):s.slice(0,o)+i}function d0(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}var hhe={},wj={},Sj=34,c3=10,Cj=13;function cke(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Z$t(e,t){var n=cke(e);return function(r,i){return t(n(r),i,e)}}function phe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Po(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Q$t(e){return e<0?"-"+Po(-e,6):e>9999?"+"+Po(e,6):Po(e,4)}function J$t(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Q$t(e.getUTCFullYear())+"-"+Po(e.getUTCMonth()+1,2)+"-"+Po(e.getUTCDate(),2)+(i?"T"+Po(t,2)+":"+Po(n,2)+":"+Po(r,2)+"."+Po(i,3)+"Z":r?"T"+Po(t,2)+":"+Po(n,2)+":"+Po(r,2)+"Z":n||t?"T"+Po(t,2)+":"+Po(n,2)+"Z":"")}function eEt(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,m,g=i(f,function(b,x){if(h)return h(b,x-1);m=b,h=d?Z$t(b,d):cke(b)});return g.columns=m||[],g}function i(f,d){var h=[],m=f.length,g=0,b=0,x,w=m<=0,C=!1;f.charCodeAt(m-1)===c3&&--m,f.charCodeAt(m-1)===Cj&&--m;function S(){if(w)return wj;if(C)return C=!1,hhe;var A,k=g,N;if(f.charCodeAt(k)===Sj){for(;g++<m&&f.charCodeAt(g)!==Sj||f.charCodeAt(++g)===Sj;);return(A=g)>=m?w=!0:(N=f.charCodeAt(g++))===c3?C=!0:N===Cj&&(C=!0,f.charCodeAt(g)===c3&&++g),f.slice(k+1,A-1).replace(/""/g,'"')}for(;g<m;){if((N=f.charCodeAt(A=g++))===c3)C=!0;else if(N===Cj)C=!0,f.charCodeAt(g)===c3&&++g;else if(N!==n)continue;return f.slice(k,A)}return w=!0,f.slice(k,m)}for(;(x=S())!==wj;){for(var E=[];x!==hhe&&x!==wj;)E.push(x),x=S();d&&(E=d(E,b++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(m){return c(h[m])}).join(e)})}function a(f,d){return d==null&&(d=phe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function o(f,d){return d==null&&(d=phe(f)),s(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?J$t(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:o,formatRows:l,formatRow:u,formatValue:c}}function tEt(e){return e}function nEt(e){if(e==null)return tEt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],a=e.translate[1];return function(o,l){l||(t=n=0);var u=2,c=o.length,f=new Array(c);for(f[0]=(t+=o[0])*r+s,f[1]=(n+=o[1])*i+a;u<c;)f[u]=o[u],++u;return f}}function rEt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function iEt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return mhe(e,n)})}:mhe(e,t)}function mhe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=fke(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function fke(e,t){var n=nEt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,m=d.length;h<m;++h)f.push(n(d[h],h));c<0&&rEt(f,m)}function s(c){return n(c)}function a(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function o(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(o)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function sEt(e,t){var n={},r={},i={},s=[],a=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=u,t[c]=d)}),t.forEach(function(u){var c=o(u),f=c[0],d=c[1],h,m;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,m=r[d]){delete r[m.start];var g=m===h?h:h.concat(m);r[g.start=h.start]=i[g.end=m.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,m=i[f]){delete i[m.end];var b=m===h?h:m.concat(h);r[b.start=m.start]=i[b.end=h.end]=b}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function o(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function aEt(e){return fke(e,oEt.apply(this,arguments))}function oEt(e,t,n){var r,i,s;if(arguments.length>1)r=lEt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:sEt(e,r)}}function lEt(e,t,n){var r=[],i=[],s;function a(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function o(f){f.forEach(a)}function l(f){f.forEach(o)}function u(f){f.forEach(l)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":o(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Dh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uEt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jw(e){let t,n,r;e.length!==2?(t=Dh,n=(o,l)=>Dh(e(o),l),r=(o,l)=>e(o)-l):(t=e===Dh||e===uEt?e:cEt,n=e,r=e);function i(o,l,u=0,c=o.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){const f=i(o,l,u,c-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function cEt(){return 0}function dke(e){return e===null?NaN:+e}function*fEt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const hke=Jw(Dh),Gi=hke.right,dEt=hke.left;Jw(dke).center;function hEt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i));else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i))}if(n>1)return s/(n-1)}function pEt(e,t){const n=hEt(e,t);return n&&Math.sqrt(n)}class po{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=t+s,o=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);o&&(n[r++]=o),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}class ghe extends Map{constructor(t,n=gke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(QW(this,t))}has(t){return super.has(QW(this,t))}set(t,n){return super.set(pke(this,t),n)}delete(t){return super.delete(mke(this,t))}}class kR extends Set{constructor(t,n=gke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(QW(this,t))}add(t){return super.add(pke(this,t))}delete(t){return super.delete(mke(this,t))}}function QW({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function pke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function mke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}function gke(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mEt(e,t){return Array.from(t,n=>e[n])}function gEt(e=Dh){if(e===Dh)return yke;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function yke(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const yEt=Math.sqrt(50),bEt=Math.sqrt(10),xEt=Math.sqrt(2);function AR(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=yEt?10:s>=bEt?5:s>=xEt?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=n&&n<2?AR(e,t,n*2):[o,l,u]}function JW(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?AR(t,e,n):AR(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function eH(e,t,n){return t=+t,e=+e,n=+n,AR(e,t,n)[2]}function um(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?eH(t,e,n):eH(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function W1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function tH(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function bke(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?yke:gEt(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),m=Math.min(r,Math.floor(t+(l-u)*f/l+d));bke(e,t,h,m,i)}const s=e[t];let a=n,o=r;for(f3(e,n,t),i(e[r],s)>0&&f3(e,n,r);a<o;){for(f3(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[n],s)===0?f3(e,n,o):(++o,f3(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function f3(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function nH(e,t,n){if(e=Float64Array.from(fEt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return tH(e);if(t>=1)return W1(e);var r,i=(r-1)*t,s=Math.floor(i),a=W1(bke(e,s).subarray(0,s+1)),o=tH(e.subarray(s+1));return a+(o-a)*(i-s)}}function xke(e,t,n=dke){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),o=+n(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function vEt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function vke(e,t){return nH(e,.5,t)}function*wEt(e){for(const t of e)yield*t}function wke(e){return Array.from(wEt(e))}function Ts(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Ske(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function SEt(e,...t){e=new kR(e),t=t.map(CEt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function CEt(e){return e instanceof kR?e:new kR(e)}function $Et(...e){const t=new kR;for(const n of e)for(const r of n)t.add(r);return t}function EEt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _R(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Vx(e){return e=_R(Math.abs(e)),e?e[1]:NaN}function kEt(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function AEt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _Et=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function RE(e){if(!(t=_Et.exec(e)))throw new Error("invalid format: "+e);var t;return new VZ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}RE.prototype=VZ.prototype;function VZ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}VZ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TEt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Cke;function NEt(e,t){var n=_R(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Cke=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+_R(e,Math.max(0,t+s-1))[0]}function yhe(e,t){var n=_R(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const bhe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:EEt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yhe(e*100,t),r:yhe,s:NEt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xhe(e){return e}var vhe=Array.prototype.map,whe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $ke(e){var t=e.grouping===void 0||e.thousands===void 0?xhe:kEt(vhe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?xhe:AEt(vhe.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=RE(f);var d=f.fill,h=f.align,m=f.sign,g=f.symbol,b=f.zero,x=f.width,w=f.comma,C=f.precision,S=f.trim,E=f.type;E==="n"?(w=!0,E="g"):bhe[E]||(C===void 0&&(C=12),S=!0,E="g"),(b||d==="0"&&h==="=")&&(b=!0,d="0",h="=");var A=g==="$"?n:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",k=g==="$"?r:/[%p]/.test(E)?a:"",N=bhe[E],I=/[defgprs%]/.test(E);C=C===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function T(D){var L=A,P=k,M,F,R;if(E==="c")P=N(D)+P,D="";else{D=+D;var j=D<0||1/D<0;if(D=isNaN(D)?l:N(Math.abs(D),C),S&&(D=TEt(D)),j&&+D==0&&m!=="+"&&(j=!1),L=(j?m==="("?m:o:m==="-"||m==="("?"":m)+L,P=(E==="s"?whe[8+Cke/3]:"")+P+(j&&m==="("?")":""),I){for(M=-1,F=D.length;++M<F;)if(R=D.charCodeAt(M),48>R||R>57){P=(R===46?i+D.slice(M+1):D.slice(M))+P,D=D.slice(0,M);break}}}w&&!b&&(D=t(D,1/0));var H=L.length+D.length+P.length,G=H<x?new Array(x-H+1).join(d):"";switch(w&&b&&(D=t(G+D,G.length?x-P.length:1/0),G=""),h){case"<":D=L+D+P+G;break;case"=":D=L+G+D+P;break;case"^":D=G.slice(0,H=G.length>>1)+L+D+P+G.slice(H);break;default:D=G+L+D+P;break}return s(D)}return T.toString=function(){return f+""},T}function c(f,d){var h=u((f=RE(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Vx(d)/3)))*3,g=Math.pow(10,-m),b=whe[8+m/3];return function(x){return h(g*x)+b}}return{format:u,formatPrefix:c}}var rD,Eke,kke;DEt({thousands:",",grouping:[3],currency:["$",""]});function DEt(e){return rD=$ke(e),Eke=rD.format,kke=rD.formatPrefix,rD}function IEt(e){return Math.max(0,-Vx(Math.abs(e)))}function OEt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vx(t)/3)))*3-Vx(Math.abs(e)))}function REt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vx(t)-Vx(e))+1}const $j=new Date,Ej=new Date;function hs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let u;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<a);return l},i.filter=s=>hs(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>($j.setTime(+s),Ej.setTime(+a),e($j),e(Ej),Math.floor(n($j,Ej))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Wx=hs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?hs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wx);Wx.range;const Sh=1e3,vu=Sh*60,Ch=vu*60,Kh=Ch*24,WZ=Kh*7,She=Kh*30,kj=Kh*365,$h=hs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Sh)},(e,t)=>(t-e)/Sh,e=>e.getUTCSeconds());$h.range;const T8=hs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sh)},(e,t)=>{e.setTime(+e+t*vu)},(e,t)=>(t-e)/vu,e=>e.getMinutes());T8.range;const N8=hs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vu)},(e,t)=>(t-e)/vu,e=>e.getUTCMinutes());N8.range;const D8=hs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sh-e.getMinutes()*vu)},(e,t)=>{e.setTime(+e+t*Ch)},(e,t)=>(t-e)/Ch,e=>e.getHours());D8.range;const I8=hs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ch)},(e,t)=>(t-e)/Ch,e=>e.getUTCHours());I8.range;const Ih=hs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vu)/Kh,e=>e.getDate()-1);Ih.range;const j0=hs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kh,e=>e.getUTCDate()-1);j0.range;const Ake=hs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kh,e=>Math.floor(e/Kh));Ake.range;function ab(e){return hs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*vu)/WZ)}const eS=ab(0),TR=ab(1),FEt=ab(2),MEt=ab(3),Hx=ab(4),LEt=ab(5),PEt=ab(6);eS.range;TR.range;FEt.range;MEt.range;Hx.range;LEt.range;PEt.range;function ob(e){return hs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/WZ)}const tS=ob(0),NR=ob(1),BEt=ob(2),zEt=ob(3),Gx=ob(4),jEt=ob(5),UEt=ob(6);tS.range;NR.range;BEt.range;zEt.range;Gx.range;jEt.range;UEt.range;const FE=hs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());FE.range;const ME=hs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ME.range;const Zf=hs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Zf.range;const Qf=hs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Qf.range;function _ke(e,t,n,r,i,s){const a=[[$h,1,Sh],[$h,5,5*Sh],[$h,15,15*Sh],[$h,30,30*Sh],[s,1,vu],[s,5,5*vu],[s,15,15*vu],[s,30,30*vu],[i,1,Ch],[i,3,3*Ch],[i,6,6*Ch],[i,12,12*Ch],[r,1,Kh],[r,2,2*Kh],[n,1,WZ],[t,1,She],[t,3,3*She],[e,1,kj]];function o(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),m=h?h.range(u,+c+1):[];return d?m.reverse():m}function l(u,c,f){const d=Math.abs(c-u)/f,h=Jw(([,,b])=>b).right(a,d);if(h===a.length)return e.every(um(u/kj,c/kj,f));if(h===0)return Wx.every(Math.max(um(u,c,f),1));const[m,g]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return m.every(g)}return[o,l]}const[VEt,WEt]=_ke(Qf,ME,tS,Ake,I8,N8),[HEt,GEt]=_ke(Zf,FE,eS,Ih,D8,T8),aa="year",sl="quarter",Ma="month",is="week",al="date",Ta="day",Jf="dayofyear",Bl="hours",zl="minutes",Du="seconds",Ac="milliseconds",HZ=[aa,sl,Ma,is,al,Ta,Jf,Bl,zl,Du,Ac],Aj=HZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function GZ(e){const t=vt(e).slice(),n={};return t.length||Ce("Missing time unit."),t.forEach(i=>{gt(Aj,i)?n[i]=1:Ce(`Invalid time unit: ${i}.`)}),(n[is]||n[Ta]?1:0)+(n[sl]||n[Ma]||n[al]?1:0)+(n[Jf]?1:0)>1&&Ce(`Incompatible time units: ${e}`),t.sort((i,s)=>Aj[i]-Aj[s]),t}const qEt={[aa]:"%Y ",[sl]:"Q%q ",[Ma]:"%b ",[al]:"%d ",[is]:"W%U ",[Ta]:"%a ",[Jf]:"%j ",[Bl]:"%H:00",[zl]:"00:%M",[Du]:":%S",[Ac]:".%L",[`${aa}-${Ma}`]:"%Y-%m ",[`${aa}-${Ma}-${al}`]:"%Y-%m-%d ",[`${Bl}-${zl}`]:"%H:%M"};function qZ(e,t){const n=Kt({},qEt,t),r=GZ(e),i=r.length;let s="",a=0,o,l;for(a=0;a<i;)for(o=r.length;o>a;--o)if(l=r.slice(a,o).join("-"),n[l]!=null){s+=n[l],a=o;break}return s.trim()}const c1=new Date;function XZ(e){return c1.setFullYear(e),c1.setMonth(0),c1.setDate(1),c1.setHours(0,0,0,0),c1}function YZ(e){return Tke(new Date(e))}function KZ(e){return rH(new Date(e))}function Tke(e){return Ih.count(XZ(e.getFullYear())-1,e)}function rH(e){return eS.count(XZ(e.getFullYear())-1,e)}function iH(e){return XZ(e).getDay()}function XEt(e,t,n,r,i,s,a){if(0<=e&&e<100){const o=new Date(-1,t,n,r,i,s,a);return o.setFullYear(e),o}return new Date(e,t,n,r,i,s,a)}function ZZ(e){return Nke(new Date(e))}function QZ(e){return sH(new Date(e))}function Nke(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return j0.count(t-1,e)}function sH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return tS.count(t-1,e)}function aH(e){return c1.setTime(Date.UTC(e,0,1)),c1.getUTCDay()}function YEt(e,t,n,r,i,s,a){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,r,i,s,a));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,r,i,s,a))}function Dke(e,t,n,r,i){const s=t||1,a=en(e),o=(x,w,C)=>(C=C||x,KEt(n[C],r[C],x===a&&s,w)),l=new Date,u=cs(e),c=u[aa]?o(aa):oa(2012),f=u[Ma]?o(Ma):u[sl]?o(sl):b0,d=u[is]&&u[Ta]?o(Ta,1,is+Ta):u[is]?o(is,1):u[Ta]?o(Ta,1):u[al]?o(al,1):u[Jf]?o(Jf,1):Kw,h=u[Bl]?o(Bl):b0,m=u[zl]?o(zl):b0,g=u[Du]?o(Du):b0,b=u[Ac]?o(Ac):b0;return function(x){l.setTime(+x);const w=c(l);return i(w,f(l),d(l,w),h(l),m(l),g(l),b(l))}}function KEt(e,t,n,r){const i=n<=1?e:r?(s,a)=>r+n*Math.floor((e(s,a)-r)/n):(s,a)=>n*Math.floor(e(s,a)/n);return t?(s,a)=>t(i(s,a),a):i}function qx(e,t,n){return t+e*7-(n+6)%7}const ZEt={[aa]:e=>e.getFullYear(),[sl]:e=>Math.floor(e.getMonth()/3),[Ma]:e=>e.getMonth(),[al]:e=>e.getDate(),[Bl]:e=>e.getHours(),[zl]:e=>e.getMinutes(),[Du]:e=>e.getSeconds(),[Ac]:e=>e.getMilliseconds(),[Jf]:e=>Tke(e),[is]:e=>rH(e),[is+Ta]:(e,t)=>qx(rH(e),e.getDay(),iH(t)),[Ta]:(e,t)=>qx(1,e.getDay(),iH(t))},QEt={[sl]:e=>3*e,[is]:(e,t)=>qx(e,0,iH(t))};function Ike(e,t){return Dke(e,t||1,ZEt,QEt,XEt)}const JEt={[aa]:e=>e.getUTCFullYear(),[sl]:e=>Math.floor(e.getUTCMonth()/3),[Ma]:e=>e.getUTCMonth(),[al]:e=>e.getUTCDate(),[Bl]:e=>e.getUTCHours(),[zl]:e=>e.getUTCMinutes(),[Du]:e=>e.getUTCSeconds(),[Ac]:e=>e.getUTCMilliseconds(),[Jf]:e=>Nke(e),[is]:e=>sH(e),[Ta]:(e,t)=>qx(1,e.getUTCDay(),aH(t)),[is+Ta]:(e,t)=>qx(sH(e),e.getUTCDay(),aH(t))},ekt={[sl]:e=>3*e,[is]:(e,t)=>qx(e,0,aH(t))};function Oke(e,t){return Dke(e,t||1,JEt,ekt,YEt)}const tkt={[aa]:Zf,[sl]:FE.every(3),[Ma]:FE,[is]:eS,[al]:Ih,[Ta]:Ih,[Jf]:Ih,[Bl]:D8,[zl]:T8,[Du]:$h,[Ac]:Wx},nkt={[aa]:Qf,[sl]:ME.every(3),[Ma]:ME,[is]:tS,[al]:j0,[Ta]:j0,[Jf]:j0,[Bl]:I8,[zl]:N8,[Du]:$h,[Ac]:Wx};function nS(e){return tkt[e]}function rS(e){return nkt[e]}function Rke(e,t,n){return e?e.offset(t,n):void 0}function JZ(e,t,n){return Rke(nS(e),t,n)}function eQ(e,t,n){return Rke(rS(e),t,n)}function Fke(e,t,n,r){return e?e.range(t,n,r):void 0}function tQ(e,t,n,r){return Fke(nS(e),t,n,r)}function nQ(e,t,n,r){return Fke(rS(e),t,n,r)}const J3=1e3,e$=J3*60,t$=e$*60,O8=t$*24,rkt=O8*7,Che=O8*30,oH=O8*365,Mke=[aa,Ma,al,Bl,zl,Du,Ac],n$=Mke.slice(0,-1),r$=n$.slice(0,-1),i$=r$.slice(0,-1),ikt=i$.slice(0,-1),skt=[aa,is],$he=[aa,Ma],Lke=[aa],d3=[[n$,1,J3],[n$,5,5*J3],[n$,15,15*J3],[n$,30,30*J3],[r$,1,e$],[r$,5,5*e$],[r$,15,15*e$],[r$,30,30*e$],[i$,1,t$],[i$,3,3*t$],[i$,6,6*t$],[i$,12,12*t$],[ikt,1,O8],[skt,1,rkt],[$he,1,Che],[$he,3,3*Che],[Lke,1,oH]];function Pke(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Qw(t))/n;let i=Jw(o=>o[2]).right(d3,r),s,a;return i===d3.length?(s=Lke,a=um(t[0]/oH,t[1]/oH,n)):i?(i=d3[r/d3[i-1][2]<d3[i][2]/r?i-1:i],s=i[0],a=i[1]):(s=Mke,a=Math.max(um(t[0],t[1],n),1)),{units:s,step:a}}function _j(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function h3(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Bke(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,u=p3(i),c=m3(i),f=p3(s),d=m3(s),h=p3(a),m=m3(a),g=p3(o),b=m3(o),x=p3(l),w=m3(l),C={a:j,A:H,b:G,B:z,c:null,d:Nhe,e:Nhe,f:_kt,g:Pkt,G:zkt,H:Ekt,I:kkt,j:Akt,L:zke,m:Tkt,M:Nkt,p:Y,q:Z,Q:Ohe,s:Rhe,S:Dkt,u:Ikt,U:Okt,V:Rkt,w:Fkt,W:Mkt,x:null,X:null,y:Lkt,Y:Bkt,Z:jkt,"%":Ihe},S={a:Q,A:se,b:re,B:de,c:null,d:Dhe,e:Dhe,f:Hkt,g:tAt,G:rAt,H:Ukt,I:Vkt,j:Wkt,L:Uke,m:Gkt,M:qkt,p:Oe,q:Le,Q:Ohe,s:Rhe,S:Xkt,u:Ykt,U:Kkt,V:Zkt,w:Qkt,W:Jkt,x:null,X:null,y:eAt,Y:nAt,Z:iAt,"%":Ihe},E={a:T,A:D,b:L,B:P,c:M,d:_he,e:_he,f:wkt,g:Ahe,G:khe,H:The,I:The,j:ykt,L:vkt,m:gkt,M:bkt,p:I,q:mkt,Q:Ckt,s:$kt,S:xkt,u:ckt,U:fkt,V:dkt,w:ukt,W:hkt,x:F,X:R,y:Ahe,Y:khe,Z:pkt,"%":Skt};C.x=A(n,C),C.X=A(r,C),C.c=A(t,C),S.x=A(n,S),S.X=A(r,S),S.c=A(t,S);function A(me,xe){return function(Ee){var ce=[],Xe=-1,ze=0,Je=me.length,at,et,nt;for(Ee instanceof Date||(Ee=new Date(+Ee));++Xe<Je;)me.charCodeAt(Xe)===37&&(ce.push(me.slice(ze,Xe)),(et=Ehe[at=me.charAt(++Xe)])!=null?at=me.charAt(++Xe):et=at==="e"?" ":"0",(nt=xe[at])&&(at=nt(Ee,et)),ce.push(at),ze=Xe+1);return ce.push(me.slice(ze,Xe)),ce.join("")}}function k(me,xe){return function(Ee){var ce=h3(1900,void 0,1),Xe=N(ce,me,Ee+="",0),ze,Je;if(Xe!=Ee.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(xe&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(ze=Tj(h3(ce.y,0,1)),Je=ze.getUTCDay(),ze=Je>4||Je===0?NR.ceil(ze):NR(ze),ze=j0.offset(ze,(ce.V-1)*7),ce.y=ze.getUTCFullYear(),ce.m=ze.getUTCMonth(),ce.d=ze.getUTCDate()+(ce.w+6)%7):(ze=_j(h3(ce.y,0,1)),Je=ze.getDay(),ze=Je>4||Je===0?TR.ceil(ze):TR(ze),ze=Ih.offset(ze,(ce.V-1)*7),ce.y=ze.getFullYear(),ce.m=ze.getMonth(),ce.d=ze.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Je="Z"in ce?Tj(h3(ce.y,0,1)).getUTCDay():_j(h3(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Je+5)%7:ce.w+ce.U*7-(Je+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,Tj(ce)):_j(ce)}}function N(me,xe,Ee,ce){for(var Xe=0,ze=xe.length,Je=Ee.length,at,et;Xe<ze;){if(ce>=Je)return-1;if(at=xe.charCodeAt(Xe++),at===37){if(at=xe.charAt(Xe++),et=E[at in Ehe?xe.charAt(Xe++):at],!et||(ce=et(me,Ee,ce))<0)return-1}else if(at!=Ee.charCodeAt(ce++))return-1}return ce}function I(me,xe,Ee){var ce=u.exec(xe.slice(Ee));return ce?(me.p=c.get(ce[0].toLowerCase()),Ee+ce[0].length):-1}function T(me,xe,Ee){var ce=h.exec(xe.slice(Ee));return ce?(me.w=m.get(ce[0].toLowerCase()),Ee+ce[0].length):-1}function D(me,xe,Ee){var ce=f.exec(xe.slice(Ee));return ce?(me.w=d.get(ce[0].toLowerCase()),Ee+ce[0].length):-1}function L(me,xe,Ee){var ce=x.exec(xe.slice(Ee));return ce?(me.m=w.get(ce[0].toLowerCase()),Ee+ce[0].length):-1}function P(me,xe,Ee){var ce=g.exec(xe.slice(Ee));return ce?(me.m=b.get(ce[0].toLowerCase()),Ee+ce[0].length):-1}function M(me,xe,Ee){return N(me,t,xe,Ee)}function F(me,xe,Ee){return N(me,n,xe,Ee)}function R(me,xe,Ee){return N(me,r,xe,Ee)}function j(me){return a[me.getDay()]}function H(me){return s[me.getDay()]}function G(me){return l[me.getMonth()]}function z(me){return o[me.getMonth()]}function Y(me){return i[+(me.getHours()>=12)]}function Z(me){return 1+~~(me.getMonth()/3)}function Q(me){return a[me.getUTCDay()]}function se(me){return s[me.getUTCDay()]}function re(me){return l[me.getUTCMonth()]}function de(me){return o[me.getUTCMonth()]}function Oe(me){return i[+(me.getUTCHours()>=12)]}function Le(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var xe=A(me+="",C);return xe.toString=function(){return me},xe},parse:function(me){var xe=k(me+="",!1);return xe.toString=function(){return me},xe},utcFormat:function(me){var xe=A(me+="",S);return xe.toString=function(){return me},xe},utcParse:function(me){var xe=k(me+="",!0);return xe.toString=function(){return me},xe}}}var Ehe={"-":"",_:" ",0:"0"},qs=/^\s*\d+/,akt=/^%/,okt=/[\\^$*+?|[\]().{}]/g;function zn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function lkt(e){return e.replace(okt,"\\$&")}function p3(e){return new RegExp("^(?:"+e.map(lkt).join("|")+")","i")}function m3(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ukt(e,t,n){var r=qs.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ckt(e,t,n){var r=qs.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function fkt(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function dkt(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function hkt(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function khe(e,t,n){var r=qs.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ahe(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function pkt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mkt(e,t,n){var r=qs.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function gkt(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _he(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ykt(e,t,n){var r=qs.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function The(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function bkt(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function xkt(e,t,n){var r=qs.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function vkt(e,t,n){var r=qs.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wkt(e,t,n){var r=qs.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Skt(e,t,n){var r=akt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ckt(e,t,n){var r=qs.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function $kt(e,t,n){var r=qs.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Nhe(e,t){return zn(e.getDate(),t,2)}function Ekt(e,t){return zn(e.getHours(),t,2)}function kkt(e,t){return zn(e.getHours()%12||12,t,2)}function Akt(e,t){return zn(1+Ih.count(Zf(e),e),t,3)}function zke(e,t){return zn(e.getMilliseconds(),t,3)}function _kt(e,t){return zke(e,t)+"000"}function Tkt(e,t){return zn(e.getMonth()+1,t,2)}function Nkt(e,t){return zn(e.getMinutes(),t,2)}function Dkt(e,t){return zn(e.getSeconds(),t,2)}function Ikt(e){var t=e.getDay();return t===0?7:t}function Okt(e,t){return zn(eS.count(Zf(e)-1,e),t,2)}function jke(e){var t=e.getDay();return t>=4||t===0?Hx(e):Hx.ceil(e)}function Rkt(e,t){return e=jke(e),zn(Hx.count(Zf(e),e)+(Zf(e).getDay()===4),t,2)}function Fkt(e){return e.getDay()}function Mkt(e,t){return zn(TR.count(Zf(e)-1,e),t,2)}function Lkt(e,t){return zn(e.getFullYear()%100,t,2)}function Pkt(e,t){return e=jke(e),zn(e.getFullYear()%100,t,2)}function Bkt(e,t){return zn(e.getFullYear()%1e4,t,4)}function zkt(e,t){var n=e.getDay();return e=n>=4||n===0?Hx(e):Hx.ceil(e),zn(e.getFullYear()%1e4,t,4)}function jkt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zn(t/60|0,"0",2)+zn(t%60,"0",2)}function Dhe(e,t){return zn(e.getUTCDate(),t,2)}function Ukt(e,t){return zn(e.getUTCHours(),t,2)}function Vkt(e,t){return zn(e.getUTCHours()%12||12,t,2)}function Wkt(e,t){return zn(1+j0.count(Qf(e),e),t,3)}function Uke(e,t){return zn(e.getUTCMilliseconds(),t,3)}function Hkt(e,t){return Uke(e,t)+"000"}function Gkt(e,t){return zn(e.getUTCMonth()+1,t,2)}function qkt(e,t){return zn(e.getUTCMinutes(),t,2)}function Xkt(e,t){return zn(e.getUTCSeconds(),t,2)}function Ykt(e){var t=e.getUTCDay();return t===0?7:t}function Kkt(e,t){return zn(tS.count(Qf(e)-1,e),t,2)}function Vke(e){var t=e.getUTCDay();return t>=4||t===0?Gx(e):Gx.ceil(e)}function Zkt(e,t){return e=Vke(e),zn(Gx.count(Qf(e),e)+(Qf(e).getUTCDay()===4),t,2)}function Qkt(e){return e.getUTCDay()}function Jkt(e,t){return zn(NR.count(Qf(e)-1,e),t,2)}function eAt(e,t){return zn(e.getUTCFullYear()%100,t,2)}function tAt(e,t){return e=Vke(e),zn(e.getUTCFullYear()%100,t,2)}function nAt(e,t){return zn(e.getUTCFullYear()%1e4,t,4)}function rAt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Gx(e):Gx.ceil(e),zn(e.getUTCFullYear()%1e4,t,4)}function iAt(){return"+0000"}function Ihe(){return"%"}function Ohe(e){return+e}function Rhe(e){return Math.floor(+e/1e3)}var S2,rQ,Wke,iQ,Hke;sAt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sAt(e){return S2=Bke(e),rQ=S2.format,Wke=S2.parse,iQ=S2.utcFormat,Hke=S2.utcParse,S2}function s$(e){const t={};return n=>t[n]||(t[n]=e(n))}function aAt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=oAt(r,i);const a=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+a}}function oAt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Gke(e){const t=s$(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=RE(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return aAt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,a){a=RE(a??",f");const o=um(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=OEt(o,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=REt(o,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=IEt(o))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let lH;qke();function qke(){return lH=Gke({format:Eke,formatPrefix:kke})}function Xke(e){return Gke($ke(e))}function DR(e){return arguments.length?lH=Xke(e):lH}function Fhe(e,t,n){n=n||{},Ht(n)||Ce(`Invalid time multi-format specifier: ${n}`);const r=t(Du),i=t(zl),s=t(Bl),a=t(al),o=t(is),l=t(Ma),u=t(sl),c=t(aa),f=e(n[Ac]||".%L"),d=e(n[Du]||":%S"),h=e(n[zl]||"%I:%M"),m=e(n[Bl]||"%I %p"),g=e(n[al]||n[Ta]||"%a %d"),b=e(n[is]||"%b %d"),x=e(n[Ma]||"%B"),w=e(n[sl]||"%B"),C=e(n[aa]||"%Y");return S=>(r(S)<S?f:i(S)<S?d:s(S)<S?h:a(S)<S?m:l(S)<S?o(S)<S?g:b:c(S)<S?u(S)<S?x:w:C)(S)}function Yke(e){const t=s$(e.format),n=s$(e.utcFormat);return{timeFormat:r=>Fn(r)?t(r):Fhe(t,nS,r),utcFormat:r=>Fn(r)?n(r):Fhe(n,rS,r),timeParse:s$(e.parse),utcParse:s$(e.utcParse)}}let uH;Kke();function Kke(){return uH=Yke({format:rQ,parse:Wke,utcFormat:iQ,utcParse:Hke})}function Zke(e){return Yke(Bke(e))}function LE(e){return arguments.length?uH=Zke(e):uH}const cH=(e,t)=>Kt({},e,t);function Qke(e,t){const n=e?Xke(e):DR(),r=t?Zke(t):LE();return cH(n,r)}function sQ(e,t){const n=arguments.length;return n&&n!==2&&Ce("defaultLocale expects either zero or two arguments."),n?cH(DR(e),LE(t)):cH(DR(),LE())}function lAt(){return qke(),Kke(),sQ()}const uAt=/^(data:|([A-Za-z]+:)?\/\/)/,cAt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,fAt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Mhe="file://";function dAt(e,t){return n=>({options:n||{},sanitize:pAt,load:hAt,fileAccess:!1,file:mAt(t),http:yAt(e)})}async function hAt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function pAt(e,t){t=Kt({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,a;const o=cAt.test(e.replace(fAt,""));(e==null||typeof e!="string"||!o)&&Ce("Sanitize failure, invalid URI: "+$t(e));const l=uAt.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),s=(i=e.startsWith(Mhe))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(Mhe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function mAt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):gAt}async function gAt(){Ce("No file system access.")}function yAt(e){return e?async function(t,n){const r=Kt({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Wt(s[i])?s[i]():s.text():Ce(s.status+""+s.statusText)}:bAt}async function bAt(){Ce("No HTTP fetch method available.")}const xAt=e=>e!=null&&e===e,vAt=e=>e==="true"||e==="false"||e===!0||e===!1,wAt=e=>!Number.isNaN(Date.parse(e)),Jke=e=>!Number.isNaN(+e)&&!(e instanceof Date),SAt=e=>Jke(e)&&Number.isInteger(+e),fH={boolean:k8,integer:Ti,number:Ti,date:A8,string:_8,unknown:Ha},iD=[vAt,SAt,Jke,wAt],CAt=["boolean","integer","number","date"];function eAe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=iD.length,i=iD.map((s,a)=>a+1);for(let s=0,a=0,o,l;s<n;++s)for(l=t?e[s][t]:e[s],o=0;o<r;++o)if(i[o]&&xAt(l)&&!iD[o](l)&&(i[o]=0,++a,a===iD.length))return"string";return CAt[i.reduce((s,a)=>s===0?a:s,0)-1]}function tAe(e,t){return t.reduce((n,r)=>(n[r]=eAe(e,r),n),{})}function Lhe(e){const t=function(n,r){const i={delimiter:e};return aQ(n,r?Kt(r,i):i)};return t.responseType="text",t}function aQ(e,t){return t.header&&(e=t.header.map($t).join(t.delimiter)+`
`+e),eEt(t.delimiter).parse(e+"")}aQ.responseType="text";function $At(e){return typeof Buffer=="function"&&Wt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function oQ(e,t){const n=t&&t.property?Pl(t.property):Ha;return Ht(e)&&!$At(e)?EAt(n(e),t):n(JSON.parse(e))}oQ.responseType="json";function EAt(e,t){return!Qe(e)&&lke(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const kAt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function nAe(e,t){let n,r,i,s;return e=oQ(e,t),t&&t.feature?(n=iEt,i=t.feature):t&&t.mesh?(n=aEt,i=t.mesh,s=kAt[t.filter]):Ce("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ce("Invalid TopoJSON object: "+i),r&&r.features||[r]}nAe.responseType="json";const jI={dsv:aQ,csv:Lhe(","),tsv:Lhe("	"),json:oQ,topojson:nAe};function lQ(e,t){return arguments.length>1?(jI[e]=t,this):gt(jI,e)?jI[e]:null}function rAe(e){const t=lQ(e);return t&&t.responseType||"text"}function iAe(e,t,n,r){t=t||{};const i=lQ(t.type||"json");return i||Ce("Unknown data format type: "+t.type),e=i(e,t),t.parse&&AAt(e,t.parse,n,r),gt(e,"columns")&&delete e.columns,e}function AAt(e,t,n,r){if(!e.length)return;const i=LE();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),a,o,l,u,c,f;t==="auto"&&(t=tAe(e,s)),s=Object.keys(t);const d=s.map(h=>{const m=t[h];let g,b;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),b=g[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(g[0]==="utc"?r:n)(b);if(!fH[m])throw Error("Illegal format pattern: "+h+":"+m);return fH[m]});for(l=0,c=e.length,f=s.length;l<c;++l)for(a=e[l],u=0;u<f;++u)o=s[u],a[o]=d[u](a[o])}const R8=dAt(typeof fetch<"u"&&fetch,null);function F8(e){const t=e||Ha,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function UI(e,t){try{await t(e)}catch(n){e.error(n)}}const sAe=Symbol("vega_id");let _At=1;function iS(e){return!!(e&&Tt(e))}function Tt(e){return e[sAe]}function aAe(e,t){return e[sAe]=t,e}function qn(e){const t=e===Object(e)?e:{data:e};return Tt(t)?t:aAe(t,_At++)}function uQ(e){return M8(e,qn({}))}function M8(e,t){for(const n in e)t[n]=e[n];return t}function oAe(e,t){return aAe(t,Tt(e))}function lb(e,t){return e?t?(n,r)=>e(n,r)||Tt(t(n))-Tt(t(r)):(n,r)=>e(n,r)||Tt(n)-Tt(r):null}function lAe(e){return e&&e.constructor===ub}function ub(){const e=[],t=[],n=[],r=[],i=[];let s=null,a=!1;return{constructor:ub,insert(o){const l=vt(o),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(o){const l=Wt(o)?r:t,u=vt(o),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(o,l,u){const c={field:l,value:oa(u)};return Wt(o)?(c.filter=o,i.push(c)):(c.tuple=o,n.push(c)),this},encode(o,l){return Wt(o)?i.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return s=o,this},reflow(){return a=!0,this},pulse(o,l){const u={},c={};let f,d,h,m,g,b;for(f=0,d=l.length;f<d;++f)u[Tt(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[Tt(g)]=-1;for(f=0,d=r.length;f<d;++f)m=r[f],l.forEach(w=>{m(w)&&(u[Tt(w)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],b=Tt(g),u[b]?u[b]=1:o.add.push(qn(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[Tt(g)]<0&&o.rem.push(g);function x(w,C,S){S?w[C]=S(w):o.encode=C,a||(c[Tt(w)]=w)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,m=h.field,b=u[Tt(g)],b>0&&(x(g,m,h.value),o.modifies(m));for(f=0,d=i.length;f<d;++f)h=i[f],m=h.filter,l.forEach(w=>{m(w)&&u[Tt(w)]>0&&x(w,h.field,h.value)}),o.modifies(h.field);if(a)o.mod=t.length||r.length?l.filter(w=>u[Tt(w)]>0):l.slice();else for(b in c)o.mod.push(c[b]);return(s||s==null&&(t.length||r.length))&&o.clean(!0),o}}}const VI="_:mod:_";function L8(){Object.defineProperty(this,VI,{writable:!0,value:{}})}L8.prototype={set(e,t,n,r){const i=this,s=i[e],a=i[VI];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,a[t+":"+e]=-1,a[e]=-1):(s!==n||r)&&(i[e]=n,a[e]=Qe(n)?1+n.length:-1),i},modified(e,t){const n=this[VI];if(arguments.length){if(Qe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[VI]={},this}};let TAt=0;const NAt="pulse",DAt=new L8,IAt=1,OAt=2;function Ar(e,t,n,r){this.id=++TAt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Phe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ar.prototype={targets(){return this._targets||(this._targets=F8(D_))},set(e){return this.value!==e?(this.value=e,1):0},skip:Phe(IAt),modified:Phe(OAt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new L8,i=this._argops=this._argops||[],s=[];let a,o,l,u;const c=(f,d,h)=>{h instanceof Ar?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(a in e)if(o=e[a],a===NAt)vt(o).forEach(f=>{f instanceof Ar?f!==this&&(f.targets().add(this),s.push(f)):Ce("Pulse parameters must be operator instances.")}),this.source=o;else if(Qe(o))for(r.set(a,-1,Array(l=o.length)),u=0;u<l;++u)c(a,u,o[u]);else c(a,-1,o);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||DAt,n=this._argops;let r,i,s,a;if(n){const o=n.length;for(i=0;i<o;++i)r=n[i],s=r.op,a=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,a);if(n.initonly){for(i=0;i<o;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function RAt(e,t,n,r){let i=1,s;return e instanceof Ar?s=e:e&&e.prototype instanceof Ar?s=new e:Wt(e)?s=new Ar(null,e):(i=0,s=new Ar(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function FAt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let MAt=0;function P8(e,t,n){this.id=++MAt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function u0(e,t,n){return new P8(e,t,n)}P8.prototype={_filter:zs,_apply:Ha,targets(){return this._targets||(this._targets=F8(D_))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=u0(e);return this.targets().add(t),t},apply(e){const t=u0(null,e);return this.targets().add(t),t},merge(){const e=u0();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=u0();return this.targets().add(u0(null,null,LZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(u0(null,null,()=>n=!0)),t.targets().add(u0(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=zs,this._targets=null}};function LAt(e,t,n,r){const i=this,s=u0(n,r),a=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=vt(e);const l=o.length;for(let u=0;u<l;++u)o[u].addEventListener(t,a);return s}function PAt(e,t){const n=this.locale();return iAe(e,t,n.timeParse,n.utcParse)}function BAt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function zAt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:rAe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function jAt(e,t,n){const r=this,i=r._pending||UAt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(zs).insert(s.data||[])),i.done(),s}function UAt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const VAt={skip:!0};function WAt(e,t,n,r,i){return(e instanceof Ar?GAt:HAt)(this,e,t,n,r,i),this}function HAt(e,t,n,r,i,s){const a=Kt({},s,VAt);let o,l;Wt(n)||(n=oa(n)),r===void 0?o=u=>e.touch(n(u)):Wt(r)?(l=new Ar(null,r,i,!1),o=u=>{l.evaluate(u);const c=n(u),f=l.value;lAe(f)?e.pulse(c,f,s):e.update(c,f,a)}):o=u=>e.update(n(u),r,a),t.apply(o)}function GAt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const a=s||{},o=new Ar(null,qAt(n,r),i,!1);o.modified(a.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function qAt(e,t){return t=Wt(t)?t:oa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function XAt(e){e.rank=++this._rank}function YAt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ce("Cycle detected in dataflow graph.")}const IR={},hf=1,h0=2,sh=4,KAt=hf|h0,Bhe=hf|sh,C2=hf|h0|sh,zhe=8,g3=16,jhe=32,Uhe=64;function U0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Nj(e,t){const n=[];return d0(e,t,r=>n.push(r)),n}function Vhe(e,t){const n={};return e.visit(t,r=>{n[Tt(r)]=1}),r=>n[Tt(r)]?null:r}function sD(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}U0.prototype={StopPropagation:IR,ADD:hf,REM:h0,MOD:sh,ADD_REM:KAt,ADD_MOD:Bhe,ALL:C2,REFLOW:zhe,SOURCE:g3,NO_SOURCE:jhe,NO_FIELDS:Uhe,fork(e){return new U0(this.dataflow).init(this,e)},clone(){const e=this.fork(C2);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(C2|g3)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new U0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Uhe)&&(n.fields=e.fields),t&hf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&h0?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&sh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&jhe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||C2;return t&hf&&this.add.length||t&h0&&this.rem.length||t&sh&&this.mod.length},reflow(e){if(e)return this.fork(C2).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(sh,Vhe(this,hf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Qe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Qe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&hf&&(n.addF=sD(n.addF,t)),e&h0&&(n.remF=sD(n.remF,t)),e&sh&&(n.modF=sD(n.modF,t)),e&g3&&(n.srcF=sD(n.srcF,t)),n},materialize(e){e=e||C2;const t=this;return e&hf&&t.addF&&(t.add=Nj(t.add,t.addF),t.addF=null),e&h0&&t.remF&&(t.rem=Nj(t.rem,t.remF),t.remF=null),e&sh&&t.modF&&(t.mod=Nj(t.mod,t.modF),t.modF=null),e&g3&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&g3)return d0(n.source,n.srcF,r),n;e&hf&&d0(n.add,n.addF,r),e&h0&&d0(n.rem,n.remF,r),e&sh&&d0(n.mod,n.modF,r);const i=n.source;if(e&zhe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?d0(i,Vhe(n,Bhe),r):d0(i,n.srcF,r))}return n}};function cQ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const o=i.fields||(i.fields={});for(const l in a.fields)o[l]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ve(cQ,U0,{fork(e){const t=new U0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Qe(e)?e.some(r=>n[r]):n[e]:0},filter(){Ce("MultiPulse does not support filtering.")},materialize(){Ce("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function ZAt(e,t,n){const r=this,i=[];if(r._pulse)return uAe(r);if(r._pending&&await r._pending,t&&await UI(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new U0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=F8(D_);let a=0,o,l,u;try{for(;r._heap.size()>0;){if(o=r._heap.pop(),o.rank!==o.qrank){r._enqueue(o,!0);continue}l=o.run(r._getPulse(o,e)),l.then?l=await l:l.async&&(i.push(l.async),l=IR),l!==IR&&o._targets&&o._targets.forEach(c=>r._enqueue(c)),++a}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${a} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await UI(r,c[f].callback)}return n&&await UI(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function QAt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function JAt(e,t,n){return this._pulse?uAe(this):(this.evaluate(e,t,n),this)}function e_t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function uAe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function t_t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function n_t(e,t){const n=e.source,r=this._clock;return n&&Qe(n)?new cQ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||r_t(this._pulse,n&&n.pulse)}function r_t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==IR&&(e.source=t.source),e)}const fQ={skip:!1,force:!1};function i_t(e,t){const n=t||fQ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function s_t(e,t,n){const r=n||fQ;return(e.set(t)||r.force)&&this.touch(e,r),this}function a_t(e,t,n){this.touch(e,n||fQ);const r=new U0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function o_t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),cAe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,l_t(t,0,e)):r=n,r}}}function cAe(e,t,n,r){let i,s;const a=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(a,i)<0){e[n]=i,n=s;continue}break}return e[n]=a}function l_t(e,t,n){const r=t,i=e.length,s=e[t];let a=(t<<1)+1,o;for(;a<i;)o=a+1,o<i&&n(e[a],e[o])>=0&&(a=o),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=s,cAe(e,r,t,n)}function fx(){this.logger(nke()),this.logLevel(_Z),this._clock=0,this._rank=0,this._locale=sQ();try{this._loader=R8()}catch{}this._touched=F8(D_),this._input={},this._pulse=null,this._heap=o_t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function y3(e){return function(){return this._log[e].apply(this,arguments)}}fx.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:y3("error"),warn:y3("warn"),info:y3("info"),debug:y3("debug"),logLevel:y3("level"),cleanThreshold:1e4,add:RAt,connect:FAt,rank:XAt,rerank:YAt,pulse:a_t,touch:i_t,update:s_t,changeset:ub,ingest:BAt,parse:PAt,preload:jAt,request:zAt,events:LAt,on:WAt,evaluate:ZAt,run:JAt,runAsync:QAt,runAfter:e_t,_enqueue:t_t,_getPulse:n_t};function $e(e,t){Ar.call(this,e,null,t)}Ve($e,Ar,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Xx={};function fAe(e){const t=dAe(e);return t&&t.Definition||null}function dAe(e){return e=e&&e.toLowerCase(),gt(Xx,e)?Xx[e]:null}function*hAe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function dQ(e,t,n){const r=Float64Array.from(hAe(e,n));return r.sort(Dh),t.map(i=>xke(r,i))}function hQ(e,t){return dQ(e,[.25,.5,.75],t)}function pQ(e,t){const n=e.length,r=pEt(e,t),i=hQ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function pAe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],a=e.extent[1],o,l,u,c,f,d;const h=e.span||a-s||Math.abs(s)||1;if(e.step)o=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);o=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,o=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/o)>t;)o*=n;for(f=0,d=i.length;f<d;++f)c=o/i[f],c>=u&&h/c<=t&&(o=c)}c=Math.log(o);const m=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-m-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/o+g)*o,s=s<c?c-o:c,a=Math.ceil(a/o)*o),{start:s,stop:a===s?s+o:a,step:o}}var jl=Math.random;function u_t(e){jl=e}function mAe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(hAe(e,r)),s=i.length,a=t;let o,l,u,c;for(u=0,c=Array(a);u<a;++u){for(o=0,l=0;l<s;++l)o+=i[~~(jl()*s)];c[u]=o/s}return c.sort(Dh),[nH(c,n/2),nH(c,1-n/2)]}function gAe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let a=0,o=1,l=r(e[0]),u=l,c=l+t,f;for(;o<i;++o){if(f=r(e[o]),f>=c){for(u=(l+u)/2;a<o;++a)s[a]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;a<o;++a)s[a]=u;return n?c_t(s,t+t/4):s}function c_t(e,t){const n=e.length;let r=0,i=1,s,a;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(a=i+(r+s-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=s}return e}function f_t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function d_t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(a){return arguments.length?(n=a||0,i=r-n,s):n},max(a){return arguments.length?(r=a||0,i=r-n,s):r},sample(){return n+Math.floor(i*jl())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const o=Math.floor(a);return o<n?0:o>=r?1:(o-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(e).max(t)}const yAe=Math.sqrt(2*Math.PI),h_t=Math.SQRT2;let b3=NaN;function O_(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(b3===b3)n=b3,b3=NaN;else{do n=jl()*2-1,r=jl()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,b3=r*s}return e+n*t}function B8(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*yAe)}function R_(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const a=Math.exp(-i*i/2);let o;i<7.07106781186547?(o=.0352624965998911*i+.700383064443688,o=o*i+6.37396220353165,o=o*i+33.912866078383,o=o*i+112.079291497871,o=o*i+221.213596169931,o=o*i+220.206867912376,s=a*o,o=.0883883476483184*i+1.75566716318264,o=o*i+16.064177579207,o=o*i+86.7807322029461,o=o*i+296.564248779674,o=o*i+637.333633378831,o=o*i+793.826512519948,o=o*i+440.413735824752,s=s/o):(o=i+.65,o=i+4/o,o=i+3/o,o=i+2/o,o=i+1/o,s=a/o/2.506628274631)}return r>0?1-s:s}function F_(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*h_t*p_t(2*e-1)}function p_t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function mQ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>O_(n,r),pdf:s=>B8(s,n,r),cdf:s=>R_(s,n,r),icdf:s=>F_(s,n,r)};return i.mean(e).stdev(t)}function gQ(e,t){const n=mQ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=pQ(e)),i):t},sample(){return e[~~(jl()*r)]+t*n.sample()},pdf(s){let a=0,o=0;for(;o<r;++o)a+=n.pdf((s-e[o])/t);return a/t/r},cdf(s){let a=0,o=0;for(;o<r;++o)a+=n.cdf((s-e[o])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function z8(e,t){return e=e||0,t=t??1,Math.exp(e+O_()*t)}function j8(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*yAe*e)}function U8(e,t,n){return R_(Math.log(e),t,n)}function V8(e,t,n){return Math.exp(F_(e,t,n))}function bAe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>z8(n,r),pdf:s=>j8(s,n,r),cdf:s=>U8(s,n,r),icdf:s=>V8(s,n,r)};return i.mean(e).stdev(t)}function xAe(e,t){let n=0,r;function i(a){const o=[];let l=0,u;for(u=0;u<n;++u)l+=o[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)o[u]/=l;return o}const s={weights(a){return arguments.length?(r=i(t=a||[]),s):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),s.weights(t)):e},sample(){const a=jl();let o=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(a<l){o=e[u];break}return o.sample()},pdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*e[l].pdf(a);return o},cdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*e[l].cdf(a);return o},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function W8(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*jl()}function H8(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function G8(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function q8(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function vAe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>W8(n,r),pdf:s=>H8(s,n,r),cdf:s=>G8(s,n,r),icdf:s=>q8(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function yQ(e,t,n){let r=0,i=0;for(const s of e){const a=n(s);t(s)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function M_(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function X8(e,t,n,r){e=e.filter(h=>{let m=t(h),g=n(h);return m!=null&&(m=+m)>=m&&g!=null&&(g=+g)>=g}),r&&e.sort((h,m)=>t(h)-t(m));const i=e.length,s=new Float64Array(i),a=new Float64Array(i);let o=0,l=0,u=0,c,f,d;for(d of e)s[o]=c=+t(d),a[o]=f=+n(d),++o,l+=(c-l)/o,u+=(f-u)/o;for(o=0;o<i;++o)s[o]-=l,a[o]-=u;return[s,a,l,u]}function L_(e,t,n,r){let i=-1,s,a;for(const o of e)s=t(o),a=n(o),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&r(s,a,++i)}function sS(e,t,n,r,i){let s=0,a=0;return L_(e,t,n,(o,l)=>{const u=l-i(o),c=l-r;s+=u*u,a+=c*c}),1-s/a}function bQ(e,t,n){let r=0,i=0,s=0,a=0,o=0;L_(e,t,n,(c,f)=>{++o,r+=(c-r)/o,i+=(f-i)/o,s+=(c*f-s)/o,a+=(c*c-a)/o});const l=M_(r,i,s,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:sS(e,t,n,i,u)}}function wAe(e,t,n){let r=0,i=0,s=0,a=0,o=0;L_(e,t,n,(c,f)=>{++o,c=Math.log(c),r+=(c-r)/o,i+=(f-i)/o,s+=(c*f-s)/o,a+=(c*c-a)/o});const l=M_(r,i,s,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:sS(e,t,n,i,u)}}function SAe(e,t,n){const[r,i,s,a]=X8(e,t,n);let o=0,l=0,u=0,c=0,f=0,d,h,m;L_(e,t,n,(w,C)=>{d=r[f++],h=Math.log(C),m=d*C,o+=(C*h-o)/f,l+=(m-l)/f,u+=(m*h-u)/f,c+=(d*m-c)/f});const[g,b]=M_(l/a,o/a,u/a,c/a),x=w=>Math.exp(g+b*(w-s));return{coef:[Math.exp(g-b*s),b],predict:x,rSquared:sS(e,t,n,a,x)}}function CAe(e,t,n){let r=0,i=0,s=0,a=0,o=0,l=0;L_(e,t,n,(f,d)=>{const h=Math.log(f),m=Math.log(d);++l,r+=(h-r)/l,i+=(m-i)/l,s+=(h*m-s)/l,a+=(h*h-a)/l,o+=(d-o)/l});const u=M_(r,i,s,a),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:sS(e,t,n,o,c)}}function xQ(e,t,n){const[r,i,s,a]=X8(e,t,n),o=r.length;let l=0,u=0,c=0,f=0,d=0,h,m,g,b;for(h=0;h<o;)m=r[h],g=i[h++],b=m*m,l+=(b-l)/h,u+=(b*m-u)/h,c+=(b*b-c)/h,f+=(m*g-f)/h,d+=(b*g-d)/h;const x=c-l*l,w=l*x-u*u,C=(d*l-f*u)/w,S=(f*x-d*u)/w,E=-C*l,A=k=>(k=k-s,C*k*k+S*k+E+a);return{coef:[E-S*s+C*s*s+a,S-2*C*s,C],predict:A,rSquared:sS(e,t,n,a,A)}}function $Ae(e,t,n,r){if(r===0)return yQ(e,t,n);if(r===1)return bQ(e,t,n);if(r===2)return xQ(e,t,n);const[i,s,a,o]=X8(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,m,g,b;for(d=0;d<f;++d){for(m=0,g=0;m<l;++m)g+=Math.pow(i[m],d)*s[m];for(u.push(g),b=new Float64Array(f),h=0;h<f;++h){for(m=0,g=0;m<l;++m)g+=Math.pow(i[m],d+h);b[h]=g}c.push(b)}c.push(u);const x=g_t(c),w=C=>{C-=a;let S=o+x[0]+x[1]*C+x[2]*C*C;for(d=3;d<f;++d)S+=x[d]*Math.pow(C,d);return S};return{coef:m_t(f,x,-a,o),predict:w,rSquared:sS(e,t,n,o,w)}}function m_t(e,t,n,r){const i=Array(e);let s,a,o,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(o=t[s],l=1,i[s]+=o,a=1;a<=s;++a)l*=(s+1-a)/a,i[s-a]+=o*Math.pow(n,a)*l;return i[0]+=r,i}function g_t(e){const t=e.length-1,n=[];let r,i,s,a,o;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(s=r;s<t+1;++s)o=e[s][r],e[s][r]=e[s][a],e[s][a]=o;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(o=0,s=i+1;s<t;++s)o+=e[s][i]*n[s];n[i]=(e[t][i]-o)/e[i][i]}return n}const Whe=2,Hhe=1e-12;function EAe(e,t,n,r){const[i,s,a,o]=X8(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=Whe;){const m=[0,u-1];for(let b=0;b<l;++b){const x=i[b],w=m[0],C=m[1],S=x-i[w]>i[C]-x?w:C;let E=0,A=0,k=0,N=0,I=0;const T=1/Math.abs(i[S]-x||1);for(let P=w;P<=C;++P){const M=i[P],F=s[P],R=y_t(Math.abs(x-M)*T)*d[P],j=M*R;E+=R,A+=j,k+=F*R,N+=F*j,I+=M*j}const[D,L]=M_(A/E,k/E,N/E,I/E);c[b]=D+L*x,f[b]=Math.abs(s[b]-c[b]),b_t(i,b+1,m)}if(h===Whe)break;const g=vke(f);if(Math.abs(g)<Hhe)break;for(let b=0,x,w;b<l;++b)x=f[b]/(6*g),d[b]=x>=1?Hhe:(w=1-x*x)*w}return x_t(i,c,a,o)}function y_t(e){return(e=1-e*e*e)*e*e}function b_t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function x_t(e,t,n,r){const i=e.length,s=[];let a=0,o=0,l=[],u;for(;a<i;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++o:(o=0,l[1]+=r,l=[u,t[a]],s.push(l));return l[1]+=r,s}const v_t=.5*Math.PI/180;function Y8(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],a=t[1],o=a-s,l=o/r,u=[i(s)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(s+g/n*o));return u.push(i(a)),u}else{c.push(i(a));for(let g=n;--g>0;)c.push(i(s+g/n*o))}let f=u[0],d=c[c.length-1];const h=1/o,m=w_t(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&S_t(f,g,d,h,m)>v_t?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function w_t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const a=t[s][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function S_t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-a)}function C_t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function dH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:C_t(e)}function kAe(e,t,n){return n||e+(t?"_"+t:"")}const Dj=()=>{},$_t={init:Dj,add:Dj,rem:Dj,idx:0},PE={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},P_=Object.keys(PE).filter(e=>e!=="__count__");function E_t(e,t){return n=>Kt({name:e,out:n||e},$_t,t)}[...P_,"__count__"].forEach(e=>{PE[e]=E_t(e,PE[e])});function AAe(e,t){return PE[e](t)}function _Ae(e,t){return e.idx-t.idx}function k_t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=PE[i]())})};return e.forEach(n),Object.values(t).sort(_Ae)}function A_t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function __t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function T_t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function N_t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function TAe(e,t){const n=t||Ha,r=k_t(e),i=e.slice().sort(_Ae);function s(a){this._ops=r,this._out=i,this.cell=a,this.init()}return s.prototype.init=A_t,s.prototype.add=__t,s.prototype.rem=T_t,s.prototype.set=N_t,s.prototype.get=n,s.fields=e.map(a=>a.out),s}function vQ(e){this._key=e?Pl(e):Tt,this.reset()}const fa=vQ.prototype;fa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};fa.add=function(e){this._add.push(e)};fa.rem=function(e){this._rem.push(e)};fa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),a={};let o,l,u;for(o=0;o<i;++o)a[n(t[o])]=1;for(o=0,l=0;o<r;++o)a[n(u=e[o])]?a[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};fa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",gt(n,s)||(n[s]=1,++i);return i};fa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=oke(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};fa.argmin=function(e){return this.extent(e)[0]||{}};fa.argmax=function(e){return this.extent(e)[1]||{}};fa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};fa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};fa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=hQ(this.values(),e),this._get=e),this._q};fa.q1=function(e){return this.quartile(e)[0]};fa.q2=function(e){return this.quartile(e)[1]};fa.q3=function(e){return this.quartile(e)[2]};fa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=mAe(this.values(),1e3,.05,e),this._get=e),this._ci};fa.ci0=function(e){return this.ci(e)[0]};fa.ci1=function(e){return this.ci(e)[1]};function cm(e){$e.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}cm.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:P_},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ve(cm,$e,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(o){let l,u,c,f;for(l in o)for(c=o[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}s(e._prev),s(t);function a(o,l,u){const c=n[u],f=r[u++];for(const d in f){const h=o?o+"|"+d:d;l[c]=f[d],u<i?a(h,l,u):t[h]||e.cell(h,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const x=vt(Fa(b)),w=x.length;let C=0,S;for(;C<w;++C)r[S=x[C]]||(r[S]=1,t.push(S))}this._dims=vt(e.groupby),this._dnames=this._dims.map(b=>{const x=mi(b);return i(b),n.push(x),x}),this.cellkey=e.key?e.key:dH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],a=e.ops||["count"],o=e.as||[],l=s.length,u={};let c,f,d,h,m,g;for(l!==a.length&&Ce("Unmatched number of fields and aggregate ops."),g=0;g<l;++g){if(c=s[g],f=a[g],c==null&&f!=="count"&&Ce("Null aggregate field specified."),h=mi(c),m=kAe(f,h,o[g]),n.push(m),f==="count"){this._counts.push(m);continue}d=u[h],d||(i(c),d=u[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(AAe(f,m))}return this._measures=this._measures.map(b=>TAe(b,b.field)),Object.create(null)},cellkey:dH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new vQ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let a=0;a<i;++a)s[n[a]]=r[a](e);return t?oAe(t.tuple,s):qn(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,a=e.rem,o=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&a.push(l.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?a:o).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const D_t=1e-14;function wQ(e){$e.call(this,null,e)}wQ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ve(wQ,$e,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,a=e.as||["bin0","bin1"],o=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Fa(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[o]=f,c[l]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[o]=r(c)),t.modifies(n?a:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=pAe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,a,o;(a=e.anchor)!=null&&(o=a-(i+r*Math.floor((a-i)/r)),i+=o,s+=o);const l=function(u){let c=Ti(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(D_t+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=hl(l,Fa(t),e.name||"bin_"+mi(t))}});function NAe(e,t,n){const r=e;let i=t||[],s=n||[],a={},o=0;return{add:l=>s.push(l),remove:l=>a[r(l)]=++o,size:()=>i.length,data:(l,u)=>(o&&(i=i.filter(c=>!a[r(c)]),a={},o=0),u&&l&&i.sort(l),s.length&&(i=l?uke(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function SQ(e){$e.call(this,[],e)}SQ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ve(SQ,$e,{transform(e,t){const n=t.fork(t.ALL),r=NAe(Tt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(lb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function DAe(e){Ar.call(this,null,I_t,e)}Ve(DAe,Ar);function I_t(e){return this.value&&!e.modified()?this.value:MZ(e.fields,e.orders)}function CQ(e){$e.call(this,null,e)}CQ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function O_t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ve(CQ,$e,{transform(e,t){const n=f=>d=>{for(var h=O_t(o(d),e.case,s)||[],m,g=0,b=h.length;g<b;++g)a.test(m=h[g])||f(m)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,a=this._stop,o=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,u;for(o in n)l=r[o],u=n[o]||0,!l&&u?(r[o]=l=qn({}),l[i]=o,l[s]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[o]=null,r[o]=null):l[s]!==u&&(l[s]=u,a.mod.push(l));return a.modifies(t)}});function $Q(e){$e.call(this,null,e)}$Q.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ve($Q,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return a?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=R_t(o,i,s,e.filter||zs)):n.mod=o,n.source=this.value,n.modifies(r)}});function R_t(e,t,n,r){for(var i=[],s={},a=e.length,o=0,l,u;o<a;++o)for(s[t]=u=e[o],l=0;l<a;++l)s[n]=e[l],r(s)&&(i.push(qn(s)),s={},s[t]=u);return i}const Ghe={kde:gQ,mixture:xAe,normal:mQ,lognormal:bAe,uniform:vAe},F_t="distributions",qhe="function",M_t="field";function IAe(e,t){const n=e[qhe];gt(Ghe,n)||Ce("Unknown distribution function: "+n);const r=Ghe[n]();for(const i in e)i===M_t?r.data((e.from||t()).map(e[i])):i===F_t?r[i](e[i].map(s=>IAe(s,t))):typeof r[i]===qhe&&r[i](e[i]);return r}function EQ(e){$e.call(this,null,e)}const OAe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],L_t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:OAe},{name:"weights",type:"number",array:!0}]};EQ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:OAe.concat(L_t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ve(EQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=IAe(e.distribution,P_t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&Ce("Invalid density method: "+a),!e.extent&&!r.data&&Ce("Missing density extent parameter."),a=r[a];const o=e.as||["value","density"],l=e.extent||kc(r.data()),u=Y8(a,l,i,s).map(c=>{const f={};return f[o[0]]=c[0],f[o[1]]=c[1],qn(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function P_t(e){return()=>e.materialize(e.SOURCE).source}function RAe(e,t){return e?e.map((n,r)=>t[r]||mi(n)):null}function kQ(e,t,n){const r=[],i=f=>f(l);let s,a,o,l,u,c;if(t==null)r.push(e.map(n));else for(s={},a=0,o=e.length;a<o;++a)l=e[a],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const FAe="bin";function AQ(e){$e.call(this,null,e)}AQ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:FAe}]};const B_t=(e,t)=>Qw(kc(e,t))/30;Ve(AQ,$e,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=kQ(t.source,e.groupby,Ha),i=e.smooth||!1,s=e.field,a=e.step||B_t(n,s),o=lb((m,g)=>s(m)-s(g)),l=e.as||FAe,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const m=r[d].sort(o);h=-1;for(const g of gAe(m,a,i,s))g<c&&(c=g),g>f&&(f=g),m[++h][l]=g}return this.value={start:c,stop:f,step:a},t.reflow(!0).modifies(l)}});function MAe(e){Ar.call(this,null,z_t,e),this.modified(!0)}Ve(MAe,Ar);function z_t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:hl(n=>t(n,e),Fa(t),mi(t))}function _Q(e){$e.call(this,[void 0,void 0],e)}_Q.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ve(_Q,$e,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,o=>{const l=Ti(r(o));l!=null&&(l<s&&(s=l),l>a&&(a=l))}),!Number.isFinite(s)||!Number.isFinite(a)){let o=mi(r);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});function TQ(e,t){Ar.call(this,e),this.parent=t,this.count=0}Ve(TQ,Ar,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function K8(e){$e.call(this,{},e),this._keys=Zw();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ve(K8,$e,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=gt(i,e)&&i[e],a,o;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[e])&&o.tuple,a=n.dataflow,s=new TQ(n.fork(n.NO_SOURCE),this),a.add(s).connect(t(a,e,o)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,a=e.modified("key"),o=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Tt(l),c=s.get(u);c!==void 0&&(s.delete(u),o(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(Tt(l),u),o(u).add(l)}),a||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Tt(l),c=s.get(u),f=r(l);c===f?o(f).mod(l):(s.set(u,f),o(c).rem(l),o(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(s.get(Tt(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=Tt(l),c=s.get(u),f=r(l);c!==f&&(s.set(u,f),o(c).rem(l),o(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function LAe(e){Ar.call(this,null,j_t,e)}Ve(LAe,Ar);function j_t(e){return this.value&&!e.modified()?this.value:Qe(e.name)?vt(e.name).map(t=>Pl(t)):Pl(e.name,e.as)}function NQ(e){$e.call(this,Zw(),e)}NQ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ve(NQ,$e,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,a=i.rem,o=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=Tt(f);r.has(d)?r.delete(d):a.push(f)}),t.visit(t.ADD,f=>{l(f,e)?s.push(f):r.set(Tt(f),1)});function c(f){const d=Tt(f),h=l(f,e),m=r.get(d);h&&m?(r.delete(d),s.push(f)):!h&&!m?(r.set(d,1),a.push(f)):u&&h&&!m&&o.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function DQ(e){$e.call(this,[],e)}DQ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ve(DQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=RAe(r,e.as||[]),s=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=r.map(m=>m(o)),u=l.reduce((m,g)=>Math.max(m,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=uQ(o),f=0;f<a;++f)d[i[f]]=(h=l[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function IQ(e){$e.call(this,[],e)}IQ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ve(IQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(mi),s=e.as||["key","value"],a=s[0],o=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=uQ(u),f[a]=i[c],f[o]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function OQ(e){$e.call(this,null,e)}OQ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ve(OQ,$e,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,a=>a[r]=n(a,e))}});function PAe(e){$e.call(this,[],e)}Ve(PAe,$e,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,a,o,l;if(s>0){for(a=[];--s>=0;)a.push(l=qn(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else o=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,i=i.slice(-s);return n.source=this.value=i,n}});const aD={value:"value",median:vke,mean:vEt,min:tH,max:W1},U_t=[];function RQ(e){$e.call(this,[],e)}RQ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function V_t(e){var t=e.method||aD.value,n;if(aD[t]==null)Ce("Unrecognized imputation method: "+t);else return t===aD.value?(n=e.value!==void 0?e.value:0,()=>n):aD[t]}function W_t(e){const t=e.field;return n=>n?t(n):NaN}Ve(RQ,$e,{transform(e,t){var n=t.fork(t.ALL),r=V_t(e),i=W_t(e),s=mi(e.field),a=mi(e.key),o=(e.groupby||[]).map(mi),l=H_t(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,m,g,b,x,w,C,S,E;for(b=0,C=l.length;b<C;++b)for(d=l[b],m=d.values,h=NaN,w=0;w<f;++w)if(d[w]==null){for(g=l.domain[w],E={_impute:!0},x=0,S=m.length;x<S;++x)E[o[x]]=m[x];E[a]=g,E[s]=Number.isNaN(h)?h=r(d,i):h,u.push(qn(E))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function H_t(e,t,n,r){var i=x=>x(b),s=[],a=r?r.slice():[],o={},l={},u,c,f,d,h,m,g,b;for(a.forEach((x,w)=>o[x]=w+1),d=0,g=e.length;d<g;++d)b=e[d],m=n(b),h=o[m]||(o[m]=a.push(m)),c=(u=t?t.map(i):U_t)+"",(f=l[c])||(f=l[c]=[],s.push(f),f.values=u),f[h-1]=b;return s.domain=a,s}function FQ(e){cm.call(this,e)}FQ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:P_},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ve(FQ,cm,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Kt(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function MQ(e){$e.call(this,null,e)}MQ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ve(MQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kQ(r,e.groupby,e.field),s=(e.groupby||[]).map(mi),a=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&Ce("Invalid density method: "+o),e.resolve==="shared"&&(c||(c=kc(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const m=gQ(h,a)[o],g=e.counts?h.length:1,b=c||kc(h);Y8(m,b,f,d).forEach(x=>{const w={};for(let C=0;C<s.length;++C)w[s[C]]=h.dims[C];w[l[0]]=x[0],w[l[1]]=x[1]*g,u.push(qn(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function BAe(e){Ar.call(this,null,G_t,e)}Ve(BAe,Ar);function G_t(e){return this.value&&!e.modified()?this.value:BZ(e.fields,e.flat)}function zAe(e){$e.call(this,[],e),this._pending=null}Ve(zAe,$e,{transform(e,t){const n=t.dataflow;return this._pending?Ij(this,t,this._pending):q_t(e)?t.StopPropagation:e.values?Ij(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=vt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Ij(this,t,vt(r.data)))}});function q_t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Ij(e,t,n){n.forEach(qn);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function LQ(e){$e.call(this,{},e)}LQ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ve(LQ,$e,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,a=e.modified(),o=n.length;let l=a?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,o>1&&!c&&Ce('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==o*d&&Ce('The "as" parameter has too few output field names.'),c=c||i.map(mi),f=function(m){for(var g=0,b=0,x,w;g<o;++g)if(w=r.get(n[g](m)),w==null)for(x=0;x<d;++x,++b)m[c[b]]=s;else for(x=0;x<d;++x,++b)m[c[b]]=i[x](w)}):(c||Ce("Missing output field names."),f=function(m){for(var g=0,b;g<o;++g)b=r.get(n[g](m)),m[c[g]]=b??s}),a?u=t.reflow(!0):(h=n.some(m=>t.modified(m.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function jAe(e){Ar.call(this,null,X_t,e)}Ve(jAe,Ar);function X_t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=t[s],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function UAe(e){Ar.call(this,null,Y_t,e)}Ve(UAe,Ar);function Y_t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function VAe(e){$e.call(this,null,e)}Ve(VAe,$e,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function PQ(e){cm.call(this,e)}PQ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:P_,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ve(PQ,cm,{_transform:cm.prototype.transform,transform(e,t){return this._transform(K_t(e,t),t)}});function K_t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Fa(n).concat(Fa(r)),a=Q_t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(o=>Z_t(o,n,r,s)),as:a.map(o=>o+""),modified:e.modified.bind(e)}}function Z_t(e,t,n,r){return hl(i=>t(i)===e?n(i):NaN,r,e+"")}function Q_t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const a=e(s);r[a]||(r[a]=1,i.push(a))}),i.sort(I_),t?i.slice(0,t):i}function WAe(e){K8.call(this,e)}Ve(WAe,K8,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Tt(s),n,t,s);return(e.modified("field")||r&&t.modified(Fa(r)))&&Ce("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const a=i(s);r(s).forEach(o=>a.mod(o))}),t.visit(t.ADD,s=>{const a=i(s);r(s).forEach(o=>a.add(qn(o)))}),t.visit(t.REM,s=>{const a=i(s);r(s).forEach(o=>a.rem(o))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function BQ(e){$e.call(this,null,e)}BQ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ve(BQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=RAe(e.fields,e.as||[]),s=r?(o,l)=>J_t(o,l,r,i):M8;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,o=>{const l=Tt(o);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,o=>{const l=s(o,qn({}));a[Tt(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(s(o,a[Tt(o)]))}),n}});function J_t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function HAe(e){$e.call(this,null,e)}Ve(HAe,$e,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function zQ(e){$e.call(this,null,e)}zQ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const eTt=1e-14;Ve(zQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=kQ(i,e.groupby,e.field),a=(e.groupby||[]).map(mi),o=[],l=e.step||.01,u=e.probs||Ts(l/2,1-eTt,l),c=u.length;return s.forEach(f=>{const d=dQ(f,u);for(let h=0;h<c;++h){const m={};for(let g=0;g<a.length;++g)m[a[g]]=f.dims[g];m[r[0]]=u[h],m[r[1]]=d[h],o.push(qn(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function GAe(e){$e.call(this,null,e)}Ve(GAe,$e,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Tt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=uQ(i);r[Tt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Tt(i)];for(const a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});function jQ(e){$e.call(this,[],e),this.count=0}jQ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ve(jQ,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Tt(f)]=1,c),{});let a=this.value,o=this.count,l=0;function u(c){let f,d;a.length<i?a.push(c):(d=~~((o+1)*jl()),d<a.length&&d>=l&&(f=a[d],s[Tt(f)]&&n.rem.push(f),a[d]=c)),++o}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Tt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--o}),a=a.filter(c=>s[Tt(c)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(l=o=a.length,t.visit(t.SOURCE,c=>{s[Tt(c)]||u(c)}),l=-1),r&&a.length>i){const c=a.length-i;for(let f=0;f<c;++f)s[Tt(a[f])]=-1,n.rem.push(a[f]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Tt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(c=>!s[Tt(c)])),this.count=o,this.value=n.source=a,n}});function UQ(e){$e.call(this,null,e)}UQ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ve(UQ,$e,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ts(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,qn(s)}),n.add=t.add.concat(this.value),n}});function qAe(e){$e.call(this,null,e),this.modified(!0)}Ve(qAe,$e,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function VQ(e){$e.call(this,null,e)}const XAe=["unit0","unit1"];VQ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:HZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:XAe}]};Ve(VQ,$e,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),a=(i?rS:nS)(s.unit).offset,o=e.as||XAe,l=o[0],u=o[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Fa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,m=>{const g=n(m);let b,x;g==null?(m[l]=null,r&&(m[u]=null)):(m[l]=b=x=s(g),r&&(m[u]=x=a(b,c)),b<f&&(f=b),x>d&&(d=x))}),s.start=f,s.stop=d,t.modifies(r?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Pke({extent:e.extent||kc(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=GZ(r),a=this.value||{},o=(n?Oke:Ike)(s,i);return o.unit=en(s),o.units=s,o.step=i,o.start=a.start,o.stop=a.stop,this.value=o}});function YAe(e){$e.call(this,Zw(),e)}Ve(YAe,$e,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=o=>i.set(r(o),o);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,o=>i.delete(r(o))),t.visit(t.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function KAe(e){$e.call(this,null,e)}Ve(KAe,$e,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(lb(e.sort)):t.source).map(e.field))}});function tTt(e,t,n,r){const i=BE[e](t,n);return{init:i.init||b0,update:function(s,a){a[r]=i.next(s)}}}const BE={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=BE.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ce("ntile num must be greater than zero.");const n=BE.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ce("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=nTt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function nTt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const rTt=Object.keys(BE);function ZAe(e){const t=vt(e.ops),n=vt(e.fields),r=vt(e.params),i=vt(e.as),s=this.outputs=[],a=this.windows=[],o={},l={},u=[],c=[];let f=!0;function d(h){vt(Fa(h)).forEach(m=>o[m]=1)}d(e.sort),t.forEach((h,m)=>{const g=n[m],b=mi(g),x=kAe(h,b,i[m]);if(d(g),s.push(x),gt(BE,h))a.push(tTt(h,n[m],r[m],x));else{if(g==null&&h!=="count"&&Ce("Null aggregate field specified."),h==="count"){u.push(x);return}f=!1;let w=l[b];w||(w=l[b]=[],w.field=g,c.push(w)),w.push(AAe(h,x))}}),(u.length||c.length)&&(this.cell=iTt(c,u,f)),this.inputs=Object.keys(o)}const QAe=ZAe.prototype;QAe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};QAe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<s;++a)r[a].update(e,t)};function iTt(e,t,n){e=e.map(l=>TAe(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),a=0;a<i;++a)s[a]=new e[a](r);if(r.store)var o=r.data=new vQ;return r.add=function(l){if(r.num+=1,!n){o&&o.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){o&&o.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(o&&o.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,o&&o.reset();for(let l=0;l<i;++l)s[l].init()},r}function WQ(e){$e.call(this,{},e),this._mlen=0,this._mods=[]}WQ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rTt.concat(P_)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ve(WQ,$e,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=lb(e.sort),i=dH(e.groupby),s=o=>this.group(i(o));let a=this.state;(!a||n)&&(a=this.state=new ZAe(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,o=>s(o).add(o))):(t.visit(t.REM,o=>s(o).remove(o)),t.visit(t.ADD,o=>s(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)sTt(this._mods[o],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=NAe(Tt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function sTt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,a=r.frame||[null,0],o=e.data(n),l=o.length,u=s?Jw(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:i||oa(-1)};t.init();for(let f=0;f<l;++f)aTt(c,a,f,l),s&&oTt(c,u),t.update(c,o[f])}function aTt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function oTt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<a&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const lTt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:cm,bin:wQ,collect:SQ,compare:DAe,countpattern:CQ,cross:$Q,density:EQ,dotbin:AQ,expression:MAe,extent:_Q,facet:K8,field:LAe,filter:NQ,flatten:DQ,fold:IQ,formula:OQ,generate:PAe,impute:RQ,joinaggregate:FQ,kde:MQ,key:BAe,load:zAe,lookup:LQ,multiextent:jAe,multivalues:UAe,params:VAe,pivot:PQ,prefacet:WAe,project:BQ,proxy:HAe,quantile:zQ,relay:GAe,sample:jQ,sequence:UQ,sieve:qAe,subflow:TQ,timeunit:VQ,tupleindex:YAe,values:KAe,window:WQ},Symbol.toStringTag,{value:"Module"}));function Qn(e){return function(){return e}}const Xhe=Math.abs,ma=Math.atan2,Rg=Math.cos,uTt=Math.max,Oj=Math.min,sf=Math.sin,A1=Math.sqrt,ba=1e-12,Yx=Math.PI,OR=Yx/2,JAe=2*Yx;function cTt(e){return e>1?0:e<-1?Yx:Math.acos(e)}function Yhe(e){return e>=1?OR:e<=-1?-OR:Math.asin(e)}const hH=Math.PI,pH=2*hH,n1=1e-6,fTt=pH-n1;function e_e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function dTt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return e_e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let HQ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?e_e:dTt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,u=i-n,c=a-t,f=o-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>n1)if(!(Math.abs(f*l-u*c)>n1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-a,m=i-o,g=l*l+u*u,b=h*h+m*m,x=Math.sqrt(g),w=Math.sqrt(d),C=s*Math.tan((hH-Math.acos((g+d-b)/(2*x*w)))/2),S=C/w,E=C/x;Math.abs(S-1)>n1&&this._append`L${t+S*c},${n+S*f}`,this._append`A${s},${s},0,0,${+(f*h>c*m)},${this._x1=t+E*l},${this._y1=n+E*u}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=t+o,c=n+l,f=1^a,d=a?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>n1||Math.abs(this._y1-c)>n1)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%pH+pH),d>fTt?this._append`A${r},${r},0,1,${f},${t-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>n1&&this._append`A${r},${r},0,${+(d>=hH)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Um(){return new HQ}Um.prototype=HQ.prototype;function Z8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new HQ(t)}function hTt(e){return e.innerRadius}function pTt(e){return e.outerRadius}function mTt(e){return e.startAngle}function gTt(e){return e.endAngle}function yTt(e){return e&&e.padAngle}function bTt(e,t,n,r,i,s,a,o){var l=n-e,u=r-t,c=a-i,f=o-s,d=f*l-c*u;if(!(d*d<ba))return d=(c*(t-s)-f*(e-i))/d,[e+d*l,t+d*u]}function oD(e,t,n,r,i,s,a){var o=e-n,l=t-r,u=(a?s:-s)/A1(o*o+l*l),c=u*l,f=-u*o,d=e+c,h=t+f,m=n+c,g=r+f,b=(d+m)/2,x=(h+g)/2,w=m-d,C=g-h,S=w*w+C*C,E=i-s,A=d*g-m*h,k=(C<0?-1:1)*A1(uTt(0,E*E*S-A*A)),N=(A*C-w*k)/S,I=(-A*w-C*k)/S,T=(A*C+w*k)/S,D=(-A*w+C*k)/S,L=N-b,P=I-x,M=T-b,F=D-x;return L*L+P*P>M*M+F*F&&(N=T,I=D),{cx:N,cy:I,x01:-c,y01:-f,x11:N*(i/E-1),y11:I*(i/E-1)}}function GQ(){var e=hTt,t=pTt,n=Qn(0),r=null,i=mTt,s=gTt,a=yTt,o=null,l=Z8(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),m=i.apply(this,arguments)-OR,g=s.apply(this,arguments)-OR,b=Xhe(g-m),x=g>m;if(o||(o=c=l()),h<d&&(f=h,h=d,d=f),!(h>ba))o.moveTo(0,0);else if(b>JAe-ba)o.moveTo(h*Rg(m),h*sf(m)),o.arc(0,0,h,m,g,!x),d>ba&&(o.moveTo(d*Rg(g),d*sf(g)),o.arc(0,0,d,g,m,x));else{var w=m,C=g,S=m,E=g,A=b,k=b,N=a.apply(this,arguments)/2,I=N>ba&&(r?+r.apply(this,arguments):A1(d*d+h*h)),T=Oj(Xhe(h-d)/2,+n.apply(this,arguments)),D=T,L=T,P,M;if(I>ba){var F=Yhe(I/d*sf(N)),R=Yhe(I/h*sf(N));(A-=F*2)>ba?(F*=x?1:-1,S+=F,E-=F):(A=0,S=E=(m+g)/2),(k-=R*2)>ba?(R*=x?1:-1,w+=R,C-=R):(k=0,w=C=(m+g)/2)}var j=h*Rg(w),H=h*sf(w),G=d*Rg(E),z=d*sf(E);if(T>ba){var Y=h*Rg(C),Z=h*sf(C),Q=d*Rg(S),se=d*sf(S),re;if(b<Yx)if(re=bTt(j,H,Q,se,Y,Z,G,z)){var de=j-re[0],Oe=H-re[1],Le=Y-re[0],me=Z-re[1],xe=1/sf(cTt((de*Le+Oe*me)/(A1(de*de+Oe*Oe)*A1(Le*Le+me*me)))/2),Ee=A1(re[0]*re[0]+re[1]*re[1]);D=Oj(T,(d-Ee)/(xe-1)),L=Oj(T,(h-Ee)/(xe+1))}else D=L=0}k>ba?L>ba?(P=oD(Q,se,j,H,h,L,x),M=oD(Y,Z,G,z,h,L,x),o.moveTo(P.cx+P.x01,P.cy+P.y01),L<T?o.arc(P.cx,P.cy,L,ma(P.y01,P.x01),ma(M.y01,M.x01),!x):(o.arc(P.cx,P.cy,L,ma(P.y01,P.x01),ma(P.y11,P.x11),!x),o.arc(0,0,h,ma(P.cy+P.y11,P.cx+P.x11),ma(M.cy+M.y11,M.cx+M.x11),!x),o.arc(M.cx,M.cy,L,ma(M.y11,M.x11),ma(M.y01,M.x01),!x))):(o.moveTo(j,H),o.arc(0,0,h,w,C,!x)):o.moveTo(j,H),!(d>ba)||!(A>ba)?o.lineTo(G,z):D>ba?(P=oD(G,z,Y,Z,d,-D,x),M=oD(j,H,Q,se,d,-D,x),o.lineTo(P.cx+P.x01,P.cy+P.y01),D<T?o.arc(P.cx,P.cy,D,ma(P.y01,P.x01),ma(M.y01,M.x01),!x):(o.arc(P.cx,P.cy,D,ma(P.y01,P.x01),ma(P.y11,P.x11),!x),o.arc(0,0,d,ma(P.cy+P.y11,P.cx+P.x11),ma(M.cy+M.y11,M.cx+M.x11),x),o.arc(M.cx,M.cy,D,ma(M.y11,M.x11),ma(M.y01,M.x01),!x))):o.arc(0,0,d,E,S,x)}if(o.closePath(),c)return o=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Yx/2;return[Rg(f)*c,sf(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Qn(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Qn(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Qn(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Qn(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Qn(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Qn(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Qn(+c),u):a},u.context=function(c){return arguments.length?(o=c??null,u):o},u}function t_e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function n_e(e){this._context=e}n_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function B_(e){return new n_e(e)}function r_e(e){return e[0]}function i_e(e){return e[1]}function Q8(e,t){var n=Qn(!0),r=null,i=B_,s=null,a=Z8(o);e=typeof e=="function"?e:e===void 0?r_e:Qn(e),t=typeof t=="function"?t:t===void 0?i_e:Qn(t);function o(l){var u,c=(l=t_e(l)).length,f,d=!1,h;for(r==null&&(s=i(h=a())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,u,l),+t(f,u,l));if(h)return s=null,h+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Qn(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Qn(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Qn(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function aS(e,t,n){var r=null,i=Qn(!0),s=null,a=B_,o=null,l=Z8(u);e=typeof e=="function"?e:e===void 0?r_e:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?i_e:Qn(+n);function u(f){var d,h,m,g=(f=t_e(f)).length,b,x=!1,w,C=new Array(g),S=new Array(g);for(s==null&&(o=a(w=l())),d=0;d<=g;++d){if(!(d<g&&i(b=f[d],d,f))===x)if(x=!x)h=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=d-1;m>=h;--m)o.point(C[m],S[m]);o.lineEnd(),o.areaEnd()}x&&(C[d]=+e(b,d,f),S[d]=+t(b,d,f),o.point(r?+r(b,d,f):C[d],n?+n(b,d,f):S[d]))}if(w)return o=null,w+""||null}function c(){return Q8().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qn(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qn(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qn(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),u):s},u}const xTt={draw(e,t){const n=A1(t/Yx);e.moveTo(n,0),e.arc(0,0,n,0,JAe)}};function qQ(e,t){let n=null,r=Z8(i);e=typeof e=="function"?e:Qn(e||xTt),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Qn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function fm(){}function RR(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function J8(e){this._context=e}J8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:RR(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:RR(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XQ(e){return new J8(e)}function s_e(e){this._context=e}s_e.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:RR(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YQ(e){return new s_e(e)}function a_e(e){this._context=e}a_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:RR(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KQ(e){return new a_e(e)}function o_e(e,t){this._basis=new J8(e),this._beta=t}o_e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(r+l*s),this._beta*t[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const ZQ=function e(t){function n(r){return t===1?new J8(r):new o_e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function FR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function QQ(e,t){this._context=e,this._k=(1-t)/6}QQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:FR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:FR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JQ=function e(t){function n(r){return new QQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function eJ(e,t){this._context=e,this._k=(1-t)/6}eJ.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:FR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tJ=function e(t){function n(r){return new eJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nJ(e,t){this._context=e,this._k=(1-t)/6}nJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:FR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rJ=function e(t){function n(r){return new nJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iJ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>ba){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ba){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function l_e(e,t){this._context=e,this._alpha=t}l_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:iJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sJ=function e(t){function n(r){return t?new l_e(r,t):new QQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function u_e(e,t){this._context=e,this._alpha=t}u_e.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aJ=function e(t){function n(r){return t?new u_e(r,t):new eJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function c_e(e,t){this._context=e,this._alpha=t}c_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oJ=function e(t){function n(r){return t?new c_e(r,t):new nJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function f_e(e){this._context=e}f_e.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lJ(e){return new f_e(e)}function Khe(e){return e<0?-1:1}function Zhe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(Khe(s)+Khe(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function Qhe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Rj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function MR(e){this._context=e}MR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rj(this,this._t0,Qhe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rj(this,Qhe(this,n=Zhe(this,e,t)),n);break;default:Rj(this,this._t0,n=Zhe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function d_e(e){this._context=new h_e(e)}(d_e.prototype=Object.create(MR.prototype)).point=function(e,t){MR.prototype.point.call(this,t,e)};function h_e(e){this._context=e}h_e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function uJ(e){return new MR(e)}function cJ(e){return new d_e(e)}function p_e(e){this._context=e}p_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Jhe(e),i=Jhe(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Jhe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function fJ(e){return new p_e(e)}function e9(e,t){this._context=e,this._t=t}e9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function dJ(e){return new e9(e,.5)}function hJ(e){return new e9(e,0)}function pJ(e){return new e9(e,1)}function Eu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const vTt=()=>typeof Image<"u"?Image:null;function pd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vm(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mH=Symbol("implicit");function Rc(){var e=new ghe,t=[],n=[],r=mH;function i(s){let a=e.get(s);if(a===void 0){if(r!==mH)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ghe;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Rc(t,n).unknown(r)},pd.apply(i,arguments),i}function oS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function z_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Wm(){}var $y=.7,Kx=1/$y,dx="\\s*([+-]?\\d+)\\s*",zE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wTt=/^#([0-9a-f]{3,8})$/,STt=new RegExp(`^rgb\\(${dx},${dx},${dx}\\)$`),CTt=new RegExp(`^rgb\\(${Pf},${Pf},${Pf}\\)$`),$Tt=new RegExp(`^rgba\\(${dx},${dx},${dx},${zE}\\)$`),ETt=new RegExp(`^rgba\\(${Pf},${Pf},${Pf},${zE}\\)$`),kTt=new RegExp(`^hsl\\(${zE},${Pf},${Pf}\\)$`),ATt=new RegExp(`^hsla\\(${zE},${Pf},${Pf},${zE}\\)$`),epe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oS(Wm,jE,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tpe,formatHex:tpe,formatHex8:_Tt,formatHsl:TTt,formatRgb:npe,toString:npe});function tpe(){return this.rgb().formatHex()}function _Tt(){return this.rgb().formatHex8()}function TTt(){return m_e(this).formatHsl()}function npe(){return this.rgb().formatRgb()}function jE(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wTt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rpe(t):n===3?new Ns(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?lD(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?lD(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=STt.exec(e))?new Ns(t[1],t[2],t[3],1):(t=CTt.exec(e))?new Ns(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$Tt.exec(e))?lD(t[1],t[2],t[3],t[4]):(t=ETt.exec(e))?lD(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kTt.exec(e))?ape(t[1],t[2]/100,t[3]/100,1):(t=ATt.exec(e))?ape(t[1],t[2]/100,t[3]/100,t[4]):epe.hasOwnProperty(e)?rpe(epe[e]):e==="transparent"?new Ns(NaN,NaN,NaN,0):null}function rpe(e){return new Ns(e>>16&255,e>>8&255,e&255,1)}function lD(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ns(e,t,n,r)}function mJ(e){return e instanceof Wm||(e=jE(e)),e?(e=e.rgb(),new Ns(e.r,e.g,e.b,e.opacity)):new Ns}function ed(e,t,n,r){return arguments.length===1?mJ(e):new Ns(e,t,n,r??1)}function Ns(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}oS(Ns,ed,z_(Wm,{brighter(e){return e=e==null?Kx:Math.pow(Kx,e),new Ns(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$y:Math.pow($y,e),new Ns(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ns(H1(this.r),H1(this.g),H1(this.b),LR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ipe,formatHex:ipe,formatHex8:NTt,formatRgb:spe,toString:spe}));function ipe(){return`#${_1(this.r)}${_1(this.g)}${_1(this.b)}`}function NTt(){return`#${_1(this.r)}${_1(this.g)}${_1(this.b)}${_1((isNaN(this.opacity)?1:this.opacity)*255)}`}function spe(){const e=LR(this.opacity);return`${e===1?"rgb(":"rgba("}${H1(this.r)}, ${H1(this.g)}, ${H1(this.b)}${e===1?")":`, ${e})`}`}function LR(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function H1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _1(e){return e=H1(e),(e<16?"0":"")+e.toString(16)}function ape(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new oc(e,t,n,r)}function m_e(e){if(e instanceof oc)return new oc(e.h,e.s,e.l,e.opacity);if(e instanceof Wm||(e=jE(e)),!e)return new oc;if(e instanceof oc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new oc(a,o,l,e.opacity)}function UE(e,t,n,r){return arguments.length===1?m_e(e):new oc(e,t,n,r??1)}function oc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oS(oc,UE,z_(Wm,{brighter(e){return e=e==null?Kx:Math.pow(Kx,e),new oc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$y:Math.pow($y,e),new oc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ns(Fj(e>=240?e-240:e+120,i,r),Fj(e,i,r),Fj(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new oc(ope(this.h),uD(this.s),uD(this.l),LR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=LR(this.opacity);return`${e===1?"hsl(":"hsla("}${ope(this.h)}, ${uD(this.s)*100}%, ${uD(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ope(e){return e=(e||0)%360,e<0?e+360:e}function uD(e){return Math.max(0,Math.min(1,e||0))}function Fj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const g_e=Math.PI/180,y_e=180/Math.PI,PR=18,b_e=.96422,x_e=1,v_e=.82521,w_e=4/29,hx=6/29,S_e=3*hx*hx,DTt=hx*hx*hx;function C_e(e){if(e instanceof Bf)return new Bf(e.l,e.a,e.b,e.opacity);if(e instanceof Eh)return $_e(e);e instanceof Ns||(e=mJ(e));var t=Bj(e.r),n=Bj(e.g),r=Bj(e.b),i=Mj((.2225045*t+.7168786*n+.0606169*r)/x_e),s,a;return t===n&&n===r?s=a=i:(s=Mj((.4360747*t+.3850649*n+.1430804*r)/b_e),a=Mj((.0139322*t+.0971045*n+.7141733*r)/v_e)),new Bf(116*i-16,500*(s-i),200*(i-a),e.opacity)}function VE(e,t,n,r){return arguments.length===1?C_e(e):new Bf(e,t,n,r??1)}function Bf(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}oS(Bf,VE,z_(Wm,{brighter(e){return new Bf(this.l+PR*(e??1),this.a,this.b,this.opacity)},darker(e){return new Bf(this.l-PR*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=b_e*Lj(t),e=x_e*Lj(e),n=v_e*Lj(n),new Ns(Pj(3.1338561*t-1.6168667*e-.4906146*n),Pj(-.9787684*t+1.9161415*e+.033454*n),Pj(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Mj(e){return e>DTt?Math.pow(e,1/3):e/S_e+w_e}function Lj(e){return e>hx?e*e*e:S_e*(e-w_e)}function Pj(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bj(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ITt(e){if(e instanceof Eh)return new Eh(e.h,e.c,e.l,e.opacity);if(e instanceof Bf||(e=C_e(e)),e.a===0&&e.b===0)return new Eh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*y_e;return new Eh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function WE(e,t,n,r){return arguments.length===1?ITt(e):new Eh(e,t,n,r??1)}function Eh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function $_e(e){if(isNaN(e.h))return new Bf(e.l,0,0,e.opacity);var t=e.h*g_e;return new Bf(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}oS(Eh,WE,z_(Wm,{brighter(e){return new Eh(this.h,this.c,this.l+PR*(e??1),this.opacity)},darker(e){return new Eh(this.h,this.c,this.l-PR*(e??1),this.opacity)},rgb(){return $_e(this).rgb()}}));var E_e=-.14861,gJ=1.78277,yJ=-.29227,t9=-.90649,HE=1.97294,lpe=HE*t9,upe=HE*gJ,cpe=gJ*yJ-t9*E_e;function OTt(e){if(e instanceof G1)return new G1(e.h,e.s,e.l,e.opacity);e instanceof Ns||(e=mJ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(cpe*r+lpe*t-upe*n)/(cpe+lpe-upe),s=r-i,a=(HE*(n-i)-yJ*s)/t9,o=Math.sqrt(a*a+s*s)/(HE*i*(1-i)),l=o?Math.atan2(a,s)*y_e-120:NaN;return new G1(l<0?l+360:l,o,i,e.opacity)}function gH(e,t,n,r){return arguments.length===1?OTt(e):new G1(e,t,n,r??1)}function G1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oS(G1,gH,z_(Wm,{brighter(e){return e=e==null?Kx:Math.pow(Kx,e),new G1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$y:Math.pow($y,e),new G1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*g_e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ns(255*(t+n*(E_e*r+gJ*i)),255*(t+n*(yJ*r+t9*i)),255*(t+n*(HE*r)),this.opacity)}}));function k_e(e,t,n,r,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*i)/6}function A_e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],a=r>0?e[r-1]:2*i-s,o=r<t-1?e[r+2]:2*s-i;return k_e((n-r/t)*t,a,i,s,o)}}function __e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],o=e[(r+2)%t];return k_e((n-r/t)*t,i,s,a,o)}}const n9=e=>()=>e;function T_e(e,t){return function(n){return e+n*t}}function RTt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function r9(e,t){var n=t-e;return n?T_e(e,n>180||n<-180?n-360*Math.round(n/360):n):n9(isNaN(e)?t:e)}function FTt(e){return(e=+e)==1?Ds:function(t,n){return n-t?RTt(t,n,e):n9(isNaN(t)?n:t)}}function Ds(e,t){var n=t-e;return n?T_e(e,n):n9(isNaN(e)?t:e)}const yH=function e(t){var n=FTt(t);function r(i,s){var a=n((i=ed(i)).r,(s=ed(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=Ds(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function N_e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=ed(t[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=e(r),i=e(i),s=e(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var MTt=N_e(A_e),LTt=N_e(__e);function bJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function D_e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PTt(e,t){return(D_e(t)?bJ:I_e)(e,t)}function I_e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Hm(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function O_e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function sc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function R_e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Hm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var bH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zj=new RegExp(bH.source,"g");function BTt(e){return function(){return e}}function zTt(e){return function(t){return e(t)+""}}function F_e(e,t){var n=bH.lastIndex=zj.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=bH.exec(e))&&(i=zj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:sc(r,i)})),n=zj.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?zTt(l[0].x):BTt(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function Hm(e,t){var n=typeof t,r;return t==null||n==="boolean"?n9(t):(n==="number"?sc:n==="string"?(r=jE(t))?(t=r,yH):F_e:t instanceof jE?yH:t instanceof Date?O_e:D_e(t)?bJ:Array.isArray(t)?I_e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?R_e:sc)(e,t)}function jTt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function UTt(e,t){var n=r9(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function j_(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var fpe=180/Math.PI,xH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function M_e(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*fpe,skewX:Math.atan(l)*fpe,scaleX:a,scaleY:o}}var cD;function VTt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xH:M_e(t.a,t.b,t.c,t.d,t.e,t.f)}function WTt(e){return e==null||(cD||(cD=document.createElementNS("http://www.w3.org/2000/svg","g")),cD.setAttribute("transform",e),!(e=cD.transform.baseVal.consolidate()))?xH:(e=e.matrix,M_e(e.a,e.b,e.c,e.d,e.e,e.f))}function L_e(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,h,m){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);m.push({i:g-4,x:sc(u,f)},{i:g-2,x:sc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:sc(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:sc(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,m){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:sc(u,f)},{i:g-2,x:sc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),o(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var m=-1,g=d.length,b;++m<g;)f[(b=d[m]).i]=b.x(h);return f.join("")}}}var HTt=L_e(VTt,"px, ","px)","deg)"),GTt=L_e(WTt,", ",")",")"),qTt=1e-12;function dpe(e){return((e=Math.exp(e))+1/e)/2}function XTt(e){return((e=Math.exp(e))-1/e)/2}function YTt(e){return((e=Math.exp(2*e))-1)/(e+1)}const KTt=function e(t,n,r){function i(s,a){var o=s[0],l=s[1],u=s[2],c=a[0],f=a[1],d=a[2],h=c-o,m=f-l,g=h*h+m*m,b,x;if(g<qTt)x=Math.log(d/u)/t,b=function(k){return[o+k*h,l+k*m,u*Math.exp(t*k*x)]};else{var w=Math.sqrt(g),C=(d*d-u*u+r*g)/(2*u*n*w),S=(d*d-u*u-r*g)/(2*d*n*w),E=Math.log(Math.sqrt(C*C+1)-C),A=Math.log(Math.sqrt(S*S+1)-S);x=(A-E)/t,b=function(k){var N=k*x,I=dpe(E),T=u/(n*w)*(I*YTt(t*N+E)-XTt(E));return[o+T*h,l+T*m,u*I/dpe(t*N+E)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return e(a,o,l)},i}(Math.SQRT2,2,4);function P_e(e){return function(t,n){var r=e((t=UE(t)).h,(n=UE(n)).h),i=Ds(t.s,n.s),s=Ds(t.l,n.l),a=Ds(t.opacity,n.opacity);return function(o){return t.h=r(o),t.s=i(o),t.l=s(o),t.opacity=a(o),t+""}}}const ZTt=P_e(r9);var QTt=P_e(Ds);function JTt(e,t){var n=Ds((e=VE(e)).l,(t=VE(t)).l),r=Ds(e.a,t.a),i=Ds(e.b,t.b),s=Ds(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=s(a),e+""}}function B_e(e){return function(t,n){var r=e((t=WE(t)).h,(n=WE(n)).h),i=Ds(t.c,n.c),s=Ds(t.l,n.l),a=Ds(t.opacity,n.opacity);return function(o){return t.h=r(o),t.c=i(o),t.l=s(o),t.opacity=a(o),t+""}}}const eNt=B_e(r9);var tNt=B_e(Ds);function z_e(e){return function t(n){n=+n;function r(i,s){var a=e((i=gH(i)).h,(s=gH(s)).h),o=Ds(i.s,s.s),l=Ds(i.l,s.l),u=Ds(i.opacity,s.opacity);return function(c){return i.h=a(c),i.s=o(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const nNt=z_e(r9);var rNt=z_e(Ds);function cb(e,t){t===void 0&&(t=e,e=Hm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function iNt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const U_=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Hm,interpolateArray:PTt,interpolateBasis:A_e,interpolateBasisClosed:__e,interpolateCubehelix:nNt,interpolateCubehelixLong:rNt,interpolateDate:O_e,interpolateDiscrete:jTt,interpolateHcl:eNt,interpolateHclLong:tNt,interpolateHsl:ZTt,interpolateHslLong:QTt,interpolateHue:UTt,interpolateLab:JTt,interpolateNumber:sc,interpolateNumberArray:bJ,interpolateObject:R_e,interpolateRgb:yH,interpolateRgbBasis:MTt,interpolateRgbBasisClosed:LTt,interpolateRound:j_,interpolateString:F_e,interpolateTransformCss:HTt,interpolateTransformSvg:GTt,interpolateZoom:KTt,piecewise:cb,quantize:iNt},Symbol.toStringTag,{value:"Module"}));function sNt(e){return function(){return e}}function vH(e){return+e}var hpe=[0,1];function Zo(e){return e}function wH(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:sNt(isNaN(t)?NaN:.5)}function aNt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function oNt(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=wH(i,r),s=n(a,s)):(r=wH(r,i),s=n(s,a)),function(o){return s(r(o))}}function lNt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=wH(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=Gi(e,o,1,r)-1;return s[l](i[l](o))}}function V_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function i9(){var e=hpe,t=hpe,n=Hm,r,i,s,a=Zo,o,l,u;function c(){var d=Math.min(e.length,t.length);return a!==Zo&&(a=aNt(e[0],e[d-1])),o=d>2?lNt:oNt,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=o(e.map(r),t,n)))(r(a(d)))}return f.invert=function(d){return a(i((u||(u=o(t,e.map(r),sc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,vH),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=j_,c()},f.clamp=function(d){return arguments.length?(a=d?!0:Zo,c()):a!==Zo},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function j_e(){return i9()(Zo,Zo)}function BR(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Zx(e){return e=BR(Math.abs(e)),e?e[1]:NaN}function uNt(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function cNt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var fNt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qx(e){return new xJ(e)}Qx.prototype=xJ.prototype;function xJ(e){if(!(t=fNt.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}xJ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dNt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(r>0){if(!+e[n])break e;r=0}break}return r>0?e.slice(0,r)+e.slice(i+1):e}var U_e;function hNt(e,t){var n=BR(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(U_e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+BR(e,Math.max(0,t+s-1))[0]}function ppe(e,t){var n=BR(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mpe={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return ppe(e*100,t)},r:ppe,s:hNt,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function gpe(e){return e}var ype=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function V_e(e){var t=e.grouping&&e.thousands?uNt(e.grouping,e.thousands):gpe,n=e.currency,r=e.decimal,i=e.numerals?cNt(e.numerals):gpe,s=e.percent||"%";function a(l){l=Qx(l);var u=l.fill,c=l.align,f=l.sign,d=l.symbol,h=l.zero,m=l.width,g=l.comma,b=l.precision,x=l.trim,w=l.type;w==="n"?(g=!0,w="g"):mpe[w]||(b==null&&(b=12),x=!0,w="g"),(h||u==="0"&&c==="=")&&(h=!0,u="0",c="=");var C=d==="$"?n[0]:d==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=d==="$"?n[1]:/[%p]/.test(w)?s:"",E=mpe[w],A=/[defgprs%]/.test(w);b=b==null?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(N){var I=C,T=S,D,L,P;if(w==="c")T=E(N)+T,N="";else{N=+N;var M=N<0;if(N=E(Math.abs(N),b),x&&(N=dNt(N)),M&&+N==0&&(M=!1),I=(M?f==="("?f:"-":f==="-"||f==="("?"":f)+I,T=(w==="s"?ype[8+U_e/3]:"")+T+(M&&f==="("?")":""),A){for(D=-1,L=N.length;++D<L;)if(P=N.charCodeAt(D),48>P||P>57){T=(P===46?r+N.slice(D+1):N.slice(D))+T,N=N.slice(0,D);break}}}g&&!h&&(N=t(N,1/0));var F=I.length+N.length+T.length,R=F<m?new Array(m-F+1).join(u):"";switch(g&&h&&(N=t(R+N,R.length?m-T.length:1/0),R=""),c){case"<":N=I+N+T+R;break;case"=":N=I+R+N+T;break;case"^":N=R.slice(0,F=R.length>>1)+I+N+T+R.slice(F);break;default:N=R+I+N+T;break}return i(N)}return k.toString=function(){return l+""},k}function o(l,u){var c=a((l=Qx(l),l.type="f",l)),f=Math.max(-8,Math.min(8,Math.floor(Zx(u)/3)))*3,d=Math.pow(10,-f),h=ype[8+f/3];return function(m){return c(d*m)+h}}return{format:a,formatPrefix:o}}var fD,s9,vJ;W_e({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function W_e(e){return fD=V_e(e),s9=fD.format,vJ=fD.formatPrefix,fD}function H_e(e){return Math.max(0,-Zx(Math.abs(e)))}function G_e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zx(t)/3)))*3-Zx(Math.abs(e)))}function q_e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zx(t)-Zx(e))+1}const pNt=Object.freeze(Object.defineProperty({__proto__:null,get format(){return s9},formatDefaultLocale:W_e,formatLocale:V_e,get formatPrefix(){return vJ},formatSpecifier:Qx,precisionFixed:H_e,precisionPrefix:G_e,precisionRound:q_e},Symbol.toStringTag,{value:"Module"}));function lS(e,t,n,r){var i=um(e,t,n),s;switch(r=Qx(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=G_e(i,a))&&(r.precision=s),vJ(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=q_e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=H_e(i))&&(r.precision=s-(r.type==="%")*2);break}}return s9(r)}function fb(e){var t=e.domain;return e.ticks=function(n){var r=t();return JW(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return lS(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);c-- >0;){if(u=eH(a,o,n),u===l)return r[i]=a,r[s]=o,t(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function uS(){var e=j_e();return e.copy=function(){return V_(e,uS())},pd.apply(e,arguments),fb(e)}function cS(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,vH),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return cS(e).unknown(t)},e=arguments.length?Array.from(e,vH):[0,1],fb(n)}function X_e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function bpe(e){return Math.log(e)}function xpe(e){return Math.exp(e)}function mNt(e){return-Math.log(-e)}function gNt(e){return-Math.exp(-e)}function yNt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bNt(e){return e===10?yNt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function xNt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function vpe(e){return(t,n)=>-e(-t,n)}function wJ(e){const t=e(bpe,xpe),n=t.domain;let r=10,i,s;function a(){return i=xNt(r),s=bNt(r),n()[0]<0?(i=vpe(i),s=vpe(s),e(mNt,gNt)):e(bpe,xpe),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),m,g;const b=o==null?10:+o;let x=[];if(!(r%1)&&h-d<b){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(m=1;m<r;++m)if(g=d<0?m/s(-d):m*s(d),!(g<u)){if(g>c)break;x.push(g)}}else for(;d<=h;++d)for(m=r-1;m>=1;--m)if(g=d>0?m/s(-d):m*s(d),!(g<u)){if(g>c)break;x.push(g)}x.length*2<b&&(x=JW(u,c,b))}else x=JW(d,h,Math.min(h-d,b)).map(s);return f?x.reverse():x},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Qx(l)).precision==null&&(l.trim=!0),l=s9(l)),o===1/0)return l;const u=Math.max(1,r*o/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(X_e(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function fS(){const e=wJ(i9()).domain([1,10]);return e.copy=()=>V_(e,fS()).base(e.base()),pd.apply(e,arguments),e}function wpe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Spe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SJ(e){var t=1,n=e(wpe(t),Spe(t));return n.constant=function(r){return arguments.length?e(wpe(t=+r),Spe(t)):t},fb(n)}function dS(){var e=SJ(i9());return e.copy=function(){return V_(e,dS()).constant(e.constant())},pd.apply(e,arguments)}function Cpe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vNt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wNt(e){return e<0?-e*e:e*e}function CJ(e){var t=e(Zo,Zo),n=1;function r(){return n===1?e(Zo,Zo):n===.5?e(vNt,wNt):e(Cpe(n),Cpe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},fb(t)}function db(){var e=CJ(i9());return e.copy=function(){return V_(e,db()).exponent(e.exponent())},pd.apply(e,arguments),e}function W_(){return db.apply(null,arguments).exponent(.5)}function hS(){var e=[],t=[],n=[],r;function i(){var a=0,o=Math.max(1,t.length);for(n=new Array(o-1);++a<o;)n[a-1]=xke(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:t[Gi(n,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Dh),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return hS().domain(e).range(t).unknown(r)},pd.apply(s,arguments)}function pS(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[Gi(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return pS().domain([e,t]).range(i).unknown(s)},pd.apply(fb(a),arguments)}function mS(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Gi(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return mS().domain(e).range(t).unknown(n)},pd.apply(i,arguments)}function SNt(e){return new Date(e)}function CNt(e){return e instanceof Date?+e:+new Date(+e)}function $J(e,t,n,r,i,s,a,o,l,u){var c=j_e(),f=c.invert,d=c.domain,h=u(".%L"),m=u(":%S"),g=u("%I:%M"),b=u("%I %p"),x=u("%a %d"),w=u("%b %d"),C=u("%B"),S=u("%Y");function E(A){return(l(A)<A?h:o(A)<A?m:a(A)<A?g:s(A)<A?b:r(A)<A?i(A)<A?x:w:n(A)<A?C:S)(A)}return c.invert=function(A){return new Date(f(A))},c.domain=function(A){return arguments.length?d(Array.from(A,CNt)):d().map(SNt)},c.ticks=function(A){var k=d();return e(k[0],k[k.length-1],A??10)},c.tickFormat=function(A,k){return k==null?E:u(k)},c.nice=function(A){var k=d();return(!A||typeof A.range!="function")&&(A=t(k[0],k[k.length-1],A??10)),A?d(X_e(k,A)):c},c.copy=function(){return V_(c,$J(e,t,n,r,i,s,a,o,l,u))},c}function H_(){return pd.apply($J(HEt,GEt,Zf,FE,eS,Ih,D8,T8,$h,rQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function G_(){return pd.apply($J(VEt,WEt,Qf,ME,tS,j0,I8,N8,$h,iQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a9(){var e=0,t=1,n,r,i,s,a=Zo,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function c(f){return function(d){var h,m;return arguments.length?([h,m]=d,a=f(h,m),u):[a(0),a(1)]}}return u.range=c(Hm),u.rangeRound=c(j_),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Gm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Fc(){var e=fb(a9()(Zo));return e.copy=function(){return Gm(e,Fc())},Vm.apply(e,arguments)}function gS(){var e=wJ(a9()).domain([1,10]);return e.copy=function(){return Gm(e,gS()).base(e.base())},Vm.apply(e,arguments)}function yS(){var e=SJ(a9());return e.copy=function(){return Gm(e,yS()).constant(e.constant())},Vm.apply(e,arguments)}function hb(){var e=CJ(a9());return e.copy=function(){return Gm(e,hb()).exponent(e.exponent())},Vm.apply(e,arguments)}function q_(){return hb.apply(null,arguments).exponent(.5)}function o9(){var e=0,t=.5,n=1,r=1,i,s,a,o,l,u=Zo,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-s)*(r*g<r*s?o:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),s=c(t=+t),a=c(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function m(g){return function(b){var x,w,C;return arguments.length?([x,w,C]=b,u=cb(g,[x,w,C]),h):[u(0),u(.5),u(1)]}}return h.range=m(Hm),h.rangeRound=m(j_),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),s=g(t),a=g(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,h}}function bS(){var e=fb(o9()(Zo));return e.copy=function(){return Gm(e,bS())},Vm.apply(e,arguments)}function xS(){var e=wJ(o9()).domain([.1,1,10]);return e.copy=function(){return Gm(e,xS()).base(e.base())},Vm.apply(e,arguments)}function vS(){var e=SJ(o9());return e.copy=function(){return Gm(e,vS()).constant(e.constant())},Vm.apply(e,arguments)}function pb(){var e=CJ(o9());return e.copy=function(){return Gm(e,pb()).exponent(e.exponent())},Vm.apply(e,arguments)}function X_(){return pb.apply(null,arguments).exponent(.5)}function md(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const l9=md("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),u9=md("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),c9=md("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),f9=md("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),d9=md("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),h9=md("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),p9=md("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),m9=md("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),g9=md("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),y9=md("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function $Nt(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const ENt="identity",EJ="linear",Jx="log",kJ="pow",AJ="sqrt",_J="symlog",kNt="time",ANt="utc",wS="sequential",Y_="diverging",$pe="quantile",_Nt="quantize",TNt="threshold",NNt="ordinal",DNt="point",INt="band",ONt="bin-ordinal",Xs="continuous",b9="discrete",x9="discretizing",Mc="interpolating",Y_e="temporal";function RNt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function FNt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function TJ(){const e=Rc().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=$Nt(f,o,l);let g=r[d-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(f-o))*u,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const b=Ts(f).map(x=>g+i*x);return n(d?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let g=+f[0],b=+f[1],x,w,C;if(!(g!==g||b!==b)&&(b<g&&(C=g,g=b,b=C),!(b<h[0]||g>r[1-d])))return x=Math.max(0,Gi(h,g)-1),w=g===b?x:Gi(h,b)-1,g-h[x]>s+1e-10&&++x,d&&(C=x,x=m-w,w=m-C),x>w?void 0:t().slice(x,w+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return TJ().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function K_e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return K_e(t())},e}function MNt(){return K_e(TJ().paddingInner(1))}var LNt=Array.prototype.map;function PNt(e){return LNt.call(e,Ti)}const BNt=Array.prototype.slice;function Z_e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Gi(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=PNt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=BNt.call(r),n):t.slice()},n.tickFormat=function(r,i){return lS(e[0],en(e),r??10,i)},n.copy=function(){return Z_e().domain(n.domain()).range(n.range())},n}const SH=new Map,zNt=Symbol("vega_scale");function jNt(e){return e[zNt]=!0,e}function UNt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?RNt(s):s.invertExtent?FNt(s):void 0),s.type=e,jNt(s)};return r.metadata=cs(vt(n)),r}function Fr(e,t,n){return arguments.length>1?(SH.set(e,UNt(e,t,n)),this):VNt(e)?SH.get(e):void 0}Fr(ENt,cS);Fr(EJ,uS,Xs);Fr(Jx,fS,[Xs,Jx]);Fr(kJ,db,Xs);Fr(AJ,W_,Xs);Fr(_J,dS,Xs);Fr(kNt,H_,[Xs,Y_e]);Fr(ANt,G_,[Xs,Y_e]);Fr(wS,Fc,[Xs,Mc]);Fr(`${wS}-${EJ}`,Fc,[Xs,Mc]);Fr(`${wS}-${Jx}`,gS,[Xs,Mc,Jx]);Fr(`${wS}-${kJ}`,hb,[Xs,Mc]);Fr(`${wS}-${AJ}`,q_,[Xs,Mc]);Fr(`${wS}-${_J}`,yS,[Xs,Mc]);Fr(`${Y_}-${EJ}`,bS,[Xs,Mc]);Fr(`${Y_}-${Jx}`,xS,[Xs,Mc,Jx]);Fr(`${Y_}-${kJ}`,pb,[Xs,Mc]);Fr(`${Y_}-${AJ}`,X_,[Xs,Mc]);Fr(`${Y_}-${_J}`,vS,[Xs,Mc]);Fr($pe,hS,[x9,$pe]);Fr(_Nt,pS,x9);Fr(TNt,mS,x9);Fr(ONt,Z_e,[b9,x9]);Fr(NNt,Rc,b9);Fr(INt,TJ,b9);Fr(DNt,MNt,b9);function VNt(e){return SH.has(e)}function WNt(e,t,n){return cb(HNt("rgb",n),e)}function HNt(e,t){const n=U_[GNt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function GNt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const qNt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},XNt={accent:u9,category10:l9,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:c9,observable10:f9,paired:d9,pastel1:h9,pastel2:p9,set1:m9,set2:g9,set3:y9,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Q_e(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function J_e(e,t){for(const n in e)YNt(n,t(e[n]))}const Epe={};J_e(XNt,Q_e);J_e(qNt,e=>WNt(Q_e(e)));function YNt(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Epe[e]=t,this):Epe[e]}function KNt(e){return e&&e.gradient}const kpe={basis:{curve:XQ},"basis-closed":{curve:YQ},"basis-open":{curve:KQ},bundle:{curve:ZQ,tension:"beta",value:.85},cardinal:{curve:JQ,tension:"tension",value:0},"cardinal-open":{curve:rJ,tension:"tension",value:0},"cardinal-closed":{curve:tJ,tension:"tension",value:0},"catmull-rom":{curve:sJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:aJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:oJ,tension:"alpha",value:.5},linear:{curve:B_},"linear-closed":{curve:lJ},monotone:{horizontal:cJ,vertical:uJ},natural:{curve:fJ},step:{curve:dJ},"step-after":{curve:pJ},"step-before":{curve:hJ}};function eTe(e,t,n){var r=gt(kpe,e)&&kpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const ZNt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},QNt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,JNt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,e4t=/^((\s+,?\s*)|(,\s*))/,t4t=/^[01]/;function tTe(e){const t=[];return(e.match(QNt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),a=ZNt[s],o=n4t(s,a,r.slice(1).trim()),l=o.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...o.slice(0,a)]),l!==a){s==="m"&&(i=i==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([i,...o.slice(u,u+a)])}}),t}function n4t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?t4t:JNt,o=n.slice(i).match(a);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const l=n.slice(i).match(e4t);l!==null&&(i+=l[0].length)}return r}const dm=Math.PI/180,r4t=1e-14,f1=Math.PI/2,wf=Math.PI*2,$2=Math.sqrt(3)/2;var jj={},Uj={},nTe=[].join;function i4t(e,t,n,r,i,s,a,o,l){const u=nTe.call(arguments);if(jj[u])return jj[u];const c=a*dm,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(o-e)*.5+f*(l-t)*.5,m=d*(l-t)*.5-f*(o-e)*.5;let g=h*h/(n*n)+m*m/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const b=d/n,x=f/n,w=-f/r,C=d/r,S=b*o+x*l,E=w*o+C*l,A=b*e+x*t,k=w*e+C*t;let I=1/((A-S)*(A-S)+(k-E)*(k-E))-.25;I<0&&(I=0);let T=Math.sqrt(I);s==i&&(T=-T);const D=.5*(S+A)-T*(k-E),L=.5*(E+k)+T*(A-S),P=Math.atan2(E-L,S-D);let F=Math.atan2(k-L,A-D)-P;F<0&&s===1?F+=wf:F>0&&s===0&&(F-=wf);const R=Math.ceil(Math.abs(F/(f1+.001))),j=[];for(let H=0;H<R;++H){const G=P+H*F/R,z=P+(H+1)*F/R;j[H]=[D,L,G,z,n,r,f,d]}return jj[u]=j}function s4t(e){const t=nTe.call(e);if(Uj[t])return Uj[t];var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7];const c=u*a,f=-l*o,d=l*a,h=u*o,m=Math.cos(i),g=Math.sin(i),b=Math.cos(s),x=Math.sin(s),w=.5*(s-i),C=Math.sin(w*.5),S=8/3*C*C/Math.sin(w),E=n+m-S*g,A=r+g+S*m,k=n+b,N=r+x,I=k+S*x,T=N-S*b;return Uj[t]=[c*E+f*A,d*E+h*A,c*I+f*T,d*I+h*T,c*k+f*N,d*k+h*N]}const su=["l",0,0,0,0,0,0,0];function a4t(e,t,n){const r=su[0]=e[0];if(r==="a"||r==="A")su[1]=t*e[1],su[2]=n*e[2],su[3]=e[3],su[4]=e[4],su[5]=e[5],su[6]=t*e[6],su[7]=n*e[7];else if(r==="h"||r==="H")su[1]=t*e[1];else if(r==="v"||r==="V")su[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)su[i]=(i%2==1?t:n)*e[i];return su}function CH(e,t,n,r,i,s){var a,o=null,l=0,u=0,c=0,f=0,d,h,m,g,b=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var w=0,C=t.length;w<C;++w){switch(a=t[w],(i!==1||s!==1)&&(a=a4t(a,i,s)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+r);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+r);break;case"h":l+=a[1],e.lineTo(l+n,u+r);break;case"H":l=a[1],e.lineTo(l+n,u+r);break;case"v":u+=a[1],e.lineTo(l+n,u+r);break;case"V":u=a[1],e.lineTo(l+n,u+r);break;case"m":l+=a[1],u+=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"M":l=a[1],u=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"c":d=l+a[5],h=u+a[6],c=l+a[3],f=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=a[5],u=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+a[3],h=u+a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+a[1]+n,u+a[2]+r,d+n,h+r),c=l+a[1],f=u+a[2],l=d,u=h;break;case"S":d=a[3],h=a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,a[1]+n,a[2]+r,d+n,h+r),l=d,u=h,c=a[1],f=a[2];break;case"q":d=l+a[3],h=u+a[4],c=l+a[1],f=u+a[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,h+r),l=d,u=h,c=a[1],f=a[2];break;case"t":d=l+a[1],h=u+a[2],o[0].match(/[QqTt]/)===null?(c=l,f=u):o[0]==="t"?(c=2*l-m,f=2*u-g):o[0]==="q"&&(c=2*l-c,f=2*u-f),m=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+a[1],f=u+a[2];break;case"T":d=a[1],h=a[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":Ape(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+r]),l+=a[6],u+=a[7];break;case"A":Ape(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],u=a[7];break;case"z":case"Z":l=b,u=x,e.closePath();break}o=a}}function Ape(e,t,n,r){const i=i4t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const a=s4t(i[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const _pe=.5773502691896257,Tpe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,wf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=$2*n,i=r-n*_pe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=$2*n,i=r-n*_pe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=$2*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=$2*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=$2*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=$2*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function o4t(e){return gt(Tpe,e)?Tpe[e]:l4t(e)}var Vj={};function l4t(e){if(!gt(Vj,e)){const t=tTe(e);Vj[e]={draw:function(n,r){CH(n,t,0,0,Math.sqrt(r)/2)}}}return Vj[e]}const Zp=.448084975506;function u4t(e){return e.x}function c4t(e){return e.y}function f4t(e){return e.width}function d4t(e){return e.height}function Zd(e){return typeof e=="function"?e:()=>+e}function dD(e,t,n){return Math.max(t,Math.min(e,n))}function h4t(){var e=u4t,t=c4t,n=f4t,r=d4t,i=Zd(0),s=i,a=i,o=i,l=null;function u(c,f,d){var h,m=f??+e.call(this,c),g=d??+t.call(this,c),b=+n.call(this,c),x=+r.call(this,c),w=Math.min(b,x)/2,C=dD(+i.call(this,c),0,w),S=dD(+s.call(this,c),0,w),E=dD(+a.call(this,c),0,w),A=dD(+o.call(this,c),0,w);if(l||(l=h=Um()),C<=0&&S<=0&&E<=0&&A<=0)l.rect(m,g,b,x);else{var k=m+b,N=g+x;l.moveTo(m+C,g),l.lineTo(k-S,g),l.bezierCurveTo(k-Zp*S,g,k,g+Zp*S,k,g+S),l.lineTo(k,N-A),l.bezierCurveTo(k,N-Zp*A,k-Zp*A,N,k-A,N),l.lineTo(m+E,N),l.bezierCurveTo(m+Zp*E,N,m,N-Zp*E,m,N-E),l.lineTo(m,g+C),l.bezierCurveTo(m,g+Zp*C,m+Zp*C,g,m+C,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Zd(c),u):e},u.y=function(c){return arguments.length?(t=Zd(c),u):t},u.width=function(c){return arguments.length?(n=Zd(c),u):n},u.height=function(c){return arguments.length?(r=Zd(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=Zd(c),s=f!=null?Zd(f):i,o=d!=null?Zd(d):i,a=h!=null?Zd(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function p4t(){var e,t,n,r,i=null,s,a,o,l;function u(f,d,h){const m=h/2;if(s){var g=o-d,b=f-a;if(g||b){var x=Math.hypot(g,b),w=(g/=x)*l,C=(b/=x)*l,S=Math.atan2(b,g);i.moveTo(a-w,o-C),i.lineTo(f-g*m,d-b*m),i.arc(f,d,m,S-Math.PI,S),i.lineTo(a+w,o+C),i.arc(a,o,l,S,S+Math.PI)}else i.arc(f,d,m,0,wf);i.closePath()}else s=1;a=f,o=d,l=m}function c(f){var d,h=f.length,m,g=!1,b;for(i==null&&(i=b=Um()),d=0;d<=h;++d)!(d<h&&r(m=f[d],d,f))===g&&(g=!g)&&(s=0),g&&u(+e(m,d,f),+t(m,d,f),+n(m,d,f));if(b)return i=null,b+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function K_(e,t){return e??t}const Z_=e=>e.x||0,Q_=e=>e.y||0,m4t=e=>e.width||0,g4t=e=>e.height||0,y4t=e=>(e.x||0)+(e.width||0),b4t=e=>(e.y||0)+(e.height||0),x4t=e=>e.startAngle||0,v4t=e=>e.endAngle||0,w4t=e=>e.padAngle||0,S4t=e=>e.innerRadius||0,C4t=e=>e.outerRadius||0,$4t=e=>e.cornerRadius||0,E4t=e=>K_(e.cornerRadiusTopLeft,e.cornerRadius)||0,k4t=e=>K_(e.cornerRadiusTopRight,e.cornerRadius)||0,A4t=e=>K_(e.cornerRadiusBottomRight,e.cornerRadius)||0,_4t=e=>K_(e.cornerRadiusBottomLeft,e.cornerRadius)||0,T4t=e=>K_(e.size,64),N4t=e=>e.size||1,v9=e=>e.defined!==!1,D4t=e=>o4t(e.shape||"circle"),I4t=GQ().startAngle(x4t).endAngle(v4t).padAngle(w4t).innerRadius(S4t).outerRadius(C4t).cornerRadius($4t),O4t=aS().x(Z_).y1(Q_).y0(b4t).defined(v9),R4t=aS().y(Q_).x1(Z_).x0(y4t).defined(v9),F4t=Q8().x(Z_).y(Q_).defined(v9),M4t=h4t().x(Z_).y(Q_).width(m4t).height(g4t).cornerRadius(E4t,k4t,A4t,_4t),L4t=qQ().type(D4t).size(T4t),P4t=p4t().x(Z_).y(Q_).defined(v9).size(N4t);function NJ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function B4t(e,t){return I4t.context(e)(t)}function z4t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?R4t:O4t).curve(eTe(r,n.orient,n.tension)).context(e)(t)}function j4t(e,t){const n=t[0],r=n.interpolate||"linear";return F4t.curve(eTe(r,n.orient,n.tension)).context(e)(t)}function SS(e,t,n,r){return M4t.context(e)(t,n,r)}function U4t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function V4t(e,t){return L4t.context(e)(t)}function W4t(e,t){return P4t.context(e)(t)}var H4t=1;function G4t(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+H4t++),a=i.clipping[s]||(i.clipping[s]={id:s});return Wt(r)?a.path=r(null):NJ(n)?a.path=SS(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function td(e){this.clear(),e&&this.union(e)}td.prototype={clone(){return new td(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),u=t-t*o+n*l,c=n-t*l-n*o;return[o*r-l*i+u,l*r+o*i+c,o*r-l*a+u,l*r+o*a+c,o*s-l*i+u,l*s+o*i+c,o*s-l*a+u,l*s+o*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function DJ(e){this.mark=e,this.bounds=this.bounds||new td}function rTe(e){DJ.call(this,e),this.items=this.items||[]}Ve(rTe,DJ);function qm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?q4t(t,r):0))}return e}function q4t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const X4t=wf-1e-8;let w9,WI,HI,T1,$H,GI,EH,kH;const E0=(e,t)=>w9.add(e,t),qI=(e,t)=>E0(WI=e,HI=t),Npe=e=>E0(e,w9.y1),Dpe=e=>E0(w9.x1,e),d1=(e,t)=>$H*e+EH*t,h1=(e,t)=>GI*e+kH*t,Wj=(e,t)=>E0(d1(e,t),h1(e,t)),Hj=(e,t)=>qI(d1(e,t),h1(e,t));function S9(e,t){return w9=e,t?(T1=t*dm,$H=kH=Math.cos(T1),GI=Math.sin(T1),EH=-GI):($H=kH=1,T1=GI=EH=0),Y4t}const Y4t={beginPath(){},closePath(){},moveTo:Hj,lineTo:Hj,rect(e,t,n,r){T1?(Wj(e+n,t),Wj(e+n,t+r),Wj(e,t+r),Hj(e,t)):(E0(e+n,t+r),qI(e,t))},quadraticCurveTo(e,t,n,r){const i=d1(e,t),s=h1(e,t),a=d1(n,r),o=h1(n,r);Ipe(WI,i,a,Npe),Ipe(HI,s,o,Dpe),qI(a,o)},bezierCurveTo(e,t,n,r,i,s){const a=d1(e,t),o=h1(e,t),l=d1(n,r),u=h1(n,r),c=d1(i,s),f=h1(i,s);Ope(WI,a,l,c,Npe),Ope(HI,o,u,f,Dpe),qI(c,f)},arc(e,t,n,r,i,s){if(r+=T1,i+=T1,WI=n*Math.cos(i)+e,HI=n*Math.sin(i)+t,Math.abs(i-r)>X4t)E0(e-n,t-n),E0(e+n,t+n);else{const a=u=>E0(n*Math.cos(u)+e,n*Math.sin(u)+t);let o,l;if(a(r),a(i),i!==r)if(r=r%wf,r<0&&(r+=wf),i=i%wf,i<0&&(i+=wf),i<r&&(s=!s,o=r,r=i,i=o),s)for(i-=wf,o=r-r%f1,l=0;l<4&&o>i;++l,o-=f1)a(o);else for(o=r-r%f1+f1,l=0;l<4&&o<i;++l,o=o+f1)a(o)}}};function Ipe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Ope(e,t,n,r,i){const s=r-e+3*t-3*n,a=e+n-2*t,o=e-t;let l=0,u=0,c;Math.abs(s)>r4t?(c=a*a+o*s,c>=0&&(c=Math.sqrt(c),l=(-a+c)/s,u=(-a-c)/s)):l=.5*o/a,0<l&&l<1&&i(Rpe(l,e,t,n,r)),0<u&&u<1&&i(Rpe(u,e,t,n,r))}function Rpe(e,t,n,r,i){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*r+o*e*i}var V0=(V0=Eu(1,1))?V0.getContext("2d"):null;const AH=new td;function iTe(e){return function(t,n){if(!V0)return!0;e(V0,t),AH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:a}=AH;for(let o=i;o<=a;++o)for(let l=r;l<=s;++l)if(V0.isPointInPath(l,o))return!0;return!1}}function sTe(e,t){return t.contains(e.x||0,e.y||0)}function aTe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(AH.set(n,r,n+i,r+s))}function K4t(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return a$(t,n,r,i,s)}function a$(e,t,n,r,i){const{x1:s,y1:a,x2:o,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,m,g,b;for(b=0;b<4;++b){if(b===0&&(h=-u,m=-(s-t)),b===1&&(h=u,m=o-t),b===2&&(h=-c,m=-(a-n)),b===3&&(h=c,m=l-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function ev(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Zu(e,t){return e??t}function Fpe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Z4t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Zu(t.x1,.5)*r,n.y1+Zu(t.y1,.5)*i,Math.max(r,i)*Zu(t.r1,0),n.x1+Zu(t.x2,.5)*r,n.y1+Zu(t.y2,.5)*i,Math.max(r,i)*Zu(t.r2,.5));else{const a=Zu(t.x1,0),o=Zu(t.y1,0),l=Zu(t.x2,1),u=Zu(t.y2,0);if(a===l||o===u||r===i)s=e.createLinearGradient(n.x1+a*r,n.y1+o*i,n.x1+l*r,n.y1+u*i);else{const c=Eu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Fpe(f.createLinearGradient(a,o,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Fpe(s,t.stops)}function oTe(e,t,n){return KNt(n)?Z4t(e,n,t.bounds):n}function zR(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=oTe(e,t,t.fill),!0):!1}var Q4t=[];function tv(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=oTe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Q4t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function J4t(e,t){return e.zindex-t.zindex||e.index-t.index}function lTe(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(J4t)}function nv(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=lTe(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function _H(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=lTe(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function IJ(e){return function(t,n,r){nv(n,i=>{(!r||r.intersects(i.bounds))&&uTe(e,t,i,i)})}}function eDt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&uTe(e,t,n.items[0],n.items)}}function uTe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ev(t,n),n.fill&&zR(t,n,i)&&t.fill(),n.stroke&&tv(t,n,i)&&t.stroke()))}function C9(e){return e=e||zs,function(t,n,r,i,s,a){return r*=t.pixelRatio,i*=t.pixelRatio,_H(n,o=>{const l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&e(t,o,r,i,s,a))return o})}}function J_(e,t){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,o=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:o&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function OJ(e){return C9(J_(e))}function q1(e,t){return"translate("+e+","+t+")"}function RJ(e){return"rotate("+e+")"}function tDt(e,t){return"scale("+e+","+t+")"}function cTe(e){return q1(e.x||0,e.y||0)}function nDt(e){return q1(e.x||0,e.y||0)+(e.angle?" "+RJ(e.angle):"")}function rDt(e){return q1(e.x||0,e.y||0)+(e.angle?" "+RJ(e.angle):"")+(e.scaleX||e.scaleY?" "+tDt(e.scaleX||1,e.scaleY||1):"")}function FJ(e,t,n){function r(a,o){a("transform",nDt(o)),a("d",t(null,o))}function i(a,o){return t(S9(a,o.angle),o),qm(a,o).translate(o.x||0,o.y||0)}function s(a,o){var l=o.x||0,u=o.y||0,c=o.angle||0;a.translate(l,u),c&&a.rotate(c*=dm),a.beginPath(),t(a,o),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:IJ(s),pick:OJ(s),isect:n||iTe(s)}}var iDt=FJ("arc",B4t);function sDt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,a,o;--i>=0;)e[i].defined!==!1&&(o=Math.abs(e[i][r]-n),o<s&&(s=o,a=e[i]));return a}function aDt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],a=i*i+s*s,a<n))return e[r];return null}function oDt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function MJ(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(S9(l),c),qm(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const a=J_(s);function o(l,u,c,f,d,h){var m=u.items,g=u.bounds;return!m||!m.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,a(l,m,c,f)?m[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:eDt(s),pick:o,isect:sTe,tip:n}}var lDt=MJ("area",z4t,sDt);function uDt(e,t){e.beginPath(),NJ(t)?SS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function fTe(e){const t=Zu(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function cDt(e,t){e("transform",cTe(t))}function dTe(e,t){const n=fTe(t);e("d",SS(null,t,n,n))}function fDt(e,t){e("class","background"),e("aria-hidden",!0),dTe(e,t)}function dDt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?dTe(e,t):e("d","")}function hDt(e,t,n){const r=t.clip?G4t(n,t,t):null;e("clip-path",r)}function pDt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),qm(e,t),e.translate(t.x||0,t.y||0)}function GE(e,t,n,r){const i=fTe(t);e.beginPath(),SS(e,t,(n||0)+i,(r||0)+i)}const mDt=J_(GE),gDt=J_(GE,!1),yDt=J_(GE,!0);function bDt(e,t,n,r){nv(t,i=>{const s=i.x||0,a=i.y||0,o=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(GE(e,i,s,a),ev(e,i),i.fill&&zR(e,i,l)&&e.fill(),i.stroke&&!o&&tv(e,i,l)&&e.stroke()),e.save(),e.translate(s,a),i.clip&&uDt(e,i),n&&n.translate(-s,-a),nv(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,a),e.restore(),o&&i.stroke&&l&&(GE(e,i,s,a),ev(e,i),tv(e,i,l)&&e.stroke())})}function xDt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const a=n*e.pixelRatio,o=r*e.pixelRatio;return _H(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,s))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),m=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||s<f||s>m))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,g&&NJ(l)&&!yDt(e,l,a,o))return e.restore(),null;const b=l.strokeForeground,x=t.interactive!==!1;return x&&b&&l.stroke&&gDt(e,l,a,o)?(e.restore(),l):(u=_H(l,w=>vDt(w,c,f)?this.pick(w,n,r,c,f):null),!u&&x&&(l.fill||!b&&l.stroke)&&mDt(e,l,a,o)&&(u=l),e.restore(),u||null)})}function vDt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var wDt={type:"group",tag:"g",nested:!1,attr:cDt,bound:pDt,draw:bDt,pick:xDt,isect:aTe,content:hDt,background:fDt,foreground:dDt},SDt={"xmlns:xlink":"http://www.w3.org/1999/xlink"};function LJ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function PJ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function BJ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function $9(e,t){return e==="center"?t/2:e==="right"?t:0}function E9(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function CDt(e,t,n){const r=LJ(t,n),i=PJ(t,r),s=BJ(t,r),a=(t.x||0)-$9(t.align,i),o=(t.y||0)-E9(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,SDt["xmlns:xlink"],"xlink:href"),e("transform",q1(a,o)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function $Dt(e,t){const n=t.image,r=PJ(t,n),i=BJ(t,n),s=(t.x||0)-$9(t.align,r),a=(t.y||0)-E9(t.baseline,i);return e.set(s,a,s+r,a+i)}function EDt(e,t,n){nv(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=LJ(r,this);let s=PJ(r,i),a=BJ(r,i);if(s===0||a===0)return;let o=(r.x||0)-$9(r.align,s),l=(r.y||0)-E9(r.baseline,a),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,l+=(a-d)/2,a=d):(d=a*c,o+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(ev(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,o,l,s,a))})}var kDt={type:"image",tag:"image",nested:!1,attr:CDt,bound:$Dt,draw:EDt,pick:C9(),isect:zs,get:LJ,xOffset:$9,yOffset:E9},ADt=MJ("line",j4t,aDt);function _Dt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",rDt(t)),e("d",t.path)}function XI(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*dm,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=tTe(n)).path=n),o&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(o),CH(e,l,0,0,s,a),e.rotate(-o),e.translate(-r,-i)):CH(e,l,r,i,s,a)}function TDt(e,t){return XI(S9(e,t.angle),t)?e.set(0,0,0,0):qm(e,t,!0)}var NDt={type:"path",tag:"path",nested:!1,attr:_Dt,bound:TDt,draw:IJ(XI),pick:OJ(XI),isect:iTe(XI)};function DDt(e,t){e("d",SS(null,t))}function IDt(e,t){var n,r;return qm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Mpe(e,t){e.beginPath(),SS(e,t)}var ODt={type:"rect",tag:"path",nested:!1,attr:DDt,bound:IDt,draw:IJ(Mpe),pick:OJ(Mpe),isect:aTe};function RDt(e,t){e("transform",cTe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function FDt(e,t){var n,r;return qm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function hTe(e,t,n){var r,i,s,a;return t.stroke&&tv(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,a),!0):!1}function MDt(e,t,n){nv(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&hTe(e,r,i)&&(ev(e,r),e.stroke())}})}function LDt(e,t,n,r){return e.isPointInStroke?hTe(e,t,1)&&e.isPointInStroke(n,r):!1}var PDt={type:"rule",tag:"line",nested:!1,attr:RDt,bound:FDt,draw:MDt,pick:C9(LDt),isect:K4t},BDt=FJ("shape",U4t),zDt=FJ("symbol",V4t,sTe);const Lpe=E8();var X1={height:mb,measureWidth:zJ,estimateWidth:jR,width:jR,canvas:pTe};pTe(!0);function pTe(e){X1.width=e&&V0?zJ:jR}function jR(e,t){return mTe(UR(e,t),mb(e))}function mTe(e,t){return~~(.8*e.length*t)}function zJ(e,t){return mb(e)<=0||!(t=UR(e,t))?0:gTe(t,UJ(e))}function gTe(e,t){const n=`(${t}) ${e}`;let r=Lpe.get(n);return r===void 0&&(V0.font=t,r=V0.measureText(e).width,Lpe.set(n,r)),r}function mb(e){return e.fontSize!=null?+e.fontSize||0:11}function qE(e){return e.lineHeight!=null?e.lineHeight:mb(e)+2}function jDt(e){return Qe(e)?e.length>1?e:e[0]:e}function jJ(e){return jDt(e.lineBreak&&e.text&&!Qe(e.text)?e.text.split(e.lineBreak):e.text)}function yTe(e){const t=jJ(e);return(Qe(t)?t.length-1:0)*qE(e)}function UR(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?VDt(e,n):n}function UDt(e){if(X1.width===zJ){const t=UJ(e);return n=>gTe(n,t)}else if(X1.width===jR){const t=mb(e);return n=>mTe(n,t)}else return t=>X1.width(e,t)}function VDt(e,t){var n=+e.limit,r=UDt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",a=0,o=t.length,l;if(n-=r(i),s){for(;a<o;)l=a+o>>>1,r(t.slice(l))>n?a=l+1:o=l;return i+t.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),r(t.slice(0,l))<n?a=l:o=l-1;return t.slice(0,a)+i}}function WDt(e,t){var n=e.font;return n||"sans-serif"}function UJ(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+mb(e)+"px "+WDt(e)}function VJ(e){var t=e.baseline,n=mb(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*qE(e):t==="line-bottom"?.29*n-.5*qE(e):0)}const HDt={left:"start",center:"middle",right:"end"},F$=new td;function k9(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-f1,t+=r*Math.cos(i),n+=r*Math.sin(i)),F$.x1=t,F$.y1=n,F$}function GDt(e,t){var n=t.dx||0,r=(t.dy||0)+VJ(t),i=k9(t),s=i.x1,a=i.y1,o=t.angle||0,l;e("text-anchor",HDt[t.align]||"start"),o?(l=q1(s,a)+" "+RJ(o),(n||r)&&(l+=" "+q1(n,r))):l=q1(s+n,a+r),e("transform",l)}function WJ(e,t,n){var r=X1.height(t),i=t.align,s=k9(t),a=s.x1,o=s.y1,l=t.dx||0,u=(t.dy||0)+VJ(t)-Math.round(.8*r),c=jJ(t),f;if(Qe(c)?(r+=qE(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,X1.width(t,h)),0)):f=X1.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=a,u+=o,l+f,u+r),t.angle&&!n)e.rotate(t.angle*dm,a,o);else if(n===2)return e.rotatedPoints(t.angle*dm,a,o);return e}function qDt(e,t,n){nv(t,r=>{var i=r.opacity==null?1:r.opacity,s,a,o,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=UJ(r),e.textAlign=r.align||"left",s=k9(r),a=s.x1,o=s.y1,r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*dm),a=o=0),a+=r.dx||0,o+=(r.dy||0)+VJ(r),c=jJ(r),ev(e,r),Qe(c))for(u=qE(r),l=0;l<c.length;++l)f=UR(r,c[l]),r.fill&&zR(e,r,i)&&e.fillText(f,a,o),r.stroke&&tv(e,r,i)&&e.strokeText(f,a,o),o+=u;else f=UR(r,c),r.fill&&zR(e,r,i)&&e.fillText(f,a,o),r.stroke&&tv(e,r,i)&&e.strokeText(f,a,o);r.angle&&e.restore()}})}function XDt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=k9(t),o=a.x1,l=a.y1,u=WJ(F$,t,1),c=-t.angle*dm,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(o-f*o+d*l),m=d*i+f*s+(l-d*o-f*l);return u.contains(h,m)}function YDt(e,t){const n=WJ(F$,e,2);return a$(t,n[0],n[1],n[2],n[3])||a$(t,n[0],n[1],n[4],n[5])||a$(t,n[4],n[5],n[6],n[7])||a$(t,n[2],n[3],n[6],n[7])}var KDt={type:"text",tag:"text",nested:!1,attr:GDt,bound:WJ,draw:qDt,pick:C9(XDt),isect:YDt},ZDt=MJ("trail",W4t,oDt),QDt={arc:iDt,area:lDt,group:wDt,image:kDt,line:ADt,path:NDt,rect:ODt,rule:PDt,shape:BDt,symbol:zDt,text:KDt,trail:ZDt};cs(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]);const Gj=new td;function JDt(e){const t=e.clip;if(Wt(t))t(S9(Gj.clear()));else if(t)Gj.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(Gj)}const rv="top",lc="left",fc="right",hm="bottom",eIt="top-left",tIt="top-right",nIt="bottom-left",rIt="bottom-right",HJ="start",TH="middle",to="end",iIt="x",sIt="y",A9="group",GJ="axis",qJ="title",aIt="frame",oIt="scope",XJ="legend",bTe="row-header",xTe="row-footer",vTe="row-title",wTe="column-header",STe="column-footer",CTe="column-title",lIt="padding",uIt="symbol",$Te="fit",ETe="fit-x",kTe="fit-y",cIt="pad",YJ="none",hD="all",NH="each",KJ="flush",k0="column",A0="row";function ATe(e){$e.call(this,null,e)}Ve(ATe,$e,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=QDt[i],a=s.bound;let o=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),o=pD(r,a),r.items.forEach(u=>{u.bounds.clear().union(o)});else if(i===A9||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),o.clear(),r.items.forEach(u=>o.union(pD(u,a))),r.role){case GJ:case XJ:case qJ:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{o.union(pD(u,a))}),t.visit(t.MOD,u=>{l=l||o.alignsWith(u.bounds),n.dirty(u),o.union(pD(u,a))}),l&&(o.clear(),r.items.forEach(u=>o.union(u.bounds)));return JDt(r),t.modifies("bounds")}});function pD(e,t,n){return t(e.bounds.clear(),e,n)}const Ppe=":vega_identifier:";function ZJ(e){$e.call(this,0,e)}ZJ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ve(ZJ,$e,{transform(e,t){const n=fIt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function fIt(e){return e._signals[Ppe]||(e._signals[Ppe]=e.add(0))}function _Te(e){$e.call(this,null,e)}Ve(_Te,$e,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,dIt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===A9?rTe:DJ;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function dIt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function TTe(e){$e.call(this,null,e)}const Bpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!NTe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},NTe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),zpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(NTe(i,s=e[n].bounds,t))return!0},hIt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},pIt=(e,t,n)=>{var r=e.range(),i=new td;return t===rv||t===hm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},jpe=e=>(e.forEach(t=>t.opacity=1),e),Upe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ve(TTe,$e,{transform(e,t){const n=Bpe[e.method]||Bpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(jpe(i),t=Upe(t,e)),t;if(i=i.filter(hIt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=jpe(i),t=Upe(t,e),s.length>=3&&zpe(s,r)){do s=n(s,r);while(s.length>=3&&zpe(s,r));s.length<3&&!en(i).opacity&&(s.length>1&&(en(s).opacity=0),en(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=pIt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{a(l)||(l.opacity=0)}));const o=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function DTe(e){$e.call(this,null,e)}Ve(DTe,$e,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const xa=new td;function Y2(e,t,n){return e[t]===n?0:(e[t]=n,1)}function mIt(e){var t=e.items[0].orient;return t===lc||t===fc}function gIt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function yIt(e,t,n,r){var i=t.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,o=i.orient,l=gIt(s),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,m=s.title&&i.items[l[2]].items[0],g=i.titlePadding,b=i.bounds,x=m&&yTe(m),w=0,C=0,S,E;switch(xa.clear().union(b),b.clear(),(S=l[0])>-1&&b.union(i.items[S].bounds),(S=l[1])>-1&&b.union(i.items[S].bounds),o){case rv:w=f||0,C=-c,E=Math.max(d,Math.min(h,-b.y1)),b.add(0,-E).add(u,0),m&&mD(e,m,E,g,x,0,-1,b);break;case lc:w=-c,C=f||0,E=Math.max(d,Math.min(h,-b.x1)),b.add(-E,0).add(0,u),m&&mD(e,m,E,g,x,1,-1,b);break;case fc:w=n+c,C=f||0,E=Math.max(d,Math.min(h,b.x2)),b.add(0,0).add(E,u),m&&mD(e,m,E,g,x,1,1,b);break;case hm:w=f||0,C=r+c,E=Math.max(d,Math.min(h,b.y2)),b.add(0,0).add(u,E),m&&mD(e,m,E,g,0,0,1,b);break;default:w=i.x,C=i.y}return qm(b.translate(w,C),i),Y2(i,"x",w+a)|Y2(i,"y",C+a)&&(i.bounds=xa,e.dirty(i),i.bounds=b,e.dirty(i)),i.mark.bounds.clear().union(b)}function mD(e,t,n,r,i,s,a,o){const l=t.bounds;if(t.auto){const u=a*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}o.union(l)}const Vpe=(e,t)=>Math.floor(Math.min(e,t)),Wpe=(e,t)=>Math.ceil(Math.max(e,t));function bIt(e){var t=e.items,n=t.length,r=0,i,s;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===A9)switch(i.role){case GJ:case XJ:case qJ:break;case bTe:a.rowheaders.push(...s);break;case xTe:a.rowfooters.push(...s);break;case wTe:a.colheaders.push(...s);break;case STe:a.colfooters.push(...s);break;case vTe:a.rowtitle=s[0];break;case CTe:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function xIt(e){return new td().set(0,0,e.width||0,e.height||0)}function vIt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function qr(e,t,n){const r=Ht(e)?e[t]:e;return r??(n!==void 0?n:0)}function Hpe(e){return e<0?Math.ceil(-e):0}function ITe(e,t,n){var r=!n.nodirty,i=n.bounds===KJ?xIt:vIt,s=xa.set(0,0,0,0),a=qr(n.align,k0),o=qr(n.align,A0),l=qr(n.padding,k0),u=qr(n.padding,A0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),m=Array(c),g=0,b=Array(d),x=Array(f),w=0,C=Array(d),S=Array(d),E=Array(d),A,k,N,I,T,D,L,P,M,F,R;for(k=0;k<c;++k)m[k]=0;for(k=0;k<f;++k)x[k]=0;for(k=0;k<d;++k)D=t[k],T=E[k]=i(D),D.x=D.x||0,C[k]=0,D.y=D.y||0,S[k]=0,N=k%c,I=~~(k/c),g=Math.max(g,L=Math.ceil(T.x2)),w=Math.max(w,P=Math.ceil(T.y2)),m[N]=Math.max(m[N],L),x[I]=Math.max(x[I],P),h[k]=l+Hpe(T.x1),b[k]=u+Hpe(T.y1),r&&e.dirty(t[k]);for(k=0;k<d;++k)k%c===0&&(h[k]=0),k<c&&(b[k]=0);if(a===NH)for(N=1;N<c;++N){for(R=0,k=N;k<d;k+=c)R<h[k]&&(R=h[k]);for(k=N;k<d;k+=c)h[k]=R+m[N-1]}else if(a===hD){for(R=0,k=0;k<d;++k)k%c&&R<h[k]&&(R=h[k]);for(k=0;k<d;++k)k%c&&(h[k]=R+g)}else for(a=!1,N=1;N<c;++N)for(k=N;k<d;k+=c)h[k]+=m[N-1];if(o===NH)for(I=1;I<f;++I){for(R=0,k=I*c,A=k+c;k<A;++k)R<b[k]&&(R=b[k]);for(k=I*c;k<A;++k)b[k]=R+x[I-1]}else if(o===hD){for(R=0,k=c;k<d;++k)R<b[k]&&(R=b[k]);for(k=c;k<d;++k)b[k]=R+w}else for(o=!1,I=1;I<f;++I)for(k=I*c,A=k+c;k<A;++k)b[k]+=x[I-1];for(M=0,k=0;k<d;++k)M=h[k]+(k%c?M:0),C[k]+=M-t[k].x;for(N=0;N<c;++N)for(F=0,k=N;k<d;k+=c)F+=b[k],S[k]+=F-t[k].y;if(a&&qr(n.center,k0)&&f>1)for(k=0;k<d;++k)T=a===hD?g:m[k%c],M=T-E[k].x2-t[k].x-C[k],M>0&&(C[k]+=M/2);if(o&&qr(n.center,A0)&&c!==1)for(k=0;k<d;++k)T=o===hD?w:x[~~(k/c)],F=T-E[k].y2-t[k].y-S[k],F>0&&(S[k]+=F/2);for(k=0;k<d;++k)s.union(E[k].translate(C[k],S[k]));switch(M=qr(n.anchor,iIt),F=qr(n.anchor,sIt),qr(n.anchor,k0)){case to:M-=s.width();break;case TH:M-=s.width()/2}switch(qr(n.anchor,A0)){case to:F-=s.height();break;case TH:F-=s.height()/2}for(M=Math.round(M),F=Math.round(F),s.clear(),k=0;k<d;++k)t[k].mark.bounds.clear();for(k=0;k<d;++k)D=t[k],D.x+=C[k]+=M,D.y+=S[k]+=F,s.union(D.mark.bounds.union(D.bounds.translate(C[k],S[k]))),r&&e.dirty(D);return s}function wIt(e,t,n){var r=bIt(t),i=r.marks,s=n.bounds===KJ?SIt:CIt,a=n.offset,o=n.columns||i.length,l=o<=0?1:Math.ceil(i.length/o),u=l*o,c,f,d,h,m,g,b;const x=ITe(e,i,n);x.empty()&&x.set(0,0,0,0),r.rowheaders&&(g=qr(n.headerBand,A0,null),c=gD(e,r.rowheaders,i,o,l,-qr(a,"rowHeader"),Vpe,0,s,"x1",0,o,1,g)),r.colheaders&&(g=qr(n.headerBand,k0,null),f=gD(e,r.colheaders,i,o,o,-qr(a,"columnHeader"),Vpe,1,s,"y1",0,1,o,g)),r.rowfooters&&(g=qr(n.footerBand,A0,null),d=gD(e,r.rowfooters,i,o,l,qr(a,"rowFooter"),Wpe,0,s,"x2",o-1,o,1,g)),r.colfooters&&(g=qr(n.footerBand,k0,null),h=gD(e,r.colfooters,i,o,o,qr(a,"columnFooter"),Wpe,1,s,"y2",u-o,1,o,g)),r.rowtitle&&(m=qr(n.titleAnchor,A0),b=qr(a,"rowTitle"),b=m===to?d+b:c-b,g=qr(n.titleBand,A0,.5),Gpe(e,r.rowtitle,b,0,x,g)),r.coltitle&&(m=qr(n.titleAnchor,k0),b=qr(a,"columnTitle"),b=m===to?h+b:f-b,g=qr(n.titleBand,k0,.5),Gpe(e,r.coltitle,b,1,x,g))}function SIt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function CIt(e,t){return e.bounds[t]}function gD(e,t,n,r,i,s,a,o,l,u,c,f,d,h){var m=n.length,g=0,b=0,x,w,C,S,E,A,k,N,I;if(!m)return g;for(x=c;x<m;x+=f)n[x]&&(g=a(g,l(n[x],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,w=0,S=t.length;w<S;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(x=c,w=0,S=t.length;w<S;++w,x+=f){for(A=t[w],E=A.mark.bounds,C=x;C>=0&&(k=n[C])==null;C-=d);o?(N=h==null?k.x:Math.round(k.bounds.x1+h*k.bounds.width()),I=g):(N=g,I=h==null?k.y:Math.round(k.bounds.y1+h*k.bounds.height())),E.union(A.bounds.translate(N-(A.x||0),I-(A.y||0))),A.x=N,A.y=I,e.dirty(A),b=a(b,E[u])}return b}function Gpe(e,t,n,r,i,s){if(t){e.dirty(t);var a=n,o=n;r?a=Math.round(i.x1+s*i.width()):o=Math.round(i.y1+s*i.height()),t.bounds.translate(a-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=o,e.dirty(t)}}function $It(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function EIt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function kIt(e,t,n,r,i,s,a){const o=$It(n,t),l=EIt(e,o("offset",0)),u=o("anchor",HJ),c=u===to?1:u===TH?.5:0,f={align:NH,bounds:o("bounds",KJ),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case lc:f.anchor={x:Math.floor(r.x1)-l,column:to,y:c*(a||r.height()+2*r.y1),row:u};break;case fc:f.anchor={x:Math.ceil(r.x2)+l,y:c*(a||r.height()+2*r.y1),row:u};break;case rv:f.anchor={y:Math.floor(i.y1)-l,row:to,x:c*(s||i.width()+2*i.x1),column:u};break;case hm:f.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case eIt:f.anchor={x:l,y:l};break;case tIt:f.anchor={x:s-l,y:l,column:to};break;case nIt:f.anchor={x:l,y:a-l,row:to};break;case rIt:f.anchor={x:s-l,y:a-l,column:to,row:to};break}return f}function AIt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,a=n.x,o=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),TIt(e,n,n.items[0].items[0]),s=_It(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===uIt&&NIt(n.items[0].items[0].items[0].items),i!==YJ&&(n.x=a=0,n.y=o=0),n.width=l,n.height=u,qm(s.set(a,o,a+l,o+u),n),n.mark.bounds.clear().union(s),n}function _It(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function TIt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&x3(e,n,i,s);else{var a=t.items[1].items[0],o=a.anchor,l=t.titlePadding||0,u=r-a.x,c=r-a.y;switch(a.orient){case lc:i+=Math.ceil(a.bounds.width())+l;break;case fc:case hm:break;default:s+=a.bounds.height()+l}switch((i||s)&&x3(e,n,i,s),a.orient){case lc:c+=E2(t,n,a,o,1,1);break;case fc:u+=E2(t,n,a,to,0,0)+l,c+=E2(t,n,a,o,1,1);break;case hm:u+=E2(t,n,a,o,0,0),c+=E2(t,n,a,to,-1,0,1)+l;break;default:u+=E2(t,n,a,o,0,0)}(u||c)&&x3(e,a,u,c),(u=Math.round(a.bounds.x1-r))<0&&(x3(e,n,-u,0),x3(e,a,-u,0))}}function E2(e,t,n,r,i,s,a){const o=e.datum.type!=="symbol",l=n.datum.vgrad,u=o&&(s||!l)&&!a?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&s?c:0,d=l&&s?0:c,h=i<=0?0:yTe(n);return Math.round(r===HJ?f:r===to?d-h:.5*(c-h))}function x3(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function NIt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function DIt(e,t,n,r,i){var s=t.items[0],a=s.frame,o=s.orient,l=s.anchor,u=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=o===lc||o===fc?r:n,m=0,g=0,b=0,x=0,w=0,C;if(a!==A9?o===lc?(m=i.y2,h=i.y1):o===fc?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):o===lc&&(m=r,h=0),C=l===HJ?m:l===to?h:(m+h)/2,d&&d.text){switch(o){case rv:case hm:w=f.bounds.height()+c;break;case lc:x=f.bounds.width()+c;break;case fc:x=-f.bounds.width()-c;break}xa.clear().union(d.bounds),xa.translate(x-(d.x||0),w-(d.y||0)),Y2(d,"x",x)|Y2(d,"y",w)&&(e.dirty(d),d.bounds.clear().union(xa),d.mark.bounds.clear().union(xa),e.dirty(d)),xa.clear().union(d.bounds)}else xa.clear();switch(xa.union(f.bounds),o){case rv:g=C,b=i.y1-xa.height()-u;break;case lc:g=i.x1-xa.width()-u,b=C;break;case fc:g=i.x2+xa.width()+u,b=C;break;case hm:g=C,b=i.y2+u;break;default:g=s.x,b=s.y}return Y2(s,"x",g)|Y2(s,"y",b)&&(xa.translate(g,b),e.dirty(s),s.bounds.clear().union(xa),t.bounds.clear().union(xa),e.dirty(s)),s.bounds}function OTe(e){$e.call(this,null,e)}Ve(OTe,$e,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&wIt(n,r,e.layout),OIt(n,r,e)}),IIt(e.mark.group)?t.reflow():t}});function IIt(e){return e&&e.mark.role!=="legend-entry"}function OIt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),a=new td().set(0,0,i,s),o=a.clone(),l=a.clone(),u=[],c,f,d,h,m,g;for(m=0,g=r.length;m<g;++m)switch(f=r[m],f.role){case GJ:h=mIt(f)?o:l,h.union(yIt(e,f,i,s));break;case qJ:c=f;break;case XJ:u.push(AIt(e,f));break;case aIt:case oIt:case bTe:case xTe:case vTe:case wTe:case STe:case CTe:o.union(f.bounds),l.union(f.bounds);break;default:a.union(f.bounds)}if(u.length){const b={};u.forEach(x=>{d=x.orient||fc,d!==YJ&&(b[d]||(b[d]=[])).push(x)});for(const x in b){const w=b[x];ITe(e,w,kIt(w,x,n.legends,o,l,i,s))}u.forEach(x=>{const w=x.bounds;if(w.equals(x._bounds)||(x.bounds=x._bounds,e.dirty(x),x.bounds=w,e.dirty(x)),n.autosize&&(n.autosize.type===$Te||n.autosize.type===ETe||n.autosize.type===kTe))switch(x.orient){case lc:case fc:a.add(w.x1,0).add(w.x2,0);break;case rv:case hm:a.add(0,w.y1).add(0,w.y2)}else a.union(w)})}a.union(o).union(l),c&&a.union(DIt(e,c,i,s,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),RIt(e,t,a,n)}function RIt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let a=e._width,o=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===lIt){const m=e.padding();a-=m.left+m.right,o-=m.top+m.bottom}s===YJ?(u=0,f=0,l=a,c=o):s===$Te?(l=Math.max(0,a-u-d),c=Math.max(0,o-f-h)):s===ETe?(l=Math.max(0,a-u-d),o=c+f+h):s===kTe?(a=l+u+d,c=Math.max(0,o-f-h)):s===cIt&&(a=l+u+d,o=c+f+h),e._resizeView(a,o,l,c,[u,f],i.resize)}const FIt=Object.freeze(Object.defineProperty({__proto__:null,bound:ATe,identifier:ZJ,mark:_Te,overlap:TTe,render:DTe,viewlayout:OTe},Symbol.toStringTag,{value:"Module"}));function QJ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const MIt="identity",iv="linear",Zh="log",eT="pow",tT="sqrt",_9="symlog",Ey="time",ky="utc",zf="sequential",CS="diverging",XE="quantile",T9="quantize",N9="threshold",JJ="ordinal",DH="point",RTe="band",eee="bin-ordinal",ps="continuous",nT="discrete",rT="discretizing",ju="interpolating",tee="temporal";function LIt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function PIt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function nee(){const e=Rc().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=QJ(f,o,l);let g=r[d-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(f-o))*u,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const b=Ts(f).map(x=>g+i*x);return n(d?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let g=+f[0],b=+f[1],x,w,C;if(!(g!==g||b!==b)&&(b<g&&(C=g,g=b,b=C),!(b<h[0]||g>r[1-d])))return x=Math.max(0,Gi(h,g)-1),w=g===b?x:Gi(h,b)-1,g-h[x]>s+1e-10&&++x,d&&(C=x,x=m-w,w=m-C),x>w?void 0:t().slice(x,w+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return nee().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function FTe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return FTe(t())},e}function BIt(){return FTe(nee().paddingInner(1))}var zIt=Array.prototype.map;function jIt(e){return zIt.call(e,Ti)}const UIt=Array.prototype.slice;function MTe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Gi(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=jIt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=UIt.call(r),n):t.slice()},n.tickFormat=function(r,i){return lS(e[0],en(e),r??10,i)},n.copy=function(){return MTe().domain(n.domain()).range(n.range())},n}const VR=new Map,LTe=Symbol("vega_scale");function VIt(e){return e[LTe]=!0,e}function WIt(e){return e&&e[LTe]===!0}function HIt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?LIt(s):s.invertExtent?PIt(s):void 0),s.type=e,VIt(s)};return r.metadata=cs(vt(n)),r}function Xn(e,t,n){return arguments.length>1?(VR.set(e,HIt(e,t,n)),this):GIt(e)?VR.get(e):void 0}Xn(MIt,cS);Xn(iv,uS,ps);Xn(Zh,fS,[ps,Zh]);Xn(eT,db,ps);Xn(tT,W_,ps);Xn(_9,dS,ps);Xn(Ey,H_,[ps,tee]);Xn(ky,G_,[ps,tee]);Xn(zf,Fc,[ps,ju]);Xn(`${zf}-${iv}`,Fc,[ps,ju]);Xn(`${zf}-${Zh}`,gS,[ps,ju,Zh]);Xn(`${zf}-${eT}`,hb,[ps,ju]);Xn(`${zf}-${tT}`,q_,[ps,ju]);Xn(`${zf}-${_9}`,yS,[ps,ju]);Xn(`${CS}-${iv}`,bS,[ps,ju]);Xn(`${CS}-${Zh}`,xS,[ps,ju,Zh]);Xn(`${CS}-${eT}`,pb,[ps,ju]);Xn(`${CS}-${tT}`,X_,[ps,ju]);Xn(`${CS}-${_9}`,vS,[ps,ju]);Xn(XE,hS,[rT,XE]);Xn(T9,pS,rT);Xn(N9,mS,rT);Xn(eee,MTe,[nT,rT]);Xn(JJ,Rc,nT);Xn(RTe,nee,nT);Xn(DH,BIt,nT);function GIt(e){return VR.has(e)}function $S(e,t){const n=VR.get(e);return n&&n.metadata[t]}function PTe(e){return $S(e,ps)}function BTe(e){return $S(e,nT)}function qIt(e){return $S(e,rT)}function zTe(e){return $S(e,Zh)}function XIt(e){return $S(e,tee)}function jTe(e){return $S(e,ju)}const YIt=["clamp","base","constant","exponent"];function UTe(e,t){const n=t[0],r=en(t)-n;return function(i){return e(n+i*r)}}function D9(e,t,n){return cb(ree(t||"rgb",n),e)}function VTe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function WTe(e,t,n){const r=n-t;let i,s,a;return!r||!Number.isFinite(r)?oa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=Xn(s)().domain([t,n]).range([0,1]),YIt.forEach(o=>e[o]?a[o](e[o]()):0),a)}function ree(e,t){const n=U_[KIt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function KIt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const ZIt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},QIt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function HTe(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function GTe(e,t){for(const n in e)iee(n,t(e[n]))}const qpe={};GTe(QIt,HTe);GTe(ZIt,e=>D9(HTe(e)));function iee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(qpe[e]=t,this):qpe[e]}const YI="symbol",JIt="discrete",eOt="gradient",tOt=e=>Qe(e)?e.map(t=>String(t)):String(e),nOt=(e,t)=>e[1]-t[1],rOt=(e,t)=>t[1]-e[1];function see(e,t,n){let r;return Yh(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Qw(e.domain())/n||1)+1))),Ht(t)&&(r=t.step,t=t.interval),Fn(t)&&(t=e.type===Ey?nS(t):e.type==ky?rS(t):Ce("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function qTe(e,t,n){let r=e.range(),i=r[0],s=en(r),a=nOt;if(i>s&&(r=s,s=i,i=r,a=rOt),i=Math.floor(i),s=Math.ceil(s),t=t.map(o=>[o,e(o)]).filter(o=>i<=o[1]&&o[1]<=s).sort(a).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],en(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=o)}return t}function aee(e,t){return e.bins?qTe(e,e.bins):e.ticks?e.ticks(t):e.domain()}function XTe(e,t,n,r,i,s){const a=t.type;let o=tOt;if(a===Ey||i===Ey)o=e.timeFormat(r);else if(a===ky||i===ky)o=e.utcFormat(r);else if(zTe(a)){const l=e.formatFloat(r);if(s||t.bins)o=l;else{const u=YTe(t,n,!1);o=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(o=e.format(r));return o}function YTe(e,t,n){const r=aee(e,t),i=e.base(),s=Math.log(i),a=Math.max(1,i*t/r.length),o=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=a};return n?r.filter(o):o}const IH={[XE]:"quantiles",[T9]:"thresholds",[N9]:"domain"},KTe={[XE]:"quantiles",[T9]:"domain"};function ZTe(e,t){return e.bins?aOt(e.bins):e.type===Zh?YTe(e,t,!0):IH[e.type]?sOt(e[IH[e.type]]()):aee(e,t)}function iOt(e,t,n){const r=t[KTe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)s=Math.min(s,r[a]-r[a-1]);return e.formatSpan(0,s,3*10,n)}function sOt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function aOt(e){const t=e.slice(0,-1);return t.max=en(e),t}const oOt=e=>IH[e.type]||e.bins;function QTe(e,t,n,r,i,s,a){const o=KTe[t.type]&&s!==Ey&&s!==ky?iOt(e,t,i):XTe(e,t,n,i,s,a);return r===YI&&oOt(t)?lOt(o):r===JIt?uOt(o):cOt(o)}const lOt=e=>(t,n,r)=>{const i=Xpe(r[n+1],Xpe(r.max,1/0)),s=Ype(t,e),a=Ype(i,e);return s&&a?s+"  "+a:a?"< "+a:" "+s},Xpe=(e,t)=>e??t,uOt=e=>(t,n)=>n?e(t):null,cOt=e=>t=>e(t),Ype=(e,t)=>Number.isFinite(e)?t(e):null;function fOt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+en(t),s=i-r;if(e.type===N9){const a=n?s/n:.1;r-=a,i+=a,s=i-r}return a=>(a-r)/s}function dOt(e,t,n,r){const i=r||t.type;return Fn(n)&&XIt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ey?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===ky?e.utcFormat("%A, %d %B %Y, %X UTC"):QTe(e,t,5,null,n,r,!0)}function JTe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=dOt(e,t,n.format,n.formatType);if(qIt(t.type)){const s=ZTe(t).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(BTe(t.type)){const s=t.domain(),a=s.length,o=a>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${o}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(en(s))}`}}function eNe(e){$e.call(this,null,e)}Ve(eNe,$e,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,o=see(s,a,e.minstep),l=e.format||XTe(n,s,o,e.formatSpecifier,e.formatType,!!e.values),u=e.values?qTe(s,e.values,o):aee(s,o);return i&&(r.rem=i),i=u.map((c,f)=>qn({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(qn({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function tNe(e){$e.call(this,null,e)}function hOt(){return qn({})}function pOt(e){const t=Zw().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ve(tNe,$e,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||hOt,s=e.key||Tt,a=this.value;return Qe(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(s))&&Ce("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=pOt(s)),t.visit(t.ADD,o=>{const l=s(o);let u=a.get(l);u?u.exit?(a.empty--,r.add.push(u)):r.mod.push(u):(u=i(o),a.set(l,u),r.add.push(u)),u.datum=o,u.exit=!1}),t.visit(t.MOD,o=>{const l=s(o),u=a.get(l);u&&(u.datum=o,r.mod.push(u))}),t.visit(t.REM,o=>{const l=s(o),u=a.get(l);o===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function nNe(e){$e.call(this,null,e)}Ve(nNe,$e,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Qe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var a=s==="enter",o=i.update||l0,l=i.enter||l0,u=i.exit||l0,c=(s&&!a?i[s]:o)||l0;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),o(f,e)}),n.modifies(l.output),n.modifies(o.output),c!==l0&&c!==o&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==l0&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),a||c!==l0){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function rNe(e){$e.call(this,[],e)}Ve(rNe,$e,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||YI,a=e.scale,o=+e.limit,l=see(a,e.count==null?5:e.count,e.minstep),u=!!e.values||s===YI,c=e.format||QTe(n,a,l,s,e.formatSpecifier,e.formatType,u),f=e.values||ZTe(a,l),d,h,m,g,b;return i&&(r.rem=i),s===YI?(o&&f.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,o-1),b=!0):i=f,Wt(m=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((x,w)=>Math.max(x,m(w,e)),0)):m=oa(g=m||8),i=i.map((x,w)=>qn({index:w,label:c(x,w,i),value:x,offset:g,size:m(x,e)})),b&&(b=f[i.length],i.push(qn({index:i.length,label:`${f.length-i.length} entries`,value:b,offset:g,size:m(b,e)})))):s===eOt?(d=a.domain(),h=WTe(a,d[0],en(d)),f.length<3&&!e.values&&d[0]!==en(d)&&(f=[d[0],en(d)]),i=f.map((x,w)=>qn({index:w,label:c(x,w,f),value:x,perc:h(x)}))):(m=f.length-1,h=fOt(a),i=f.map((x,w)=>qn({index:w,label:c(x,w,f),value:x,perc:w?h(x):0,perc2:w===m?1:h(f[w+1])}))),r.source=i,r.add=i,this.value=i,r}});const mOt=e=>e.source.x,gOt=e=>e.source.y,yOt=e=>e.target.x,bOt=e=>e.target.y;function oee(e){$e.call(this,{},e)}oee.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ve(oee,$e,{transform(e,t){var n=e.sourceX||mOt,r=e.sourceY||gOt,i=e.targetX||yOt,s=e.targetY||bOt,a=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",u=Kpe.get(l+"-"+o)||Kpe.get(l);return u||Ce("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(a)}});const iNe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,xOt=(e,t,n,r)=>iNe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sNe=(e,t,n,r)=>{var i=n-e,s=r-t,a=Math.hypot(i,s)/2,o=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+o+" 0 1 "+n+","+r},vOt=(e,t,n,r)=>sNe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),aNe=(e,t,n,r)=>{const i=n-e,s=r-t,a=.2*(i+s),o=.2*(s-i);return"M"+e+","+t+"C"+(e+a)+","+(t+o)+" "+(n+o)+","+(r-a)+" "+n+","+r},wOt=(e,t,n,r)=>aNe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),SOt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,COt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,$Ot=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*o+"L"+r*a+","+r*o},EOt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},kOt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},AOt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*a+","+l*o+" "+r*a+","+r*o},Kpe=Zw({line:iNe,"line-radial":xOt,arc:sNe,"arc-radial":vOt,curve:aNe,"curve-radial":wOt,"orthogonal-horizontal":SOt,"orthogonal-vertical":COt,"orthogonal-radial":$Ot,"diagonal-horizontal":EOt,"diagonal-vertical":kOt,"diagonal-radial":AOt});function lee(e){$e.call(this,null,e)}lee.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ve(lee,$e,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||Kw,a=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,f=a,d=(o-a)/Ske(u),h=Ts(c),m,g,b;for(e.sort&&h.sort((x,w)=>u[x]-u[w]),m=0;m<c;++m)b=u[h[m]],g=l[h[m]],g[r]=f,g[i]=f+=b*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const _Ot=5;function TOt(e){const t=e.type;return!e.bins&&(t===iv||t===eT||t===tT)}function oNe(e){return PTe(e)&&e!==zf}const NOt=cs(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function lNe(e){$e.call(this,null,e),this.modified(!0)}Ve(lNe,$e,{transform(e,t){var n=t.dataflow,r=this.value,i=DOt(e);(!r||i!==r.type)&&(this.value=r=Xn(i)());for(i in e)if(!NOt[i]){if(i==="padding"&&oNe(r.type))continue;Wt(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return LOt(r,e,MOt(r,e,OOt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function DOt(e){var t=e.type,n="",r;return t===zf?zf+"-"+iv:(IOt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?zf+"-":r===3?CS+"-":""),(n+t||iv).toLowerCase())}function IOt(e){const t=e.type;return PTe(t)&&t!==Ey&&t!==ky&&(e.scheme||e.range&&e.range.length&&e.range.every(Fn))}function OOt(e,t,n){const r=ROt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,a=t.zero||t.zero===void 0&&TOt(e),o,l;if(!i)return 0;if(oNe(s)&&t.padding&&i[0]!==en(i)&&(i=FOt(s,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[o]<0&&(i[o]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[o]?o+1:l<i[0]?0:o;u!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return e.domain(uNe(s,i,n)),s===JJ&&e.unknown(t.domainImplicit?mH:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&see(e,t.nice)||null),i.length}function ROt(e,t,n){return t?(e.domain(uNe(e.type,t,n)),t.length):-1}function FOt(e,t,n,r,i,s){var a=Math.abs(en(n)-n[0]),o=a/(a-2*r),l=e===Zh?w8(t,null,o):e===tT?OE(t,null,o,.5):e===eT?OE(t,null,o,i||1):e===_9?S8(t,null,o,s||1):v8(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function uNe(e,t,n){if(zTe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+$t(t))}return t}function MOt(e,t,n){let r=t.bins;if(r&&!Qe(r)){const i=e.domain(),s=i[0],a=en(i),o=r.step;let l=r.start==null?s:r.start,u=r.stop==null?a:r.stop;o||Ce("Scale bins parameter missing step property."),l<s&&(l=o*Math.ceil(s/o)),u>a&&(u=o*Math.floor(a/o)),r=Ts(l,u+o/2,o)}return r?e.bins=r:e.bins&&delete e.bins,e.type===eee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function LOt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=POt(r,t,n);else if(t.scheme&&(s=BOt(r,t,n),Wt(s))){if(e.interpolator)return e.interpolator(s);Ce(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&jTe(r))return e.interpolator(D9(OH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(ree(t.interpolate,t.interpolateGamma)):Wt(e.round)?e.round(i):Wt(e.rangeRound)&&e.interpolate(i?j_:Hm),s&&e.range(OH(s,t.reverse))}function POt(e,t,n){e!==RTe&&e!==DH&&Ce("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===DH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*QJ(n,i,r)]}function BOt(e,t,n){var r=t.schemeExtent,i,s;return Qe(t.scheme)?s=D9(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=iee(i),s||Ce(`Unrecognized scheme name: ${t.scheme}`)),n=e===N9?n+1:e===eee?n-1:e===XE||e===T9?+t.schemeCount||_Ot:n,jTe(e)?Zpe(s,r,t.reverse):Wt(s)?VTe(Zpe(s,r),n):e===JJ?s:s.slice(0,n)}function Zpe(e,t,n){return Wt(e)&&(t||n)?UTe(e,OH(t||[0,1],n)):e}function OH(e,t){return t?e.slice().reverse():e}function cNe(e){$e.call(this,null,e)}Ve(cNe,$e,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(lb(e.sort)),this.modified(n),t}});const Qpe="zero",fNe="center",dNe="normalize",hNe=["y0","y1"];function uee(e){$e.call(this,null,e)}uee.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Qpe,values:[Qpe,fNe,dNe]},{name:"as",type:"string",array:!0,length:2,default:hNe}]};Ve(uee,$e,{transform(e,t){var n=e.as||hNe,r=n[0],i=n[1],s=lb(e.sort),a=e.field||Kw,o=e.offset===fNe?zOt:e.offset===dNe?jOt:UOt,l,u,c,f;for(l=VOt(t.source,e.groupby,s,a),u=0,c=l.length,f=l.max;u<c;++u)o(l[u],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function zOt(e,t,n,r,i){for(var s=(t-e.sum)/2,a=e.length,o=0,l;o<a;++o)l=e[o],l[r]=s,l[i]=s+=Math.abs(n(l))}function jOt(e,t,n,r,i){for(var s=1/e.sum,a=0,o=e.length,l=0,u=0,c;l<o;++l)c=e[l],c[r]=a,c[i]=a=s*(u+=Math.abs(n(c)))}function UOt(e,t,n,r,i){for(var s=0,a=0,o=e.length,l=0,u,c;l<o;++l)c=e[l],u=+n(c),u<0?(c[r]=a,c[i]=a+=u):(c[r]=s,c[i]=s+=u)}function VOt(e,t,n,r){var i=[],s=g=>g(c),a,o,l,u,c,f,d,h,m;if(t==null)i.push(e.slice());else for(a={},o=0,l=e.length;o<l;++o)c=e[o],f=t.map(s),d=a[f],d||(a[f]=d=[],i.push(d)),d.push(c);for(f=0,m=0,u=i.length;f<u;++f){for(d=i[f],o=0,h=0,l=d.length;o<l;++o)h+=Math.abs(r(d[o]));d.sum=h,h>m&&(m=h),n&&d.sort(n)}return i.max=m,i}const WOt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:eNe,datajoin:tNe,encode:nNe,legendentries:rNe,linkpath:oee,pie:lee,scale:lNe,sortitems:cNe,stack:uee},Symbol.toStringTag,{value:"Module"}));var Mt=1e-6,RH=1e-12,gn=Math.PI,hi=gn/2,WR=gn/4,Co=gn*2,Ci=180/gn,un=gn/180,An=Math.abs,ES=Math.atan,Iu=Math.atan2,Rt=Math.cos,yD=Math.ceil,pNe=Math.exp,FH=Math.hypot,HR=Math.log,qj=Math.pow,Dt=Math.sin,wu=Math.sign||function(e){return e>0?1:e<0?-1:0},$o=Math.sqrt,cee=Math.tan;function mNe(e){return e>1?0:e<-1?gn:Math.acos(e)}function ol(e){return e>1?hi:e<-1?-hi:Math.asin(e)}function na(){}function GR(e,t){e&&e0e.hasOwnProperty(e.type)&&e0e[e.type](e,t)}var Jpe={Feature:function(e,t){GR(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)GR(n[r].geometry,t)}},e0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){MH(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)MH(n[r],t,0)},Polygon:function(e,t){t0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)t0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)GR(n[r],t)}};function MH(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function t0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)MH(e[n],t,1);t.polygonEnd()}function vh(e,t){e&&Jpe.hasOwnProperty(e.type)?Jpe[e.type](e,t):GR(e,t)}var qR=new po,XR=new po,gNe,yNe,LH,PH,BH,nd={point:na,lineStart:na,lineEnd:na,polygonStart:function(){qR=new po,nd.lineStart=HOt,nd.lineEnd=GOt},polygonEnd:function(){var e=+qR;XR.add(e<0?Co+e:e),this.lineStart=this.lineEnd=this.point=na},sphere:function(){XR.add(Co)}};function HOt(){nd.point=qOt}function GOt(){bNe(gNe,yNe)}function qOt(e,t){nd.point=bNe,gNe=e,yNe=t,e*=un,t*=un,LH=e,PH=Rt(t=t/2+WR),BH=Dt(t)}function bNe(e,t){e*=un,t*=un,t=t/2+WR;var n=e-LH,r=n>=0?1:-1,i=r*n,s=Rt(t),a=Dt(t),o=BH*a,l=PH*s+o*Rt(i),u=o*r*Dt(i);qR.add(Iu(u,l)),LH=e,PH=s,BH=a}function xNe(e){return XR=new po,vh(e,nd),XR*2}function YR(e){return[Iu(e[1],e[0]),ol(e[2])]}function Ay(e){var t=e[0],n=e[1],r=Rt(n);return[r*Rt(t),r*Dt(t),Dt(n)]}function bD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function sv(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Xj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function xD(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function KR(e){var t=$o(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ni,Vo,ci,$l,r1,vNe,wNe,px,M$,p0,Qh,fh={point:zH,lineStart:n0e,lineEnd:r0e,polygonStart:function(){fh.point=CNe,fh.lineStart=XOt,fh.lineEnd=YOt,M$=new po,nd.polygonStart()},polygonEnd:function(){nd.polygonEnd(),fh.point=zH,fh.lineStart=n0e,fh.lineEnd=r0e,qR<0?(ni=-(ci=180),Vo=-($l=90)):M$>Mt?$l=90:M$<-1e-6&&(Vo=-90),Qh[0]=ni,Qh[1]=ci},sphere:function(){ni=-(ci=180),Vo=-($l=90)}};function zH(e,t){p0.push(Qh=[ni=e,ci=e]),t<Vo&&(Vo=t),t>$l&&($l=t)}function SNe(e,t){var n=Ay([e*un,t*un]);if(px){var r=sv(px,n),i=[r[1],-r[0],0],s=sv(i,r);KR(s),s=YR(s);var a=e-r1,o=a>0?1:-1,l=s[0]*Ci*o,u,c=An(a)>180;c^(o*r1<l&&l<o*e)?(u=s[1]*Ci,u>$l&&($l=u)):(l=(l+360)%360-180,c^(o*r1<l&&l<o*e)?(u=-s[1]*Ci,u<Vo&&(Vo=u)):(t<Vo&&(Vo=t),t>$l&&($l=t))),c?e<r1?Cl(ni,e)>Cl(ni,ci)&&(ci=e):Cl(e,ci)>Cl(ni,ci)&&(ni=e):ci>=ni?(e<ni&&(ni=e),e>ci&&(ci=e)):e>r1?Cl(ni,e)>Cl(ni,ci)&&(ci=e):Cl(e,ci)>Cl(ni,ci)&&(ni=e)}else p0.push(Qh=[ni=e,ci=e]);t<Vo&&(Vo=t),t>$l&&($l=t),px=n,r1=e}function n0e(){fh.point=SNe}function r0e(){Qh[0]=ni,Qh[1]=ci,fh.point=zH,px=null}function CNe(e,t){if(px){var n=e-r1;M$.add(An(n)>180?n+(n>0?360:-360):n)}else vNe=e,wNe=t;nd.point(e,t),SNe(e,t)}function XOt(){nd.lineStart()}function YOt(){CNe(vNe,wNe),nd.lineEnd(),An(M$)>Mt&&(ni=-(ci=180)),Qh[0]=ni,Qh[1]=ci,px=null}function Cl(e,t){return(t-=e)<0?t+360:t}function KOt(e,t){return e[0]-t[0]}function i0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function $Ne(e){var t,n,r,i,s,a,o;if($l=ci=-(ni=Vo=1/0),p0=[],vh(e,fh),n=p0.length){for(p0.sort(KOt),t=1,r=p0[0],s=[r];t<n;++t)i=p0[t],i0e(r,i[0])||i0e(r,i[1])?(Cl(r[0],i[1])>Cl(r[0],r[1])&&(r[1]=i[1]),Cl(i[0],r[1])>Cl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(a=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(o=Cl(r[1],i[0]))>a&&(a=o,ni=i[0],ci=r[1])}return p0=Qh=null,ni===1/0||Vo===1/0?[[NaN,NaN],[NaN,NaN]]:[[ni,Vo],[ci,$l]]}var o$,ZR,QR,JR,e5,t5,n5,r5,jH,UH,VH,ENe,kNe,io,so,ao,dc={sphere:na,point:fee,lineStart:s0e,lineEnd:a0e,polygonStart:function(){dc.lineStart=JOt,dc.lineEnd=eRt},polygonEnd:function(){dc.lineStart=s0e,dc.lineEnd=a0e}};function fee(e,t){e*=un,t*=un;var n=Rt(t);iT(n*Rt(e),n*Dt(e),Dt(t))}function iT(e,t,n){++o$,QR+=(e-QR)/o$,JR+=(t-JR)/o$,e5+=(n-e5)/o$}function s0e(){dc.point=ZOt}function ZOt(e,t){e*=un,t*=un;var n=Rt(t);io=n*Rt(e),so=n*Dt(e),ao=Dt(t),dc.point=QOt,iT(io,so,ao)}function QOt(e,t){e*=un,t*=un;var n=Rt(t),r=n*Rt(e),i=n*Dt(e),s=Dt(t),a=Iu($o((a=so*s-ao*i)*a+(a=ao*r-io*s)*a+(a=io*i-so*r)*a),io*r+so*i+ao*s);ZR+=a,t5+=a*(io+(io=r)),n5+=a*(so+(so=i)),r5+=a*(ao+(ao=s)),iT(io,so,ao)}function a0e(){dc.point=fee}function JOt(){dc.point=tRt}function eRt(){ANe(ENe,kNe),dc.point=fee}function tRt(e,t){ENe=e,kNe=t,e*=un,t*=un,dc.point=ANe;var n=Rt(t);io=n*Rt(e),so=n*Dt(e),ao=Dt(t),iT(io,so,ao)}function ANe(e,t){e*=un,t*=un;var n=Rt(t),r=n*Rt(e),i=n*Dt(e),s=Dt(t),a=so*s-ao*i,o=ao*r-io*s,l=io*i-so*r,u=FH(a,o,l),c=ol(u),f=u&&-c/u;jH.add(f*a),UH.add(f*o),VH.add(f*l),ZR+=c,t5+=c*(io+(io=r)),n5+=c*(so+(so=i)),r5+=c*(ao+(ao=s)),iT(io,so,ao)}function _Ne(e){o$=ZR=QR=JR=e5=t5=n5=r5=0,jH=new po,UH=new po,VH=new po,vh(e,dc);var t=+jH,n=+UH,r=+VH,i=FH(t,n,r);return i<RH&&(t=t5,n=n5,r=r5,ZR<Mt&&(t=QR,n=JR,r=e5),i=FH(t,n,r),i<RH)?[NaN,NaN]:[Iu(n,t)*Ci,ol(r/i)*Ci]}function WH(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function HH(e,t){return An(e)>gn&&(e-=Math.round(e/Co)*Co),[e,t]}HH.invert=HH;function TNe(e,t,n){return(e%=Co)?t||n?WH(l0e(e),u0e(t,n)):l0e(e):t||n?u0e(t,n):HH}function o0e(e){return function(t,n){return t+=e,An(t)>gn&&(t-=Math.round(t/Co)*Co),[t,n]}}function l0e(e){var t=o0e(e);return t.invert=o0e(-e),t}function u0e(e,t){var n=Rt(e),r=Dt(e),i=Rt(t),s=Dt(t);function a(o,l){var u=Rt(l),c=Rt(o)*u,f=Dt(o)*u,d=Dt(l),h=d*n+c*r;return[Iu(f*i-h*s,c*n-d*r),ol(h*i+f*s)]}return a.invert=function(o,l){var u=Rt(l),c=Rt(o)*u,f=Dt(o)*u,d=Dt(l),h=d*i-f*s;return[Iu(f*i+d*s,c*n+h*r),ol(h*n-c*r)]},a}function nRt(e){e=TNe(e[0]*un,e[1]*un,e.length>2?e[2]*un:0);function t(n){return n=e(n[0]*un,n[1]*un),n[0]*=Ci,n[1]*=Ci,n}return t.invert=function(n){return n=e.invert(n[0]*un,n[1]*un),n[0]*=Ci,n[1]*=Ci,n},t}function rRt(e,t,n,r,i,s){if(n){var a=Rt(t),o=Dt(t),l=r*n;i==null?(i=t+r*Co,s=t-l/2):(i=c0e(a,i),s=c0e(a,s),(r>0?i<s:i>s)&&(i+=r*Co));for(var u,c=i;r>0?c>s:c<s;c-=l)u=YR([a,-o*Rt(c),-o*Dt(c)]),e.point(u[0],u[1])}}function c0e(e,t){t=Ay(t),t[0]-=e,KR(t);var n=mNe(-t[1]);return((-t[2]<0?-n:n)+Co-Mt)%Co}function NNe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:na,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function KI(e,t){return An(e[0]-t[0])<Mt&&An(e[1]-t[1])<Mt}function vD(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function DNe(e,t,n,r,i){var s=[],a=[],o,l;if(e.forEach(function(m){if(!((g=m.length-1)<=0)){var g,b=m[0],x=m[g],w;if(KI(b,x)){if(!b[2]&&!x[2]){for(i.lineStart(),o=0;o<g;++o)i.point((b=m[o])[0],b[1]);i.lineEnd();return}x[0]+=2*Mt}s.push(w=new vD(b,m,null,!0)),a.push(w.o=new vD(b,null,w,!1)),s.push(w=new vD(x,m,null,!1)),a.push(w.o=new vD(x,null,w,!0))}}),!!s.length){for(a.sort(t),f0e(s),f0e(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var u=s[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,l=c.length;o<l;++o)i.point((f=c[o])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function f0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Yj(e){return An(e[0])<=gn?e[0]:wu(e[0])*((An(e[0])+gn)%Co-gn)}function iRt(e,t){var n=Yj(t),r=t[1],i=Dt(r),s=[Dt(n),-Rt(n),0],a=0,o=0,l=new po;i===1?r=hi+Mt:i===-1&&(r=-hi-Mt);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],m=Yj(h),g=h[1]/2+WR,b=Dt(g),x=Rt(g),w=0;w<d;++w,m=S,b=A,x=k,h=C){var C=f[w],S=Yj(C),E=C[1]/2+WR,A=Dt(E),k=Rt(E),N=S-m,I=N>=0?1:-1,T=I*N,D=T>gn,L=b*A;if(l.add(Iu(L*I*Dt(T),x*k+L*Rt(T))),a+=D?N+I*Co:N,D^m>=n^S>=n){var P=sv(Ay(h),Ay(C));KR(P);var M=sv(s,P);KR(M);var F=(D^N>=0?-1:1)*ol(M[2]);(r>F||r===F&&(P[0]||P[1]))&&(o+=D^N>=0?1:-1)}}return(a<-1e-6||a<Mt&&l<-1e-12)^o&1}function INe(e,t,n,r){return function(i){var s=t(i),a=NNe(),o=t(a),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:b,polygonStart:function(){d.point=x,d.lineStart=w,d.lineEnd=C,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=b,c=wke(c);var S=iRt(u,r);c.length?(l||(i.polygonStart(),l=!0),DNe(c,aRt,S,n,i)):S&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(S,E){e(S,E)&&i.point(S,E)}function m(S,E){s.point(S,E)}function g(){d.point=m,s.lineStart()}function b(){d.point=h,s.lineEnd()}function x(S,E){f.push([S,E]),o.point(S,E)}function w(){o.lineStart(),f=[]}function C(){x(f[0][0],f[0][1]),o.lineEnd();var S=o.clean(),E=a.result(),A,k=E.length,N,I,T;if(f.pop(),u.push(f),f=null,!!k){if(S&1){if(I=E[0],(N=I.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),A=0;A<N;++A)i.point((T=I[A])[0],T[1]);i.lineEnd()}return}k>1&&S&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(sRt))}}return d}}function sRt(e){return e.length>1}function aRt(e,t){return((e=e.x)[0]<0?e[1]-hi-Mt:hi-e[1])-((t=t.x)[0]<0?t[1]-hi-Mt:hi-t[1])}const d0e=INe(function(){return!0},oRt,uRt,[-gn,-hi]);function oRt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,a){var o=s>0?gn:-gn,l=An(s-t);An(l-gn)<Mt?(e.point(t,n=(n+a)/2>0?hi:-hi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(s,n),i=0):r!==o&&l>=gn&&(An(t-r)<Mt&&(t-=r*Mt),An(s-o)<Mt&&(s-=o*Mt),n=lRt(t,n,s,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),i=0),e.point(t=s,n=a),r=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function lRt(e,t,n,r){var i,s,a=Dt(e-n);return An(a)>Mt?ES((Dt(t)*(s=Rt(r))*Dt(n)-Dt(r)*(i=Rt(t))*Dt(e))/(i*s*a)):(t+r)/2}function uRt(e,t,n,r){var i;if(e==null)i=n*hi,r.point(-gn,i),r.point(0,i),r.point(gn,i),r.point(gn,0),r.point(gn,-i),r.point(0,-i),r.point(-gn,-i),r.point(-gn,0),r.point(-gn,i);else if(An(e[0]-t[0])>Mt){var s=e[0]<t[0]?gn:-gn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function cRt(e){var t=Rt(e),n=2*un,r=t>0,i=An(t)>Mt;function s(c,f,d,h){rRt(h,e,n,d,c,f)}function a(c,f){return Rt(c)*Rt(f)>t}function o(c){var f,d,h,m,g;return{lineStart:function(){m=h=!1,g=1},point:function(b,x){var w=[b,x],C,S=a(b,x),E=r?S?0:u(b,x):S?u(b+(b<0?gn:-gn),x):0;if(!f&&(m=h=S)&&c.lineStart(),S!==h&&(C=l(f,w),(!C||KI(f,C)||KI(w,C))&&(w[2]=1)),S!==h)g=0,S?(c.lineStart(),C=l(w,f),c.point(C[0],C[1])):(C=l(f,w),c.point(C[0],C[1],2),c.lineEnd()),f=C;else if(i&&f&&r^S){var A;!(E&d)&&(A=l(w,f,!0))&&(g=0,r?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)))}S&&(!f||!KI(f,w))&&c.point(w[0],w[1]),f=w,h=S,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(m&&h)<<1}}}function l(c,f,d){var h=Ay(c),m=Ay(f),g=[1,0,0],b=sv(h,m),x=bD(b,b),w=b[0],C=x-w*w;if(!C)return!d&&c;var S=t*x/C,E=-t*w/C,A=sv(g,b),k=xD(g,S),N=xD(b,E);Xj(k,N);var I=A,T=bD(k,I),D=bD(I,I),L=T*T-D*(bD(k,k)-1);if(!(L<0)){var P=$o(L),M=xD(I,(-T-P)/D);if(Xj(M,k),M=YR(M),!d)return M;var F=c[0],R=f[0],j=c[1],H=f[1],G;R<F&&(G=F,F=R,R=G);var z=R-F,Y=An(z-gn)<Mt,Z=Y||z<Mt;if(!Y&&H<j&&(G=j,j=H,H=G),Z?Y?j+H>0^M[1]<(An(M[0]-F)<Mt?j:H):j<=M[1]&&M[1]<=H:z>gn^(F<=M[0]&&M[0]<=R)){var Q=xD(I,(-T+P)/D);return Xj(Q,k),[M,YR(Q)]}}}function u(c,f){var d=r?e:gn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return INe(a,o,s,r?[0,-e]:[-gn,e-gn])}function fRt(e,t,n,r,i,s){var a=e[0],o=e[1],l=t[0],u=t[1],c=0,f=1,d=l-a,h=u-o,m;if(m=n-a,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=i-a,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}if(m=r-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=s-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=a+c*d,e[1]=o+c*h),f<1&&(t[0]=a+f*d,t[1]=o+f*h),!0}}}}}var wD=1e9,SD=-1e9;function ONe(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,f,d){var h=0,m=0;if(u==null||(h=a(u,f))!==(m=a(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==m);else d.point(c[0],c[1])}function a(u,c){return An(u[0]-e)<Mt?c>0?0:3:An(u[0]-n)<Mt?c>0?2:1:An(u[1]-t)<Mt?c>0?1:0:c>0?3:2}function o(u,c){return l(u.x,c.x)}function l(u,c){var f=a(u,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=NNe(),d,h,m,g,b,x,w,C,S,E,A,k={point:N,lineStart:L,lineEnd:P,polygonStart:T,polygonEnd:D};function N(F,R){i(F,R)&&c.point(F,R)}function I(){for(var F=0,R=0,j=h.length;R<j;++R)for(var H=h[R],G=1,z=H.length,Y=H[0],Z,Q,se=Y[0],re=Y[1];G<z;++G)Z=se,Q=re,Y=H[G],se=Y[0],re=Y[1],Q<=r?re>r&&(se-Z)*(r-Q)>(re-Q)*(e-Z)&&++F:re<=r&&(se-Z)*(r-Q)<(re-Q)*(e-Z)&&--F;return F}function T(){c=f,d=[],h=[],A=!0}function D(){var F=I(),R=A&&F,j=(d=wke(d)).length;(R||j)&&(u.polygonStart(),R&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),j&&DNe(d,o,F,s,u),u.polygonEnd()),c=u,d=h=m=null}function L(){k.point=M,h&&h.push(m=[]),E=!0,S=!1,w=C=NaN}function P(){d&&(M(g,b),x&&S&&f.rejoin(),d.push(f.result())),k.point=N,S&&c.lineEnd()}function M(F,R){var j=i(F,R);if(h&&m.push([F,R]),E)g=F,b=R,x=j,E=!1,j&&(c.lineStart(),c.point(F,R));else if(j&&S)c.point(F,R);else{var H=[w=Math.max(SD,Math.min(wD,w)),C=Math.max(SD,Math.min(wD,C))],G=[F=Math.max(SD,Math.min(wD,F)),R=Math.max(SD,Math.min(wD,R))];fRt(H,G,e,t,n,r)?(S||(c.lineStart(),c.point(H[0],H[1])),c.point(G[0],G[1]),j||c.lineEnd(),A=!1):j&&(c.lineStart(),c.point(F,R),A=!1)}w=F,C=R,S=j}return k}}function h0e(e,t,n){var r=Ts(e,t-Mt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function p0e(e,t,n){var r=Ts(e,t-Mt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function dRt(){var e,t,n,r,i,s,a,o,l=10,u=l,c=90,f=360,d,h,m,g,b=2.5;function x(){return{type:"MultiLineString",coordinates:w()}}function w(){return Ts(yD(r/c)*c,n,c).map(m).concat(Ts(yD(o/f)*f,a,f).map(g)).concat(Ts(yD(t/l)*l,e,l).filter(function(C){return An(C%c)>Mt}).map(d)).concat(Ts(yD(s/u)*u,i,u).filter(function(C){return An(C%f)>Mt}).map(h))}return x.lines=function(){return w().map(function(C){return{type:"LineString",coordinates:C}})},x.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(g(a).slice(1),m(n).reverse().slice(1),g(o).reverse().slice(1))]}},x.extent=function(C){return arguments.length?x.extentMajor(C).extentMinor(C):x.extentMinor()},x.extentMajor=function(C){return arguments.length?(r=+C[0][0],n=+C[1][0],o=+C[0][1],a=+C[1][1],r>n&&(C=r,r=n,n=C),o>a&&(C=o,o=a,a=C),x.precision(b)):[[r,o],[n,a]]},x.extentMinor=function(C){return arguments.length?(t=+C[0][0],e=+C[1][0],s=+C[0][1],i=+C[1][1],t>e&&(C=t,t=e,e=C),s>i&&(C=s,s=i,i=C),x.precision(b)):[[t,s],[e,i]]},x.step=function(C){return arguments.length?x.stepMajor(C).stepMinor(C):x.stepMinor()},x.stepMajor=function(C){return arguments.length?(c=+C[0],f=+C[1],x):[c,f]},x.stepMinor=function(C){return arguments.length?(l=+C[0],u=+C[1],x):[l,u]},x.precision=function(C){return arguments.length?(b=+C,d=h0e(s,i,90),h=p0e(t,e,b),m=h0e(o,a,90),g=p0e(r,n,b),x):b},x.extentMajor([[-180,-90+Mt],[180,90-Mt]]).extentMinor([[-180,-80-Mt],[180,80+Mt]])}const YE=e=>e;var Kj=new po,GH=new po,RNe,FNe,qH,XH,wh={point:na,lineStart:na,lineEnd:na,polygonStart:function(){wh.lineStart=hRt,wh.lineEnd=mRt},polygonEnd:function(){wh.lineStart=wh.lineEnd=wh.point=na,Kj.add(An(GH)),GH=new po},result:function(){var e=Kj/2;return Kj=new po,e}};function hRt(){wh.point=pRt}function pRt(e,t){wh.point=MNe,RNe=qH=e,FNe=XH=t}function MNe(e,t){GH.add(XH*e-qH*t),qH=e,XH=t}function mRt(){MNe(RNe,FNe)}var av=1/0,i5=av,KE=-av,s5=KE,a5={point:gRt,lineStart:na,lineEnd:na,polygonStart:na,polygonEnd:na,result:function(){var e=[[av,i5],[KE,s5]];return KE=s5=-(i5=av=1/0),e}};function gRt(e,t){e<av&&(av=e),e>KE&&(KE=e),t<i5&&(i5=t),t>s5&&(s5=t)}var YH=0,KH=0,l$=0,o5=0,l5=0,K2=0,ZH=0,QH=0,u$=0,LNe,PNe,Sf,Cf,pu={point:_y,lineStart:m0e,lineEnd:g0e,polygonStart:function(){pu.lineStart=xRt,pu.lineEnd=vRt},polygonEnd:function(){pu.point=_y,pu.lineStart=m0e,pu.lineEnd=g0e},result:function(){var e=u$?[ZH/u$,QH/u$]:K2?[o5/K2,l5/K2]:l$?[YH/l$,KH/l$]:[NaN,NaN];return YH=KH=l$=o5=l5=K2=ZH=QH=u$=0,e}};function _y(e,t){YH+=e,KH+=t,++l$}function m0e(){pu.point=yRt}function yRt(e,t){pu.point=bRt,_y(Sf=e,Cf=t)}function bRt(e,t){var n=e-Sf,r=t-Cf,i=$o(n*n+r*r);o5+=i*(Sf+e)/2,l5+=i*(Cf+t)/2,K2+=i,_y(Sf=e,Cf=t)}function g0e(){pu.point=_y}function xRt(){pu.point=wRt}function vRt(){BNe(LNe,PNe)}function wRt(e,t){pu.point=BNe,_y(LNe=Sf=e,PNe=Cf=t)}function BNe(e,t){var n=e-Sf,r=t-Cf,i=$o(n*n+r*r);o5+=i*(Sf+e)/2,l5+=i*(Cf+t)/2,K2+=i,i=Cf*e-Sf*t,ZH+=i*(Sf+e),QH+=i*(Cf+t),u$+=i*3,_y(Sf=e,Cf=t)}function zNe(e){this._context=e}zNe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Co);break}}},result:na};var JH=new po,Zj,jNe,UNe,c$,f$,ZE={point:na,lineStart:function(){ZE.point=SRt},lineEnd:function(){Zj&&VNe(jNe,UNe),ZE.point=na},polygonStart:function(){Zj=!0},polygonEnd:function(){Zj=null},result:function(){var e=+JH;return JH=new po,e}};function SRt(e,t){ZE.point=VNe,jNe=c$=e,UNe=f$=t}function VNe(e,t){c$-=e,f$-=t,JH.add($o(c$*c$+f$*f$)),c$=e,f$=t}let y0e,u5,b0e,x0e;class v0e{constructor(t){this._append=t==null?WNe:CRt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==b0e||this._append!==u5){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,b0e=r,u5=this._append,x0e=this._,this._=i}this._+=x0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function WNe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function CRt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return WNe;if(t!==y0e){const n=10**t;y0e=t,u5=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return u5}function HNe(e,t){let n=3,r=4.5,i,s;function a(o){return o&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),vh(o,i(s))),s.result()}return a.area=function(o){return vh(o,i(wh)),wh.result()},a.measure=function(o){return vh(o,i(ZE)),ZE.result()},a.bounds=function(o){return vh(o,i(a5)),a5.result()},a.centroid=function(o){return vh(o,i(pu)),pu.result()},a.projection=function(o){return arguments.length?(i=o==null?(e=null,YE):(e=o).stream,a):e},a.context=function(o){return arguments.length?(s=o==null?(t=null,new v0e(n)):new zNe(t=o),typeof r!="function"&&s.pointRadius(r),a):t},a.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(s.pointRadius(+o),+o),a):r},a.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(s=new v0e(n)),a},a.projection(e).digits(n).context(t)}function I9(e){return function(t){var n=new eG;for(var r in e)n[r]=e[r];return n.stream=t,n}}function eG(){}eG.prototype={constructor:eG,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function dee(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),vh(n,e.stream(a5)),t(a5.result()),r!=null&&e.clipExtent(r),e}function O9(e,t,n){return dee(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),o=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,l])},n)}function hee(e,t,n){return O9(e,[[0,0],t],n)}function pee(e,t,n){return dee(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,o=-s*r[0][1];e.scale(150*s).translate([a,o])},n)}function mee(e,t,n){return dee(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],o=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,o])},n)}var w0e=16,$Rt=Rt(30*un);function S0e(e,t){return+t?kRt(e,t):ERt(e)}function ERt(e){return I9({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function kRt(e,t){function n(r,i,s,a,o,l,u,c,f,d,h,m,g,b){var x=u-r,w=c-i,C=x*x+w*w;if(C>4*t&&g--){var S=a+d,E=o+h,A=l+m,k=$o(S*S+E*E+A*A),N=ol(A/=k),I=An(An(A)-1)<Mt||An(s-f)<Mt?(s+f)/2:Iu(E,S),T=e(I,N),D=T[0],L=T[1],P=D-r,M=L-i,F=w*P-x*M;(F*F/C>t||An((x*P+w*M)/C-.5)>.3||a*d+o*h+l*m<$Rt)&&(n(r,i,s,a,o,l,D,L,I,S/=k,E/=k,A,g,b),b.point(D,L),n(D,L,I,S,E,A,u,c,f,d,h,m,g,b))}}return function(r){var i,s,a,o,l,u,c,f,d,h,m,g,b={point:x,lineStart:w,lineEnd:S,polygonStart:function(){r.polygonStart(),b.lineStart=E},polygonEnd:function(){r.polygonEnd(),b.lineStart=w}};function x(N,I){N=e(N,I),r.point(N[0],N[1])}function w(){f=NaN,b.point=C,r.lineStart()}function C(N,I){var T=Ay([N,I]),D=e(N,I);n(f,d,c,h,m,g,f=D[0],d=D[1],c=N,h=T[0],m=T[1],g=T[2],w0e,r),r.point(f,d)}function S(){b.point=x,r.lineEnd()}function E(){w(),b.point=A,b.lineEnd=k}function A(N,I){C(i=N,I),s=f,a=d,o=h,l=m,u=g,b.point=C}function k(){n(f,d,c,h,m,g,s,a,i,o,l,u,w0e,r),b.lineEnd=S,S()}return b}}var ARt=I9({point:function(e,t){this.stream.point(e*un,t*un)}});function _Rt(e){return I9({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function TRt(e,t,n,r,i){function s(a,o){return a*=r,o*=i,[t+e*a,n-e*o]}return s.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},s}function C0e(e,t,n,r,i,s){if(!s)return TRt(e,t,n,r,i);var a=Rt(s),o=Dt(s),l=a*e,u=o*e,c=a/e,f=o/e,d=(o*n-a*t)/e,h=(o*t+a*n)/e;function m(g,b){return g*=r,b*=i,[l*g-u*b+t,n-u*g-l*b]}return m.invert=function(g,b){return[r*(c*g-f*b+d),i*(h-f*g-c*b)]},m}function gd(e){return GNe(function(){return e})()}function GNe(e){var t,n=150,r=480,i=250,s=0,a=0,o=0,l=0,u=0,c,f=0,d=1,h=1,m=null,g=d0e,b=null,x,w,C,S=YE,E=.5,A,k,N,I,T;function D(F){return N(F[0]*un,F[1]*un)}function L(F){return F=N.invert(F[0],F[1]),F&&[F[0]*Ci,F[1]*Ci]}D.stream=function(F){return I&&T===F?I:I=ARt(_Rt(c)(g(A(S(T=F)))))},D.preclip=function(F){return arguments.length?(g=F,m=void 0,M()):g},D.postclip=function(F){return arguments.length?(S=F,b=x=w=C=null,M()):S},D.clipAngle=function(F){return arguments.length?(g=+F?cRt(m=F*un):(m=null,d0e),M()):m*Ci},D.clipExtent=function(F){return arguments.length?(S=F==null?(b=x=w=C=null,YE):ONe(b=+F[0][0],x=+F[0][1],w=+F[1][0],C=+F[1][1]),M()):b==null?null:[[b,x],[w,C]]},D.scale=function(F){return arguments.length?(n=+F,P()):n},D.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},D.center=function(F){return arguments.length?(s=F[0]%360*un,a=F[1]%360*un,P()):[s*Ci,a*Ci]},D.rotate=function(F){return arguments.length?(o=F[0]%360*un,l=F[1]%360*un,u=F.length>2?F[2]%360*un:0,P()):[o*Ci,l*Ci,u*Ci]},D.angle=function(F){return arguments.length?(f=F%360*un,P()):f*Ci},D.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},D.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},D.precision=function(F){return arguments.length?(A=S0e(k,E=F*F),M()):$o(E)},D.fitExtent=function(F,R){return O9(D,F,R)},D.fitSize=function(F,R){return hee(D,F,R)},D.fitWidth=function(F,R){return pee(D,F,R)},D.fitHeight=function(F,R){return mee(D,F,R)};function P(){var F=C0e(n,0,0,d,h,f).apply(null,t(s,a)),R=C0e(n,r-F[0],i-F[1],d,h,f);return c=TNe(o,l,u),k=WH(t,R),N=WH(c,k),A=S0e(k,E),M()}function M(){return I=T=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&L,P()}}function gee(e){var t=0,n=gn/3,r=GNe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*un,n=s[1]*un):[t*Ci,n*Ci]},i}function NRt(e){var t=Rt(e);function n(r,i){return[r*t,Dt(i)/t]}return n.invert=function(r,i){return[r/t,ol(i*t)]},n}function DRt(e,t){var n=Dt(e),r=(n+Dt(t))/2;if(An(r)<Mt)return NRt(e);var i=1+n*(2*r-n),s=$o(i)/r;function a(o,l){var u=$o(i-2*r*Dt(l))/r;return[u*Dt(o*=r),s-u*Rt(o)]}return a.invert=function(o,l){var u=s-l,c=Iu(o,An(u))*wu(u);return u*r<0&&(c-=gn*wu(o)*wu(u)),[c/r,ol((i-(o*o+u*u)*r*r)/(2*r))]},a}function c5(){return gee(DRt).scale(155.424).center([0,33.6442])}function qNe(){return c5().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function IRt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ORt(){var e,t,n=qNe(),r,i=c5().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=c5().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],m=d[1];return l=null,r.point(h,m),l||(s.point(h,m),l)||(o.point(h,m),l)}c.invert=function(d){var h=n.scale(),m=n.translate(),g=(d[0]-m[0])/h,b=(d[1]-m[1])/h;return(b>=.12&&b<.234&&g>=-.425&&g<-.214?i:b>=.166&&b<.234&&g>=-.214&&g<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=IRt([n.stream(t=d),i.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),m=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[m-.455*h,g-.238*h],[m+.455*h,g+.238*h]]).stream(u),s=i.translate([m-.307*h,g+.201*h]).clipExtent([[m-.425*h+Mt,g+.12*h+Mt],[m-.214*h-Mt,g+.234*h-Mt]]).stream(u),o=a.translate([m-.205*h,g+.212*h]).clipExtent([[m-.214*h+Mt,g+.166*h+Mt],[m-.115*h-Mt,g+.234*h-Mt]]).stream(u),f()},c.fitExtent=function(d,h){return O9(c,d,h)},c.fitSize=function(d,h){return hee(c,d,h)},c.fitWidth=function(d,h){return pee(c,d,h)},c.fitHeight=function(d,h){return mee(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function XNe(e){return function(t,n){var r=Rt(t),i=Rt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Dt(t),s*Dt(n)]}}function sT(e){return function(t,n){var r=$o(t*t+n*n),i=e(r),s=Dt(i),a=Rt(i);return[Iu(t*s,r*a),ol(r&&n*s/r)]}}var YNe=XNe(function(e){return $o(2/(1+e))});YNe.invert=sT(function(e){return 2*ol(e/2)});function RRt(){return gd(YNe).scale(124.75).clipAngle(180-.001)}var KNe=XNe(function(e){return(e=mNe(e))&&e/Dt(e)});KNe.invert=sT(function(e){return e});function FRt(){return gd(KNe).scale(79.4188).clipAngle(180-.001)}function R9(e,t){return[e,HR(cee((hi+t)/2))]}R9.invert=function(e,t){return[e,2*ES(pNe(t))-hi]};function MRt(){return ZNe(R9).scale(961/Co)}function ZNe(e){var t=gd(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,a=null,o,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=o=l=u=null:(a=+f[0][0],o=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):a==null?null:[[a,o],[l,u]]};function c(){var f=gn*r(),d=t(nRt(t.rotate()).invert([0,0]));return s(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===R9?[[Math.max(d[0]-f,a),o],[Math.min(d[0]+f,l),u]]:[[a,Math.max(d[1]-f,o)],[l,Math.min(d[1]+f,u)]])}return c()}function CD(e){return cee((hi+e)/2)}function LRt(e,t){var n=Rt(e),r=e===t?Dt(e):HR(n/Rt(t))/HR(CD(t)/CD(e)),i=n*qj(CD(e),r)/r;if(!r)return R9;function s(a,o){i>0?o<-hi+Mt&&(o=-hi+Mt):o>hi-Mt&&(o=hi-Mt);var l=i/qj(CD(o),r);return[l*Dt(r*a),i-l*Rt(r*a)]}return s.invert=function(a,o){var l=i-o,u=wu(r)*$o(a*a+l*l),c=Iu(a,An(l))*wu(l);return l*r<0&&(c-=gn*wu(a)*wu(l)),[c/r,2*ES(qj(i/u,1/r))-hi]},s}function PRt(){return gee(LRt).scale(109.5).parallels([30,30])}function f5(e,t){return[e,t]}f5.invert=f5;function BRt(){return gd(f5).scale(152.63)}function zRt(e,t){var n=Rt(e),r=e===t?Dt(e):(n-Rt(t))/(t-e),i=n/r+e;if(An(r)<Mt)return f5;function s(a,o){var l=i-o,u=r*a;return[l*Dt(u),i-l*Rt(u)]}return s.invert=function(a,o){var l=i-o,u=Iu(a,An(l))*wu(l);return l*r<0&&(u-=gn*wu(a)*wu(l)),[u/r,i-wu(r)*$o(a*a+l*l)]},s}function jRt(){return gee(zRt).scale(131.154).center([0,13.9389])}var L$=1.340264,P$=-.081106,B$=893e-6,z$=.003796,d5=$o(3)/2,URt=12;function QNe(e,t){var n=ol(d5*Dt(t)),r=n*n,i=r*r*r;return[e*Rt(n)/(d5*(L$+3*P$*r+i*(7*B$+9*z$*r))),n*(L$+P$*r+i*(B$+z$*r))]}QNe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,a,o,l;s<URt&&(o=n*(L$+P$*r+i*(B$+z$*r))-t,l=L$+3*P$*r+i*(7*B$+9*z$*r),n-=a=o/l,r=n*n,i=r*r*r,!(An(a)<RH));++s);return[d5*e*(L$+3*P$*r+i*(7*B$+9*z$*r))/Rt(n),ol(Dt(n)/d5)]};function VRt(){return gd(QNe).scale(177.158)}function JNe(e,t){var n=Rt(t),r=Rt(e)*n;return[n*Dt(e)/r,Dt(t)/r]}JNe.invert=sT(ES);function WRt(){return gd(JNe).scale(144.049).clipAngle(60)}function HRt(){var e=1,t=0,n=0,r=1,i=1,s=0,a,o,l=null,u,c,f,d=1,h=1,m=I9({point:function(S,E){var A=C([S,E]);this.stream.point(A[0],A[1])}}),g=YE,b,x;function w(){return d=e*r,h=e*i,b=x=null,C}function C(S){var E=S[0]*d,A=S[1]*h;if(s){var k=A*a-E*o;E=E*a+A*o,A=k}return[E+t,A+n]}return C.invert=function(S){var E=S[0]-t,A=S[1]-n;if(s){var k=A*a+E*o;E=E*a-A*o,A=k}return[E/d,A/h]},C.stream=function(S){return b&&x===S?b:b=m(g(x=S))},C.postclip=function(S){return arguments.length?(g=S,l=u=c=f=null,w()):g},C.clipExtent=function(S){return arguments.length?(g=S==null?(l=u=c=f=null,YE):ONe(l=+S[0][0],u=+S[0][1],c=+S[1][0],f=+S[1][1]),w()):l==null?null:[[l,u],[c,f]]},C.scale=function(S){return arguments.length?(e=+S,w()):e},C.translate=function(S){return arguments.length?(t=+S[0],n=+S[1],w()):[t,n]},C.angle=function(S){return arguments.length?(s=S%360*un,o=Dt(s),a=Rt(s),w()):s*Ci},C.reflectX=function(S){return arguments.length?(r=S?-1:1,w()):r<0},C.reflectY=function(S){return arguments.length?(i=S?-1:1,w()):i<0},C.fitExtent=function(S,E){return O9(C,S,E)},C.fitSize=function(S,E){return hee(C,S,E)},C.fitWidth=function(S,E){return pee(C,S,E)},C.fitHeight=function(S,E){return mee(C,S,E)},C}function e4e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}e4e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(An(i)>Mt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function GRt(){return gd(e4e).scale(175.295)}function t4e(e,t){return[Rt(t)*Dt(e),Dt(t)]}t4e.invert=sT(ol);function qRt(){return gd(t4e).scale(249.5).clipAngle(90+Mt)}function n4e(e,t){var n=Rt(t),r=1+Rt(e)*n;return[n*Dt(e)/r,Dt(t)/r]}n4e.invert=sT(function(e){return 2*ES(e)});function XRt(){return gd(n4e).scale(250).clipAngle(142)}function r4e(e,t){return[HR(cee((hi+t)/2)),-e]}r4e.invert=function(e,t){return[-t,2*ES(pNe(e))-hi]};function YRt(){var e=ZNe(r4e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var KRt=Math.abs,tG=Math.cos,h5=Math.sin,ZRt=1e-6,i4e=Math.PI,nG=i4e/2,$0e=QRt(2);function E0e(e){return e>1?nG:e<-1?-nG:Math.asin(e)}function QRt(e){return e>0?Math.sqrt(e):0}function JRt(e,t){var n=e*h5(t),r=30,i;do t-=i=(t+h5(t)-n)/(1+tG(t));while(KRt(i)>ZRt&&--r>0);return t/2}function e5t(e,t,n){function r(i,s){return[e*i*tG(s=JRt(n,s)),t*h5(s)]}return r.invert=function(i,s){return s=E0e(s/t),[i/(e*tG(s)),E0e((2*s+h5(2*s))/n)]},r}var t5t=e5t($0e/nG,$0e,i4e);function n5t(){return gd(t5t).scale(169.529)}function r5t(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const i5t="identity",yee="linear",ov="log",bee="pow",xee="sqrt",vee="symlog",s5t="time",a5t="utc",kS="sequential",aT="diverging",k0e="quantile",o5t="quantize",l5t="threshold",u5t="ordinal",c5t="point",f5t="band",d5t="bin-ordinal",Ys="continuous",F9="discrete",M9="discretizing",Lc="interpolating",s4e="temporal";function h5t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function p5t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function wee(){const e=Rc().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=r5t(f,o,l);let g=r[d-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(f-o))*u,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const b=Ts(f).map(x=>g+i*x);return n(d?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let g=+f[0],b=+f[1],x,w,C;if(!(g!==g||b!==b)&&(b<g&&(C=g,g=b,b=C),!(b<h[0]||g>r[1-d])))return x=Math.max(0,Gi(h,g)-1),w=g===b?x:Gi(h,b)-1,g-h[x]>s+1e-10&&++x,d&&(C=x,x=m-w,w=m-C),x>w?void 0:t().slice(x,w+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return wee().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function a4e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return a4e(t())},e}function m5t(){return a4e(wee().paddingInner(1))}var g5t=Array.prototype.map;function y5t(e){return g5t.call(e,Ti)}const b5t=Array.prototype.slice;function o4e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Gi(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=y5t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=b5t.call(r),n):t.slice()},n.tickFormat=function(r,i){return lS(e[0],en(e),r??10,i)},n.copy=function(){return o4e().domain(n.domain()).range(n.range())},n}const rG=new Map,x5t=Symbol("vega_scale");function l4e(e){return e[x5t]=!0,e}function v5t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?h5t(s):s.invertExtent?p5t(s):void 0),s.type=e,l4e(s)};return r.metadata=cs(vt(n)),r}function Mr(e,t,n){return arguments.length>1?(rG.set(e,v5t(e,t,n)),this):w5t(e)?rG.get(e):void 0}Mr(i5t,cS);Mr(yee,uS,Ys);Mr(ov,fS,[Ys,ov]);Mr(bee,db,Ys);Mr(xee,W_,Ys);Mr(vee,dS,Ys);Mr(s5t,H_,[Ys,s4e]);Mr(a5t,G_,[Ys,s4e]);Mr(kS,Fc,[Ys,Lc]);Mr(`${kS}-${yee}`,Fc,[Ys,Lc]);Mr(`${kS}-${ov}`,gS,[Ys,Lc,ov]);Mr(`${kS}-${bee}`,hb,[Ys,Lc]);Mr(`${kS}-${xee}`,q_,[Ys,Lc]);Mr(`${kS}-${vee}`,yS,[Ys,Lc]);Mr(`${aT}-${yee}`,bS,[Ys,Lc]);Mr(`${aT}-${ov}`,xS,[Ys,Lc,ov]);Mr(`${aT}-${bee}`,pb,[Ys,Lc]);Mr(`${aT}-${xee}`,X_,[Ys,Lc]);Mr(`${aT}-${vee}`,vS,[Ys,Lc]);Mr(k0e,hS,[M9,k0e]);Mr(o5t,pS,M9);Mr(l5t,mS,M9);Mr(d5t,o4e,[F9,M9]);Mr(u5t,Rc,F9);Mr(f5t,wee,F9);Mr(c5t,m5t,F9);function w5t(e){return rG.has(e)}function S5t(e,t,n){return cb(C5t("rgb",n),e)}function C5t(e,t){const n=U_[$5t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function $5t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const E5t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},k5t={accent:u9,category10:l9,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:c9,observable10:f9,paired:d9,pastel1:h9,pastel2:p9,set1:m9,set2:g9,set3:y9,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function u4e(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function c4e(e,t){for(const n in e)A5t(n,t(e[n]))}const A0e={};c4e(k5t,u4e);c4e(E5t,e=>S5t(u4e(e)));function A5t(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(A0e[e]=t,this):A0e[e]}const _5t=HNe(),iG=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function T5t(e,t){return function n(){const r=t();return r.type=e,r.path=HNe().projection(r),r.copy=r.copy||function(){const i=n();return iG.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},l4e(r)}}function See(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(p5[e]=T5t(e,t),this):p5[e]||null}function f4e(e){return e&&e.path||_5t}const p5={albers:qNe,albersusa:ORt,azimuthalequalarea:RRt,azimuthalequidistant:FRt,conicconformal:PRt,conicequalarea:c5,conicequidistant:jRt,equalEarth:VRt,equirectangular:BRt,gnomonic:WRt,identity:HRt,mercator:MRt,mollweide:n5t,naturalEarth1:GRt,orthographic:qRt,stereographic:XRt,transversemercator:YRt};for(const e in p5)See(e,p5[e]);function N5t(){}const Qd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function d4e(){var e=1,t=1,n=o;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return s(l,u,d=>{n(d,l,u),D5t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,m=c.length,g;h<m;++h)if(I5t((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var f=[],d=[],h,m,g,b,x,w;for(h=m=-1,b=l[0]>=u,Qd[b<<1].forEach(C);++h<e-1;)g=b,b=l[h+1]>=u,Qd[g|b<<1].forEach(C);for(Qd[b<<0].forEach(C);++m<t-1;){for(h=-1,b=l[m*e+e]>=u,x=l[m*e]>=u,Qd[b<<1|x<<2].forEach(C);++h<e-1;)g=b,b=l[m*e+e+h+1]>=u,w=x,x=l[m*e+h+1]>=u,Qd[g|b<<1|x<<2|w<<3].forEach(C);Qd[b|x<<3].forEach(C)}for(h=-1,x=l[m*e]>=u,Qd[x<<2].forEach(C);++h<e-1;)w=x,x=l[m*e+h+1]>=u,Qd[x<<2|w<<3].forEach(C);Qd[x<<3].forEach(C);function C(S){var E=[S[0][0]+h,S[0][1]+m],A=[S[1][0]+h,S[1][1]+m],k=a(E),N=a(A),I,T;(I=d[k])?(T=f[N])?(delete d[I.end],delete f[T.start],I===T?(I.ring.push(A),c(I.ring)):f[I.start]=d[T.end]={start:I.start,end:T.end,ring:I.ring.concat(T.ring)}):(delete d[I.end],I.ring.push(A),d[I.end=N]=I):(I=f[N])?(T=d[k])?(delete f[I.start],delete d[T.end],I===T?(I.ring.push(A),c(I.ring)):f[T.start]=d[I.end]={start:T.start,end:I.end,ring:T.ring.concat(I.ring)}):(delete f[I.start],I.ring.unshift(E),f[I.start=k]=I):f[k]=d[N]={start:k,end:N,ring:[E,A]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function o(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],m=d|0,g=h|0,b,x=u[g*e+m];d>0&&d<e&&m===d&&(b=u[g*e+m-1],f[0]=d+(c-b)/(x-b)-.5),h>0&&h<t&&g===h&&(b=u[(g-1)*e+m],f[1]=h+(c-b)/(x-b)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||Ce("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?o:N5t,r):n===o},r}function D5t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function I5t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=O5t(e,t[n]))return i;return 0}function O5t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,a=e.length,o=a-1;s<a;o=s++){var l=e[s],u=l[0],c=l[1],f=e[o],d=f[0],h=f[1];if(R5t(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function R5t(e,t,n){var r;return F5t(e,t,n)&&M5t(e[r=+(e[0]===t[0])],n[r],t[r])}function F5t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function M5t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function h4e(e,t,n){return function(r){var i=kc(r),s=n?Math.min(i[0],0):i[0],a=i[1],o=a-s,l=t?um(s,a,e):o/(e+1);return Ts(s+l,a,l)}}function Cee(e){$e.call(this,null,e)}Cee.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ve(Cee,$e,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ha,s=d4e().smooth(e.smooth!==!1),a=e.thresholds||L5t(r,i,e),o=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=s.size([c.width,c.height])(c.values,Qe(a)?a:a(c.values));P5t(f,c,u,e),f.forEach(d=>{l.push(M8(u,qn(o!=null?{[o]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function L5t(e,t,n){const r=h4e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>W1(t(i).values)))}function P5t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Wt(i)&&(i=i(n,r)),Wt(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const a=(Yh(i)?i:i[0])||1,o=(Yh(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(p4e(t,a,o,l,u))}function p4e(e,t,n,r,i){const s=e.x1||0,a=e.y1||0,o=t*n<0;function l(f){f.forEach(u)}function u(f){o&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(l),f}}function _0e(e,t,n){const r=e>=0?e:pQ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Qj(e){return Wt(e)?e:oa(+e)}function m4e(){var e=l=>l[0],t=l=>l[1],n=Kw,r=[-1,-1],i=960,s=500,a=2;function o(l,u){const c=_0e(r[0],l,e)>>a,f=_0e(r[1],l,t)>>a,d=c?c+2:0,h=f?f+2:0,m=2*d+(i>>a),g=2*h+(s>>a),b=new Float32Array(m*g),x=new Float32Array(m*g);let w=b;l.forEach(S=>{const E=d+(+e(S)>>a),A=h+(+t(S)>>a);E>=0&&E<m&&A>=0&&A<g&&(b[E+A*m]+=+n(S))}),c>0&&f>0?(k2(m,g,b,x,c),A2(m,g,x,b,f),k2(m,g,b,x,c),A2(m,g,x,b,f),k2(m,g,b,x,c),A2(m,g,x,b,f)):c>0?(k2(m,g,b,x,c),k2(m,g,x,b,c),k2(m,g,b,x,c),w=x):f>0&&(A2(m,g,b,x,f),A2(m,g,x,b,f),A2(m,g,b,x,f),w=x);const C=u?Math.pow(2,-2*a):1/Ske(w);for(let S=0,E=m*g;S<E;++S)w[S]*=C;return{values:w,scale:1<<a,width:m,height:g,x1:d,y1:h,x2:d+(i>>a),y2:h+(s>>a)}}return o.x=function(l){return arguments.length?(e=Qj(l),o):e},o.y=function(l){return arguments.length?(t=Qj(l),o):t},o.weight=function(l){return arguments.length?(n=Qj(l),o):n},o.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||Ce("invalid size"),i=u,s=c,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||Ce("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),o):1<<a},o.bandwidth=function(l){return arguments.length?(l=vt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Ce("invalid bandwidth"),r=l,o):r},o}function k2(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<t;++a)for(let o=0,l=0;o<e+i;++o)o<e&&(l+=n[o+a*e]),o>=i&&(o>=s&&(l-=n[o-s+a*e]),r[o-i+a*e]=l/Math.min(o+1,e-1+s-o,s))}function A2(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<e;++a)for(let o=0,l=0;o<t+i;++o)o<t&&(l+=n[a+o*e]),o>=i&&(o>=s&&(l-=n[a+(o-s)*e]),r[a+(o-i)*e]=l/Math.min(o+1,t-1+s-o,s))}function $ee(e){$e.call(this,null,e)}$ee.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const B5t=["x","y","weight","size","cellSize","bandwidth"];function g4e(e,t){return B5t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ve($ee,$e,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=z5t(r,e.groupby),s=(e.groupby||[]).map(mi),a=g4e(m4e(),e),o=e.as||"grid",l=[];function u(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return l=i.map(c=>qn(u({[o]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function z5t(e,t){var n=[],r=c=>c(o),i,s,a,o,l,u;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(o);return n}function Eee(e){$e.call(this,null,e)}Eee.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ve(Eee,$e,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=d4e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||h4e(e.count||10,e.nice,!!i),a=e.size,o,l;return i||(i=t.materialize(t.SOURCE).source,o=g4e(m4e(),e)(i,!0),l=p4e(o,o.scale||1,o.scale||1,0,0),a=[o.width,o.height],i=o.values),s=Qe(s)?s:s(i),i=r.size(a)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(qn),n}});const sG="Feature",kee="FeatureCollection",j5t="MultiPoint";function Aee(e){$e.call(this,null,e)}Aee.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ve(Aee,$e,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],a=i&&i[1],o=e.geojson||!i&&Ha,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Fa(o))||s&&t.modified(Fa(s))||a&&t.modified(Fa(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),o&&t.visit(l,c=>n.push(o(c))),s&&a&&(t.visit(l,c=>{var f=s(c),d=a(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:sG,geometry:{type:j5t,coordinates:r}})),this.value={type:kee,features:n}}});function _ee(e){$e.call(this,null,e)}_ee.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ve(_ee,$e,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ha,s=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=f4e(e.projection),n.materialize().reflow()):a=i===Ha||t.modified(i.fields)?n.ADD_MOD:n.ADD;const o=U5t(r,e.pointRadius);return n.visit(a,l=>l[s]=r(i(l))),r.pointRadius(o),n.modifies(s)}});function U5t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Tee(e){$e.call(this,null,e)}Tee.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ve(Tee,$e,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],a=s[0],o=s[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[a]=f[0],c[o]=f[1]):(c[a]=void 0,c[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function Nee(e){$e.call(this,null,e)}Nee.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ve(Nee,$e,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=V5t(f4e(e.projection),e.field||Pl("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=r),n.modifies(i)}});function V5t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(s),a};return r.context=i=>(e.context(i),r),r}function Dee(e){$e.call(this,[],e),this.generator=dRt()}Dee.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ve(Dee,$e,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Wt(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(oAe(n[0],i)):t.add.push(qn(i)),n[0]=i,t}});function Iee(e){$e.call(this,null,e)}Iee.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ve(Iee,$e,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ha,s=H5t(e.opacity,e),a=W5t(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?W1(n.map(u=>W1(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=Kt({},u,l);r||(f.$max=W1(c.values||[])),u[o]=G5t(c,f,a.dep?a:oa(a(f)),s.dep?s:oa(s(f)))}),t.reflow(!0).modifies(o)}});function W5t(e,t){let n;return Wt(e)?(n=r=>ed(e(r,t)),n.dep=y4e(e)):n=oa(ed(e||"#888")),n}function H5t(e,t){let n;return Wt(e)?(n=r=>e(r,t),n.dep=y4e(e)):e?n=oa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function y4e(e){if(!Wt(e))return!1;const t=cs(Fa(e));return t.$x||t.$y||t.$value||t.$max}function G5t(e,t,n,r){const i=e.width,s=e.height,a=e.x1||0,o=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,f=c?b=>c[b]:b0,d=Eu(l-a,u-o),h=d.getContext("2d"),m=h.getImageData(0,0,l-a,u-o),g=m.data;for(let b=o,x=0;b<u;++b){t.$y=b-o;for(let w=a,C=b*i;w<l;++w,x+=4){t.$x=w-a,t.$value=f(w+C);const S=n(t);g[x+0]=S.r,g[x+1]=S.g,g[x+2]=S.b,g[x+3]=~~(255*r(t))}}return h.putImageData(m,0,0),d}function b4e(e){$e.call(this,null,e),this.modified(!0)}Ve(b4e,$e,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=X5t(e.type),iG.forEach(r=>{e[r]!=null&&T0e(n,r,e[r])})):iG.forEach(r=>{e.modified(r)&&T0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&q5t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function q5t(e,t){const n=Y5t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function X5t(e){const t=See((e||"mercator").toLowerCase());return t||Ce("Unrecognized projection type: "+e),t()}function T0e(e,t,n){Wt(e[t])&&e[t](n)}function Y5t(e){return e=vt(e),e.length===1?e[0]:{type:kee,features:e.reduce((t,n)=>t.concat(K5t(n)),[])}}function K5t(e){return e.type===kee?e.features:vt(e).filter(t=>t!=null).map(t=>t.type===sG?t:{type:sG,geometry:t})}const Z5t=Object.freeze(Object.defineProperty({__proto__:null,contour:Eee,geojson:Aee,geopath:_ee,geopoint:Tee,geoshape:Nee,graticule:Dee,heatmap:Iee,isocontour:Cee,kde2d:$ee,projection:b4e},Symbol.toStringTag,{value:"Module"}));function Q5t(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,o,l=0,u=0;for(s=0;s<a;++s)o=n[s],l+=o.x,u+=o.y;for(l=(l/a-e)*r,u=(u/a-t)*r,s=0;s<a;++s)o=n[s],o.x-=l,o.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function J5t(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return x4e(this.cover(t,n),t,n,e)}function x4e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},o=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,m,g,b,x,w;if(!s)return e._root=a,e;for(;s.length;)if((g=t>=(f=(o+u)/2))?o=f:u=f,(b=n>=(d=(l+c)/2))?l=d:c=d,i=s,!(s=s[x=b<<1|g]))return i[x]=a,e;if(h=+e._x.call(null,s.data),m=+e._y.call(null,s.data),t===h&&n===m)return a.next=s,i?i[x]=a:e._root=a,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(g=t>=(f=(o+u)/2))?o=f:u=f,(b=n>=(d=(l+c)/2))?l=d:c=d;while((x=b<<1|g)===(w=(m>=d)<<1|h>=f));return i[w]=s,i[x]=a,e}function e6t(e){var t,n,r=e.length,i,s,a=new Array(r),o=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,o[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>f&&(f=s));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)x4e(this,a[n],o[n],e[n]);return this}function t6t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,o=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function n6t(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function r6t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function lo(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function i6t(e,t,n){var r,i=this._x0,s=this._y0,a,o,l,u,c=this._x1,f=this._y1,d=[],h=this._root,m,g;for(h&&d.push(new lo(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);m=d.pop();)if(!(!(h=m.node)||(a=m.x0)>c||(o=m.y0)>f||(l=m.x1)<i||(u=m.y1)<s))if(h.length){var b=(a+l)/2,x=(o+u)/2;d.push(new lo(h[3],b,x,l,u),new lo(h[2],a,x,b,u),new lo(h[1],b,o,l,x),new lo(h[0],a,o,b,x)),(g=(t>=x)<<1|e>=b)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=m)}else{var w=e-+this._x.call(null,h.data),C=t-+this._y.call(null,h.data),S=w*w+C*C;if(S<n){var E=Math.sqrt(n=S);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function s6t(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,c,f,d,h,m,g,b,x;if(!n)return this;if(n.length)for(;;){if((m=c>=(d=(a+l)/2))?a=d:l=d,(g=f>=(h=(o+u)/2))?o=h:u=h,t=n,!(n=n[b=g<<1|m]))return this;if(!n.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(r=t,x=b)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[b]=s:delete t[b],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function a6t(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function o6t(){return this._root}function l6t(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function u6t(e){var t=[],n,r=this._root,i,s,a,o,l;for(r&&t.push(new lo(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var u=(s+o)/2,c=(a+l)/2;(i=r[3])&&t.push(new lo(i,u,c,o,l)),(i=r[2])&&t.push(new lo(i,s,c,u,l)),(i=r[1])&&t.push(new lo(i,u,a,o,c)),(i=r[0])&&t.push(new lo(i,s,a,u,c))}return this}function c6t(e){var t=[],n=[],r;for(this._root&&t.push(new lo(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,u=r.y1,c=(a+l)/2,f=(o+u)/2;(s=i[0])&&t.push(new lo(s,a,o,c,f)),(s=i[1])&&t.push(new lo(s,c,o,l,f)),(s=i[2])&&t.push(new lo(s,a,f,c,u)),(s=i[3])&&t.push(new lo(s,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function f6t(e){return e[0]}function d6t(e){return arguments.length?(this._x=e,this):this._x}function h6t(e){return e[1]}function p6t(e){return arguments.length?(this._y=e,this):this._y}function Oee(e,t,n){var r=new Ree(t??f6t,n??h6t,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Ree(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function N0e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var To=Oee.prototype=Ree.prototype;To.copy=function(){var e=new Ree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=N0e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=N0e(r));return e};To.add=J5t;To.addAll=e6t;To.cover=t6t;To.data=n6t;To.extent=r6t;To.find=i6t;To.remove=s6t;To.removeAll=a6t;To.root=o6t;To.size=l6t;To.visit=u6t;To.visitAfter=c6t;To.x=d6t;To.y=p6t;function co(e){return function(){return e}}function _0(e){return(e()-.5)*1e-6}function m6t(e){return e.x+e.vx}function g6t(e){return e.y+e.vy}function y6t(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=co(e==null?1:+e));function a(){for(var u,c=t.length,f,d,h,m,g,b,x=0;x<s;++x)for(f=Oee(t,m6t,g6t).visitAfter(o),u=0;u<c;++u)d=t[u],g=n[d.index],b=g*g,h=d.x+d.vx,m=d.y+d.vy,f.visit(w);function w(C,S,E,A,k){var N=C.data,I=C.r,T=g+I;if(N){if(N.index>d.index){var D=h-N.x-N.vx,L=m-N.y-N.vy,P=D*D+L*L;P<T*T&&(D===0&&(D=_0(r),P+=D*D),L===0&&(L=_0(r),P+=L*L),P=(T-(P=Math.sqrt(P)))/P*i,d.vx+=(D*=P)*(T=(I*=I)/(b+I)),d.vy+=(L*=P)*T,N.vx-=D*(T=1-T),N.vy-=L*T)}return}return S>h+T||A<h-T||E>m+T||k<m-T}}function o(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return a.initialize=function(u,c){t=u,r=c,l()},a.iterations=function(u){return arguments.length?(s=+u,a):s},a.strength=function(u){return arguments.length?(i=+u,a):i},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:co(+u),l(),a):e},a}function b6t(e){return e.index}function D0e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function x6t(e){var t=b6t,n=f,r,i=co(30),s,a,o,l,u,c=1;e==null&&(e=[]);function f(b){return 1/Math.min(o[b.source.index],o[b.target.index])}function d(b){for(var x=0,w=e.length;x<c;++x)for(var C=0,S,E,A,k,N,I,T;C<w;++C)S=e[C],E=S.source,A=S.target,k=A.x+A.vx-E.x-E.vx||_0(u),N=A.y+A.vy-E.y-E.vy||_0(u),I=Math.sqrt(k*k+N*N),I=(I-s[C])/I*b*r[C],k*=I,N*=I,A.vx-=k*(T=l[C]),A.vy-=N*T,E.vx+=k*(T=1-T),E.vy+=N*T}function h(){if(a){var b,x=a.length,w=e.length,C=new Map(a.map((E,A)=>[t(E,A,a),E])),S;for(b=0,o=new Array(x);b<w;++b)S=e[b],S.index=b,typeof S.source!="object"&&(S.source=D0e(C,S.source)),typeof S.target!="object"&&(S.target=D0e(C,S.target)),o[S.source.index]=(o[S.source.index]||0)+1,o[S.target.index]=(o[S.target.index]||0)+1;for(b=0,l=new Array(w);b<w;++b)S=e[b],l[b]=o[S.source.index]/(o[S.source.index]+o[S.target.index]);r=new Array(w),m(),s=new Array(w),g()}}function m(){if(a)for(var b=0,x=e.length;b<x;++b)r[b]=+n(e[b],b,e)}function g(){if(a)for(var b=0,x=e.length;b<x;++b)s[b]=+i(e[b],b,e)}return d.initialize=function(b,x){a=b,u=x,h()},d.links=function(b){return arguments.length?(e=b,h(),d):e},d.id=function(b){return arguments.length?(t=b,d):t},d.iterations=function(b){return arguments.length?(c=+b,d):c},d.strength=function(b){return arguments.length?(n=typeof b=="function"?b:co(+b),m(),d):n},d.distance=function(b){return arguments.length?(i=typeof b=="function"?b:co(+b),g(),d):i},d}var v6t={value:()=>{}};function v4e(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ZI(n)}function ZI(e){this._=e}function w6t(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ZI.prototype=v4e.prototype={constructor:ZI,on:function(e,t){var n=this._,r=w6t(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=S6t(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=I0e(n[i],e.name,t);else if(t==null)for(i in n)n[i]=I0e(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ZI(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function S6t(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function I0e(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=v6t,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var lv=0,d$=0,v3=0,w4e=1e3,m5,h$,g5=0,Ty=0,L9=0,QE=typeof performance=="object"&&performance.now?performance:Date,S4e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fee(){return Ty||(S4e(C6t),Ty=QE.now()+L9)}function C6t(){Ty=0}function y5(){this._call=this._time=this._next=null}y5.prototype=C4e.prototype={constructor:y5,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fee():+n)+(t==null?0:+t),!this._next&&h$!==this&&(h$?h$._next=this:m5=this,h$=this),this._call=e,this._time=n,aG()},stop:function(){this._call&&(this._call=null,this._time=1/0,aG())}};function C4e(e,t,n){var r=new y5;return r.restart(e,t,n),r}function $6t(){Fee(),++lv;for(var e=m5,t;e;)(t=Ty-e._time)>=0&&e._call.call(void 0,t),e=e._next;--lv}function O0e(){Ty=(g5=QE.now())+L9,lv=d$=0;try{$6t()}finally{lv=0,k6t(),Ty=0}}function E6t(){var e=QE.now(),t=e-g5;t>w4e&&(L9-=t,g5=e)}function k6t(){for(var e,t=m5,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:m5=n);h$=e,aG(r)}function aG(e){if(!lv){d$&&(d$=clearTimeout(d$));var t=e-Ty;t>24?(e<1/0&&(d$=setTimeout(O0e,e-QE.now()-L9)),v3&&(v3=clearInterval(v3))):(v3||(g5=QE.now(),v3=setInterval(E6t,w4e)),lv=1,S4e(O0e))}}function A6t(e,t,n){var r=new y5,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,a,o){a=+a,o=o==null?Fee():+o,r._restart(function l(u){u+=i,r._restart(l,i+=a,o),s(u)},a,o)},r.restart(e,t,n),r)}const _6t=1664525,T6t=1013904223,R0e=4294967296;function N6t(){let e=1;return()=>(e=(_6t*e+T6t)%R0e)/R0e}function D6t(e){return e.x}function I6t(e){return e.y}var O6t=10,R6t=Math.PI*(3-Math.sqrt(5));function F6t(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,l=C4e(f),u=v4e("tick","end"),c=N6t();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var b,x=e.length,w;g===void 0&&(g=1);for(var C=0;C<g;++C)for(n+=(s-n)*i,o.forEach(function(S){S(n)}),b=0;b<x;++b)w=e[b],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return t}function h(){for(var g=0,b=e.length,x;g<b;++g){if(x=e[g],x.index=g,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var w=O6t*Math.sqrt(.5+g),C=g*R6t;x.x=w*Math.cos(C),x.y=w*Math.sin(C)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function m(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),o.forEach(m),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(c=g,o.forEach(m),t):c},force:function(g,b){return arguments.length>1?(b==null?o.delete(g):o.set(g,m(b)),t):o.get(g)},find:function(g,b,x){var w=0,C=e.length,S,E,A,k,N;for(x==null?x=1/0:x*=x,w=0;w<C;++w)k=e[w],S=g-k.x,E=b-k.y,A=S*S+E*E,A<x&&(N=k,x=A);return N},on:function(g,b){return arguments.length>1?(u.on(g,b),t):u.on(g)}}}function M6t(){var e,t,n,r,i=co(-30),s,a=1,o=1/0,l=.81;function u(h){var m,g=e.length,b=Oee(e,D6t,I6t).visitAfter(f);for(r=h,m=0;m<g;++m)t=e[m],b.visit(d)}function c(){if(e){var h,m=e.length,g;for(s=new Array(m),h=0;h<m;++h)g=e[h],s[g.index]=+i(g,h,e)}}function f(h){var m=0,g,b,x=0,w,C,S;if(h.length){for(w=C=S=0;S<4;++S)(g=h[S])&&(b=Math.abs(g.value))&&(m+=g.value,x+=b,w+=b*g.x,C+=b*g.y);h.x=w/x,h.y=C/x}else{g=h,g.x=g.data.x,g.y=g.data.y;do m+=s[g.data.index];while(g=g.next)}h.value=m}function d(h,m,g,b){if(!h.value)return!0;var x=h.x-t.x,w=h.y-t.y,C=b-m,S=x*x+w*w;if(C*C/l<S)return S<o&&(x===0&&(x=_0(n),S+=x*x),w===0&&(w=_0(n),S+=w*w),S<a&&(S=Math.sqrt(a*S)),t.vx+=x*h.value*r/S,t.vy+=w*h.value*r/S),!0;if(h.length||S>=o)return;(h.data!==t||h.next)&&(x===0&&(x=_0(n),S+=x*x),w===0&&(w=_0(n),S+=w*w),S<a&&(S=Math.sqrt(a*S)));do h.data!==t&&(C=s[h.data.index]*r/S,t.vx+=x*C,t.vy+=w*C);while(h=h.next)}return u.initialize=function(h,m){e=h,n=m,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:co(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.distanceMax=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function L6t(e){var t=co(.1),n,r,i;typeof e!="function"&&(e=co(e==null?0:+e));function s(o){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:co(+o),a(),s):t},s.x=function(o){return arguments.length?(e=typeof o=="function"?o:co(+o),a(),s):e},s}function P6t(e){var t=co(.1),n,r,i;typeof e!="function"&&(e=co(e==null?0:+e));function s(o){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:co(+o),a(),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:co(+o),a(),s):e},s}const F0e={center:Q5t,collide:y6t,nbody:M6t,link:x6t,x:L6t,y:P6t},p$="forces",oG=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],B6t=["static","iterations"],$4e=["x","y","vx","vy"];function Mee(e){$e.call(this,null,e)}Mee.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:$4e}]};Ve(Mee,$e,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(oG),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&E4e(n,e,0,t)):(this.value=n=j6t(t.source,e),n.on("tick",z6t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(B6t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,u=o.length,c;l<u;++l)if(c=o[l],!(c.name!==p$||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,a;i<s;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies($4e)}});function z6t(e,t){return()=>e.touch(t).run()}function j6t(e,t){const n=F6t(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),E4e(n,t,!0).on("end",()=>s=!0)}function E4e(e,t,n,r){var i=vt(t.forces),s,a,o,l;for(s=0,a=oG.length;s<a;++s)o=oG[s],o!==p$&&t.modified(o)&&e[o](t[o]);for(s=0,a=i.length;s<a;++s)l=p$+s,o=n||t.modified(p$,s)?V6t(i[s]):r&&U6t(i[s],r)?e.force(l):null,o&&e.force(l,o);for(a=e.numForces||0;s<a;++s)e.force(p$+s,null);return e.numForces=i.length,e}function U6t(e,t){var n,r;for(n in e)if(Wt(r=e[n])&&t.modified(Fa(r)))return 1;return 0}function V6t(e){var t,n;gt(F0e,e.force)||Ce("Unrecognized force: "+e.force),t=F0e[e.force]();for(n in e)Wt(t[n])&&W6t(t[n],e[n],e);return t}function W6t(e,t,n){e(Wt(t)?r=>t(r,n):t)}const H6t=Object.freeze(Object.defineProperty({__proto__:null,force:Mee},Symbol.toStringTag,{value:"Module"}));function G6t(e,t){return e.parent===t.parent?1:2}function q6t(e){return e.reduce(X6t,0)/e.length}function X6t(e,t){return e+t.x}function Y6t(e){return 1+e.reduce(K6t,0)}function K6t(e,t){return Math.max(e,t.y)}function Z6t(e){for(var t;t=e.children;)e=t[0];return e}function Q6t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function J6t(){var e=G6t,t=1,n=1,r=!1;function i(s){var a,o=0;s.eachAfter(function(d){var h=d.children;h?(d.x=q6t(h),d.y=Y6t(h)):(d.x=a?o+=e(d,a):0,d.y=0,a=d)});var l=Z6t(s),u=Q6t(s),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function eFt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function tFt(){return this.eachAfter(eFt)}function nFt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function rFt(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function iFt(e,t){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function sFt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function aFt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function oFt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function lFt(e){for(var t=this,n=uFt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function uFt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function cFt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function fFt(){return Array.from(this)}function dFt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function hFt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*pFt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function Lee(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=yFt)):t===void 0&&(t=gFt);for(var n=new uv(e),r,i=[n],s,a,o,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new uv(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(k4e)}function mFt(){return Lee(this).eachBefore(bFt)}function gFt(e){return e.children}function yFt(e){return Array.isArray(e)?e[1]:null}function bFt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function k4e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function uv(e){this.data=e,this.depth=this.height=0,this.parent=null}uv.prototype=Lee.prototype={constructor:uv,count:tFt,each:nFt,eachAfter:iFt,eachBefore:rFt,find:sFt,sum:aFt,sort:oFt,path:lFt,ancestors:cFt,descendants:fFt,leaves:dFt,links:hFt,copy:mFt,[Symbol.iterator]:pFt};function QI(e){return e==null?null:A4e(e)}function A4e(e){if(typeof e!="function")throw new Error;return e}function p1(){return 0}function H2(e){return function(){return e}}const xFt=1664525,vFt=1013904223,M0e=4294967296;function wFt(){let e=1;return()=>(e=(xFt*e+vFt)%M0e)/M0e}function SFt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CFt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function $Ft(e,t){for(var n=0,r=(e=CFt(Array.from(e),t)).length,i=[],s,a;n<r;)s=e[n],a&&_4e(a,s)?++n:(a=kFt(i=EFt(i,s)),n=0);return a}function EFt(e,t){var n,r;if(Jj(t,e))return[t];for(n=0;n<e.length;++n)if($D(t,e[n])&&Jj(m$(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if($D(m$(e[n],e[r]),t)&&$D(m$(e[n],t),e[r])&&$D(m$(e[r],t),e[n])&&Jj(T4e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function $D(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function _4e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Jj(e,t){for(var n=0;n<t.length;++n)if(!_4e(e,t[n]))return!1;return!0}function kFt(e){switch(e.length){case 1:return AFt(e[0]);case 2:return m$(e[0],e[1]);case 3:return T4e(e[0],e[1],e[2])}}function AFt(e){return{x:e.x,y:e.y,r:e.r}}function m$(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,a=t.y,o=t.r,l=s-n,u=a-r,c=o-i,f=Math.sqrt(l*l+u*u);return{x:(n+s+l/f*c)/2,y:(r+a+u/f*c)/2,r:(f+i+o)/2}}function T4e(e,t,n){var r=e.x,i=e.y,s=e.r,a=t.x,o=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-a,h=r-u,m=i-o,g=i-c,b=l-s,x=f-s,w=r*r+i*i-s*s,C=w-a*a-o*o+l*l,S=w-u*u-c*c+f*f,E=h*m-d*g,A=(m*S-g*C)/(E*2)-r,k=(g*b-m*x)/E,N=(h*C-d*S)/(E*2)-i,I=(d*x-h*b)/E,T=k*k+I*I-1,D=2*(s+A*k+N*I),L=A*A+N*N-s*s,P=-(Math.abs(T)>1e-6?(D+Math.sqrt(D*D-4*T*L))/(2*T):L/D);return{x:r+A+k*P,y:i+N+I*P,r:P}}function L0e(e,t,n){var r=e.x-t.x,i,s,a=e.y-t.y,o,l,u=r*r+a*a;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-o*a,n.y=e.y-i*a+o*r):(i=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-o*a,n.y=t.y+i*a+o*r)):(n.x=t.x+n.r,n.y=t.y)}function P0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function B0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function ED(e){this._=e,this.next=null,this.previous=null}function _Ft(e,t){if(!(s=(e=SFt(e)).length))return 0;var n,r,i,s,a,o,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;L0e(r,n,i=e[2]),n=new ED(n),r=new ED(r),i=new ED(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){L0e(n._,r._,i=e[l]),i=new ED(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(P0e(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(P0e(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=B0e(n);(i=i.next)!==r;)(o=B0e(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=$Ft(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function TFt(e){return Math.sqrt(e.value)}function NFt(){var e=null,t=1,n=1,r=p1;function i(s){const a=wFt();return s.x=t/2,s.y=n/2,e?s.eachBefore(z0e(e)).eachAfter(eU(r,.5,a)).eachBefore(j0e(1)):s.eachBefore(z0e(TFt)).eachAfter(eU(p1,1,a)).eachAfter(eU(r,s.r/Math.min(t,n),a)).eachBefore(j0e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=QI(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:H2(+s),i):r},i}function z0e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function eU(e,t,n){return function(r){if(i=r.children){var i,s,a=i.length,o=e(r)*t||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=_Ft(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function j0e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function N4e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function oT(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,u=e.value&&(r-t)/e.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*u}function DFt(){var e=1,t=1,n=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(s(t,o)),r&&a.eachBefore(N4e),a}function s(a,o){return function(l){l.children&&oT(l,l.x0,a*(l.depth+1)/o,l.x1,a*(l.depth+2)/o);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var IFt={depth:-1},U0e={},tU={};function OFt(e){return e.id}function RFt(e){return e.parentId}function V0e(){var e=OFt,t=RFt,n;function r(i){var s=Array.from(i),a=e,o=t,l,u,c,f,d,h,m,g,b=new Map;if(n!=null){const x=s.map((S,E)=>FFt(n(S,E,i))),w=x.map(W0e),C=new Set(x).add("");for(const S of w)C.has(S)||(C.add(S),x.push(S),w.push(W0e(S)),s.push(tU));a=(S,E)=>x[E],o=(S,E)=>w[E]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new uv(u),(m=a(u,c,i))!=null&&(m+="")&&(g=h.id=m,b.set(g,b.has(g)?U0e:h)),(m=o(u,c,i))!=null&&(m+="")&&(h.parent=m);for(c=0;c<l;++c)if(h=s[c],m=h.parent){if(d=b.get(m),!d)throw new Error("missing: "+m);if(d===U0e)throw new Error("ambiguous: "+m);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===tU&&f.children.length===1;)f=f.children[0],--l;for(let x=s.length-1;x>=0&&(h=s[x],h.data===tU);--x)h.data=null}if(f.parent=IFt,f.eachBefore(function(x){x.depth=x.parent.depth+1,--l}).eachBefore(k4e),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=QI(i),r):e},r.parentId=function(i){return arguments.length?(t=QI(i),r):t},r.path=function(i){return arguments.length?(n=QI(i),r):n},r}function FFt(e){e=`${e}`;let t=e.length;return lG(e,t-1)&&!lG(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function W0e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!lG(e,t););return e.slice(0,t)}function lG(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function MFt(e,t){return e.parent===t.parent?1:2}function nU(e){var t=e.children;return t?t[0]:e.t}function rU(e){var t=e.children;return t?t[t.length-1]:e.t}function LFt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function PFt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function BFt(e,t,n){return e.a.parent===t.parent?e.a:n}function JI(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}JI.prototype=Object.create(uv.prototype);function zFt(e){for(var t=new JI(e,0),n,r=[t],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new JI(s[a],a)),i.parent=n;return(t.parent=new JI(null,0)).children=[t],t}function jFt(){var e=MFt,t=1,n=1,r=null;function i(u){var c=zFt(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(w){w.x<f.x&&(f=w),w.x>d.x&&(d=w),w.depth>h.depth&&(h=w)});var m=f===d?1:e(f,d)/2,g=m-f.x,b=t/(d.x+m+g),x=n/(h.depth||1);u.eachBefore(function(w){w.x=(w.x+g)*b,w.y=w.depth*x})}return u}function s(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){PFt(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=o(u,d,u.parent.A||f[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function o(u,c,f){if(c){for(var d=u,h=u,m=c,g=d.parent.children[0],b=d.m,x=h.m,w=m.m,C=g.m,S;m=rU(m),d=nU(d),m&&d;)g=nU(g),h=rU(h),h.a=u,S=m.z+w-d.z-b+e(m._,d._),S>0&&(LFt(BFt(m,u,f),u,S),b+=S,x+=S),w+=m.m,b+=d.m,C+=g.m,x+=h.m;m&&!rU(h)&&(h.t=m,h.m+=w-x),d&&!nU(g)&&(g.t=d,g.m+=b-C,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function P9(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,u=e.value&&(i-n)/e.value;++o<l;)a=s[o],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var D4e=(1+Math.sqrt(5))/2;function I4e(e,t,n,r,i,s){for(var a=[],o=t.children,l,u,c=0,f=0,d=o.length,h,m,g=t.value,b,x,w,C,S,E,A;c<d;){h=i-n,m=s-r;do b=o[f++].value;while(!b&&f<d);for(x=w=b,E=Math.max(m/h,h/m)/(g*e),A=b*b*E,S=Math.max(w/A,A/x);f<d;++f){if(b+=u=o[f].value,u<x&&(x=u),u>w&&(w=u),A=b*b*E,C=Math.max(w/A,A/x),C>S){b-=u;break}S=C}a.push(l={value:b,dice:h<m,children:o.slice(c,f)}),l.dice?oT(l,n,r,i,g?r+=m*b/g:s):P9(l,n,r,g?n+=h*b/g:i,s),g-=b,c=f}return a}const O4e=function e(t){function n(r,i,s,a,o){I4e(t,r,i,s,a,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(D4e);function UFt(){var e=O4e,t=!1,n=1,r=1,i=[0],s=p1,a=p1,o=p1,l=p1,u=p1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(N4e),d}function f(d){var h=i[d.depth],m=d.x0+h,g=d.y0+h,b=d.x1-h,x=d.y1-h;b<m&&(m=b=(m+b)/2),x<g&&(g=x=(g+x)/2),d.x0=m,d.y0=g,d.x1=b,d.y1=x,d.children&&(h=i[d.depth+1]=s(d)/2,m+=u(d)-h,g+=a(d)-h,b-=o(d)-h,x-=l(d)-h,b<m&&(m=b=(m+b)/2),x<g&&(g=x=(g+x)/2),e(d,m,g,b,x))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=A4e(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:H2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:H2(+d),c):a},c.paddingRight=function(d){return arguments.length?(o=typeof d=="function"?d:H2(+d),c):o},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:H2(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:H2(+d),c):u},c}function VFt(e,t,n,r,i){var s=e.children,a,o=s.length,l,u=new Array(o+1);for(u[0]=l=a=0;a<o;++a)u[a+1]=l+=s[a].value;c(0,o,e.value,t,n,r,i);function c(f,d,h,m,g,b,x){if(f>=d-1){var w=s[f];w.x0=m,w.y0=g,w.x1=b,w.y1=x;return}for(var C=u[f],S=h/2+C,E=f+1,A=d-1;E<A;){var k=E+A>>>1;u[k]<S?E=k+1:A=k}S-u[E-1]<u[E]-S&&f+1<E&&--E;var N=u[E]-C,I=h-N;if(b-m>x-g){var T=h?(m*I+b*N)/h:b;c(f,E,N,m,g,T,x),c(E,d,I,T,g,b,x)}else{var D=h?(g*I+x*N)/h:x;c(f,E,N,m,g,b,D),c(E,d,I,m,D,b,x)}}}function WFt(e,t,n,r,i){(e.depth&1?P9:oT)(e,t,n,r,i)}const HFt=function e(t){function n(r,i,s,a,o){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,m=l.length,g=r.value;++d<m;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?oT(u,i,s,a,g?s+=(o-s)*u.value/g:o):P9(u,i,s,g?i+=(a-i)*u.value/g:a,o),g-=u.value}else r._squarify=l=I4e(t,r,i,s,a,o),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(D4e);function uG(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Pee(e){$e.call(this,null,e)}Pee.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const GFt=e=>e.values;Ve(Pee,$e,{transform(e,t){t.source||Ce("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(a=>{a.children&&iS(a.data)&&i.rem.push(a.data)}),this.value=s=Lee({values:vt(e.keys).reduce((a,o)=>(a.key(o),a),qFt()).entries(i.source)},GFt),n&&s.each(a=>{a.children&&(a=qn(a.data),i.add.push(a),i.source.push(a))}),uG(s,Tt,Tt)),i.source.root=s,i}});function qFt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const a=i.length,o=e[s++],l={},u={};let c=-1,f,d,h;for(;++c<a;)f=o(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],s);return u}function r(i,s){if(++s>e.length)return i;const a=[];for(const o in i)a.push({key:o,values:r(i[o],s)});return a}return t}function fp(e){$e.call(this,null,e)}const XFt=(e,t)=>e.parent===t.parent?1:2;Ve(fp,$e,{transform(e,t){(!t.source||!t.source.root)&&Ce(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(lb(e.sort,a=>a.data)),YFt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?XFt:Kw);try{this.value=n(i)}catch(a){Ce(a)}return i.each(a=>KFt(a,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function YFt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function KFt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const cG=["x","y","r","depth","children"];function Bee(e){fp.call(this,e)}Bee.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cG.length,default:cG}]};Ve(Bee,fp,{layout:NFt,params:["radius","size","padding"],fields:cG});const fG=["x0","y0","x1","y1","depth","children"];function zee(e){fp.call(this,e)}zee.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fG.length,default:fG}]};Ve(zee,fp,{layout:DFt,params:["size","round","padding"],fields:fG});function jee(e){$e.call(this,null,e)}jee.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ve(jee,$e,{transform(e,t){t.source||Ce("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?uG(V0e().id(e.key).parentId(e.parentKey)(i.source),e.key,zs):uG(V0e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const H0e={tidy:jFt,cluster:J6t},dG=["x","y","depth","children"];function Uee(e){fp.call(this,e)}Uee.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:dG.length,default:dG}]};Ve(Uee,fp,{layout(e){const t=e||"tidy";if(gt(H0e,t))return H0e[t]();Ce("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:dG});function Vee(e){$e.call(this,[],e)}Vee.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ve(Vee,$e,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ce("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>s[Tt(a)]=1),r.each(a=>{const o=a.data,l=a.parent&&a.parent.data;l&&s[Tt(o)]&&s[Tt(l)]&&i.add.push(qn({source:l,target:o}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>s[Tt(a)]=1),n.forEach(a=>{(s[Tt(a.source)]||s[Tt(a.target)])&&i.mod.push(a)})),i}});const G0e={binary:VFt,dice:oT,slice:P9,slicedice:WFt,squarify:O4e,resquarify:HFt},hG=["x0","y0","x1","y1","depth","children"];function Wee(e){fp.call(this,e)}Wee.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hG.length,default:hG}]};Ve(Wee,fp,{layout(){const e=UFt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{gt(G0e,t)?e.tile(G0e[t]):Ce("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:hG});const ZFt=Object.freeze(Object.defineProperty({__proto__:null,nest:Pee,pack:Bee,partition:zee,stratify:jee,tree:Uee,treelinks:Vee,treemap:Wee},Symbol.toStringTag,{value:"Module"}));let R4e=0;function QFt(){R4e=0}const b5="p_";function Hee(e){return e&&e.gradient}function F4e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?b5:"";return i||(i=e.id="gradient_"+R4e++,r==="radial"?(e.x1=af(e.x1,.5),e.y1=af(e.y1,.5),e.r1=af(e.r1,0),e.x2=af(e.x2,.5),e.y2=af(e.y2,.5),e.r2=af(e.r2,.5),s=b5):(e.x1=af(e.x1,0),e.y1=af(e.y1,0),e.x2=af(e.x2,1),e.y2=af(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function af(e,t){return e??t}function M4e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const q0e={basis:{curve:XQ},"basis-closed":{curve:YQ},"basis-open":{curve:KQ},bundle:{curve:ZQ,tension:"beta",value:.85},cardinal:{curve:JQ,tension:"tension",value:0},"cardinal-open":{curve:rJ,tension:"tension",value:0},"cardinal-closed":{curve:tJ,tension:"tension",value:0},"catmull-rom":{curve:sJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:aJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:oJ,tension:"alpha",value:.5},linear:{curve:B_},"linear-closed":{curve:lJ},monotone:{horizontal:cJ,vertical:uJ},natural:{curve:fJ},step:{curve:dJ},"step-after":{curve:pJ},"step-before":{curve:hJ}};function Gee(e,t,n){var r=gt(q0e,e)&&q0e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const JFt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},eMt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,tMt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,nMt=/^((\s+,?\s*)|(,\s*))/,rMt=/^[01]/;function cv(e){const t=[];return(e.match(eMt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),a=JFt[s],o=iMt(s,a,r.slice(1).trim()),l=o.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...o.slice(0,a)]),l!==a){s==="m"&&(i=i==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([i,...o.slice(u,u+a)])}}),t}function iMt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?rMt:tMt,o=n.slice(i).match(a);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const l=n.slice(i).match(nMt);l!==null&&(i+=l[0].length)}return r}const pm=Math.PI/180,sMt=1e-14,m1=Math.PI/2,$f=Math.PI*2,_2=Math.sqrt(3)/2;var iU={},sU={},L4e=[].join;function aMt(e,t,n,r,i,s,a,o,l){const u=L4e.call(arguments);if(iU[u])return iU[u];const c=a*pm,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(o-e)*.5+f*(l-t)*.5,m=d*(l-t)*.5-f*(o-e)*.5;let g=h*h/(n*n)+m*m/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const b=d/n,x=f/n,w=-f/r,C=d/r,S=b*o+x*l,E=w*o+C*l,A=b*e+x*t,k=w*e+C*t;let I=1/((A-S)*(A-S)+(k-E)*(k-E))-.25;I<0&&(I=0);let T=Math.sqrt(I);s==i&&(T=-T);const D=.5*(S+A)-T*(k-E),L=.5*(E+k)+T*(A-S),P=Math.atan2(E-L,S-D);let F=Math.atan2(k-L,A-D)-P;F<0&&s===1?F+=$f:F>0&&s===0&&(F-=$f);const R=Math.ceil(Math.abs(F/(m1+.001))),j=[];for(let H=0;H<R;++H){const G=P+H*F/R,z=P+(H+1)*F/R;j[H]=[D,L,G,z,n,r,f,d]}return iU[u]=j}function oMt(e){const t=L4e.call(e);if(sU[t])return sU[t];var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7];const c=u*a,f=-l*o,d=l*a,h=u*o,m=Math.cos(i),g=Math.sin(i),b=Math.cos(s),x=Math.sin(s),w=.5*(s-i),C=Math.sin(w*.5),S=8/3*C*C/Math.sin(w),E=n+m-S*g,A=r+g+S*m,k=n+b,N=r+x,I=k+S*x,T=N-S*b;return sU[t]=[c*E+f*A,d*E+h*A,c*I+f*T,d*I+h*T,c*k+f*N,d*k+h*N]}const au=["l",0,0,0,0,0,0,0];function lMt(e,t,n){const r=au[0]=e[0];if(r==="a"||r==="A")au[1]=t*e[1],au[2]=n*e[2],au[3]=e[3],au[4]=e[4],au[5]=e[5],au[6]=t*e[6],au[7]=n*e[7];else if(r==="h"||r==="H")au[1]=t*e[1];else if(r==="v"||r==="V")au[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)au[i]=(i%2==1?t:n)*e[i];return au}function JE(e,t,n,r,i,s){var a,o=null,l=0,u=0,c=0,f=0,d,h,m,g,b=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var w=0,C=t.length;w<C;++w){switch(a=t[w],(i!==1||s!==1)&&(a=lMt(a,i,s)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+r);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+r);break;case"h":l+=a[1],e.lineTo(l+n,u+r);break;case"H":l=a[1],e.lineTo(l+n,u+r);break;case"v":u+=a[1],e.lineTo(l+n,u+r);break;case"V":u=a[1],e.lineTo(l+n,u+r);break;case"m":l+=a[1],u+=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"M":l=a[1],u=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"c":d=l+a[5],h=u+a[6],c=l+a[3],f=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=a[5],u=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+a[3],h=u+a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+a[1]+n,u+a[2]+r,d+n,h+r),c=l+a[1],f=u+a[2],l=d,u=h;break;case"S":d=a[3],h=a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,a[1]+n,a[2]+r,d+n,h+r),l=d,u=h,c=a[1],f=a[2];break;case"q":d=l+a[3],h=u+a[4],c=l+a[1],f=u+a[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,h+r),l=d,u=h,c=a[1],f=a[2];break;case"t":d=l+a[1],h=u+a[2],o[0].match(/[QqTt]/)===null?(c=l,f=u):o[0]==="t"?(c=2*l-m,f=2*u-g):o[0]==="q"&&(c=2*l-c,f=2*u-f),m=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+a[1],f=u+a[2];break;case"T":d=a[1],h=a[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":X0e(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+r]),l+=a[6],u+=a[7];break;case"A":X0e(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],u=a[7];break;case"z":case"Z":l=b,u=x,e.closePath();break}o=a}}function X0e(e,t,n,r){const i=aMt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const a=oMt(i[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const Y0e=.5773502691896257,K0e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,$f)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=_2*n,i=r-n*Y0e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=_2*n,i=r-n*Y0e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_2*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_2*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_2*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_2*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function P4e(e){return gt(K0e,e)?K0e[e]:uMt(e)}var aU={};function uMt(e){if(!gt(aU,e)){const t=cv(e);aU[e]={draw:function(n,r){JE(n,t,0,0,Math.sqrt(r)/2)}}}return aU[e]}const Qp=.448084975506;function cMt(e){return e.x}function fMt(e){return e.y}function dMt(e){return e.width}function hMt(e){return e.height}function Jd(e){return typeof e=="function"?e:()=>+e}function kD(e,t,n){return Math.max(t,Math.min(e,n))}function B4e(){var e=cMt,t=fMt,n=dMt,r=hMt,i=Jd(0),s=i,a=i,o=i,l=null;function u(c,f,d){var h,m=f??+e.call(this,c),g=d??+t.call(this,c),b=+n.call(this,c),x=+r.call(this,c),w=Math.min(b,x)/2,C=kD(+i.call(this,c),0,w),S=kD(+s.call(this,c),0,w),E=kD(+a.call(this,c),0,w),A=kD(+o.call(this,c),0,w);if(l||(l=h=Um()),C<=0&&S<=0&&E<=0&&A<=0)l.rect(m,g,b,x);else{var k=m+b,N=g+x;l.moveTo(m+C,g),l.lineTo(k-S,g),l.bezierCurveTo(k-Qp*S,g,k,g+Qp*S,k,g+S),l.lineTo(k,N-A),l.bezierCurveTo(k,N-Qp*A,k-Qp*A,N,k-A,N),l.lineTo(m+E,N),l.bezierCurveTo(m+Qp*E,N,m,N-Qp*E,m,N-E),l.lineTo(m,g+C),l.bezierCurveTo(m,g+Qp*C,m+Qp*C,g,m+C,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Jd(c),u):e},u.y=function(c){return arguments.length?(t=Jd(c),u):t},u.width=function(c){return arguments.length?(n=Jd(c),u):n},u.height=function(c){return arguments.length?(r=Jd(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=Jd(c),s=f!=null?Jd(f):i,o=d!=null?Jd(d):i,a=h!=null?Jd(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function z4e(){var e,t,n,r,i=null,s,a,o,l;function u(f,d,h){const m=h/2;if(s){var g=o-d,b=f-a;if(g||b){var x=Math.sqrt(g*g+b*b),w=(g/=x)*l,C=(b/=x)*l,S=Math.atan2(b,g);i.moveTo(a-w,o-C),i.lineTo(f-g*m,d-b*m),i.arc(f,d,m,S-Math.PI,S),i.lineTo(a+w,o+C),i.arc(a,o,l,S,S+Math.PI)}else i.arc(f,d,m,0,$f);i.closePath()}else s=1;a=f,o=d,l=m}function c(f){var d,h=f.length,m,g=!1,b;for(i==null&&(i=b=Um()),d=0;d<=h;++d)!(d<h&&r(m=f[d],d,f))===g&&(g=!g)&&(s=0),g&&u(+e(m,d,f),+t(m,d,f),+n(m,d,f));if(b)return i=null,b+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function lT(e,t){return e??t}const uT=e=>e.x||0,cT=e=>e.y||0,pMt=e=>e.width||0,mMt=e=>e.height||0,gMt=e=>(e.x||0)+(e.width||0),yMt=e=>(e.y||0)+(e.height||0),bMt=e=>e.startAngle||0,xMt=e=>e.endAngle||0,vMt=e=>e.padAngle||0,wMt=e=>e.innerRadius||0,SMt=e=>e.outerRadius||0,CMt=e=>e.cornerRadius||0,$Mt=e=>lT(e.cornerRadiusTopLeft,e.cornerRadius)||0,EMt=e=>lT(e.cornerRadiusTopRight,e.cornerRadius)||0,kMt=e=>lT(e.cornerRadiusBottomRight,e.cornerRadius)||0,AMt=e=>lT(e.cornerRadiusBottomLeft,e.cornerRadius)||0,_Mt=e=>lT(e.size,64),TMt=e=>e.size||1,B9=e=>e.defined!==!1,NMt=e=>P4e(e.shape||"circle"),DMt=GQ().startAngle(bMt).endAngle(xMt).padAngle(vMt).innerRadius(wMt).outerRadius(SMt).cornerRadius(CMt),IMt=aS().x(uT).y1(cT).y0(yMt).defined(B9),OMt=aS().y(cT).x1(uT).x0(gMt).defined(B9),RMt=Q8().x(uT).y(cT).defined(B9),FMt=B4e().x(uT).y(cT).width(pMt).height(mMt).cornerRadius($Mt,EMt,kMt,AMt),MMt=qQ().type(NMt).size(_Mt),LMt=z4e().x(uT).y(cT).defined(B9).size(TMt);function qee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function PMt(e,t){return DMt.context(e)(t)}function BMt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?OMt:IMt).curve(Gee(r,n.orient,n.tension)).context(e)(t)}function zMt(e,t){const n=t[0],r=n.interpolate||"linear";return RMt.curve(Gee(r,n.orient,n.tension)).context(e)(t)}function AS(e,t,n,r){return FMt.context(e)(t,n,r)}function jMt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function UMt(e,t){return MMt.context(e)(t)}function VMt(e,t){return LMt.context(e)(t)}var j4e=1;function U4e(){j4e=1}function Xee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+j4e++),a=i.clipping[s]||(i.clipping[s]={id:s});return Wt(r)?a.path=r(null):qee(n)?a.path=AS(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Ga(e){this.clear(),e&&this.union(e)}Ga.prototype={clone(){return new Ga(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),u=t-t*o+n*l,c=n-t*l-n*o;return[o*r-l*i+u,l*r+o*i+c,o*r-l*a+u,l*r+o*a+c,o*s-l*i+u,l*s+o*i+c,o*s-l*a+u,l*s+o*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Yee(e){this.mark=e,this.bounds=this.bounds||new Ga}function Kee(e){Yee.call(this,e),this.items=this.items||[]}Ve(Kee,Yee);function Zee(e){this._pending=0,this._loader=e||R8()}function Z0e(e){e._pending+=1}function w3(e){e._pending-=1}Zee.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Z0e(t),t._loader.sanitize(e,{context:"href"}).then(n=>(w3(t),n)).catch(()=>(w3(t),null))},loadImage(e){const t=this,n=vTt();return Z0e(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,a=gt(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>w3(t),s.onerror=()=>w3(t),s.src=i,s}).catch(r=>(w3(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function gb(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?WMt(t,r):0))}return e}function WMt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const HMt=$f-1e-8;let z9,eO,tO,N1,pG,nO,mG,gG;const T0=(e,t)=>z9.add(e,t),rO=(e,t)=>T0(eO=e,tO=t),Q0e=e=>T0(e,z9.y1),J0e=e=>T0(z9.x1,e),g1=(e,t)=>pG*e+mG*t,y1=(e,t)=>nO*e+gG*t,oU=(e,t)=>T0(g1(e,t),y1(e,t)),lU=(e,t)=>rO(g1(e,t),y1(e,t));function fT(e,t){return z9=e,t?(N1=t*pm,pG=gG=Math.cos(N1),nO=Math.sin(N1),mG=-nO):(pG=gG=1,N1=nO=mG=0),GMt}const GMt={beginPath(){},closePath(){},moveTo:lU,lineTo:lU,rect(e,t,n,r){N1?(oU(e+n,t),oU(e+n,t+r),oU(e,t+r),lU(e,t)):(T0(e+n,t+r),rO(e,t))},quadraticCurveTo(e,t,n,r){const i=g1(e,t),s=y1(e,t),a=g1(n,r),o=y1(n,r);eme(eO,i,a,Q0e),eme(tO,s,o,J0e),rO(a,o)},bezierCurveTo(e,t,n,r,i,s){const a=g1(e,t),o=y1(e,t),l=g1(n,r),u=y1(n,r),c=g1(i,s),f=y1(i,s);tme(eO,a,l,c,Q0e),tme(tO,o,u,f,J0e),rO(c,f)},arc(e,t,n,r,i,s){if(r+=N1,i+=N1,eO=n*Math.cos(i)+e,tO=n*Math.sin(i)+t,Math.abs(i-r)>HMt)T0(e-n,t-n),T0(e+n,t+n);else{const a=u=>T0(n*Math.cos(u)+e,n*Math.sin(u)+t);let o,l;if(a(r),a(i),i!==r)if(r=r%$f,r<0&&(r+=$f),i=i%$f,i<0&&(i+=$f),i<r&&(s=!s,o=r,r=i,i=o),s)for(i-=$f,o=r-r%m1,l=0;l<4&&o>i;++l,o-=m1)a(o);else for(o=r-r%m1+m1,l=0;l<4&&o<i;++l,o=o+m1)a(o)}}};function eme(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function tme(e,t,n,r,i){const s=r-e+3*t-3*n,a=e+n-2*t,o=e-t;let l=0,u=0,c;Math.abs(s)>sMt?(c=a*a+o*s,c>=0&&(c=Math.sqrt(c),l=(-a+c)/s,u=(-a-c)/s)):l=.5*o/a,0<l&&l<1&&i(nme(l,e,t,n,r)),0<u&&u<1&&i(nme(u,e,t,n,r))}function nme(e,t,n,r,i){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*r+o*e*i}var W0=(W0=Eu(1,1))?W0.getContext("2d"):null;const yG=new Ga;function Qee(e){return function(t,n){if(!W0)return!0;e(W0,t),yG.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:a}=yG;for(let o=i;o<=a;++o)for(let l=r;l<=s;++l)if(W0.isPointInPath(l,o))return!0;return!1}}function Jee(e,t){return t.contains(e.x||0,e.y||0)}function V4e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(yG.set(n,r,n+i,r+s))}function W4e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Z2(t,n,r,i,s)}function Z2(e,t,n,r,i){const{x1:s,y1:a,x2:o,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,m,g,b;for(b=0;b<4;++b){if(b===0&&(h=-u,m=-(s-t)),b===1&&(h=u,m=o-t),b===2&&(h=-c,m=-(a-n)),b===3&&(h=c,m=l-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function fv(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Qu(e,t){return e??t}function rme(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function qMt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Qu(t.x1,.5)*r,n.y1+Qu(t.y1,.5)*i,Math.max(r,i)*Qu(t.r1,0),n.x1+Qu(t.x2,.5)*r,n.y1+Qu(t.y2,.5)*i,Math.max(r,i)*Qu(t.r2,.5));else{const a=Qu(t.x1,0),o=Qu(t.y1,0),l=Qu(t.x2,1),u=Qu(t.y2,0);if(a===l||o===u||r===i)s=e.createLinearGradient(n.x1+a*r,n.y1+o*i,n.x1+l*r,n.y1+u*i);else{const c=Eu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=rme(f.createLinearGradient(a,o,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return rme(s,t.stops)}function H4e(e,t,n){return Hee(n)?qMt(e,n,t.bounds):n}function x5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=H4e(e,t,t.fill),!0):!1}var XMt=[];function dv(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=H4e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||XMt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function YMt(e,t){return e.zindex-t.zindex||e.index-t.index}function ete(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(YMt)}function _c(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=ete(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function v5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=ete(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function tte(e){return function(t,n,r){_c(n,i=>{(!r||r.intersects(i.bounds))&&G4e(e,t,i,i)})}}function KMt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&G4e(e,t,n.items[0],n.items)}}function G4e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(fv(t,n),n.fill&&x5(t,n,i)&&t.fill(),n.stroke&&dv(t,n,i)&&t.stroke()))}function j9(e){return e=e||zs,function(t,n,r,i,s,a){return r*=t.pixelRatio,i*=t.pixelRatio,v5(n,o=>{const l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&e(t,o,r,i,s,a))return o})}}function dT(e,t){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,o=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:o&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function nte(e){return j9(dT(e))}function Y1(e,t){return"translate("+e+","+t+")"}function rte(e){return"rotate("+e+")"}function ZMt(e,t){return"scale("+e+","+t+")"}function q4e(e){return Y1(e.x||0,e.y||0)}function QMt(e){return Y1(e.x||0,e.y||0)+(e.angle?" "+rte(e.angle):"")}function JMt(e){return Y1(e.x||0,e.y||0)+(e.angle?" "+rte(e.angle):"")+(e.scaleX||e.scaleY?" "+ZMt(e.scaleX||1,e.scaleY||1):"")}function ite(e,t,n){function r(a,o){a("transform",QMt(o)),a("d",t(null,o))}function i(a,o){return t(fT(a,o.angle),o),gb(a,o).translate(o.x||0,o.y||0)}function s(a,o){var l=o.x||0,u=o.y||0,c=o.angle||0;a.translate(l,u),c&&a.rotate(c*=pm),a.beginPath(),t(a,o),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:tte(s),pick:nte(s),isect:n||Qee(s)}}var e8t=ite("arc",PMt);function t8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,a,o;--i>=0;)e[i].defined!==!1&&(o=Math.abs(e[i][r]-n),o<s&&(s=o,a=e[i]));return a}function n8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],a=i*i+s*s,a<n))return e[r];return null}function r8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function ste(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(fT(l),c),gb(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const a=dT(s);function o(l,u,c,f,d,h){var m=u.items,g=u.bounds;return!m||!m.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,a(l,m,c,f)?m[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:KMt(s),pick:o,isect:Jee,tip:n}}var i8t=ste("area",BMt,t8t);function s8t(e,t){var n=t.clip;e.save(),Wt(n)?(e.beginPath(),n(e),e.clip()):X4e(e,t.group)}function X4e(e,t){e.beginPath(),qee(t)?AS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Y4e(e){const t=Qu(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function a8t(e,t){e("transform",q4e(t))}function K4e(e,t){const n=Y4e(t);e("d",AS(null,t,n,n))}function o8t(e,t){e("class","background"),e("aria-hidden",!0),K4e(e,t)}function l8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?K4e(e,t):e("d","")}function u8t(e,t,n){const r=t.clip?Xee(n,t,t):null;e("clip-path",r)}function c8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),gb(e,t),e.translate(t.x||0,t.y||0)}function ek(e,t,n,r){const i=Y4e(t);e.beginPath(),AS(e,t,(n||0)+i,(r||0)+i)}const f8t=dT(ek),d8t=dT(ek,!1),h8t=dT(ek,!0);function p8t(e,t,n){_c(t,r=>{const i=r.x||0,s=r.y||0,a=r.strokeForeground,o=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&o&&(ek(e,r,i,s),fv(e,r),r.fill&&x5(e,r,o)&&e.fill(),r.stroke&&!a&&dv(e,r,o)&&e.stroke()),e.save(),e.translate(i,s),r.clip&&X4e(e,r),n&&n.translate(-i,-s),_c(r,l=>{this.draw(e,l,n)}),n&&n.translate(i,s),e.restore(),a&&r.stroke&&o&&(ek(e,r,i,s),fv(e,r),dv(e,r,o)&&e.stroke())})}function m8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const a=n*e.pixelRatio,o=r*e.pixelRatio;return v5(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,s))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),m=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||s<f||s>m))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,g&&qee(l)&&!h8t(e,l,a,o))return e.restore(),null;const b=l.strokeForeground,x=t.interactive!==!1;return x&&b&&l.stroke&&d8t(e,l,a,o)?(e.restore(),l):(u=v5(l,w=>g8t(w,c,f)?this.pick(w,n,r,c,f):null),!u&&x&&(l.fill||!b&&l.stroke)&&f8t(e,l,a,o)&&(u=l),e.restore(),u||null)})}function g8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var y8t={type:"group",tag:"g",nested:!1,attr:a8t,bound:c8t,draw:p8t,pick:m8t,isect:V4e,content:u8t,background:o8t,foreground:l8t},tk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ate(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function ote(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function lte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function U9(e,t){return e==="center"?t/2:e==="right"?t:0}function V9(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function b8t(e,t,n){const r=ate(t,n),i=ote(t,r),s=lte(t,r),a=(t.x||0)-U9(t.align,i),o=(t.y||0)-V9(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,tk["xmlns:xlink"],"xlink:href"),e("transform",Y1(a,o)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function x8t(e,t){const n=t.image,r=ote(t,n),i=lte(t,n),s=(t.x||0)-U9(t.align,r),a=(t.y||0)-V9(t.baseline,i);return e.set(s,a,s+r,a+i)}function v8t(e,t,n){_c(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=ate(r,this);let s=ote(r,i),a=lte(r,i);if(s===0||a===0)return;let o=(r.x||0)-U9(r.align,s),l=(r.y||0)-V9(r.baseline,a),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,l+=(a-d)/2,a=d):(d=a*c,o+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(fv(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,o,l,s,a))})}var w8t={type:"image",tag:"image",nested:!1,attr:b8t,bound:x8t,draw:v8t,pick:j9(),isect:zs,get:ate,xOffset:U9,yOffset:V9},S8t=ste("line",zMt,n8t);function C8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",JMt(t)),e("d",t.path)}function iO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*pm,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=cv(n)).path=n),o&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(o),JE(e,l,0,0,s,a),e.rotate(-o),e.translate(-r,-i)):JE(e,l,r,i,s,a)}function $8t(e,t){return iO(fT(e,t.angle),t)?e.set(0,0,0,0):gb(e,t,!0)}var E8t={type:"path",tag:"path",nested:!1,attr:C8t,bound:$8t,draw:tte(iO),pick:nte(iO),isect:Qee(iO)};function k8t(e,t){e("d",AS(null,t))}function A8t(e,t){var n,r;return gb(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function ime(e,t){e.beginPath(),AS(e,t)}var _8t={type:"rect",tag:"path",nested:!1,attr:k8t,bound:A8t,draw:tte(ime),pick:nte(ime),isect:V4e};function T8t(e,t){e("transform",q4e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function N8t(e,t){var n,r;return gb(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Z4e(e,t,n){var r,i,s,a;return t.stroke&&dv(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,a),!0):!1}function D8t(e,t,n){_c(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Z4e(e,r,i)&&(fv(e,r),e.stroke())}})}function I8t(e,t,n,r){return e.isPointInStroke?Z4e(e,t,1)&&e.isPointInStroke(n,r):!1}var O8t={type:"rule",tag:"line",nested:!1,attr:T8t,bound:N8t,draw:D8t,pick:j9(I8t),isect:W4e},R8t=ite("shape",jMt),F8t=ite("symbol",UMt,Jee);const sme=E8();var yc={height:yd,measureWidth:ute,estimateWidth:bG,width:bG,canvas:Q4e};Q4e(!0);function Q4e(e){yc.width=e&&W0?ute:bG}function bG(e,t){return J4e(gm(e,t),yd(e))}function J4e(e,t){return~~(.8*e.length*t)}function ute(e,t){return yd(e)<=0||!(t=gm(e,t))?0:eDe(t,W9(e))}function eDe(e,t){const n=`(${t}) ${e}`;let r=sme.get(n);return r===void 0&&(W0.font=t,r=W0.measureText(e).width,sme.set(n,r)),r}function yd(e){return e.fontSize!=null?+e.fontSize||0:11}function mm(e){return e.lineHeight!=null?e.lineHeight:yd(e)+2}function M8t(e){return Qe(e)?e.length>1?e:e[0]:e}function hT(e){return M8t(e.lineBreak&&e.text&&!Qe(e.text)?e.text.split(e.lineBreak):e.text)}function L8t(e){const t=hT(e);return(Qe(t)?t.length-1:0)*mm(e)}function gm(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?B8t(e,n):n}function P8t(e){if(yc.width===ute){const t=W9(e);return n=>eDe(n,t)}else{const t=yd(e);return n=>J4e(n,t)}}function B8t(e,t){var n=+e.limit,r=P8t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",a=0,o=t.length,l;if(n-=r(i),s){for(;a<o;)l=a+o>>>1,r(t.slice(l))>n?a=l+1:o=l;return i+t.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),r(t.slice(0,l))<n?a=l:o=l-1;return t.slice(0,a)+i}}function pT(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function W9(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+yd(e)+"px "+pT(e,t)}function cte(e){var t=e.baseline,n=yd(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*mm(e):t==="line-bottom"?.29*n-.5*mm(e):0)}const z8t={left:"start",center:"middle",right:"end"},j$=new Ga;function H9(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-m1,t+=r*Math.cos(i),n+=r*Math.sin(i)),j$.x1=t,j$.y1=n,j$}function j8t(e,t){var n=t.dx||0,r=(t.dy||0)+cte(t),i=H9(t),s=i.x1,a=i.y1,o=t.angle||0,l;e("text-anchor",z8t[t.align]||"start"),o?(l=Y1(s,a)+" "+rte(o),(n||r)&&(l+=" "+Y1(n,r))):l=Y1(s+n,a+r),e("transform",l)}function fte(e,t,n){var r=yc.height(t),i=t.align,s=H9(t),a=s.x1,o=s.y1,l=t.dx||0,u=(t.dy||0)+cte(t)-Math.round(.8*r),c=hT(t),f;if(Qe(c)?(r+=mm(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,yc.width(t,h)),0)):f=yc.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=a,u+=o,l+f,u+r),t.angle&&!n)e.rotate(t.angle*pm,a,o);else if(n===2)return e.rotatedPoints(t.angle*pm,a,o);return e}function U8t(e,t,n){_c(t,r=>{var i=r.opacity==null?1:r.opacity,s,a,o,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=W9(r),e.textAlign=r.align||"left",s=H9(r),a=s.x1,o=s.y1,r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*pm),a=o=0),a+=r.dx||0,o+=(r.dy||0)+cte(r),c=hT(r),fv(e,r),Qe(c))for(u=mm(r),l=0;l<c.length;++l)f=gm(r,c[l]),r.fill&&x5(e,r,i)&&e.fillText(f,a,o),r.stroke&&dv(e,r,i)&&e.strokeText(f,a,o),o+=u;else f=gm(r,c),r.fill&&x5(e,r,i)&&e.fillText(f,a,o),r.stroke&&dv(e,r,i)&&e.strokeText(f,a,o);r.angle&&e.restore()}})}function V8t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=H9(t),o=a.x1,l=a.y1,u=fte(j$,t,1),c=-t.angle*pm,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(o-f*o+d*l),m=d*i+f*s+(l-d*o-f*l);return u.contains(h,m)}function W8t(e,t){const n=fte(j$,e,2);return Z2(t,n[0],n[1],n[2],n[3])||Z2(t,n[0],n[1],n[4],n[5])||Z2(t,n[4],n[5],n[6],n[7])||Z2(t,n[2],n[3],n[6],n[7])}var H8t={type:"text",tag:"text",nested:!1,attr:j8t,bound:fte,draw:U8t,pick:j9(V8t),isect:W8t},G8t=ste("trail",VMt,r8t),Ou={arc:e8t,area:i8t,group:y8t,image:w8t,line:S8t,path:E8t,rect:_8t,rule:O8t,shape:R8t,symbol:F8t,text:H8t,trail:G8t};function xG(e,t,n){var r=Ou[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ga),e,n)}var ame={mark:null};function tDe(e,t,n){var r=Ou[e.marktype],i=r.bound,s=e.items,a=s&&s.length,o,l,u,c;if(r.nested)return a?u=s[0]:(ame.mark=e,u=ame),c=xG(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ga,a)for(o=0,l=s.length;o<l;++o)t.union(xG(s[o],i,n));return e.bounds=t}const q8t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function nDe(e,t){return JSON.stringify(e,q8t,t)}function rDe(e){const t=typeof e=="string"?JSON.parse(e):e;return iDe(t)}function iDe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&iDe(n[i]);return t&&tDe(e),e}function dte(e){arguments.length?this.root=rDe(e):(this.root=sDe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Kee(this.root)])}dte.prototype={toJSON(e){return nDe(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=sDe(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function sDe(e,t){const n={bounds:new Ga,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function N0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function hte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Go(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=N0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function uc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function aDe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function G9(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function X8t(e,t,n,r){var i=e&&e.mark,s,a;if(i&&(s=Ou[i.marktype]).tip){for(a=G9(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=s.tip(i.items,a)}return e}function ym(e,t){this._active=null,this._handlers={},this._loader=e||R8(),this._tooltip=t||Y8t}function Y8t(e,t,n,r){e.element().setAttribute("title",r||"")}ym.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=N0(null,"a");for(const a in r)s.setAttribute(a,r[a]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=X8t(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),a=i.height();let o=i.x1+r[0]+n.left,l=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)o+=e.x||0,l+=e.y||0;return{x:o,y:l,width:s,height:a,left:o,top:l,right:o+s,bottom:l+a}}};function bd(e){this._el=null,this._bgcolor=null,this._loader=new Zee(e)}bd.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const K8t="keydown",Z8t="keypress",Q8t="keyup",oDe="dragenter",sO="dragleave",lDe="dragover",vG="mousedown",J8t="mouseup",w5="mousemove",U$="mouseout",uDe="mouseover",S5="click",e9t="dblclick",t9t="wheel",cDe="mousewheel",C5="touchstart",$5="touchmove",E5="touchend",n9t=[K8t,Z8t,Q8t,oDe,sO,lDe,vG,J8t,w5,U$,uDe,S5,e9t,t9t,cDe,C5,$5,E5],wG=w5,nk=U$,SG=S5;function mT(e,t){ym.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const r9t=e=>e===C5||e===$5||e===E5?[C5,$5,E5]:[e];function ome(e,t){r9t(t).forEach(n=>i9t(e,n))}function i9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function lme(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=s,this.fire(t,r),this.fire(e,r))}}function ume(e){return function(t){this.fire(e,t),this._active=null}}Ve(mT,ym,{initialize(e,t,n){return this._canvas=e&&hte(e,"canvas"),[S5,vG,w5,U$,sO].forEach(r=>ome(this,r)),ym.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:n9t,DOMMouseScroll(e){this.fire(cDe,e)},mousemove:lme(w5,uDe,U$),dragover:lme(lDe,oDe,sO),mouseout:ume(U$),dragleave:ume(sO),mousedown(e){this._down=this._active,this.fire(vG,e)},click(e){this._down===this._active&&(this.fire(S5,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(C5,e,!0)},touchmove(e){this.fire($5,e,!0)},touchend(e){this.fire(E5,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===SG&&r&&r.href?this.handleHref(t,r,r.href):(e===wG||e===nk)&&this.handleTooltip(t,r,e!==nk),i)for(let s=0,a=i.length;s<a;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(ome(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=G9(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return Ou[e.marktype].pick.call(this,s,e,t,n,r,i)}});function s9t(){return typeof window<"u"&&window.devicePixelRatio||1}var a9t=s9t();function o9t(e,t,n,r,i,s){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=a?a9t:i;e.width=t*l,e.height=n*l;for(const u in s)o[u]=s[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*r[0],l*r[1]),e}function k5(e){bd.call(this,e),this._options={},this._redraw=!1,this._dirty=new Ga,this._tempb=new Ga}const cme=bd.prototype,l9t=(e,t,n)=>new Ga().set(0,0,t,n).translate(-e[0],-e[1]);function u9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}Ve(k5,bd,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Eu(1,1,this._options.type),e&&this._canvas&&(uc(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),cme.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(cme.resize.call(this,e,t,n,r),this._canvas)o9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Ce("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,s=this._dirty,a=l9t(n,r,i);t.save();const o=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):u9t(t,a.intersect(s),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,o),t.restore(),s.clear(),this},draw(e,t,n){const r=Ou[t.marktype];t.clip&&s8t(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function pte(e,t){ym.call(this,e,t);const n=this;n._hrefHandler=CG(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=CG(n,(r,i)=>{n.handleTooltip(r,i,r.type!==nk)})}const CG=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};Ve(pte,ym,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(SG,this._hrefHandler),r.removeEventListener(wG,this._tooltipHandler),r.removeEventListener(nk,this._tooltipHandler)),this._svg=r=e&&hte(e,"svg"),r&&(r.addEventListener(SG,this._hrefHandler),r.addEventListener(wG,this._tooltipHandler),r.addEventListener(nk,this._tooltipHandler)),ym.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:CG(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const fDe="aria-hidden",mte="aria-label",gte="role",yte="aria-roledescription",dDe="graphics-object",bte="graphics-symbol",hDe=(e,t,n)=>({[gte]:e,[yte]:t,[mte]:n||void 0}),c9t=cs(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),fme={axis:{desc:"axis",caption:h9t},legend:{desc:"legend",caption:p9t},"title-text":{desc:"title",caption:e=>`Title text '${hme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${hme(e)}'`}},dme={ariaRole:gte,ariaRoleDescription:yte,description:mte};function pDe(e,t){const n=t.aria===!1;if(e(fDe,n||void 0),n||t.description==null)for(const r in dme)e(dme[r],void 0);else{const r=t.mark.marktype;e(mte,t.description),e(gte,t.ariaRole||(r==="group"?dDe:bte)),e(yte,t.ariaRoleDescription||`${r} mark`)}}function mDe(e){return e.aria===!1?{[fDe]:!0}:c9t[e.role]?null:fme[e.role]?d9t(e,fme[e.role]):f9t(e)}function f9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return hDe(n?dDe:bte,`${t} mark container`,e.description)}function d9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return hDe(t.role||bte,t.desc,n.description||r(n))}catch{return null}}function hme(e){return vt(e.text).join(" ")}function h9t(e){const t=e.datum,n=e.orient,r=t.title?gDe(e):null,i=e.context,s=i.scales[t.scale].value,a=i.dataflow.locale(),o=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${BTe(o)?"discrete":o} scale with ${JTe(a,s,e)}`}function p9t(e){const t=e.datum,n=t.title?gDe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),a=e.context,o=a.scales[i[s[0]]].value,l=a.dataflow.locale();return g9t(r)+(n?` titled '${n}'`:"")+` for ${m9t(s)} with ${JTe(l,o,e)}`}function gDe(e){try{return vt(en(e.items).items[0].text).join(" ")}catch{return null}}function m9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+en(e)}function g9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const yDe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),y9t=e=>yDe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function xte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},a=(l,u)=>(u!=null&&(t+=` ${l}="${y9t(u)}"`),o),o={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)a(h,d[h]);return o},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),o},attr:a,text:l=>(n+=yDe(l),o),toString:()=>e};return o}const bDe=e=>xDe(xte(),e)+"";function xDe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):xDe(e,r)}return e.close()}const A5={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},_5={blend:"mix-blend-mode"},vDe={fill:"none","stroke-miterlimit":10},S3=0,pme="http://www.w3.org/2000/xmlns/",ns=tk.xmlns;function vte(e){bd.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const uU=bd.prototype;Ve(vte,bd,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Go(e,0,"svg",ns),this._svg.setAttributeNS(pme,"xmlns",ns),this._svg.setAttributeNS(pme,"xmlns:xlink",tk["xmlns:xlink"]),this._svg.setAttribute("version",tk.version),this._svg.setAttribute("class","marks"),uc(e,1),this._root=Go(this._svg,S3,"g",ns),D0(this._root,vDe),uc(this._svg,S3+1)),this.background(this._bgcolor),uU.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),uU.background.apply(this,arguments)},resize(e,t,n,r){return uU.resize.call(this,e,t,n,r),this._svg&&(D0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Go(e,S3,"rect",ns),D0(n,{width:this._width,height:this._height,fill:t}));const r=bDe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),uc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,a,o,l;for(a=0,o=e.length;a<o;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,s=Ou[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,mme(n,t),r.items.forEach(u=>{u.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,mme(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=Ou[t.marktype],s=t.interactive===!1?"none":null,a=i.tag==="g",o=gme(t,e,n,"g",r);o.setAttribute("class",aDe(t));const l=mDe(t);for(const d in l)eo(o,d,l[d]);a||eo(o,"pointer-events",s),eo(o,"clip-path",t.clip?Xee(this,t,t.group):null);let u=null,c=0;const f=d=>{const h=this.isDirty(d),m=gme(d,o,u,i.tag,r);h&&(this._update(i,m,d),a&&v9t(this,m,d)),u=m,++c};return i.nested?t.items.length&&f(t.items[0]):_c(t,f),uc(o,c),o},_update(e,t,n){kh=t,wa=t.__values__,pDe(V$,n),e.attr(V$,n,this);const r=S9t[e.type];r&&r.call(this,e,t,n),kh&&this.style(kh,n)},style(e,t){if(t!=null){for(const n in A5){let r=n==="font"?pT(t):t[n];if(r===wa[n])continue;const i=A5[n];r==null?e.removeAttribute(i):(Hee(r)&&(r=F4e(r,this._defs.gradient,wDe())),e.setAttribute(i,r+"")),wa[n]=r}for(const n in _5)aO(e,_5[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Go(e,S3+1,"defs",ns)),r=b9t(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Go(e,S3+1,"defs",ns)),r=x9t(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):uc(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function mme(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function b9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let a=Go(e,n++,"pattern",ns);D0(a,{id:b5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Go(a,0,"rect",ns),D0(a,{width:1,height:1,fill:`url(${wDe()}#${t.id})`}),e=Go(e,n++,"radialGradient",ns),D0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Go(e,n++,"linearGradient",ns),D0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Go(e,r,"stop",ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return uc(e,r),n}function x9t(e,t,n){let r;return e=Go(e,n,"clipPath",ns),e.setAttribute("id",t.id),t.path?(r=Go(e,0,"path",ns),r.setAttribute("d",t.path)):(r=Go(e,0,"rect",ns),D0(r,{x:0,y:0,width:t.width,height:t.height})),uc(e,1),n+1}function v9t(e,t,n){t=t.lastChild.previousSibling;let r,i=0;_c(n,s=>{r=e.mark(t,s,r),++i}),uc(t,1+i)}function gme(e,t,n,r,i){let s=e._svg,a;if(!s&&(a=t.ownerDocument,s=N0(a,r,ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const o=N0(a,"path",ns);s.appendChild(o),o.__data__=e;const l=N0(a,"g",ns);s.appendChild(l),l.__data__=e;const u=N0(a,"path",ns);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||w9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function w9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let kh=null,wa=null;const S9t={group(e,t,n){const r=kh=t.childNodes[2];wa=r.__values__,e.foreground(V$,n,this),wa=t.__values__,kh=t.childNodes[1],e.content(V$,n,this);const i=kh=t.childNodes[0];e.background(V$,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==wa.events&&(eo(r,"pointer-events",s),eo(i,"pointer-events",s),wa.events=s),n.strokeForeground&&n.stroke){const a=n.fill;eo(r,"display",null),this.style(i,n),eo(i,"stroke",null),a&&(n.fill=null),wa=r.__values__,this.style(r,n),a&&(n.fill=a),kh=null}else eo(r,"display","none")},image(e,t,n){n.smooth===!1?(aO(t,"image-rendering","optimizeSpeed"),aO(t,"image-rendering","pixelated")):aO(t,"image-rendering",null)},text(e,t,n){const r=hT(n);let i,s,a,o;Qe(r)?(s=r.map(l=>gm(n,l)),i=s.join(`
`),i!==wa.text&&(uc(t,0),a=t.ownerDocument,o=mm(n),s.forEach((l,u)=>{const c=N0(a,"tspan",ns);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",o)),t.appendChild(c)}),wa.text=i)):(s=gm(n,r),s!==wa.text&&(t.textContent=s,wa.text=s)),eo(t,"font-family",pT(n)),eo(t,"font-size",yd(n)+"px"),eo(t,"font-style",n.fontStyle),eo(t,"font-variant",n.fontVariant),eo(t,"font-weight",n.fontWeight)}};function V$(e,t,n){t!==wa[e]&&(n?C9t(kh,e,t,n):eo(kh,e,t),wa[e]=t)}function aO(e,t,n){n!==wa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),wa[t]=n)}function D0(e,t){for(const n in t)eo(e,n,t[n])}function eo(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function C9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function wDe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function wte(e){bd.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Ve(wte,bd,{svg(){return this._text},_render(e){const t=xte();t.open("svg",Kt({},tk,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",vDe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Ou[t.marktype],r=n.tag,i=[pDe,n.attr];e.open("g",{class:aDe(t),"clip-path":t.clip?Xee(this,t,t.group):null},mDe(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=a=>{const o=this.href(a);if(o&&e.open("a",o),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){const l=hT(a);if(Qe(l)){const u={x:0,dy:mm(a)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(gm(a,l[c])).close()}else e.text(gm(a,l))}else if(r==="g"){const l=a.strokeForeground,u=a.fill,c=a.stroke;l&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),_c(a,f=>this.mark(e,f)),e.close(),l&&c?(u&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),u&&(a.fill=u)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),o&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):_c(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(a,o,l,u)=>{i[u||a]=o};return Array.isArray(n)?n.forEach(a=>a(s,t,this)):n(s,t,this),r&&$9t(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],a=s.stops;s.gradient==="radial"?(e.open("pattern",{id:b5+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let o=0;o<a.length;++o)e.open("stop",{offset:a[o].offset,"stop-color":a[o].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function $9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=pT(t),e["font-size"]=yd(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in A5){let o=t[a];const l=A5[a];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(Hee(o)&&(o=F4e(o,i.gradient,"")),e[l]=o)}for(const a in _5){const o=t[a];o!=null&&(s=s||[],s.push(`${_5[a]}: ${o};`))}return s&&(e.style=s.join(" ")),e}const SDe="canvas",CDe="png",$De="svg",EDe="none",I0={Canvas:SDe,PNG:CDe,SVG:$De,None:EDe},hv={};hv[SDe]=hv[CDe]={renderer:k5,headless:k5,handler:mT};hv[$De]={renderer:vte,headless:wte,handler:pte};hv[EDe]={};function q9(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(hv[e]=t,this):hv[e]}function kDe(e,t,n){const r=[],i=new Ga().union(t),s=e.marktype;return s?ADe(e,i,n,r):s==="group"?_De(e,i,n,r):Ce("Intersect scene must be mark node or group item.")}function ADe(e,t,n,r){if(E9t(e,t,n)){const i=e.items,s=e.marktype,a=i.length;let o=0;if(s==="group")for(;o<a;++o)_De(i[o],t,n,r);else for(const l=Ou[s].isect;o<a;++o){const u=i[o];TDe(u,t,l)&&r.push(u)}}return r}function E9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function _De(e,t,n,r){n&&n(e.mark)&&TDe(e,t,Ou.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const a=e.x||0,o=e.y||0;t.translate(-a,-o);for(let l=0;l<s;++l)ADe(i[l],t,n,r);t.translate(a,o)}return r}function TDe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const cU=new Ga;function k9t(e){const t=e.clip;if(Wt(t))t(fT(cU.clear()));else if(t)cU.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(cU)}const A9t=1e-9;function Ste(e,t,n){return e===t?!0:n==="path"?NDe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Yh(e)&&Yh(t)?Math.abs(e-t)<=A9t:!e||!t||!Ht(e)&&!Ht(t)?e==t:_9t(e,t)}function NDe(e,t){return Ste(cv(e),cv(t))}function _9t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Ste(e[i],t[i],i))return!1;return typeof e==typeof t}function T9t(){U4e(),QFt()}const fU=4278190080;function N9t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function D9t(e,t,n,r,i){const s=e.width,a=e.height,o=r||i,l=Eu(s,a).getContext("2d"),u=Eu(s,a).getContext("2d"),c=o&&Eu(s,a).getContext("2d");n.forEach(N=>oO(l,N,!1)),oO(u,t,!1),o&&oO(c,t,!0);const f=dU(l,s,a),d=dU(u,s,a),h=o&&dU(c,s,a),m=e.bitmap(),g=o&&e.bitmap();let b,x,w,C,S,E,A,k;for(x=0;x<a;++x)for(b=0;b<s;++b)S=x*s+b,E=f[S]&fU,k=d[S]&fU,A=o&&h[S]&fU,(E||A||k)&&(w=e(b),C=e(x),!i&&(E||k)&&m.set(w,C),o&&(E||A)&&g.set(w,C));return[m,g]}function dU(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function oO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>oO(e,s.items,n))}):Ou[r].draw(e,{items:n?t.map(I9t):t})}function I9t(e){const t=M8(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const eh=5,Za=31,rk=32,m0=new Uint32Array(rk+1),ac=new Uint32Array(rk+1);ac[0]=0;m0[0]=~ac[0];for(let e=1;e<=rk;++e)ac[e]=ac[e-1]<<1|1,m0[e]=~ac[e];function O9t(e,t){const n=new Uint32Array(~~((e*t+rk)/rk));function r(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{const o=a*e+s;return n[o>>>eh]&1<<(o&Za)},set:(s,a)=>{const o=a*e+s;r(o>>>eh,1<<(o&Za))},clear:(s,a)=>{const o=a*e+s;i(o>>>eh,~(1<<(o&Za)))},getRange:(s,a,o,l)=>{let u=l,c,f,d,h;for(;u>=a;--u)if(c=u*e+s,f=u*e+o,d=c>>>eh,h=f>>>eh,d===h){if(n[d]&m0[c&Za]&ac[(f&Za)+1])return!0}else{if(n[d]&m0[c&Za]||n[h]&ac[(f&Za)+1])return!0;for(let m=d+1;m<h;++m)if(n[m])return!0}return!1},setRange:(s,a,o,l)=>{let u,c,f,d,h;for(;a<=l;++a)if(u=a*e+s,c=a*e+o,f=u>>>eh,d=c>>>eh,f===d)r(f,m0[u&Za]&ac[(c&Za)+1]);else for(r(f,m0[u&Za]),r(d,ac[(c&Za)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,a,o,l)=>{let u,c,f,d,h;for(;a<=l;++a)if(u=a*e+s,c=a*e+o,f=u>>>eh,d=c>>>eh,f===d)i(f,ac[u&Za]|m0[(c&Za)+1]);else for(i(f,ac[u&Za]),i(d,m0[(c&Za)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,a,o,l)=>s<0||a<0||l>=t||o>=e}}function R9t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),a=o=>~~((o+n)/r);return a.invert=o=>o*r-n,a.bitmap=()=>O9t(i,s),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function F9t(e,t,n,r){const i=e.width,s=e.height;return function(a){const o=a.datum.datum.items[r].items,l=o.length,u=a.datum.fontSize,c=yc.width(a.datum,a.datum.text);let f=0,d,h,m,g,b,x,w;for(let C=0;C<l;++C)d=o[C].x,m=o[C].y,h=o[C].x2===void 0?d:o[C].x2,g=o[C].y2===void 0?m:o[C].y2,b=(d+h)/2,x=(m+g)/2,w=Math.abs(h-d+g-m),w>=f&&(f=w,a.x=b,a.y=x);return b=c/2,x=u/2,d=a.x-b,h=a.x+b,m=a.y-x,g=a.y+x,a.align="center",d<0&&h<=i?a.align="left":0<=d&&i<h&&(a.align="right"),a.baseline="middle",m<0&&g<=s?a.baseline="top":0<=m&&s<g&&(a.baseline="bottom"),!0}}function T5(e,t,n,r,i,s){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>s}function O0(e,t,n,r,i,s,a,o){const l=i*s/(r*2),u=e(t-l),c=e(t+l),f=e(n-(s=s/2)),d=e(n+s);return a.outOfBounds(u,f,c,d)||a.getRange(u,f,c,d)||o&&o.getRange(u,f,c,d)}function M9t(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1];function l(u,c,f,d,h){const m=e.invert(u),g=e.invert(c);let b=f,x=s,w;if(!T5(m,g,d,h,i,s)&&!O0(e,m,g,h,d,b,a,o)&&!O0(e,m,g,h,d,h,a,null)){for(;x-b>=1;)w=(b+x)/2,O0(e,m,g,h,d,w,a,o)?x=w:b=w;if(b>f)return[m,g,b,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=yc.width(u.datum,u.datum.text);let m=n?d:0,g=!1,b=!1,x=0,w,C,S,E,A,k,N,I,T,D,L,P,M,F,R,j,H;for(let G=0;G<f;++G){for(w=c[G].x,S=c[G].y,C=c[G].x2===void 0?w:c[G].x2,E=c[G].y2===void 0?S:c[G].y2,w>C&&(H=w,w=C,C=H),S>E&&(H=S,S=E,E=H),T=e(w),L=e(C),D=~~((T+L)/2),P=e(S),F=e(E),M=~~((P+F)/2),N=D;N>=T;--N)for(I=M;I>=P;--I)j=l(N,I,m,h,d),j&&([u.x,u.y,m,g]=j);for(N=D;N<=L;++N)for(I=M;I<=F;++I)j=l(N,I,m,h,d),j&&([u.x,u.y,m,g]=j);!g&&!n&&(R=Math.abs(C-w+E-S),A=(w+C)/2,k=(S+E)/2,R>=x&&!T5(A,k,h,d,i,s)&&!O0(e,A,k,d,h,d,a,null)&&(x=R,u.x=A,u.y=k,b=!0))}return g||b?(A=h/2,k=d/2,a.setRange(e(u.x-A),e(u.y-k),e(u.x+A),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const L9t=[-1,-1,1,1],P9t=[-1,1,-1,1];function B9t(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=yc.width(u.datum,u.datum.text),m=[];let g=n?d:0,b=!1,x=!1,w=0,C,S,E,A,k,N,I,T,D,L,P,M;for(let F=0;F<f;++F){for(C=c[F].x,E=c[F].y,S=c[F].x2===void 0?C:c[F].x2,A=c[F].y2===void 0?E:c[F].y2,m.push([e((C+S)/2),e((E+A)/2)]);m.length;)if([I,T]=m.pop(),!(a.get(I,T)||o.get(I,T)||l.get(I,T))){l.set(I,T);for(let R=0;R<4;++R)k=I+L9t[R],N=T+P9t[R],l.outOfBounds(k,N,k,N)||m.push([k,N]);if(k=e.invert(I),N=e.invert(T),D=g,L=s,!T5(k,N,h,d,i,s)&&!O0(e,k,N,d,h,D,a,o)&&!O0(e,k,N,d,h,d,a,null)){for(;L-D>=1;)P=(D+L)/2,O0(e,k,N,d,h,P,a,o)?L=P:D=P;D>g&&(u.x=k,u.y=N,g=D,b=!0)}}!b&&!n&&(M=Math.abs(S-C+A-E),k=(C+S)/2,N=(E+A)/2,M>=w&&!T5(k,N,h,d,i,s)&&!O0(e,k,N,d,h,d,a,null)&&(w=M,u.x=k,u.y=N,x=!0))}return b||x?(k=h/2,N=d/2,a.setRange(e(u.x-k),e(u.y-N),e(u.x+k),e(u.y+N)),u.align="center",u.baseline="middle",!0):!1}}const z9t=["right","center","left"],j9t=["bottom","middle","top"];function U9t(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=u.textWidth??0,h,m,g,b,x,w,C,S,E,A,k,N,I,T,D;for(let L=0;L<l;++L){if(h=(n[L]&3)-1,m=(n[L]>>>2&3)-1,g=h===0&&m===0||r[L]<0,b=h&&m?Math.SQRT1_2:1,x=r[L]<0?-1:1,w=c[1+h]+r[L]*h*b,k=c[4+m]+x*f*m/2+r[L]*m*b,S=k-f/2,E=k+f/2,N=e(w),T=e(S),D=e(E),!d)if(yme(N,N,T,D,a,o,w,w,S,E,c,g))d=yc.width(u.datum,u.datum.text);else continue;if(A=w+x*d*h/2,w=A-d/2,C=A+d/2,N=e(w),I=e(C),yme(N,I,T,D,a,o,w,C,S,E,c,g))return u.x=h?h*x<0?C:w:A,u.y=m?m*x<0?E:S:k,u.align=z9t[h*x+1],u.baseline=j9t[m*x+1],a.setRange(N,T,I,D),!0}return!1}}function yme(e,t,n,r,i,s,a,o,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const hU=0,pU=4,mU=8,gU=0,yU=1,bU=2,V9t={"top-left":hU+gU,top:hU+yU,"top-right":hU+bU,left:pU+gU,middle:pU+yU,right:pU+bU,"bottom-left":mU+gU,bottom:mU+yU,"bottom-right":mU+bU},W9t={naive:F9t,"reduced-search":M9t,floodfill:B9t};function H9t(e,t,n,r,i,s,a,o,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=G9t(r,f),h=q9t(i,f),m=X9t(e[0].datum),g=m==="group"&&e[0].datum.items[l].marktype,b=g==="area",x=Y9t(m,g,o,l),w=u===null||u===1/0,C=b&&c==="naive";let S=-1,E=-1;const A=e.map(T=>{const D=w?yc.width(T,T.text):void 0;return S=Math.max(S,D),E=Math.max(E,T.fontSize),{datum:T,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(T),textWidth:D}});u=u===null||u===1/0?Math.max(S,E)+Math.max(...r):u;const k=R9t(t[0],t[1],u);let N;if(!C){n&&A.sort((L,P)=>n(L.datum,P.datum));let T=!1;for(let L=0;L<h.length&&!T;++L)T=h[L]===5||d[L]<0;const D=(m&&a||b)&&e.map(L=>L.datum);N=s.length||D?D9t(k,D||[],s,T,b):N9t(k,a&&A)}const I=b?W9t[c](k,N,a,l):U9t(k,N,h,d);return A.forEach(T=>T.opacity=+I(T)),A}function G9t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function q9t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=V9t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function X9t(e){return e&&e.mark&&e.mark.marktype}function Y9t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const a=s.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{const a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const $G=["x","y","opacity","align","baseline"],DDe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Cte(e){$e.call(this,null,e)}Cte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:DDe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:$G.length,default:$G}]};Ve(Cte,$e,{transform(e,t){function n(s){const a=e[s];return Wt(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ce("Size parameter should be specified as a [width, height] array.");const i=e.as||$G;return H9t(t.materialize(t.SOURCE).source||[],e.size,e.sort,vt(e.offset==null?1:e.offset),vt(e.anchor||DDe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const K9t=Object.freeze(Object.defineProperty({__proto__:null,label:Cte},Symbol.toStringTag,{value:"Module"}));function IDe(e,t){var n=[],r=function(c){return c(o)},i,s,a,o,l,u;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(o);return n}function $te(e){$e.call(this,null,e)}$te.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ve($te,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=IDe(r,e.groupby),s=(e.groupby||[]).map(mi),a=s.length,o=e.as||[mi(e.x),mi(e.y)],l=[];i.forEach(u=>{EAe(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<a;++d)f[s[d]]=u.dims[d];f[o[0]]=c[0],f[o[1]]=c[1],l.push(qn(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const EG={constant:yQ,linear:bQ,log:wAe,exp:SAe,pow:CAe,quad:xQ,poly:$Ae},Z9t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Ete(e){$e.call(this,null,e)}Ete.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(EG)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ve(Ete,$e,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=IDe(r,e.groupby),s=(e.groupby||[]).map(mi),a=e.method||"linear",o=e.order==null?3:e.order,l=Z9t(a,o),u=e.as||[mi(e.x),mi(e.y)],c=EG[a],f=[];let d=e.extent;gt(EG,a)||Ce("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,o);if(e.params){f.push(qn({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const b=d||kc(h,e.x),x=w=>{const C={};for(let S=0;S<s.length;++S)C[s[S]]=h.dims[S];C[u[0]]=w[0],C[u[1]]=w[1],f.push(qn(C))};a==="linear"||a==="constant"?b.forEach(w=>x([w,g.predict(w)])):Y8(g.predict,b,25,200).forEach(x)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Q9t=Object.freeze(Object.defineProperty({__proto__:null,loess:$te,regression:Ete},Symbol.toStringTag,{value:"Module"})),Oh=11102230246251565e-32,ga=134217729,J9t=(3+8*Oh)*Oh;function xU(e,t,n,r,i){let s,a,o,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(s=u,u=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(a=u+s,o=s-(a-u),u=t[++f]):(a=c+s,o=s-(a-c),c=r[++d]),s=a,o!==0&&(i[h++]=o);f<e&&d<n;)c>u==c>-u?(a=s+u,l=a-s,o=s-(a-l)+(u-l),u=t[++f]):(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=r[++d]),s=a,o!==0&&(i[h++]=o);for(;f<e;)a=s+u,l=a-s,o=s-(a-l)+(u-l),u=t[++f],s=a,o!==0&&(i[h++]=o);for(;d<n;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=r[++d],s=a,o!==0&&(i[h++]=o);return(s!==0||h===0)&&(i[h++]=s),h}function e7t(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function gT(e){return new Float64Array(e)}const t7t=(3+16*Oh)*Oh,n7t=(2+12*Oh)*Oh,r7t=(9+64*Oh)*Oh*Oh,T2=gT(4),bme=gT(8),xme=gT(12),vme=gT(16),Qa=gT(4);function i7t(e,t,n,r,i,s,a){let o,l,u,c,f,d,h,m,g,b,x,w,C,S,E,A,k,N;const I=e-i,T=n-i,D=t-s,L=r-s;S=I*L,d=ga*I,h=d-(d-I),m=I-h,d=ga*L,g=d-(d-L),b=L-g,E=m*b-(S-h*g-m*g-h*b),A=D*T,d=ga*D,h=d-(d-D),m=D-h,d=ga*T,g=d-(d-T),b=T-g,k=m*b-(A-h*g-m*g-h*b),x=E-k,f=E-x,T2[0]=E-(x+f)+(f-k),w=S+x,f=w-S,C=S-(w-f)+(x-f),x=C-A,f=C-x,T2[1]=C-(x+f)+(f-A),N=w+x,f=N-w,T2[2]=w-(N-f)+(x-f),T2[3]=N;let P=e7t(4,T2),M=n7t*a;if(P>=M||-P>=M||(f=e-I,o=e-(I+f)+(f-i),f=n-T,u=n-(T+f)+(f-i),f=t-D,l=t-(D+f)+(f-s),f=r-L,c=r-(L+f)+(f-s),o===0&&l===0&&u===0&&c===0)||(M=r7t*a+J9t*Math.abs(P),P+=I*c+L*o-(D*u+T*l),P>=M||-P>=M))return P;S=o*L,d=ga*o,h=d-(d-o),m=o-h,d=ga*L,g=d-(d-L),b=L-g,E=m*b-(S-h*g-m*g-h*b),A=l*T,d=ga*l,h=d-(d-l),m=l-h,d=ga*T,g=d-(d-T),b=T-g,k=m*b-(A-h*g-m*g-h*b),x=E-k,f=E-x,Qa[0]=E-(x+f)+(f-k),w=S+x,f=w-S,C=S-(w-f)+(x-f),x=C-A,f=C-x,Qa[1]=C-(x+f)+(f-A),N=w+x,f=N-w,Qa[2]=w-(N-f)+(x-f),Qa[3]=N;const F=xU(4,T2,4,Qa,bme);S=I*c,d=ga*I,h=d-(d-I),m=I-h,d=ga*c,g=d-(d-c),b=c-g,E=m*b-(S-h*g-m*g-h*b),A=D*u,d=ga*D,h=d-(d-D),m=D-h,d=ga*u,g=d-(d-u),b=u-g,k=m*b-(A-h*g-m*g-h*b),x=E-k,f=E-x,Qa[0]=E-(x+f)+(f-k),w=S+x,f=w-S,C=S-(w-f)+(x-f),x=C-A,f=C-x,Qa[1]=C-(x+f)+(f-A),N=w+x,f=N-w,Qa[2]=w-(N-f)+(x-f),Qa[3]=N;const R=xU(F,bme,4,Qa,xme);S=o*c,d=ga*o,h=d-(d-o),m=o-h,d=ga*c,g=d-(d-c),b=c-g,E=m*b-(S-h*g-m*g-h*b),A=l*u,d=ga*l,h=d-(d-l),m=l-h,d=ga*u,g=d-(d-u),b=u-g,k=m*b-(A-h*g-m*g-h*b),x=E-k,f=E-x,Qa[0]=E-(x+f)+(f-k),w=S+x,f=w-S,C=S-(w-f)+(x-f),x=C-A,f=C-x,Qa[1]=C-(x+f)+(f-A),N=w+x,f=N-w,Qa[2]=w-(N-f)+(x-f),Qa[3]=N;const j=xU(R,xme,4,Qa,vme);return vme[j-1]}function AD(e,t,n,r,i,s){const a=(t-s)*(n-i),o=(e-i)*(r-s),l=a-o,u=Math.abs(a+o);return Math.abs(l)>=t7t*u?l:-i7t(e,t,n,r,i,s,u)}const wme=Math.pow(2,-52),_D=new Uint32Array(512);class N5{static from(t,n=u7t,r=c7t){const i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){const o=t[a];s[2*a]=n(o),s[2*a+1]=r(o)}return new N5(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,a=t.length>>1;let o=1/0,l=1/0,u=-1/0,c=-1/0;for(let I=0;I<a;I++){const T=t[2*I],D=t[2*I+1];T<o&&(o=T),D<l&&(l=D),T>u&&(u=T),D>c&&(c=D),this._ids[I]=I}const f=(o+u)/2,d=(l+c)/2;let h,m,g;for(let I=0,T=1/0;I<a;I++){const D=vU(f,d,t[2*I],t[2*I+1]);D<T&&(h=I,T=D)}const b=t[2*h],x=t[2*h+1];for(let I=0,T=1/0;I<a;I++){if(I===h)continue;const D=vU(b,x,t[2*I],t[2*I+1]);D<T&&D>0&&(m=I,T=D)}let w=t[2*m],C=t[2*m+1],S=1/0;for(let I=0;I<a;I++){if(I===h||I===m)continue;const T=o7t(b,x,w,C,t[2*I],t[2*I+1]);T<S&&(g=I,S=T)}let E=t[2*g],A=t[2*g+1];if(S===1/0){for(let D=0;D<a;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];Q2(this._ids,this._dists,0,a-1);const I=new Uint32Array(a);let T=0;for(let D=0,L=-1/0;D<a;D++){const P=this._ids[D],M=this._dists[P];M>L&&(I[T++]=P,L=M)}this.hull=I.subarray(0,T),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(AD(b,x,w,C,E,A)<0){const I=m,T=w,D=C;m=g,w=E,C=A,g=I,E=T,A=D}const k=l7t(b,x,w,C,E,A);this._cx=k.x,this._cy=k.y;for(let I=0;I<a;I++)this._dists[I]=vU(t[2*I],t[2*I+1],k.x,k.y);Q2(this._ids,this._dists,0,a-1),this._hullStart=h;let N=3;r[h]=n[g]=m,r[m]=n[h]=g,r[g]=n[m]=h,i[h]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(b,x)]=h,s[this._hashKey(w,C)]=m,s[this._hashKey(E,A)]=g,this.trianglesLen=0,this._addTriangle(h,m,g,-1,-1,-1);for(let I=0,T,D;I<this._ids.length;I++){const L=this._ids[I],P=t[2*L],M=t[2*L+1];if(I>0&&Math.abs(P-T)<=wme&&Math.abs(M-D)<=wme||(T=P,D=M,L===h||L===m||L===g))continue;let F=0;for(let z=0,Y=this._hashKey(P,M);z<this._hashSize&&(F=s[(Y+z)%this._hashSize],!(F!==-1&&F!==r[F]));z++);F=n[F];let R=F,j;for(;j=r[R],AD(P,M,t[2*R],t[2*R+1],t[2*j],t[2*j+1])>=0;)if(R=j,R===F){R=-1;break}if(R===-1)continue;let H=this._addTriangle(R,L,r[R],-1,-1,i[R]);i[L]=this._legalize(H+2),i[R]=H,N++;let G=r[R];for(;j=r[G],AD(P,M,t[2*G],t[2*G+1],t[2*j],t[2*j+1])<0;)H=this._addTriangle(G,L,j,i[L],-1,i[G]),i[L]=this._legalize(H+2),r[G]=G,N--,G=j;if(R===F)for(;j=n[R],AD(P,M,t[2*j],t[2*j+1],t[2*R],t[2*R+1])<0;)H=this._addTriangle(j,L,R,-1,i[R],i[j]),this._legalize(H+2),i[j]=H,r[R]=R,N--,R=j;this._hullStart=n[L]=R,r[R]=n[G]=L,r[L]=G,s[this._hashKey(P,M)]=L,s[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(N);for(let I=0,T=this._hullStart;I<N;I++)this.hull[I]=T,T=r[T];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(s7t(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,a=0;for(;;){const o=r[t],l=t-t%3;if(a=l+(t+2)%3,o===-1){if(s===0)break;t=_D[--s];continue}const u=o-o%3,c=l+(t+1)%3,f=u+(o+2)%3,d=n[a],h=n[t],m=n[c],g=n[f];if(a7t(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*g],i[2*g+1])){n[t]=g,n[o]=d;const x=r[f];if(x===-1){let C=this._hullStart;do{if(this._hullTri[C]===f){this._hullTri[C]=t;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(t,x),this._link(o,r[a]),this._link(a,f);const w=u+(o+1)%3;s<_D.length&&(_D[s++]=w)}else{if(s===0)break;t=_D[--s]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function s7t(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function vU(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function a7t(e,t,n,r,i,s,a,o){const l=e-a,u=t-o,c=n-a,f=r-o,d=i-a,h=s-o,m=l*l+u*u,g=c*c+f*f,b=d*d+h*h;return l*(f*b-g*h)-u*(c*b-g*d)+m*(c*h-f*d)<0}function o7t(e,t,n,r,i,s){const a=n-e,o=r-t,l=i-e,u=s-t,c=a*a+o*o,f=l*l+u*u,d=.5/(a*u-o*l),h=(u*c-o*f)*d,m=(a*f-l*c)*d;return h*h+m*m}function l7t(e,t,n,r,i,s){const a=n-e,o=r-t,l=i-e,u=s-t,c=a*a+o*o,f=l*l+u*u,d=.5/(a*u-o*l),h=e+(u*c-o*f)*d,m=t+(a*f-l*c)*d;return{x:h,y:m}}function Q2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],a=t[s];let o=i-1;for(;o>=n&&t[e[o]]>a;)e[o+1]=e[o--];e[o+1]=s}else{const i=n+r>>1;let s=n+1,a=r;C3(e,i,s),t[e[n]]>t[e[r]]&&C3(e,n,r),t[e[s]]>t[e[r]]&&C3(e,s,r),t[e[n]]>t[e[s]]&&C3(e,n,s);const o=e[s],l=t[o];for(;;){do s++;while(t[e[s]]<l);do a--;while(t[e[a]]>l);if(a<s)break;C3(e,s,a)}e[n+1]=e[a],e[a]=o,r-s+1>=a-n?(Q2(e,t,s,r),Q2(e,t,n,a-1)):(Q2(e,t,n,a-1),Q2(e,t,s,r))}}function C3(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function u7t(e){return e[0]}function c7t(e){return e[1]}const Sme=1e-6;class D1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Sme||Math.abs(this._y1-s)>Sme)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class kG{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let f7t=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,a;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,b=0,x=r.length,w,C;g<x;g+=3,b+=2){const S=r[g]*2,E=r[g+1]*2,A=r[g+2]*2,k=t[S],N=t[S+1],I=t[E],T=t[E+1],D=t[A],L=t[A+1],P=I-k,M=T-N,F=D-k,R=L-N,j=(P*R-M*F)*2;if(Math.abs(j)<1e-9){if(s===void 0){s=a=0;for(const G of n)s+=t[G*2],a+=t[G*2+1];s/=n.length,a/=n.length}const H=1e9*Math.sign((s-k)*R-(a-N)*F);w=(k+D)/2-H*R,C=(N+L)/2+H*F}else{const H=1/j,G=P*P+M*M,z=F*F+R*R;w=k+(R*G-M*z)*H,C=N+(P*z-F*G)*H}o[b]=w,o[b+1]=C}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,m=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=m,c=l*4,d=t[2*l],m=t[2*l+1],i[u+2]=i[c]=h-m,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new D1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,m=Math.floor(d/3)*2,g=a[h],b=a[h+1],x=a[m],w=a[m+1];this._renderSegment(g,b,x,w,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const f=Math.floor(i[u]/3)*2,d=a[f],h=a[f+1],m=l*4,g=this._project(d,h,o[m+2],o[m+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new D1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new D1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new kG;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let a;const o=this._regioncode(t,n),l=this._regioncode(r,i);o===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let o=0,l=i.length;o<l;o+=2)if(n[s]===i[o]&&n[s+1]===i[o+1]&&n[(s+2)%a]===i[(o+l-2)%l]&&n[(s+3)%a]===i[(o+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,a=r[t];if(a===-1)return null;const o=[];let l=a;do{const u=Math.floor(l/3);if(o.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==a&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,a,o=n[r-2],l=n[r-1],u,c=this._regioncode(o,l),f,d=0;for(let h=0;h<r;h+=2)if(s=o,a=l,o=n[h],l=n[h+1],u=c,c=this._regioncode(o,l),u===0&&c===0)f=d,d=0,i?i.push(o,l):i=[o,l];else{let m,g,b,x,w;if(u===0){if((m=this._clipSegment(s,a,o,l,u,c))===null)continue;[g,b,x,w]=m}else{if((m=this._clipSegment(o,l,s,a,c,u))===null)continue;[x,w,g,b]=m,f=d,d=this._edgecode(g,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,b):i=[g,b]}f=d,d=this._edgecode(x,w),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(x,w):i=[x,w]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,a){const o=s<a;for(o&&([t,n,r,i,s,a]=[r,i,t,n,a,s]);;){if(s===0&&a===0)return o?[r,i,t,n]:[t,n,r,i];if(s&a)return null;let l,u,c=s||a;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,a){let o=Array.from(n),l;if((l=this._project(o[0],o[1],r,i))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let u=0,c=o.length,f,d=this._edgecode(o[c-2],o[c-1]);u<c;u+=2)f=d,d=this._edgecode(o[u],o[u+1]),f&&d&&(u=this._edge(t,f,d,o,u),c=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,r,i,s){for(;n!==r;){let a,o;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,o=this.ymin;break}(i[s]!==a||i[s+1]!==o)&&this.contains(t,a,o)&&(i.splice(s,0,a,o),s+=2)}return s}_project(t,n,r,i){let s=1/0,a,o,l;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(l=this.ymin,o=t+(s=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(l=this.ymax,o=t+(s=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<s&&(o=this.xmax,l=n+(s=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<s&&(o=this.xmin,l=n+(s=a)*i)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const d7t=2*Math.PI,N2=Math.pow;function h7t(e){return e[0]}function p7t(e){return e[1]}function m7t(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function g7t(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class kte{static from(t,n=h7t,r=p7t,i){return new kte("length"in t?y7t(t,n,r,i):Float64Array.from(b7t(t,n,r,i)))}constructor(t){this._delaunator=new N5(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&m7t(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const m=g7t(n[2*d],n[2*d+1],f);n[2*d]=m[0],n[2*d+1]=m[1]}this._delaunator=new N5(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=i.length;l<u;++l)o[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new f7t(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:a,collinear:o}=this;if(o){const f=o.indexOf(t);f>0&&(yield o[f-1]),f<o.length-1&&(yield o[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=s[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=N2(n-u[t*2],2)+N2(r-u[t*2+1],2);const d=i[t];let h=d;do{let m=l[h];const g=N2(n-u[m*2],2)+N2(r-u[m*2+1],2);if(g<f&&(f=g,c=m),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=o[h],h===-1){if(h=s[(a[t]+1)%s.length],h!==m&&N2(n-u[h*2],2)+N2(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new D1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l<a)continue;const u=s[a]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new D1:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){const o=i[s],l=i[s+1];t.moveTo(o+n,l),t.arc(o,l,n,0,d7t)}return r&&r.value()}renderHull(t){const n=t==null?t=new D1:void 0,{hull:r,points:i}=this,s=r[0]*2,a=r.length;t.moveTo(i[s],i[s+1]);for(let o=1;o<a;++o){const l=2*r[o];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new kG;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new D1:void 0,{points:i,triangles:s}=this,a=s[t*=3]*2,o=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new kG;return this.renderTriangle(t,n),n.value()}}function y7t(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){const o=e[a];s[a*2]=t.call(r,o,a,e),s[a*2+1]=n.call(r,o,a,e)}return s}function*b7t(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Ate(e){$e.call(this,null,e)}Ate.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const x7t=[-1e5,-1e5,1e5,1e5];Ve(Ate,$e,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:x7t;const s=this.value=kte.from(r,e.x,e.y).voronoi(i);for(let a=0,o=r.length;a<o;++a){const l=s.cellPolygon(a);r[a][n]=l&&!w7t(l)?v7t(l):null}return t.reflow(e.modified()).modifies(n)}});function v7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function w7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const S7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Ate},Symbol.toStringTag,{value:"Module"}));function C7t(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const $7t="identity",_te="linear",pv="log",Tte="pow",Nte="sqrt",Dte="symlog",E7t="time",k7t="utc",_S="sequential",yT="diverging",Cme="quantile",A7t="quantize",_7t="threshold",T7t="ordinal",N7t="point",D7t="band",I7t="bin-ordinal",Ks="continuous",X9="discrete",Y9="discretizing",Pc="interpolating",ODe="temporal";function O7t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function R7t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Ite(){const e=Rc().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=C7t(f,o,l);let g=r[d-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(f-o))*u,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const b=Ts(f).map(x=>g+i*x);return n(d?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let g=+f[0],b=+f[1],x,w,C;if(!(g!==g||b!==b)&&(b<g&&(C=g,g=b,b=C),!(b<h[0]||g>r[1-d])))return x=Math.max(0,Gi(h,g)-1),w=g===b?x:Gi(h,b)-1,g-h[x]>s+1e-10&&++x,d&&(C=x,x=m-w,w=m-C),x>w?void 0:t().slice(x,w+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Ite().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function RDe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return RDe(t())},e}function F7t(){return RDe(Ite().paddingInner(1))}var M7t=Array.prototype.map;function L7t(e){return M7t.call(e,Ti)}const P7t=Array.prototype.slice;function FDe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Gi(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=L7t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=P7t.call(r),n):t.slice()},n.tickFormat=function(r,i){return lS(e[0],en(e),r??10,i)},n.copy=function(){return FDe().domain(n.domain()).range(n.range())},n}const AG=new Map,B7t=Symbol("vega_scale");function z7t(e){return e[B7t]=!0,e}function j7t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?O7t(s):s.invertExtent?R7t(s):void 0),s.type=e,z7t(s)};return r.metadata=cs(vt(n)),r}function Dr(e,t,n){return arguments.length>1?(AG.set(e,j7t(e,t,n)),this):U7t(e)?AG.get(e):void 0}Dr($7t,cS);Dr(_te,uS,Ks);Dr(pv,fS,[Ks,pv]);Dr(Tte,db,Ks);Dr(Nte,W_,Ks);Dr(Dte,dS,Ks);Dr(E7t,H_,[Ks,ODe]);Dr(k7t,G_,[Ks,ODe]);Dr(_S,Fc,[Ks,Pc]);Dr(`${_S}-${_te}`,Fc,[Ks,Pc]);Dr(`${_S}-${pv}`,gS,[Ks,Pc,pv]);Dr(`${_S}-${Tte}`,hb,[Ks,Pc]);Dr(`${_S}-${Nte}`,q_,[Ks,Pc]);Dr(`${_S}-${Dte}`,yS,[Ks,Pc]);Dr(`${yT}-${_te}`,bS,[Ks,Pc]);Dr(`${yT}-${pv}`,xS,[Ks,Pc,pv]);Dr(`${yT}-${Tte}`,pb,[Ks,Pc]);Dr(`${yT}-${Nte}`,X_,[Ks,Pc]);Dr(`${yT}-${Dte}`,vS,[Ks,Pc]);Dr(Cme,hS,[Y9,Cme]);Dr(A7t,pS,Y9);Dr(_7t,mS,Y9);Dr(I7t,FDe,[X9,Y9]);Dr(T7t,Rc,X9);Dr(D7t,Ite,X9);Dr(N7t,F7t,X9);function U7t(e){return AG.has(e)}function V7t(e,t,n){return cb(W7t("rgb",n),e)}function W7t(e,t){const n=U_[H7t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function H7t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const G7t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},q7t={accent:u9,category10:l9,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:c9,observable10:f9,paired:d9,pastel1:h9,pastel2:p9,set1:m9,set2:g9,set3:y9,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function MDe(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function LDe(e,t){for(const n in e)X7t(n,t(e[n]))}const $me={};LDe(q7t,MDe);LDe(G7t,e=>V7t(MDe(e)));function X7t(e,t){return e=e&&e.toLowerCase(),arguments.length>1?($me[e]=t,this):$me[e]}var wU=Math.PI/180,g$=64,lO=2048;function Y7t(){var e=[256,256],t,n,r,i,s,a,o,l=PDe,u=[],c=Math.random,f={};f.layout=function(){for(var m=d(Eu()),g=tLt((e[0]>>5)*e[1]),b=null,x=u.length,w=-1,C=[],S=u.map(A=>({text:t(A),font:n(A),style:i(A),weight:s(A),rotate:a(A),size:~~(r(A)+1e-14),padding:o(A),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:A})).sort((A,k)=>k.size-A.size);++w<x;){var E=S[w];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,K7t(m,E,S,w),E.hasText&&h(g,E,b)&&(C.push(E),b?Q7t(b,E):b=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return C};function d(m){m.width=m.height=1;var g=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(g$<<5)/g,m.height=lO/g;var b=m.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:g}}function h(m,g,b){for(var x=g.x,w=g.y,C=Math.hypot(e[0],e[1]),S=l(e),E=c()<.5?1:-1,A=-E,k,N,I;(k=S(A+=E))&&(N=~~k[0],I=~~k[1],!(Math.min(Math.abs(N),Math.abs(I))>=C));)if(g.x=x+N,g.y=w+I,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!b||!Z7t(g,m,e[0]))&&(!b||J7t(g,b))){for(var T=g.sprite,D=g.width>>5,L=e[0]>>5,P=g.x-(D<<4),M=P&127,F=32-M,R=g.y1-g.y0,j=(g.y+g.y0)*L+(P>>5),H,G=0;G<R;G++){H=0;for(var z=0;z<=D;z++)m[j+z]|=H<<F|(z<D?(H=T[G*D+z])>>>M:0);j+=L}return g.sprite=null,!0}return!1}return f.words=function(m){return arguments.length?(u=m,f):u},f.size=function(m){return arguments.length?(e=[+m[0],+m[1]],f):e},f.font=function(m){return arguments.length?(n=Fg(m),f):n},f.fontStyle=function(m){return arguments.length?(i=Fg(m),f):i},f.fontWeight=function(m){return arguments.length?(s=Fg(m),f):s},f.rotate=function(m){return arguments.length?(a=Fg(m),f):a},f.text=function(m){return arguments.length?(t=Fg(m),f):t},f.spiral=function(m){return arguments.length?(l=nLt[m]||m,f):l},f.fontSize=function(m){return arguments.length?(r=Fg(m),f):r},f.padding=function(m){return arguments.length?(o=Fg(m),f):o},f.random=function(m){return arguments.length?(c=m,f):c},f}function K7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(g$<<5)/s,lO/s);var a=0,o=0,l=0,u=n.length,c,f,d,h,m;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*wU),b=Math.cos(t.rotate*wU),x=c*b,w=c*g,C=d*b,S=d*g;c=Math.max(Math.abs(x+S),Math.abs(x-S))+31>>5<<5,d=~~Math.max(Math.abs(w+C),Math.abs(w-C))}else c=c+31>>5<<5;if(d>l&&(l=d),a+c>=g$<<5&&(a=0,o+=l,l=0),o+d>=lO)break;i.translate((a+(c>>1))/s,(o+(d>>1))/s),t.rotate&&i.rotate(t.rotate*wU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=a,t.yoff=o,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var E=i.getImageData(0,0,(g$<<5)/s,lO/s).data,A=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)A[h]=0;if(a=t.xoff,a==null)return;o=t.yoff;var k=0,N=-1;for(m=0;m<d;m++){for(h=0;h<c;h++){var I=f*m+(h>>5),T=E[(o+m)*(g$<<5)+(a+h)<<2]?1<<31-h%32:0;A[I]|=T,k|=T}k?N=m:(t.y0++,d--,m--,o++)}t.y1=t.y0+N,t.sprite=A.slice(0,(t.y1-t.y0)*f)}}}function Z7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),a=s&127,o=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<o|(d<i?(c=r[f*i+d])>>>a:0))&t[u+d])return!0;u+=n}return!1}function Q7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function J7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function PDe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function eLt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function tLt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Fg(e){return typeof e=="function"?e:function(){return e}}var nLt={archimedean:PDe,rectangular:eLt};const BDe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],rLt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Ote(e){$e.call(this,Y7t(),e)}Ote.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:BDe}]};Ve(Ote,$e,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ce("Wordcloud size dimensions must be non-zero.");function n(m){const g=e[m];return Wt(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||rLt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,a=e.as||BDe;let o=e.fontSize||14,l;if(Wt(o)?l=e.fontSizeRange:o=oa(o),l){const m=o,g=Dr("sqrt")().domain(kc(i,m)).range(l);o=b=>g(m(b))}i.forEach(m=>{m[a[0]]=NaN,m[a[1]]=NaN,m[a[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(jl).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let m=0,g,b;m<h;++m)g=u[m],b=g.datum,b[a[0]]=g.x+f,b[a[1]]=g.y+d,b[a[2]]=g.font,b[a[3]]=g.size,b[a[4]]=g.style,b[a[5]]=g.weight,b[a[6]]=g.rotate;return t.reflow(r).modifies(a)}});const iLt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Ote},Symbol.toStringTag,{value:"Module"})),sLt=e=>new Uint8Array(e),aLt=e=>new Uint16Array(e),W$=e=>new Uint32Array(e);function oLt(){let e=8,t=[],n=W$(0),r=TD(0,e),i=TD(0,e);return{data:()=>t,seen:()=>n=lLt(n,t.length),add(s){for(let a=0,o=t.length,l=s.length,u;a<l;++a)u=s[a],u._index=o++,t.push(u)},remove(s,a){const o=t.length,l=Array(o-s),u=t;let c,f,d;for(f=0;!a[f]&&f<o;++f)l[f]=t[f],u[f]=f;for(d=f;f<o;++f)c=t[f],a[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){r[s]|=a},clear(s,a){r[s]&=~a},resize(s,a){const o=r.length;(s>o||a>e)&&(e=Math.max(a,e),r=TD(s,e,r),i=TD(s,e))}}}function lLt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function TD(e,t,n){const r=(t<257?sLt:t<65537?aLt:W$)(e);return n&&r.set(n),r}function Eme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const a=this,o=a.bisect(a.range,i.value),l=i.index,u=o[0],c=o[1],f=l.length;let d;for(d=0;d<u;++d)s[l[d]]|=r;for(d=c;d<f;++d)s[l[d]]|=r;return a}}}function kme(){let e=W$(0),t=[],n=0;function r(o,l,u){if(!l.length)return[];const c=n,f=l.length,d=W$(f);let h=Array(f),m,g,b;for(b=0;b<f;++b)h[b]=o(l[b]),d[b]=b;if(h=uLt(h,d),c)m=t,g=e,t=Array(c+f),e=W$(c+f),cLt(u,m,g,c,h,d,f,t,e);else{if(u>0)for(b=0;b<f;++b)d[b]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(o,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-o}function s(o){for(let l=0,u=n;l<u;++l)e[l]=o[e[l]]}function a(o,l){let u;return l?u=l.length:(l=t,u=n),[dEt(l,o[0],0,u),Gi(l,o[1],0,u)]}return{insert:r,remove:i,bisect:a,reindex:s,index:()=>e,size:()=>n}}function uLt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),mEt(e,t)}function cLt(e,t,n,r,i,s,a,o,l){let u=0,c=0,f;for(f=0;u<r&&c<a;++f)t[u]<i[c]?(o[f]=t[u],l[f]=n[u++]):(o[f]=i[c],l[f]=s[c++]+e);for(;u<r;++u,++f)o[f]=t[u],l[f]=n[u];for(;c<a;++c,++f)o[f]=i[c],l[f]=s[c]+e}function Rte(e){$e.call(this,oLt(),e),this._indices=null,this._dims=null}Rte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ve(Rte,$e,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],a=r.length;let o=0,l,u;for(;o<a;++o)l=n[o].fname,u=i[l]||(i[l]=kme()),s.push(Eme(u,o,r[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,a=this._dims,o=this.value,l=o.curr(),u=o.prev(),c=o.all(),f=n.rem=n.add,d=n.mod,h=i.length,m={};let g,b,x,w,C,S,E,A,k;if(u.set(l),t.rem.length&&(C=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(S={},w=t.mod,E=0,A=w.length;E<A;++E)S[w[E]._index]=1;for(E=0;E<h;++E)k=r[E],(!a[E]||e.modified("fields",E)||t.modified(k.fields))&&(x=k.fname,(g=m[x])||(s[x]=b=kme(),m[x]=g=b.insert(k,t.source,0)),a[E]=Eme(b,E,i[E]).onAdd(g,l));for(E=0,A=o.data().length;E<A;++E)C[E]||(u[E]!==l[E]?f.push(E):S[E]&&l[E]!==c&&d.push(E));return o.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,a=this._indices,o=e.fields,l={},u=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,m,g;i.resize(c,f),i.add(r);const b=i.curr(),x=i.prev(),w=i.all();for(h=0;h<f;++h)m=o[h].fname,g=l[m]||(l[m]=a[m].insert(o[h],r,d)),s[h].onAdd(g,b);for(;d<c;++d)x[d]=w,b[d]!==w&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),a=e.mod;let o,l,u;for(o=0,l=a.length;o<l;++o)u=a[o]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),a=i.prev(),o=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,m;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,a[h]=m=s[h],s[h]=o,m!==o&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const a in r)r[a].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,a=r.length;let o=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++o);if(o===1)o=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,o=0;u<a;++u)e.modified("query",u)&&(o|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return o},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),a=i.curr(),o=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],m=u[1],g=e.one;let b,x,w;if(f<h)for(b=f,x=Math.min(h,d);b<x;++b)w=l[b],s[w]!==n&&(o[w]=a[w],s[w]=n,r.push(w)),a[w]^=g;else if(f>h)for(b=h,x=Math.min(f,m);b<x;++b)w=l[b],s[w]!==n&&(o[w]=a[w],s[w]=n,r.push(w)),a[w]^=g;if(d>m)for(b=Math.max(f,m),x=d;b<x;++b)w=l[b],s[w]!==n&&(o[w]=a[w],s[w]=n,r.push(w)),a[w]^=g;else if(d<m)for(b=Math.max(h,d),x=m;b<x;++b)w=l[b],s[w]!==n&&(o[w]=a[w],s[w]=n,r.push(w)),a[w]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),a=e.index(),o=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=o[0],d=o[1],h=e.one;let m,g,b;if(u<f)for(m=u,g=Math.min(f,c);m<g;++m)b=a[m],s[b]^=h,n.push(b);else if(u>f)for(m=f,g=Math.min(u,d);m<g;++m)b=a[m],s[b]^=h,r.push(b);if(c>d)for(m=Math.max(u,d),g=c;m<g;++m)b=a[m],s[b]^=h,n.push(b);else if(c<d)for(m=Math.max(f,c),g=d;m<g;++m)b=a[m],s[b]^=h,r.push(b);e.range=t.slice()}});function Fte(e){$e.call(this,null,e)}Fte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ve(Fte,$e,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const s=t.fork(t.ALL),a=r.data(),o=r.curr(),l=r.prev(),u=c=>o[c]&n?null:a[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const f=o[c]&n;return!f&&f^l[c]&n?a[c]:null}),s.filter(s.REM,c=>{const f=o[c]&n;return f&&!(f^(f^l[c]&n))?a[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(o[c]&n)===i?a[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const fLt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Rte,resolvefilter:Fte},Symbol.toStringTag,{value:"Module"})),dLt="RawCode",mv="Literal",hLt="Property",pLt="Identifier",mLt="ArrayExpression",gLt="BinaryExpression",yLt="CallExpression",bLt="ConditionalExpression",xLt="LogicalExpression",vLt="MemberExpression",wLt="ObjectExpression",SLt="UnaryExpression";function Bc(e){this.type=e}Bc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=CLt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function CLt(e){switch(e.type){case mLt:return e.elements;case gLt:case xLt:return[e.left,e.right];case yLt:return[e.callee].concat(e.arguments);case bLt:return[e.test,e.consequent,e.alternate];case vLt:return[e.object,e.property];case wLt:return e.properties;case hLt:return[e.key,e.value];case SLt:return[e.argument];case pLt:case mv:case dLt:default:return[]}}var xd,yt,Ae,La,sr,K9=1,bT=2,Ny=3,Xm=4,Z9=5,yb=6,zo=7,xT=8,$Lt=9;xd={};xd[K9]="Boolean";xd[bT]="<end>";xd[Ny]="Identifier";xd[Xm]="Keyword";xd[Z9]="Null";xd[yb]="Numeric";xd[zo]="Punctuator";xd[xT]="String";xd[$Lt]="RegularExpression";var ELt="ArrayExpression",kLt="BinaryExpression",ALt="CallExpression",_Lt="ConditionalExpression",zDe="Identifier",TLt="Literal",NLt="LogicalExpression",DLt="MemberExpression",ILt="ObjectExpression",OLt="Property",RLt="UnaryExpression",Is="Unexpected token %0",FLt="Unexpected number",MLt="Unexpected string",LLt="Unexpected identifier",PLt="Unexpected reserved word",BLt="Unexpected end of input",_G="Invalid regular expression",SU="Invalid regular expression: missing /",jDe="Octal literals are not allowed in strict mode.",zLt="Duplicate data property in object literal not allowed in strict mode",ra="ILLEGAL",ik="Disabled.",jLt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ULt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Q9(e,t){if(!e)throw new Error("ASSERT: "+t)}function dh(e){return e>=48&&e<=57}function Mte(e){return"0123456789abcdefABCDEF".includes(e)}function H$(e){return"01234567".includes(e)}function VLt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function sk(e){return e===10||e===13||e===8232||e===8233}function vT(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&jLt.test(String.fromCharCode(e))}function D5(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ULt.test(String.fromCharCode(e))}const WLt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function UDe(){for(;Ae<La;){const e=yt.charCodeAt(Ae);if(VLt(e)||sk(e))++Ae;else break}}function TG(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ae<La&&Mte(yt[Ae])?(r=yt[Ae++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Pn({},Is,ra);return String.fromCharCode(i)}function HLt(){var e,t,n,r;for(e=yt[Ae],t=0,e==="}"&&Pn({},Is,ra);Ae<La&&(e=yt[Ae++],!!Mte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Pn({},Is,ra),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function VDe(){var e,t;for(e=yt.charCodeAt(Ae++),t=String.fromCharCode(e),e===92&&(yt.charCodeAt(Ae)!==117&&Pn({},Is,ra),++Ae,e=TG("u"),(!e||e==="\\"||!vT(e.charCodeAt(0)))&&Pn({},Is,ra),t=e);Ae<La&&(e=yt.charCodeAt(Ae),!!D5(e));)++Ae,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),yt.charCodeAt(Ae)!==117&&Pn({},Is,ra),++Ae,e=TG("u"),(!e||e==="\\"||!D5(e.charCodeAt(0)))&&Pn({},Is,ra),t+=e);return t}function GLt(){var e,t;for(e=Ae++;Ae<La;){if(t=yt.charCodeAt(Ae),t===92)return Ae=e,VDe();if(D5(t))++Ae;else break}return yt.slice(e,Ae)}function qLt(){var e,t,n;return e=Ae,t=yt.charCodeAt(Ae)===92?VDe():GLt(),t.length===1?n=Ny:WLt.hasOwnProperty(t)?n=Xm:t==="null"?n=Z9:t==="true"||t==="false"?n=K9:n=Ny,{type:n,value:t,start:e,end:Ae}}function CU(){var e=Ae,t=yt.charCodeAt(Ae),n,r=yt[Ae],i,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ae,{type:zo,value:String.fromCharCode(t),start:e,end:Ae};default:if(n=yt.charCodeAt(Ae+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ae+=2,{type:zo,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ae};case 33:case 61:return Ae+=2,yt.charCodeAt(Ae)===61&&++Ae,{type:zo,value:yt.slice(e,Ae),start:e,end:Ae}}}if(a=yt.substr(Ae,4),a===">>>=")return Ae+=4,{type:zo,value:a,start:e,end:Ae};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ae+=3,{type:zo,value:s,start:e,end:Ae};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Ae+=2,{type:zo,value:i,start:e,end:Ae};if(i==="//"&&Pn({},Is,ra),"<>=!+-*%&|^/".includes(r))return++Ae,{type:zo,value:r,start:e,end:Ae};Pn({},Is,ra)}function XLt(e){let t="";for(;Ae<La&&Mte(yt[Ae]);)t+=yt[Ae++];return t.length===0&&Pn({},Is,ra),vT(yt.charCodeAt(Ae))&&Pn({},Is,ra),{type:yb,value:parseInt("0x"+t,16),start:e,end:Ae}}function YLt(e){let t="0"+yt[Ae++];for(;Ae<La&&H$(yt[Ae]);)t+=yt[Ae++];return(vT(yt.charCodeAt(Ae))||dh(yt.charCodeAt(Ae)))&&Pn({},Is,ra),{type:yb,value:parseInt(t,8),octal:!0,start:e,end:Ae}}function Ame(){var e,t,n;if(n=yt[Ae],Q9(dh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ae,e="",n!=="."){if(e=yt[Ae++],n=yt[Ae],e==="0"){if(n==="x"||n==="X")return++Ae,XLt(t);if(H$(n))return YLt(t);n&&dh(n.charCodeAt(0))&&Pn({},Is,ra)}for(;dh(yt.charCodeAt(Ae));)e+=yt[Ae++];n=yt[Ae]}if(n==="."){for(e+=yt[Ae++];dh(yt.charCodeAt(Ae));)e+=yt[Ae++];n=yt[Ae]}if(n==="e"||n==="E")if(e+=yt[Ae++],n=yt[Ae],(n==="+"||n==="-")&&(e+=yt[Ae++]),dh(yt.charCodeAt(Ae)))for(;dh(yt.charCodeAt(Ae));)e+=yt[Ae++];else Pn({},Is,ra);return vT(yt.charCodeAt(Ae))&&Pn({},Is,ra),{type:yb,value:parseFloat(e),start:t,end:Ae}}function KLt(){var e="",t,n,r,i,s=!1;for(t=yt[Ae],Q9(t==="'"||t==='"',"String literal must starts with a quote"),n=Ae,++Ae;Ae<La;)if(r=yt[Ae++],r===t){t="";break}else if(r==="\\")if(r=yt[Ae++],!r||!sk(r.charCodeAt(0)))switch(r){case"u":case"x":yt[Ae]==="{"?(++Ae,e+=HLt()):e+=TG(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:H$(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ae<La&&H$(yt[Ae])&&(s=!0,i=i*8+"01234567".indexOf(yt[Ae++]),"0123".includes(r)&&Ae<La&&H$(yt[Ae])&&(i=i*8+"01234567".indexOf(yt[Ae++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&yt[Ae]===`
`&&++Ae;else{if(sk(r.charCodeAt(0)))break;e+=r}return t!==""&&Pn({},Is,ra),{type:xT,value:e,octal:s,start:n,end:Ae}}function ZLt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Pn({},_G)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Pn({},_G)}try{return new RegExp(e,t)}catch{return null}}function QLt(){var e,t,n,r,i;for(e=yt[Ae],Q9(e==="/","Regular expression literal must start with a slash"),t=yt[Ae++],n=!1,r=!1;Ae<La;)if(e=yt[Ae++],t+=e,e==="\\")e=yt[Ae++],sk(e.charCodeAt(0))&&Pn({},SU),t+=e;else if(sk(e.charCodeAt(0)))Pn({},SU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Pn({},SU),i=t.substr(1,t.length-2),{value:i,literal:t}}function JLt(){var e,t,n;for(t="",n="";Ae<La&&(e=yt[Ae],!!D5(e.charCodeAt(0)));)++Ae,e==="\\"&&Ae<La?Pn({},Is,ra):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Pn({},_G,n),{value:n,literal:t}}function ePt(){var e,t,n,r;return sr=null,UDe(),e=Ae,t=QLt(),n=JLt(),r=ZLt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ae}}function tPt(e){return e.type===Ny||e.type===Xm||e.type===K9||e.type===Z9}function WDe(){if(UDe(),Ae>=La)return{type:bT,start:Ae,end:Ae};const e=yt.charCodeAt(Ae);return vT(e)?qLt():e===40||e===41||e===59?CU():e===39||e===34?KLt():e===46?dh(yt.charCodeAt(Ae+1))?Ame():CU():dh(e)?Ame():CU()}function qo(){const e=sr;return Ae=e.end,sr=WDe(),Ae=e.end,e}function HDe(){const e=Ae;sr=WDe(),Ae=e}function nPt(e){const t=new Bc(ELt);return t.elements=e,t}function _me(e,t,n){const r=new Bc(e==="||"||e==="&&"?NLt:kLt);return r.operator=e,r.left=t,r.right=n,r}function rPt(e,t){const n=new Bc(ALt);return n.callee=e,n.arguments=t,n}function iPt(e,t,n){const r=new Bc(_Lt);return r.test=e,r.consequent=t,r.alternate=n,r}function Lte(e){const t=new Bc(zDe);return t.name=e,t}function y$(e){const t=new Bc(TLt);return t.value=e.value,t.raw=yt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Tme(e,t,n){const r=new Bc(DLt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function sPt(e){const t=new Bc(ILt);return t.properties=e,t}function Nme(e,t,n){const r=new Bc(OLt);return r.key=t,r.value=n,r.kind=e,r}function aPt(e,t){const n=new Bc(RLt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Pn(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,a)=>(Q9(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=Ae,n.description=i,n}function J9(e){e.type===bT&&Pn(e,BLt),e.type===yb&&Pn(e,FLt),e.type===xT&&Pn(e,MLt),e.type===Ny&&Pn(e,LLt),e.type===Xm&&Pn(e,PLt),Pn(e,Is,e.value)}function Pa(e){const t=qo();(t.type!==zo||t.value!==e)&&J9(t)}function Br(e){return sr.type===zo&&sr.value===e}function $U(e){return sr.type===Xm&&sr.value===e}function oPt(){const e=[];for(Ae=sr.start,Pa("[");!Br("]");)Br(",")?(qo(),e.push(null)):(e.push(Dy()),Br("]")||Pa(","));return qo(),nPt(e)}function Dme(){Ae=sr.start;const e=qo();return e.type===xT||e.type===yb?(e.octal&&Pn(e,jDe),y$(e)):Lte(e.value)}function lPt(){var e,t,n,r;if(Ae=sr.start,e=sr,e.type===Ny)return n=Dme(),Pa(":"),r=Dy(),Nme("init",n,r);if(e.type===bT||e.type===zo)J9(e);else return t=Dme(),Pa(":"),r=Dy(),Nme("init",t,r)}function uPt(){var e=[],t,n,r,i={},s=String;for(Ae=sr.start,Pa("{");!Br("}");)t=lPt(),t.key.type===zDe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Pn({},zLt):i[r]=!0,e.push(t),Br("}")||Pa(",");return Pa("}"),sPt(e)}function cPt(){Pa("(");const e=Pte();return Pa(")"),e}const fPt={if:1};function dPt(){var e,t,n;if(Br("("))return cPt();if(Br("["))return oPt();if(Br("{"))return uPt();if(e=sr.type,Ae=sr.start,e===Ny||fPt[sr.value])n=Lte(qo().value);else if(e===xT||e===yb)sr.octal&&Pn(sr,jDe),n=y$(qo());else{if(e===Xm)throw new Error(ik);e===K9?(t=qo(),t.value=t.value==="true",n=y$(t)):e===Z9?(t=qo(),t.value=null,n=y$(t)):Br("/")||Br("/=")?(n=y$(ePt()),HDe()):J9(qo())}return n}function hPt(){const e=[];if(Pa("("),!Br(")"))for(;Ae<La&&(e.push(Dy()),!Br(")"));)Pa(",");return Pa(")"),e}function pPt(){Ae=sr.start;const e=qo();return tPt(e)||J9(e),Lte(e.value)}function mPt(){return Pa("."),pPt()}function gPt(){Pa("[");const e=Pte();return Pa("]"),e}function yPt(){var e,t,n;for(e=dPt();;)if(Br("."))n=mPt(),e=Tme(".",e,n);else if(Br("("))t=hPt(),e=rPt(e,t);else if(Br("["))n=gPt(),e=Tme("[",e,n);else break;return e}function Ime(){const e=yPt();if(sr.type===zo&&(Br("++")||Br("--")))throw new Error(ik);return e}function uO(){var e,t;if(sr.type!==zo&&sr.type!==Xm)t=Ime();else{if(Br("++")||Br("--"))throw new Error(ik);if(Br("+")||Br("-")||Br("~")||Br("!"))e=qo(),t=uO(),t=aPt(e.value,t);else{if($U("delete")||$U("void")||$U("typeof"))throw new Error(ik);t=Ime()}}return t}function Ome(e){let t=0;if(e.type!==zo&&e.type!==Xm)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function bPt(){var e,t,n,r,i,s,a,o,l,u;if(e=sr,l=uO(),r=sr,i=Ome(r),i===0)return l;for(r.prec=i,qo(),t=[e,sr],a=uO(),s=[l,r,a];(i=Ome(sr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=_me(o,l,a),s.push(n);r=qo(),r.prec=i,s.push(r),t.push(sr),n=uO(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=_me(s[u-1].value,s[u-2],n),u-=2;return n}function Dy(){var e,t,n;return e=bPt(),Br("?")&&(qo(),t=Dy(),Pa(":"),n=Dy(),e=iPt(e,t,n)),e}function Pte(){const e=Dy();if(Br(","))throw new Error(ik);return e}function xPt(e){yt=e,Ae=0,La=yt.length,sr=null,HDe();const t=Pte();if(sr.type!==bT)throw new Error("Unexpect token after expression.");return t}var GDe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function qDe(e){function t(a,o,l,u){let c=e(o[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(a,o,l){return u=>t(a,u,o,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&Ce("Missing arguments to clamp function."),a.length>3&&Ce("Too many arguments to clamp function.");const o=a.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&Ce("Missing arguments to if function."),a.length>3&&Ce("Too many arguments to if function.");const o=a.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function vPt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function XDe(e){e=e||{};const t=e.allowed?cs(e.allowed):{},n=e.forbidden?cs(e.forbidden):{},r=e.constants||GDe,i=(e.functions||qDe)(f),s=e.globalvar,a=e.fieldvar,o=Wt(s)?s:m=>`${s}["${m}"]`;let l={},u={},c=0;function f(m){if(Fn(m))return m;const g=d[m.type];return g==null&&Ce("Unsupported type: "+m.type),g(m)}const d={Literal:m=>m.raw,Identifier:m=>{const g=m.name;return c>0?g:gt(n,g)?Ce("Illegal identifier: "+g):gt(r,g)?r[g]:gt(t,g)?g:(l[g]=1,o(g))},MemberExpression:m=>{const g=!m.computed,b=f(m.object);g&&(c+=1);const x=f(m.property);return b===a&&(u[vPt(x)]=1),g&&(c-=1),b+(g?"."+x:"["+x+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&Ce("Illegal callee type: "+m.callee.type);const g=m.callee.name,b=m.arguments,x=gt(i,g)&&i[g];return x||Ce("Unrecognized function: "+g),Wt(x)?x(b):x+"("+b.map(f).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(f).join(",")+"]",BinaryExpression:m=>"("+f(m.left)+" "+m.operator+" "+f(m.right)+")",UnaryExpression:m=>"("+m.operator+f(m.argument)+")",ConditionalExpression:m=>"("+f(m.test)+"?"+f(m.consequent)+":"+f(m.alternate)+")",LogicalExpression:m=>"("+f(m.left)+m.operator+f(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(f).join(",")+"}",Property:m=>{c+=1;const g=f(m.key);return c-=1,g+":"+f(m.value)}};function h(m){const g={code:f(m),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const wPt="Literal";var vd,SPt=1,CPt=2,$Pt=3,EPt=4,kPt=5,APt=6,_Pt=7,TPt=8,NPt=9;vd={};vd[SPt]="Boolean";vd[CPt]="<end>";vd[$Pt]="Identifier";vd[EPt]="Keyword";vd[kPt]="Null";vd[APt]="Numeric";vd[_Pt]="Punctuator";vd[TPt]="String";vd[NPt]="RegularExpression";const Rme=Symbol("vega_selection_getter");function YDe(e){return(!e.getter||!e.getter[Rme])&&(e.getter=Pl(e.field),e.getter[Rme]=!0),e.getter}const Bte="intersect",Fme="union",DPt="vlMulti",IPt="vlPoint",Mme="or",OPt="and",xf="_vgsid_",ak=Pl(xf),RPt="E",FPt="R",MPt="R-E",LPt="R-LE",PPt="R-RE",BPt="E-LT",zPt="E-LTE",jPt="E-GT",UPt="E-GTE",VPt="E-VALID",WPt="E-ONE",I5="index:unit";function Lme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,a,o;s<i;++s)if(o=n[s],a=YDe(o)(e),Nh(a)&&(a=Ti(a)),Nh(r[s])&&(r[s]=Ti(r[s])),Qe(r[s])&&Nh(r[s][0])&&(r[s]=r[s].map(Ti)),o.type===RPt){if(Qe(r[s])?!r[s].includes(a):a!==r[s])return!1}else if(o.type===FPt){if(!k1(a,r[s]))return!1}else if(o.type===PPt){if(!k1(a,r[s],!0,!1))return!1}else if(o.type===MPt){if(!k1(a,r[s],!1,!1))return!1}else if(o.type===LPt){if(!k1(a,r[s],!1,!0))return!1}else if(o.type===BPt){if(a>=r[s])return!1}else if(o.type===zPt){if(a>r[s])return!1}else if(o.type===jPt){if(a<=r[s])return!1}else if(o.type===UPt){if(a<r[s])return!1}else if(o.type===VPt){if(a===null||isNaN(a))return!1}else if(o.type===WPt&&r[s].indexOf(a)===-1)return!1;return!0}function KDe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[I5]&&r[I5].value:void 0,a=n===Bte,o=i.length,l=0,u,c,f,d,h;l<o;++l)if(u=i[l],s&&a){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=Lme(t,u),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Lme(t,u),a^h)return h;return o&&a}const ZDe=Jw(ak),HPt=ZDe.left,GPt=ZDe.right;function QDe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[I5]&&r[I5].value:void 0,a=n===Bte,o=ak(t),l=HPt(i,o);if(l===i.length||ak(i[l])!==o)return!1;if(s&&a){if(s.size===1)return!0;if(GPt(i,o)-l<s.size)return!1}return!0}function JDe(e,t){return e.map(n=>Kt(t.fields?{values:t.fields.map(r=>YDe(r)(n.datum))}:{[xf]:ak(n.datum)},t))}function eIe(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],a={},o={},l={},u,c,f,d,h,m,g,b,x,w,C=s.length,S=0,E,A;S<C;++S)if(u=s[S],d=u.unit,c=u.fields,f=u.values,c&&f){for(E=0,A=c.length;E<A;++E)h=c[E],g=a[h.field]||(a[h.field]={}),b=g[d]||(g[d]=[]),l[h.field]=x=h.type.charAt(0),w=EU[`${x}_union`],g[d]=w(b,vt(f[E]));n&&(b=o[d]||(o[d]=[]),b.push(vt(f).reduce((k,N,I)=>(k[c[I].field]=N,k),{})))}else h=xf,m=ak(u),g=a[h]||(a[h]={}),b=g[d]||(g[d]=[]),b.push(m),n&&(b=o[d]||(o[d]=[]),b.push({[xf]:m}));if(t=t||Fme,a[xf]?a[xf]=EU[`${xf}_${t}`](...Object.values(a[xf])):Object.keys(a).forEach(k=>{a[k]=Object.keys(a[k]).map(N=>a[k][N]).reduce((N,I)=>N===void 0?I:EU[`${l[k]}_${t}`](N,I))}),s=Object.keys(o),n&&s.length){const k=r?IPt:DPt;a[k]=t===Fme?{[Mme]:s.reduce((N,I)=>(N.push(...o[I]),N),[])}:{[OPt]:s.map(N=>({[Mme]:o[N]}))}}return a}var EU={[`${xf}_union`]:$Et,[`${xf}_intersect`]:SEt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Ti(t[0]),r=Ti(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Ti(t[0]),r=Ti(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const qPt=":",XPt="@";function TS(e,t,n,r){t[0].type!==wPt&&Ce("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&en(t).value,a="unit",o=XPt+a,l=qPt+i;s===Bte&&!gt(r,o)&&(r[o]=n.getData(i).indataRef(n,a)),gt(r,l)||(r[l]=n.getData(i).tuplesRef())}function tIe(e){const t=this.context.data[e];return t?t.values.value:[]}function YPt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function KPt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(zs).insert(t)),1}function ZPt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const wT=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},QPt=wT("format"),nIe=wT("timeFormat"),JPt=wT("utcFormat"),eBt=wT("timeParse"),tBt=wT("utcParse"),ND=new Date(2e3,0,1);function e7(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(ND.setYear(2e3),ND.setMonth(e),ND.setDate(t),nIe.call(this,ND,n))}function nBt(e){return e7.call(this,e,1,"%B")}function rBt(e){return e7.call(this,e,1,"%b")}function iBt(e){return e7.call(this,0,2+e,"%A")}function sBt(e){return e7.call(this,0,2+e,"%a")}const aBt=":",oBt="@",NG="%",lBt="$";function zte(e,t,n,r){t[0].type!==mv&&Ce("First argument to data functions must be a string literal.");const i=t[0].value,s=aBt+i;if(!gt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function uBt(e,t,n,r){t[0].type!==mv&&Ce("First argument to indata must be a string literal."),t[1].type!==mv&&Ce("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,a=oBt+s;gt(a,r)||(r[a]=n.getData(i).indataRef(n,s))}function Jo(e,t,n,r){if(t[0].type===mv)Pme(n,r,t[0].value);else for(e in n.scales)Pme(n,r,e)}function Pme(e,t,n){const r=NG+n;if(!gt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function dp(e,t){if(Wt(e))return e;if(Fn(e)){const n=t.scales[e];return n&&WIt(n.value)?n.value:void 0}}function cBt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Jo,n._range=Jo,n._scale=Jo;const r=i=>"_["+(i.type===mv?$t(NG+i.value):$t(NG)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function jte(e,t){return function(n,r,i){if(n){const s=dp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const fBt=jte("area",xNe),dBt=jte("bounds",$Ne),hBt=jte("centroid",_Ne);function pBt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Ute(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function mBt(){return Ute(this.context.dataflow,"warn",arguments)}function gBt(){return Ute(this.context.dataflow,"info",arguments)}function yBt(){return Ute(this.context.dataflow,"debug",arguments)}function kU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function DG(e){const t=ed(e),n=kU(t.r),r=kU(t.g),i=kU(t.b);return .2126*n+.7152*r+.0722*i}function bBt(e,t){const n=DG(e),r=DG(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function xBt(){const e=[].slice.call(arguments);return e.unshift({}),Kt(...e)}function rIe(e,t){return e===t||e!==e&&t!==t?!0:Qe(e)?Qe(t)&&e.length===t.length?vBt(e,t):!1:Ht(e)&&Ht(t)?iIe(e,t):!1}function vBt(e,t){for(let n=0,r=e.length;n<r;++n)if(!rIe(e[n],t[n]))return!1;return!0}function iIe(e,t){for(const n in e)if(!rIe(e[n],t[n]))return!1;return!0}function Bme(e){return t=>iIe(e,t)}function wBt(e,t,n,r,i,s){const a=this.context.dataflow,o=this.context.data[e],l=o.input,u=a.stamp();let c=o.changes,f,d;if(a._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(o.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{o.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(f=n===!0?zs:Qe(n)||iS(n)?n:Bme(n),c.remove(f)),t&&c.insert(t),r&&(f=Bme(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function SBt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function CBt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const zme={};function $Bt(e,t){const n=zme[t]||(zme[t]=Pl(t));return Qe(e)?e.map(n):n(e)}function Vte(e){return Qe(e)||ArrayBuffer.isView(e)?e:null}function Wte(e){return Vte(e)||(Fn(e)?e:null)}function EBt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vte(e).join(...n)}function kBt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wte(e).indexOf(...n)}function ABt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wte(e).lastIndexOf(...n)}function _Bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wte(e).slice(...n)}function TBt(e,t,n){return Wt(n)&&Ce("Function argument passed to replace."),String(e).replace(t,n)}function NBt(e){return Vte(e).slice().reverse()}function DBt(e,t,n){return QJ(e||0,t||0,n||0)}function IBt(e,t){const n=dp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function OBt(e,t){const n=dp(e,(t||this).context);return n?n.copy():void 0}function RBt(e,t){const n=dp(e,(t||this).context);return n?n.domain():[]}function FBt(e,t,n){const r=dp(e,(n||this).context);return r?Qe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function MBt(e,t){const n=dp(e,(t||this).context);return n&&n.range?n.range():[]}function LBt(e,t,n){const r=dp(e,(n||this).context);return r?r(t):void 0}function PBt(e,t,n,r,i){e=dp(e,(i||this).context);const s=M4e(t,n);let a=e.domain(),o=a[0],l=en(a),u=Ha;return l-o?u=WTe(e,o,l):e=(e.interpolator?Xn("sequential")().interpolator(e.interpolator()):Xn("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(a=e.ticks(+r||15),o!==a[0]&&a.unshift(o),l!==en(a)&&a.push(l)),a.forEach(c=>s.stop(u(c),e(c))),s}function BBt(e,t,n){const r=dp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function zBt(e){let t=null;return function(n){return n?JE(n,t=t||cv(e)):e}}const sIe=e=>e.data;function aIe(e,t){const n=tIe.call(t,e);return n.root&&n.root.lookup||{}}function jBt(e,t,n){const r=aIe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(sIe):void 0}function UBt(e,t){const n=aIe(e,this)[t];return n?n.ancestors().map(sIe):void 0}const oIe=()=>typeof window<"u"&&window||null;function VBt(){const e=oIe();return e?e.screen:{}}function WBt(){const e=oIe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function HBt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function lIe(e,t,n){if(!e)return[];const[r,i]=e,s=new Ga().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return kDe(a,s,GBt(t))}function GBt(e){let t=null;if(e){const n=vt(e.marktype),r=vt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function qBt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=vt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function XBt(e){return vt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function YBt(e,t,n){const{x:r,y:i,mark:s}=n,a=new Ga().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(r,i),lIe([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter(l=>KBt(l.x,l.y,t))}function KBt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[a,o]=n[s],[l,u]=n[i];u>t!=o>t&&e<(a-l)*(t-u)/(o-u)+l&&r++}return r&1}const ok={random(){return jl()},cumulativeNormal:R_,cumulativeLogNormal:U8,cumulativeUniform:G8,densityNormal:B8,densityLogNormal:j8,densityUniform:H8,quantileNormal:F_,quantileLogNormal:V8,quantileUniform:q8,sampleNormal:O_,sampleLogNormal:z8,sampleUniform:W8,isArray:Qe,isBoolean:C8,isDate:Nh,isDefined(e){return e!==void 0},isNumber:Yh,isObject:Ht,isRegExp:$8,isString:Fn,isTuple:iS,isValid(e){return e!=null&&e===e},toBoolean:k8,toDate(e){return A8(e)},toNumber:Ti,toString:_8,indexof:kBt,join:EBt,lastindexof:ABt,replace:TBt,reverse:NBt,slice:_Bt,flush:PZ,lerp:zZ,merge:xBt,pad:jZ,peek:en,pluck:$Bt,span:Qw,inrange:k1,truncate:UZ,rgb:ed,lab:VE,hcl:WE,hsl:UE,luminance:DG,contrast:bBt,sequence:Ts,format:QPt,utcFormat:JPt,utcParse:tBt,utcOffset:eQ,utcSequence:nQ,timeFormat:nIe,timeParse:eBt,timeOffset:JZ,timeSequence:tQ,timeUnitSpecifier:qZ,monthFormat:nBt,monthAbbrevFormat:rBt,dayFormat:iBt,dayAbbrevFormat:sBt,quarter:OZ,utcquarter:RZ,week:KZ,utcweek:QZ,dayofyear:YZ,utcdayofyear:ZZ,warn:mBt,info:gBt,debug:yBt,extent(e){return kc(e)},inScope:pBt,intersect:lIe,clampRange:FZ,pinchDistance:SBt,pinchAngle:CBt,screen:VBt,containerSize:HBt,windowSize:WBt,bandspace:DBt,setdata:KPt,pathShape:zBt,panLinear:TZ,panLog:NZ,panPow:DZ,panSymlog:IZ,zoomLinear:v8,zoomLog:w8,zoomPow:OE,zoomSymlog:S8,encode:ZPt,modify:wBt,lassoAppend:qBt,lassoPath:XBt,intersectLasso:YBt},ZBt=["view","item","group","xy","x","y"],QBt="event.vega.",uIe="this.",Hte={},JBt={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${$t(lBt+e)}]`,functions:ezt,constants:GDe,visitors:Hte},jme=XDe(JBt);function ezt(e){const t=qDe(e);ZBt.forEach(n=>t[n]=QBt+n);for(const n in ok)t[n]=uIe+n;return Kt(t,cBt(e,ok,Hte)),t}function Ki(e,t,n){return arguments.length===1?ok[e]:(ok[e]=t,n&&(Hte[e]=n),jme&&(jme.functions[e]=uIe+e),this)}Ki("bandwidth",IBt,Jo);Ki("copy",OBt,Jo);Ki("domain",RBt,Jo);Ki("range",MBt,Jo);Ki("invert",FBt,Jo);Ki("scale",LBt,Jo);Ki("gradient",PBt,Jo);Ki("geoArea",fBt,Jo);Ki("geoBounds",dBt,Jo);Ki("geoCentroid",hBt,Jo);Ki("geoShape",BBt,Jo);Ki("indata",YPt,uBt);Ki("data",tIe,zte);Ki("treePath",jBt,zte);Ki("treeAncestors",UBt,zte);Ki("vlSelectionTest",KDe,TS);Ki("vlSelectionIdTest",QDe,TS);Ki("vlSelectionResolve",eIe,TS);Ki("vlSelectionTuples",JDe);function tzt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const nzt=cs(["rule"]),Ume=cs(["group","image","rect"]);function rzt(e,t){let n="";return nzt[t]||(e.x2&&(e.x?(Ume[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Ume[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Gte(e){return(e+"").toLowerCase()}function izt(e){return Gte(e)==="operator"}function szt(e){return Gte(e)==="collect"}function $3(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function azt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var ozt={operator:(e,t)=>$3(e,["_"],t.code),parameter:(e,t)=>$3(e,["datum","_"],t.code),event:(e,t)=>$3(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return $3(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const a="o["+$t(s)+"]";i+=`$=${r[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=rzt(r,n),i+="return m;",$3(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map($t).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,a)=>{const o=t[a];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+a]=s,l=`this.f${a}(a)`,u=`this.f${a}(b)`),azt(l,u,-o,o)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function lzt(e){const t=this;izt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function uzt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ce("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function czt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Qe(i)?i.map(s=>Vme(s,n,t)):Vme(i,n,t)}return t}function Vme(e,t,n){if(!e||!Ht(e))return e;for(let r=0,i=Wme.length,s;r<i;++r)if(s=Wme[r],gt(e,s.key))return s.parse(e,t,n);return e}var Wme=[{key:"$ref",parse:fzt},{key:"$key",parse:hzt},{key:"$expr",parse:dzt},{key:"$field",parse:pzt},{key:"$encode",parse:gzt},{key:"$compare",parse:mzt},{key:"$context",parse:yzt},{key:"$subflow",parse:bzt},{key:"$tupleid",parse:xzt}];function fzt(e,t){return t.get(e.$ref)||Ce("Operator not defined: "+e.$ref)}function dzt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=hl(t.parameterExpression(e.$expr),e.$fields))}function hzt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=BZ(e.$key,e.$flat,t.expr.codegen))}function pzt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Pl(e.$field,e.$name,t.expr.codegen))}function mzt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=vt(e.$compare).map(i=>i&&i.$tupleid?Tt:i);return t.fn[n]||(t.fn[n]=MZ(r,e.$order,t.expr.codegen))}function gzt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=hl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function yzt(e,t){return t}function bzt(e,t){const n=e.$subflow;return function(r,i,s){const a=t.fork().parse(n),o=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(s),o.detachSubflow=()=>t.detach(a),o}}function xzt(){return Tt}function vzt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ce("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function wzt(e){var t=this,n=Ht(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,a=void 0;r||Ce("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(a=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,a)}const Szt={skip:!0};function Czt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const a=t.signals[s];e.signals(s,a)&&(r[s]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const a=t.data[s];e.data(s,a)&&(i[s]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function $zt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Szt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(zs).insert(r[s]))}),(e.subcontext||[]).forEach((s,a)=>{const o=t.subcontext[a];o&&o.setState(s)})}function cIe(e,t,n,r){return new fIe(e,t,n,r)}function fIe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||ozt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Hme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}fIe.prototype=Hme.prototype={fork(){const e=new Hme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),szt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const a=n.data[s]||(n.data[s]={});e.data[s].forEach(o=>a[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Gte(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:tzt,parseOperator:lzt,parseOperatorParameters:uzt,parseParameters:czt,parseStream:vzt,parseUpdate:wzt,getState:Czt,setState:$zt};function Ezt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),dIe(t,e.description()))}function dIe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function kzt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const AU="default";function Azt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:AU,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,s=i?Fn(i)?i:i.user:AU,a=r.item&&r.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Fn(r)||(i=r.item,r=r.user),IG(e,r&&r!==AU?r:i||r),i},{cursor:t})}function IG(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function O5(e,t){var n=e._runtime.data;return gt(n,t)||Ce("Unrecognized data set: "+t),n[t]}function _zt(e,t){return arguments.length<2?O5(this,e).values.value:t7.call(this,e,ub().remove(zs).insert(t))}function t7(e,t){lAe(t)||Ce("Second argument to changes must be a changeset.");const n=O5(this,e);return n.modified=!0,this.pulse(n.input,t)}function Tzt(e,t){return t7.call(this,e,ub().insert(t))}function Nzt(e,t){return t7.call(this,e,ub().remove(t))}function hIe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function pIe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function n7(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Dzt(e){var t=n7(e),n=hIe(e),r=pIe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Izt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,a,o;return i&&(o=n7(e),a=t.changedTouches?t.changedTouches[0]:t,s=G9(a,i),s[0]-=o[0],s[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Ozt(e,n,s),t}function Ozt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var o=r,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function s(a){if(!a)return n;Fn(a)&&(a=i(a));const o=n.slice();for(;a;)o[0]-=a.x||0,o[1]-=a.y||0,a=a.mark&&a.mark.group;return o}return{view:oa(e),item:oa(t||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}const Gme="view",Rzt="timer",Fzt="window",Mzt={trap:!1};function Lzt(e){const t=Kt({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Qe(r[s])&&(r[s]=cs(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function mIe(e,t,n,r){e._eventListeners.push({type:n,sources:vt(t),handler:r})}function Pzt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function DD(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ht(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Bzt(e,t,n){var r=this,i=new P8(n),s=function(u,c){r.runAsync(null,()=>{e===Gme&&Pzt(r,t)&&u.preventDefault(),i.receive(Izt(r,u,c))})},a;if(e===Rzt)DD(r,"timer",t)&&r.timer(s,t);else if(e===Gme)DD(r,"view",t)&&r.addEventListener(t,s,Mzt);else if(e===Fzt?DD(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&DD(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var o=0,l=a.length;o<l;++o)a[o].addEventListener(t,s);mIe(r,a,t,s)}return i}function qme(e){return e.item}function Xme(e){return e.item.mark.source}function Yme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function zzt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",qme),Xme,Yme(e)),this.on(this.events("view","mouseout",qme),Xme,Yme(t)),this}function jzt(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function Rl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Uzt="vega-bind",Vzt="vega-bind-name",Wzt="vega-bind-radio";function Hzt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=LZ(r.debounce,i.update))),(r.input==null&&r.element?Gzt:Xzt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Gzt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),mIe(r,t,i,s),e.set=a=>{t.value=a,t.dispatchEvent(qzt(i))}}function qzt(e){return typeof Event<"u"?new Event(e):{type:e}}function Xzt(e,t,n,r){const i=r.signal(n.signal),s=Rl("div",{class:Uzt}),a=n.input==="radio"?s:s.appendChild(Rl("label"));a.appendChild(Rl("span",{class:Vzt},n.name||n.signal)),t.appendChild(s);let o=Yzt;switch(n.input){case"checkbox":o=Kzt;break;case"select":o=Zzt;break;case"radio":o=Qzt;break;case"range":o=Jzt;break}o(e,a,n,i)}function Yzt(e,t,n,r){const i=Rl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Kzt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Rl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=a=>s.checked=!!a||null}function Zzt(e,t,n,r){const i=Rl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,o)=>{const l={value:a};R5(a,r)&&(l.selected=!0),i.appendChild(Rl("option",l,(s[o]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let o=0,l=n.options.length;o<l;++o)if(R5(n.options[o],a)){i.selectedIndex=o;return}}}function Qzt(e,t,n,r){const i=Rl("span",{class:Wzt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,o)=>{const l={type:"radio",name:n.signal,value:a};R5(a,r)&&(l.checked=!0);const u=Rl("input",l);u.addEventListener("change",()=>e.update(a));const c=Rl("label",{},(s[o]||a)+"");return c.prepend(u),i.appendChild(c),u}),e.set=a=>{const o=e.elements,l=o.length;for(let u=0;u<l;++u)R5(o[u].value,a)&&(o[u].checked=!0)}}function Jzt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,a=n.step||um(s,i,100),o=Rl("input",{type:"range",name:n.signal,min:s,max:i,step:a});o.value=r;const l=Rl("span",{},+r);t.appendChild(o),t.appendChild(l);const u=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",u),o.addEventListener("change",u),e.elements=[o],e.set=c=>{o.value=c,l.textContent=c}}function R5(e,t){return e===t||e+""==t+""}function gIe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,hIe(e),pIe(e),n7(e),i,s).background(e.background())}function qte(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function ejt(e,t,n,r){const i=new r(e.loader(),qte(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,n7(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function tjt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=q9(r);e=n._el=e?_U(n,e,!0):null,Ezt(n),s||n.error("Unrecognized renderer type: "+r);const a=s.handler||mT,o=e?s.renderer:s.headless;return n._renderer=o?gIe(n,n._renderer,e,o):null,n._handler=ejt(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=_U(n,t,!0):e.appendChild(Rl("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=_U(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Hzt(n,l.element||t,l)})),n}function _U(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const E3=e=>+e||0,njt=e=>({top:e,bottom:e,left:e,right:e});function Kme(e){return Ht(e)?{top:E3(e.top),bottom:E3(e.bottom),left:E3(e.left),right:E3(e.right)}:njt(E3(e))}async function Xte(e,t,n,r){const i=q9(t),s=i&&i.headless;return s||Ce("Unrecognized renderer type: "+t),await e.runAsync(),gIe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function rjt(e,t){e!==I0.Canvas&&e!==I0.SVG&&e!==I0.PNG&&Ce("Unrecognized image type: "+e);const n=await Xte(this,e,t);return e===I0.SVG?ijt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function ijt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function sjt(e,t){return(await Xte(this,I0.Canvas,e,t)).canvas()}async function ajt(e){return(await Xte(this,I0.SVG,e)).svg()}function ojt(e,t,n){return cIe(e,Xx,ok,n).parse(t)}function ljt(e){var t=this._runtime.scales;return gt(t,e)||Ce("Unrecognized scale or projection: "+e),t[e].value}var yIe="width",bIe="height",Yte="padding",Zme={skip:!0};function xIe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Yte?r.left+r.right:0)}function vIe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Yte?r.top+r.bottom:0)}function ujt(e){var t=e._signals,n=t[yIe],r=t[bIe],i=t[Yte];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=xIe(e,o.size),s()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=vIe(e,o.size),s()},{size:r});const a=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function cjt(e,t,n,r,i,s){this.runAfter(a=>{let o=0;a._autosize=0,a.width()!==n&&(o=1,a.signal(yIe,n,Zme),a._resizeWidth.skip(!0)),a.height()!==r&&(o=1,a.signal(bIe,r,Zme),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),o&&a.run("enter"),s&&a.runAfter(l=>l.resize())},!1,1)}function fjt(e){return this._runtime.getState(e||{data:djt,signals:hjt,recurse:!0})}function djt(e,t){return t.modified&&Qe(t.input.value)&&e.indexOf("_:vega:_")}function hjt(e,t){return!(e==="parent"||t instanceof Xx.proxy)}function pjt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function mjt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(A6t(n,t))}function gjt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",yjt(r))}function yjt(e){return e==null?"":Qe(e)?wIe(e):Ht(e)&&!Nh(e)?bjt(e):e+""}function bjt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Qe(n)?wIe(n):SIe(n))}).join(`
`)}function wIe(e){return"["+e.map(SIe).join(", ")+"]"}function SIe(e){return Qe(e)?"[]":Ht(e)&&!Nh(e)?"{}":e}function CIe(e,t){const n=this;if(t=t||{},fx.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Kt({},e.locale,t.locale);n.locale(Qke(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||I0.Canvas,n._scenegraph=new dte;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||gjt,n._redraw=!0,n._handler=new mT().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Lzt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=ojt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Kt({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=xIe(n,n._width),n._viewHeight=vIe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,ujt(n),kzt(n),Azt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function ID(e,t){return gt(e._signals,t)?e._signals[t]:Ce("Unrecognized signal name: "+$t(t))}function $Ie(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Qme(e,t,n,r){let i=$Ie(n,r);return i||(i=qte(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Jme(e,t,n){const r=$Ie(t,n);return r&&t._targets.remove(r),e}Ve(CIe,fx,{async evaluate(e,t,n){if(await fx.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Dzt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&UI(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&dIe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=ID(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Kme(e)):Kme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(q9(e)||Ce("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(fx.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(ID(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:cjt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=qte(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Qme(this,e,ID(this,e),t)},removeSignalListener(e,t){return Jme(this,ID(this,e),t)},addDataListener(e,t){return Qme(this,e,O5(this,e).values,t)},removeDataListener(e,t){return Jme(this,O5(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=IG(this,null);this._globalCursor=!!e,t&&IG(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:mjt,events:Bzt,finalize:jzt,hover:zzt,data:_zt,change:t7,insert:Tzt,remove:Nzt,scale:ljt,initialize:tjt,toImageURL:rjt,toCanvas:sjt,toSVG:ajt,getState:fjt,setState:pjt});const xjt="RawCode",gv="Literal",vjt="Property",wjt="Identifier",Sjt="ArrayExpression",Cjt="BinaryExpression",EIe="CallExpression",$jt="ConditionalExpression",Ejt="LogicalExpression",kjt="MemberExpression",Ajt="ObjectExpression",_jt="UnaryExpression";function zc(e){this.type=e}zc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Tjt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Tjt(e){switch(e.type){case Sjt:return e.elements;case Cjt:case Ejt:return[e.left,e.right];case EIe:return[e.callee].concat(e.arguments);case $jt:return[e.test,e.consequent,e.alternate];case kjt:return[e.object,e.property];case Ajt:return e.properties;case vjt:return[e.key,e.value];case _jt:return[e.argument];case wjt:case gv:case xjt:default:return[]}}var wd,bt,_e,Ba,ar,r7=1,ST=2,Iy=3,Ym=4,i7=5,bb=6,jo=7,CT=8,Njt=9;wd={};wd[r7]="Boolean";wd[ST]="<end>";wd[Iy]="Identifier";wd[Ym]="Keyword";wd[i7]="Null";wd[bb]="Numeric";wd[jo]="Punctuator";wd[CT]="String";wd[Njt]="RegularExpression";var Djt="ArrayExpression",Ijt="BinaryExpression",Ojt="CallExpression",Rjt="ConditionalExpression",kIe="Identifier",Fjt="Literal",Mjt="LogicalExpression",Ljt="MemberExpression",Pjt="ObjectExpression",Bjt="Property",zjt="UnaryExpression",Os="Unexpected token %0",jjt="Unexpected number",Ujt="Unexpected string",Vjt="Unexpected identifier",Wjt="Unexpected reserved word",Hjt="Unexpected end of input",OG="Invalid regular expression",TU="Invalid regular expression: missing /",AIe="Octal literals are not allowed in strict mode.",Gjt="Duplicate data property in object literal not allowed in strict mode",ia="ILLEGAL",lk="Disabled.",qjt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Xjt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function s7(e,t){if(!e)throw new Error("ASSERT: "+t)}function hh(e){return e>=48&&e<=57}function Kte(e){return"0123456789abcdefABCDEF".includes(e)}function G$(e){return"01234567".includes(e)}function Yjt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function uk(e){return e===10||e===13||e===8232||e===8233}function $T(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&qjt.test(String.fromCharCode(e))}function F5(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Xjt.test(String.fromCharCode(e))}const Kjt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function _Ie(){for(;_e<Ba;){const e=bt.charCodeAt(_e);if(Yjt(e)||uk(e))++_e;else break}}function RG(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)_e<Ba&&Kte(bt[_e])?(r=bt[_e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Bn({},Os,ia);return String.fromCharCode(i)}function Zjt(){var e,t,n,r;for(e=bt[_e],t=0,e==="}"&&Bn({},Os,ia);_e<Ba&&(e=bt[_e++],!!Kte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Bn({},Os,ia),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function TIe(){var e,t;for(e=bt.charCodeAt(_e++),t=String.fromCharCode(e),e===92&&(bt.charCodeAt(_e)!==117&&Bn({},Os,ia),++_e,e=RG("u"),(!e||e==="\\"||!$T(e.charCodeAt(0)))&&Bn({},Os,ia),t=e);_e<Ba&&(e=bt.charCodeAt(_e),!!F5(e));)++_e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),bt.charCodeAt(_e)!==117&&Bn({},Os,ia),++_e,e=RG("u"),(!e||e==="\\"||!F5(e.charCodeAt(0)))&&Bn({},Os,ia),t+=e);return t}function Qjt(){var e,t;for(e=_e++;_e<Ba;){if(t=bt.charCodeAt(_e),t===92)return _e=e,TIe();if(F5(t))++_e;else break}return bt.slice(e,_e)}function Jjt(){var e,t,n;return e=_e,t=bt.charCodeAt(_e)===92?TIe():Qjt(),t.length===1?n=Iy:Kjt.hasOwnProperty(t)?n=Ym:t==="null"?n=i7:t==="true"||t==="false"?n=r7:n=Iy,{type:n,value:t,start:e,end:_e}}function NU(){var e=_e,t=bt.charCodeAt(_e),n,r=bt[_e],i,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++_e,{type:jo,value:String.fromCharCode(t),start:e,end:_e};default:if(n=bt.charCodeAt(_e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return _e+=2,{type:jo,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:_e};case 33:case 61:return _e+=2,bt.charCodeAt(_e)===61&&++_e,{type:jo,value:bt.slice(e,_e),start:e,end:_e}}}if(a=bt.substr(_e,4),a===">>>=")return _e+=4,{type:jo,value:a,start:e,end:_e};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return _e+=3,{type:jo,value:s,start:e,end:_e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return _e+=2,{type:jo,value:i,start:e,end:_e};if(i==="//"&&Bn({},Os,ia),"<>=!+-*%&|^/".includes(r))return++_e,{type:jo,value:r,start:e,end:_e};Bn({},Os,ia)}function eUt(e){let t="";for(;_e<Ba&&Kte(bt[_e]);)t+=bt[_e++];return t.length===0&&Bn({},Os,ia),$T(bt.charCodeAt(_e))&&Bn({},Os,ia),{type:bb,value:parseInt("0x"+t,16),start:e,end:_e}}function tUt(e){let t="0"+bt[_e++];for(;_e<Ba&&G$(bt[_e]);)t+=bt[_e++];return($T(bt.charCodeAt(_e))||hh(bt.charCodeAt(_e)))&&Bn({},Os,ia),{type:bb,value:parseInt(t,8),octal:!0,start:e,end:_e}}function ege(){var e,t,n;if(n=bt[_e],s7(hh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=_e,e="",n!=="."){if(e=bt[_e++],n=bt[_e],e==="0"){if(n==="x"||n==="X")return++_e,eUt(t);if(G$(n))return tUt(t);n&&hh(n.charCodeAt(0))&&Bn({},Os,ia)}for(;hh(bt.charCodeAt(_e));)e+=bt[_e++];n=bt[_e]}if(n==="."){for(e+=bt[_e++];hh(bt.charCodeAt(_e));)e+=bt[_e++];n=bt[_e]}if(n==="e"||n==="E")if(e+=bt[_e++],n=bt[_e],(n==="+"||n==="-")&&(e+=bt[_e++]),hh(bt.charCodeAt(_e)))for(;hh(bt.charCodeAt(_e));)e+=bt[_e++];else Bn({},Os,ia);return $T(bt.charCodeAt(_e))&&Bn({},Os,ia),{type:bb,value:parseFloat(e),start:t,end:_e}}function nUt(){var e="",t,n,r,i,s=!1;for(t=bt[_e],s7(t==="'"||t==='"',"String literal must starts with a quote"),n=_e,++_e;_e<Ba;)if(r=bt[_e++],r===t){t="";break}else if(r==="\\")if(r=bt[_e++],!r||!uk(r.charCodeAt(0)))switch(r){case"u":case"x":bt[_e]==="{"?(++_e,e+=Zjt()):e+=RG(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:G$(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),_e<Ba&&G$(bt[_e])&&(s=!0,i=i*8+"01234567".indexOf(bt[_e++]),"0123".includes(r)&&_e<Ba&&G$(bt[_e])&&(i=i*8+"01234567".indexOf(bt[_e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&bt[_e]===`
`&&++_e;else{if(uk(r.charCodeAt(0)))break;e+=r}return t!==""&&Bn({},Os,ia),{type:CT,value:e,octal:s,start:n,end:_e}}function rUt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Bn({},OG)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Bn({},OG)}try{return new RegExp(e,t)}catch{return null}}function iUt(){var e,t,n,r,i;for(e=bt[_e],s7(e==="/","Regular expression literal must start with a slash"),t=bt[_e++],n=!1,r=!1;_e<Ba;)if(e=bt[_e++],t+=e,e==="\\")e=bt[_e++],uk(e.charCodeAt(0))&&Bn({},TU),t+=e;else if(uk(e.charCodeAt(0)))Bn({},TU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Bn({},TU),i=t.substr(1,t.length-2),{value:i,literal:t}}function sUt(){var e,t,n;for(t="",n="";_e<Ba&&(e=bt[_e],!!F5(e.charCodeAt(0)));)++_e,e==="\\"&&_e<Ba?Bn({},Os,ia):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Bn({},OG,n),{value:n,literal:t}}function aUt(){var e,t,n,r;return ar=null,_Ie(),e=_e,t=iUt(),n=sUt(),r=rUt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:_e}}function oUt(e){return e.type===Iy||e.type===Ym||e.type===r7||e.type===i7}function NIe(){if(_Ie(),_e>=Ba)return{type:ST,start:_e,end:_e};const e=bt.charCodeAt(_e);return $T(e)?Jjt():e===40||e===41||e===59?NU():e===39||e===34?nUt():e===46?hh(bt.charCodeAt(_e+1))?ege():NU():hh(e)?ege():NU()}function Xo(){const e=ar;return _e=e.end,ar=NIe(),_e=e.end,e}function DIe(){const e=_e;ar=NIe(),_e=e}function lUt(e){const t=new zc(Djt);return t.elements=e,t}function tge(e,t,n){const r=new zc(e==="||"||e==="&&"?Mjt:Ijt);return r.operator=e,r.left=t,r.right=n,r}function uUt(e,t){const n=new zc(Ojt);return n.callee=e,n.arguments=t,n}function cUt(e,t,n){const r=new zc(Rjt);return r.test=e,r.consequent=t,r.alternate=n,r}function Zte(e){const t=new zc(kIe);return t.name=e,t}function b$(e){const t=new zc(Fjt);return t.value=e.value,t.raw=bt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nge(e,t,n){const r=new zc(Ljt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function fUt(e){const t=new zc(Pjt);return t.properties=e,t}function rge(e,t,n){const r=new zc(Bjt);return r.key=t,r.value=n,r.kind=e,r}function dUt(e,t){const n=new zc(zjt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Bn(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,a)=>(s7(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=_e,n.description=i,n}function a7(e){e.type===ST&&Bn(e,Hjt),e.type===bb&&Bn(e,jjt),e.type===CT&&Bn(e,Ujt),e.type===Iy&&Bn(e,Vjt),e.type===Ym&&Bn(e,Wjt),Bn(e,Os,e.value)}function za(e){const t=Xo();(t.type!==jo||t.value!==e)&&a7(t)}function zr(e){return ar.type===jo&&ar.value===e}function DU(e){return ar.type===Ym&&ar.value===e}function hUt(){const e=[];for(_e=ar.start,za("[");!zr("]");)zr(",")?(Xo(),e.push(null)):(e.push(Oy()),zr("]")||za(","));return Xo(),lUt(e)}function ige(){_e=ar.start;const e=Xo();return e.type===CT||e.type===bb?(e.octal&&Bn(e,AIe),b$(e)):Zte(e.value)}function pUt(){var e,t,n,r;if(_e=ar.start,e=ar,e.type===Iy)return n=ige(),za(":"),r=Oy(),rge("init",n,r);if(e.type===ST||e.type===jo)a7(e);else return t=ige(),za(":"),r=Oy(),rge("init",t,r)}function mUt(){var e=[],t,n,r,i={},s=String;for(_e=ar.start,za("{");!zr("}");)t=pUt(),t.key.type===kIe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Bn({},Gjt):i[r]=!0,e.push(t),zr("}")||za(",");return za("}"),fUt(e)}function gUt(){za("(");const e=Qte();return za(")"),e}const yUt={if:1};function bUt(){var e,t,n;if(zr("("))return gUt();if(zr("["))return hUt();if(zr("{"))return mUt();if(e=ar.type,_e=ar.start,e===Iy||yUt[ar.value])n=Zte(Xo().value);else if(e===CT||e===bb)ar.octal&&Bn(ar,AIe),n=b$(Xo());else{if(e===Ym)throw new Error(lk);e===r7?(t=Xo(),t.value=t.value==="true",n=b$(t)):e===i7?(t=Xo(),t.value=null,n=b$(t)):zr("/")||zr("/=")?(n=b$(aUt()),DIe()):a7(Xo())}return n}function xUt(){const e=[];if(za("("),!zr(")"))for(;_e<Ba&&(e.push(Oy()),!zr(")"));)za(",");return za(")"),e}function vUt(){_e=ar.start;const e=Xo();return oUt(e)||a7(e),Zte(e.value)}function wUt(){return za("."),vUt()}function SUt(){za("[");const e=Qte();return za("]"),e}function CUt(){var e,t,n;for(e=bUt();;)if(zr("."))n=wUt(),e=nge(".",e,n);else if(zr("("))t=xUt(),e=uUt(e,t);else if(zr("["))n=SUt(),e=nge("[",e,n);else break;return e}function sge(){const e=CUt();if(ar.type===jo&&(zr("++")||zr("--")))throw new Error(lk);return e}function cO(){var e,t;if(ar.type!==jo&&ar.type!==Ym)t=sge();else{if(zr("++")||zr("--"))throw new Error(lk);if(zr("+")||zr("-")||zr("~")||zr("!"))e=Xo(),t=cO(),t=dUt(e.value,t);else{if(DU("delete")||DU("void")||DU("typeof"))throw new Error(lk);t=sge()}}return t}function age(e){let t=0;if(e.type!==jo&&e.type!==Ym)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function $Ut(){var e,t,n,r,i,s,a,o,l,u;if(e=ar,l=cO(),r=ar,i=age(r),i===0)return l;for(r.prec=i,Xo(),t=[e,ar],a=cO(),s=[l,r,a];(i=age(ar))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=tge(o,l,a),s.push(n);r=Xo(),r.prec=i,s.push(r),t.push(ar),n=cO(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=tge(s[u-1].value,s[u-2],n),u-=2;return n}function Oy(){var e,t,n;return e=$Ut(),zr("?")&&(Xo(),t=Oy(),za(":"),n=Oy(),e=cUt(e,t,n)),e}function Qte(){const e=Oy();if(zr(","))throw new Error(lk);return e}function EUt(e){bt=e,_e=0,Ba=bt.length,ar=null,DIe();const t=Qte();if(ar.type!==ST)throw new Error("Unexpect token after expression.");return t}var IIe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function OIe(e){function t(a,o,l,u){let c=e(o[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(a,o,l){return u=>t(a,u,o,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&Ce("Missing arguments to clamp function."),a.length>3&&Ce("Too many arguments to clamp function.");const o=a.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:s,test:n("test",s),if:function(a){a.length<3&&Ce("Missing arguments to if function."),a.length>3&&Ce("Too many arguments to if function.");const o=a.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function kUt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function AUt(e){e=e||{};const t=e.allowed?cs(e.allowed):{},n=e.forbidden?cs(e.forbidden):{},r=e.constants||IIe,i=(e.functions||OIe)(f),s=e.globalvar,a=e.fieldvar,o=Wt(s)?s:m=>`${s}["${m}"]`;let l={},u={},c=0;function f(m){if(Fn(m))return m;const g=d[m.type];return g==null&&Ce("Unsupported type: "+m.type),g(m)}const d={Literal:m=>m.raw,Identifier:m=>{const g=m.name;return c>0?g:gt(n,g)?Ce("Illegal identifier: "+g):gt(r,g)?r[g]:gt(t,g)?g:(l[g]=1,o(g))},MemberExpression:m=>{const g=!m.computed,b=f(m.object);g&&(c+=1);const x=f(m.property);return b===a&&(u[kUt(x)]=1),g&&(c-=1),b+(g?"."+x:"["+x+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&Ce("Illegal callee type: "+m.callee.type);const g=m.callee.name,b=m.arguments,x=gt(i,g)&&i[g];return x||Ce("Unrecognized function: "+g),Wt(x)?x(b):x+"("+b.map(f).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(f).join(",")+"]",BinaryExpression:m=>"("+f(m.left)+" "+m.operator+" "+f(m.right)+")",UnaryExpression:m=>"("+m.operator+f(m.argument)+")",ConditionalExpression:m=>"("+f(m.test)+"?"+f(m.consequent)+":"+f(m.alternate)+")",LogicalExpression:m=>"("+f(m.left)+m.operator+f(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(f).join(",")+"}",Property:m=>{c+=1;const g=f(m.key);return c-=1,g+":"+f(m.value)}};function h(m){const g={code:f(m),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}function RIe(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const _Ut="identity",Jte="linear",yv="log",ene="pow",tne="sqrt",nne="symlog",TUt="time",NUt="utc",NS="sequential",ET="diverging",FG="quantile",DUt="quantize",IUt="threshold",OUt="ordinal",RUt="point",FUt="band",MUt="bin-ordinal",ms="continuous",kT="discrete",AT="discretizing",jc="interpolating",FIe="temporal";function LUt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function PUt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,u;for(i<r&&(o=r,r=i,i=o),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function rne(){const e=Rc().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=RIe(f,o,l);let g=r[d-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(f-o))*u,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const b=Ts(f).map(x=>g+i*x);return n(d?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let g=+f[0],b=+f[1],x,w,C;if(!(g!==g||b!==b)&&(b<g&&(C=g,g=b,b=C),!(b<h[0]||g>r[1-d])))return x=Math.max(0,Gi(h,g)-1),w=g===b?x:Gi(h,b)-1,g-h[x]>s+1e-10&&++x,d&&(C=x,x=m-w,w=m-C),x>w?void 0:t().slice(x,w+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return rne().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function MIe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return MIe(t())},e}function BUt(){return MIe(rne().paddingInner(1))}var zUt=Array.prototype.map;function jUt(e){return zUt.call(e,Ti)}const UUt=Array.prototype.slice;function LIe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Gi(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=jUt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=UUt.call(r),n):t.slice()},n.tickFormat=function(r,i){return lS(e[0],en(e),r??10,i)},n.copy=function(){return LIe().domain(n.domain()).range(n.range())},n}const M5=new Map,PIe=Symbol("vega_scale");function VUt(e){return e[PIe]=!0,e}function oge(e){return e&&e[PIe]===!0}function WUt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?LUt(s):s.invertExtent?PUt(s):void 0),s.type=e,VUt(s)};return r.metadata=cs(vt(n)),r}function cr(e,t,n){return arguments.length>1?(M5.set(e,WUt(e,t,n)),this):BIe(e)?M5.get(e):void 0}cr(_Ut,cS);cr(Jte,uS,ms);cr(yv,fS,[ms,yv]);cr(ene,db,ms);cr(tne,W_,ms);cr(nne,dS,ms);cr(TUt,H_,[ms,FIe]);cr(NUt,G_,[ms,FIe]);cr(NS,Fc,[ms,jc]);cr(`${NS}-${Jte}`,Fc,[ms,jc]);cr(`${NS}-${yv}`,gS,[ms,jc,yv]);cr(`${NS}-${ene}`,hb,[ms,jc]);cr(`${NS}-${tne}`,q_,[ms,jc]);cr(`${NS}-${nne}`,yS,[ms,jc]);cr(`${ET}-${Jte}`,bS,[ms,jc]);cr(`${ET}-${yv}`,xS,[ms,jc,yv]);cr(`${ET}-${ene}`,pb,[ms,jc]);cr(`${ET}-${tne}`,X_,[ms,jc]);cr(`${ET}-${nne}`,vS,[ms,jc]);cr(FG,hS,[AT,FG]);cr(DUt,pS,AT);cr(IUt,mS,AT);cr(MUt,LIe,[kT,AT]);cr(OUt,Rc,kT);cr(FUt,rne,kT);cr(RUt,BUt,kT);function BIe(e){return M5.has(e)}function o7(e,t){const n=M5.get(e);return n&&n.metadata[t]}function HUt(e){return o7(e,ms)}function L5(e){return o7(e,kT)}function lge(e){return o7(e,AT)}function zIe(e){return o7(e,FG)}const GUt=["clamp","base","constant","exponent"];function qUt(e,t,n){return cb(YUt("rgb",n),e)}function XUt(e,t,n){const r=n-t;let i,s,a;return!r||!Number.isFinite(r)?oa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=cr(s)().domain([t,n]).range([0,1]),GUt.forEach(o=>e[o]?a[o](e[o]()):0),a)}function YUt(e,t){const n=U_[KUt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function KUt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const ZUt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},QUt={accent:u9,category10:l9,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:c9,observable10:f9,paired:d9,pastel1:h9,pastel2:p9,set1:m9,set2:g9,set3:y9,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function jIe(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function UIe(e,t){for(const n in e)JUt(n,t(e[n]))}const uge={};UIe(QUt,jIe);UIe(ZUt,e=>qUt(jIe(e)));function JUt(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(uge[e]=t,this):uge[e]}function eVt(e){return e&&e.gradient}function tVt(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const cge={basis:{curve:XQ},"basis-closed":{curve:YQ},"basis-open":{curve:KQ},bundle:{curve:ZQ,tension:"beta",value:.85},cardinal:{curve:JQ,tension:"tension",value:0},"cardinal-open":{curve:rJ,tension:"tension",value:0},"cardinal-closed":{curve:tJ,tension:"tension",value:0},"catmull-rom":{curve:sJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:aJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:oJ,tension:"alpha",value:.5},linear:{curve:B_},"linear-closed":{curve:lJ},monotone:{horizontal:cJ,vertical:uJ},natural:{curve:fJ},step:{curve:dJ},"step-after":{curve:pJ},"step-before":{curve:hJ}};function VIe(e,t,n){var r=gt(cge,e)&&cge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const nVt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},rVt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,iVt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,sVt=/^((\s+,?\s*)|(,\s*))/,aVt=/^[01]/;function ine(e){const t=[];return(e.match(rVt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),a=nVt[s],o=oVt(s,a,r.slice(1).trim()),l=o.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...o.slice(0,a)]),l!==a){s==="m"&&(i=i==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([i,...o.slice(u,u+a)])}}),t}function oVt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?aVt:iVt,o=n.slice(i).match(a);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const l=n.slice(i).match(sVt);l!==null&&(i+=l[0].length)}return r}const bm=Math.PI/180,lVt=1e-14,b1=Math.PI/2,Ef=Math.PI*2,D2=Math.sqrt(3)/2;var IU={},OU={},WIe=[].join;function uVt(e,t,n,r,i,s,a,o,l){const u=WIe.call(arguments);if(IU[u])return IU[u];const c=a*bm,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(o-e)*.5+f*(l-t)*.5,m=d*(l-t)*.5-f*(o-e)*.5;let g=h*h/(n*n)+m*m/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const b=d/n,x=f/n,w=-f/r,C=d/r,S=b*o+x*l,E=w*o+C*l,A=b*e+x*t,k=w*e+C*t;let I=1/((A-S)*(A-S)+(k-E)*(k-E))-.25;I<0&&(I=0);let T=Math.sqrt(I);s==i&&(T=-T);const D=.5*(S+A)-T*(k-E),L=.5*(E+k)+T*(A-S),P=Math.atan2(E-L,S-D);let F=Math.atan2(k-L,A-D)-P;F<0&&s===1?F+=Ef:F>0&&s===0&&(F-=Ef);const R=Math.ceil(Math.abs(F/(b1+.001))),j=[];for(let H=0;H<R;++H){const G=P+H*F/R,z=P+(H+1)*F/R;j[H]=[D,L,G,z,n,r,f,d]}return IU[u]=j}function cVt(e){const t=WIe.call(e);if(OU[t])return OU[t];var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7];const c=u*a,f=-l*o,d=l*a,h=u*o,m=Math.cos(i),g=Math.sin(i),b=Math.cos(s),x=Math.sin(s),w=.5*(s-i),C=Math.sin(w*.5),S=8/3*C*C/Math.sin(w),E=n+m-S*g,A=r+g+S*m,k=n+b,N=r+x,I=k+S*x,T=N-S*b;return OU[t]=[c*E+f*A,d*E+h*A,c*I+f*T,d*I+h*T,c*k+f*N,d*k+h*N]}const ou=["l",0,0,0,0,0,0,0];function fVt(e,t,n){const r=ou[0]=e[0];if(r==="a"||r==="A")ou[1]=t*e[1],ou[2]=n*e[2],ou[3]=e[3],ou[4]=e[4],ou[5]=e[5],ou[6]=t*e[6],ou[7]=n*e[7];else if(r==="h"||r==="H")ou[1]=t*e[1];else if(r==="v"||r==="V")ou[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)ou[i]=(i%2==1?t:n)*e[i];return ou}function P5(e,t,n,r,i,s){var a,o=null,l=0,u=0,c=0,f=0,d,h,m,g,b=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var w=0,C=t.length;w<C;++w){switch(a=t[w],(i!==1||s!==1)&&(a=fVt(a,i,s)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+r);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+r);break;case"h":l+=a[1],e.lineTo(l+n,u+r);break;case"H":l=a[1],e.lineTo(l+n,u+r);break;case"v":u+=a[1],e.lineTo(l+n,u+r);break;case"V":u=a[1],e.lineTo(l+n,u+r);break;case"m":l+=a[1],u+=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"M":l=a[1],u=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"c":d=l+a[5],h=u+a[6],c=l+a[3],f=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=a[5],u=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+a[3],h=u+a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+a[1]+n,u+a[2]+r,d+n,h+r),c=l+a[1],f=u+a[2],l=d,u=h;break;case"S":d=a[3],h=a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,a[1]+n,a[2]+r,d+n,h+r),l=d,u=h,c=a[1],f=a[2];break;case"q":d=l+a[3],h=u+a[4],c=l+a[1],f=u+a[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,d+n,h+r),l=d,u=h,c=a[1],f=a[2];break;case"t":d=l+a[1],h=u+a[2],o[0].match(/[QqTt]/)===null?(c=l,f=u):o[0]==="t"?(c=2*l-m,f=2*u-g):o[0]==="q"&&(c=2*l-c,f=2*u-f),m=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+a[1],f=u+a[2];break;case"T":d=a[1],h=a[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":fge(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+r]),l+=a[6],u+=a[7];break;case"A":fge(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],u=a[7];break;case"z":case"Z":l=b,u=x,e.closePath();break}o=a}}function fge(e,t,n,r){const i=uVt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const a=cVt(i[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const dge=.5773502691896257,hge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ef)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=D2*n,i=r-n*dge,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=D2*n,i=r-n*dge;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=D2*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=D2*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=D2*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=D2*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function dVt(e){return gt(hge,e)?hge[e]:hVt(e)}var RU={};function hVt(e){if(!gt(RU,e)){const t=ine(e);RU[e]={draw:function(n,r){P5(n,t,0,0,Math.sqrt(r)/2)}}}return RU[e]}const Jp=.448084975506;function pVt(e){return e.x}function mVt(e){return e.y}function gVt(e){return e.width}function yVt(e){return e.height}function th(e){return typeof e=="function"?e:()=>+e}function OD(e,t,n){return Math.max(t,Math.min(e,n))}function bVt(){var e=pVt,t=mVt,n=gVt,r=yVt,i=th(0),s=i,a=i,o=i,l=null;function u(c,f,d){var h,m=f??+e.call(this,c),g=d??+t.call(this,c),b=+n.call(this,c),x=+r.call(this,c),w=Math.min(b,x)/2,C=OD(+i.call(this,c),0,w),S=OD(+s.call(this,c),0,w),E=OD(+a.call(this,c),0,w),A=OD(+o.call(this,c),0,w);if(l||(l=h=Um()),C<=0&&S<=0&&E<=0&&A<=0)l.rect(m,g,b,x);else{var k=m+b,N=g+x;l.moveTo(m+C,g),l.lineTo(k-S,g),l.bezierCurveTo(k-Jp*S,g,k,g+Jp*S,k,g+S),l.lineTo(k,N-A),l.bezierCurveTo(k,N-Jp*A,k-Jp*A,N,k-A,N),l.lineTo(m+E,N),l.bezierCurveTo(m+Jp*E,N,m,N-Jp*E,m,N-E),l.lineTo(m,g+C),l.bezierCurveTo(m,g+Jp*C,m+Jp*C,g,m+C,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=th(c),u):e},u.y=function(c){return arguments.length?(t=th(c),u):t},u.width=function(c){return arguments.length?(n=th(c),u):n},u.height=function(c){return arguments.length?(r=th(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=th(c),s=f!=null?th(f):i,o=d!=null?th(d):i,a=h!=null?th(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function xVt(){var e,t,n,r,i=null,s,a,o,l;function u(f,d,h){const m=h/2;if(s){var g=o-d,b=f-a;if(g||b){var x=Math.hypot(g,b),w=(g/=x)*l,C=(b/=x)*l,S=Math.atan2(b,g);i.moveTo(a-w,o-C),i.lineTo(f-g*m,d-b*m),i.arc(f,d,m,S-Math.PI,S),i.lineTo(a+w,o+C),i.arc(a,o,l,S,S+Math.PI)}else i.arc(f,d,m,0,Ef);i.closePath()}else s=1;a=f,o=d,l=m}function c(f){var d,h=f.length,m,g=!1,b;for(i==null&&(i=b=Um()),d=0;d<=h;++d)!(d<h&&r(m=f[d],d,f))===g&&(g=!g)&&(s=0),g&&u(+e(m,d,f),+t(m,d,f),+n(m,d,f));if(b)return i=null,b+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function _T(e,t){return e??t}const TT=e=>e.x||0,NT=e=>e.y||0,vVt=e=>e.width||0,wVt=e=>e.height||0,SVt=e=>(e.x||0)+(e.width||0),CVt=e=>(e.y||0)+(e.height||0),$Vt=e=>e.startAngle||0,EVt=e=>e.endAngle||0,kVt=e=>e.padAngle||0,AVt=e=>e.innerRadius||0,_Vt=e=>e.outerRadius||0,TVt=e=>e.cornerRadius||0,NVt=e=>_T(e.cornerRadiusTopLeft,e.cornerRadius)||0,DVt=e=>_T(e.cornerRadiusTopRight,e.cornerRadius)||0,IVt=e=>_T(e.cornerRadiusBottomRight,e.cornerRadius)||0,OVt=e=>_T(e.cornerRadiusBottomLeft,e.cornerRadius)||0,RVt=e=>_T(e.size,64),FVt=e=>e.size||1,l7=e=>e.defined!==!1,MVt=e=>dVt(e.shape||"circle"),LVt=GQ().startAngle($Vt).endAngle(EVt).padAngle(kVt).innerRadius(AVt).outerRadius(_Vt).cornerRadius(TVt),PVt=aS().x(TT).y1(NT).y0(CVt).defined(l7),BVt=aS().y(NT).x1(TT).x0(SVt).defined(l7),zVt=Q8().x(TT).y(NT).defined(l7),jVt=bVt().x(TT).y(NT).width(vVt).height(wVt).cornerRadius(NVt,DVt,IVt,OVt),UVt=qQ().type(MVt).size(RVt),VVt=xVt().x(TT).y(NT).defined(l7).size(FVt);function sne(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function WVt(e,t){return LVt.context(e)(t)}function HVt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?BVt:PVt).curve(VIe(r,n.orient,n.tension)).context(e)(t)}function GVt(e,t){const n=t[0],r=n.interpolate||"linear";return zVt.curve(VIe(r,n.orient,n.tension)).context(e)(t)}function DS(e,t,n,r){return jVt.context(e)(t,n,r)}function qVt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function XVt(e,t){return UVt.context(e)(t)}function YVt(e,t){return VVt.context(e)(t)}var KVt=1;function ZVt(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+KVt++),a=i.clipping[s]||(i.clipping[s]={id:s});return Wt(r)?a.path=r(null):sne(n)?a.path=DS(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Jh(e){this.clear(),e&&this.union(e)}Jh.prototype={clone(){return new Jh(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),u=t-t*o+n*l,c=n-t*l-n*o;return[o*r-l*i+u,l*r+o*i+c,o*r-l*a+u,l*r+o*a+c,o*s-l*i+u,l*s+o*i+c,o*s-l*a+u,l*s+o*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function HIe(e){this.mark=e,this.bounds=this.bounds||new Jh}function QVt(e){HIe.call(this,e),this.items=this.items||[]}Ve(QVt,HIe);function IS(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?JVt(t,r):0))}return e}function JVt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const eWt=Ef-1e-8;let u7,fO,dO,I1,MG,hO,LG,PG;const R0=(e,t)=>u7.add(e,t),pO=(e,t)=>R0(fO=e,dO=t),pge=e=>R0(e,u7.y1),mge=e=>R0(u7.x1,e),x1=(e,t)=>MG*e+LG*t,v1=(e,t)=>hO*e+PG*t,FU=(e,t)=>R0(x1(e,t),v1(e,t)),MU=(e,t)=>pO(x1(e,t),v1(e,t));function ane(e,t){return u7=e,t?(I1=t*bm,MG=PG=Math.cos(I1),hO=Math.sin(I1),LG=-hO):(MG=PG=1,I1=hO=LG=0),tWt}const tWt={beginPath(){},closePath(){},moveTo:MU,lineTo:MU,rect(e,t,n,r){I1?(FU(e+n,t),FU(e+n,t+r),FU(e,t+r),MU(e,t)):(R0(e+n,t+r),pO(e,t))},quadraticCurveTo(e,t,n,r){const i=x1(e,t),s=v1(e,t),a=x1(n,r),o=v1(n,r);gge(fO,i,a,pge),gge(dO,s,o,mge),pO(a,o)},bezierCurveTo(e,t,n,r,i,s){const a=x1(e,t),o=v1(e,t),l=x1(n,r),u=v1(n,r),c=x1(i,s),f=v1(i,s);yge(fO,a,l,c,pge),yge(dO,o,u,f,mge),pO(c,f)},arc(e,t,n,r,i,s){if(r+=I1,i+=I1,fO=n*Math.cos(i)+e,dO=n*Math.sin(i)+t,Math.abs(i-r)>eWt)R0(e-n,t-n),R0(e+n,t+n);else{const a=u=>R0(n*Math.cos(u)+e,n*Math.sin(u)+t);let o,l;if(a(r),a(i),i!==r)if(r=r%Ef,r<0&&(r+=Ef),i=i%Ef,i<0&&(i+=Ef),i<r&&(s=!s,o=r,r=i,i=o),s)for(i-=Ef,o=r-r%b1,l=0;l<4&&o>i;++l,o-=b1)a(o);else for(o=r-r%b1+b1,l=0;l<4&&o<i;++l,o=o+b1)a(o)}}};function gge(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function yge(e,t,n,r,i){const s=r-e+3*t-3*n,a=e+n-2*t,o=e-t;let l=0,u=0,c;Math.abs(s)>lVt?(c=a*a+o*s,c>=0&&(c=Math.sqrt(c),l=(-a+c)/s,u=(-a-c)/s)):l=.5*o/a,0<l&&l<1&&i(bge(l,e,t,n,r)),0<u&&u<1&&i(bge(u,e,t,n,r))}function bge(e,t,n,r,i){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*r+o*e*i}var H0=(H0=Eu(1,1))?H0.getContext("2d"):null;const BG=new Jh;function GIe(e){return function(t,n){if(!H0)return!0;e(H0,t),BG.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:a}=BG;for(let o=i;o<=a;++o)for(let l=r;l<=s;++l)if(H0.isPointInPath(l,o))return!0;return!1}}function qIe(e,t){return t.contains(e.x||0,e.y||0)}function XIe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(BG.set(n,r,n+i,r+s))}function nWt(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return x$(t,n,r,i,s)}function x$(e,t,n,r,i){const{x1:s,y1:a,x2:o,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,m,g,b;for(b=0;b<4;++b){if(b===0&&(h=-u,m=-(s-t)),b===1&&(h=u,m=o-t),b===2&&(h=-c,m=-(a-n)),b===3&&(h=c,m=l-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function bv(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ju(e,t){return e??t}function xge(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function rWt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Ju(t.x1,.5)*r,n.y1+Ju(t.y1,.5)*i,Math.max(r,i)*Ju(t.r1,0),n.x1+Ju(t.x2,.5)*r,n.y1+Ju(t.y2,.5)*i,Math.max(r,i)*Ju(t.r2,.5));else{const a=Ju(t.x1,0),o=Ju(t.y1,0),l=Ju(t.x2,1),u=Ju(t.y2,0);if(a===l||o===u||r===i)s=e.createLinearGradient(n.x1+a*r,n.y1+o*i,n.x1+l*r,n.y1+u*i);else{const c=Eu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=xge(f.createLinearGradient(a,o,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return xge(s,t.stops)}function YIe(e,t,n){return eVt(n)?rWt(e,n,t.bounds):n}function B5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=YIe(e,t,t.fill),!0):!1}var iWt=[];function xv(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=YIe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||iWt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function sWt(e,t){return e.zindex-t.zindex||e.index-t.index}function KIe(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(sWt)}function vv(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=KIe(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function zG(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=KIe(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function one(e){return function(t,n,r){vv(n,i=>{(!r||r.intersects(i.bounds))&&ZIe(e,t,i,i)})}}function aWt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&ZIe(e,t,n.items[0],n.items)}}function ZIe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(bv(t,n),n.fill&&B5(t,n,i)&&t.fill(),n.stroke&&xv(t,n,i)&&t.stroke()))}function c7(e){return e=e||zs,function(t,n,r,i,s,a){return r*=t.pixelRatio,i*=t.pixelRatio,zG(n,o=>{const l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&e(t,o,r,i,s,a))return o})}}function DT(e,t){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,o=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:o&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function lne(e){return c7(DT(e))}function K1(e,t){return"translate("+e+","+t+")"}function une(e){return"rotate("+e+")"}function oWt(e,t){return"scale("+e+","+t+")"}function QIe(e){return K1(e.x||0,e.y||0)}function lWt(e){return K1(e.x||0,e.y||0)+(e.angle?" "+une(e.angle):"")}function uWt(e){return K1(e.x||0,e.y||0)+(e.angle?" "+une(e.angle):"")+(e.scaleX||e.scaleY?" "+oWt(e.scaleX||1,e.scaleY||1):"")}function cne(e,t,n){function r(a,o){a("transform",lWt(o)),a("d",t(null,o))}function i(a,o){return t(ane(a,o.angle),o),IS(a,o).translate(o.x||0,o.y||0)}function s(a,o){var l=o.x||0,u=o.y||0,c=o.angle||0;a.translate(l,u),c&&a.rotate(c*=bm),a.beginPath(),t(a,o),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:one(s),pick:lne(s),isect:n||GIe(s)}}var cWt=cne("arc",WVt);function fWt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,a,o;--i>=0;)e[i].defined!==!1&&(o=Math.abs(e[i][r]-n),o<s&&(s=o,a=e[i]));return a}function dWt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],a=i*i+s*s,a<n))return e[r];return null}function hWt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function fne(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(ane(l),c),IS(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const a=DT(s);function o(l,u,c,f,d,h){var m=u.items,g=u.bounds;return!m||!m.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,a(l,m,c,f)?m[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:aWt(s),pick:o,isect:qIe,tip:n}}var pWt=fne("area",HVt,fWt);function mWt(e,t){e.beginPath(),sne(t)?DS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function JIe(e){const t=Ju(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function gWt(e,t){e("transform",QIe(t))}function eOe(e,t){const n=JIe(t);e("d",DS(null,t,n,n))}function yWt(e,t){e("class","background"),e("aria-hidden",!0),eOe(e,t)}function bWt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?eOe(e,t):e("d","")}function xWt(e,t,n){const r=t.clip?ZVt(n,t,t):null;e("clip-path",r)}function vWt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),IS(e,t),e.translate(t.x||0,t.y||0)}function ck(e,t,n,r){const i=JIe(t);e.beginPath(),DS(e,t,(n||0)+i,(r||0)+i)}const wWt=DT(ck),SWt=DT(ck,!1),CWt=DT(ck,!0);function $Wt(e,t,n,r){vv(t,i=>{const s=i.x||0,a=i.y||0,o=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(ck(e,i,s,a),bv(e,i),i.fill&&B5(e,i,l)&&e.fill(),i.stroke&&!o&&xv(e,i,l)&&e.stroke()),e.save(),e.translate(s,a),i.clip&&mWt(e,i),n&&n.translate(-s,-a),vv(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,a),e.restore(),o&&i.stroke&&l&&(ck(e,i,s,a),bv(e,i),xv(e,i,l)&&e.stroke())})}function EWt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const a=n*e.pixelRatio,o=r*e.pixelRatio;return zG(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,s))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),m=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||s<f||s>m))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,g&&sne(l)&&!CWt(e,l,a,o))return e.restore(),null;const b=l.strokeForeground,x=t.interactive!==!1;return x&&b&&l.stroke&&SWt(e,l,a,o)?(e.restore(),l):(u=zG(l,w=>kWt(w,c,f)?this.pick(w,n,r,c,f):null),!u&&x&&(l.fill||!b&&l.stroke)&&wWt(e,l,a,o)&&(u=l),e.restore(),u||null)})}function kWt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var AWt={type:"group",tag:"g",nested:!1,attr:gWt,bound:vWt,draw:$Wt,pick:EWt,isect:XIe,content:xWt,background:yWt,foreground:bWt},_Wt={"xmlns:xlink":"http://www.w3.org/1999/xlink"};function dne(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function hne(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function pne(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function f7(e,t){return e==="center"?t/2:e==="right"?t:0}function d7(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function TWt(e,t,n){const r=dne(t,n),i=hne(t,r),s=pne(t,r),a=(t.x||0)-f7(t.align,i),o=(t.y||0)-d7(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,_Wt["xmlns:xlink"],"xlink:href"),e("transform",K1(a,o)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function NWt(e,t){const n=t.image,r=hne(t,n),i=pne(t,n),s=(t.x||0)-f7(t.align,r),a=(t.y||0)-d7(t.baseline,i);return e.set(s,a,s+r,a+i)}function DWt(e,t,n){vv(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=dne(r,this);let s=hne(r,i),a=pne(r,i);if(s===0||a===0)return;let o=(r.x||0)-f7(r.align,s),l=(r.y||0)-d7(r.baseline,a),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,l+=(a-d)/2,a=d):(d=a*c,o+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(bv(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,o,l,s,a))})}var IWt={type:"image",tag:"image",nested:!1,attr:TWt,bound:NWt,draw:DWt,pick:c7(),isect:zs,get:dne,xOffset:f7,yOffset:d7},OWt=fne("line",GVt,dWt);function RWt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",uWt(t)),e("d",t.path)}function mO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*bm,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ine(n)).path=n),o&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(o),P5(e,l,0,0,s,a),e.rotate(-o),e.translate(-r,-i)):P5(e,l,r,i,s,a)}function FWt(e,t){return mO(ane(e,t.angle),t)?e.set(0,0,0,0):IS(e,t,!0)}var MWt={type:"path",tag:"path",nested:!1,attr:RWt,bound:FWt,draw:one(mO),pick:lne(mO),isect:GIe(mO)};function LWt(e,t){e("d",DS(null,t))}function PWt(e,t){var n,r;return IS(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function vge(e,t){e.beginPath(),DS(e,t)}var BWt={type:"rect",tag:"path",nested:!1,attr:LWt,bound:PWt,draw:one(vge),pick:lne(vge),isect:XIe};function zWt(e,t){e("transform",QIe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function jWt(e,t){var n,r;return IS(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function tOe(e,t,n){var r,i,s,a;return t.stroke&&xv(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,a),!0):!1}function UWt(e,t,n){vv(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&tOe(e,r,i)&&(bv(e,r),e.stroke())}})}function VWt(e,t,n,r){return e.isPointInStroke?tOe(e,t,1)&&e.isPointInStroke(n,r):!1}var WWt={type:"rule",tag:"line",nested:!1,attr:zWt,bound:jWt,draw:UWt,pick:c7(VWt),isect:nWt},HWt=cne("shape",qVt),GWt=cne("symbol",XVt,qIe);const wge=E8();var Z1={height:xb,measureWidth:mne,estimateWidth:z5,width:z5,canvas:nOe};nOe(!0);function nOe(e){Z1.width=e&&H0?mne:z5}function z5(e,t){return rOe(U5(e,t),xb(e))}function rOe(e,t){return~~(.8*e.length*t)}function mne(e,t){return xb(e)<=0||!(t=U5(e,t))?0:iOe(t,gne(e))}function iOe(e,t){const n=`(${t}) ${e}`;let r=wge.get(n);return r===void 0&&(H0.font=t,r=H0.measureText(e).width,wge.set(n,r)),r}function xb(e){return e.fontSize!=null?+e.fontSize||0:11}function j5(e){return e.lineHeight!=null?e.lineHeight:xb(e)+2}function qWt(e){return Qe(e)?e.length>1?e:e[0]:e}function sOe(e){return qWt(e.lineBreak&&e.text&&!Qe(e.text)?e.text.split(e.lineBreak):e.text)}function U5(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?YWt(e,n):n}function XWt(e){if(Z1.width===mne){const t=gne(e);return n=>iOe(n,t)}else if(Z1.width===z5){const t=xb(e);return n=>rOe(n,t)}else return t=>Z1.width(e,t)}function YWt(e,t){var n=+e.limit,r=XWt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",a=0,o=t.length,l;if(n-=r(i),s){for(;a<o;)l=a+o>>>1,r(t.slice(l))>n?a=l+1:o=l;return i+t.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),r(t.slice(0,l))<n?a=l:o=l-1;return t.slice(0,a)+i}}function KWt(e,t){var n=e.font;return n||"sans-serif"}function gne(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+xb(e)+"px "+KWt(e)}function yne(e){var t=e.baseline,n=xb(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*j5(e):t==="line-bottom"?.29*n-.5*j5(e):0)}const ZWt={left:"start",center:"middle",right:"end"},q$=new Jh;function h7(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-b1,t+=r*Math.cos(i),n+=r*Math.sin(i)),q$.x1=t,q$.y1=n,q$}function QWt(e,t){var n=t.dx||0,r=(t.dy||0)+yne(t),i=h7(t),s=i.x1,a=i.y1,o=t.angle||0,l;e("text-anchor",ZWt[t.align]||"start"),o?(l=K1(s,a)+" "+une(o),(n||r)&&(l+=" "+K1(n,r))):l=K1(s+n,a+r),e("transform",l)}function bne(e,t,n){var r=Z1.height(t),i=t.align,s=h7(t),a=s.x1,o=s.y1,l=t.dx||0,u=(t.dy||0)+yne(t)-Math.round(.8*r),c=sOe(t),f;if(Qe(c)?(r+=j5(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Z1.width(t,h)),0)):f=Z1.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=a,u+=o,l+f,u+r),t.angle&&!n)e.rotate(t.angle*bm,a,o);else if(n===2)return e.rotatedPoints(t.angle*bm,a,o);return e}function JWt(e,t,n){vv(t,r=>{var i=r.opacity==null?1:r.opacity,s,a,o,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=gne(r),e.textAlign=r.align||"left",s=h7(r),a=s.x1,o=s.y1,r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*bm),a=o=0),a+=r.dx||0,o+=(r.dy||0)+yne(r),c=sOe(r),bv(e,r),Qe(c))for(u=j5(r),l=0;l<c.length;++l)f=U5(r,c[l]),r.fill&&B5(e,r,i)&&e.fillText(f,a,o),r.stroke&&xv(e,r,i)&&e.strokeText(f,a,o),o+=u;else f=U5(r,c),r.fill&&B5(e,r,i)&&e.fillText(f,a,o),r.stroke&&xv(e,r,i)&&e.strokeText(f,a,o);r.angle&&e.restore()}})}function eHt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=h7(t),o=a.x1,l=a.y1,u=bne(q$,t,1),c=-t.angle*bm,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(o-f*o+d*l),m=d*i+f*s+(l-d*o-f*l);return u.contains(h,m)}function tHt(e,t){const n=bne(q$,e,2);return x$(t,n[0],n[1],n[2],n[3])||x$(t,n[0],n[1],n[4],n[5])||x$(t,n[4],n[5],n[6],n[7])||x$(t,n[2],n[3],n[6],n[7])}var nHt={type:"text",tag:"text",nested:!1,attr:QWt,bound:bne,draw:JWt,pick:c7(eHt),isect:tHt},rHt=fne("trail",YVt,hWt),aOe={arc:cWt,area:pWt,group:AWt,image:IWt,line:OWt,path:MWt,rect:BWt,rule:WWt,shape:HWt,symbol:GWt,text:nHt,trail:rHt};cs(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]);function iHt(e,t,n){const r=[],i=new Jh().union(t),s=e.marktype;return s?oOe(e,i,n,r):s==="group"?lOe(e,i,n,r):Ce("Intersect scene must be mark node or group item.")}function oOe(e,t,n,r){if(sHt(e,t,n)){const i=e.items,s=e.marktype,a=i.length;let o=0;if(s==="group")for(;o<a;++o)lOe(i[o],t,n,r);else for(const l=aOe[s].isect;o<a;++o){const u=i[o];uOe(u,t,l)&&r.push(u)}}return r}function sHt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function lOe(e,t,n,r){n&&n(e.mark)&&uOe(e,t,aOe.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const a=e.x||0,o=e.y||0;t.translate(-a,-o);for(let l=0;l<s;++l)oOe(i[l],t,n,r);t.translate(a,o)}return r}function uOe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}new Jh;function cOe(e){const t=this.context.data[e];return t?t.values.value:[]}function aHt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function oHt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(zs).insert(t)),1}function lHt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const IT=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},uHt=IT("format"),fOe=IT("timeFormat"),cHt=IT("utcFormat"),fHt=IT("timeParse"),dHt=IT("utcParse"),RD=new Date(2e3,0,1);function p7(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(RD.setYear(2e3),RD.setMonth(e),RD.setDate(t),fOe.call(this,RD,n))}function hHt(e){return p7.call(this,e,1,"%B")}function pHt(e){return p7.call(this,e,1,"%b")}function mHt(e){return p7.call(this,0,2+e,"%A")}function gHt(e){return p7.call(this,0,2+e,"%a")}const yHt=":",bHt="@",jG="%",dOe="$";function xne(e,t,n,r){t[0].type!==gv&&Ce("First argument to data functions must be a string literal.");const i=t[0].value,s=yHt+i;if(!gt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function xHt(e,t,n,r){t[0].type!==gv&&Ce("First argument to indata must be a string literal."),t[1].type!==gv&&Ce("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,a=bHt+s;gt(a,r)||(r[a]=n.getData(i).indataRef(n,s))}function mo(e,t,n,r){if(t[0].type===gv)Sge(n,r,t[0].value);else for(e in n.scales)Sge(n,r,e)}function Sge(e,t,n){const r=jG+n;if(!gt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Sd(e,t){if(Fn(e)){const n=t.scales[e];return n&&oge(n.value)?n.value:void 0}else if(Wt(e))return oge(e)?e:void 0}function vHt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=mo,n._range=mo,n._scale=mo;const r=i=>"_["+(i.type===gv?$t(jG+i.value):$t(jG)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function vne(e,t){return function(n,r,i){if(n){const s=Sd(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const wHt=vne("area",xNe),SHt=vne("bounds",$Ne),CHt=vne("centroid",_Ne);function $Ht(e,t){const n=Sd(e,(t||this).context);return n&&n.scale()}function EHt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function wne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function kHt(){return wne(this.context.dataflow,"warn",arguments)}function AHt(){return wne(this.context.dataflow,"info",arguments)}function _Ht(){return wne(this.context.dataflow,"debug",arguments)}function LU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function UG(e){const t=ed(e),n=LU(t.r),r=LU(t.g),i=LU(t.b);return .2126*n+.7152*r+.0722*i}function THt(e,t){const n=UG(e),r=UG(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function NHt(){const e=[].slice.call(arguments);return e.unshift({}),Kt(...e)}function hOe(e,t){return e===t||e!==e&&t!==t?!0:Qe(e)?Qe(t)&&e.length===t.length?DHt(e,t):!1:Ht(e)&&Ht(t)?pOe(e,t):!1}function DHt(e,t){for(let n=0,r=e.length;n<r;++n)if(!hOe(e[n],t[n]))return!1;return!0}function pOe(e,t){for(const n in e)if(!hOe(e[n],t[n]))return!1;return!0}function Cge(e){return t=>pOe(e,t)}function IHt(e,t,n,r,i,s){const a=this.context.dataflow,o=this.context.data[e],l=o.input,u=a.stamp();let c=o.changes,f,d;if(a._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(o.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{o.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(f=n===!0?zs:Qe(n)||iS(n)?n:Cge(n),c.remove(f)),t&&c.insert(t),r&&(f=Cge(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function OHt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function RHt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const $ge={};function FHt(e,t){const n=$ge[t]||($ge[t]=Pl(t));return Qe(e)?e.map(n):n(e)}function m7(e){return Qe(e)||ArrayBuffer.isView(e)?e:null}function Sne(e){return m7(e)||(Fn(e)?e:null)}function MHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m7(e).join(...n)}function LHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sne(e).indexOf(...n)}function PHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sne(e).lastIndexOf(...n)}function BHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sne(e).slice(...n)}function zHt(e,t,n){return Wt(n)&&Ce("Function argument passed to replace."),!Fn(t)&&!$8(t)&&Ce("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function jHt(e){return m7(e).slice().reverse()}function UHt(e){return m7(e).slice().sort(I_)}function VHt(e,t,n){return RIe(e||0,t||0,n||0)}function WHt(e,t){const n=Sd(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function HHt(e,t){const n=Sd(e,(t||this).context);return n?n.copy():void 0}function GHt(e,t){const n=Sd(e,(t||this).context);return n?n.domain():[]}function qHt(e,t,n){const r=Sd(e,(n||this).context);return r?Qe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function XHt(e,t){const n=Sd(e,(t||this).context);return n&&n.range?n.range():[]}function YHt(e,t,n){const r=Sd(e,(n||this).context);return r?r(t):void 0}function KHt(e,t,n,r,i){e=Sd(e,(i||this).context);const s=tVt(t,n);let a=e.domain(),o=a[0],l=en(a),u=Ha;return l-o?u=XUt(e,o,l):e=(e.interpolator?cr("sequential")().interpolator(e.interpolator()):cr("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(a=e.ticks(+r||15),o!==a[0]&&a.unshift(o),l!==en(a)&&a.push(l)),a.forEach(c=>s.stop(u(c),e(c))),s}function ZHt(e,t,n){const r=Sd(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function QHt(e){let t=null;return function(n){return n?P5(n,t=t||ine(e)):e}}const mOe=e=>e.data;function gOe(e,t){const n=cOe.call(t,e);return n.root&&n.root.lookup||{}}function JHt(e,t,n){const r=gOe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(mOe):void 0}function eGt(e,t){const n=gOe(e,this)[t];return n?n.ancestors().map(mOe):void 0}const yOe=()=>typeof window<"u"&&window||null;function tGt(){const e=yOe();return e?e.screen:{}}function nGt(){const e=yOe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function rGt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function bOe(e,t,n){if(!e)return[];const[r,i]=e,s=new Jh().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return iHt(a,s,iGt(t))}function iGt(e){let t=null;if(e){const n=vt(e.marktype),r=vt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function sGt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=vt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function aGt(e){return vt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function oGt(e,t,n){const{x:r,y:i,mark:s}=n,a=new Jh().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(r,i),bOe([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter(l=>lGt(l.x,l.y,t))}function lGt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[a,o]=n[s],[l,u]=n[i];u>t!=o>t&&e<(a-l)*(t-u)/(o-u)+l&&r++}return r&1}const V5={random(){return jl()},cumulativeNormal:R_,cumulativeLogNormal:U8,cumulativeUniform:G8,densityNormal:B8,densityLogNormal:j8,densityUniform:H8,quantileNormal:F_,quantileLogNormal:V8,quantileUniform:q8,sampleNormal:O_,sampleLogNormal:z8,sampleUniform:W8,isArray:Qe,isBoolean:C8,isDate:Nh,isDefined(e){return e!==void 0},isNumber:Yh,isObject:Ht,isRegExp:$8,isString:Fn,isTuple:iS,isValid(e){return e!=null&&e===e},toBoolean:k8,toDate(e){return A8(e)},toNumber:Ti,toString:_8,indexof:LHt,join:MHt,lastindexof:PHt,replace:zHt,reverse:jHt,sort:UHt,slice:BHt,flush:PZ,lerp:zZ,merge:NHt,pad:jZ,peek:en,pluck:FHt,span:Qw,inrange:k1,truncate:UZ,rgb:ed,lab:VE,hcl:WE,hsl:UE,luminance:UG,contrast:THt,sequence:Ts,format:uHt,utcFormat:cHt,utcParse:dHt,utcOffset:eQ,utcSequence:nQ,timeFormat:fOe,timeParse:fHt,timeOffset:JZ,timeSequence:tQ,timeUnitSpecifier:qZ,monthFormat:hHt,monthAbbrevFormat:pHt,dayFormat:mHt,dayAbbrevFormat:gHt,quarter:OZ,utcquarter:RZ,week:KZ,utcweek:QZ,dayofyear:YZ,utcdayofyear:ZZ,warn:kHt,info:AHt,debug:_Ht,extent(e){return kc(e)},inScope:EHt,intersect:bOe,clampRange:FZ,pinchDistance:OHt,pinchAngle:RHt,screen:tGt,containerSize:rGt,windowSize:nGt,bandspace:VHt,setdata:oHt,pathShape:QHt,panLinear:TZ,panLog:NZ,panPow:DZ,panSymlog:IZ,zoomLinear:v8,zoomLog:w8,zoomPow:OE,zoomSymlog:S8,encode:lHt,modify:IHt,lassoAppend:sGt,lassoPath:aGt,intersectLasso:oGt},uGt=["view","item","group","xy","x","y"],cGt="event.vega.",xOe="this.",Cne={},vOe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${$t(dOe+e)}]`,functions:fGt,constants:IIe,visitors:Cne},VG=AUt(vOe);function fGt(e){const t=OIe(e);uGt.forEach(n=>t[n]=cGt+n);for(const n in V5)t[n]=xOe+n;return Kt(t,vHt(e,V5,Cne)),t}function Zi(e,t,n){return arguments.length===1?V5[e]:(V5[e]=t,n&&(Cne[e]=n),VG&&(VG.functions[e]=xOe+e),this)}Zi("bandwidth",WHt,mo);Zi("copy",HHt,mo);Zi("domain",GHt,mo);Zi("range",XHt,mo);Zi("invert",qHt,mo);Zi("scale",YHt,mo);Zi("gradient",KHt,mo);Zi("geoArea",wHt,mo);Zi("geoBounds",SHt,mo);Zi("geoCentroid",CHt,mo);Zi("geoShape",ZHt,mo);Zi("geoScale",$Ht,mo);Zi("indata",aHt,xHt);Zi("data",cOe,xne);Zi("treePath",JHt,xne);Zi("treeAncestors",eGt,xne);Zi("vlSelectionTest",KDe,TS);Zi("vlSelectionIdTest",QDe,TS);Zi("vlSelectionResolve",eIe,TS);Zi("vlSelectionTuples",JDe);function rd(e,t){const n={};let r;try{e=Fn(e)?e:$t(e)+"",r=EUt(e)}catch{Ce("Expression parse error: "+e)}r.visit(s=>{if(s.type!==EIe)return;const a=s.callee.name,o=vOe.visitors[a];o&&o(a,s.arguments,t,n)});const i=VG(r);return i.globals.forEach(s=>{const a=dOe+s;!gt(n,a)&&t.getSignal(s)&&(n[a]=t.signalRef(s))}),{$expr:Kt({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}const dGt="view",W5="[",H5="]",wOe="{",SOe="}",hGt=":",COe=",",pGt="@",mGt=">",gGt=/[[\]{}]/,yGt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let $Oe,EOe;function bGt(e,t,n){return $Oe=t||dGt,EOe=yGt,kOe(e.trim()).map(WG)}function xGt(e){return EOe[e]}function X$(e,t,n,r,i){const s=e.length;let a=0,o;for(;t<s;++t){if(o=e[t],!a&&o===n)return t;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return t}function kOe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=X$(e,i,COe,W5+wOe,H5+SOe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function WG(e){return e[0]==="["?vGt(e):wGt(e)}function vGt(e){const t=e.length;let n=1,r;if(n=X$(e,n,H5,W5,H5),n===t)throw"Empty between selector: "+e;if(r=kOe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==mGt)throw"Expected '>' after between selector: "+e;r=r.map(WG);const i=WG(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function wGt(e){const t={source:$Oe},n=[];let r=[0,0],i=0,s=0,a=e.length,o=0,l,u;if(e[a-1]===SOe){if(o=e.lastIndexOf(wOe),o>=0){try{r=SGt(e.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),a=e.length}else throw"Unmatched right brace: "+e;o=0}if(!a)throw e;if(e[0]===pGt&&(i=++o),l=X$(e,o,hGt),l<a&&(n.push(e.substring(s,l).trim()),s=o=++l),o=X$(e,o,W5),o===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,o).trim()),u=[],s=++o,s===a)throw"Unmatched left bracket: "+e;for(;o<a;){if(o=X$(e,o,H5),o===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,o).trim()),o<a-1&&e[++o]!==W5)throw"Expected left bracket: "+e;s=++o}if(!(a=n.length)||gGt.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):xGt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function SGt(e){const t=e.split(COe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function CGt(e){return Ht(e)?e:{type:e||"pad"}}const k3=e=>+e||0,$Gt=e=>({top:e,bottom:e,left:e,right:e});function EGt(e){return Ht(e)?e.signal?e:{top:k3(e.top),bottom:k3(e.bottom),left:k3(e.left),right:k3(e.right)}:$Gt(k3(e))}const Rs=e=>Ht(e)&&!Qe(e)?Kt({},e):{value:e};function Ege(e,t,n,r){return n!=null?(Ht(n)&&!Qe(n)||Qe(n)&&n.length&&Ht(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function la(e,t,n){for(const r in t)Ege(e,r,t[r]);for(const r in n)Ege(e,r,n[r],"update")}function OS(e,t,n){for(const r in t)n&&gt(n,r)||(e[r]=Kt(e[r]||{},t[r]));return e}function G2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const $ne="mark",Ene="frame",kne="scope",kGt="axis",AGt="axis-domain",_Gt="axis-grid",TGt="axis-label",NGt="axis-tick",DGt="axis-title",IGt="legend",OGt="legend-band",RGt="legend-entry",FGt="legend-gradient",AOe="legend-label",MGt="legend-symbol",LGt="legend-title",PGt="title",BGt="title-text",zGt="title-subtitle";function jGt(e,t,n,r,i){const s={},a={};let o,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!G2(l,e)&&PU(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Ene?i.group:n===$ne?Kt({},i.mark,i[t]):null;for(l in c)u=G2(l,e)||(l==="fill"||l==="stroke")&&(G2("fill",e)||G2("stroke",e)),u||PU(s,l,c[l]);vt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)G2(h,e)||PU(s,h,d[h])}),e=Kt({},e);for(l in s)c=s[l],c.signal?(o=o||{})[l]=c:a[l]=c;return e.enter=Kt(a,e.enter),o&&(e.update=Kt(o,e.update)),e}function PU(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const _Oe=e=>Fn(e)?$t(e):e.signal?`(${e.signal})`:TOe(e);function g7(e){if(e.gradient!=null)return VGt(e);let t=e.signal?`(${e.signal})`:e.color?UGt(e.color):e.field!=null?TOe(e.field):e.value!==void 0?$t(e.value):void 0;return e.scale!=null&&(t=WGt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${gO(e.exponent)})`),e.mult!=null&&(t+=`*${gO(e.mult)}`),e.offset!=null&&(t+=`+${gO(e.offset)}`),e.round&&(t=`round(${t})`),t}const FD=(e,t,n,r)=>`(${e}(${[t,n,r].map(g7).join(",")})+'')`;function UGt(e){return e.c?FD("hcl",e.h,e.c,e.l):e.h||e.s?FD("hsl",e.h,e.s,e.l):e.l||e.a?FD("lab",e.l,e.a,e.b):e.r||e.g||e.b?FD("rgb",e.r,e.g,e.b):null}function VGt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:$t(n));for(;t.length&&en(t)==null;)t.pop();return t.unshift(_Oe(e.gradient)),`gradient(${t.join(",")})`}function gO(e){return Ht(e)?"("+g7(e)+")":e}function TOe(e){return NOe(Ht(e)?e:{datum:e})}function NOe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ce("Invalid field reference: "+$t(e));return e.signal||(r=Fn(r)?m8(r).map($t).join("]["):NOe(r)),t+"["+r+"]"}function WGt(e,t){const n=_Oe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+gO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function HGt(e){let t="";return e.forEach(n=>{const r=g7(n);t+=n.test?`(${n.test})?${r}:`:r}),en(t)===":"&&(t+="null"),t}function DOe(e,t,n,r,i,s){const a={};s=s||{},s.encoders={$encode:a},e=jGt(e,t,n,r,i.config);for(const o in e)a[o]=GGt(e[o],t,s,i);return s}function GGt(e,t,n,r){const i={},s={};for(const a in e)e[a]!=null&&(i[a]=XGt(qGt(e[a]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function qGt(e){return Qe(e)?HGt(e):g7(e)}function XGt(e,t,n,r){const i=rd(e,t);return i.$fields.forEach(s=>r[s]=1),Kt(n,i.$params),i.$expr}const YGt="outer",KGt=["value","update","init","react","bind"];function kge(e,t){Ce(e+' for "outer" push: '+$t(t))}function IOe(e,t){const n=e.name;if(e.push===YGt)t.signals[n]||kge("No prior signal definition",n),KGt.forEach(r=>{e[r]!==void 0&&kge("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function HG(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function y7(e,t,n,r){return new HG(e,t,n,r)}function G5(e,t){return y7("operator",e,t)}function _t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function fk(e,t){return t?{$field:e,$name:t}:{$field:e}}const GG=fk("key");function Age(e,t){return{$compare:e,$order:t}}function ZGt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const QGt="ascending",JGt="descending";function eqt(e){return Ht(e)?(e.order===JGt?"-":"+")+b7(e.op,e.field):""}function b7(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Ane="scope",qG="view";function as(e){return e&&e.signal}function tqt(e){return e&&e.expr}function yO(e){if(as(e))return!0;if(Ht(e)){for(const t in e)if(yO(e[t]))return!0}return!1}function nc(e,t){return e??t}function Q1(e){return e&&e.signal||e}const _ge="timer";function dk(e,t){return(e.merge?rqt:e.stream?iqt:e.type?sqt:Ce("Invalid stream specification: "+$t(e)))(e,t)}function nqt(e){return e===Ane?qG:e||qG}function rqt(e,t){const n=e.merge.map(i=>dk(i,t)),r=_ne({merge:n},e,t);return t.addStream(r).id}function iqt(e,t){const n=dk(e.stream,t),r=_ne({stream:n},e,t);return t.addStream(r).id}function sqt(e,t){let n;e.type===_ge?(n=t.event(_ge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(nqt(e.source),e.type);const r=_ne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function _ne(e,t,n){let r=t.between;return r&&(r.length!==2&&Ce('Stream "between" parameter must have 2 entries: '+$t(t)),e.between=[dk(r[0],n),dk(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(aqt(t.marktype,t.markname,t.markrole)),t.source===Ane&&r.push("inScope(event.item)"),r.length&&(e.filter=rd("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function aqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const oqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function lqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,a=e.update,o=[];s||Ce("Signal update missing events specification."),Fn(s)&&(s=bGt(s,t.isSubscope()?Ane:qG)),s=vt(s).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[cqt(o)]),s.length&&o.push(s.length>1?{merge:s}:s[0]),r!=null&&(a&&Ce("Signal encode and update are mutually exclusive."),a="encode(item(),"+$t(r)+")"),i.update=Fn(a)?rd(a,t):a.expr!=null?rd(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:oqt,$params:{$value:t.signalRef(a.signal)}}:Ce("Invalid signal update specification."),e.force&&(i.options={force:!0}),o.forEach(l=>t.addUpdate(Kt(uqt(l,t),i)))}function uqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):dk(e,t)}}function cqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function fqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ce("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=rd(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>lqt(i,t,n.id))}const vr=e=>(t,n,r)=>y7(e,n,t||void 0,r),OOe=vr("aggregate"),dqt=vr("axisticks"),ROe=vr("bound"),Uc=vr("collect"),Tge=vr("compare"),hqt=vr("datajoin"),FOe=vr("encode"),pqt=vr("expression"),mqt=vr("facet"),gqt=vr("field"),yqt=vr("key"),bqt=vr("legendentries"),xqt=vr("load"),vqt=vr("mark"),wqt=vr("multiextent"),Sqt=vr("multivalues"),Cqt=vr("overlap"),$qt=vr("params"),MOe=vr("prefacet"),Eqt=vr("projection"),kqt=vr("proxy"),Aqt=vr("relay"),LOe=vr("render"),_qt=vr("scale"),vb=vr("sieve"),Tqt=vr("sortitems"),POe=vr("viewlayout"),Nqt=vr("values");let Dqt=0;const BOe={min:"min",max:"max",count:"sum"};function Iqt(e,t){const n=e.type||"linear";BIe(n)||Ce("Unrecognized scale type: "+$t(n)),t.addScale(e.name,{type:n,domain:void 0})}function Oqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=zOe(e.domain,e,t),e.range!=null&&(n.range=UOe(e,t,n)),e.interpolate!=null&&Vqt(e.interpolate,n),e.nice!=null&&(n.nice=Uqt(e.nice)),e.bins!=null&&(n.bins=jqt(e.bins,t));for(r in e)gt(n,r)||r==="name"||(n[r]=Su(e[r],t))}function Su(e,t){return Ht(e)?e.signal?t.signalRef(e.signal):Ce("Unsupported object: "+$t(e)):e}function bO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Su(n,t))}function x7(e){Ce("Can not find data set: "+$t(e))}function zOe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ce("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Qe(e)?Rqt:e.fields?Mqt:Fqt)(e,t,n)}function Rqt(e,t,n){return e.map(r=>Su(r,n))}function Fqt(e,t,n){const r=n.getData(e.data);return r||x7(e.data),L5(t.type)?r.valuesRef(n,e.field,jOe(e.sort,!1)):zIe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Mqt(e,t,n){const r=e.data,i=e.fields.reduce((s,a)=>(a=Fn(a)?{data:r,field:a}:Qe(a)||a.signal?Lqt(a,n):a,s.push(a),s),[]);return(L5(t.type)?Pqt:zIe(t.type)?Bqt:zqt)(e,n,i)}function Lqt(e,t){const n="_:vega:_"+Dqt++,r=Uc({});if(Qe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+$t(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,vb({})]),{data:n,field:"data"}}function Pqt(e,t,n){const r=jOe(e.sort,!0);let i,s;const a=n.map(u=>{const c=t.getData(u.data);return c||x7(u.data),c.countsRef(t,u.field,r)}),o={groupby:GG,pulse:a};r&&(i=r.op||"count",s=r.field?b7(i,r.field):"count",o.ops=[BOe[i]],o.fields=[t.fieldRef(s)],o.as=[s]),i=t.add(OOe(o));const l=t.add(Uc({pulse:_t(i)}));return s=t.add(Nqt({field:GG,sort:t.sortRef(r),pulse:_t(l)})),_t(s)}function jOe(e,t){return e&&(!e.field&&!e.op?Ht(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ce("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!BOe[e.op]&&Ce("Multiple domain scales can not be sorted using "+e.op)),e}function Bqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||x7(i.data),s.domainRef(t,i.field)});return _t(t.add(Sqt({values:r})))}function zqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||x7(i.data),s.extentRef(t,i.field)});return _t(t.add(wqt({extents:r})))}function jqt(e,t){return e.signal||Qe(e)?bO(e,t):t.objectProperty(e)}function Uqt(e){return Ht(e)?{interval:Su(e.interval),step:Su(e.step)}:Su(e)}function Vqt(e,t){t.interpolate=Su(e.type||e),e.gamma!=null&&(t.interpolateGamma=Su(e.gamma))}function UOe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Fn(i)){if(r&&gt(r,i))return e=Kt({},e,{range:r[i]}),UOe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=L5(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ce("Unrecognized scale range value: "+$t(i))}else if(i.scheme){n.scheme=Qe(i.scheme)?bO(i.scheme,t):Su(i.scheme,t),i.extent&&(n.schemeExtent=bO(i.extent,t)),i.count&&(n.schemeCount=Su(i.count,t));return}else if(i.step){n.rangeStep=Su(i.step,t);return}else{if(L5(e.type)&&!Qe(i))return zOe(i,e,t);Qe(i)||Ce("Unsupported range type: "+$t(i))}return i.map(s=>(Qe(s)?bO:Su)(s,t))}function Wqt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=XG(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=XG(n[i],i,t));t.addProjection(e.name,r)}function XG(e,t,n){return Qe(e)?e.map(r=>XG(r,t,n)):Ht(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ce("Unsupported parameter object: "+$t(e)):e}const Vc="top",RS="left",FS="right",xm="bottom",VOe="center",Hqt="vertical",Gqt="start",qqt="middle",Xqt="end",YG="index",Tne="label",Yqt="offset",wv="perc",Kqt="perc2",ku="value",OT="guide-label",Nne="guide-title",Zqt="group-title",Qqt="group-subtitle",Nge="symbol",xO="gradient",KG="discrete",ZG="size",Jqt="shape",eXt="fill",tXt="stroke",nXt="strokeWidth",rXt="strokeDash",iXt="opacity",Dne=[ZG,Jqt,eXt,tXt,nXt,rXt,iXt],RT={name:1,style:1,interactive:1},Dn={value:0},Au={value:1},v7="group",WOe="rect",Ine="rule",sXt="symbol",wb="text";function hk(e){return e.type=v7,e.interactive=e.interactive||!1,e}function pl(e,t){const n=(r,i)=>nc(e[r],nc(t[r],i));return n.isVertical=r=>Hqt===nc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>nc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>nc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>nc(e.columns,nc(t.columns,+n.isVertical(!0))),n}function HOe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function aXt(e,t,n){const r=t.config.style[n];return r&&r[e]}function w7(e,t,n){return`item.anchor === '${Gqt}' ? ${e} : item.anchor === '${Xqt}' ? ${t} : ${n}`}const One=w7($t(RS),$t(FS),$t(VOe));function oXt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ht(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function GOe(e,t){return t?e?Ht(e)?Object.assign({},e,{offset:GOe(e.offset,t)}):{value:e,offset:t}:t:e}function Ul(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=OS(e.encode,t,RT)):e.interactive=!1,e}function lXt(e,t,n,r){const i=pl(e,n),s=i.isVertical(),a=i.gradientThickness(),o=i.gradientLength();let l,u,c,f,d;s?(u=[0,1],c=[0,0],f=a,d=o):(u=[0,0],c=[1,0],f=o,d=a);const h={enter:l={opacity:Dn,x:Dn,y:Dn,width:Rs(f),height:Rs(d)},update:Kt({},l,{opacity:Au,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Dn}};return la(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ul({type:WOe,role:FGt,encode:h},r)}function uXt(e,t,n,r,i){const s=pl(e,n),a=s.isVertical(),o=s.gradientThickness(),l=s.gradientLength();let u,c,f,d,h="";a?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const m={opacity:Dn,fill:{scale:t,field:ku}};m[u]={signal:h+"datum."+wv,mult:l},m[c]=Dn,m[f]={signal:h+"datum."+Kqt,mult:l},m[d]=Rs(o);const g={enter:m,update:Kt({},m,{opacity:Au}),exit:{opacity:Dn}};return la(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Ul({type:WOe,role:OGt,key:ku,from:i,encode:g},r)}const cXt=`datum.${wv}<=0?"${RS}":datum.${wv}>=1?"${FS}":"${VOe}"`,fXt=`datum.${wv}<=0?"${xm}":datum.${wv}>=1?"${Vc}":"${qqt}"`;function Dge(e,t,n,r){const i=pl(e,t),s=i.isVertical(),a=Rs(i.gradientThickness()),o=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const m={enter:u={opacity:Dn},update:c={opacity:Au,text:{field:Tne}},exit:{opacity:Dn}};return la(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:nc(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:fXt},f="y",d="x",h="1-"):(u.align=c.align={signal:cXt},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+wv,mult:o},u[d]=c[d]=a,a.offset=nc(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+YG}:void 0,Ul({type:wb,role:AOe,style:OT,key:ku,from:r,encode:m,overlap:l},n)}function dXt(e,t,n,r,i){const s=pl(e,t),a=n.entries,o=!!(a&&a.interactive),l=a?a.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Yqt} : datum.${ZG}`,h=u?Rs(u):{field:ZG},m=`datum.${YG}`,g=`max(1, ${i})`;let b,x,w,C,S;h.mult=.5,b={enter:x={opacity:Dn,x:{signal:d,mult:.5,offset:c},y:h},update:w={opacity:Au,x:x.x,y:x.y},exit:{opacity:Dn}};let E=null,A=null;e.fill||(E=t.symbolBaseFillColor,A=t.symbolBaseStrokeColor),la(b,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",A),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Dne.forEach(T=>{e[T]&&(w[T]=x[T]={scale:e[T],field:ku})});const k=Ul({type:sXt,role:MGt,key:ku,from:f,clip:u?!0:void 0,encode:b},n.symbols),N=Rs(c);N.offset=s("labelOffset"),b={enter:x={opacity:Dn,x:{signal:d,offset:N},y:h},update:w={opacity:Au,text:{field:Tne},x:x.x,y:x.y},exit:{opacity:Dn}},la(b,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=Ul({type:wb,role:AOe,style:OT,key:ku,from:f,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:Dn,height:u?Rs(u):Dn,opacity:Dn},exit:{opacity:Dn},update:w={opacity:Au,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(C=`ceil(item.mark.items.length / ${g})`,w.row.signal=`${m}%${C}`,w.column.signal=`floor(${m} / ${C})`,S={field:["row",m]}):(w.row.signal=`floor(${m} / ${g})`,w.column.signal=`${m} % ${g}`,S={field:m}),w.column.signal=`(${i})?${w.column.signal}:${m}`,r={facet:{data:r,name:"value",groupby:YG}},hk({role:kne,from:r,encode:OS(b,a,RT),marks:[k,I],name:l,interactive:o,sort:S})}function hXt(e,t){const n=pl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Rne='item.orient === "left"',Fne='item.orient === "right"',S7=`(${Rne} || ${Fne})`,pXt=`datum.vgrad && ${S7}`,mXt=w7('"top"','"bottom"','"middle"'),gXt=w7('"right"','"left"','"center"'),yXt=`datum.vgrad && ${Fne} ? (${gXt}) : (${S7} && !(datum.vgrad && ${Rne})) ? "left" : ${One}`,bXt=`item._anchor || (${S7} ? "middle" : "start")`,xXt=`${pXt} ? (${Rne} ? -90 : 90) : 0`,vXt=`${S7} ? (datum.vgrad ? (${Fne} ? "bottom" : "top") : ${mXt}) : "top"`;function wXt(e,t,n,r){const i=pl(e,t),s={enter:{opacity:Dn},update:{opacity:Au,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Dn}};return la(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:bXt},angle:{signal:xXt},align:{signal:yXt},baseline:{signal:vXt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ul({type:wb,role:LGt,style:Nne,from:r,encode:s},n)}function SXt(e,t){let n;return Ht(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ige(e.path)+")":e.sphere&&(n="geoShape("+Ige(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ige(e){return Ht(e)&&e.signal?e.signal:$t(e)}function qOe(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===v7?kne:t||$ne}function CXt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||qOe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function $Xt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Mne(e,t){const n=fAe(e.type);n||Ce("Unrecognized transform type: "+$t(e.type));const r=y7(n.type.toLowerCase(),null,XOe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function XOe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const a=e.params[s];r[a.name]=EXt(a,t,n)}return r}function EXt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return kXt(e,t,n);if(i===void 0){e.required&&Ce("Missing required "+$t(t.type)+" parameter: "+$t(e.name));return}else{if(r==="param")return AXt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!as(i)?i.map(s=>Oge(e,s,n)):Oge(e,i,n)}function Oge(e,t,n){const r=e.type;if(as(t))return Fge(r)?Ce("Expression references can not be signals."):BU(r)?n.fieldRef(t):Mge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||BU(r);return i&&_Xt(t)?n.exprRef(t.expr,t.as):i&&TXt(t)?fk(t.field,t.as):Fge(r)?rd(t,n):NXt(r)?_t(n.getData(t).values):BU(r)?fk(t):Mge(r)?n.compareRef(t):t}}function kXt(e,t,n){return Fn(t.from)||Ce('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function AXt(e,t,n){const r=t[e.name];return e.array?(Qe(r)||Ce("Expected an array of sub-parameters. Instead: "+$t(r)),r.map(i=>Rge(e,i,n))):Rge(e,r,n)}function Rge(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const o in i.key)if(i.key[o]!==t[o]){i=null;break}if(i)break}i||Ce("Unsupported parameter: "+$t(t));const s=Kt(XOe(i,t,n),i.key);return _t(n.add($qt(s)))}const _Xt=e=>e&&e.expr,TXt=e=>e&&e.field,NXt=e=>e==="data",Fge=e=>e==="expr",BU=e=>e==="field",Mge=e=>e==="compare";function DXt(e,t,n){let r,i,s,a,o;return e?(r=e.facet)&&(t||Ce("Only group marks can be faceted."),r.field!=null?a=o=vO(r,n):(e.data?o=_t(n.getData(e.data).aggregate):(s=Mne(Kt({type:"aggregate",groupby:vt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=vO(r,n),a=o=_t(n.add(s))),i=n.keyRef(r.groupby,!0))):a=_t(n.add(Uc(null,[{}]))),a||(a=vO(e,n)),{key:i,pulse:a,parent:o}}function vO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:_t(t.getData(e.data).output)}function Ry(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Ry.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],a=null,o=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=_t(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(a=t[o]);return new Ry(e,s,i,r,a)};function YOe(e){return Fn(e)?e:null}function Lge(e,t,n){const r=b7(n.op,n.field);let i;if(t.ops){for(let s=0,a=t.as.length;s<a;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function A3(e,t,n,r,i,s,a){const o=t[n]||(t[n]={}),l=eqt(s);let u=YOe(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=o[u]),!c){const d=s?{field:GG,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:_t(t.output)};l&&(d.sort=e.sortRef(s)),f=e.add(y7(r,void 0,d)),a&&(t.index[i]=f),c=_t(f),u!=null&&(o[u]=c)}return c}Ry.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=YOe(t);let a,o,l;return s!=null&&(e=r.scope,a=i[s]),a?n&&n.field&&Lge(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:_t(r.output)},n&&n.field&&Lge(e,l,n),o=e.add(OOe(l)),a=e.add(Uc({pulse:_t(o)})),a={agg:o,ref:_t(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return _t(this.values)},extentRef(e,t){return A3(e,this,"extent","extent",t,!1)},domainRef(e,t){return A3(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return A3(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return A3(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return A3(e,this,"indata","tupleindex",t,!0,!0)}};function IXt(e,t,n){const r=e.from.facet,i=r.name,s=vO(r,t);let a;r.name||Ce("Facet must have a name: "+$t(r)),r.data||Ce("Facet must reference a data set: "+$t(r)),r.field?a=t.add(MOe({field:t.fieldRef(r.field),pulse:s})):r.groupby?a=t.add(mqt({key:t.keyRef(r.groupby),group:_t(t.proxy(n.parent)),pulse:s})):Ce("Facet must specify groupby or field: "+$t(r));const o=t.fork(),l=o.add(Uc()),u=o.add(vb({pulse:_t(l)}));o.addData(i,new Ry(o,l,l,u)),o.addSignal("parent",null),a.params.subflow={$subflow:o.parse(e).toRuntime()}}function OXt(e,t,n){const r=t.add(MOe({pulse:n.pulse})),i=t.fork();i.add(vb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function KOe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,a=e.modify,o=e.values,l=t.add(G5()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,a,o].map(f=>f??"null").join(",")+"),0)",c=rd(u,t);l.update=c.$expr,l.params=c.$params}function C7(e,t){const n=qOe(e),r=e.type===v7,i=e.from&&e.from.facet,s=e.overlap;let a=e.layout||n===kne||n===Ene,o,l,u,c,f,d,h;const m=n===$ne||a||i,g=DXt(e.from,r,t);l=t.add(hqt({key:g.key||(e.key?fk(e.key):void 0),pulse:g.pulse,clean:!r}));const b=_t(l);l=u=t.add(Uc({pulse:b})),l=t.add(vqt({markdef:CXt(e),interactive:$Xt(e.interactive,t),clip:SXt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:_t(l)}));const x=_t(l);l=c=t.add(FOe(DOe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:x}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(A=>{const k=Mne(A,t),N=k.metadata;(N.generates||N.changes)&&Ce("Mark transforms should not generate new data."),N.nomod||(c.params.mod=!0),k.params.pulse=_t(l),t.add(l=k)}),e.sort&&(l=t.add(Tqt({sort:t.compareRef(e.sort),pulse:_t(l)})));const w=_t(l);(i||a)&&(a=t.add(POe({layout:t.objectProperty(e.layout),legends:t.legends,mark:x,pulse:w})),d=_t(a));const C=t.add(ROe({mark:x,pulse:d||w}));h=_t(C),r&&(m&&(o=t.operators,o.pop(),a&&o.pop()),t.pushState(w,d||h,b),i?IXt(e,t,g):m?OXt(e,t,g):t.parse(e),t.popState(),m&&(a&&o.push(a),o.push(C))),s&&(h=RXt(s,h,t));const S=t.add(LOe({pulse:h})),E=t.add(vb({pulse:_t(S)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Ry(t,u,S,E)),e.on&&e.on.forEach(A=>{(A.insert||A.remove||A.toggle)&&Ce("Marks only support modify triggers."),KOe(A,t,f)}))}function RXt(e,t,n){const r=e.method,i=e.bound,s=e.separation,a={separation:as(s)?n.signalRef(s.signal):s,method:as(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const o=i.tolerance;a.boundTolerance=as(o)?n.signalRef(o.signal):+o,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return _t(n.add(Cqt(a)))}function FXt(e,t){const n=t.config.legend,r=e.encode||{},i=pl(e,n),s=r.legend||{},a=s.name||void 0,o=s.interactive,l=s.style,u={};let c=0,f,d,h;Dne.forEach(C=>e[C]?(u[C]=e[C],c=c||e[C]):0),c||Ce("Missing valid scale for legend.");const m=MXt(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:m,vgrad:m!=="symbol"&&i.isVertical()},b=_t(t.add(Uc(null,[g]))),x={enter:{x:{value:0},y:{value:0}}},w=_t(t.add(bqt(d={type:m,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return m===xO?(h=[lXt(e,c,n,r.gradient),Dge(e,n,r.labels,w)],d.count=d.count||t.signalRef(`max(2,2*floor((${Q1(i.gradientLength())})/100))`)):m===KG?h=[uXt(e,c,n,r.gradient,w),Dge(e,n,r.labels,w)]:(f=hXt(e,n),h=[dXt(e,n,r,w,Q1(f.columns))],d.size=BXt(e,t,h[0].marks)),h=[hk({role:RGt,from:b,encode:x,marks:h,layout:f,interactive:o})],g.title&&h.push(wXt(e,n,r.title,b)),C7(hk({role:IGt,from:b,encode:OS(PXt(i,e,n),s,RT),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:o,style:l}),t)}function MXt(e,t){let n=e.type||Nge;return!e.type&&LXt(e)===1&&(e.fill||e.stroke)&&(n=HUt(t)?xO:lge(t)?KG:Nge),n!==xO?n:lge(t)?KG:xO}function LXt(e){return Dne.reduce((t,n)=>t+(e[n]?1:0),0)}function PXt(e,t,n){const r={enter:{},update:{}};return la(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function BXt(e,t,n){const r=Q1(Pge("size",e,n)),i=Q1(Pge("strokeWidth",e,n)),s=Q1(zXt(n[1].encode,t,OT));return rd(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Pge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:HOe(e,n[0].encode)}function zXt(e,t,n){return HOe("fontSize",e)||aXt("fontSize",t,n)}const jXt=`item.orient==="${RS}"?-90:item.orient==="${FS}"?90:0`;function UXt(e,t){e=Fn(e)?{text:e}:e;const n=pl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,a=i.interactive,o=i.style,l=[],u={},c=_t(t.add(Uc(null,[u])));return l.push(HXt(e,n,VXt(e),c)),e.subtitle&&l.push(GXt(e,n,r.subtitle,c)),C7(hk({role:PGt,from:c,encode:WXt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:o}),t)}function VXt(e){const t=e.encode;return t&&t.title||Kt({name:e.name,interactive:e.interactive,style:e.style},t)}function WXt(e,t){const n={enter:{},update:{}};return la(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:One},angle:{signal:jXt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),OS(n,t,RT)}function HXt(e,t,n,r){const i={value:0},s=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return la(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ul({type:wb,role:BGt,style:Zqt,from:r,encode:a},n)}function GXt(e,t,n,r){const i={value:0},s=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return la(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ul({type:wb,role:zGt,style:Qqt,from:r,encode:a},n)}function qXt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Mne(r,t))}),e.on&&e.on.forEach(r=>{KOe(r,t,e.name)}),t.addDataPipeline(e.name,XXt(e,t,n))}function XXt(e,t,n){const r=[];let i=null,s=!1,a=!1,o,l,u,c,f;for(e.values?as(e.values)||yO(e.format)?(r.push(Bge(t,e)),r.push(i=Mg())):r.push(i=Mg({$ingest:e.values,$format:e.format})):e.url?yO(e.url)||yO(e.format)?(r.push(Bge(t,e)),r.push(i=Mg())):r.push(i=Mg({$request:e.url,$format:e.format})):e.source&&(i=o=vt(e.source).map(d=>_t(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=Mg()),r.push(c),f.generates&&(a=!0),f.modifies&&!a&&(s=!0),f.source?i=c:f.changes&&(i=null);return o&&(u=o.length-1,r[0]=Aqt({derive:s,pulse:u?o:o[0]}),(s||u)&&r.splice(1,0,Mg())),i||r.push(Mg()),r.push(vb({})),r}function Mg(e){const t=Uc({},e);return t.metadata={source:!0},t}function Bge(e,t){return xqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const ZOe=e=>e===xm||e===Vc,$7=(e,t,n)=>as(e)?QXt(e.signal,t,n):e===RS||e===Vc?t:n,Fs=(e,t,n)=>as(e)?KXt(e.signal,t,n):ZOe(e)?t:n,bc=(e,t,n)=>as(e)?ZXt(e.signal,t,n):ZOe(e)?n:t,QOe=(e,t,n)=>as(e)?JXt(e.signal,t,n):e===Vc?{value:t}:{value:n},YXt=(e,t,n)=>as(e)?eYt(e.signal,t,n):e===FS?{value:t}:{value:n},KXt=(e,t,n)=>JOe(`${e} === '${Vc}' || ${e} === '${xm}'`,t,n),ZXt=(e,t,n)=>JOe(`${e} !== '${Vc}' && ${e} !== '${xm}'`,t,n),QXt=(e,t,n)=>Lne(`${e} === '${RS}' || ${e} === '${Vc}'`,t,n),JXt=(e,t,n)=>Lne(`${e} === '${Vc}'`,t,n),eYt=(e,t,n)=>Lne(`${e} === '${FS}'`,t,n),JOe=(e,t,n)=>(t=t!=null?Rs(t):t,n=n!=null?Rs(n):n,zge(t)&&zge(n)?(t=t?t.signal||$t(t.value):null,n=n?n.signal||$t(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Kt({test:e},t)].concat(n||[])),zge=e=>e==null||Object.keys(e).length===1,Lne=(e,t,n)=>({signal:`${e} ? (${J2(t)}) : (${J2(n)})`}),tYt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${RS}' ? (${J2(r)}) : `:"")+(n!=null?`${e} === '${xm}' ? (${J2(n)}) : `:"")+(i!=null?`${e} === '${FS}' ? (${J2(i)}) : `:"")+(t!=null?`${e} === '${Vc}' ? (${J2(t)}) : `:"")+"(null)"}),J2=e=>as(e)?e.signal:e==null?null:$t(e),nYt=(e,t)=>t===0?0:as(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},mx=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function I2(e,t,n,r){let i;if(t&&gt(t,e))return t[e];if(gt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Nne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[OT][i]}return null}function jge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function rYt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,o,l,u;if(as(a)){const f=jge([n.axisX,n.axisY]),d=jge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(u of f)o[u]=Fs(a,I2(u,n.axisX,i,r),I2(u,n.axisY,i,r));l={};for(u of d)l[u]=tYt(a.signal,I2(u,n.axisTop,i,r),I2(u,n.axisBottom,i,r),I2(u,n.axisLeft,i,r),I2(u,n.axisRight,i,r))}else o=a===Vc||a===xm?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return o||l||s?Kt({},i,o,l,s):i}function iYt(e,t,n,r){const i=pl(e,t),s=e.orient;let a,o;const l={enter:a={opacity:Dn},update:o={opacity:Au},exit:{opacity:Dn}};la(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Uge(e,0),c=Uge(e,1);return a.x=o.x=Fs(s,u,Dn),a.x2=o.x2=Fs(s,c),a.y=o.y=bc(s,u,Dn),a.y2=o.y2=bc(s,c),Ul({type:Ine,role:AGt,from:r,encode:l},n)}function Uge(e,t){return{scale:e.scale,range:t}}function sYt(e,t,n,r,i){const s=pl(e,t),a=e.orient,o=e.gridScale,l=$7(a,1,-1),u=aYt(e.offset,l);let c,f,d;const h={enter:c={opacity:Dn},update:d={opacity:Au},exit:f={opacity:Dn}};la(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const m={scale:e.scale,field:ku,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=Fs(a,{signal:"height"},{signal:"width"}),b=o?{scale:o,range:0,mult:l,offset:u}:{value:0,offset:u},x=o?{scale:o,range:1,mult:l,offset:u}:Kt(g,{mult:l,offset:u});return c.x=d.x=Fs(a,m,b),c.y=d.y=bc(a,m,b),c.x2=d.x2=bc(a,x),c.y2=d.y2=Fs(a,x),f.x=Fs(a,m),f.y=bc(a,m),Ul({type:Ine,role:_Gt,key:ku,from:r,encode:h},n)}function aYt(e,t){if(t!==1)if(!Ht(e))e=as(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Kt({},e);for(;n.mult!=null;)if(Ht(n.mult))n=n.mult=Kt({},n.mult);else return n.mult=as(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function oYt(e,t,n,r,i,s){const a=pl(e,t),o=e.orient,l=$7(o,-1,1);let u,c,f;const d={enter:u={opacity:Dn},update:f={opacity:Au},exit:c={opacity:Dn}};la(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=Rs(i);h.mult=l;const m={scale:e.scale,field:ku,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return f.y=u.y=Fs(o,Dn,m),f.y2=u.y2=Fs(o,h),c.x=Fs(o,m),f.x=u.x=bc(o,Dn,m),f.x2=u.x2=bc(o,h),c.y=bc(o,m),Ul({type:Ine,role:NGt,key:ku,from:r,encode:d},n)}function zU(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function lYt(e,t,n,r,i,s){const a=pl(e,t),o=e.orient,l=e.scale,u=$7(o,-1,1),c=Q1(a("labelFlush")),f=Q1(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let m=c===0||!!c,g;const b=Rs(i);b.mult=u,b.offset=Rs(a("labelPadding")||0),b.offset.mult=u;const x={scale:l,field:ku,band:.5,offset:GOe(s.offset,a("labelOffset"))},w=Fs(o,m?zU(l,c,'"left"','"right"','"center"'):{value:"center"},YXt(o,"left","right")),C=Fs(o,QOe(o,"bottom","top"),m?zU(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),S=zU(l,c,`-(${f})`,f,0);m=m&&f;const E={opacity:Dn,x:Fs(o,x,b),y:bc(o,x,b)},A={enter:E,update:g={opacity:Au,text:{field:Tne},x:E.x,y:E.y,align:w,baseline:C},exit:{opacity:Dn,x:E.x,y:E.y}};la(A,{dx:!d&&m?Fs(o,S):null,dy:!h&&m?bc(o,S):null}),la(A,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const k=a("labelBound");let N=a("labelOverlap");return N=N||k?{separation:a("labelSeparation"),method:N,order:"datum.index",bound:k?{scale:l,orient:o,tolerance:k}:null}:void 0,g.align!==w&&(g.align=mx(g.align,w)),g.baseline!==C&&(g.baseline=mx(g.baseline,C)),Ul({type:wb,role:TGt,style:OT,key:ku,from:r,encode:A,overlap:N},n)}function uYt(e,t,n,r){const i=pl(e,t),s=e.orient,a=$7(s,-1,1);let o,l;const u={enter:o={opacity:Dn,anchor:Rs(i("titleAnchor",null)),align:{signal:One}},update:l=Kt({},o,{opacity:Au,text:Rs(e.title)}),exit:{opacity:Dn}},c={signal:`lerp(range("${e.scale}"), ${w7(0,1,.5)})`};return l.x=Fs(s,c),l.y=bc(s,c),o.angle=Fs(s,Dn,nYt(a,90)),o.baseline=Fs(s,QOe(s,xm,Vc),{value:xm}),l.angle=o.angle,l.baseline=o.baseline,la(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),cYt(i,s,u,n),u.update.align=mx(u.update.align,o.align),u.update.angle=mx(u.update.angle,o.angle),u.update.baseline=mx(u.update.baseline,o.baseline),Ul({type:wb,role:DGt,style:Nne,from:r,encode:u},n)}function cYt(e,t,n,r){const i=(o,l)=>o!=null?(n.update[l]=mx(Rs(o),n.update[l]),!1):!G2(l,r),s=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===s?Rs(a):Fs(t,Rs(a),Rs(s))}function fYt(e,t){const n=rYt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,a=i.interactive,o=i.style,l=pl(e,n),u=oXt(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=_t(t.add(Uc({},[c]))),d=_t(t.add(dqt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let m;return c.grid&&h.push(sYt(e,n,r.grid,d,u)),c.ticks&&(m=l("tickSize"),h.push(oYt(e,n,r.ticks,d,m,u))),c.labels&&(m=c.ticks?m:0,h.push(lYt(e,n,r.labels,d,m,u))),c.domain&&h.push(iYt(e,n,r.domain,f)),c.title&&h.push(uYt(e,n,r.title,f)),C7(hk({role:kGt,from:f,encode:OS(dYt(l,e),i,RT),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:a,style:o}),t)}function dYt(e,t){const n={enter:{},update:{}};return la(n,{orient:e("orient"),offset:e("offset")||0,position:nc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function eRe(e,t,n){const r=vt(e.signals),i=vt(e.scales);return n||r.forEach(s=>IOe(s,t)),vt(e.projections).forEach(s=>Wqt(s,t)),i.forEach(s=>Iqt(s,t)),vt(e.data).forEach(s=>qXt(s,t)),i.forEach(s=>Oqt(s,t)),(n||r).forEach(s=>fqt(s,t)),vt(e.axes).forEach(s=>fYt(s,t)),vt(e.marks).forEach(s=>C7(s,t)),vt(e.legends).forEach(s=>FXt(s,t)),e.title&&UXt(e.title,t),t.parseLambdas(),t}const hYt=e=>OS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function pYt(e,t){const n=t.config,r=_t(t.root=t.add(G5())),i=mYt(e,n);i.forEach(u=>IOe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Uc()),a=t.add(FOe(DOe(hYt(e.encode),v7,Ene,e.style,t,{pulse:_t(s)}))),o=t.add(POe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:_t(a)}));t.operators.pop(),t.pushState(_t(a),_t(o),null),eRe(e,t,i),t.operators.push(o);let l=t.add(ROe({mark:r,pulse:_t(o)}));return l=t.add(LOe({pulse:_t(l)})),l=t.add(vb({pulse:_t(l)})),t.addData("root",new Ry(t,s,s,l)),t}function _3(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function mYt(e,t){const n=a=>nc(e[a],t[a]),r=[_3("background",n("background")),_3("autosize",CGt(n("autosize"))),_3("padding",EGt(n("padding"))),_3("width",n("width")||0),_3("height",n("height")||0)],i=r.reduce((a,o)=>(a[o.name]=o,a),{}),s={};return vt(e.signals).forEach(a=>{gt(i,a.name)?a=Kt(i[a.name],a):r.push(a),s[a.name]=a}),vt(t.signals).forEach(a=>{!gt(s,a.name)&&!gt(i,a.name)&&r.push(a)}),r}function tRe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Vge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}tRe.prototype=Vge.prototype={parse(e){return eRe(e,this)},fork(){return new Vge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof HG?_t(e):e;return this.add(kqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let a,o;r&&(a=r.data||(r.data={}),o=a[i]||(a[i]=[]),o.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(_t(this.add(vb({pulse:e})))),this._parent.push(t),this._lookup.push(n?_t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return en(this._parent)},encode(){return en(this._encode)},lookup(){return en(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Fn(e))return fk(e,t);e.signal||Ce("Unsupported field reference: "+$t(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=_t(this.add(gqt(i)))}return r},compareRef(e){let t=!1;const n=s=>as(s)?(t=!0,this.signalRef(s.signal)):tqt(s)?(t=!0,this.exprRef(s.expr)):s,r=vt(e.field).map(n),i=vt(e.order).map(n);return t?_t(this.add(Tge({fields:r,orders:i}))):Age(r,i)},keyRef(e,t){let n=!1;const r=s=>as(s)?(n=!0,_t(i[s.signal])):s,i=this.signals;return e=vt(e).map(r),n?_t(this.add(yqt({fields:e,flat:t}))):ZGt(e,t)},sortRef(e){if(!e)return e;const t=b7(e.op,e.field),n=e.order||QGt;return n.signal?_t(this.add(Tge({fields:t,orders:this.signalRef(n.signal)}))):Age(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return gt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ce("Duplicate signal name: "+$t(e));const n=t instanceof HG?t:this.add(G5(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ce("Unrecognized signal name: "+$t(e)),this.signals[e]},signalRef(e){return this.signals[e]?_t(this.signals[e]):(gt(this.lambdas,e)||(this.lambdas[e]=this.add(G5(null))),_t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=rd(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ht(e)?e:this.signalRef(e.signal||Pne(e))},exprRef(e,t){const n={expr:rd(e,this)};return t&&(n.expr.$name=t),_t(this.add(pqt(n)))},addBinding(e,t){this.bindings||Ce("Nested signals do not support binding: "+$t(e)),this.bindings.push(Kt({signal:e},t))},addScaleProj(e,t){gt(this.scales,e)&&Ce("Duplicate scale or projection name: "+$t(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,_qt(t))},addProjection(e,t){this.addScaleProj(e,Eqt(t))},getScale(e){return this.scales[e]||Ce("Unrecognized scale name: "+$t(e)),this.scales[e]},scaleRef(e){return _t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return gt(this.data,e)&&Ce("Duplicate data set name: "+$t(e)),this.data[e]=t},getData(e){return this.data[e]||Ce("Undefined data set name: "+$t(e)),this.data[e]},addDataPipeline(e,t){return gt(this.data,e)&&Ce("Duplicate data set name: "+$t(e)),this.addData(e,Ry.fromEntries(this,t))}};function Pne(e){return(Qe(e)?gYt:yYt)(e)}function gYt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ht(i)?i.signal||Pne(i):$t(i))}return n+"]"}function yYt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+$t(r)+":"+(Ht(i)?i.signal||Pne(i):$t(i));return t+"}"}function bYt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function xYt(e,t,n){return Ht(e)||Ce("Input Vega specification must be an object."),t=g8(bYt(),t,e.config),pYt(e,new tRe(t,n)).toRuntime()}const vYt="view",q5="[",X5="]",nRe="{",rRe="}",wYt=":",iRe=",",SYt="@",CYt=">",$Yt=/[[\]{}]/,EYt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let sRe,aRe;function kYt(e,t,n){return sRe=t||vYt,aRe=n||EYt,oRe(e.trim()).map(QG)}function AYt(e){return aRe[e]}function Y$(e,t,n,r,i){const s=e.length;let a=0,o;for(;t<s;++t){if(o=e[t],!a&&o===n)return t;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return t}function oRe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Y$(e,i,iRe,q5+nRe,X5+rRe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function QG(e){return e[0]==="["?_Yt(e):TYt(e)}function _Yt(e){const t=e.length;let n=1,r;if(n=Y$(e,n,X5,q5,X5),n===t)throw"Empty between selector: "+e;if(r=oRe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==CYt)throw"Expected '>' after between selector: "+e;r=r.map(QG);const i=QG(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function TYt(e){const t={source:sRe},n=[];let r=[0,0],i=0,s=0,a=e.length,o=0,l,u;if(e[a-1]===rRe){if(o=e.lastIndexOf(nRe),o>=0){try{r=NYt(e.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),a=e.length}else throw"Unmatched right brace: "+e;o=0}if(!a)throw e;if(e[0]===SYt&&(i=++o),l=Y$(e,o,wYt),l<a&&(n.push(e.substring(s,l).trim()),s=o=++l),o=Y$(e,o,q5),o===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,o).trim()),u=[],s=++o,s===a)throw"Unmatched left bracket: "+e;for(;o<a;){if(o=Y$(e,o,X5),o===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,o).trim()),o<a-1&&e[++o]!==q5)throw"Expected left bracket: "+e;s=++o}if(!(a=n.length)||$Yt.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):AYt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function NYt(e){const t=e.split(iRe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}var DYt="5.25.0";Kt(Xx,lTt,FIt,WOt,Z5t,H6t,K9t,ZFt,Q9t,S7t,iLt,fLt);const IYt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ga,CanvasHandler:mT,CanvasRenderer:k5,DATE:al,DAY:Ta,DAYOFYEAR:Jf,Dataflow:fx,Debug:tke,Error:_Z,EventStream:P8,Gradient:M4e,GroupItem:Kee,HOURS:Bl,Handler:ym,Info:eke,Item:Yee,MILLISECONDS:Ac,MINUTES:zl,MONTH:Ma,Marks:Ou,MultiPulse:cQ,None:QEe,Operator:Ar,Parameters:L8,Pulse:U0,QUARTER:sl,RenderType:I0,Renderer:bd,ResourceLoader:Zee,SECONDS:Du,SVGHandler:pte,SVGRenderer:vte,SVGStringRenderer:wte,Scenegraph:dte,TIME_UNITS:HZ,Transform:$e,View:CIe,WEEK:is,Warn:JEe,YEAR:aa,accessor:hl,accessorFields:Fa,accessorName:mi,array:vt,ascending:I_,bandwidthNRD:pQ,bin:pAe,bootstrapCI:mAe,boundClip:k9t,boundContext:fT,boundItem:xG,boundMark:tDe,boundStroke:gb,changeset:ub,clampRange:FZ,codegenExpression:XDe,compare:MZ,constant:oa,cumulativeLogNormal:U8,cumulativeNormal:R_,cumulativeUniform:G8,dayofyear:YZ,debounce:LZ,defaultLocale:sQ,definition:fAe,densityLogNormal:j8,densityNormal:B8,densityUniform:H8,domChild:Go,domClear:uc,domCreate:N0,domFind:hte,dotbin:gAe,error:Ce,expressionFunction:Ki,extend:Kt,extent:kc,extentIndex:oke,falsy:l0,fastmap:Zw,field:Pl,flush:PZ,font:W9,fontFamily:pT,fontSize:yd,format:jI,formatLocale:DR,formats:lQ,hasOwnProperty:gt,id:D_,identity:Ha,inferType:eAe,inferTypes:tAe,ingest:qn,inherits:Ve,inrange:k1,interpolate:ree,interpolateColors:D9,interpolateRange:UTe,intersect:kDe,intersectBoxLine:Z2,intersectPath:Qee,intersectPoint:Jee,intersectRule:W4e,isArray:Qe,isBoolean:C8,isDate:Nh,isFunction:Wt,isIterable:lke,isNumber:Yh,isObject:Ht,isRegExp:$8,isString:Fn,isTuple:iS,key:BZ,lerp:zZ,lineHeight:mm,loader:R8,locale:Qke,logger:nke,lruCache:E8,markup:xte,merge:uke,mergeConfig:g8,multiLineOffset:L8t,one:Kw,pad:jZ,panLinear:TZ,panLog:NZ,panPow:DZ,panSymlog:IZ,parse:xYt,parseExpression:xPt,parseSelector:kYt,path:Um,pathCurves:Gee,pathEqual:NDe,pathParse:cv,pathRectangle:B4e,pathRender:JE,pathSymbols:P4e,pathTrail:z4e,peek:en,point:G9,projection:See,quantileLogNormal:V8,quantileNormal:F_,quantileUniform:q8,quantiles:dQ,quantizeInterpolator:VTe,quarter:OZ,quartiles:hQ,get random(){return jl},randomInteger:d_t,randomKDE:gQ,randomLCG:f_t,randomLogNormal:bAe,randomMixture:xAe,randomNormal:mQ,randomUniform:vAe,read:iAe,regressionConstant:yQ,regressionExp:SAe,regressionLinear:bQ,regressionLoess:EAe,regressionLog:wAe,regressionPoly:$Ae,regressionPow:CAe,regressionQuad:xQ,renderModule:q9,repeat:Q3,resetDefaultLocale:lAt,resetSVGClipId:U4e,resetSVGDefIds:T9t,responseType:rAe,runtimeContext:cIe,sampleCurve:Y8,sampleLogNormal:z8,sampleNormal:O_,sampleUniform:W8,scale:Xn,sceneEqual:Ste,sceneFromJSON:rDe,scenePickVisit:v5,sceneToJSON:nDe,sceneVisit:_c,sceneZOrder:ete,scheme:iee,serializeXML:bDe,setRandom:u_t,span:Qw,splitAccessPath:m8,stringValue:$t,textMetrics:yc,timeBin:Pke,timeFloor:Ike,timeFormatLocale:LE,timeInterval:nS,timeOffset:JZ,timeSequence:tQ,timeUnitSpecifier:qZ,timeUnits:GZ,toBoolean:k8,toDate:A8,toNumber:Ti,toSet:cs,toString:_8,transform:dAe,transforms:Xx,truncate:UZ,truthy:zs,tupleid:Tt,typeParsers:fH,utcFloor:Oke,utcInterval:rS,utcOffset:eQ,utcSequence:nQ,utcdayofyear:ZZ,utcquarter:RZ,utcweek:QZ,version:DYt,visitArray:d0,week:KZ,writeConfig:y8,zero:b0,zoomLinear:v8,zoomLog:w8,zoomPow:OE,zoomSymlog:S8},Symbol.toStringTag,{value:"Module"})),OYt="4.13.1",RYt={version:OYt};function MS(e,t,n){return e.fields=t||[],e.fname=n,e}function FYt(e){return e.length===1?MYt(e[0]):LYt(e)}const MYt=e=>function(t){return t[e]},LYt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function jU(e){throw Error(e)}function Sb(e){var t=[],n=null,r=0,i=e.length,s="",a,o,l;e=e+"";function u(){t.push(s+e.substring(a,o)),s="",a=o+1}for(a=o=0;o<i;++o)if(l=e[o],l==="\\")s+=e.substring(a,o),s+=e.substring(++o,++o),a=o;else if(l===n)u(),n=null,r=-1;else{if(n)continue;a===r&&l==='"'||a===r&&l==="'"?(a=o+1,n=l):l==="."&&!r?o>a?u():a=o+1:l==="["?(o>a&&u(),r=a=o+1):l==="]"&&(r||jU("Access path missing open bracket: "+e),r>0&&u(),r=0,a=o+1)}return r&&jU("Access path missing closing bracket: "+e),n&&jU("Access path missing closing quote: "+e),o>a&&(o++,u()),t}function PYt(e,t,n){const r=Sb(e);return e=r.length===1?r[0]:e,MS(FYt(r),[e],e)}var FT=[];PYt("id");var BYt=MS(function(e){return e},FT,"identity");MS(function(){return 0},FT,"zero");MS(function(){return 1},FT,"one");MS(function(){return!0},FT,"true");MS(function(){return!1},FT,"false");function MD(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var zYt=1,lRe=2,jYt=3,UYt=4;function VYt(e,t){var n=e;return{level:function(r){return arguments.length?(n=+r,this):n},error:function(){return n>=zYt&&MD("error","ERROR",arguments),this},warn:function(){return n>=lRe&&MD("warn","WARN",arguments),this},info:function(){return n>=jYt&&MD("log","INFO",arguments),this},debug:function(){return n>=UYt&&MD("log","DEBUG",arguments),this}}}const It=Array.isArray;function js(e){return e===Object(e)}const Wge=e=>e!=="__proto__";function uRe(...e){return e.reduce((t,n)=>{for(var r in n)if(r==="signals")t.signals=WYt(t.signals,n.signals);else{var i=r==="legend"?{layout:1}:r==="style"?!0:null;Bne(t,r,n[r],i)}return t},{})}function Bne(e,t,n,r){if(Wge(t)){var i,s;if(js(n)&&!It(n)){s=js(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Bne(s,i,n[i]):Wge(i)&&(s[i]=n[i])}else e[t]=n}}function WYt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Ii(e){return e!=null?It(e)?e:[e]:[]}function HYt(e){return typeof e=="function"}const GYt=Object.prototype.hasOwnProperty;function O1(e,t){return GYt.call(e,t)}function MT(e){return typeof e=="boolean"}function qi(e){return typeof e=="number"}function cn(e){return typeof e=="string"}function On(e){return It(e)?"["+e.map(On)+"]":js(e)||cn(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Cb(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Nt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var UU={exports:{}},Hge;function qYt(){return Hge||(Hge=1,function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var s;try{s=Promise}catch{s=function(){}}function a(d,h,m,g,b){typeof h=="object"&&(m=h.depth,g=h.prototype,b=h.includeNonEnumerable,h=h.circular);var x=[],w=[],C=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof m>"u"&&(m=1/0);function S(E,A){if(E===null)return null;if(A===0)return E;var k,N;if(typeof E!="object")return E;if(n(E,r))k=new r;else if(n(E,i))k=new i;else if(n(E,s))k=new s(function(j,H){E.then(function(G){j(S(G,A-1))},function(G){H(S(G,A-1))})});else if(a.__isArray(E))k=[];else if(a.__isRegExp(E))k=new RegExp(E.source,f(E)),E.lastIndex&&(k.lastIndex=E.lastIndex);else if(a.__isDate(E))k=new Date(E.getTime());else{if(C&&Buffer.isBuffer(E))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(E.length):k=new Buffer(E.length),E.copy(k),k;n(E,Error)?k=Object.create(E):typeof g>"u"?(N=Object.getPrototypeOf(E),k=Object.create(N)):(k=Object.create(g),N=g)}if(h){var I=x.indexOf(E);if(I!=-1)return w[I];x.push(E),w.push(k)}n(E,r)&&E.forEach(function(j,H){var G=S(H,A-1),z=S(j,A-1);k.set(G,z)}),n(E,i)&&E.forEach(function(j){var H=S(j,A-1);k.add(H)});for(var T in E){var D;N&&(D=Object.getOwnPropertyDescriptor(N,T)),!(D&&D.set==null)&&(k[T]=S(E[T],A-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(E),T=0;T<L.length;T++){var P=L[T],M=Object.getOwnPropertyDescriptor(E,P);M&&!M.enumerable&&!b||(k[P]=S(E[P],A-1),M.enumerable||Object.defineProperty(k,P,{enumerable:!1}))}if(b)for(var F=Object.getOwnPropertyNames(E),T=0;T<F.length;T++){var R=F[T],M=Object.getOwnPropertyDescriptor(E,R);M&&M.enumerable||(k[R]=S(E[R],A-1),Object.defineProperty(k,R,{enumerable:!1}))}return k}return S(d,m)}a.clonePrototype=function(h){if(h===null)return null;var m=function(){};return m.prototype=h,new m};function o(d){return Object.prototype.toString.call(d)}a.__objToStr=o;function l(d){return typeof d=="object"&&o(d)==="[object Date]"}a.__isDate=l;function u(d){return typeof d=="object"&&o(d)==="[object Array]"}a.__isArray=u;function c(d){return typeof d=="object"&&o(d)==="[object RegExp]"}a.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return a.__getRegExpFlags=f,a}();e.exports&&(e.exports=t)}(UU)),UU.exports}var XYt=qYt();const YYt=Am(XYt);var VU,Gge;function KYt(){return Gge||(Gge=1,VU=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),VU}var ZYt=KYt();const QYt=Am(ZYt);var WU,qge;function JYt(){return qge||(qge=1,WU=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(s){return function(a){return function(o,l){var u={key:o,value:a[o]},c={key:l,value:a[l]};return s(u,c)}}}(t.cmp),i=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var o,l;if(Array.isArray(a)){for(l="[",o=0;o<a.length;o++)o&&(l+=","),l+=s(a[o])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,c=Object.keys(a).sort(r&&r(a));for(l="",o=0;o<c.length;o++){var f=c[o],d=s(a[f]);d&&(l&&(l+=","),l+=JSON.stringify(f)+":"+d)}return i.splice(u,1),"{"+l+"}"}}(e)}),WU}var eKt=JYt();const pk=Am(eKt);function zne(e){return!!e.or}function jne(e){return!!e.and}function Une(e){return!!e.not}function wO(e,t){if(Une(e))wO(e.not,t);else if(jne(e))for(const n of e.and)wO(n,t);else if(zne(e))for(const n of e.or)wO(n,t);else t(e)}function SO(e,t){return Une(e)?{not:SO(e.not,t)}:jne(e)?{and:e.and.map(n=>SO(n,t))}:zne(e)?{or:e.or.map(n=>SO(n,t))}:t(e)}const LT=QYt,hn=YYt;function mk(e,t){const n={};for(const r of t)O1(e,r)&&(n[r]=e[r]);return n}function Rh(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>pk(e)).join(",")})`};const Yr=pk;function Mn(e){if(qi(e))return e;const t=cn(e)?e:pk(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function Xge(e){return e===!1||e===null}function Ft(e,t){return e.indexOf(t)>-1}function gk(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function cRe(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function tKt(e,...t){for(const n of t)nKt(e,n??{});return e}function nKt(e,t){for(const n of We(t))Bne(e,n,t[n],!0)}function F0(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function rKt(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function fRe(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Yge(e){const t=new Set;for(const n of e){const i=Sb(n).map((a,o)=>o===0?a:`[${a}]`),s=i.map((a,o)=>i.slice(0,o+1).join(""));for(const a of s)t.add(a)}return t}function dRe(e,t){return e===void 0||t===void 0?!0:fRe(Yge(e),Yge(t))}function Tr(e){return We(e).length===0}const We=Object.keys,G0=Object.values;function hRe(e){const t=[];for(const n in e)O1(e,n)&&t.push({key:n,value:e[n]});return t}function Y5(e){return e===!0||e===!1}function Qr(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function K$(e,t){return Une(e)?"!("+K$(e.not,t)+")":jne(e)?"("+e.and.map(n=>K$(n,t)).join(") && (")+")":zne(e)?"("+e.or.map(n=>K$(n,t)).join(") || (")+")":t(e)}function JG(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&JG(e[n],t)&&delete e[n],Tr(e)}function E7(e){return e.charAt(0).toUpperCase()+e.substr(1)}function pRe(e,t="datum"){const n=Sb(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(On).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function iKt(e,t="datum"){return`${t}[${On(Sb(e).join("."))}]`}function sKt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function vm(e){return`${Sb(e).map(sKt).join("\\.")}`}function Sv(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function mRe(e){return`${Sb(e).join(".")}`}function yk(e){return e?Sb(e).length:0}function Xi(...e){for(const t of e)if(t!==void 0)return t}let aKt=42;function oKt(e){const t=++aKt;return e?String(e)+t:t}function lKt(e){return uKt(e)?e:`__${e}`}function uKt(e){return e.indexOf("__")===0}function K5(e){if(e!==void 0)return(e%360+360)%360}function Vne(e){return qi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Kge={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function Wne(e){return e&&e.condition}const gRe=["domain","grid","labels","ticks","title"],cKt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},yRe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},fKt=Object.assign(Object.assign({},yRe),{style:1,labelExpr:1,encoding:1});function Zge(e){return!!fKt[e]}const No={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},bRe=No.arc,k7=No.area,A7=No.bar,dKt=No.image,_7=No.line,T7=No.point,hKt=No.rect,Z5=No.rule,xRe=No.text,Hne=No.tick,pKt=No.trail,Gne=No.circle,qne=No.square,vRe=No.geoshape;function $b(e){return Ft(["line","area","trail"],e)}function Qge(e){return Ft(["rect","bar","image","arc"],e)}const wRe=We(No);function id(e){return e.type}Cb(wRe);const mKt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],gKt=["fill","fillOpacity"],yKt=[...mKt,...gKt],bKt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},Jge=We(bKt),xKt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},vKt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},wKt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},SRe=5,SKt={binSpacing:1,continuousBandSize:SRe,timeUnitBandPosition:.5},CKt={binSpacing:0,continuousBandSize:SRe,timeUnitBandPosition:.5},$Kt={thickness:1};function EKt(e){return id(e)?e.type:e}function hp(e){return"mark"in e}class N7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return hp(t)?EKt(t.mark)===this.name:!1}}const kKt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},AKt={count:1,min:1,max:1};function wm(e){return!!e&&!!e.argmin}function Eb(e){return!!e&&!!e.argmax}function Xne(e){return cn(e)&&!!kKt[e]}const _Kt=["count","valid","missing","distinct"];function CRe(e){return cn(e)&&Ft(_Kt,e)}function TKt(e){return cn(e)&&Ft(["min","max"],e)}const NKt=["count","sum","distinct","valid","missing"],DKt=["mean","average","median","q1","q3","min","max"],IKt=Cb(DKt),Fh="row",Mh="column",D7="facet",si="x",os="y",Wc="x2",Cd="y2",$d="radius",pp="radius2",Hc="theta",mp="theta2",Ed="latitude",kd="longitude",Gc="latitude2",Ru="longitude2",ll="color",Ad="fill",_d="stroke",ul="shape",gp="size",kb="angle",yp="opacity",Km="fillOpacity",Zm="strokeOpacity",Qm="strokeWidth",Jm="strokeDash",PT="text",BT="order",zT="detail",I7="key",Fy="tooltip",O7="href",R7="url",F7="description",OKt={x:1,y:1,x2:1,y2:1},$Re={theta:1,theta2:1,radius:1,radius2:1};function ERe(e){return e in $Re}const Yne={longitude:1,longitude2:1,latitude:1,latitude2:1};function RKt(e){switch(e){case Ed:return"y";case Gc:return"y2";case kd:return"x";case Ru:return"x2"}}function FKt(e){return e in Yne}const MKt=We(Yne),Kne=Object.assign(Object.assign(Object.assign(Object.assign({},OKt),$Re),Yne),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function gx(e){return e===ll||e===Ad||e===_d}const kRe={row:1,column:1,facet:1},Cu=We(kRe),M7=Object.assign(Object.assign({},Kne),kRe),ARe=We(M7),{order:ucn,detail:ccn,tooltip:fcn}=M7,_Re=Nt(M7,["order","detail","tooltip"]),{row:dcn,column:hcn,facet:pcn}=_Re,LKt=Nt(_Re,["row","column","facet"]);function PKt(e){return!!LKt[e]}function TRe(e){return!!M7[e]}const BKt=[Wc,Cd,Gc,Ru,mp,pp];function NRe(e){return Ab(e)!==e}function Ab(e){switch(e){case Wc:return si;case Cd:return os;case Gc:return Ed;case Ru:return kd;case mp:return Hc;case pp:return $d}return e}function Sm(e){if(ERe(e))switch(e){case Hc:return"startAngle";case mp:return"endAngle";case $d:return"outerRadius";case pp:return"innerRadius"}return e}function Td(e){switch(e){case si:return Wc;case os:return Cd;case Ed:return Gc;case kd:return Ru;case Hc:return mp;case $d:return pp}}function Nd(e){switch(e){case si:case Wc:return"width";case os:case Cd:return"height"}}function zKt(e){switch(e){case si:return"xOffset";case os:return"yOffset";case Wc:return"x2Offset";case Cd:return"y2Offset";case Hc:return"thetaOffset";case $d:return"radiusOffset";case mp:return"theta2Offset";case pp:return"radius2Offset"}}const{x:mcn,y:gcn,x2:ycn,y2:bcn,latitude:xcn,longitude:vcn,latitude2:wcn,longitude2:Scn,theta:Ccn,theta2:$cn,radius:Ecn,radius2:kcn}=Kne,L7=Nt(Kne,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),jKt=We(L7),eg={x:1,y:1},Fu=We(eg);function sd(e){return e in eg}const Zne={theta:1,radius:1},UKt=We(Zne);function P7(e){return e==="width"?si:os}const{text:Acn,tooltip:_cn,href:Tcn,url:Ncn,description:Dcn,detail:Icn,key:Ocn,order:Rcn}=L7,DRe=Nt(L7,["text","tooltip","href","url","description","detail","key","order"]),VKt=We(DRe);function WKt(e){return!!L7[e]}function HKt(e){switch(e){case ll:case Ad:case _d:case gp:case ul:case yp:case Qm:case Jm:return!0;case Km:case Zm:case kb:return!1}}const IRe=Object.assign(Object.assign(Object.assign({},eg),Zne),DRe),B7=We(IRe);function tg(e){return!!IRe[e]}function GKt(e,t){return XKt(e)[t]}const Qne={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Fcn}=Qne,qKt=Nt(Qne,["geoshape"]);function XKt(e){switch(e){case ll:case Ad:case _d:case F7:case zT:case I7:case Fy:case O7:case BT:case yp:case Km:case Zm:case Qm:case D7:case Fh:case Mh:return Qne;case si:case os:case Ed:case kd:return qKt;case Wc:case Cd:case Gc:case Ru:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case gp:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Jm:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ul:return{point:"always",geoshape:"always"};case PT:return{text:"always"};case kb:return{point:"always",square:"always",text:"always"};case R7:return{image:"always"};case Hc:return{text:"always",arc:"always"};case $d:return{text:"always",arc:"always"};case mp:case pp:return{arc:"always"}}}function CO(e){switch(e){case si:case os:case Hc:case $d:case gp:case kb:case Qm:case yp:case Km:case Zm:case Wc:case Cd:case mp:case pp:return;case D7:case Fh:case Mh:case ul:case Jm:case PT:case Fy:case O7:case R7:case F7:return"discrete";case ll:case Ad:case _d:return"flexible";case Ed:case kd:case Gc:case Ru:case zT:case I7:case BT:return}}function ORe(e){return MT(e)&&(e=G7(e,void 0)),"bin"+We(e).map(t=>z7(e[t])?Qr(`_${t}_${Object.entries(e[t])}`):Qr(`_${t}_${e[t]}`)).join("")}function Rr(e){return e===!0||jT(e)&&!e.binned}function oo(e){return e==="binned"||jT(e)&&e.binned===!0}function jT(e){return js(e)}function z7(e){return e==null?void 0:e.selection}function e1e(e){switch(e){case Fh:case Mh:case gp:case ll:case Ad:case _d:case Qm:case yp:case Km:case Zm:case ul:return 6;case Jm:return 4;default:return 10}}function Jne(e){return`Invalid specification ${JSON.stringify(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const YKt='Autosize "fit" only works for single views and layered views.';function t1e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function n1e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function r1e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Nd(e)}.`:'Dropping "fit" because spec has discrete size.'}function i1e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function KKt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function ZKt(e){return`The "nearest" transform is not supported for ${e} marks.`}function RRe(e){return`Selection not supported for ${e} yet.`}function QKt(e){return`Cannot find a selection named "${e}".`}const JKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",eZt="Legend bindings are only supported for selections over an individual field or encoding channel.";function tZt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}function nZt(e){return`Unknown repeated value "${e}".`}function s1e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const rZt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function iZt(e){return`Unrecognized parse "${e}".`}function a1e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function sZt(e){return`Ignoring an invalid transform: ${Yr(e)}.`}const aZt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function o1e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function oZt(e){return`Layer's shared ${e.join(",")} channel ${e.length===1?"is":"are"} overriden.`}function lZt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Yr(t)} is overridden by a child projection ${Yr(n)}.`}const uZt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function cZt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Yr(n)}}.`}function FRe(e){return`Invalid field type "${e}".`}function fZt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function dZt(e){return`Invalid aggregation operator "${e}".`}function hZt(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function MRe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function eq(e,t){return`Dropping ${Yr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const pZt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function j7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function mZt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function gZt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function yZt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function HU(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function bZt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function xZt(e,t){return`Specified orient "${e}" overridden with "${t}".`}const vZt=`Scale's "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.`;function wZt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function SZt(e){return`Using unaggregated domain with raw field has no effect (${Yr(e)}).`}function CZt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function $Zt(e){return`Unaggregated domain is currently unsupported for log scale (${Yr(e)}).`}function EZt(e){return`Cannot apply size to non-oriented mark "${e}".`}function kZt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function AZt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function LRe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function PRe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function _Zt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yr(n)} and ${Yr(r)}). Using ${Yr(n)}.`}function TZt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yr(n)} and ${Yr(r)}). Using the union of the two domains.`}function NZt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function DZt(e){return`Dropping sort property ${Yr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const l1e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",IZt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",OZt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",RZt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function FZt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function MZt(e){return`Cannot stack non-linear scale (${e}).`}function LZt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Q5(e,t){return`Invalid ${e}: ${Yr(t)}.`}function PZt(e){return`Dropping day from datetime ${Yr(e)} as day cannot be combined with other units.`}function BZt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function zZt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function jZt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function UZt(e,t){return`Center is not needed to be specified in ${t} when extent is ${e}.`}function u1e(e){return`1D error band does not support ${e}.`}function BRe(e){return`Channel ${e} is required for "binned" bin.`}function VZt(e){return`Domain for ${e} is required for threshold scale.`}const zRe=VYt(lRe);let Cv=zRe;function WZt(e){return Cv=e,Cv}function HZt(){return Cv=zRe,Cv}function je(...e){Cv.warn(...e)}function GZt(...e){Cv.debug(...e)}function LS(e){if(e&&js(e)){for(const t of tre)if(t in e)return!0}return!1}const jRe=["january","february","march","april","may","june","july","august","september","october","november","december"],qZt=jRe.map(e=>e.substr(0,3)),URe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],XZt=URe.map(e=>e.substr(0,3));function YZt(e){if(Vne(e)&&(e=+e),qi(e))return e>4&&je(Q5("quarter",e)),e-1;throw new Error(Q5("quarter",e))}function KZt(e){if(Vne(e)&&(e=+e),qi(e))return e-1;{const t=e.toLowerCase(),n=jRe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=qZt.indexOf(r);if(i!==-1)return i;throw new Error(Q5("month",e))}}function ZZt(e){if(Vne(e)&&(e=+e),qi(e))return e%7;{const t=e.toLowerCase(),n=URe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=XZt.indexOf(r);if(i!==-1)return i;throw new Error(Q5("day",e))}}function ere(e,t){const n=[];if(t&&e.day!==void 0&&We(e).length>1&&(je(PZt(e)),e=hn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?KZt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?YZt(e.quarter):e.quarter;n.push(qi(r)?r*3:r+"*3")}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?ZZt(e.day):e.day;n.push(qi(r)?r+1:r+"+1")}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function bk(e){const n=ere(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function QZt(e){const n=ere(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function JZt(e){const t=ere(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const VRe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},tre=We(VRe);function eQt(e){return!!VRe[e]}function nre(e){return e.startsWith("utc")}function tQt(e){return e.substr(3)}const nQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function rre(e){const t=[];for(const n of tre)WRe(e,n)&&t.push(n);return t}function WRe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function rQt(e,t,{end:n}={end:!1}){const r=pRe(t),i=nre(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let a;const o={};for(const l of tre)WRe(e,l)&&(o[l]=s(l),a=l);return n&&(o[a]+="+1"),QZt(o)}function HRe(e){if(!e)return;const t=rre(e);return`timeUnitSpecifier(${pk(t)}, ${pk(nQt)})`}function iQt(e,t,n){if(!e)return;const r=HRe(e);return`${n||nre(e)?"utc":"time"}Format(${t}, ${r})`}function Eo(e){if(!e)return;let t;return cn(e)?t={unit:e}:js(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),nre(t.unit)&&(t.utc=!0,t.unit=tQt(t.unit)),t}function sQt(e){const t=Eo(e),{utc:n}=t,r=Nt(t,["utc"]);return r.unit?(n?"utc":"")+We(r).map(i=>Qr(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+We(r).map(i=>Qr(`_${i}_${r[i]}`)).join("")}function Vt(e){return e&&!!e.signal}function ng(e){return!!e.step}function aQt(e){return It(e)?!1:"fields"in e&&!("data"in e)}function oQt(e){return It(e)?!1:"fields"in e&&"data"in e}function M0(e){return It(e)?!1:"field"in e&&"data"in e}const lQt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},uQt=We(lQt),cQt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},GU=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function fQt(e){return e==null?void 0:e.selection}function ire(e){return e&&!!e.field&&e.equal!==void 0}function GRe(e){return e&&!!e.field&&e.lt!==void 0}function qRe(e){return e&&!!e.field&&e.lte!==void 0}function XRe(e){return e&&!!e.field&&e.gt!==void 0}function YRe(e){return e&&!!e.field&&e.gte!==void 0}function sre(e){if(e&&e.field){if(It(e.range)&&e.range.length===2)return!0;if(Vt(e.range))return!0}return!1}function are(e){return e&&!!e.field&&(It(e.oneOf)||It(e.in))}function dQt(e){return e&&!!e.field&&e.valid!==void 0}function KRe(e){return are(e)||ire(e)||sre(e)||GRe(e)||XRe(e)||qRe(e)||YRe(e)}function cf(e,t){return wre(e,{timeUnit:t,wrapTime:!0})}function hQt(e,t){return e.map(n=>cf(n,t))}function ZRe(e,t=!0){var n;const{field:r}=e,i=(n=Eo(e.timeUnit))===null||n===void 0?void 0:n.unit,s=i?"time("+rQt(i,r)+")":Ye(e,{expr:"datum"});if(ire(e))return s+"==="+cf(e.equal,i);if(GRe(e)){const a=e.lt;return`${s}<${cf(a,i)}`}else if(XRe(e)){const a=e.gt;return`${s}>${cf(a,i)}`}else if(qRe(e)){const a=e.lte;return`${s}<=${cf(a,i)}`}else if(YRe(e)){const a=e.gte;return`${s}>=${cf(a,i)}`}else{if(are(e))return`indexof([${hQt(e.oneOf,i).join(",")}], ${s}) !== -1`;if(dQt(e))return ore(s,e.valid);if(sre(e)){const{range:a}=e,o=Vt(a)?{signal:`${a.signal}[0]`}:a[0],l=Vt(a)?{signal:`${a.signal}[1]`}:a[1];if(o!==null&&l!==null&&t)return"inrange("+s+", ["+cf(o,i)+", "+cf(l,i)+"])";const u=[];return o!==null&&u.push(`${s} >= ${cf(o,i)}`),l!==null&&u.push(`${s} <= ${cf(l,i)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${JSON.stringify(e)}`)}function ore(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function pQt(e){var t;return KRe(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=Eo(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const PS={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},My=PS.quantitative,lre=PS.ordinal,$v=PS.temporal,ure=PS.nominal,BS=PS.geojson,mQt=We(PS);function gQt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case My:return"quantitative";case"t":case $v:return"temporal";case"o":case lre:return"ordinal";case"n":case ure:return"nominal";case BS:return"geojson"}}const Li={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",POINT:"point",BAND:"band"},tq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},yQt=We(tq);function bQt(e,t){const n=tq[e],r=tq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const xQt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function c1e(e){return xQt[e]}const QRe=["linear","log","pow","sqrt","symlog","time","utc"],vQt=Cb(QRe),wQt=["linear","log","pow","sqrt","symlog"],SQt=Cb(wQt);function CQt(e){return e in SQt}const $Qt=["quantile","quantize","threshold"],EQt=Cb($Qt),kQt=QRe.concat(["quantile","quantize","threshold","sequential","identity"]),AQt=Cb(kQt),_Qt=["ordinal","bin-ordinal","point","band"],TQt=Cb(_Qt);function cl(e){return e in TQt}function Mu(e){return e in AQt}function hc(e){return e in vQt}function J5(e){return e in EQt}const NQt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function DQt(e){return!cn(e)&&!!e.name}function JRe(e){return e==null?void 0:e.selection}function IQt(e){return e&&e.unionWith}const e5e={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Mcn,domain:Lcn,range:Pcn,scheme:Bcn}=e5e,OQt=Nt(e5e,["type","domain","range","scheme"]),RQt=We(OQt);FQt();function t5e(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!Ft(["point","band","identity"],e);case"bins":return!Ft(["point","band","identity","ordinal"],e);case"round":return hc(e)||e==="band"||e==="point";case"padding":return hc(e)||Ft(["point","band"],e);case"paddingOuter":case"align":return Ft(["point","band"],e);case"paddingInner":return e==="band";case"domainMid":case"clamp":return hc(e);case"nice":return hc(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Mu(e)&&!Ft(["log","time","utc","threshold","quantile"],e)}}function n5e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return gx(e)?void 0:wZt(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function r5e(e,t){return Ft([lre,ure],t)?e===void 0||cl(e):t===$v?Ft([Li.TIME,Li.UTC,void 0],e):t===My?Ft([Li.LOG,Li.POW,Li.SQRT,Li.SYMLOG,Li.QUANTILE,Li.QUANTIZE,Li.THRESHOLD,Li.LINEAR,void 0],e):!0}function i5e(e,t){if(!tg(e))return!1;switch(e){case si:case os:case Hc:case $d:return hc(t)||Ft(["band","point"],t);case gp:case Qm:case yp:case Km:case Zm:case kb:return hc(t)||J5(t)||Ft(["band","point","ordinal"],t);case ll:case Ad:case _d:return t!=="band";case Jm:return t==="ordinal"||J5(t);case ul:return t==="ordinal"}}function FQt(){var e;const t={};for(const n of ARe)for(const r of mQt)for(const i of yQt){const s=MQt(n,r);i5e(n,i)&&r5e(i,r)&&(t[s]=(e=t[s])!==null&&e!==void 0?e:[],t[s].push(i))}return t}function MQt(e,t){return e+"_"+t}function cre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,a=a5e(e);return tt(n)&&!CRe(n.aggregate)&&i&&hc(i.get("type"))&&i.get("zero")===!1?s5e({fieldDef:n,channel:t,markDef:r,ref:a,config:s}):a}function s5e({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return $b(n.type)||Jn("invalid",n,i)===null?r:[LQt(e,t),r]}function LQt(e,t){const n=fre(e,!0),i=Ab(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function fre(e,t=!0){return ore(cn(e)?e:Ye(e,{expr:"datum"}),!t)}function PQt(e){const{datum:t}=e;return LS(t)?bk(t):`${JSON.stringify(t)}`}function J1(e,t,n,r){const i={};if(t&&(i.scale=t),rg(e)){const{datum:s}=e;LS(s)?i.signal=bk(s):Vt(s)?i.signal=s.signal:i.value=s}else i.field=Ye(e,n);if(r){const{offset:s,band:a}=r;s&&(i.offset=s),a&&(i.band=a)}return i}function e6({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,band:s=.5}){const a=0<s&&s<1?"datum":void 0,o=Ye(t,{expr:a,suffix:i}),l=n!==void 0?Ye(n,{expr:a}):Ye(t,{suffix:"end",expr:a}),u={};if(s===0||s===1){u.scale=e;const c=s===0?o:l;u.field=c}else{const c=`${s} * ${o} + ${1-s} * ${l}`;u.signal=`scale("${e}", ${c})`}return r&&(u.offset=r),u}function a5e({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:o,offset:l,defaultRef:u,band:c}){var f;if(t){if(qt(t)){if(Vl(t)){c=c??VT({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:o,config:i,isMidPoint:!0});const{bin:h,timeUnit:m,type:g}=t;if(Rr(h)||c&&m&&g===$v)return o&&o.impute?J1(t,s,{binSuffix:"mid"},{offset:l}):c?e6({scaleName:s,fieldOrDatumDef:t,band:c,offset:l}):J1(t,s,WT(t,e)?{binSuffix:"range"}:{},{offset:l});if(oo(h)){if(tt(n))return e6({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,band:c,offset:l});je(BRe(e===si?Wc:Cd))}}const d=a==null?void 0:a.get("type");return J1(t,s,cl(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?(f=c??t.band)!==null&&f!==void 0?f:.5:void 0})}else if(ep(t)){const d=t.value,h=l?{offset:l}:{};return Object.assign(Object.assign({},Z$(e,d)),h)}}return HYt(u)&&(u=u()),u&&Object.assign(Object.assign({},u),l?{offset:l}:{})}function Z$(e,t){return Ft(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ft(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ki(t)}function Ly(e){return e&&e!=="number"&&e!=="time"}function o5e(e,t,n){return`${e}(${t}${n?`, ${JSON.stringify(n)}`:""})`}const BQt="  ";function dre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var a,o;if(Ly(n))return hre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const l=l5e(e,r,i);if(q7(e)){const u=jQt(l,tt(e)?(a=Eo(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0,t,s.timeFormat,bre(e)&&((o=e.scale)===null||o===void 0?void 0:o.type)===Li.UTC);return u?{signal:u}:void 0}if(t=f5e(g0(e),t,s),tt(e)&&Rr(e.bin)){const u=Ye(e,{expr:r,binSuffix:"end"});return{signal:U7(l,u,t,n,s)}}else return t||g0(e)==="quantitative"?{signal:`${d5e(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function l5e(e,t,n){return tt(e)?n?`${Ye(e,{expr:t,suffix:"end"})}-${Ye(e,{expr:t,suffix:"start"})}`:Ye(e,{expr:t}):PQt(e)}function hre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:a}){if(a=a??l5e(e,r,i),tt(e)&&Rr(e.bin)){const o=Ye(e,{expr:r,binSuffix:"end"});return{signal:U7(a,o,t,n,s)}}return{signal:o5e(n,a,t)}}function u5e(e,t,n,r,i,s){var a;if(!Ly(r)){if(q7(e)){const o=tt(e)?(a=Eo(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return zQt(n,o,i,s)}return f5e(t,n,i)}}function c5e(e,t,n){if(e&&(Vt(e)||e==="number"||e==="time"))return e;if(q7(t)&&n!=="time"&&n!=="utc")return"time"}function f5e(e,t,n){if(cn(t))return t;if(e===My)return n.numberFormat}function zQt(e,t,n,r){return e||(t?{signal:HRe(t)}:r?void 0:n.timeFormat)}function d5e(e,t){return`format(${e}, "${t||""}")`}function f1e(e,t,n,r){var i;return Ly(n)?o5e(n,e,t):d5e(e,(i=cn(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function U7(e,t,n,r,i){const s=f1e(e,n,r,i),a=f1e(t,n,r,i);return`${ore(e,!1)} ? "null" : ${s} + "${BQt}" + ${a}`}function jQt(e,t,n,r,i){return!t||n?(n=cn(n)?n:r,`${i?"utc":"time"}Format(${e}, '${n}')`):iQt(t,e,i)}const V7="min",UQt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function d1e(e){return e in UQt}function h5e(e){return!!e&&!!e.encoding}function jf(e){return!!e&&(e.op==="count"||!!e.field)}function p5e(e){return!!e&&It(e)}function UT(e){return"row"in e||"column"in e}function pre(e){return!!e&&"header"in e}function W7(e){return"facet"in e}function VQt(e){return e.selection}function WQt(e){return e&&!cn(e)&&"repeat"in e}function h1e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function m5e(e){return Vl(e)&&"sort"in e}function VT({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:i,config:s,isMidPoint:a}){if(qt(t)&&t.band!==void 0)return t.band;if(tt(t)){const{timeUnit:o,bin:l}=t;if(o&&!n)return a?Py("timeUnitBandPosition",r,s):Qge(r.type)?Py("timeUnitBand",r,s):0;if(Rr(l))return Qge(r.type)&&!a?1:.5}if((i==null?void 0:i.fieldChannel)===e&&a)return .5}function mre(e,t,n,r,i,s){return Rr(t.bin)||t.timeUnit&&Vl(t)&&t.type==="temporal"?!!VT({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:i,config:s}):!1}function gre(e){return!!e&&"condition"in e}function H7(e){const t=e&&e.condition;return!!t&&!It(t)&&tt(t)}function yre(e){const t=e&&e.condition;return!!t&&!It(t)&&qt(t)}function HQt(e){const t=e&&e.condition;return!!t&&(It(t)||ep(t))}function tt(e){return!!e&&(!!e.field||e.aggregate==="count")}function g0(e){return e&&e.type}function rg(e){return!!e&&"datum"in e}function _f(e){return Vl(e)&&x5e(e)||nq(e)}function nq(e){return rg(e)&&qi(e.datum)}function qt(e){return tt(e)||rg(e)}function Vl(e){return!!e&&("field"in e&&"type"in e||e.aggregate==="count")}function ep(e){return e&&"value"in e&&"value"in e}function bre(e){return!!e&&("scale"in e||"sort"in e)}function xre(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function g5e(e){return!!e&&"legend"in e}function y5e(e){return!!e&&("format"in e||"formatType"in e)}function GQt(e){return"op"in e}function Ye(e,t={}){var n,r,i;let s=e.field;const a=t.prefix;let o=t.suffix,l="";if(qQt(e))s=lKt("count");else{let u;if(!t.nofn)if(GQt(e))u=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;Rr(c)?(u=ORe(c),o=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):f?Eb(f)?(l=`["${s}"]`,s=`argmax_${f.argmax}`):wm(f)?(l=`["${s}"]`,s=`argmin_${f.argmin}`):u=String(f):d&&(u=sQt(d),o=(!Ft(["range","mid"],t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}u&&(s=s?`${u}_${s}`:u)}return o&&(s=`${s}_${o}`),a&&(s=`${a}_${s}`),t.forAs?mRe(s):t.expr?iKt(s,t.expr)+l:vm(s)+l}function b5e(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return tt(e)&&!!e.bin;case"temporal":return!1}throw new Error(FRe(e.type))}function x5e(e){return!b5e(e)}function qQt(e){return e.aggregate==="count"}function XQt(e,t){var n;const{field:r,bin:i,timeUnit:s,aggregate:a}=e;if(a==="count")return t.countTitle;if(Rr(i))return`${r} (binned)`;if(s){const o=(n=Eo(s))===null||n===void 0?void 0:n.unit;if(o)return`${r} (${rre(o).join("-")})`}else if(a)return Eb(a)?`${r} for max ${a.argmax}`:wm(a)?`${r} for min ${a.argmin}`:`${E7(a)} of ${r}`;return r}function YQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Eb(t))return`${i} for argmax(${t.argmax})`;if(wm(t))return`${i} for argmin(${t.argmin})`;const s=Eo(r),a=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Rr(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}const v5e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return YQt(e);default:return XQt(e,t)}};let w5e=v5e;function S5e(e){w5e=e}function KQt(){S5e(v5e)}function ey(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,s;const o=((i=vre(e))!==null&&i!==void 0?i:{}).title;if(!tt(e))return o;const l=e,u=r?C5e(l,t):void 0;return n?Xi(o,l.title,u):(s=o??l.title)!==null&&s!==void 0?s:u}function vre(e){if(xre(e)&&e.axis)return e.axis;if(g5e(e)&&e.legend)return e.legend;if(pre(e)&&e.header)return e.header}function C5e(e,t){return w5e(e,t)}function t6(e){var t;if(y5e(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=vre(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function ZQt(e,t){if(e.timeUnit)return"temporal";if(Rr(e.bin))return"quantitative";switch(CO(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function ad(e){if(tt(e))return e;if(H7(e))return e.condition}function ss(e){if(qt(e))return e;if(yre(e))return e.condition}function rq(e,t,n){if(cn(e)||qi(e)||MT(e)){const r=cn(e)?"string":qi(e)?"number":"boolean";return je(cZt(t,r,e)),{value:e}}return qt(e)?n6(e,t,n):yre(e)?Object.assign(Object.assign({},e),{condition:n6(e.condition,t,n)}):e}function n6(e,t,n){if(y5e(e)){const{format:r,formatType:i}=e,s=Nt(e,["format","formatType"]);if(Ly(i)&&!n.customFormatTypes)return je(o1e(t)),n6(s,t,n)}else{const r=xre(e)?"axis":g5e(e)?"legend":pre(e)?"header":null;if(r&&e[r]){const i=e[r],{format:s,formatType:a}=i,o=Nt(i,["format","formatType"]);if(Ly(a)&&!n.customFormatTypes)return je(o1e(t)),n6(Object.assign(Object.assign({},e),{[r]:o}),t,n)}}return tt(e)?$5e(e,t):QQt(e)}function QQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=qi(n)?"quantitative":cn(n)?"nominal":LS(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function $5e(e,t){const{aggregate:n,timeUnit:r,bin:i,field:s}=e,a=Object.assign({},e);if(n&&!Xne(n)&&!Eb(n)&&!wm(n)&&(je(dZt(n)),delete a.aggregate),r&&(a.timeUnit=Eo(r)),s&&(a.field=`${s}`),Rr(i)&&(a.bin=G7(i,t)),oo(i)&&!sd(t)&&je(`Channel ${t} should not be used with "binned" bin.`),Vl(a)){const{type:o}=a,l=gQt(o);o!==l&&(a.type=l),o!=="quantitative"&&CRe(n)&&(je(fZt(o,n)),a.type="quantitative")}else if(!NRe(t)){const o=ZQt(a,t);je(hZt(t,o)),a.type=o}if(Vl(a)){const{compatible:o,warning:l}=JQt(a,t);o||je(l)}if(m5e(a)&&cn(a.sort)){const{sort:o}=a;if(d1e(o))return Object.assign(Object.assign({},a),{sort:{encoding:o}});const l=o.substr(1);if(o.charAt(0)==="-"&&d1e(l))return Object.assign(Object.assign({},a),{sort:{encoding:l,order:"descending"}})}if(pre(a)){const{header:o}=a,{orient:l}=o,u=Nt(o,["orient"]);if(l)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},u),{labelOrient:o.labelOrient||l,titleOrient:o.titleOrient||l})})}return a}function G7(e,t){return MT(e)?{maxbins:e1e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:e1e(t)}):e}const Lg={compatible:!0};function JQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Fh:case Mh:case D7:return x5e(e)?{compatible:!1,warning:gZt(t)}:Lg;case si:case os:case ll:case Ad:case _d:case PT:case zT:case I7:case Fy:case O7:case R7:case kb:case Hc:case $d:case F7:return Lg;case kd:case Ru:case Ed:case Gc:return n!==My?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Lg;case yp:case Km:case Zm:case Qm:case gp:case mp:case pp:case Wc:case Cd:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Lg;case Jm:return Ft(["ordinal","nominal"],e.type)?Lg:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case ul:return Ft(["ordinal","nominal","geojson"],e.type)?Lg:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case BT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Lg}}function q7(e){const{formatType:t}=t6(e);return t==="time"||!t&&eJt(e)}function eJt(e){return e&&(e.type==="temporal"||tt(e)&&!!e.timeUnit)}function wre(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var s;const a=t&&((s=Eo(t))===null||s===void 0?void 0:s.unit);let o=a||n==="temporal",l;return Vt(e)?l=e.signal:LS(e)?(o=!0,l=bk(e)):(cn(e)||qi(e))&&o&&(l=`datetime(${JSON.stringify(e)})`,eQt(a)&&(qi(e)&&e<1e4||cn(e)&&isNaN(Date.parse(e)))&&(l=bk({[a]:e}))),l?r&&o?`time(${l})`:l:i?void 0:JSON.stringify(e)}function E5e(e,t){const{type:n}=e;return t.map(r=>{const i=wre(r,{timeUnit:tt(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function WT(e,t){return Rr(e.bin)?tg(t)&&Ft(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function k5e(e){const{anchor:t,frame:n,offset:r,orient:i,color:s,subtitleColor:a,subtitleFont:o,subtitleFontSize:l,subtitleFontStyle:u,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d}=e,h=Nt(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},h),s?{fill:s}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),b=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),o?{subtitleFont:o}:{}),l?{subtitleFontSize:l}:{}),u?{subtitleFontStyle:u}:{}),c?{subtitleFontWeight:c}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{}),x=mk(m,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:x,nonMark:g,subtitle:b}}function y0(e){return cn(e)||It(e)&&cn(e[0])}function ki(e){return Vt(e)?e:e!==void 0?{value:e}:void 0}function p1e(e){return Vt(e)?e.signal:On(e.value)}function xk(e){return Vt(e)?e.signal:e==null?null:On(e)}function tJt(e,t,n){for(const r of n){const i=Py(r,t.markDef,t.config);i!==void 0&&(e[r]=ki(i))}return e}function A5e(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function Jn(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Py(e,t,n,r)}function Py(e,t,n,{vgChannel:r}={}){return Xi(r?r6(e,t,n.style):void 0,r6(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function r6(e,t,n){return _5e(e,A5e(t),n)}function _5e(e,t,n){t=Ii(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function T5e(e,t){return Ii(e).reduce((n,r)=>{var i;return n.field.push(Ye(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function N5e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(LT(i,r))return;n.push(r)}),n}function D5e(e,t){return LT(e,t)||!t?e:e?[...Ii(e),...Ii(t)].join(", "):t}function I5e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((y0(n)||Vt(n))&&(y0(r)||Vt(r)))return{explicit:e.explicit,value:D5e(n,r)};if(y0(n)||Vt(n))return{explicit:e.explicit,value:n};if(y0(r)||Vt(r))return{explicit:e.explicit,value:r};if(!y0(n)&&!Vt(n)&&!y0(r)&&!Vt(r))return{explicit:e.explicit,value:N5e(n,r)};throw new Error("It should never reach here")}function ty(e,t){const n=e&&e[t];return n?It(n)?gk(n,r=>!!r.field):tt(n)||H7(n):!1}function Sre(e){return gk(ARe,t=>{if(ty(e,t)){const n=e[t];if(It(n))return gk(n,r=>!!r.aggregate);{const r=ad(n);return r&&!!r.aggregate}}return!1})}function Cre(e,t){const n=[],r=[],i=[],s=[],a={};return $re(e,(o,l)=>{if(tt(o)){const{field:u,aggregate:c,bin:f,timeUnit:d}=o,h=Nt(o,["field","aggregate","bin","timeUnit"]);if(c||d||f){const m=vre(o),g=m&&m.title;let b=Ye(o,{forAs:!0});const x=Object.assign(Object.assign(Object.assign({},g?[]:{title:ey(o,t,{allowDisabling:!0})}),h),{field:b});if(c){let w;if(Eb(c)?(w="argmax",b=Ye({op:"argmax",field:c.argmax},{forAs:!0}),x.field=`${b}.${u}`):wm(c)?(w="argmin",b=Ye({op:"argmin",field:c.argmin},{forAs:!0}),x.field=`${b}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(w=c),w){const C={op:w,as:b};u&&(C.field=u),s.push(C)}}else if(n.push(b),Vl(o)&&Rr(f)){if(r.push({bin:f,field:u,as:b}),n.push(Ye(o,{binSuffix:"end"})),WT(o,l)&&n.push(Ye(o,{binSuffix:"range"})),sd(l)){const w={field:b+"_end"};a[l+"2"]=w}x.bin="binned",NRe(l)||(x.type=My)}else if(d){i.push({timeUnit:d,field:u,as:b});const w=Vl(o)&&o.type!==$v&&"time";w&&(l===PT||l===Fy?x.formatType=w:WKt(l)?x.legend=Object.assign({formatType:w},x.legend):sd(l)&&(x.axis=Object.assign({formatType:w},x.axis)))}a[l]=x}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function nJt(e,t,n){const r=GKt(t,n);if(r){if(r==="binned"){const i=e[t===Wc?si:os];return!!(tt(i)&&tt(e[t])&&oo(i.bin))}}else return!1;return!0}function rJt(e,t,n){const r=t.type;return We(e).reduce((i,s)=>{if(!TRe(s))return je(mZt(s)),i;const a=e[s];if(s==="angle"&&r==="arc"&&!e.theta&&(je(uZt),s=Hc),!nJt(e,s,r))return je(j7(s,r)),i;if(s===gp&&r==="line"){const o=ad(e[s]);if(o!=null&&o.aggregate)return je(pZt),i}if(s===ll&&(t.filled?"fill"in e:"stroke"in e))return je(MRe("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(s===zT||s===BT&&!It(a)&&!ep(a)||s===Fy&&It(a))a&&(i[s]=Ii(a).reduce((o,l)=>(tt(l)?o.push($5e(l,s)):je(eq(l,s)),o),[]));else{if(s===Fy&&a===null)i[s]=null;else if(!tt(a)&&!rg(a)&&!ep(a)&&!gre(a)&&!Vt(a))return je(eq(a,s)),i;i[s]=rq(a,s,n)}return i},{})}function iJt(e){const t=[];for(const n of We(e))if(ty(e,n)){const r=e[n],i=Ii(r);for(const s of i)tt(s)?t.push(s):H7(s)&&t.push(s.condition)}return t}function $re(e,t,n){if(e)for(const r of We(e)){const i=e[r];if(It(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function O5e(e,t,n,r){return e?We(e).reduce((i,s)=>{const a=e[s];return It(a)?a.reduce((o,l)=>t.call(r,o,l,s),i):t.call(r,i,a,s)},n):n}function R5e(e,t){return We(t).reduce((n,r)=>{switch(r){case si:case os:case O7:case F7:case R7:case Wc:case Cd:case Hc:case mp:case $d:case pp:case Ed:case kd:case Gc:case Ru:case PT:case ul:case kb:case Fy:return n;case BT:if(e==="line"||e==="trail")return n;case zT:case I7:{const i=t[r];if(It(i)||tt(i))for(const s of Ii(i))s.aggregate||n.push(Ye(s,{}));return n}case gp:if(e==="trail")return n;case ll:case Ad:case _d:case yp:case Km:case Zm:case Jm:case Qm:{const i=ad(t[r]);return i&&!i.aggregate&&n.push(Ye(i,{})),n}}},[])}function sJt(e){const{tooltip:t}=e,n=Nt(e,["tooltip"]);if(!t)return{filteredEncoding:e};let r,i;if(It(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return It(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function iq(e,t,n,r=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...e.map(({fieldPrefix:s,titlePrefix:a})=>{const o=r?` of ${t.field}`:"";return{field:s+t.field,type:t.type,title:Vt(a)?{signal:a+`"${escape(o)}"`}:a+o}}),...iJt(n)]}}function F5e(e){const{axis:t,title:n,field:r}=e;return t&&t.title!==void 0?void 0:Xi(n,r)}function Ere(e,t,n,r,i){const{scale:s,axis:a}=n;return({partName:o,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,aria:f,extraEncoding:d={}})=>{const h=F5e(n);return M5e(e,o,i,f,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:u+"_"+n.field,type:n.type},h!==void 0?{title:h}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},cn(c)?{[t+"2"]:{field:c+"_"+n.field}}:{}),r),d)})}}function M5e(e,t,n,r,i){const{clip:s,color:a,opacity:o}=e,l=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),s?{clip:s}:{}),a?{color:a}:{}),o?{opacity:o}:{}),id(i.mark)?i.mark:{type:i.mark}),{style:`${l}-${t}`}),MT(e[t])?{}:e[t]),r===!1?{aria:r}:{})})]:[]}function L5e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],a=r[i+"2"],o=r[i+"Error"],l=r[i+"Error2"];return{continuousAxisChannelDef:LD(s,n),continuousAxisChannelDef2:LD(a,n),continuousAxisChannelDefError:LD(o,n),continuousAxisChannelDefError2:LD(l,n),continuousAxis:i}}function LD(e,t){if(e&&e.aggregate){const{aggregate:n}=e,r=Nt(e,["aggregate"]);return n!==t&&je(jZt(n,t)),r}else return e}function P5e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(_f(i)){if(_f(s)){const a=tt(i)&&i.aggregate,o=tt(s)&&s.aggregate;if(!a&&o===t)return"vertical";if(!o&&a===t)return"horizontal";if(a===t&&o===t)throw new Error("Both x and y cannot have aggregate");return id(n)&&n.orient?n.orient:"vertical"}return"horizontal"}else{if(_f(s))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}}const i6="boxplot",aJt=["box","median","outliers","rule","ticks"],oJt=new N7(i6,z5e);function B5e(e){return qi(e)?"tukey":e}function z5e(e,{config:t}){var n,r;const{mark:i,encoding:s,selection:a,projection:o}=e,l=Nt(e,["mark","encoding","selection","projection"]),u=id(i)?i:{type:i};a&&je(RRe("boxplot"));const c=(n=u.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=Jn("size",u,t),d=B5e(c),{transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:x,encodingWithoutContinuousAxis:w,ticksOrient:C,boxOrient:S,customTooltipWithoutAggregatedField:E}=lJt(e,c,t),{color:A,size:k}=w,N=Nt(w,["color","size"]),I=G=>Ere(u,g,m,G,t.boxplot),T=I(N),D=I(w),L=I(Object.assign(Object.assign({},N),k?{size:k}:{})),P=iq([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),M={type:"tick",color:"black",opacity:1,orient:C,invalid:null},F=d==="min-max"?P:iq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),R=[...T({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:F}),...T({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:F}),...T({partName:"ticks",mark:M,positionPrefix:"lower_whisker",aria:!1,extraEncoding:F}),...T({partName:"ticks",mark:M,positionPrefix:"upper_whisker",aria:!1,extraEncoding:F})],j=[...d!=="tukey"?R:[],...D({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:S,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:P}),...L({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},js(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:C,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:P})];let H;if(d!=="min-max"){const G=`datum["lower_box_${m.field}"]`,z=`datum["upper_box_${m.field}"]`,Y=`(${z} - ${G})`,Z=`${G} - ${c} * ${Y}`,Q=`${z} + ${c} * ${Y}`,se=`datum["${m.field}"]`,re={joinaggregate:j5e(m.field),groupby:b};let de;d==="tukey"&&(de={transform:[{filter:`(${Z} <= ${se}) && (${se} <= ${Q})`},{aggregate:[{op:"min",field:m.field,as:"lower_whisker_"+m.field},{op:"max",field:m.field,as:"upper_whisker_"+m.field},{op:"min",field:"lower_box_"+m.field,as:"lower_box_"+m.field},{op:"max",field:"upper_box_"+m.field,as:"upper_box_"+m.field},...x],groupby:b}],layer:R});const{tooltip:Oe}=N,Le=Nt(N,["tooltip"]),{scale:me,axis:xe}=m,Ee=F5e(m),ce=M5e(u,"outliers",t.boxplot,!0,{transform:[{filter:`(${se} < ${Z}) || (${se} > ${Q})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},Ee!==void 0?{title:Ee}:{}),me!==void 0?{scale:me}:{}),xe!==void 0?{axis:xe}:{})},Le),E?{tooltip:E}:{})})[0];ce&&de?H={transform:[re],layer:[ce,de]}:ce?(H=ce,H.transform.unshift(re)):de&&(H=de,H.transform.unshift(re))}return H?Object.assign(Object.assign({},l),{layer:[H,{transform:h,layer:j}]}):Object.assign(Object.assign({},l),{transform:((r=l.transform)!==null&&r!==void 0?r:[]).concat(h),layer:j})}function j5e(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}function lJt(e,t,n){const r=P5e(e,i6),{continuousAxisChannelDef:i,continuousAxis:s}=L5e(e,r,i6),a=i.field,o=B5e(t),l=[...j5e(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:(o==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(o==="min-max"?"upper_whisker_":"max_")+a}],u=o==="min-max"||o==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:"lower_whisker_"+a}],c=e.encoding,f=s;c[f];const d=Nt(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=sJt(d),{bins:g,timeUnits:b,aggregate:x,groupby:w,encoding:C}=Cre(m,n),S=r==="vertical"?"horizontal":"vertical",E=r;return{transform:[...g,...b,{aggregate:[...x,...l],groupby:w},...u],groupby:w,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:C,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:h}}const kre="errorbar",uJt=["ticks","rule"],cJt=new N7(kre,U5e);function U5e(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:o,outerSpec:l,tooltipEncoding:u}=V5e(e,kre,t),c=Ere(o,i,r,s,t.errorbar),f={type:"tick",orient:a},d=[...c({partName:"ticks",mark:f,positionPrefix:"lower",aria:!1,extraEncoding:u}),...c({partName:"ticks",mark:f,positionPrefix:"upper",aria:!1,extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),d.length>1?{layer:d}:Object.assign({},d[0]))}function fJt(e,t){const{encoding:n}=e;if(dJt(n))return{orient:P5e(e,t),inputType:"raw"};const r=hJt(n),i=pJt(n),s=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(qt(o)&&qt(l))throw new Error(`${t} cannot have both x2 and y2`);if(qt(o)){if(_f(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(qt(l)){if(_f(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(qt(l)&&!qt(o))throw new Error(`${t} cannot have xError2 without xError`);if(qt(c)&&!qt(u))throw new Error(`${t} cannot have yError2 without yError`);if(qt(o)&&qt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(qt(o)){if(_f(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(qt(u)){if(_f(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function dJt(e){return(qt(e.x)||qt(e.y))&&!qt(e.x2)&&!qt(e.y2)&&!qt(e.xError)&&!qt(e.xError2)&&!qt(e.yError)&&!qt(e.yError2)}function hJt(e){return qt(e.x2)||qt(e.y2)}function pJt(e){return qt(e.xError)||qt(e.xError2)||qt(e.yError)||qt(e.yError2)}function V5e(e,t,n){var r;const{mark:i,encoding:s,selection:a,projection:o}=e,l=Nt(e,["mark","encoding","selection","projection"]),u=id(i)?i:{type:i};a&&je(RRe(t));const{orient:c,inputType:f}=fJt(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:b}=L5e(e,c,t),{errorBarSpecificAggregate:x,postAggregateCalculates:w,tooltipSummary:C,tooltipTitleWithFieldName:S}=mJt(u,d,h,m,g,f,t,n),E=s,A=b;E[A];const k=b==="x"?"x2":"y2";E[k];const N=b==="x"?"xError":"yError";E[N];const I=b==="x"?"xError2":"yError2";E[I];const T=Nt(E,[typeof A=="symbol"?A:A+"",typeof k=="symbol"?k:k+"",typeof N=="symbol"?N:N+"",typeof I=="symbol"?I:I+""]),{bins:D,timeUnits:L,aggregate:P,groupby:M,encoding:F}=Cre(T,n),R=[...P,...x],j=f!=="raw"?[]:M,H=iq(C,d,F,S);return{transform:[...(r=l.transform)!==null&&r!==void 0?r:[],...D,...L,...R.length===0?[]:[{aggregate:R,groupby:j}],...w],groupby:j,continuousAxisChannelDef:d,continuousAxis:b,encodingWithoutContinuousAxis:F,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:H}}function mJt(e,t,n,r,i,s,a,o){let l=[],u=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,m=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&je(zZt(h,m,a)),m==="stderr"||m==="stdev")l=[{op:m,field:c,as:"extent_"+c},{op:h,field:c,as:"center_"+c}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:"upper_"+c},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:"lower_"+c}],f=[{fieldPrefix:"center_",titlePrefix:E7(h)},{fieldPrefix:"upper_",titlePrefix:m1e(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:m1e(h,m,"-")}],d=!0;else{e.center&&e.extent&&je(UZt(e.extent,a));let g,b,x;m==="ci"?(g="mean",b="ci0",x="ci1"):(g="median",b="q1",x="q3"),l=[{op:b,field:c,as:"lower_"+c},{op:x,field:c,as:"upper_"+c},{op:g,field:c,as:"center_"+c}],f=[{fieldPrefix:"upper_",titlePrefix:ey({field:c,aggregate:x,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:ey({field:c,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:ey({field:c,aggregate:g,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&je(BZt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:"upper_"+c},{calculate:`datum["${c}"]`,as:"lower_"+c}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:"upper_"+c}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:"lower_"+c}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:"lower_"+c}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Sv(Sv(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function m1e(e,t,n){return E7(e)+" "+n+" "+t}const Are="errorband",gJt=["band","borders"],yJt=new N7(Are,W5e);function W5e(e,{config:t}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:o,tooltipEncoding:l}=V5e(e,Are,t),u=a,c=Ere(u,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const m=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),m),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),m)):u.interpolate?je(u1e("interpolate")):u.tension&&je(u1e("tension")),Object.assign(Object.assign({},o),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:l})]})}const H5e={};function _re(e,t,n){const r=new N7(e,t);H5e[e]={normalizer:r,parts:n}}function bJt(){return We(H5e)}_re(i6,z5e,aJt);_re(kre,U5e,uJt);_re(Are,W5e,gJt);const xJt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],G5e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],vJt={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},wJt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},SJt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ev="_vgsid_",CJt={single:{on:"click",fields:[Ev],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Ev],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Tre(e){return!!e&&(e==="legend"||!!e.legend)}function qU(e){return Tre(e)&&js(e)}function $Jt(e){return X7(e)||Dre(e)||Nre(e)}function Nre(e){return"concat"in e}function X7(e){return"vconcat"in e}function Dre(e){return"hconcat"in e}function od(e){return js(e)&&e.step!==void 0}function g1e(e){return e.view||e.width||e.height}const y1e=20,EJt={align:1,bounds:1,center:1,columns:1,spacing:1},kJt=We(EJt);function AJt(e,t,n){var r,i;const s=n[t],a={},{spacing:o,columns:l}=s;o!==void 0&&(a.spacing=o),l!==void 0&&(W7(e)&&!UT(e.facet)||Nre(e))&&(a.columns=l),X7(e)&&(a.columns=1);for(const u of kJt)if(e[u]!==void 0)if(u==="spacing"){const c=e[u];a[u]=qi(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:o,column:(i=c.column)!==null&&i!==void 0?i:o}}else a[u]=e[u];return a}function sq(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function s6(e,t){const n=vk(e,t);return od(n)?n.step:Ire}function vk(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return Xi(r,{step:e.step})}const Ire=20,_Jt={continuousWidth:200,continuousHeight:200,step:Ire},TJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:_Jt,mark:vKt,arc:{},area:{},bar:SKt,circle:{},geoshape:{},image:{},line:{},point:{},rect:CKt,rule:{color:"black"},square:{},text:{color:"black"},tick:$Kt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:NQt,projection:{},legend:wJt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:CJt,style:{},title:{},facet:{spacing:y1e},concat:{spacing:y1e}},nh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],b1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},x1e={blue:nh[0],orange:nh[1],red:nh[2],teal:nh[3],green:nh[4],yellow:nh[5],purple:nh[6],pink:nh[7],brown:nh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function NJt(e={}){return{signals:[{name:"color",value:js(e)?Object.assign(Object.assign({},x1e),e):x1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function DJt(e){return{signals:[{name:"fontSize",value:js(e)?Object.assign(Object.assign({},b1e),e):b1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function IJt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function q5e(e={}){const{color:t,font:n,fontSize:r}=e,i=Nt(e,["color","font","fontSize"]);return uRe({},TJt,n?IJt(n):{},t?NJt(t):{},r?DJt(r):{},i||{})}const OJt=["view",...wRe],RJt=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],FJt=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},xKt);function MJt(e){e=hn(e);for(const t of RJt)delete e[t];if(e.axis)for(const t in e.axis)Wne(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of xJt)delete e.legend[t];if(e.mark){for(const t of Jge)delete e.mark[t];e.mark.tooltip&&js(e.mark.tooltip)&&delete e.mark.tooltip}for(const t of OJt){for(const r of Jge)delete e[t][r];const n=FJt[t];if(n)for(const r of n)delete e[t][r];PJt(e,t)}for(const t of bJt())delete e[t];LJt(e);for(const t in e)js(e[t])&&Tr(e[t])&&delete e[t];return Tr(e)?void 0:e}function LJt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=k5e(e.title);Tr(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),Tr(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),Tr(r)?delete e.title:e.title=r}function PJt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s=Object.assign(Object.assign({},i),e.style[n??t]);Tr(s)||(e.style[n??t]=s),delete e[t]}function Y7(e){return"layer"in e}function BJt(e){return"repeat"in e}function zJt(e){return!It(e.repeat)&&e.repeat.layer}class X5e{map(t,n){return W7(t)?this.mapFacet(t,n):BJt(t)?this.mapRepeat(t,n):Dre(t)?this.mapHConcat(t,n):X7(t)?this.mapVConcat(t,n):Nre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Y7(t))return this.mapLayer(t,n);if(hp(t))return this.mapUnit(t,n);throw new Error(Jne(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=Nt(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(s=>this.map(s,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const jJt={zero:1,center:1,normalize:1};function UJt(e){return e in jJt}const VJt=new Set([bRe,A7,k7,Z5,T7,Gne,qne,_7,xRe,Hne]),WJt=new Set([A7,k7,bRe]);function v1e(e,t){var n,r;const i=t==="x"?"y":"radius",s=e[t],a=e[i];if(tt(s)&&tt(a))if(g0(s)==="quantitative"&&g0(a)==="quantitative"){if(s.stack)return t;if(a.stack)return i;const o=tt(s)&&!!s.aggregate,l=tt(a)&&!!a.aggregate;if(o!==l)return o?t:i;{const u=(n=s.scale)===null||n===void 0?void 0:n.type,c=(r=a.scale)===null||r===void 0?void 0:r.type;if(u&&u!=="linear")return i;if(c&&c!=="linear")return t}}else{if(g0(s)==="quantitative")return t;if(g0(a)==="quantitative")return i}else{if(g0(s)==="quantitative")return t;if(g0(a)==="quantitative")return i}}function HJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Y5e(e,t,n={}){const r=id(e)?e.type:e;if(!VJt.has(r))return null;const i=v1e(t,"x")||v1e(t,"theta");if(!i)return null;const s=t[i],a=tt(s)?Ye(s,{}):void 0;let o=HJt(i),l=t[o],u=tt(l)?Ye(l,{}):void 0;u===a&&(u=void 0,l=void 0,o=void 0);const c=jKt.reduce((d,h)=>{if(h!=="tooltip"&&ty(t,h)){const m=t[h];for(const g of Ii(m)){const b=ad(g);if(b.aggregate)continue;const x=Ye(b,{});(!x||x!==u)&&d.push({channel:h,fieldDef:b})}}return d},[]);let f;if(s.stack!==void 0?MT(s.stack)?f=s.stack?"zero":null:f=s.stack:c.length>0&&WJt.has(r)&&(f="zero"),!f||!UJt(f)||Sre(t)&&c.length===0)return null;if(s.scale&&s.scale.type&&s.scale.type!==Li.LINEAR){if(n.disallowNonLinearStack)return null;je(MZt(s.scale.type))}return qt(t[Td(i)])?(s.stack!==void 0&&je(FZt(i)),null):(tt(s)&&s.aggregate&&!Ft(NKt,s.aggregate)&&je(LZt(s.aggregate)),{groupbyChannel:l?o:void 0,groupbyField:u,fieldChannel:i,impute:s.impute===null?!1:$b(r),stackBy:c,offset:f})}function GJt(e){const{point:t,line:n}=e,r=Nt(e,["point","line"]);return We(r).length>1?r:r.type}function qJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:Rh(e[t],["point","line"])}));return e}function XU(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?js(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?js(t.point)?t.point:{}:void 0}function w1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class XJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(hp(t)){const{mark:r,encoding:i}=t,s=id(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!XU(s,n[s.type],i);case"area":return!!XU(s,n[s.type],i)||!!w1e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{selection:s,projection:a,encoding:o,mark:l}=t,u=Nt(t,["selection","projection","encoding","mark"]),c=id(l)?l:{type:l},f=XU(c,i[c.type],o),d=c.type==="area"&&w1e(c,i[c.type]),h=[Object.assign(Object.assign({},s?{selection:s}:{}),{mark:GJt(Object.assign(Object.assign({},c.type==="area"&&c.opacity===void 0&&c.fillOpacity===void 0?{opacity:.7}:{}),c)),encoding:Rh(o,["shape"])})],m=Y5e(c,o);let g=o;if(m){const{fieldChannel:b,offset:x}=m;g=Object.assign(Object.assign({},o),{[b]:Object.assign(Object.assign({},o[b]),x?{stack:x}:{})})}return d&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},mk(c,["clip","interpolate","tension","tooltip"])),d),encoding:g})),f&&h.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},mk(c,["clip","tooltip"])),f),encoding:g})),r(Object.assign(Object.assign({},u),{layer:h}),Object.assign(Object.assign({},n),{config:qJt(i)}))}}class YJt{constructor(){this.name="RangeStep"}hasMatchingType(t){var n;if(hp(t)&&t.encoding)for(const r of Fu){const i=t.encoding[r];if(i&&qt(i)&&!((n=i==null?void 0:i.scale)===null||n===void 0)&&n.rangeStep)return!0}return!1}run(t){var n;const r={};let i=Object.assign({},t.encoding);for(const s of Fu){const a=Nd(s),o=i[s];if(o&&qt(o)&&!((n=o==null?void 0:o.scale)===null||n===void 0)&&n.rangeStep){const{scale:l}=o,u=Nt(o,["scale"]),c=l,{rangeStep:f}=c,d=Nt(c,["rangeStep"]);r[a]={step:l.rangeStep},je(vZt),i=Object.assign(Object.assign({},i),{[s]:Object.assign(Object.assign({},u),Tr(d)?{}:{scale:d})})}}return Object.assign(Object.assign(Object.assign({},r),t),{encoding:i})}}function KJt(e,t){return t?UT(e)?Z5e(e,t):K5e(e,t):e}function YU(e,t){return t?Z5e(e,t):e}function aq(e,t,n){const r=t[e];if(WQt(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});je(nZt(r.repeat));return}return t}function K5e(e,t){if(e=aq("field",e,t),e!==void 0){if(e===null)return null;if(m5e(e)&&jf(e.sort)){const n=aq("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function S1e(e,t){if(tt(e))return K5e(e,t);{const n=aq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function C1e(e,t){if(qt(e)){const n=S1e(e,t);if(n)return n;if(gre(e))return{condition:e.condition}}else{if(yre(e)){const n=S1e(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});{const{condition:r}=e;return Nt(e,["condition"])}}return e}}function Z5e(e,t){const n={};for(const r in e)if(O1(e,r)){const i=e[r];if(It(i))n[r]=i.map(s=>C1e(s,t)).filter(s=>s);else{const s=C1e(i,t);s!==void 0&&(n[r]=s)}}return n}class ZJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(hp(t)){const{encoding:n,mark:r}=t;if(r==="line")for(const i of BKt){const s=Ab(i),a=n[s];if(n[i]&&(tt(a)&&!oo(a.bin)||rg(a)))return!0}}return!1}run(t,n,r){const{encoding:i}=t;return je(bZt(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:"rule"}),n)}}class QJt extends X5e{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[oJt,cJt,yJt,new XJt,new ZJt,new YJt]}map(t,n){if(hp(t)){const r=ty(t.encoding,Fh),i=ty(t.encoding,Mh),s=ty(t.encoding,D7);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Object.assign(Object.assign({},t),{encoding:YU(t.encoding,n.repeater)});if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const o of this.nonFacetUnitNormalizers)if(o.hasMatchingType(s,n.config))return o.run(s,n,a);return s}mapRepeat(t,n){return zJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,s=Nt(t,["repeat","spec"]),{row:a,column:o,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return a||o?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),o?{column:o}:{}),spec:{repeat:{layer:l},spec:i}}),n):Object.assign(Object.assign({},s),{layer:l.map(f=>{const d=Object.assign(Object.assign({},u),{layer:f}),h=(i.name||"")+c+`child__layer_${Qr(f)}`,m=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:s,data:a}=t,o=Nt(t,["repeat","spec","data"]);!It(i)&&t.columns&&(t=Rh(t,["columns"]),je(s1e("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=n,f=!It(i)&&i.row||[u?u.row:null],d=!It(i)&&i.column||[u?u.column:null],h=It(i)&&i||[u?u.repeat:null];for(const g of h)for(const b of f)for(const x of d){const w={repeat:g,row:b,column:x,layer:u.layer},C=(s.name||"")+c+"child__"+(It(i)?`${Qr(g)}`:(i.row?`row_${Qr(b)}`:"")+(i.column?`column_${Qr(x)}`:"")),S=this.map(s,Object.assign(Object.assign({},n),{repeater:w,repeaterPrefix:C}));S.name=C,l.push(Rh(S,["data"]))}const m=It(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=s.data)!==null&&r!==void 0?r:a,align:"all"},o),{columns:m,concat:l})}mapFacet(t,n){const{facet:r}=t;return UT(r)&&t.columns&&(t=Rh(t,["columns"]),je(s1e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:a,config:o}=n,l=E1e({parentProjection:a,projection:i}),u=$1e({parentEncoding:s,encoding:YU(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),l?{projection:l}:{}),u?{encoding:u}:{}),{config:o})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:s,facet:a}=r,o=Nt(r,["row","column","facet"]),{mark:l,width:u,projection:c,height:f,view:d,selection:h,encoding:m}=t,g=Nt(t,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:b,layout:x}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),w=YU(o,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),x),{facet:b,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:l,encoding:w}),h?{selection:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:s,facet:a}=t;if(i||s){a&&je(yZt([...i?[Fh]:[],...s?[Mh]:[]]));const o={},l={};for(const u of[Fh,Mh]){const c=t[u];if(c){const{align:f,center:d,spacing:h,columns:m}=c,g=Nt(c,["align","center","spacing","columns"]);o[u]=g;for(const b of["align","center","spacing"])c[b]!==void 0&&(l[b]=(r=l[b])!==null&&r!==void 0?r:{},l[b][u]=c[b])}}return{facetMapping:o,layout:l}}else{const{align:o,center:l,spacing:u,columns:c}=a,f=Nt(a,["align","center","spacing","columns"]);return{facetMapping:KJt(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},o?{align:o}:{}),l?{center:l}:{}),u?{spacing:u}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,s=Nt(n,["parentEncoding","parentProjection"]);const{encoding:a,projection:o}=t,l=Nt(t,["encoding","projection"]),u=Object.assign(Object.assign({},s),{parentEncoding:$1e({parentEncoding:r,encoding:a}),parentProjection:E1e({parentProjection:i,projection:o})});return super.mapLayer(l,u)}}function $1e(e){const{parentEncoding:t,encoding:n}=e;if(t&&n){const i=We(t).reduce((s,a)=>(n[a]&&s.push(a),s),[]);i.length>0&&je(oZt(i))}const r=Object.assign(Object.assign({},t??{}),n??{});return Tr(r)?void 0:r}function E1e(e){const{parentProjection:t,projection:n}=e;return t&&n&&je(lZt({parentProjection:t,projection:n})),n??t}function Q5e(e,t){t===void 0&&(t=q5e(e.config));const n=een(e,t),{width:r,height:i}=e,s=ten(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}const JJt=new QJt;function een(e,t={}){return JJt.map(e,{config:t})}function k1e(e){return cn(e)?{type:e}:e??{}}function ten(e,t,n){let{width:r,height:i}=t;const s=hp(e)||Y7(e),a={};s?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(je(t1e("width")),r=void 0),i=="container"&&(je(t1e("height")),i=void 0));const o=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?k1e(n.autosize):{}),k1e(e.autosize));if(o.type==="fit"&&!s&&(je(YKt),o.type="pad"),r=="container"&&!(o.type=="fit"||o.type=="fit-x")&&je(n1e("width")),i=="container"&&!(o.type=="fit"||o.type=="fit-y")&&je(n1e("height")),!LT(o,{type:"pad"}))return o}function nen(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function ren(e){return e?`fit-${P7(e)}`:"fit"}const ien=["background","padding"];function A1e(e){return ien.reduce((t,n)=>(e&&e[n]!==void 0&&(t[n]=e[n]),t),{})}class bp{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new bp(hn(this.explicit),hn(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return Xi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,n){n.value!==void 0&&this.set(t,n.value,n.explicit)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,n){n.explicit[t]!==void 0?this.set(t,n.explicit[t],!0):n.implicit[t]!==void 0&&this.set(t,n.implicit[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of We(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function R1(e){return{explicit:!0,value:e}}function Sl(e){return{explicit:!1,value:e}}function J5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:K7(t,n,r,i)}}function K7(e,t,n,r){return e.explicit&&t.explicit&&je(_Zt(n,r,e.value,t.value)),e}function Cm(e,t,n,r,i=K7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:LT(e.value,t.value)?e:i(e,t,n,r)}class sen extends bp{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function wk(e){return"url"in e}function a6(e){return"values"in e}function e6e(e){return"name"in e&&!wk(e)&&!a6(e)&&!ny(e)}function ny(e){return e&&(t6e(e)||n6e(e)||Ore(e))}function t6e(e){return"sequence"in e}function n6e(e){return"sphere"in e}function Ore(e){return"graticule"in e}const $a="main",o6="raw";function r6e(e){return"filter"in e}function aen(e){return(e==null?void 0:e.stop)!==void 0}function oen(e){return"lookup"in e}function len(e){return"data"in e}function uen(e){return"selection"in e}function cen(e){return"pivot"in e}function fen(e){return"density"in e}function den(e){return"quantile"in e}function hen(e){return"regression"in e}function pen(e){return"loess"in e}function men(e){return"sample"in e}function gen(e){return"window"in e}function yen(e){return"joinaggregate"in e}function ben(e){return"flatten"in e}function xen(e){return"calculate"in e}function ven(e){return"bin"in e}function wen(e){return"impute"in e}function Sen(e){return"timeUnit"in e}function Cen(e){return"aggregate"in e}function $en(e){return"stack"in e}function Een(e){return"fold"in e}function ken(e){return e.map(t=>r6e(t)?{filter:SO(t.filter,pQt)}:t)}const Aen="view",l6="[",u6="]",i6e="{",s6e="}",_en=":",a6e=",",Ten="@",Nen=">",Den=/[[\]{}]/,Ien={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let o6e,l6e;function zS(e,t,n){return o6e=t||Aen,l6e=Ien,u6e(e.trim()).map(oq)}function Oen(e){return l6e[e]}function Q$(e,t,n,r,i){const s=e.length;let a=0,o;for(;t<s;++t){if(o=e[t],!a&&o===n)return t;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return t}function u6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Q$(e,i,a6e,l6+i6e,u6+s6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function oq(e){return e[0]==="["?Ren(e):Fen(e)}function Ren(e){const t=e.length;let n=1,r;if(n=Q$(e,n,u6,l6,u6),n===t)throw"Empty between selector: "+e;if(r=u6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Nen)throw"Expected '>' after between selector: "+e;r=r.map(oq);const i=oq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Fen(e){const t={source:o6e},n=[];let r=[0,0],i=0,s=0,a=e.length,o=0,l,u;if(e[a-1]===s6e){if(o=e.lastIndexOf(i6e),o>=0){try{r=Men(e.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),a=e.length}else throw"Unmatched right brace: "+e;o=0}if(!a)throw e;if(e[0]===Ten&&(i=++o),l=Q$(e,o,_en),l<a&&(n.push(e.substring(s,l).trim()),s=o=++l),o=Q$(e,o,l6),o===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,o).trim()),u=[],s=++o,s===a)throw"Unmatched left bracket: "+e;for(;o<a;){if(o=Q$(e,o,u6),o===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,o).trim()),o<a-1&&e[++o]!==l6)throw"Expected left bracket: "+e;s=++o}if(!(a=n.length)||Den.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Oen(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Men(e){const t=e.split(a6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function HT(e,t,n,r){const i=gre(t)&&t.condition,s=r(t);if(i){const o=Ii(i).map(l=>{const u=r(l),c=VQt(l)?F6e(e,l.selection):h6(e,l.test);return Object.assign({test:c},u)});return{[n]:[...o,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Rre(e,t="text"){const n=e.encoding[t];return HT(e,n,t,r=>Z7(r,e.config))}function Z7(e,t,n="datum"){if(e){if(ep(e))return ki(e.value);if(qt(e)){const{format:r,formatType:i}=t6(e);return dre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function c6e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,a=n.tooltip;if(It(a))return{tooltip:_1e({tooltip:a},s,i,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return HT(e,a,"tooltip",l=>{const u=Z7(l,i,o);if(u)return u;if(l===null)return;let c=Jn("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),cn(c))return{value:c};if(js(c))return c.content==="encoding"?_1e(n,s,i,t):{signal:o}})}}function f6e(e,t,n,{reactiveGeom:r}={}){const i={},s=r?"datum.datum":"datum",a=[];function o(u,c){const f=Ab(c),d=Vl(u)?u:Object.assign(Object.assign({},u),{type:e[f].type}),h=Ii(ey(d,n,{allowDisabling:!1})).join(", ");let m;if(sd(c)){const g=c==="x"?"x2":"y2",b=ad(e[g]);if(oo(d.bin)&&b){const x=Ye(d,{expr:s}),w=Ye(b,{expr:s}),{format:C,formatType:S}=t6(d);m=U7(x,w,C,S,n),i[g]=!0}else if(t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:x,formatType:w}=t6(d);m=dre({fieldOrDatumDef:d,format:x,formatType:w,expr:s,config:n,normalizeStack:!0}).signal}}m=m??Z7(d,n,s).signal,a.push({channel:c,key:h,value:m})}$re(e,(u,c)=>{tt(u)?o(u,c):H7(u)&&o(u.condition,c)});const l={};for(const{channel:u,key:c,value:f}of a)!i[u]&&!l[c]&&(l[On(c)]=f);return l}function _1e(e,t,n,{reactiveGeom:r}={}){const i=f6e(e,t,n,{reactiveGeom:r}),s=hRe(i).map(({key:a,value:o})=>`${a}: ${o}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Len(e){const{markDef:t,config:n}=e,r=Jn("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),Pen(e)),Ben(e))}function Pen(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Jn("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in cQt?{}:{ariaRoleDescription:{value:t}}}function Ben(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return HT(e,s,"description",l=>Z7(l,e.config));const a=Jn("description",n,r);if(a!=null)return{description:ki(a)};if(r.aria===!1)return{};const o=f6e(t,i,r);if(!Tr(o))return{description:{signal:hRe(o).map(({key:l,value:u})=>`${l} + ": " + (${u})`).join(' + "; " + ')}}}function _s(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:a}=n;let{defaultRef:o,defaultValue:l}=n;o===void 0&&(l=l??Jn(e,r,s,{vgChannel:a,ignoreVgConfig:!0}),l!==void 0&&(o=ki(l)));const u=i[e];return HT(t,u,a??e,c=>a5e({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:o}))}function d6e(e,t={filled:void 0}){var n,r,i,s;const{markDef:a,encoding:o,config:l}=e,{type:u}=a,c=(n=t.filled)!==null&&n!==void 0?n:Jn("filled",a,l),f=Ft(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,d=(i=(r=Jn(c===!0?"color":void 0,a,l,{vgChannel:"fill"}))!==null&&r!==void 0?r:l.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,h=(s=Jn(c===!1?"color":void 0,a,l,{vgChannel:"stroke"}))!==null&&s!==void 0?s:l.mark[c===!1&&"color"],m=c?"fill":"stroke",g=Object.assign(Object.assign({},d?{fill:ki(d)}:{}),h?{stroke:ki(h)}:{});return a.color&&(c?a.fill:a.stroke)&&je(MRe("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),_s("color",e,{vgChannel:m,defaultValue:c?d:h})),_s("fill",e,{defaultValue:o.fill?d:void 0})),_s("stroke",e,{defaultValue:o.stroke?h:void 0}))}function Sk(e,t){const n=zKt(e),r=t[n];if(r)return r}function Ia(e,t,{defaultPos:n,vgChannel:r,isMidPoint:i}){const{encoding:s,markDef:a,config:o,stack:l}=t,u=s[e],c=s[Td(e)],f=t.scaleName(e),d=t.getScaleComponent(e),h=Sk(e,a),m=Fre({model:t,defaultPos:n,channel:e,scaleName:f,scale:d}),g=!u&&sd(e)&&(s.latitude||s.longitude)?{field:t.getName(e)}:zen({channel:e,channelDef:u,channel2Def:c,markDef:a,config:o,isMidPoint:i,scaleName:f,scale:d,stack:l,offset:h,defaultRef:m});return g?{[r||e]:g}:void 0}function zen(e){const{channel:t,channelDef:n,isMidPoint:r,scaleName:i,stack:s,offset:a,markDef:o,config:l}=e;if(qt(n)&&s&&t===s.fieldChannel){if(tt(n)){const u=VT({channel:t,fieldDef:n,isMidPoint:r,markDef:o,stack:s,config:l});if(u!==void 0)return e6({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:u,offset:a})}return J1(n,i,{suffix:"end"},{offset:a})}return cre(e)}function Fre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:a}=e;return()=>{const o=Ab(n),l=Sm(n),u=Jn(n,s,a,{vgChannel:l});if(u!==void 0)return Z$(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Ft([Li.LOG,Li.TIME,Li.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return o==="y"?{field:{group:"height"}}:{value:0};switch(o){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[Nd(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const jen={left:"x",center:"xc",right:"x2"},Uen={top:"y",middle:"yc",bottom:"y2"};function h6e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Sm(e);const s=Jn(e==="x"?"align":"baseline",t,n);return e==="x"?jen[s||(r==="top"?"left":"center")]:Uen[s||r]}function c6(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?p6e(e,t,{defaultPos:n,defaultPos2:r}):Ia(e,t,{defaultPos:n})}function p6e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,a=Td(e),o=Nd(e),l=Ven(t,r,a),u=l[o]?h6e(e,i,s):Sm(e);return Object.assign(Object.assign({},Ia(e,t,{defaultPos:n,vgChannel:u})),l)}function Ven(e,t,n){const{encoding:r,mark:i,markDef:s,stack:a,config:o}=e,l=Ab(n),u=Nd(n),c=Sm(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),m=n in r||n in s?Sk(n,e.markDef):Sk(l,e.markDef);if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude))return{[c]:{field:e.getName(n)}};const g=Wen({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:o,scaleName:d,scale:h,stack:a,offset:m,defaultRef:void 0});return g!==void 0?{[c]:g}:PD(n,s)||PD(n,{[n]:r6(n,s,o.style),[u]:r6(u,s,o.style)})||PD(n,o[i])||PD(n,o.mark)||{[c]:Fre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Wen({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:o,offset:l,defaultRef:u}){return qt(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?J1(t,s,{suffix:"start"},{offset:l}):cre({channel:e,channelDef:n,scaleName:s,scale:a,stack:o,markDef:r,config:i,offset:l,defaultRef:u})}function PD(e,t){const n=Nd(e),r=Sm(e);if(t[r]!==void 0)return{[r]:Z$(e,t[r])};if(t[e]!==void 0)return{[r]:Z$(e,t[e])};if(t[n])return{[n]:Z$(e,t[n])}}function $m(e,t,n){var r,i,s,a;const{config:o,encoding:l,markDef:u,stack:c}=e,f=Td(t),d=Nd(t),h=l[t],m=l[f],g=e.getScaleComponent(t),b=g?g.get("type"):void 0,x=e.scaleName(t),w=u.orient,C=(i=(r=l[d])!==null&&r!==void 0?r:l.size)!==null&&i!==void 0?i:Jn("size",u,o,{vgChannel:d}),S=n==="bar"&&(t==="x"?w==="vertical":w==="horizontal");if(tt(h)&&(Rr(h.bin)||oo(h.bin)||h.timeUnit&&!m)&&!C&&!cl(b)){const E=VT({channel:t,fieldDef:h,stack:c,markDef:u,config:o}),A=(s=e.component.axes[t])===null||s===void 0?void 0:s[0],k=(a=A==null?void 0:A.get("translate"))!==null&&a!==void 0?a:.5;return qen({fieldDef:h,fieldDef2:m,channel:t,markDef:u,scaleName:x,band:E,axisTranslate:k,spacing:sd(t)?Jn("binSpacing",u,o):void 0,reverse:g.get("reverse"),config:o})}else return(qt(h)&&cl(b)||S)&&!m?Gen(n,h,t,e):p6e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Hen(e,t,n,r,i,s){if(r){const l=r.get("type");if(l==="point"||l==="band"){if(i[e].discreteBandSize!==void 0)return{value:i[e].discreteBandSize};if(l===Li.POINT){const u=r.get("range");return ng(u)&&qi(u.step)?{value:u.step-2}:{value:Ire-2}}else return{scale:n,band:s}}else return{value:i[e].continuousBandSize}}const a=s6(i.view,t),o=Xi(i[e].discreteBandSize,a-2);return o!==void 0?{value:o}:void 0}function Gen(e,t,n,r){var i;const{markDef:s,encoding:a,config:o,stack:l}=r,u=s.orient,c=r.scaleName(n),f=r.getScaleComponent(n),d=Nd(n),h=Td(n),m=u==="horizontal"&&n==="y"||u==="vertical"&&n==="x",g=Jn(m?"size":d,s,o,{vgChannel:d});let b;(a.size||g!==void 0)&&(m?b=_s("size",r,{vgChannel:d,defaultValue:g}):je(EZt(s.type)));const x=(i=qt(t)?VT({channel:n,fieldDef:t,markDef:s,stack:l,config:o}):void 0)!==null&&i!==void 0?i:1;b=b||{[d]:Hen(e,d,c,f,o,x)};const w=(f==null?void 0:f.get("type"))!=="band"||!("band"in b[d]),C=h6e(n,s,o,w?"middle":"top"),S=Sk(n,s),E=cre({channel:n,channelDef:t,markDef:s,config:o,scaleName:c,scale:f,stack:l,offset:S,defaultRef:Fre({model:r,defaultPos:"mid",channel:n,scaleName:c,scale:f}),band:w?.5:(1-x)/2});if(d)return Object.assign({[C]:E},b);{const A=Sm(h),k=b[d],N=S?Object.assign(Object.assign({},k),{offset:S}):k;return{[C]:E,[A]:It(E)?[E[0],Object.assign(Object.assign({},E[1]),{offset:N})]:Object.assign(Object.assign({},E),{offset:N})}}}function T3(e,t,n,r,i){if(ERe(e))return 0;const s=e==="x"||e==="y2"?-t/2:t/2;if(Vt(n)){const a=xk(i);return{signal:`${n.signal} ? ${r-s}${a?"-"+a:""} : ${r+s}${a?"+"+a:""}`}}else{if(Vt(i)){const a=r+(n?-s:s);return{signal:`${a||""}${n?" - ":a?" + ":""}${i.signal}`}}return i=i||0,r+(n?-i-s:+i+s)}}function qen({fieldDef:e,fieldDef2:t,channel:n,band:r,scaleName:i,markDef:s,spacing:a=0,axisTranslate:o,reverse:l,config:u}){const c=Td(n),f=Sm(n),d=Sm(c),h=Sk(n,s);if(Rr(e.bin)||e.timeUnit)return{[d]:T1e({channel:n,fieldDef:e,scaleName:i,markDef:s,band:(1-r)/2,offset:T3(c,a,l,o,h),config:u}),[f]:T1e({channel:n,fieldDef:e,scaleName:i,markDef:s,band:1-(1-r)/2,offset:T3(n,a,l,o,h),config:u})};if(oo(e.bin)){const m=J1(e,i,{},{offset:T3(c,a,l,o,h)});if(tt(t))return{[d]:m,[f]:J1(t,i,{},{offset:T3(n,a,l,o,h)})};if(jT(e.bin)&&e.bin.step)return{[d]:m,[f]:{signal:`scale("${i}", ${Ye(e,{expr:"datum"})} + ${e.bin.step})`,offset:T3(n,a,l,o,h)}}}je(BRe(c))}function T1e({channel:e,fieldDef:t,scaleName:n,markDef:r,band:i,offset:s,config:a}){const o=e6({scaleName:n,fieldOrDatumDef:t,band:i,offset:s});return s5e({fieldDef:t,channel:e,markDef:r,ref:o,config:a})}const Xen=new Set(["aria"]);function Uu(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?d6e(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yen(e.markDef,t)),N1e(e,"fill",n)),N1e(e,"stroke",r)),_s("opacity",e)),_s("fillOpacity",e)),_s("strokeOpacity",e)),_s("strokeWidth",e)),_s("strokeDash",e)),c6e(e)),Rre(e,"href")),Len(e))}function N1e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Jn("invalid",s,r)==="hide"&&n&&!$b(i)){const o=Ken(e,{invalid:!0,channels:B7});if(o)return{[t]:[{test:o,value:null},...Ii(n)]}}return n?{[t]:n}:{}}function Yen(e,t){return uQt.reduce((n,r)=>(!Xen.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ki(e[r])),n),{})}function Ken(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,a)=>{const o=e.getScaleComponent(a);if(o){const l=o.get("type"),u=e.vgField(a,{expr:"datum"});u&&Mu(l)&&(s[u]=!0)}return s},{}),i=We(r);if(i.length>0){const s=t?"||":"&&";return i.map(a=>fre(a,t)).join(` ${s} `)}}function Mre(e){const{config:t,markDef:n}=e;if(Jn("invalid",n,t)){const i=Zen(e,{channels:Fu});if(i)return{defined:{signal:i}}}return{}}function Zen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,a)=>{const o=e.getScaleComponent(a);if(o){const l=o.get("type"),u=e.vgField(a,{expr:"datum"});u&&Mu(l)&&(s[u]=!0)}return s},{}),i=We(r);if(i.length>0){const s=t?"||":"&&";return i.map(a=>fre(a,t)).join(` ${s} `)}}function D1e(e,t){if(t!==void 0)return{[e]:ki(t)}}const KU="voronoi",m6e={has:e=>e.type!=="interval"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(KU)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if($b(s))return je(ZKt(s)),n;const a={name:e.getName(KU),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},c6e(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((u,c)=>{var f;const d=(f=u.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?o=c:d.indexOf(KU)>=0&&(l=!0)}),l||n.splice(o+1,0,a),n}};class wr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.indexOf(t)>-1){console.warn("Attempt to add the same child twice.");return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class go extends wr{constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${oKt()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class Uf extends wr{constructor(t,n){super(t),this.formula=n}clone(){return new Uf(null,hn(this.formula))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{const{field:o,timeUnit:l}=s,u=di(n)?n.encoding[Td(a)]:void 0,c=di(n)&&mre(a,s,u,n.stack,n.markDef,n.config);if(l){const f=Ye(s,{forAs:!0});i[Mn({as:f,field:o,timeUnit:l})]=Object.assign({as:f,field:o,timeUnit:l},c?{band:!0}:{})}return i},{});return Tr(r)?null:new Uf(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,s=Nt(r,["timeUnit"]),a=Eo(i),o=Object.assign(Object.assign({},s),{timeUnit:a});return new Uf(t,{[Mn(o)]:o})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)(!this.formula[n]||t.formula[n].band)&&(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(G0(this.formula).map(t=>t.as))}dependentFields(){return new Set(G0(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${Mn(this.formula)}`}assemble(){const t=[];for(const n of G0(this.formula)){const{field:r,as:i,timeUnit:s}=n,a=Eo(s),{unit:o,utc:l}=a,u=Nt(a,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:vm(r),type:"timeunit"},o?{units:rre(o)}:{}),l?{timezone:"utc"}:{}),u),{as:[i,`${i}_end`]}))}return t}}const GT="_tuple_fields";class Qen{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const Jen={has:()=>!0,parse:(e,t,n)=>{var r,i,s;const a=t.name,o=(r=t.project)!==null&&r!==void 0?r:t.project=new Qen,l={},u={},c=new Set,f=(d,h)=>{const m=h==="visual"?d.channel:d.field;let g=Qr(`${a}_${m}`);for(let b=1;c.has(g);b++)g=Qr(`${a}_${m}_${b}`);return c.add(g),{[h]:g}};if(!n.fields&&!n.encodings){const d=e.config.selection[n.type];if(n.init)for(const h of Ii(n.init))for(const m of We(h))PKt(m)?(n.encodings||(n.encodings=[])).push(m):n.type==="interval"?(je('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=d.encodings):(n.fields||(n.fields=[])).push(m);else n.encodings=d.encodings,n.fields=d.fields}for(const d of(i=n.fields)!==null&&i!==void 0?i:[]){const h={type:"E",field:d};h.signals=Object.assign({},f(h,"data")),o.items.push(h),o.hasField[d]=h}for(const d of(s=n.encodings)!==null&&s!==void 0?s:[]){const h=e.fieldDef(d);if(h){let m=h.field;if(h.aggregate){je(KKt(d,h.aggregate));continue}else if(!m){je(i1e(d));continue}if(h.timeUnit){m=e.vgField(d);const g={timeUnit:h.timeUnit,as:m,field:h.field};u[Mn(g)]=g}if(!l[m]){let g="E";if(t.type==="interval"){const x=e.getScaleComponent(d).get("type");Mu(x)&&(g="R")}else h.bin&&(g="R-RE");const b={field:m,channel:d,type:g};b.signals=Object.assign(Object.assign({},f(b,"data")),f(b,"visual")),o.items.push(l[m]=b),o.hasField[m]=o.hasChannel[d]=l[m]}}else je(i1e(d))}if(n.init){const d=h=>o.items.map(m=>h[m.channel]!==void 0?h[m.channel]:h[m.field]);if(n.type==="interval")t.init=d(n.init);else{const h=Ii(n.init);t.init=h.map(d)}}Tr(u)||(o.timeUnit=new Uf(null,u))},signals:(e,t,n)=>{const r=t.name+GT;return n.filter(s=>s.name===r).length>0?n:n.concat({name:r,value:t.project.items.map(s=>{const{signals:a,hasLegend:o}=s,l=Nt(s,["signals","hasLegend"]);return l.field=vm(l.field),l})})}},g6e={has:e=>e.type==="single"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Tre(e.bind),parse:(e,t,n,r)=>{r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,a=t.init&&t.init[0],o=m6e.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{var c,f;const d=Qr(`${r}_${l.field}`);n.filter(m=>m.name===d).length||n.unshift(Object.assign(Object.assign({name:d},a?{init:kv(a[u])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${On(l.field)}] : null`}]:[],bind:(f=(c=s[l.field])!==null&&c!==void 0?c:s[l.channel])!==null&&f!==void 0?f:s}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(u=>u.name===r+ld)[0],a=r+GT,o=i.items.map(u=>Qr(`${r}_${u.field}`)),l=o.map(u=>`${u} !== null`).join(" && ");return o.length&&(s.update=`${l} ? {fields: ${a}, values: [${o.join(", ")}]} : null`),delete s.value,delete s.on,n}},f6="_toggle",y6e={has:e=>e.type==="multi"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+f6,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ld,r=t.name+f6;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Lh(e)}}, `)+`${r} ? ${n} : null`}},etn={has:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t,n)=>{n.clear&&(t.clear=cn(n.clear)?zS(n.clear,"scope"):n.clear)},topLevelSignals:(e,t,n)=>{if(g6e.has(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Qr(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(a=>a.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const a=n.findIndex(o=>o.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ld);r(i,"null"),y6e.has(t)&&(i=n.findIndex(s=>s.name===t.name+f6),r(i,"false"))}return n}},Em={has:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!tg(i))continue;const s=e.getScaleComponent(i),a=s?s.get("type"):void 0;if(!s||!Mu(a)){je(JKt);continue}const o={selection:t.name,field:r.field};s.set("selectionExtent",o,!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(o=>o.name===a.signals.data).length===0);if(!e.parent||uq(e)||r.length===0)return n;const i=n.filter(a=>a.name===t.name)[0];let s=i.update;if(s.indexOf(k6e)>=0)i.update=`{${r.map(a=>`${On(a.field)}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const o=`${On(a.field)}: ${a.signals.data}`;s.indexOf(o)<0&&(s=`${s.substring(0,s.length-1)}, ${o}}`)}i.update=s}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!uq(e))for(const r of t.scales){const i=n.filter(s=>s.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function lq(e,t){return`domain(${On(e.scaleName(t))})`}function uq(e){var t;return e.parent&&HS(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:uq(e.parent.parent))}const b6e={has:e=>{const t=e.resolve==="global"&&e.bind&&Tre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ev;return t&&!n&&je(eZt),t&&n},parse:(e,t,n,r)=>{var i;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Ii((i=l.filter)!==null&&i!==void 0?i:[]),l.filter.indexOf(o)<0&&l.filter.push(o)}const s=qU(t.bind)?t.bind.legend:"click",a=cn(s)?zS(s,"view"):Ii(s);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=qU(t.bind)&&t.bind.legend,s=a=>o=>{const l=hn(o);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const o=`${Qr(a.field)}_legend`,l=`${r}_${o}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${o}_symbols`)).concat(i.merge.map(s(`${o}_labels`))).concat(i.merge.map(s(`${o}_entries`)));n.unshift(Object.assign(Object.assign({name:l},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ld),a=r+GT,o=i.items.filter(d=>d.hasLegend).map(d=>Qr(`${r}_${Qr(d.field)}_legend`)),u=`${o.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?s.on.push({events:o.map(d=>({signal:d})),update:u}):o.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(d=>d.name===r+f6),f=qU(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function ttn(e,t,n){var r;const i=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;_b(e,s=>{var a,o;const l=(a=s.project.hasField[i])!==null&&a!==void 0?a:s.project.hasChannel[t];if(l&&b6e.has(s)){const u=(o=n.get("selections"))!==null&&o!==void 0?o:[];u.push(s.name),n.set("selections",u,!1),l.hasLegend=!0}})}const x6e="_translate_anchor",v6e="_translate_delta",ntn={has:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Em.has(t),s=r+x6e,{x:a,y:o}=t.project.hasChannel;let l=zS(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+J$,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?", extent_x: "+(i?lq(e,si):`slice(${a.signals.visual})`):"")+(o!==void 0?", extent_y: "+(i?lq(e,os):`slice(${o.signals.visual})`):"")+"}"}]},{name:r+v6e,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&I1e(e,t,a,"width",n),o!==void 0&&I1e(e,t,o,"height",n),n}};function I1e(e,t,n,r,i){var s;const a=t.name,o=a+x6e,l=a+v6e,u=n.channel,c=Em.has(t),f=i.filter(S=>S.name===n.signals[c?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(u),m=h.get("type"),g=c&&u===si?"-":"",b=`${o}.extent_${u}`,x=`${g}${l}.${u} / `+(c?`${d}`:`span(${b})`),C=`${c?m==="log"?"panLog":m==="pow"?"panPow":"panLinear":"panLinear"}(${b}, ${x}`+(c&&m==="pow"?`, ${(s=h.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";f.on.push({events:{signal:l},update:c?C:`clampRange(${C}, 0, ${d})`})}const w6e="_zoom_anchor",S6e="_zoom_delta",rtn={has:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Em.has(t),s=r+S6e,{x:a,y:o}=t.project.hasChannel,l=On(e.scaleName(si)),u=On(e.scaleName(os));let c=zS(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+J$,f))),n.push({name:r+w6e,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&O1e(e,t,a,"width",n),o!==void 0&&O1e(e,t,o,"height",n),n}};function O1e(e,t,n,r,i){var s;const a=t.name,o=n.channel,l=Em.has(t),u=i.filter(w=>w.name===n.signals[l?"data":"visual"])[0],c=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(o),d=f.get("type"),h=l?lq(e,o):u.name,m=a+S6e,g=`${a}${w6e}.${o}`,x=`${l?d==="log"?"zoomLog":d==="pow"?"zoomPow":"zoomLinear":"zoomLinear"}(${h}, ${g}, ${m}`+(l&&d==="pow"?`, ${(s=f.get("exponent"))!==null&&s!==void 0?s:1}`:"")+")";u.on.push({events:{signal:m},update:l?x:`clampRange(${x}, 0, ${c})`})}const itn=[Jen,y6e,Em,b6e,ntn,rtn,g6e,m6e,etn];function Q7(e,t){for(const n of itn)n.has(e)&&t(n)}function kv(e,t=!0,n=BYt){if(It(e)){const r=e.map(i=>kv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(LS(e))return n(t?bk(e):JZt(e));return t?n(JSON.stringify(e)):e}function stn(e,t){return _b(e,(n,r)=>{const i=n.name;let s=r.modifyExpr(e,n);t.push(...r.signals(e,n)),Q7(n,a=>{a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(s=a.modifyExpr(e,n,s))}),t.push({name:i+mtn,on:[{events:{signal:n.name+ld},update:`modify(${On(n.name+By)}, ${s})`}]})}),Lre(t)}function atn(e,t){if(e.component.selection&&We(e.component.selection).length){const n=On(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:zS("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Lre(t)}function otn(e,t){let n=!1;return _b(e,(r,i)=>{const s=r.name,a=On(s+By);if(t.filter(l=>l.name===s).length===0){const l=r.resolve==="global"?"union":r.resolve,u=r.type==="multi"?", true)":")";t.push({name:r.name,update:`${k6e}(${a}, ${On(l)}${u}`})}n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),Q7(r,l=>{l.topLevelSignals&&(t=l.topLevelSignals(e,r,t))})}),n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),Lre(t)}function ltn(e,t){const n=[...t];return _b(e,r=>{const i={name:r.name+By};if(r.init){const a=r.project.items.map(l=>{const{signals:u}=l;return Nt(l,["signals"])}),o=r.init.map(l=>kv(l,!1));i.values=r.type==="interval"?[{unit:Lh(e,{escape:!1}),fields:a,values:o}]:o.map(l=>({unit:Lh(e,{escape:!1}),fields:a,values:l}))}n.filter(a=>a.name===r.name+By).length||n.push(i)}),n}function C6e(e,t){return _b(e,(n,r)=>{t=r.marks?r.marks(e,n,t):t,Q7(n,i=>{i.marks&&(t=i.marks(e,n,t))})}),t}function utn(e,t){for(const n of e.children)di(n)&&(t=C6e(n,t));return t}function ctn(e,t){const n=t.selection,r=e.getSelectionComponent(n,Qr(n));return{signal:M6e(r,t)}}function Lre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const J$="_brush",cq="_scale_trigger",ftn={signals:(e,t)=>{const n=t.name,r=n+GT,i=Em.has(t),s=[],a=[],o=[];if(t.translate&&!i){const c=`!event.item || event.item.mark.name !== ${On(n+J$)}`;$6e(t,(f,d)=>{var h;const m=Ii((h=d.between[0].filter)!==null&&h!==void 0?h:d.between[0].filter=[]);return m.indexOf(c)<0&&m.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==si&&d!==os){je("Interval selections only support x and y encoding channels.");return}const h=t.init?t.init[f]:null,m=dtn(e,t,c,h),g=c.signals.data,b=c.signals.visual,x=On(e.scaleName(d)),w=e.getScaleComponent(d).get("type"),C=Mu(w)?"+":"";s.push(...m),a.push(g),o.push({scaleName:e.scaleName(d),expr:`(!isArray(${g}) || (${C}invert(${x}, ${b})[0] === ${C}${g}[0] && ${C}invert(${x}, ${b})[1] === ${C}${g}[1]))`})}),i||s.push({name:n+cq,value:{},on:[{events:o.map(c=>({scale:c.scaleName})),update:o.map(c=>c.expr).join(" && ")+` ? ${n+cq} : {}`}]});const l=t.init,u=`unit: ${Lh(e)}, fields: ${r}, values`;return s.concat(Object.assign(Object.assign({name:n+ld},l?{init:`{${u}: ${kv(l)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+` ? {${u}: [${a}]} : null`}]}))},modifyExpr:(e,t)=>t.name+ld+", "+(t.resolve==="global"?"true":`{unit: ${Lh(e)}}`),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,a=i&&i.signals.visual,o=s&&s.signals.visual,l=`data(${On(t.name+By)})`;if(Em.has(t))return n;const u={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${o}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const b of We(u))u[b]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${Lh(e)}`},u[b]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,m=Nt(c,["fill","fillOpacity","cursor"]),g=We(m).reduce((b,x)=>(b[x]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:m[x]},{value:null}],b),{});return[{name:r+J$+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:u}},...n,{name:r+J$,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),g)}}]}};function dtn(e,t,n,r){const i=n.channel,s=n.signals.visual,a=n.signals.data,o=Em.has(t),l=On(e.scaleName(i)),u=e.getScaleComponent(i),c=u?u.get("type"):void 0,f=g=>`scale(${l}, ${g})`,d=e.getSizeSignalRef(i===si?"width":"height").signal,h=`${i}(unit)`,m=$6e(t,(g,b)=>[...g,{events:b.between[0],update:`[${h}, ${h}]`},{events:b,update:`[${s}[0], clamp(${h}, 0, ${d})]`}]);return m.push({events:{signal:t.name+cq},update:Mu(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),o?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},r?{init:kv(r,!0,f)}:{value:[]}),{on:m}),Object.assign(Object.assign({name:a},r?{init:kv(r)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${l}, ${s})`}]})]}function $6e(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(je(`${r} is not an ordered event stream for interval selections.`),n),[])}function E6e(e,t){const n=t.name,r=n+GT,i=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=i.items.map(u=>{const c=e.fieldDef(u.channel);return c&&c.bin?`[${s}[${On(e.vgField(u.channel,{}))}], ${s}[${On(e.vgField(u.channel,{binSuffix:"end"}))}]]`:`${s}[${On(u.field)}]`}).join(", "),o=`unit: ${Lh(e)}, fields: ${r}, values`,l=t.events;return[{name:n+ld,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${o}: [${a}]} : null`,force:!0}]:[]}]}const htn={signals:E6e,modifyExpr:(e,t)=>t.name+ld+", "+(t.resolve==="global"?"null":`{unit: ${Lh(e)}}`)},ptn={signals:E6e,modifyExpr:(e,t)=>t.name+ld+", "+(t.resolve==="global"?"true":`{unit: ${Lh(e)}}`)},By="_store",ld="_tuple",mtn="_modify",k6e="vlSelectionResolve",gtn={single:ptn,multi:htn,interval:ftn};function _b(e,t){const n=e.component.selection;if(n){for(const r of G0(n))if(t(r,gtn[r.type])===!0)break}}function ytn(e){let t=e.parent;for(;t&&!vc(t);)t=t.parent;return t}function Lh(e,{escape:t}={escape:!0}){let n=t?On(e.name):e.name;const r=ytn(e);if(r){const{facet:i}=r;for(const s of Cu)i[s]&&(n+=` + '__facet_${s}_' + (facet[${On(r.vgField(s))}])`)}return n}function Pre(e){let t=!1;return _b(e,n=>{t=t||n.project.items.some(r=>r.field===Ev)}),t}const btn="RawCode",xtn="Literal",vtn="Property",wtn="Identifier",Stn="ArrayExpression",Ctn="BinaryExpression",$tn="CallExpression",Etn="ConditionalExpression",ktn="LogicalExpression",Atn="MemberExpression",_tn="ObjectExpression",Ttn="UnaryExpression";function qc(e){this.type=e}qc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Ntn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Ntn(e){switch(e.type){case Stn:return e.elements;case Ctn:case ktn:return[e.left,e.right];case $tn:return[e.callee].concat(e.arguments);case Etn:return[e.test,e.consequent,e.alternate];case Atn:return[e.object,e.property];case _tn:return e.properties;case vtn:return[e.key,e.value];case Ttn:return[e.argument];case wtn:case xtn:case btn:default:return[]}}var Dd,xt,Te,ja,or,J7=1,qT=2,zy=3,ig=4,eL=5,Tb=6,Uo=7,XT=8,Dtn=9;Dd={};Dd[J7]="Boolean";Dd[qT]="<end>";Dd[zy]="Identifier";Dd[ig]="Keyword";Dd[eL]="Null";Dd[Tb]="Numeric";Dd[Uo]="Punctuator";Dd[XT]="String";Dd[Dtn]="RegularExpression";var Itn="ArrayExpression",Otn="BinaryExpression",Rtn="CallExpression",Ftn="ConditionalExpression",A6e="Identifier",Mtn="Literal",Ltn="LogicalExpression",Ptn="MemberExpression",Btn="ObjectExpression",ztn="Property",jtn="UnaryExpression",sa="Unexpected token %0",Utn="Unexpected number",Vtn="Unexpected string",Wtn="Unexpected identifier",Htn="Unexpected reserved word",Gtn="Unexpected end of input",fq="Invalid regular expression",ZU="Invalid regular expression: missing /",_6e="Octal literals are not allowed in strict mode.",qtn="Duplicate data property in object literal not allowed in strict mode",Oa="ILLEGAL",Ck="Disabled.",Xtn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ytn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function tL(e,t){if(!e)throw new Error("ASSERT: "+t)}function ph(e){return e>=48&&e<=57}function Bre(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function eE(e){return"01234567".indexOf(e)>=0}function Ktn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function $k(e){return e===10||e===13||e===8232||e===8233}function YT(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Xtn.test(String.fromCharCode(e))}function d6(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Ytn.test(String.fromCharCode(e))}var Ztn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function T6e(){for(var e;Te<ja&&(e=xt.charCodeAt(Te),Ktn(e)||$k(e));)++Te}function dq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Te<ja&&Bre(xt[Te])?(r=xt[Te++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Hn({},sa,Oa);return String.fromCharCode(i)}function Qtn(){var e,t,n,r;for(e=xt[Te],t=0,e==="}"&&Hn({},sa,Oa);Te<ja&&(e=xt[Te++],!!Bre(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Hn({},sa,Oa),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function N6e(){var e,t;for(e=xt.charCodeAt(Te++),t=String.fromCharCode(e),e===92&&(xt.charCodeAt(Te)!==117&&Hn({},sa,Oa),++Te,e=dq("u"),(!e||e==="\\"||!YT(e.charCodeAt(0)))&&Hn({},sa,Oa),t=e);Te<ja&&(e=xt.charCodeAt(Te),!!d6(e));)++Te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),xt.charCodeAt(Te)!==117&&Hn({},sa,Oa),++Te,e=dq("u"),(!e||e==="\\"||!d6(e.charCodeAt(0)))&&Hn({},sa,Oa),t+=e);return t}function Jtn(){var e,t;for(e=Te++;Te<ja;){if(t=xt.charCodeAt(Te),t===92)return Te=e,N6e();if(d6(t))++Te;else break}return xt.slice(e,Te)}function enn(){var e,t,n;return e=Te,t=xt.charCodeAt(Te)===92?N6e():Jtn(),t.length===1?n=zy:Ztn.hasOwnProperty(t)?n=ig:t==="null"?n=eL:t==="true"||t==="false"?n=J7:n=zy,{type:n,value:t,start:e,end:Te}}function QU(){var e=Te,t=xt.charCodeAt(Te),n,r=xt[Te],i,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Te,{type:Uo,value:String.fromCharCode(t),start:e,end:Te};default:if(n=xt.charCodeAt(Te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Te+=2,{type:Uo,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Te};case 33:case 61:return Te+=2,xt.charCodeAt(Te)===61&&++Te,{type:Uo,value:xt.slice(e,Te),start:e,end:Te}}}if(a=xt.substr(Te,4),a===">>>=")return Te+=4,{type:Uo,value:a,start:e,end:Te};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Te+=3,{type:Uo,value:s,start:e,end:Te};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Te+=2,{type:Uo,value:i,start:e,end:Te};if("<>=!+-*%&|^/".indexOf(r)>=0)return++Te,{type:Uo,value:r,start:e,end:Te};Hn({},sa,Oa)}function tnn(e){for(var t="";Te<ja&&Bre(xt[Te]);)t+=xt[Te++];return t.length===0&&Hn({},sa,Oa),YT(xt.charCodeAt(Te))&&Hn({},sa,Oa),{type:Tb,value:parseInt("0x"+t,16),start:e,end:Te}}function nnn(e){for(var t="0"+xt[Te++];Te<ja&&eE(xt[Te]);)t+=xt[Te++];return(YT(xt.charCodeAt(Te))||ph(xt.charCodeAt(Te)))&&Hn({},sa,Oa),{type:Tb,value:parseInt(t,8),octal:!0,start:e,end:Te}}function R1e(){var e,t,n;if(n=xt[Te],tL(ph(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Te,e="",n!=="."){if(e=xt[Te++],n=xt[Te],e==="0"){if(n==="x"||n==="X")return++Te,tnn(t);if(eE(n))return nnn(t);n&&ph(n.charCodeAt(0))&&Hn({},sa,Oa)}for(;ph(xt.charCodeAt(Te));)e+=xt[Te++];n=xt[Te]}if(n==="."){for(e+=xt[Te++];ph(xt.charCodeAt(Te));)e+=xt[Te++];n=xt[Te]}if(n==="e"||n==="E")if(e+=xt[Te++],n=xt[Te],(n==="+"||n==="-")&&(e+=xt[Te++]),ph(xt.charCodeAt(Te)))for(;ph(xt.charCodeAt(Te));)e+=xt[Te++];else Hn({},sa,Oa);return YT(xt.charCodeAt(Te))&&Hn({},sa,Oa),{type:Tb,value:parseFloat(e),start:t,end:Te}}function rnn(){var e="",t,n,r,i,s=!1;for(t=xt[Te],tL(t==="'"||t==='"',"String literal must starts with a quote"),n=Te,++Te;Te<ja;)if(r=xt[Te++],r===t){t="";break}else if(r==="\\")if(r=xt[Te++],!r||!$k(r.charCodeAt(0)))switch(r){case"u":case"x":xt[Te]==="{"?(++Te,e+=Qtn()):e+=dq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:eE(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Te<ja&&eE(xt[Te])&&(s=!0,i=i*8+"01234567".indexOf(xt[Te++]),"0123".indexOf(r)>=0&&Te<ja&&eE(xt[Te])&&(i=i*8+"01234567".indexOf(xt[Te++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&xt[Te]===`
`&&++Te;else{if($k(r.charCodeAt(0)))break;e+=r}return t!==""&&Hn({},sa,Oa),{type:XT,value:e,octal:s,start:n,end:Te}}function inn(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(r,i){if(parseInt(i,16)<=1114111)return"x";Hn({},fq)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Hn({},fq)}try{return new RegExp(e,t)}catch{return null}}function snn(){var e,t,n,r,i;for(e=xt[Te],tL(e==="/","Regular expression literal must start with a slash"),t=xt[Te++],n=!1,r=!1;Te<ja;)if(e=xt[Te++],t+=e,e==="\\")e=xt[Te++],$k(e.charCodeAt(0))&&Hn({},ZU),t+=e;else if($k(e.charCodeAt(0)))Hn({},ZU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Hn({},ZU),i=t.substr(1,t.length-2),{value:i,literal:t}}function ann(){var e,t,n;for(t="",n="";Te<ja&&(e=xt[Te],!!d6(e.charCodeAt(0)));)++Te,e==="\\"&&Te<ja?Hn({},sa,Oa):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Hn({},fq,n),{value:n,literal:t}}function onn(){var e,t,n,r;return or=null,T6e(),e=Te,t=snn(),n=ann(),r=inn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Te}}function lnn(e){return e.type===zy||e.type===ig||e.type===J7||e.type===eL}function D6e(){var e;return T6e(),Te>=ja?{type:qT,start:Te,end:Te}:(e=xt.charCodeAt(Te),YT(e)?enn():e===40||e===41||e===59?QU():e===39||e===34?rnn():e===46?ph(xt.charCodeAt(Te+1))?R1e():QU():ph(e)?R1e():QU())}function Yo(){var e;return e=or,Te=e.end,or=D6e(),Te=e.end,e}function I6e(){var e;e=Te,or=D6e(),Te=e}function unn(e){var t=new qc(Itn);return t.elements=e,t}function F1e(e,t,n){var r=new qc(e==="||"||e==="&&"?Ltn:Otn);return r.operator=e,r.left=t,r.right=n,r}function cnn(e,t){var n=new qc(Rtn);return n.callee=e,n.arguments=t,n}function fnn(e,t,n){var r=new qc(Ftn);return r.test=e,r.consequent=t,r.alternate=n,r}function zre(e){var t=new qc(A6e);return t.name=e,t}function v$(e){var t=new qc(Mtn);return t.value=e.value,t.raw=xt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function M1e(e,t,n){var r=new qc(Ptn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function dnn(e){var t=new qc(Btn);return t.properties=e,t}function L1e(e,t,n){var r=new qc(ztn);return r.key=t,r.value=n,r.kind=e,r}function hnn(e,t){var n=new qc(jtn);return n.operator=e,n.argument=t,n.prefix=!0,n}function Hn(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(s,a){return tL(a<r.length,"Message reference must be in range"),r[a]});throw n=new Error(i),n.index=Te,n.description=i,n}function nL(e){e.type===qT&&Hn(e,Gtn),e.type===Tb&&Hn(e,Utn),e.type===XT&&Hn(e,Vtn),e.type===zy&&Hn(e,Wtn),e.type===ig&&Hn(e,Htn),Hn(e,sa,e.value)}function Ua(e){var t=Yo();(t.type!==Uo||t.value!==e)&&nL(t)}function jr(e){return or.type===Uo&&or.value===e}function JU(e){return or.type===ig&&or.value===e}function pnn(){var e=[];for(Te=or.start,Ua("[");!jr("]");)jr(",")?(Yo(),e.push(null)):(e.push(jy()),jr("]")||Ua(","));return Yo(),unn(e)}function P1e(){var e;return Te=or.start,e=Yo(),e.type===XT||e.type===Tb?(e.octal&&Hn(e,_6e),v$(e)):zre(e.value)}function mnn(){var e,t,n,r;if(Te=or.start,e=or,e.type===zy)return n=P1e(),Ua(":"),r=jy(),L1e("init",n,r);if(e.type===qT||e.type===Uo)nL(e);else return t=P1e(),Ua(":"),r=jy(),L1e("init",t,r)}function gnn(){var e=[],t,n,r,i={},s=String;for(Te=or.start,Ua("{");!jr("}");)t=mnn(),t.key.type===A6e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Hn({},qtn):i[r]=!0,e.push(t),jr("}")||Ua(",");return Ua("}"),dnn(e)}function ynn(){var e;return Ua("("),e=jre(),Ua(")"),e}var bnn={if:1};function xnn(){var e,t,n;if(jr("("))return ynn();if(jr("["))return pnn();if(jr("{"))return gnn();if(e=or.type,Te=or.start,e===zy||bnn[or.value])n=zre(Yo().value);else if(e===XT||e===Tb)or.octal&&Hn(or,_6e),n=v$(Yo());else{if(e===ig)throw new Error(Ck);e===J7?(t=Yo(),t.value=t.value==="true",n=v$(t)):e===eL?(t=Yo(),t.value=null,n=v$(t)):jr("/")||jr("/=")?(n=v$(onn()),I6e()):nL(Yo())}return n}function vnn(){var e=[];if(Ua("("),!jr(")"))for(;Te<ja&&(e.push(jy()),!jr(")"));)Ua(",");return Ua(")"),e}function wnn(){var e;return Te=or.start,e=Yo(),lnn(e)||nL(e),zre(e.value)}function Snn(){return Ua("."),wnn()}function Cnn(){var e;return Ua("["),e=jre(),Ua("]"),e}function $nn(){var e,t,n;for(e=xnn();;)if(jr("."))n=Snn(),e=M1e(".",e,n);else if(jr("("))t=vnn(),e=cnn(e,t);else if(jr("["))n=Cnn(),e=M1e("[",e,n);else break;return e}function B1e(){var e=$nn();if(or.type===Uo&&(jr("++")||jr("--")))throw new Error(Ck);return e}function $O(){var e,t;if(or.type!==Uo&&or.type!==ig)t=B1e();else{if(jr("++")||jr("--"))throw new Error(Ck);if(jr("+")||jr("-")||jr("~")||jr("!"))e=Yo(),t=$O(),t=hnn(e.value,t);else{if(JU("delete")||JU("void")||JU("typeof"))throw new Error(Ck);t=B1e()}}return t}function z1e(e){var t=0;if(e.type!==Uo&&e.type!==ig)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Enn(){var e,t,n,r,i,s,a,o,l,u;if(e=or,l=$O(),r=or,i=z1e(r),i===0)return l;for(r.prec=i,Yo(),t=[e,or],a=$O(),s=[l,r,a];(i=z1e(or))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=F1e(o,l,a),s.push(n);r=Yo(),r.prec=i,s.push(r),t.push(or),n=$O(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=F1e(s[u-1].value,s[u-2],n),u-=2;return n}function jy(){var e,t,n;return e=Enn(),jr("?")&&(Yo(),t=jy(),Ua(":"),n=jy(),e=fnn(e,t,n)),e}function jre(){var e=jy();if(jr(","))throw new Error(Ck);return e}function knn(e){xt=e,Te=0,ja=xt.length,or=null,I6e();var t=jre();if(or.type!==qT)throw new Error("Unexpect token after expression.");return t}function jS(e,t,n){return e.fields=t||[],e.fname=n,e}function Ann(e){return e.length===1?_nn(e[0]):Tnn(e)}const _nn=e=>function(t){return t[e]},Tnn=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function eV(e){throw Error(e)}function Nnn(e){const t=[],n=e.length;let r=null,i=0,s="",a,o,l;e=e+"";function u(){t.push(s+e.substring(a,o)),s="",a=o+1}for(a=o=0;o<n;++o)if(l=e[o],l==="\\")s+=e.substring(a,o++),a=o;else if(l===r)u(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=o+1,r=l):l==="."&&!i?o>a?u():a=o+1:l==="["?(o>a&&u(),i=a=o+1):l==="]"&&(i||eV("Access path missing open bracket: "+e),i>0&&u(),i=0,a=o+1)}return i&&eV("Access path missing closing bracket: "+e),r&&eV("Access path missing closing quote: "+e),o>a&&(o++,u()),t}function Dnn(e,t,n){const r=Nnn(e);return e=r.length===1?r[0]:e,jS(Ann(r),[e],e)}Dnn("id");jS(e=>e,[],"identity");jS(()=>0,[],"zero");jS(()=>1,[],"one");jS(()=>!0,[],"true");jS(()=>!1,[],"false");function hq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...hq(e.object)),t.push(...hq(e.property))),t)}function O6e(e){return e.object.type==="MemberExpression"?O6e(e.object):e.object.name==="datum"}function R6e(e){const t=knn(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&O6e(r)&&n.add(hq(r).slice(1).join("."))}),n}class US extends wr{constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=h6(this.model,this.filter,this),this._dependentFields=R6e(this.expr)}clone(){return new US(null,this.model,hn(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Inn(e,t){var n;const r={},i=e.config.selection;for(const s of We(t??{})){const a=hn(t[s]),o=i[a.type],{fields:l,encodings:u}=o,c=Nt(o,["fields","encodings"]);for(const h in c)h==="encodings"&&a.fields||h==="fields"&&a.encodings||(h==="mark"&&(a[h]=Object.assign(Object.assign({},c[h]),a[h])),(a[h]===void 0||a[h]===!0)&&(a[h]=(n=c[h])!==null&&n!==void 0?n:a[h]));const f=Qr(s),d=r[f]=Object.assign(Object.assign({},a),{name:f,events:cn(a.on)?zS(a.on,"scope"):hn(a.on)});Q7(d,h=>{h.has(d)&&h.parse&&h.parse(e,d,a,t[s])})}return r}function F6e(e,t,n,r="datum"){const i=[];function s(o){const l=Qr(o),u=e.getSelectionComponent(l,o),c=On(l+By);if(u.project.timeUnit){const f=n??e.component.data.raw,d=u.project.timeUnit.clone();f.parent?d.insertAsParentOf(f):f.parent=d}return u.empty!=="none"&&i.push(c),`vlSelectionTest(${c}, ${r}`+(u.resolve==="global"?")":`, ${On(u.resolve)})`)}const a=K$(t,s);return(i.length?"!("+i.map(o=>`length(data(${o}))`).join(" || ")+") || ":"")+`(${a})`}function M6e(e,t){const n=t.encoding;let r=t.field;if(!n&&!r)r=e.project.items[0].field,e.project.items.length>1&&je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${On(r)}.`);else if(n&&!r){const i=e.project.items.filter(s=>s.channel===n);!i.length||i.length>1?(r=e.project.items[0].field,je((i.length?"Multiple ":"No ")+`matching ${On(n)} encoding found for selection ${On(t.selection)}. Using "field": ${On(r)}.`)):r=i[0].field}return`${e.name}[${On(r)}]`}function Onn(e,t){_b(e,n=>{const r=n.name,i=e.getName(`lookup_${r}`);e.component.data.outputNodes[i]=n.materialized=new go(new US(t,e,{selection:r}),i,"lookup",e.component.data.outputNodeRefCounts)})}function h6(e,t,n){return K$(t,r=>cn(r)?r:fQt(r)?F6e(e,r.selection,n):ZRe(r))}function Rnn(e,t){if(e)return It(e)&&!y0(e)?e.map(n=>C5e(n,t)).join(", "):e}function tV(e,t,n,r){var i,s,a;e.encode=(i=e.encode)!==null&&i!==void 0?i:{},e.encode[t]=(s=e.encode[t])!==null&&s!==void 0?s:{},e.encode[t].update=(a=e.encode[t].update)!==null&&a!==void 0?a:{},e.encode[t].update[n]=r}function w$(e,t,n,r={header:!1}){var i,s;const a=e.combine(),{disable:o,orient:l,scale:u,labelExpr:c,title:f,zindex:d}=a,h=Nt(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!o){for(const m in h){const g=cKt[m],b=h[m];if(g&&g!==t&&g!=="both")delete h[m];else if(Wne(b)){const{condition:x}=b,w=Nt(b,["condition"]),C=Ii(x),S=Kge[m];if(S){const{vgProp:E,part:A}=S,k=[...C.map(N=>{const{test:I}=N,T=Nt(N,["test"]);return Object.assign({test:h6(null,I)},T)}),w];tV(h,A,E,k),delete h[m]}else if(S===null){const E={signal:C.map(A=>{const{test:k}=A,N=Nt(A,["test"]);return`${h6(null,k)} ? ${p1e(N)} : `}).join("")+p1e(w)};h[m]=E}}else if(Vt(b)){const x=Kge[m];if(x){const{vgProp:w,part:C}=x;tV(h,C,w,b),delete h[m]}}}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:m}=h.encode;h.encode=Object.assign({},m?{grid:m}:{}),Tr(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:u,orient:l},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Xi(d,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let g=c;!((s=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0)&&s.update&&Vt(h.encode.labels.update.text)&&(g=Sv(c,"datum.label",h.encode.labels.update.text.signal)),tV(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const g of gRe)e.hasAxisPart(g)||delete h.encode[g];Tr(h.encode)&&delete h.encode}const m=Rnn(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},m?{title:m}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:Xi(d,0)})}}}function L6e(e){const{axes:t}=e.component,n=[];for(const r of Fu)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",a=e.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function Fnn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>w$(i,"grid",t)),...r.map(i=>w$(i,"grid",t)),...n.map(i=>w$(i,"main",t)),...r.map(i=>w$(i,"main",t))].filter(i=>i)}const P6e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},B6e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Mnn=We(P6e),Lnn=We(B6e);function j1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...We(a),...We(o)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${xk(a[c])} : ${xk(o[c])}`};return u}return t[i]})])}function Pnn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:CQt(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",a=Vt(n)?"axisOrient":"axis"+E7(n),o=[...i,...i.map(u=>s+u.substr(4))],l=["axis",a,s];return{vlOnlyAxisConfig:j1e(o,r,e,n),vgAxisConfig:j1e(l,r,e,n),axisConfigStyle:Bnn([...l,...o],r)}}function Bnn(e,t){var n;const r=[{}];for(const i of e){let s=(n=t[i])===null||n===void 0?void 0:n.style;if(s){s=Ii(s);for(const a of s)r.push(t.style[a])}}return Object.assign.apply(null,r)}function pq(e,t,n,r={}){var i;const s=_5e(e,n,t.style);if(s!==void 0)return{configFrom:"style",configValue:s};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[a])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const U1e={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return u5e(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return c5e(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return tt(e)&&oo(e.bin)?!1:(r=t.grid)!==null&&r!==void 0?r:znn(n,e)},gridScale:({model:e,channel:t})=>jnn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||j6e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||z6e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:Vnn(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:Wnn(t.type,n)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var s;const a=e==="x"?"width":e==="y"?"height":void 0,o=a?t.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:Gnn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=U6e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",a=t.fieldDef(s);return N5e(i?[h1e(i)]:[],tt(a)?[h1e(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>qnn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:Xnn(n,t)}};function znn(e,t){return!cl(e)&&tt(t)&&!Rr(t==null?void 0:t.bin)}function jnn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Unn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Vt(s)?s:K5(s);{const{configValue:a}=pq("labelAngle",e.config,t==null?void 0:t.style,i);return a!==void 0?K5(a):n===si&&Ft([ure,lre],r.type)?270:void 0}}function mq(e){return`(((${e.signal} % 360) + 360) % 360)`}function z6e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Vt(e)){const i=mq(e),s=Vt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Vt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Vt(e)){const i=mq(e),s=Vt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Vt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function j6e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Vt(e)){const a=mq(e),o=Vt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?"("+a+" + 90)":a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${o} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Vt(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Vnn(e,t){if(t==="x"&&Ft(["quantitative","temporal"],e))return!0}function Wnn(e,t){if(e!=="nominal")return t==="log"?"greedy":!0}function Hnn(e){return e==="x"?"bottom":"left"}function Gnn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!cl(t)&&t!=="log"){if(tt(e)){if(Rr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ft(["month","hours","day","quarter"],(i=Eo(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function U6e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,a=i?i.title:void 0;if(s&&a)return D5e(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function qnn(e,t){const n=e.values;if(It(n))return E5e(t,n);if(Vt(n))return n}function Xnn(e,t){return e==="rect"&&b5e(t)?1:0}class Av extends wr{constructor(t,n){super(t),this.transform=n,this._dependentFields=R6e(this.transform.calculate)}clone(){return new Av(null,hn(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(bre(r)&&p5e(r.sort)){const{field:s,timeUnit:a}=r,o=r.sort,l=o.map((u,c)=>`${ZRe({field:s,timeUnit:a,equal:u})} ? ${c} : `).join("")+o.length;t=new Av(t,{calculate:l,as:_v(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mn(this.transform)}`}}function _v(e,t,n){return Ye(e,Object.assign({prefix:t,suffix:"sort_index"},n??{}))}function rL(e,t){return Ft(["top","bottom"],t)?"column":Ft(["left","right"],t)||e==="row"?"row":"column"}function Tv(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Xi(((t==null?void 0:t.header)||{})[e],i[e],n.header[e])}function iL(e,t,n,r){const i={};for(const s of e){const a=Tv(s,t,n,r);a!==void 0&&(i[s]=a)}return i}const Ure=["row","column"],Vre=["header","footer"];function Ynn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:o}=iL(["titleAnchor","titleAngle","titleOrient"],i,r,t),l=rL(t,o),u=K5(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),W6e(u,l)),V6e(l,u,s)),H6e(r,i,t,Mnn,P6e))}}function V6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=j6e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function W6e(e,t){const n=z6e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Knn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Vre)if(n[i])for(const s of n[i]){const a=Qnn(e,t,i,n,s);a!=null&&r.push(a)}return r}function Znn(e,t){var n;const{sort:r}=e;return jf(r)?{field:Ye(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:It(r)?{field:_v(e,t,{expr:"datum"}),order:"ascending"}:{field:Ye(e,{expr:"datum"}),order:r??"ascending"}}function gq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:o,labelExpr:l}=iL(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),u=dre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=rL(t,o);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?Sv(Sv(l,"datum.label",u),"datum.value",Ye(e,{expr:"parent"})):u}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),W6e(s,c)),V6e(c,s,a)),H6e(n,e,t,Lnn,B6e))}function Qnn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:a}=r,o=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:f}=iL(["labelOrient"],a,o,t);(t==="row"&&!Ft(["top","bottom"],f)||t==="column"&&!Ft(["left","right"],f))&&(s=gq(a,t,o))}const l=vc(e)&&!UT(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(s||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:Znn(a,t)}:{}),c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),s?{title:s}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:u}:{})}}return null}const Jnn={column:{start:0,end:1},row:{start:1,end:0}};function ern(e,t){return Jnn[t][e]}function trn(e,t){const n={};for(const r of Cu){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:a}=iL(["titleAnchor","titleOrient"],i.facetFieldDef,t,r),o=rL(r,a),l=ern(s,o);l!==void 0&&(n[o]=l)}}return Tr(n)?void 0:n}function H6e(e,t,n,r,i){const s={};for(const a of r){if(!i[a])continue;const o=Tv(a,t,e,n);o!==void 0&&(s[i[a]]=o)}return s}function Wre(e){return[...BD(e,"width"),...BD(e,"height"),...BD(e,"childWidth"),...BD(e,"childHeight")]}function BD(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const a=s.get("type"),o=s.get("range");if(cl(a)&&ng(o)){const l=e.scaleName(n);return vc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[V1e(l,o)]:[V1e(l,o),{name:i,update:G6e(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",o=sq(e.config.view,s?"width":"height"),l=`isFinite(${a}) ? ${a} : ${o}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function V1e(e,t){return{name:e+"_step",value:t.step}}function G6e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Xi(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${a}, ${s}) * ${e}_step`}function q6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function X6e(e,t){return We(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),HT(t,i,r,s=>Vt(s)?s:{value:s.value}))},{})}function nrn(e,t){if(HS(t)||vc(t))return"shared";if(Yre(t))return sd(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Hre(e,t){const n=e.scale[t],r=sd(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&je(NZt(t)),"independent"):e[r][t]||"shared"}const rrn=Object.assign(Object.assign({},SJt),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Y6e=We(rrn);class irn extends bp{}const W1e={symbols:srn,gradient:arn,labels:orn,entries:lrn};function srn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){var a,o,l,u,c;if(s!=="symbol")return;const{markDef:f,encoding:d,config:h,mark:m}=n,g=f.filled&&m!=="trail";let b=Object.assign(Object.assign({},tJt({},n,yKt)),d6e(n,{filled:g}));const x=(a=K6e(d.opacity))!==null&&a!==void 0?a:f.opacity;if(b.fill){if(r==="fill"||g&&r===ll)delete b.fill;else if(b.fill.field)i.get("symbolFillColor")?delete b.fill:(b.fill=ki((o=h.legend.symbolBaseFillColor)!==null&&o!==void 0?o:"black"),b.fillOpacity=ki(x??1));else if(It(b.fill)){const w=(c=(u=yq((l=d.fill)!==null&&l!==void 0?l:d.color))!==null&&u!==void 0?u:f.fill)!==null&&c!==void 0?c:g&&f.color;w&&(b.fill=ki(w))}}if(b.stroke){if(r==="stroke"||!g&&r===ll)delete b.stroke;else if(b.stroke.field)delete b.stroke;else if(It(b.stroke)){const w=Xi(yq(d.stroke||d.color),f.stroke,g?f.color:void 0);w&&(b.stroke={value:w})}}if(r!==yp){const w=tt(t)&&Q6e(n,i,t);w?b.opacity=[Object.assign({test:w},ki(x??1)),ki(h.legend.unselectedOpacity)]:x&&(b.opacity=ki(x))}return b=Object.assign(Object.assign({},b),e),Tr(b)?void 0:b}function arn(e,{model:t,legendType:n}){if(n!=="gradient")return;let r={};const i=K6e(t.encoding.opacity)||t.markDef.opacity;return i&&(r.opacity=ki(i)),r=Object.assign(Object.assign({},r),e),Tr(r)?void 0:r}function orn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},a=n.config,o=tt(t)?Q6e(n,i,t):void 0,l=o?[{test:o,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s,f=Ly(c)?hre({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):void 0,d=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),f?{text:f}:{}),e);return Tr(d)?void 0:d}function lrn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function K6e(e){return Z6e(e,(t,n)=>Math.max(t,n.value))}function yq(e){return Z6e(e,(t,n)=>Xi(t,n.value))}function Z6e(e,t){if(HQt(e))return Ii(e.condition).reduce(t,e.value);if(ep(e))return e.value}function Q6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=On(n.field);return r.map(s=>`(!length(data(${On(Qr(s)+By)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const H1e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return u5e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return c5e(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:mrn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:grn(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:crn(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>ey(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(gx(n)&&hc(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>urn(t,e)};function urn(e,t){const n=e.values;if(It(n))return E5e(t,n);if(Vt(n))return n}function crn(e,t,n,r){var i;if(t!=="shape"){const s=(i=yq(n))!==null&&i!==void 0?i:r;if(s)return s}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function frn(e){const{legend:t}=e;return Xi(t.type,drn(e))}function drn({channel:e,timeUnit:t,scaleType:n}){if(gx(e)){if(Ft(["quarter","month","day"],t))return"symbol";if(hc(n))return"gradient"}return"symbol"}function hrn({legendConfig:e,legendType:t,orient:n,legend:r}){var i,s;return(s=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:prn(n,t)}function prn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function mrn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(hc(i))return n==="horizontal"?r==="top"||r==="bottom"?G1e(t,"width",a,s):a:G1e(t,"height",l,o)}function G1e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function grn(e){if(Ft(["quantile","threshold","log"],e))return"greedy"}function J6e(e){const t=di(e)?yrn(e):wrn(e);return e.component.legends=t,t}function yrn(e){const{encoding:t}=e,n={};for(const r of[ll,...G5e]){const i=ss(t[r]);!i||!e.getScaleComponent(r)||r===ul&&tt(i)&&i.type===BS||(n[r]=vrn(e,r))}return n}function brn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function xrn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function vrn(e,t){var n,r,i;let s=e.legend(t);const{markDef:a,encoding:o,config:l}=e,u=l.legend,c=new irn({},brn(e,t));ttn(e,t,c);const f=s!==void 0?!s:u.disable;if(c.set("disable",f,s!==void 0),f)return c;s=s||{};const d=e.getScaleComponent(t).get("type"),h=ss(o[t]),m=tt(h)?(n=Eo(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=s.orient||l.legend.orient||"right",b=frn({legend:s,channel:t,timeUnit:m,scaleType:d}),x=hrn({legend:s,legendType:b,orient:g,legendConfig:u}),w={legend:s,channel:t,model:e,markDef:a,encoding:o,fieldOrDatumDef:h,legendConfig:u,config:l,scaleType:d,orient:g,legendType:b,direction:x};for(const k of Y6e){const N=k in H1e?H1e[k](w):s[k];if(N!==void 0){const I=xrn(N,k,s,e.fieldDef(t));(I||l.legend[k]===void 0)&&c.set(k,N,I)}}const C=(r=s==null?void 0:s.encoding)!==null&&r!==void 0?r:{},S=c.get("selections"),E={},A={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:b};for(const k of["labels","legend","title","symbols","gradient","entries"]){const N=X6e((i=C[k])!==null&&i!==void 0?i:{},e),I=k in W1e?W1e[k](N,A):N;I!==void 0&&!Tr(I)&&(E[k]=Object.assign(Object.assign(Object.assign({},S!=null&&S.length&&tt(h)?{name:`${Qr(h.field)}_legend_${k}`}:{}),S!=null&&S.length?{interactive:!!S}:{}),{update:I}))}return Tr(E)||c.set("encode",E,!!(s!=null&&s.encoding)),c}function wrn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){J6e(r);for(const i of We(r.component.legends))n.legend[i]=Hre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=eFe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of We(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function eFe(e,t){var n,r,i,s;if(!e)return t.clone();const a=e.getWithExplicit("orient"),o=t.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;let l=!1;for(const u of Y6e){const c=Cm(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return Srn(f,d);case"title":return I5e(f,d);case"type":return l=!0,Sl("symbol")}return K7(f,d,u,"legend")});e.setWithExplicit(u,c)}return l&&(!((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0)&&r.gradient&&JG(e.implicit,["encode","gradient"]),!((s=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||s===void 0)&&s.gradient&&JG(e.explicit,["encode","gradient"])),e}function Srn(e,t){return t.value==="circle"?t:e}function q1e(e,t,n,r){var i,s,a;e.encode=(i=e.encode)!==null&&i!==void 0?i:{},e.encode[t]=(s=e.encode[t])!==null&&s!==void 0?s:{},e.encode[t].update=(a=e.encode[t].update)!==null&&a!==void 0?a:{},e.encode[t].update[n]=r}function tFe(e){const t=e.component.legends,n={};for(const i of We(t)){const s=e.getScaleComponent(i),a=Yr(s.get("domains"));if(n[a])for(const o of n[a])eFe(o,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return G0(n).flat().map(i=>Crn(i,e.config)).filter(i=>i!==void 0)}function Crn(e,t){var n,r,i;const s=e.combine(),{disable:a,labelExpr:o,selections:l}=s,u=Nt(s,["disable","labelExpr","selections"]);if(!a){if(t.aria===!1&&u.aria==null&&(u.aria=!1),!((n=u.encode)===null||n===void 0)&&n.symbols){const c=u.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!u.stroke&&(c.stroke={value:"transparent"});for(const f of G5e)u[f]&&delete c[f]}if(u.title||delete u.title,o!==void 0){let c=o;!((i=(r=u.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0)&&i.update&&Vt(u.encode.labels.update.text)&&(c=Sv(o,"datum.label",u.encode.labels.update.text.signal)),q1e(u,"labels","text",{signal:c})}for(const c in u){const f=u[c];if(Vt(f)){const d=vJt[c];if(d){const{vgProp:h,part:m}=d;q1e(u,m,h,f),delete u[c]}}}return u}}function $rn(e){return HS(e)||Yre(e)?Ern(e):nFe(e)}function Ern(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),nFe(e))}function nFe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},s=t.data.reduce((a,o)=>{const l=Vt(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ft(a,l)||a.push(l),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const krn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class rFe extends bp{constructor(t,n,r,i){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function iFe(e){e.component.projection=di(e)?Arn(e):Nrn(e)}function Arn(e){var t;if(e.hasProjection){const n=e.specifiedProjection,r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,s=r?_rn(e):void 0;return new rFe(e.projectionName(!0),Object.assign(Object.assign({},(t=e.config.projection)!==null&&t!==void 0?t:{}),n??{}),i,s)}}function _rn(e){const t=[],{encoding:n}=e;for(const r of[[kd,Ed],[Ru,Gc]])(ss(n[r[0]])||ss(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ul)&&e.typedFieldDef(ul).type===BS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName($a)),t}function Trn(e,t){const n=cRe(krn,i=>!!(!O1(e.explicit,i)&&!O1(t.explicit,i)||O1(e.explicit,i)&&O1(t.explicit,i)&&Yr(e.get(i))===Yr(t.get(i))));if(Yr(e.size)===Yr(t.size)){if(n)return e;if(Yr(e.explicit)===Yr({}))return t;if(Yr(t.explicit)===Yr({}))return e}return null}function Nrn(e){if(e.children.length===0)return;let t;for(const r of e.children)iFe(r);const n=cRe(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Trn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new rFe(r,t.specifiedProjection,t.size,hn(t.data));for(const s of e.children){const a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function Drn(e,t,n,r){var i,s;if(WT(t,n)){const a=di(e)?(s=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&s!==void 0?s:{}:{},o=Ye(t,{expr:"datum"}),l=Ye(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ye(t,{binSuffix:"range",forAs:!0}),formula:U7(o,l,a.format,a.formatType,r)}}return{}}function sFe(e,t){return`${ORe(e)}_${t}`}function Irn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Gre(e,t,n){var r;const i=(r=G7(n,void 0))!==null&&r!==void 0?r:{},s=sFe(i,t);return e.getName(`${s}_bins`)}function Orn(e){return"as"in e}function X1e(e,t,n){let r,i;Orn(e)?r=cn(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ye(e,{forAs:!0}),Ye(e,{binSuffix:"end",forAs:!0})];const s=Object.assign({},G7(t,void 0)),a=sFe(s,e.field),{signal:o,extentSignal:l}=Irn(n,a);if(z7(s.extent)){const c=s.extent,f=c.selection;i=M6e(n.getSelectionComponent(Qr(f),f),c),delete s.extent}const u=Object.assign(Object.assign(Object.assign({bin:s,field:e.field,as:[r]},o?{signal:o}:{}),l?{extentSignal:l}:{}),i?{span:i}:{});return{key:a,binComponent:u}}class Vf extends wr{constructor(t,n){super(t),this.bins=n}clone(){return new Vf(null,hn(this.bins))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{if(Vl(s)&&Rr(s.bin)){const{key:o,binComponent:l}=X1e(s,s.bin,n);i[o]=Object.assign(Object.assign(Object.assign({},l),i[o]),Drn(n,s,a,n.config))}return i},{});return Tr(r)?null:new Vf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=X1e(n,n.bin,r);return new Vf(t,{[i]:s})}merge(t,n){for(const r of We(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=F0([...this.bins[r].as,...t.bins[r].as],Mn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(G0(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(G0(this.bins).map(t=>t.field))}hash(){return`Bin ${Mn(this.bins)}`}assemble(){return G0(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,s=t.bin,{extent:a}=s,o=Nt(s,["extent"]),l=Object.assign(Object.assign(Object.assign({type:"bin",field:vm(t.field),as:r,signal:t.signal},z7(a)?{extent:null}:{extent:a}),t.span?{span:{signal:`span(${t.span})`}}:{}),o);!a&&t.extentSignal&&(n.push({type:"extent",field:vm(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const u of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:Ye({field:r[c]},{expr:"datum"}),as:u[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}class Nv extends wr{constructor(t){super(null),t=t??{name:"source"};let n;if(ny(t)||(n=t.format?Object.assign({},Rh(t.format,["parse"])):{}),a6(t))this._data={values:t.values};else if(wk(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ft(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else n6e(t)?this._data={values:[{type:"Sphere"}]}:(e6e(t)||ny(t))&&(this._data={});this._generator=ny(t),t.name&&(this._name=t.name),n&&!Tr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function bq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return console.error("Dataflow graph is inconsistent.",t,n),!1;if(!bq(t.children))return!1}return!0}class KT extends wr{constructor(t,n){super(t),this.params=n}clone(){return new KT(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mn(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class ZT extends wr{constructor(t,n){super(t),this.params=n}clone(){return new ZT(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${Mn(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}function sL(e){return e instanceof Nv||e instanceof KT||e instanceof ZT}class aFe{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class xp extends aFe{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:t,mutatedFlag:n}){t&&this.setContinue(),n&&this.setMutated()}reset(){}optimizeNextFromLeaves(t){if(sL(t))return!1;const n=t.parent,{continueFlag:r}=this.run(t);return r&&this.optimizeNextFromLeaves(n),this.mutatedFlag}}class qre extends aFe{}function Rrn(e,t,n,r){const i=di(r)?r.encoding[Td(t)]:void 0;if(Vl(n)&&di(r)&&mre(t,n,i,r.stack,r.markDef,r.config))e.add(Ye(n,{})),e.add(Ye(n,{suffix:"end"})),n.bin&&WT(n,t)&&e.add(Ye(n,{binSuffix:"range"}));else if(FKt(t)){const s=RKt(t);e.add(r.getName(s))}else e.add(Ye(n));return e}function Frn(e,t){var n;for(const r of We(t)){const i=t[r];for(const s of We(i))r in e?e[r][s]=new Set([...(n=e[r][s])!==null&&n!==void 0?n:[],...i[s]]):e[r]={[s]:i[s]}}}class xc extends wr{constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}clone(){return new xc(null,new Set(this.dimensions),hn(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((a,o)=>{var l,u,c,f;const{aggregate:d,field:h}=a;if(d)if(d==="count")i["*"]=(l=i["*"])!==null&&l!==void 0?l:{},i["*"].count=new Set([Ye(a,{forAs:!0})]);else{if(wm(d)||Eb(d)){const m=wm(d)?"argmin":"argmax",g=d[m];i[g]=(u=i[g])!==null&&u!==void 0?u:{},i[g][m]=new Set([Ye({op:m,field:g},{forAs:!0})])}else i[h]=(c=i[h])!==null&&c!==void 0?c:{},i[h][d]=new Set([Ye(a,{forAs:!0})]);tg(o)&&n.scaleDomain(o)==="unaggregated"&&(i[h]=(f=i[h])!==null&&f!==void 0?f:{},i[h].min=new Set([Ye({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([Ye({field:h,aggregate:"max"},{forAs:!0})]))}else Rrn(s,o,a,n)}),s.size+We(i).length===0)?null:new xc(t,s,i)}static makeFromTransform(t,n){var r,i,s;const a=new Set,o={};for(const l of n.aggregate){const{op:u,field:c,as:f}=l;u&&(u==="count"?(o["*"]=(r=o["*"])!==null&&r!==void 0?r:{},o["*"].count=new Set([f||Ye(l,{forAs:!0})])):(o[c]=(i=o[c])!==null&&i!==void 0?i:{},o[c][u]=new Set([f||Ye(l,{forAs:!0})])))}for(const l of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(l);return a.size+We(o).length===0?null:new xc(t,a,o)}merge(t){return rKt(this.dimensions,t.dimensions)?(Frn(this.measures,t.measures),!0):(GZt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...We(this.measures)])}producedFields(){const t=new Set;for(const n of We(this.measures))for(const r of We(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Mn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of We(this.measures))for(const a of We(this.measures[s]))for(const o of this.measures[s][a])r.push(o),t.push(a),n.push(s==="*"?null:vm(s));return{type:"aggregate",groupby:[...this.dimensions].map(vm),ops:t,fields:n,as:r}}}class VS extends wr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Cu){const a=n.facet[s];if(a){const{bin:o,sort:l}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[Ye(a),...Rr(o)?[Ye(a,{binSuffix:"end"})]:[]]},jf(l)?{sortField:l}:It(l)?{sortIndexField:_v(a,s)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of Cu)this[n]&&(t+=` ${n.charAt(0)}:${Mn(this[n])}`);return t}get fields(){var t;const n=[];for(const r of Cu)!((t=this[r])===null||t===void 0)&&t.fields&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of Cu)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Fu){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(cl(i)&&ng(s)){const a=aL(this.childModel,n),o=Xre(a);o?t[n]=o:je(`Unknown field for ${n}. Cannot calculate view size.`)}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x"}[t],s=[],a=[],o=[];r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),a.push("max")):(s.push(r[i]),a.push("distinct")),o.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=V7,field:f}=l;s.push(f),a.push(c),o.push(Ye(l,{forAs:!0}))}else u&&(s.push(u),a.push("max"),o.push(u));return{name:this[t].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},s.length?{fields:s,ops:a,as:o}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],o={};for(const c of Ure){for(const f of Vre){const d=(n=s[c]&&s[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){o[c]=!0;break}}if(o[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};a.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:l,column:u}=o;return(l||u)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){var t,n;const r=[];let i=null;const s=this.getChildIndependentFieldsWithStep(),{column:a,row:o,facet:l}=this;if(a&&o&&(s.x||s.y)){i=`cross_${this.column.name}_${this.row.name}`;const u=[].concat((t=s.x)!==null&&t!==void 0?t:[],(n=s.y)!==null&&n!==void 0?n:[]),c=u.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[Mh,Fh])this[u]&&r.push(this.assembleRowColumnHeaderData(u,i,s));if(l){const u=this.assembleFacetHeaderData(s);u&&r.push(...u)}return r}}function Y1e(e){return e[0]==="'"&&e[e.length-1]==="'"||e[0]==='"'&&e[e.length-1]==='"'?e.slice(1,-1):e}function Mrn(e,t){const n=pRe(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.indexOf("date:")===0){const r=Y1e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.indexOf("utc:")===0){const r=Y1e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return je(iZt(t)),null}function Lrn(e){const t={};return wO(e.filter,n=>{var r;if(KRe(n)){let i=null;ire(n)?i=n.equal:sre(n)?i=n.range[0]:are(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(LS(i)?t[n.field]="date":qi(i)?t[n.field]="number":cn(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Prn(e){const t={};function n(r){q7(r)?t[r.field]="date":r.type==="quantitative"&&TKt(r.aggregate)?t[r.field]="number":yk(r.field)>1?r.field in t||(t[r.field]="flatten"):bre(r)&&jf(r.sort)&&yk(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((di(e)||vc(e))&&e.forEachFieldDef((r,i)=>{if(Vl(r))n(r);else{const s=Ab(i),a=e.fieldDef(s);n(Object.assign(Object.assign({},r),{type:a.type}))}}),di(e)){const{mark:r,markDef:i,encoding:s}=e;if($b(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",o=s[a];tt(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function Brn(e){const t={};if(di(e)&&e.component.selection)for(const n of We(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&yk(i.field)>1&&(t[i.field]="flatten")}return t}class Ra extends wr{constructor(t,n){super(t),this._parse=n}clone(){return new Ra(null,hn(this._parse))}hash(){return`Parse ${Mn(this._parse)}`}static makeExplicit(t,n,r){let i={};const s=n.data;return!ny(s)&&s&&s.format&&s.format.parse&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const o of We(r)){const l=i.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===r[o]||l.value==="derived"||r[o]==="flatten"?delete r[o]:je(a1e(o,r[o],l.value)))}for(const o of We(n)){const l=i.get(o);l!==void 0&&(l===n[o]?delete n[o]:je(a1e(o,n[o],l)))}const s=new bp(n,r);i.copyAll(s);const a={};for(const o of We(s.combine())){const l=s.get(o);l!==null&&(a[o]=l)}return We(a).length===0||i.parseNothing?null:new Ra(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of We(this._parse)){const r=this._parse[n];yk(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(We(this._parse))}dependentFields(){return new Set(We(this._parse))}assembleTransforms(t=!1){return We(this._parse).filter(n=>t?yk(n)>1:!0).map(n=>{const r=Mrn(n,this._parse[n]);return r?{type:"formula",expr:r,as:mRe(n)}:null}).filter(n=>n!==null)}}class km extends wr{clone(){return new km(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ev])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ev}}}class Nb extends wr{constructor(t,n){super(t),this.transform=n}clone(){return new Nb(null,hn(this.transform))}addDimensions(t){this.transform.groupby=F0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:Ye(t)}hash(){return`JoinAggregateTransform ${Mn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function zrn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ye(r);return i&&t.push(i),t},[])}function jrn(e){return It(e)&&e.every(t=>cn(t))&&e.length>1}class Ph extends wr{constructor(t,n){super(t),this._stack=n}clone(){return new Ph(null,hn(this._stack))}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:a="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const f of n.sort)o.push(f.field),l.push(Xi(f.order,"ascending"));const u={field:o,order:l};let c;return jrn(s)?c=s:cn(s)?c=[s,s+"_end"]:c=[n.stack+"_start",n.stack+"_end"],new Ph(t,{stackField:r,groupby:i,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannel:s,fieldChannel:a,offset:o,impute:l}=r;let u;if(s){const h=i[s];u=ad(h)}const c=zrn(n),f=n.encoding.order;let d;return It(f)||tt(f)?d=T5e(f):d=c.reduce((h,m)=>(h.field.push(m),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new Ph(t,{dimensionFieldDef:u,stackField:n.vgField(a),facetby:[],stackby:c,sort:d,offset:o,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:t,impute:n,groupby:r}=this._stack;return t?t.bin?n?[Ye(t,{binSuffix:"mid"})]:[Ye(t,{}),Ye(t,{binSuffix:"end"})]:[Ye(t)]:r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDef:r,stackField:i,stackby:s,sort:a,offset:o,impute:l,as:u}=this._stack;if(l&&r){const{band:c=.5,bin:f}=r;f&&t.push({type:"formula",expr:`${c}*`+Ye(r,{expr:"datum"})+`+${1-c}*`+Ye(r,{expr:"datum",binSuffix:"end"}),as:Ye(r,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[...s,...n],key:Ye(r,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:u,offset:o}),t}}class WS extends wr{constructor(t,n){super(t),this.transform=n}clone(){return new WS(null,hn(this.transform))}addDimensions(t){this.transform.groupby=F0(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:Ye(t)}hash(){return`WindowTransform ${Mn(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],s=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),s.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const a=this.transform.frame,o=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&r.every(d=>Xne(d)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},o!==void 0?{groupby:o}:{});const l=[],u=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)l.push(d.field),u.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:l,order:u},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:i,ops:r,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),o!==void 0?{groupby:o}:{}),a!==void 0?{frame:a}:{})}}class Urn extends xp{run(t){const n=t.parent;if(t instanceof Ra){if(sL(n))return this.flags;if(n.numChildren()>1)return this.setContinue(),this.flags;if(n instanceof Ra)this.setMutated(),n.merge(t);else{if(dRe(n.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}class Vrn extends qre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of We(r))r[i].length>1&&(this.setMutated(),this.mergeNodes(t,r[i]));for(const i of t.children)this.run(i);return this.mutatedFlag}}class Wrn extends xp{run(t){return t instanceof go||t.numChildren()>0||t instanceof VS?this.flags:(this.setMutated(),t.remove(),this.flags)}}class Hrn extends xp{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(t){if(this.setContinue(),t instanceof Uf){const n=t.producedFields();fRe(n,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...n]),this.prev=t}return this.flags}reset(){this.fields.clear()}}class Grn extends xp{run(t){this.setContinue();const r=t.parent.children.filter(s=>s instanceof Uf),i=r.pop();for(const s of r)this.setMutated(),i.merge(s);return this.flags}}function qrn(e){function t(n){if(!(n instanceof VS)){const r=n.clone();if(r instanceof go){const i=vq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof xc||r instanceof Ph||r instanceof WS||r instanceof Nb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function xq(e){if(e instanceof VS)if(e.numChildren()===1&&!(e.children[0]instanceof go)){const t=e.children[0];(t instanceof xc||t instanceof Ph||t instanceof WS||t instanceof Nb)&&t.addDimensions(e.fields),t.swapWithParent(),xq(e)}else{const t=e.model.component.data.main;oFe(t);const n=qrn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(xq)}function oFe(e){if(e instanceof go&&e.type===$a&&e.numChildren()===1){const t=e.children[0];t instanceof VS||(t.swapWithParent(),oFe(e))}}class Xrn extends qre{constructor(){super()}run(t){t instanceof go&&!t.isRequired()&&(this.setMutated(),t.remove());for(const n of t.children)this.run(n);return this.mutatedFlag}}class Yrn extends qre{constructor(t){super(),this.requiresSelectionId=t&&Pre(t)}run(t){t instanceof km&&(this.requiresSelectionId&&(sL(t.parent)||t.parent instanceof xc||t.parent instanceof Ra)||(this.setMutated(),t.remove()));for(const n of t.children)this.run(n);return this.mutatedFlag}}class Krn extends xp{run(t){const n=t.parent,r=[...n.children],i=n.children.filter(s=>s instanceof Ra);if(n.numChildren()>1&&i.length>=1){const s={},a=new Set;for(const o of i){const l=o.parse;for(const u of We(l))u in s?s[u]!==l[u]&&a.add(u):s[u]=l[u]}for(const o of a)delete s[o];if(!Tr(s)){this.setMutated();const o=new Ra(n,s);for(const l of r){if(l instanceof Ra)for(const u of We(s))delete l.parse[u];n.removeChild(l),l.parent=o,l instanceof Ra&&We(l.parse).length===0&&l.remove()}}}return this.setContinue(),this.flags}}class Zrn extends xp{run(t){const n=t.parent,r=n.children.filter(s=>s instanceof xc),i={};for(const s of r){const a=Mn(s.groupBy);a in i||(i[a]=[]),i[a].push(s)}for(const s of We(i)){const a=i[s];if(a.length>1){const o=a.pop();for(const l of a)o.merge(l)&&(n.removeChild(l),l.parent=o,l.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class Qrn extends xp{constructor(t){super(),this.model=t}run(t){const n=t.parent,r=!(sL(n)||n instanceof US||n instanceof Ra||n instanceof km),i=[],s=[];for(const a of n.children)a instanceof Vf&&(r&&!dRe(n.producedFields(),a.dependentFields())?i.push(a):s.push(a));if(i.length>0){const a=i.pop();for(const o of i)a.merge(o,this.model.renameSignal.bind(this.model));this.setMutated(),n instanceof Vf?n.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){const a=s.pop();for(const o of s)a.merge(o,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class Jrn extends xp{run(t){const n=t.parent,r=[...n.children];if(!gk(r,o=>o instanceof go)||n.numChildren()<=1)return this.setContinue(),this.flags;const s=[];let a;for(const o of r)if(o instanceof go){let l=o;for(;l.numChildren()===1;){const u=l.children[0];if(u instanceof go)l=u;else break}s.push(...l.children),a?(n.removeChild(o),o.parent=a.parent,a.parent.removeChild(a),a.parent=l,this.setMutated()):a=l}else s.push(o);if(s.length){this.setMutated();for(const o of s)o.parent.removeChild(o),o.parent=a}return this.setContinue(),this.flags}}const vq="scale_",zD=5;function e0(e){const t=[];function n(r){if(r.numChildren()===0)t.push(r);else for(const i of r.children)n(i)}for(const r of e)n(r);return t}function ein(e){return e}function Ku(e,t){return t.map(r=>{if(e instanceof xp){const i=e.optimizeNextFromLeaves(r);return e.reset(),i}else return e.run(r)}).some(ein)}function K1e(e,t){let n=e.sources;const r=new Set;return r.add(Ku(new Xrn,n)),r.add(Ku(new Yrn(t),n)),n=n.filter(i=>i.numChildren()>0),r.add(Ku(new Wrn,e0(n))),n=n.filter(i=>i.numChildren()>0),r.add(Ku(new Urn,e0(n))),r.add(Ku(new Qrn(t),e0(n))),r.add(Ku(new Hrn,e0(n))),r.add(Ku(new Krn,e0(n))),r.add(Ku(new Zrn,e0(n))),r.add(Ku(new Grn,e0(n))),r.add(Ku(new Vrn,n)),r.add(Ku(new Jrn,e0(n))),e.sources=n,r.has(!0)}function tin(e,t){bq(e.sources);let n=0,r=0;for(let i=0;i<zD&&K1e(e,t);i++)n++;e.sources.map(xq);for(let i=0;i<zD&&K1e(e,t);i++)r++;bq(e.sources),Math.max(n,r)===zD&&je(`Maximum optimization runs(${zD}) reached.`)}class Fl{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Fl(()=>t(n))}}function lFe(e){di(e)?nin(e):rin(e)}function nin(e){const t=e.component.scales;for(const n of We(t)){const r=sin(e,n);if(t[n].setWithExplicit("domains",r),oin(e,n),e.component.data.isFaceted){let s=e;for(;!vc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const o of r.value)M0(o)&&(o.data=vq+o.data.replace(vq,""))}}}function rin(e){for(const n of e.children)lFe(n);const t=e.component.scales;for(const n of We(t)){let r,i=null;for(const s of e.children){const a=s.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Cm(r,a.getWithExplicit("domains"),"domains","scale",wq);const o=a.get("selectionExtent");i&&o&&i.selection!==o.selection&&je("The same selection must be used to override scale domains in a layered view."),i=o}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function iin(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Z1e(t,n);if(!i){je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Z1e(t,n);if(i)return"unaggregated"}return e}function sin(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=iin(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&ss(r.x2)?ss(r.x)?Cm(c0(n,i,e,"x"),c0(n,i,e,"x2"),"domain","scale",wq):c0(n,i,e,"x2"):t==="y"&&ss(r.y2)?ss(r.y)?Cm(c0(n,i,e,"y"),c0(n,i,e,"y2"),"domain","scale",wq):c0(n,i,e,"y2"):c0(n,i,e,t)}function ain(e,t,n){return e.map(r=>({signal:`{data: ${wre(r,{timeUnit:n,type:t})}}`}))}function nV(e,t,n){var r;const i=(r=Eo(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?ain(e,t,i):[e]}function c0(e,t,n,r){const{encoding:i}=n,s=ss(i[r]),{type:a}=s,o=s.timeUnit;if(IQt(t)){const f=c0(e,void 0,n,r),d=nV(t.unionWith,a,o);return R1([...f.value,...d])}else{if(Vt(t))return R1([t]);if(t&&t!=="unaggregated"&&!JRe(t))return R1(nV(t,a,o))}const l=n.stack;if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Sl([[0,1]]);const f=n.requestDataName($a);return Sl([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const u=tg(r)&&tt(s)?lin(n,r,e):void 0;if(rg(s)){const f=nV([s.datum],a,o);return Sl(f)}const c=s;if(t==="unaggregated"){const f=n.requestDataName($a),{field:d}=s;return Sl([{data:f,field:Ye({field:d,aggregate:"min"})},{data:f,field:Ye({field:d,aggregate:"max"})}])}else if(Rr(c.bin)){if(cl(e))return Sl(e==="bin-ordinal"?[]:[{data:Y5(u)?n.requestDataName($a):n.requestDataName(o6),field:n.vgField(r,WT(c,r)?{binSuffix:"range"}:{}),sort:u===!0||!js(u)?{field:n.vgField(r,{}),op:"min"}:u}]);{const{bin:f}=c;if(Rr(f)){const d=Gre(n,c.field,f);return Sl([new Fl(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return Sl([{data:n.requestDataName($a),field:n.vgField(r,{})}])}}else if(c.timeUnit&&Ft(["time","utc"],e)&&mre(r,c,di(n)?n.encoding[Td(r)]:void 0,n.stack,n.markDef,n.config)){const f=n.requestDataName($a);return Sl([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return Sl(u?[{data:Y5(u)?n.requestDataName($a):n.requestDataName(o6),field:n.vgField(r),sort:u}]:[{data:n.requestDataName($a),field:n.vgField(r)}])}function rV(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n??(t?"sum":V7)},r?{field:vm(r)}:{}),i?{order:i}:{})}function oin(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,s=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,a=JRe(i)&&i,o=jT(s)&&z7(s.extent)&&s.extent;(a||o)&&r.set("selectionExtent",a??o,!0)}function lin(e,t,n){if(!cl(n))return;const r=e.fieldDef(t),i=r.sort;if(p5e(i))return{op:"min",field:_v(r,t),order:"ascending"};const{stack:s}=e,a=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(o=>o.fieldDef.field)]:void 0;if(jf(i)){const o=s&&!Ft(a,i.field);return rV(i,o)}else if(h5e(i)){const{encoding:o,order:l}=i,u=e.fieldDef(o),{aggregate:c,field:f}=u,d=s&&!Ft(a,f);if(wm(c)||Eb(c))return rV({field:Ye(u),order:l},d);if(Xne(c)||!c)return rV({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ft(["ascending",void 0],i))return!0}}function Z1e(e,t){const{aggregate:n,type:r}=e;return n?cn(n)&&!IKt[n]?{valid:!1,reason:CZt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:$Zt(e)}:{valid:!0}:{valid:!1,reason:SZt(e)}}function wq(e,t,n,r){return e.explicit&&t.explicit&&je(TZt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function uin(e){const t=F0(e.map(a=>{if(M0(a)){const{sort:o}=a;return Nt(a,["sort"])}return a}),Mn),n=F0(e.map(a=>{if(M0(a)){const o=a.sort;return o!==void 0&&!Y5(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(a=>a!==void 0),Mn);if(t.length===0)return;if(t.length===1){const a=e[0];if(M0(a)&&n.length>0){let o=n[0];if(n.length>1)je(l1e),o=!0;else if(js(o)&&"field"in o){const l=o.field;a.field===l&&(o=o.order?{order:o.order}:!0)}return Object.assign(Object.assign({},a),{sort:o})}return a}const r=F0(n.map(a=>Y5(a)||!("op"in a)||a.op in AKt?a:(je(DZt(a)),!0)),Mn);let i;r.length===1?i=r[0]:r.length>1&&(je(l1e),i=!0);const s=F0(e.map(a=>M0(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:t.map(o=>o.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function Xre(e){if(M0(e)&&cn(e.field))return e.field;if(aQt(e)){let t;for(const n of e.fields)if(M0(n)&&cn(n.field)){if(!t)t=n.field;else if(t!==n.field)return je(IZt),t}return je(OZt),t}else if(oQt(e)){je(RZt);const t=e.fields[0];return cn(t)?t:void 0}}function aL(e,t){const r=e.component.scales[t].get("domains").map(i=>(M0(i)&&(i.data=e.lookupDataSource(i.data)),i));return uin(r)}function uFe(e){return HS(e)||Yre(e)?e.children.reduce((t,n)=>t.concat(uFe(n)),Q1e(e)):Q1e(e)}function Q1e(e){return We(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:a,selectionExtent:o,domains:l,range:u,reverse:c}=i,f=Nt(i,["name","type","selectionExtent","domains","range","reverse"]),d=cin(i.range,s,n);let h;o&&(h=ctn(e,o));const m=aL(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},m?{domain:m}:{}),h?{domainRaw:h}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function cin(e,t,n){return sd(n)&&ng(e)?{step:{signal:t+"_step"}}:e}class cFe extends bp{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:gk(this.get("domains"),t=>It(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const fin=["range","scheme"];function fFe(e){return e==="x"?"width":e==="y"?"height":void 0}function din(e){const t=e.component.scales;for(const n of B7){const r=t[n];if(!r)continue;const i=hin(n,e);r.setWithExplicit("range",i)}}function J1e(e,t){const n=e.fieldDef(t);if(n&&n.bin&&Rr(n.bin)){const r=Gre(e,n.field,n.bin),i=fFe(t),s=e.getName(i);return new Fl(()=>{const a=e.getSignalName(r),o=`(${a}.stop - ${a}.start) / ${a}.step`;return`${e.getSignalName(s)} / (${o})`})}}function hin(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const a of fin)if(n[a]!==void 0){const o=t5e(s,a),l=n5e(e,a);if(!o)je(LRe(s,a,e));else if(l)je(l);else switch(a){case"range":return It(n.range)&&sd(e)?R1(n.range.map(u=>{if(u==="width"||u==="height"){const c=t.getName(u),f=t.getSignalName.bind(t);return Fl.fromName(f,c)}return u})):R1(n.range);case"scheme":return R1(pin(n[a]))}}if(e===si||e===os){const a=e===si?"width":"height",o=r[a];if(od(o)){if(cl(s))return R1({step:o.step});je(PRe(a))}}return Sl(min(e,t))}function pin(e){return DQt(e)?Object.assign({scheme:e.name},Rh(e,["name"])):{scheme:e}}function min(e,t){const{size:n,config:r,mark:i,encoding:s}=t,a=t.getSignalName.bind(t),{type:o}=ss(s[e]),u=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case si:case os:{if(Ft(["point","band"],u)){if(e===si&&!n.width){const m=vk(r.view,"width");if(od(m))return m}else if(e===os&&!n.height){const m=vk(r.view,"height");if(od(m))return m}}const d=fFe(e),h=t.getName(d);return e===os&&Mu(u)?[Fl.fromName(a,h),0]:[0,Fl.fromName(a,h)]}case gp:{const d=t.component.scales[e].get("zero"),h=dFe(i,d,r),m=bin(i,n,t,r);return J5(u)?yin(h,m,gin(u,r,c,e)):[h,m]}case Hc:return[0,Math.PI*2];case kb:return[0,360];case $d:return[0,new Fl(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Qm:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Jm:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ul:return"symbol";case ll:case Ad:case _d:return u==="ordinal"?o==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case yp:case Km:case Zm:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}function gin(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&It(n)?n.length+1:(je(VZt(r)),3)}}function yin(e,t,n){const r=()=>{const i=xk(t),s=xk(e),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return Vt(t)?new Fl(r):{signal:r()}}function dFe(e,t,n){if(t)return Vt(t)?{signal:`${t.signal} ? 0 : ${dFe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(j7("size",e))}const eye=.95;function bin(e,t,n,r){const i={x:J1e(n,"x"),y:J1e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=tye(t,i,r.view);return qi(s)?s-1:new Fl(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=tye(t,i,r.view);return qi(s)?Math.pow(eye*s,2):new Fl(()=>`pow(${eye} * ${s.signal}, 2)`)}}throw new Error(j7("size",e))}function tye(e,t,n){const r=od(e.width)?e.width.step:s6(n,"width"),i=od(e.height)?e.height.step:s6(n,"height");return t.x||t.y?new Fl(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function hFe(e,t){di(e)?xin(e,t):mFe(e,t)}function xin(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:a}=e;for(const o of We(n)){const l=a[o],u=n[o],c=e.getScaleComponent(o),f=ss(i[o]),d=l[t],h=c.get("type"),m=c.get("padding"),g=c.get("paddingInner"),b=t5e(h,t),x=n5e(o,t);if(d!==void 0&&(b?x&&je(x):je(LRe(h,t,o))),b&&x===void 0)if(d!==void 0)u.copyKeyFromObject(t,l);else{const w=t in nye?nye[t]({model:e,channel:o,fieldOrDatumDef:f,scaleType:h,scalePadding:m,scalePaddingInner:g,domain:l.domain,markDef:s,config:r}):r.scale[t];w!==void 0&&u.set(t,w,!1)}}}const nye={bins:({model:e,fieldOrDatumDef:t})=>tt(t)?vin(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>win(e,t.type),nice:({scaleType:e,channel:t,fieldOrDatumDef:n})=>Sin(e,t,n),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Cin(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>$in(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:s})=>Ein(e,t,n,r.type,i,s.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=tt(e)?e.sort:void 0;return kin(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>Ain(e,t,n,r,i)};function pFe(e){di(e)?din(e):mFe(e,"range")}function mFe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?pFe(r):hFe(r,t);for(const r of We(n)){let i;for(const s of e.children){const a=s.component.scales[r];if(a){const o=a.getWithExplicit(t);i=Cm(i,o,t,"scale",J5e((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function vin(e,t){const n=t.bin;if(Rr(n)){const r=Gre(e,t.field,n);return new Fl(()=>e.getSignalName(r))}else if(oo(n)&&jT(n)&&n.step!==void 0)return{step:n.step}}function win(e,t){if(Ft([ll,Ad,_d],e)&&t!=="nominal")return"hcl"}function Sin(e,t,n){var r;if(!(!((r=ad(n))===null||r===void 0)&&r.bin||Ft([Li.TIME,Li.UTC],e)))return t in eg?!0:void 0}function Cin(e,t,n,r,i,s){if(e in eg){if(hc(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:o}=i;if(a==="bar"&&!(tt(r)&&(r.bin||r.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Li.POINT)return n.pointPadding}}function $in(e,t,n,r){if(e===void 0&&t in eg){const{bandPaddingInner:i,barBandPaddingInner:s,rectBandPaddingInner:a}=r;return Xi(i,n==="bar"?s:a)}}function Ein(e,t,n,r,i,s){if(e===void 0&&t in eg&&n===Li.BAND){const{bandPaddingOuter:a}=s;return Xi(a,Vt(i)?{signal:`${i.signal}/2`}:i/2)}}function kin(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Mu(e)&&t==="descending"?Vt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Mu(e)&&t==="descending")return!0}function Ain(e,t,n,r,i){if(!!n&&n!=="unaggregated"&&Mu(i)){if(It(n)){const a=n[0],o=n[n.length-1];if(a<=0&&o>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!J5(i))return!0;if(!(tt(t)&&t.bin)&&Ft([...Fu,...UKt],e)){const{orient:a,type:o}=r;return!(Ft(["bar","area","line","trail"],o)&&(a==="horizontal"&&e==="y"||a==="vertical"&&e==="x"))}return!1}function _in(e,t,n,r){const i=Tin(t,n,r),{type:s}=e;return tg(t)?s!==void 0?i5e(t,s)?tt(n)&&!r5e(s,n.type)?(je(AZt(s,i)),i):s:(je(kZt(t,s,i)),i):i:null}function Tin(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if(gx(e)||CO(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&je(HU(e,"ordinal")),"ordinal";if(e in eg){if(Ft(["rect","bar","image","rule"],n))return"band"}else if(n==="arc"&&e in Zne)return"band";return t.band!==void 0||xre(t)&&(!((r=t.axis)===null||r===void 0)&&r.tickBand)?"band":"point";case"temporal":return gx(e)?"time":CO(e)==="discrete"?(je(HU(e,"temporal")),"ordinal"):tt(t)&&t.timeUnit&&Eo(t.timeUnit).utc?"utc":"time";case"quantitative":return gx(e)?tt(t)&&Rr(t.bin)?"bin-ordinal":"linear":CO(e)==="discrete"?(je(HU(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(FRe(t.type))}function Nin(e,{ignoreRange:t}={}){gFe(e),lFe(e);for(const n of RQt)hFe(e,n);t||pFe(e)}function gFe(e){di(e)?e.component.scales=Din(e):e.component.scales=Oin(e)}function Din(e){const{encoding:t,mark:n}=e;return B7.reduce((r,i)=>{const s=ss(t[i]);if(s&&n===vRe&&i===ul&&s.type===BS)return r;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a=a??{};const o=_in(a,i,s,n);r[i]=new cFe(e.scaleName(i+"",!0),{value:o,explicit:a.type===o})}return r},{})}const Iin=J5e((e,t)=>c1e(e)-c1e(t));function Oin(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){gFe(s);for(const a of We(s.component.scales))if(i.scale[a]=(t=i.scale[a])!==null&&t!==void 0?t:nrn(a,e),i.scale[a]==="shared"){const o=r[a],l=s.component.scales[a].getWithExplicit("type");o?bQt(o.value,l.value)?r[a]=Cm(o,l,"type","scale",Iin):(i.scale[a]="independent",delete r[a]):r[a]=l}}for(const s of We(r)){const a=e.scaleName(s,!0),o=r[s];n[s]=new cFe(a,o);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),a),u.merged=!0)}}return n}class iV{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function di(e){return(e==null?void 0:e.type)==="unit"}function vc(e){return(e==null?void 0:e.type)==="facet"}function Yre(e){return(e==null?void 0:e.type)==="concat"}function HS(e){return(e==null?void 0:e.type)==="layer"}class Kre{constructor(t,n,r,i,s,a,o){var l,u;this.type=n,this.parent=r,this.config=s,this.view=o,this.children=[],this.correctDataNames=c=>(c.from&&c.from.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from&&c.from.facet&&c.from.facet.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=r,this.config=s,this.name=(l=t.name)!==null&&l!==void 0?l:i,this.title=y0(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new iV,this.projectionNameMap=r?r.projectionNameMap:new iV,this.signalNameMap=r?r.signalNameMap:new iV,this.data=t.data,this.description=t.description,this.transforms=ken((u=t.transform)!==null&&u!==void 0?u:[]),this.layout=n==="layer"||n==="unit"?{}:AJt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:W7(t)||r&&r.component.data.isFaceted&&t.data===void 0},layoutSize:new bp,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?hn(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Nin(this)}parseProjection(){iFe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){J6e(this)}assembleGroupStyle(){var t,n;if(this.type==="unit"||this.type==="layer")return(n=(t=this.view)===null||t===void 0?void 0:t.style)!==null&&n!==void 0?n:"cell"}assembleEncodeFromView(t){const{style:n}=t,r=Nt(t,["style"]),i={};for(const s of We(r)){const a=r[s];a!==void 0&&(i[s]=ki(a))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ki(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):Tr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=Nt(t,["spacing"]),{component:i,config:s}=this,a=trn(i.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Cu)t[r].title&&n.push(Ynn(this,r));for(const r of Ure)n=n.concat(Knn(this,r));return n}assembleAxes(){return Fnn(this.component.axes,this.config)}assembleLegends(){return tFe(this)}assembleProjections(){return $rn(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:s}=i,a=Nt(i,["encoding"]),o=Object.assign(Object.assign(Object.assign({},k5e(this.config.title).nonMark),a),s?{encode:{update:s}}:{});if(o.text)return Ft(["unit","layer"],this.type)?Ft(["middle",void 0],o.anchor)&&(o.frame=(n=o.frame)!==null&&n!==void 0?n:"group"):o.anchor=(r=o.anchor)!==null&&r!==void 0?r:"start",Tr(o)?void 0:o}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||vc(this.parent)?uFe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return Qr((this.name?this.name+"_":"")+t)}requestDataName(t){var n;const r=this.getName(t),i=this.component.data.outputNodeRefCounts;return i[r]=((n=i[r])!==null&&n!==void 0?n:0)+1,r}getSizeSignalRef(t){if(vc(this.parent)){const n=q6e(t),r=P7(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),a=i.get("range");if(cl(s)&&ng(a)){const o=i.get("name"),l=aL(this,r),u=Xre(l);if(u){const c=Ye({aggregate:"distinct",field:u},{expr:"datum"});return{signal:G6e(o,i,c)}}else return je(`Unknown field for ${r}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(TRe(t)&&tg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(QKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class yFe extends Kre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ye(r,n)}reduceFieldDef(t,n){return O5e(this.getMapping(),(r,i,s)=>{const a=ad(i);return a?t(r,a,s):r},n)}forEachFieldDef(t,n){$re(this.getMapping(),(r,i)=>{const s=ad(r);s&&t(s,i)},n)}}class oL extends wr{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=hn(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(s=a[1])!==null&&s!==void 0?s:"density"]}clone(){return new oL(null,hn(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mn(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=Nt(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class Ek extends wr{constructor(t,n){super(t),this.filter=n}clone(){return new Ek(null,Object.assign({},this.filter))}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Jn("invalid",s,r)!=="filter")return null;const o=n.reduceFieldDef((l,u,c)=>{const f=tg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Mu(d)&&u.aggregate!=="count"&&!$b(i)&&(l[u.field]=u)}return l},{});return We(o).length?new Ek(t,o):null}dependentFields(){return new Set(We(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mn(this.filter)}`}assemble(){const t=We(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ye(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class lL extends wr{constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,a)=>{var o;return(o=i[a])!==null&&o!==void 0?o:s})}clone(){return new lL(this.parent,hn(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class uL extends wr{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=hn(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new uL(null,hn(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class yx extends wr{constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}clone(){return new yx(null,hn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[kd,Ed],[Ru,Gc]]){const s=i.map(a=>{const o=ss(n.encoding[a]);return tt(o)?o.field:rg(o)?{expr:`${o.datum}`}:ep(o)?{expr:`${o.value}`}:void 0});(s[0]||s[1])&&(t=new yx(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ul)){const i=n.typedFieldDef(ul);i.type===BS&&(t=new yx(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(cn);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mn(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class kk extends wr{constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}clone(){return new kk(null,this.projection,hn(this.fields),hn(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[kd,Ed],[Ru,Gc]]){const i=r.map(a=>{const o=ss(n.encoding[a]);return tt(o)?o.field:rg(o)?{expr:`${o.datum}`}:ep(o)?{expr:`${o.value}`}:void 0}),s=r[0]===Ru?"2":"";(i[0]||i[1])&&(t=new kk(t,n.projectionName(),i,[n.getName("x"+s),n.getName("y"+s)]))}return t}dependentFields(){return new Set(this.fields.filter(cn))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mn(this.fields)} ${Mn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ry extends wr{constructor(t,n){super(t),this.transform=n}clone(){return new ry(null,hn(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new ry(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(tt(i)&&tt(s)){const a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;const o=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=a.impute,d=R5e(n.mark,r);return new ry(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:o.field},l?{method:l}:{}),u!==void 0?{value:u}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${Mn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:a,frame:o=[null,null]}=this.transform,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:aen(r)?this.processSequence(r):r}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){const u=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:o,ignorePeers:!1},s?{groupby:s}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class cL extends wr{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=hn(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new cL(null,hn(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mn(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=Nt(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class Ak extends wr{constructor(t,n,r){super(t),this.transform=n,this.secondary=r}clone(){return new Ak(null,hn(this.transform),this.secondary)}static make(t,n,r,i){const s=n.component.data.sources,{from:a}=r;let o=null;if(len(a)){let l=vFe(a.data,s);l||(l=new Nv(a.data),s.push(l));const u=n.getName(`lookup_${i}`);o=new go(l,u,"lookup",n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=o}else if(uen(a)){const l=a.selection;if(r=Object.assign({as:l},r),o=n.getSelectionComponent(Qr(l),l).materialized,!o)throw new Error(tZt(l))}return new Ak(t,r,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ii(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ii(this.transform.as)}:{});else{let n=this.transform.as;cn(n)||(je(aZt),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class fL extends wr{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=hn(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new fL(null,hn(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mn(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=Nt(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}class dL extends wr{constructor(t,n){var r,i,s;super(t),this.transform=n,this.transform=hn(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new dL(null,hn(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mn(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=Nt(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class hL extends wr{constructor(t,n){super(t),this.transform=n}clone(){return new hL(null,hn(this.transform))}addDimensions(t){var n;this.transform.groupby=F0(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${Mn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),s!==void 0?{op:s}:{}),r!==void 0?{groupby:r}:{})}}class pL extends wr{constructor(t,n){super(t),this.transform=n}clone(){return new pL(null,hn(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function bFe(e){let t=0;function n(r,i){var s;if(r instanceof Nv&&!r.isGenerator&&!wk(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ra&&(r.parent instanceof Nv&&!i.source?(i.format=Object.assign(Object.assign({},(s=i.format)!==null&&s!==void 0?s:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof VS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source;for(const a of r.assemble())e.push(a);return}switch((r instanceof KT||r instanceof ZT||r instanceof Ek||r instanceof US||r instanceof Av||r instanceof kk||r instanceof yx||r instanceof xc||r instanceof Ak||r instanceof WS||r instanceof Nb||r instanceof uL||r instanceof lL||r instanceof oL||r instanceof cL||r instanceof fL||r instanceof dL||r instanceof km||r instanceof pL||r instanceof hL)&&i.transform.push(r.assemble()),(r instanceof Vf||r instanceof Uf||r instanceof ry||r instanceof Ph)&&i.transform.push(...r.assemble()),r instanceof go&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof go?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof go&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let a=i.name;!i.source||i.transform.length>0?e.push(i):a=i.source;for(const o of r.children)n(o,{name:null,source:a,transform:[]});break}}}return n}function Rin(e){const t=[],n=bFe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Fin(e,t){var n,r;const i=[],s=bFe(i);let a=0;for(const l of e.sources){l.hasName()||(l.dataName=`source_${a++}`);const u=l.assemble();s(l,u)}for(const l of i)l.transform.length===0&&delete l.transform;let o=0;for(const[l,u]of i.entries())((n=u.transform)!==null&&n!==void 0?n:[]).length===0&&!u.source&&i.splice(o++,0,i.splice(l,1)[0]);for(const l of i)for(const u of(r=l.transform)!==null&&r!==void 0?r:[])u.type==="lookup"&&(u.from=e.outputNodes[u.from].getSource());for(const l of i)l.name in t&&(l.values=t[l.name]);return i}function Min(e){return e==="top"||e==="left"||Vt(e)?"header":"footer"}function Lin(e){for(const t of Cu)Pin(e,t);rye(e,"x"),rye(e,"y")}function Pin(e,t){var n;const{facet:r,config:i,child:s,component:a}=e;if(e.channelHasField(t)){const o=r[t],l=Tv("title",null,i,t);let u=ey(o,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});s.component.layoutHeaders[t].title&&(u=It(u)?u.join(", "):u,u+=" / "+s.component.layoutHeaders[t].title,s.component.layoutHeaders[t].title=null);const c=Tv("labelOrient",o,i,t),f=(n=o.header)!==null&&n!==void 0?n:{},d=Xi(f.labels,i.header.labels,!0),h=Ft(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:u,facetFieldDef:o,[h]:t==="facet"?[]:[xFe(e,t,d)]}}}function xFe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function rye(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:s}=e.component;if(s.axis[t]=Hre(s,t),s.axis[t]==="shared"){const a=t==="x"?"column":"row",o=i[a];for(const l of r.component.axes[t]){const u=Min(l.get("orient"));o[u]=(n=o[u])!==null&&n!==void 0?n:[xFe(e,a,!1)];const c=w$(l,"main",e.config,{header:!0});c&&o[u][0].axes.push(c),l.mainExtracted=!0}}}}function Bin(e){Zre(e),p6(e,"width"),p6(e,"height")}function zin(e){Zre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";p6(e,t),p6(e,n)}function Zre(e){for(const t of e.children)t.parseLayoutSize()}function p6(e,t){const n=q6e(t),r=P7(n),i=e.component.resolve,s=e.component.layoutSize;let a;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),u=i.scale[r];if(u==="independent"&&l.value==="step"){a=void 0;break}if(a){if(u==="independent"&&a.value!==l.value){a=void 0;break}a=Cm(a,l,n,"")}else a=l}if(a){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,a)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function jin(e){const{size:t,component:n}=e;for(const r of Fu){const i=Nd(r);if(t[i]){const s=t[i];n.layoutSize.set(i,od(s)?"step":s,!0)}else{const s=Uin(e,i);n.layoutSize.set(i,s,!1)}}}function Uin(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),a=i.get("range");if(cl(s)){const o=vk(r.view,t);return ng(a)||od(o)?"step":o}else return sq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return sq(r.view,t);{const s=vk(r.view,t);return od(s)?s.step:s}}}function Sq(e,t,n){return Ye(t,Object.assign({suffix:`by_${Ye(e)}`},n??{}))}class tE extends yFe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=tie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet,i)}initFacet(t,n){return UT(t)?O5e(t,(r,i,s)=>Ft([Fh,Mh],s)?i.field===void 0?(je(eq(i,s)),r):(r[s]=rq(i,s,n),r):(je(j7(s,"facet")),r),{}):{facet:rq(t,"facet",n)}}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=mL(this),this.child.parseData()}parseLayoutSize(){Zre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Lin(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const s of Cu)for(const a of Vre){const o=this.component.layoutHeaders[s],l=o[a],{facetFieldDef:u}=o;if(u){const c=Tv("titleOrient",u,this.config,s);if(Ft(["right","bottom"],c)){const f=rL(s,c);i.titleAnchor=(t=i.titleAnchor)!==null&&t!==void 0?t:{},i.titleAnchor[f]="end"}}if(l!=null&&l[0]){const c=s==="row"?"height":"width",f=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(c)&&(i[f]=(n=i[f])!==null&&n!==void 0?n:{},i[f][s]=.5),o.title&&(i.offset=(r=i.offset)!==null&&r!==void 0?r:{},i.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof tE))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(t){return this.parent&&this.parent instanceof tE?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Ye(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof tE){if(this.child.channelHasField("column")){const i=Ye(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Fu){const s=this.child.component.scales[i];if(s&&!s.merged){const a=s.get("type"),o=s.get("range");if(cl(a)&&ng(o)){const l=aL(this.child,i),u=Xre(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):je(`Unknown field for ${i}. Cannot calculate view size.`)}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:a,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const c of Cu){const f=this.facet[c];if(f){l.push(Ye(f));const{bin:d,sort:h}=f;if(Rr(d)&&l.push(Ye(f,{binSuffix:"end"})),jf(h)){const{field:m,op:g=V7}=h,b=Sq(f,h);r&&i?(s.push(b),a.push("max"),o.push(b)):(s.push(m),a.push(g),o.push(b))}else if(It(h)){const m=_v(f,c);s.push(m),a.push("max"),o.push(m)}}}const u=!!r&&!!i;return Object.assign({name:t,data:n,groupby:l},u||s.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),s.length?{fields:s,ops:a,as:o}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?jf(r.sort)?[Sq(r,r.sort,{expr:"datum"})]:It(r.sort)?[_v(r,t,{expr:"datum"})]:[Ye(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(jf(i)?i.order:!It(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return gq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of Ure)if(t[i]){const s=Tv("labelOrient",t[i],n,i);if(Ft(r[i],s))return gq(t[i],i,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Rin(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:Cu.map(l=>this.facetSortFields(l)).flat(),order:Cu.map(l=>this.facetSortOrder(l)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(atn(this,[])))]}getMapping(){return this.facet}}function Vin(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(jf(s.sort)){const{field:a,op:o=V7}=s.sort;e=i=new Nb(e,{joinaggregate:[{op:o,field:a,as:Sq(s,s.sort,{forAs:!0})}],groupby:[Ye(s)]})}return i}return null}function vFe(e,t){var n,r,i,s,a,o,l,u,c,f;for(const d of t){const h=d.data;if(!(e.name&&d.hasName()&&e.name!==d.dataName)&&!(!((n=e.format)===null||n===void 0)&&n.mesh&&(!((r=h.format)===null||r===void 0)&&r.feature))&&!((!((i=e.format)===null||i===void 0)&&i.feature||!((s=h.format)===null||s===void 0)&&s.feature)&&((a=e.format)===null||a===void 0?void 0:a.feature)!==((o=h.format)===null||o===void 0?void 0:o.feature))&&!((!((l=e.format)===null||l===void 0)&&l.mesh||!((u=h.format)===null||u===void 0)&&u.mesh)&&((c=e.format)===null||c===void 0?void 0:c.mesh)!==((f=h.format)===null||f===void 0?void 0:f.mesh))){if(a6(e)&&a6(h)){if(LT(e.values,h.values))return d}else if(wk(e)&&wk(h)){if(e.url===h.url)return d}else if(e6e(e)&&e.name===d.dataName)return d}}return null}function Win(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Nv({values:[]});return t.push(r),r}const n=vFe(e.data,t);if(n)return ny(e.data)||(n.data.format=tKt({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Nv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Hin(e,t,n){var r,i;let s=0;for(const a of t.transforms){let o,l;if(xen(a))l=e=new Av(e,a),o="derived";else if(r6e(a)){const u=Lrn(a);l=e=(r=Ra.makeWithAncestors(e,{},u,n))!==null&&r!==void 0?r:e,e=new US(e,t,a.filter)}else if(ven(a))l=e=Vf.makeFromTransform(e,a,t),o="number";else if(Sen(a))o="date",n.getWithExplicit(a.field).value===void 0&&(e=new Ra(e,{[a.field]:o}),n.set(a.field,o,!1)),l=e=Uf.makeFromTransform(e,a);else if(Cen(a))l=e=xc.makeFromTransform(e,a),o="number",Pre(t)&&(e=new km(e));else if(oen(a))l=e=Ak.make(e,t,a,s++),o="derived";else if(gen(a))l=e=new WS(e,a),o="number";else if(yen(a))l=e=new Nb(e,a),o="number";else if($en(a))l=e=Ph.makeFromTransform(e,a),o="derived";else if(Een(a))l=e=new uL(e,a),o="derived";else if(ben(a))l=e=new lL(e,a),o="derived";else if(cen(a))l=e=new hL(e,a),o="derived";else if(men(a))e=new pL(e,a);else if(wen(a))l=e=ry.makeFromTransform(e,a),o="derived";else if(fen(a))l=e=new oL(e,a),o="derived";else if(den(a))l=e=new fL(e,a),o="derived";else if(hen(a))l=e=new dL(e,a),o="derived";else if(pen(a))l=e=new cL(e,a),o="derived";else{je(sZt(a));continue}if(l&&o!==void 0)for(const u of(i=l.producedFields())!==null&&i!==void 0?i:[])n.set(u,o,!1)}return e}function mL(e){var t,n,r,i,s,a,o,l,u,c;let f=Win(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,m=e.parent?e.parent.component.data.ancestorParse.clone():new sen,g=e.data;ny(g)?(t6e(g)?f=new ZT(f,g.sequence):Ore(g)&&(f=new KT(f,g.graticule)),m.parseNothing=!0):((t=g==null?void 0:g.format)===null||t===void 0?void 0:t.parse)===null&&(m.parseNothing=!0),f=(n=Ra.makeExplicit(f,e,m))!==null&&n!==void 0?n:f,f=new km(f);const b=e.parent&&HS(e.parent);(di(e)||vc(e))&&b&&(f=(r=Vf.makeFromEncoding(f,e))!==null&&r!==void 0?r:f),e.transforms.length>0&&(f=Hin(f,e,m));const x=Brn(e),w=Prn(e);f=(i=Ra.makeWithAncestors(f,{},Object.assign(Object.assign({},x),w),m))!==null&&i!==void 0?i:f,di(e)&&(f=yx.parseAll(f,e),f=kk.parseAll(f,e)),(di(e)||vc(e))&&(b||(f=(s=Vf.makeFromEncoding(f,e))!==null&&s!==void 0?s:f),f=(a=Uf.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=Av.parseAllForSortIndex(f,e));const C=e.getName(o6),S=new go(f,C,o6,h);if(d[C]=S,f=S,di(e)){const N=xc.makeFromEncoding(f,e);N&&(f=N,Pre(e)&&(f=new km(f))),f=(o=ry.makeFromEncoding(f,e))!==null&&o!==void 0?o:f,f=(l=Ph.makeFromEncoding(f,e))!==null&&l!==void 0?l:f}di(e)&&(f=(u=Ek.make(f,e))!==null&&u!==void 0?u:f);const E=e.getName($a),A=new go(f,E,$a,h);d[E]=A,f=A,di(e)&&Onn(e,A);let k=null;if(vc(e)){const N=e.getName("facet");f=(c=Vin(f,e.facet))!==null&&c!==void 0?c:f,k=new VS(f,e,N,A.getSource()),d[N]=k}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:S,main:A,facetRoot:k,ancestorParse:m})}class Gin extends Kre{constructor(t,n,r,i){var s,a,o,l;super(t,"concat",n,r,i,t.resolve),(((a=(s=t.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((l=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||l===void 0?void 0:l.y)==="shared")&&je(rZt),this.children=this.getChildren(t).map((u,c)=>tie(u,this,this.getName("concat_"+c),void 0,i))}parseData(){this.component.data=mL(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return X7(t)?t.vconcat:Dre(t)?t.hconcat:t.concat}parseLayoutSize(){zin(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Wre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function qin(e){return e===!1||e===null}const Xin=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},yRe),{labelExpr:1,encode:1}),wFe=We(Xin);class Qre extends bp{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Qre(hn(this.explicit),hn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!qin(this.get(t))}hasOrientSignalRef(){return Vt(this.explicit.orient)}}function Yin(e,t,n){var r;const{encoding:i,config:s}=e,a=(r=ss(i[t]))!==null&&r!==void 0?r:ss(i[Td(t)]),o=e.axis(t)||{},{format:l,formatType:u}=o;return Ly(u)?Object.assign({text:hre({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:u,config:s})},n):n}function Kin(e){return Fu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[rsn(n,e)]),t),{})}const Zin={bottom:"top",top:"bottom",left:"right",right:"left"};function Qin(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const s of e.children){s.parseAxesAndHeaders();for(const a of We(s.component.axes))r.axis[a]=Hre(e.component.resolve,a),r.axis[a]==="shared"&&(n[a]=Jin(n[a],s.component.axes[a]),n[a]||(r.axis[a]="independent",delete n[a]))}for(const s of Fu){for(const a of e.children)if(a.component.axes[s]){if(r.axis[s]==="independent"){n[s]=((t=n[s])!==null&&t!==void 0?t:[]).concat(a.component.axes[s]);for(const o of a.component.axes[s]){const{value:l,explicit:u}=o.getWithExplicit("orient");if(!Vt(l)){if(i[l]>0&&!u){const c=Zin[l];i[l]>i[c]&&o.set("orient",c,!1)}i[l]++}}}delete a.component.axes[s]}if(r.axis[s]==="independent"&&n[s]&&n[s].length>1)for(const a of n[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function Jin(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const a=i.getWithExplicit("orient"),o=s.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;e[r]=esn(i,s)}}}else return t.map(n=>n.clone());return e}function esn(e,t){for(const n of wFe){const r=Cm(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return I5e(i,s);case"gridScale":return{explicit:i.explicit,value:Xi(i.value,s.value)}}return K7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function tsn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Vt(n.labelAngle)?n.labelAngle:K5(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===U6e(r,i))return!0}return e===n[t]}const nsn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function rsn(e,t){var n,r,i;let s=t.axis(e);const a=new Qre,o=ss(t.encoding[e]),{mark:l,config:u}=t,c=(s==null?void 0:s.orient)||((n=u[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=u.axis)===null||r===void 0?void 0:r.orient)||Hnn(e),f=t.getScaleComponent(e).get("type"),d=Pnn(e,f,c,t.config),h=s!==void 0?!s:pq("disable",u,s==null?void 0:s.style,d).configValue;if(a.set("disable",h,s!==void 0),h)return a;s=s||{};const m=Unn(t,s,e,o,d),g={fieldOrDatumDef:o,axis:s,channel:e,model:t,scaleType:f,orient:c,labelAngle:m,mark:l,config:u};for(const w of wFe){const C=w in U1e?U1e[w](g):Zge(w)?s[w]:void 0,S=C!==void 0,E=tsn(C,w,s,t,e);if(S&&E)a.set(w,C,E);else{const{configValue:A=void 0,configFrom:k=void 0}=Zge(w)&&w!=="values"?pq(w,t.config,s.style,d):{},N=A!==void 0;S&&!N?a.set(w,C,E):(k!=="vgAxisConfig"||nsn.has(w)&&N||Wne(A)||Vt(A))&&a.set(w,A,!1)}}const b=(i=s.encoding)!==null&&i!==void 0?i:{},x=gRe.reduce((w,C)=>{var S;if(!a.hasAxisPart(C))return w;const E=X6e((S=b[C])!==null&&S!==void 0?S:{},t),A=C==="labels"?Yin(t,e,E):E;return A!==void 0&&!Tr(A)&&(w[C]={update:A}),w},{});return Tr(x)||a.set("encode",x,!!s.encoding||s.labelAngle!==void 0),a}function isn({encoding:e,size:t}){for(const n of Fu){const r=Nd(n);od(t[r])&&_f(e[n])&&(delete t[r],je(PRe(r)))}return t}function ssn(e,t,n,{graticule:r}){const i=id(e)?Object.assign({},e):{type:e},s=Jn("orient",i,n);if(i.orient=usn(i.type,t,s),s!==void 0&&s!==i.orient&&je(xZt(i.orient,s)),i.type==="bar"&&i.orient){const u=Jn("cornerRadiusEnd",i,n);if(u!==void 0){const c=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:wKt[i.orient];for(const f of c)i[f]=u;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Jn("opacity",i,n)===void 0&&(i.opacity=osn(i.type,t)),i.filled===void 0&&(i.filled=r?!1:lsn(i,n)),Jn("cursor",i,n)===void 0&&(i.cursor=asn(i,t,n)),i}function asn(e,t,n){return t.href||e.href||Jn("href",e,n)?"pointer":e.cursor}function osn(e,t){if(Ft([T7,Hne,Gne,qne],e)&&!Sre(t))return .7}function lsn(e,t){const n=Py("filled",e,t),r=e.type;return Xi(n,r!==T7&&r!==_7&&r!==Z5)}function usn(e,t,n){switch(e){case T7:case Gne:case qne:case xRe:case hKt:case dKt:return}const{x:r,y:i,x2:s,y2:a}=t;switch(e){case A7:if(tt(r)&&(oo(r.bin)||tt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(tt(i)&&(oo(i.bin)||tt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s&&(tt(r)&&r.type===My&&!Rr(r.bin)||nq(r)))return"horizontal";if(!a&&(tt(i)&&i.type===My&&!Rr(i.bin)||nq(i)))return"vertical"}case Z5:if(s&&!(tt(r)&&oo(r.bin))&&a&&!(tt(i)&&oo(i.bin)))return;case k7:if(a)return tt(i)&&oo(i.bin)?"horizontal":"vertical";if(s)return tt(r)&&oo(r.bin)?"vertical":"horizontal";if(e===Z5){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case _7:case Hne:{const o=_f(r),l=_f(i);if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l){const u=r,c=i,f=u.type===$v,d=c.type===$v;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!u.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":u.aggregate&&!c.aggregate?e!=="tick"?"horizontal":"vertical":n||"vertical"}else return n||void 0}}return"vertical"}const csn={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ia("x",e,{defaultPos:"mid"})),Ia("y",e,{defaultPos:"mid"})),$m(e,"radius","arc")),$m(e,"theta","arc"))},fsn={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),c6("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),c6("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Mre(e))},dsn={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),$m(e,"x","bar")),$m(e,"y","bar"))},hsn={vgMark:"shape",encodeEntry:e=>Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&tt(n)&&n.type===BS?{field:Ye(n,{expr:"datum"})}:{})]}},psn={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),$m(e,"x","image")),$m(e,"y","image")),Rre(e,"url"))},msn={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ia("x",e,{defaultPos:"mid"})),Ia("y",e,{defaultPos:"mid"})),_s("size",e,{vgChannel:"strokeWidth"})),Mre(e))},gsn={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ia("x",e,{defaultPos:"mid"})),Ia("y",e,{defaultPos:"mid"})),_s("size",e)),Mre(e))};function Jre(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ia("x",e,{defaultPos:"mid"})),Ia("y",e,{defaultPos:"mid"})),_s("size",e)),_s("angle",e)),ysn(e,n,t))}function ysn(e,t,n){return n?{shape:{value:n}}:_s("shape",e)}const bsn={vgMark:"symbol",encodeEntry:e=>Jre(e)},xsn={vgMark:"symbol",encodeEntry:e=>Jre(e,"circle")},vsn={vgMark:"symbol",encodeEntry:e=>Jre(e,"square")},wsn={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),$m(e,"x","rect")),$m(e,"y","rect"))},Ssn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),c6("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),c6("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),_s("size",e,{vgChannel:"strokeWidth"}))}},Csn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Ia("x",e,{defaultPos:"mid"})),Ia("y",e,{defaultPos:"mid"})),Rre(e)),_s("size",e,{vgChannel:"fontSize"})),_s("angle",e)),D1e("align",$sn(e.markDef,n,t))),D1e("baseline",Esn(e.markDef,n,t))),Ia("radius",e,{defaultPos:null,isMidPoint:!0})),Ia("theta",e,{defaultPos:null,isMidPoint:!0}))}};function $sn(e,t,n){if(Jn("align",e,n)===void 0)return"center"}function Esn(e,t,n){if(Jn("baseline",e,n)===void 0)return"middle"}const ksn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Uu(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ia("x",e,{defaultPos:"mid",vgChannel:"xc"})),Ia("y",e,{defaultPos:"mid",vgChannel:"yc"})),_s("size",e,{defaultValue:Asn(e),vgChannel:i})),{[s]:ki(Jn("thickness",n,t))})}};function Asn(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,s=i==="horizontal"?"width":"height",a=e.getScaleComponent(i==="horizontal"?"x":"y"),o=(t=Jn("size",r,n,{vgChannel:s}))!==null&&t!==void 0?t:n.tick.bandSize;if(o!==void 0)return o;{const l=a?a.get("range"):void 0;return l&&ng(l)&&qi(l.step)?l.step*3/4:s6(n.view,s)*3/4}}const jD={arc:csn,area:fsn,bar:dsn,circle:xsn,geoshape:hsn,image:psn,line:msn,point:bsn,rect:wsn,rule:Ssn,square:vsn,text:Csn,tick:ksn,trail:gsn};function _sn(e){return Ft([_7,k7,pKt],e.mark)?Tsn(e):Ft([A7],e.mark)?Nsn(e):m6(e)}const iye="faceted_path_";function Tsn(e){const t=R5e(e.mark,e.encoding),n=m6(e,{fromPrefix:t.length>0?iye:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:iye+e.requestDataName($a),data:e.requestDataName($a),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}const sye="stack_group_";function Nsn(e){const t=GU.some(n=>Jn(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t){const[n]=m6(e,{fromPrefix:sye}),r=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),s=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(m=>`scale('${r}',${m})`).join(",")})`};let a,o;e.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},mk(n.encode.update,["y","yc","y2","height",...GU])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},Rh(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},mk(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},Rh(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const f of GU){const d=Py(f,e.markDef,e.config);n.encode.update[f]?(a[f]=n.encode.update[f],delete n.encode.update[f]):d&&(a[f]=ki(d)),d&&(n.encode.update[f]={value:0})}const l=e.fieldDef(e.stack.groupbyChannel),u=Ye(l)?[Ye(l)]:[];return(l!=null&&l.bin||l!=null&&l.timeUnit)&&u.push(Ye(l,{binSuffix:"end"})),a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(n.encode.update[d])return Object.assign(Object.assign({},f),{[d]:n.encode.update[d]});{const h=Py(d,e.markDef,e.config);return h!==void 0?Object.assign(Object.assign({},f),{[d]:ki(h)}):f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName($a),name:sye+e.requestDataName($a),groupby:u,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[n]}]}]}else return m6(e)}function Dsn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,a=t.order;if(!(!It(a)&&ep(a)&&Xge(a.value)||!a&&Xge(Jn("order",i,s)))){if((It(a)||tt(a))&&!n)return T5e(a,{expr:"datum"});if($b(r)){const o=i.orient==="horizontal"?"y":"x",l=t[o];if(tt(l)){const u=l.sort;if(It(u))return{field:Ye(l,{prefix:o,suffix:"sort_index",expr:"datum"})};if(jf(u))return{field:Ye({aggregate:Sre(e.encoding)?u.op:void 0,field:u.field},{expr:"datum"})};if(h5e(u)){const c=e.fieldDef(u.encoding);return{field:Ye(c,{expr:"datum"}),order:u.order}}else return u===null?void 0:{field:Ye(l,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}return}}}function m6(e,t={fromPrefix:""}){const{mark:n,markDef:r,config:i}=e,s=Xi(r.clip,Isn(e),Osn(e)),a=A5e(r),o=e.encoding.key,l=Dsn(e),u=Rsn(e),c=Jn("aria",r,i),f=jD[n].postEncodingTransform?jD[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:jD[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),o?{key:o.field}:{}),l?{sort:l}:{}),u||{}),c===!1?{aria:c}:{}),{from:{data:t.fromPrefix+e.requestDataName($a)},encode:{update:jD[n].encodeEntry(e)}}),f?{transform:f}:{})]}function Isn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function Osn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Rsn(e){if(!e.component.selection)return null;const t=We(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=We(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}class SFe extends yFe{constructor(t,n,r,i={},s){var a,o;super(t,"unit",n,r,s,void 0,g1e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const l=id(t.mark)?t.mark.type:t.mark;this.markDef=ssn(t.mark,(a=t.encoding)!==null&&a!==void 0?a:{},s,{graticule:t.data&&Ore(t.data)});const u=this.encoding=rJt((o=t.encoding)!==null&&o!==void 0?o:{},this.markDef,s);this.size=isn({encoding:u,size:g1e(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=Y5e(l,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegend(u),this.specifiedProjection=t.projection,this.selection=t.selection}get hasProjection(){const{encoding:t}=this,n=this.mark===vRe,r=t&&MKt.some(i=>qt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return B7.reduce((r,i)=>{var s;const a=ss(n[i]);return a&&(r[i]=(s=a.scale)!==null&&s!==void 0?s:{}),r},{})}initAxes(t){return Fu.reduce((n,r)=>{const i=t[r];if(qt(i)||r===si&&qt(t.x2)||r===os&&qt(t.y2)){const s=qt(i)?i.axis:void 0;n[r]=s&&Object.assign({},s)}return n},{})}initLegend(t){return VKt.reduce((n,r)=>{const i=ss(t[r]);if(i&&HKt(r)){const s=i.legend;n[r]=s&&Object.assign({},s)}return n},{})}parseData(){this.component.data=mL(this)}parseLayoutSize(){jin(this)}parseSelections(){this.component.selection=Inn(this,this.selection)}parseMarkGroup(){this.component.mark=_sn(this)}parseAxesAndHeaders(){this.component.axes=Kin(this)}assembleSelectionTopLevelSignals(t){return otn(this,t)}assembleSignals(){return[...L6e(this),...stn(this,[])]}assembleSelectionData(t){return ltn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Wre(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!HS(this.parent))&&(n=C6e(this,n)),n.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return ty(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ad(n)}typedFieldDef(t){const n=this.fieldDef(t);return Vl(n)?n:null}}class eie extends Kre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((o,l)=>{if(Y7(o))return new eie(o,this,this.getName("layer_"+l),a,s);if(hp(o))return new SFe(o,this,this.getName("layer_"+l),a,s);throw new Error(Jne(o))})}parseData(){this.component.data=mL(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Bin(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Qin(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),L6e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Wre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return utn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),tFe(this))}}function tie(e,t,n,r,i){if(W7(e))return new tE(e,t,n,i);if(Y7(e))return new eie(e,t,n,r,i);if(hp(e))return new SFe(e,t,n,r,i);if($Jt(e))return new Gin(e,t,n,i);throw new Error(Jne(e))}function Fsn(e,t={}){t.logger&&WZt(t.logger),t.fieldTitle&&S5e(t.fieldTitle);try{const n=q5e(uRe(t.config,e.config)),r=Q5e(e,n),i=tie(r,null,"",void 0,n);return i.parse(),tin(i.component.data,i),{spec:Lsn(i,Msn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&HZt(),t.fieldTitle&&KQt()}}function Msn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):cn(t)&&(t={type:t}),i&&s&&nen(t.type)){if(i==="step"&&s==="step")je(r1e()),t.type="pad";else if(i==="step"||s==="step"){const a=i==="step"?"width":"height";je(r1e(P7(a)));const o=a==="width"?"height":"width";t.type=ren(o)}}return Object.assign(Object.assign(Object.assign({},We(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),A1e(n)),A1e(e))}function Lsn(e,t,n={},r){const i=e.config?MJt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Fin(e.component.data,n)),a=e.assembleProjections(),o=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();return c=c.filter(f=>(f.name==="width"||f.name==="height")&&f.value!==void 0?(t[f.name]=+f.value,!1):!0),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),o?{title:o}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:s}),a.length>0?{projections:a}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),r?{usermeta:r}:{})}class Psn extends X5e{mapUnit(t,{config:n}){if(t.encoding){const{encoding:r,transform:i}=t,{bins:s,timeUnits:a,aggregate:o,groupby:l,encoding:u}=Cre(r,n),c=[...i||[],...s,...a,...o.length===0?[]:[{aggregate:o,groupby:l}]];return Object.assign(Object.assign(Object.assign({},t),c.length>0?{transform:c}:{}),{encoding:u})}else return t}}const Bsn=new Psn;function zsn(e,t){return Bsn.map(e,{config:t})}const jsn=RYt.version,Usn=Object.freeze(Object.defineProperty({__proto__:null,compile:Fsn,extractTransforms:zsn,normalize:Q5e,version:jsn},Symbol.toStringTag,{value:"Module"}));function CFe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Vsn="2.15.0",Wsn={version:Vsn};const O2="#fff",aye="#888",Hsn={background:"#333",view:{stroke:aye},title:{color:O2,subtitleColor:O2},style:{"guide-label":{fill:O2},"guide-title":{fill:O2}},axis:{domainColor:O2,gridColor:aye,tickColor:O2}},Pg="#4572a7",Gsn={background:"#fff",arc:{fill:Pg},area:{fill:Pg},line:{stroke:Pg,strokeWidth:2},path:{stroke:Pg},rect:{fill:Pg},shape:{stroke:Pg},symbol:{fill:Pg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Bg="#30a2da",sV="#cbcbcb",qsn="#999",Xsn="#333",oye="#f0f0f0",lye="#333",Ysn={arc:{fill:Bg},area:{fill:Bg},axis:{domainColor:sV,grid:!0,gridColor:sV,gridWidth:1,labelColor:qsn,labelFontSize:10,titleColor:Xsn,tickColor:sV,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:oye,group:{fill:oye},legend:{labelColor:lye,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:lye,titleFontSize:14,titlePadding:10},line:{stroke:Bg,strokeWidth:2},path:{stroke:Bg,strokeWidth:.5},rect:{fill:Bg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Bg},bar:{binSpacing:2,fill:Bg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},zg="#000",Ksn={group:{fill:"#e5e5e5"},arc:{fill:zg},area:{fill:zg},line:{stroke:zg},path:{stroke:zg},rect:{fill:zg},shape:{stroke:zg},symbol:{fill:zg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Zsn=22,Qsn="normal",uye="Benton Gothic, sans-serif",cye=11.5,Jsn="normal",jg="#82c6df",aV="Benton Gothic Bold, sans-serif",fye="normal",dye=13,N3={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},ean={background:"#ffffff",title:{anchor:"start",color:"#000000",font:aV,fontSize:Zsn,fontWeight:Qsn},arc:{fill:jg},area:{fill:jg},line:{stroke:jg,strokeWidth:2},path:{stroke:jg},rect:{fill:jg},shape:{stroke:jg},symbol:{fill:jg,size:30},axis:{labelFont:uye,labelFontSize:cye,labelFontWeight:Jsn,titleFont:aV,titleFontSize:dye,titleFontWeight:fye},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:uye,labelFontSize:cye,symbolType:"square",titleFont:aV,titleFontSize:dye,titleFontWeight:fye},range:{category:N3["category-6"],diverging:N3["fireandice-6"],heatmap:N3["fire-7"],ordinal:N3["fire-7"],ramp:N3["fire-7"]}},Ug="#ab5787",UD="#979797",tan={background:"#f9f9f9",arc:{fill:Ug},area:{fill:Ug},line:{stroke:Ug},path:{stroke:Ug},rect:{fill:Ug},shape:{stroke:Ug},symbol:{fill:Ug,size:30},axis:{domainColor:UD,domainWidth:.5,gridWidth:.2,labelColor:UD,tickColor:UD,tickWidth:.2,titleColor:UD},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Vg="#3e5c69",nan={background:"#fff",arc:{fill:Vg},area:{fill:Vg},line:{stroke:Vg},path:{stroke:Vg},rect:{fill:Vg},shape:{stroke:Vg},symbol:{fill:Vg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},lu="#1696d2",hye="#000000",ran="#FFFFFF",VD="Lato",oV="Lato",ian="Lato",san="#DEDDDD",aan=18,D3={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},oan={background:ran,title:{anchor:"start",fontSize:aan,font:VD},axisX:{domain:!0,domainColor:hye,domainWidth:1,grid:!1,labelFontSize:12,labelFont:oV,labelAngle:0,tickColor:hye,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:VD},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:san,gridWidth:1,labelFontSize:12,labelFont:oV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:VD,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:oV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:VD,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:D3["six-groups-cat-1"],diverging:D3["diverging-colors"],heatmap:D3["diverging-colors"],ordinal:D3["six-groups-seq"],ramp:D3["shades-blue"]},area:{fill:lu},rect:{fill:lu},line:{color:lu,stroke:lu,strokeWidth:5},trail:{color:lu,stroke:lu,strokeWidth:0,size:1},path:{stroke:lu,strokeWidth:.5},point:{filled:!0},text:{font:ian,color:lu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:lu,stroke:null}},arc:{fill:lu},shape:{stroke:lu},symbol:{fill:lu,size:30}},Wg="#3366CC",pye="#ccc",WD="Arial, sans-serif",lan={arc:{fill:Wg},area:{fill:Wg},path:{stroke:Wg},rect:{fill:Wg},shape:{stroke:Wg},symbol:{stroke:Wg},circle:{fill:Wg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:WD,fontSize:12},"guide-title":{font:WD,fontSize:12},"group-title":{font:WD,fontSize:12}},title:{font:WD,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:pye,tickColor:pye,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},nie=e=>e*(1/3+1),mye=nie(9),gye=nie(10),yye=nie(12),I3="Segoe UI",bye="wf_standard-font, helvetica, arial, sans-serif",xye="#252423",O3="#605E5C",vye="transparent",uan="#C8C6C4",ec="#118DFF",can="#12239E",fan="#E66C37",dan="#6B007B",han="#E044A7",pan="#744EC2",man="#D9B300",gan="#D64550",$Fe=ec,EFe="#DEEFFF",wye=[EFe,$Fe],yan=[EFe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",$Fe],ban={view:{stroke:vye},background:vye,font:I3,header:{titleFont:bye,titleFontSize:yye,titleColor:xye,labelFont:I3,labelFontSize:gye,labelColor:O3},axis:{ticks:!1,grid:!1,domain:!1,labelColor:O3,labelFontSize:mye,titleFont:bye,titleColor:xye,titleFontSize:yye,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:uan,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ec},line:{stroke:ec,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:I3,fontSize:mye,fill:O3},arc:{fill:ec},area:{fill:ec,line:!0,opacity:.6},path:{stroke:ec},rect:{fill:ec},point:{fill:ec,filled:!0,size:75},shape:{stroke:ec},symbol:{fill:ec,strokeWidth:1.5,size:50},legend:{titleFont:I3,titleFontWeight:"bold",titleColor:O3,labelFont:I3,labelFontSize:gye,labelColor:O3,symbolType:"circle",symbolSize:75},range:{category:[ec,can,fan,dan,han,pan,man,gan],diverging:wye,heatmap:wye,ordinal:yan}},lV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',xan='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',uV=400,HD={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},van=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],wan=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function gL({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=HD.gridBg[e],i=HD.textPrimary[e],s=HD.textSecondary[e],a=n==="dark"?van:wan,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:lV,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:xan,labelFontWeight:uV,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:HD.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:lV,fill:s,fontWeight:uV},"guide-title":{font:lV,fill:s,fontWeight:uV}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const San=gL({theme:"white",background:"#ffffff"}),Can=gL({theme:"g10",background:"#f4f4f4"}),$an=gL({theme:"g90",background:"#262626"}),Ean=gL({theme:"g100",background:"#161616"}),kan=Wsn.version,Aan=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Can,carbong100:Ean,carbong90:$an,carbonwhite:San,dark:Hsn,excel:Gsn,fivethirtyeight:Ysn,ggplot2:Ksn,googlecharts:lan,latimes:ean,powerbi:ban,quartz:tan,urbaninstitute:oan,version:kan,vox:nan},Symbol.toStringTag,{value:"Module"}));var _an=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element img {
    max-width: 200px;
    max-height: 200px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`;const kFe="vg-tooltip-element",Tan={offsetX:10,offsetY:10,id:kFe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Nan,maxDepth:2};function Nan(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Dan(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return _an.toString().replace(kFe,e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ian(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Oan(e,t,n){if(Qe(e))return`[${e.map(r=>t(Fn(r)?r:Sye(r,n))).join(", ")}]`;if(Ht(e)){let r="";const i=e,{title:s,image:a}=i,o=Ian(i,["title","image"]);s&&(r+=`<h2>${t(s)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const u of l){let c=o[u];c!==void 0&&(Ht(c)&&(c=Sye(c,n)),r+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Ran(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Sye(e,t){return JSON.stringify(e,Ran(t))}function Fan(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Man{constructor(t){this.options=Object.assign(Object.assign({},Tan),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Dan(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(document.fullscreenElement!=null?document.fullscreenElement:document.body).appendChild(this.el),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=Oan(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=Fan(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${a}px`)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function g6(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,[])).next())})}function Lan(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let a=40;function o(u){u.source===r&&(a=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){a<=0||(r.postMessage(n,s),setTimeout(l,i),a-=1)}setTimeout(l,i)}var Pan=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }
  .vega-embed .chart-wrapper {
    width: 100%;
    height: 100%; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function AFe(e,...t){for(const n of t)Ban(e,n);return e}function Ban(e,t){for(const n of Object.keys(t))y8(e,n,t[n],!0)}var cV;const mh=IYt;let Dv=Usn;const GD=typeof window<"u"?window:void 0;Dv===void 0&&(!((cV=GD==null?void 0:GD.vl)===null||cV===void 0)&&cV.compile)&&(Dv=GD.vl);const _Fe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},zan={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},S$={vega:"Vega","vega-lite":"Vega-Lite"},y6={vega:mh.version,"vega-lite":Dv?Dv.version:"not available"},jan={vega:e=>e,"vega-lite":(e,t)=>Dv.compile(e,{config:t}).spec},Uan=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Van="chart-wrapper";function Wan(e){return typeof e=="function"}function Cye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+s),a.document.title=`${S$[r]} JSON Source`}function TFe(e,t){var n;if(e.$schema){const r=CFe(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${S$[r.library]}, but mode argument sets ${(n=S$[t])!==null&&n!==void 0?n:t}.`);const i=r.library;return KEe.satisfies(y6[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${S$[i]} ${r.version}, but the current version of ${S$[i]} is v${y6[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Han(e){return!!(e&&"load"in e)}function $ye(e){return Han(e)?e:mh.loader(e)}function Eye(e){var t;return(t=e.usermeta&&e.usermeta.embedOptions)!==null&&t!==void 0?t:{}}function Gan(e,t,n={}){var r,i,s;return g6(this,void 0,void 0,function*(){let a,o;Fn(t)?(o=$ye(n.loader),a=JSON.parse(yield o.load(t))):a=t;const l=Eye(a).loader;(!o||l)&&(o=$ye((r=n.loader)!==null&&r!==void 0?r:l));const u=yield kye(Eye(a),o),c=yield kye(n,o),f=Object.assign(Object.assign({},AFe(c,u)),{config:g8((i=c.config)!==null&&i!==void 0?i:{},(s=u.config)!==null&&s!==void 0?s:{})});return yield Xan(e,a,f,o)})}function kye(e,t){var n;return g6(this,void 0,void 0,function*(){const r=Fn(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},i=Fn(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})})}function qan(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function Xan(e,t,n={},r){var i,s,a,o,l,u;return g6(this,void 0,void 0,function*(){const c=n.theme?g8(Aan[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,f=C8(n.actions)?n.actions:AFe({},_Fe,(s=n.actions)!==null&&s!==void 0?s:{}),d=Object.assign(Object.assign({},zan),n.i18n),h=(a=n.renderer)!==null&&a!==void 0?a:"canvas",m=(o=n.logLevel)!==null&&o!==void 0?o:mh.Warn,g=(l=n.downloadFileName)!==null&&l!==void 0?l:"visualization",b=typeof e=="string"?document.querySelector(e):e;if(!b)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const D="vega-embed-style",{root:L,rootContainer:P}=qan(b);if(!L.getElementById(D)){const M=document.createElement("style");M.id=D,M.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?Pan.toString():n.defaultStyle,P.appendChild(M)}}const x=TFe(t,n.mode);let w=jan[x](t,c);if(x==="vega-lite"&&w.$schema){const D=CFe(w.$schema);KEe.satisfies(y6.vega,`^${D.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${D.version}, but current version is v${y6.vega}.`)}b.classList.add("vega-embed"),f&&b.classList.add("has-actions"),b.innerHTML="";let C=b;if(f){const D=document.createElement("div");D.classList.add(Van),b.appendChild(D),C=D}const S=n.patch;S&&(S instanceof Function?w=S(w):w=u8(w,S,!0,!1).newDocument),n.formatLocale&&mh.formatLocale(n.formatLocale),n.timeFormatLocale&&mh.timeFormatLocale(n.timeFormatLocale);const{ast:E}=n,A=mh.parse(w,x==="vega-lite"?{}:c,{ast:E}),k=new(n.viewClass||mh.View)(A,Object.assign({loader:r,logLevel:m,renderer:h},E?{expr:mh.expressionInterpreter}:{}));if(n.tooltip!==!1){let D;Wan(n.tooltip)?D=n.tooltip:D=new Man(n.tooltip===!0?{}:n.tooltip).call,k.tooltip(D)}let{hover:N}=n;if(N===void 0&&(N=x==="vega"),N){const{hoverSet:D,updateSet:L}=typeof N=="boolean"?{}:N;k.hover(D,L)}n&&(n.width!=null&&k.width(n.width),n.height!=null&&k.height(n.height),n.padding!=null&&k.padding(n.padding)),yield k.initialize(C,n.bind).runAsync();let I;if(f!==!1){let D=b;if(n.defaultStyle!==!1){const P=document.createElement("details");P.title=d.CLICK_TO_VIEW_ACTIONS,b.append(P),D=P;const M=document.createElement("summary");M.innerHTML=Uan,P.append(M),I=F=>{P.contains(F.target)||P.removeAttribute("open")},document.addEventListener("click",I)}const L=document.createElement("div");if(D.append(L),L.classList.add("vega-actions"),f===!0||f.export!==!1){for(const P of["svg","png"])if(f===!0||f.export===!0||f.export[P]){const M=d[`${P.toUpperCase()}_ACTION`],F=document.createElement("a");F.text=M,F.href="#",F.target="_blank",F.download=`${g}.${P}`,F.addEventListener("mousedown",function(R){return g6(this,void 0,void 0,function*(){R.preventDefault();const j=yield k.toImageURL(P,n.scaleFactor);this.href=j})}),L.append(F)}}if(f===!0||f.source!==!1){const P=document.createElement("a");P.text=d.SOURCE_ACTION,P.href="#",P.addEventListener("click",function(M){var F,R;Cye(Nz(t),(F=n.sourceHeader)!==null&&F!==void 0?F:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"",x),M.preventDefault()}),L.append(P)}if(x==="vega-lite"&&(f===!0||f.compiled!==!1)){const P=document.createElement("a");P.text=d.COMPILED_ACTION,P.href="#",P.addEventListener("click",function(M){var F,R;Cye(Nz(w),(F=n.sourceHeader)!==null&&F!==void 0?F:"",(R=n.sourceFooter)!==null&&R!==void 0?R:"","vega"),M.preventDefault()}),L.append(P)}if(f===!0||f.editor!==!1){const P=(u=n.editorUrl)!==null&&u!==void 0?u:"https://vega.github.io/editor/",M=document.createElement("a");M.text=d.EDITOR_ACTION,M.href="#",M.addEventListener("click",function(F){Lan(window,P,{config:c,mode:x,renderer:h,spec:Nz(t)}),F.preventDefault()}),L.append(M)}}function T(){I&&document.removeEventListener("click",I),k.finalize()}return{view:k,spec:t,vgSpec:w,finalize:T}})}const Yan=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_ACTIONS:_Fe,default:Gan,guessMode:TFe,vega:mh,get vegaLite(){return Dv}},Symbol.toStringTag,{value:"Module"})),GS=_m(Yan);var R2={},Ge={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var fV,Aye;function rie(){if(Aye)return fV;Aye=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function r(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},o=0;o<10;o++)a["_"+String.fromCharCode(o)]=o;var l=Object.getOwnPropertyNames(a).map(function(c){return a[c]});if(l.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(c){u[c]=c}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return fV=i()?Object.assign:function(s,a){for(var o,l=r(s),u,c=1;c<arguments.length;c++){o=Object(arguments[c]);for(var f in o)t.call(o,f)&&(l[f]=o[f]);if(e){u=e(o);for(var d=0;d<u.length;d++)n.call(o,u[d])&&(l[u[d]]=o[u[d]])}}return l},fV}var qD={},_ye;function Kan(){if(_ye)return qD;_ye=1,Object.defineProperty(qD,"__esModule",{value:!0}),qD.StyleSheet=u;var e=rie(),t=n(e);function n(c){return c&&c.__esModule?c:{default:c}}function r(c){if(Array.isArray(c)){for(var f=0,d=Array(c.length);f<c.length;f++)d[f]=c[f];return d}else return Array.from(c)}function i(c){return c[c.length-1]}function s(c){if(c.sheet)return c.sheet;for(var f=0;f<document.styleSheets.length;f++)if(document.styleSheets[f].ownerNode===c)return document.styleSheets[f]}var a=typeof window<"u",o=function(){if(a){var c=document.createElement("div");return c.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",c.getElementsByTagName("i").length===1}}();function l(){var c=document.createElement("style");return c.type="text/css",c.setAttribute("data-glamor",""),c.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(c),c}function u(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=c.speedy,d=f===void 0?!0:f,h=c.maxLength,m=h===void 0?a&&o?4e3:65e3:h;this.isSpeedy=d,this.sheet=void 0,this.tags=[],this.maxLength=m,this.ctr=0}return(0,t.default)(u.prototype,{getSheet:function(){return s(i(this.tags))},inject:function(){var f=this;if(this.injected)throw new Error("already injected stylesheet!");a?this.tags[0]=l():this.sheet={cssRules:[],insertRule:function(h){f.sheet.cssRules.push({cssText:h})}},this.injected=!0},speedy:function(f){if(this.ctr!==0)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+f+") earlier in your app, or call flush() before speedy("+f+")");this.isSpeedy=!!f},_insert:function(f){try{var d=this.getSheet();d.insertRule(f,f.indexOf("@import")!==-1?0:d.cssRules.length)}catch{}},insert:function(f){if(a)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(f);else if(f.indexOf("@import")!==-1){var d=i(this.tags);d.insertBefore(document.createTextNode(f),d.firstChild)}else i(this.tags).appendChild(document.createTextNode(f));else this.sheet.insertRule(f,f.indexOf("@import")!==-1?0:this.sheet.cssRules.length);return this.ctr++,a&&this.ctr%this.maxLength===0&&this.tags.push(l()),this.ctr-1},delete:function(f){return this.replace(f,"")},flush:function(){a?(this.tags.forEach(function(f){return f.parentNode.removeChild(f)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!a)return this.sheet.cssRules;var f=[];return this.tags.forEach(function(d){return f.splice.apply(f,[f.length,0].concat(r(Array.from(s(d).cssRules))))}),f}}),qD}var F2={},dV,Tye;function Zan(){if(Tye)return dV;Tye=1;var e=/-(.)/g;function t(n){return n.replace(e,function(r,i){return i.toUpperCase()})}return dV=t,dV}var hV,Nye;function Qan(){if(Nye)return hV;Nye=1;var e=Zan(),t=/^-ms-/;function n(r){return e(r.replace(t,"ms-"))}return hV=n,hV}var XD={},YD={},Dye;function Jan(){if(Dye)return YD;Dye=1,Object.defineProperty(YD,"__esModule",{value:!0});var e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function t(s,a){return s+a.charAt(0).toUpperCase()+a.substring(1)}var n=["Webkit","ms","Moz","O"];Object.keys(e).forEach(function(s){n.forEach(function(a){e[t(a,s)]=e[s]})});var r={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},i={isUnitlessNumber:e,shorthandPropertyExpansions:r};return YD.default=i,YD}var pV,Iye;function eon(){if(Iye)return pV;Iye=1;function e(n){return function(){return n}}var t=function(){};return t.thatReturns=e,t.thatReturnsFalse=e(!1),t.thatReturnsTrue=e(!0),t.thatReturnsNull=e(null),t.thatReturnsThis=function(){return this},t.thatReturnsArgument=function(n){return n},pV=t,pV}var mV,Oye;function NFe(){if(Oye)return mV;Oye=1;var e=eon(),t=e;return mV=t,mV}var Rye;function ton(){if(Rye)return XD;Rye=1,Object.defineProperty(XD,"__esModule",{value:!0});var e=Jan(),t=r(e),n=NFe();r(n);function r(a){return a&&a.__esModule?a:{default:a}}var i=t.default.isUnitlessNumber;function s(a,o,l){var u=o==null||typeof o=="boolean"||o==="";if(u)return"";var c=isNaN(o);return c||o===0||i.hasOwnProperty(a)&&i[a]?""+o:(typeof o=="string"&&(o=o.trim()),o+"px")}return XD.default=s,XD}var gV,Fye;function non(){if(Fye)return gV;Fye=1;var e=/([A-Z])/g;function t(n){return n.replace(e,"-$1").toLowerCase()}return gV=t,gV}var yV,Mye;function ron(){if(Mye)return yV;Mye=1;var e=non(),t=/^ms-/;function n(r){return e(r).replace(t,"-ms-")}return yV=n,yV}var bV,Lye;function ion(){if(Lye)return bV;Lye=1;function e(t){var n={};return function(r){return n.hasOwnProperty(r)||(n[r]=t.call(this,r)),n[r]}}return bV=e,bV}var Pye;function DFe(){if(Pye)return F2;Pye=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.processStyleName=void 0,F2.createMarkupForStyles=c;var e=Qan();l(e);var t=ton(),n=l(t),r=ron(),i=l(r),s=ion(),a=l(s),o=NFe();l(o);function l(f){return f&&f.__esModule?f:{default:f}}var u=F2.processStyleName=(0,a.default)(i.default);function c(f,d){var h="";for(var m in f){var g=m.indexOf("--")===0;if(f.hasOwnProperty(m)&&m!=="label"){var b=f[m];b!=null&&(g?h+=m+":"+b+";":(h+=u(m)+":",h+=(0,n.default)(m,b,d)+";"))}}return h||null}return F2}var KD={},Bye;function son(){if(Bye)return KD;Bye=1,Object.defineProperty(KD,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};KD.default=i;function t(s){return s==null||s===!1||(typeof s>"u"?"undefined":e(s))==="object"&&Object.keys(s).length===0}function n(s){if(t(s))return null;if((typeof s>"u"?"undefined":e(s))!=="object")return s;for(var a={},o=Object.keys(s),l=!1,u=0;u<o.length;u++){var c=s[o[u]],f=i(c);(f===null||f!==c)&&(l=!0),f!==null&&(a[o[u]]=f)}return Object.keys(a).length===0?null:l?a:s}function r(s){var a=!1,o=[];return s.forEach(function(l){var u=i(l);(u===null||u!==l)&&(a=!0),u!==null&&o.push(u)}),o.length==0?null:a?o:s}function i(s){return Array.isArray(s)?r(s):n(s)}return KD}var Hg={},ZD={},QD={exports:{}},zye;function aon(){return zye||(zye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["Webkit"],r=["Moz"],i=["ms"],s=["Webkit","Moz"],a=["Webkit","ms"],o=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:s,userSelect:o,textEmphasisPosition:n,textEmphasis:n,textEmphasisStyle:n,textEmphasisColor:n,boxDecorationBreak:n,clipPath:n,maskImage:n,maskMode:n,maskRepeat:n,maskPosition:n,maskClip:n,maskOrigin:n,maskSize:n,maskComposite:n,mask:n,maskBorderSource:n,maskBorderMode:n,maskBorderSlice:n,maskBorderWidth:n,maskBorderOutset:n,maskBorderRepeat:n,maskBorder:n,maskType:n,textDecorationStyle:n,textDecorationSkip:n,textDecorationLine:n,textDecorationColor:n,filter:n,fontFeatureSettings:n,breakAfter:o,breakBefore:o,breakInside:o,columnCount:s,columnFill:s,columnGap:s,columnRule:s,columnRuleColor:s,columnRuleStyle:s,columnRuleWidth:s,columns:s,columnSpan:s,columnWidth:s,writingMode:a,flex:n,flexBasis:n,flexDirection:n,flexGrow:n,flexFlow:n,flexShrink:n,flexWrap:n,alignContent:n,alignItems:n,alignSelf:n,justifyContent:n,order:n,transform:n,transformOrigin:n,transformOriginX:n,transformOriginY:n,backfaceVisibility:n,perspective:n,perspectiveOrigin:n,transformStyle:n,transformOriginZ:n,animation:n,animationDelay:n,animationDirection:n,animationFillMode:n,animationDuration:n,animationIterationCount:n,animationName:n,animationPlayState:n,animationTimingFunction:n,backdropFilter:n,fontKerning:n,scrollSnapType:a,scrollSnapPointsX:a,scrollSnapPointsY:a,scrollSnapDestination:a,scrollSnapCoordinate:a,shapeImageThreshold:n,shapeImageMargin:n,shapeImageOutside:n,hyphens:o,flowInto:a,flowFrom:a,regionFragment:a,textAlignLast:r,tabSize:r,wrapFlow:i,wrapThrough:i,wrapMargin:i,gridTemplateColumns:i,gridTemplateRows:i,gridTemplateAreas:i,gridTemplate:i,gridAutoColumns:i,gridAutoRows:i,gridAutoFlow:i,grid:i,gridRowStart:i,gridColumnStart:i,gridRowEnd:i,gridRow:i,gridColumn:i,gridColumnEnd:i,gridColumnGap:i,gridRowGap:i,gridArea:i,gridGap:i,textSizeAdjust:a,borderImage:n,borderImageOutset:n,borderImageRepeat:n,borderImageSlice:n,borderImageSource:n,borderImageWidth:n,transitionDelay:n,transitionDuration:n,transitionProperty:n,transitionTimingFunction:n}},e.exports=t.default}(QD,QD.exports)),QD.exports}var JD={exports:{}},eI={exports:{}},jye;function IFe(){return jye||(jye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return r.charAt(0).toUpperCase()+r.slice(1)}e.exports=t.default}(eI,eI.exports)),eI.exports}var Uye;function oon(){return Uye||(Uye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=IFe(),r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(a,o,l){if(a.hasOwnProperty(o))for(var u=a[o],c=0,f=u.length;c<f;++c)l[u[c]+(0,r.default)(o)]=l[o]}e.exports=t.default}(JD,JD.exports)),JD.exports}var tI={exports:{}},Vye;function lon(){return Vye||(Vye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,i,s,a,o){for(var l=0,u=r.length;l<u;++l){var c=r[l](i,s,a,o);if(c)return c}}e.exports=t.default}(tI,tI.exports)),tI.exports}var nI={exports:{}},Wye;function uon(){return Wye||(Wye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function i(s,a){if(s==="cursor"&&r.hasOwnProperty(a))return n.map(function(o){return o+a})}e.exports=t.default}(nI,nI.exports)),nI.exports}var rI={exports:{}},iI={exports:{}},Hye;function QT(){return Hye||(Hye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=/-webkit-|-moz-|-ms-/;function r(i){return typeof i=="string"&&n.test(i)}e.exports=t.default}(iI,iI.exports)),iI.exports}var Gye;function con(){return Gye||(Gye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=QT(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s=["-webkit-",""];function a(o,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("cross-fade(")>-1)return s.map(function(u){return l.replace(/cross-fade\(/g,u+"cross-fade(")})}e.exports=t.default}(rI,rI.exports)),rI.exports}var sI={exports:{}},qye;function fon(){return qye||(qye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=QT(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s=["-webkit-",""];function a(o,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("filter(")>-1)return s.map(function(u){return l.replace(/filter\(/g,u+"filter(")})}e.exports=t.default}(sI,sI.exports)),sI.exports}var aI={exports:{}},Xye;function don(){return Xye||(Xye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function r(i,s){if(i==="display"&&n.hasOwnProperty(s))return n[s]}e.exports=t.default}(aI,aI.exports)),aI.exports}var oI={exports:{}},Yye;function hon(){return Yye||(Yye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function i(s,a,o){s==="flexDirection"&&typeof a=="string"&&(a.indexOf("column")>-1?o.WebkitBoxOrient="vertical":o.WebkitBoxOrient="horizontal",a.indexOf("reverse")>-1?o.WebkitBoxDirection="reverse":o.WebkitBoxDirection="normal"),r.hasOwnProperty(s)&&(o[r[s]]=n[a]||a)}e.exports=t.default}(oI,oI.exports)),oI.exports}var lI={exports:{}},Kye;function pon(){return Kye||(Kye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=QT(),r=i(n);function i(l){return l&&l.__esModule?l:{default:l}}var s=["-webkit-","-moz-",""],a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function o(l,u){if(typeof u=="string"&&!(0,r.default)(u)&&a.test(u))return s.map(function(c){return c+u})}e.exports=t.default}(lI,lI.exports)),lI.exports}var uI={exports:{}},Zye;function mon(){return Zye||(Zye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=QT(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}var s=["-webkit-",""];function a(o,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("image-set(")>-1)return s.map(function(u){return l.replace(/image-set\(/g,u+"image-set(")})}e.exports=t.default}(uI,uI.exports)),uI.exports}var cI={exports:{}},Qye;function gon(){return Qye||(Qye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,i){if(r==="position"&&i==="sticky")return["-webkit-sticky","sticky"]}e.exports=t.default}(cI,cI.exports)),cI.exports}var fI={exports:{}},Jye;function yon(){return Jye||(Jye=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function s(a,o){if(r.hasOwnProperty(a)&&i.hasOwnProperty(o))return n.map(function(l){return l+o})}e.exports=t.default}(fI,fI.exports)),fI.exports}var dI={exports:{}},hI={exports:{}},bon=/[A-Z]/g,xon=/^ms-/,xV={};function von(e){return"-"+e.toLowerCase()}function won(e){if(xV.hasOwnProperty(e))return xV[e];var t=e.replace(bon,von);return xV[e]=xon.test(t)?"-"+t:t}const Son=Object.freeze(Object.defineProperty({__proto__:null,default:won},Symbol.toStringTag,{value:"Module"})),Con=_m(Son);var ebe;function $on(){return ebe||(ebe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=Con,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(a){return(0,r.default)(a)}e.exports=t.default}(hI,hI.exports)),hI.exports}var tbe;function Eon(){return tbe||(tbe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var n=$on(),r=l(n),i=QT(),s=l(i),a=IFe(),o=l(a);function l(h){return h&&h.__esModule?h:{default:h}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},c={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function f(h,m){if((0,s.default)(h))return h;for(var g=h.split(/,(?![^()]*(?:\([^()]*\))?\))/g),b=0,x=g.length;b<x;++b){var w=g[b],C=[w];for(var S in m){var E=(0,r.default)(S);if(w.indexOf(E)>-1&&E!=="order")for(var A=m[S],k=0,N=A.length;k<N;++k)C.unshift(w.replace(E,c[A[k]]+E))}g[b]=C.join(",")}return g.join(",")}function d(h,m,g,b){if(typeof m=="string"&&u.hasOwnProperty(h)){var x=f(m,b),w=x.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(S){return!/-moz-|-ms-/.test(S)}).join(",");if(h.indexOf("Webkit")>-1)return w;var C=x.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(S){return!/-webkit-|-ms-/.test(S)}).join(",");return h.indexOf("Moz")>-1?C:(g["Webkit"+(0,o.default)(h)]=w,g["Moz"+(0,o.default)(h)]=C,x)}}e.exports=t.default}(dI,dI.exports)),dI.exports}var nbe;function kon(){if(nbe)return ZD;nbe=1,Object.defineProperty(ZD,"__esModule",{value:!0}),ZD.default=P;var e=aon(),t=T(e),n=oon(),r=T(n),i=lon(),s=T(i),a=uon(),o=T(a),l=con(),u=T(l),c=fon(),f=T(c),d=don(),h=T(d),m=hon(),g=T(m),b=pon(),x=T(b),w=mon(),C=T(w),S=gon(),E=T(S),A=yon(),k=T(A),N=Eon(),I=T(N);function T(M){return M&&M.__esModule?M:{default:M}}var D=[u.default,o.default,f.default,g.default,x.default,C.default,E.default,k.default,I.default,h.default],L=t.default.prefixMap;function P(M){for(var F in M){var R=M[F],j=(0,s.default)(D,F,R,M,L);j&&(M[F]=j),(0,r.default)(L,F,M)}return M}return ZD}var rbe;function Aon(){if(rbe)return Hg;rbe=1,Object.defineProperty(Hg,"__esModule",{value:!0});var e=Object.assign||function(d){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(d[g]=m[g])}return d};Hg.PluginSet=o,Hg.fallbacks=l,Hg.contentWrap=c,Hg.prefixes=f;var t=rie(),n=a(t),r=DFe(),i=kon(),s=a(i);function a(d){return d&&d.__esModule?d:{default:d}}function o(d){this.fns=d||[]}(0,n.default)(o.prototype,{add:function(){for(var h=this,m=arguments.length,g=Array(m),b=0;b<m;b++)g[b]=arguments[b];g.forEach(function(x){h.fns.indexOf(x)>=0||(h.fns=[x].concat(h.fns))})},remove:function(h){this.fns=this.fns.filter(function(m){return m!==h})},clear:function(){this.fns=[]},transform:function(h){return this.fns.reduce(function(m,g){return g(m)},h)}});function l(d){var h=Object.keys(d.style).map(function(b){return Array.isArray(d.style[b])}).indexOf(!0)>=0;if(h){var m=d.style,g=Object.keys(m).reduce(function(b,x){return b[x]=Array.isArray(m[x])?m[x].join("; "+(0,r.processStyleName)(x)+": "):m[x],b},{});return(0,n.default)({},d,{style:g})}return d}var u=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function c(d){if(d.style.content){var h=d.style.content;return u.indexOf(h)>=0||/^(attr|calc|counters?|url)\(/.test(h)||h.charAt(0)===h.charAt(h.length-1)&&(h.charAt(0)==='"'||h.charAt(0)==="'")?d:e({},d,{style:e({},d.style,{content:'"'+h+'"'})})}return d}function f(d){return(0,n.default)({},d,{style:(0,s.default)(e({},d.style))})}return Hg}var pI={},ibe;function _on(){if(ibe)return pI;ibe=1,Object.defineProperty(pI,"__esModule",{value:!0}),pI.default=e;function e(i,s){for(var a=1540483477,o=24,l=s^i.length,u=i.length,c=0;u>=4;){var f=t(i,c);f=r(f,a),f^=f>>>o,f=r(f,a),l=r(l,a),l^=f,c+=4,u-=4}switch(u){case 3:l^=n(i,c),l^=i.charCodeAt(c+2)<<16,l=r(l,a);break;case 2:l^=n(i,c),l=r(l,a);break;case 1:l^=i.charCodeAt(c),l=r(l,a);break}return l^=l>>>13,l=r(l,a),l^=l>>>15,l>>>0}function t(i,s){return i.charCodeAt(s++)+(i.charCodeAt(s++)<<8)+(i.charCodeAt(s++)<<16)+(i.charCodeAt(s)<<24)}function n(i,s){return i.charCodeAt(s++)+(i.charCodeAt(s++)<<8)}function r(i,s){i=i|0,s=s|0;var a=i&65535,o=i>>>16,l=a*s+((o*s&65535)<<16)|0;return l}return pI}var sbe;function JT(){if(sbe)return Ge;sbe=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.compose=Ge.merge=Ge.$=Ge.style=Ge.presets=Ge.keyframes=Ge.fontFace=Ge.insertGlobal=Ge.insertRule=Ge.plugins=Ge.styleSheet=void 0,Ge.speedy=d,Ge.simulations=C,Ge.simulate=S,Ge.cssLabels=A,Ge.isLikeRule=I,Ge.idFor=T,Ge.css=nt,Ge.rehydrate=sn,Ge.flush=it,Ge.select=an,Ge.parent=Fe,Ge.media=Ue,Ge.pseudo=Ne,Ge.active=wt,Ge.any=At,Ge.checked=pt,Ge.disabled=Lt,Ge.empty=dr,Ge.enabled=vn,Ge._default=Wr,Ge.first=ot,Ge.firstChild=Tn,Ge.firstOfType=tr,Ge.fullscreen=Xl,Ge.focus=Vu,Ge.hover=vp,Ge.indeterminate=ag,Ge.inRange=hr,Ge.invalid=vi,Ge.lastChild=wp,Ge.lastOfType=Id,Ge.left=Ya,Ge.link=qS,Ge.onlyChild=tN,Ge.onlyOfType=EL,Ge.optional=Yc,Ge.outOfRange=gs,Ge.readOnly=da,Ge.readWrite=Sp,Ge.required=XS,Ge.right=kL,Ge.root=AL,Ge.scope=nN,Ge.target=og,Ge.valid=YS,Ge.visited=Cp,Ge.dir=$p,Ge.lang=lg,Ge.not=Ep,Ge.nthChild=Ri,Ge.nthLastChild=rN,Ge.nthLastOfType=iN,Ge.nthOfType=Od,Ge.after=kp,Ge.before=_L,Ge.firstLetter=sN,Ge.firstLine=aN,Ge.selection=TL,Ge.backdrop=Db,Ge.placeholder=Ib,Ge.cssFor=Wu,Ge.attribsFor=KS;var e=rie(),t=u(e),n=Kan(),r=DFe(),i=son(),s=u(i),a=Aon(),o=_on(),l=u(o);function u(J){return J&&J.__esModule?J:{default:J}}function c(J,ue,Be){return ue in J?Object.defineProperty(J,ue,{value:Be,enumerable:!0,configurable:!0,writable:!0}):J[ue]=Be,J}var f=Ge.styleSheet=new n.StyleSheet;f.inject();function d(J){return f.speedy(J)}var h=Ge.plugins=f.plugins=new a.PluginSet([a.prefixes,a.contentWrap,a.fallbacks]);h.media=new a.PluginSet,h.fontFace=new a.PluginSet,h.keyframes=new a.PluginSet([a.prefixes,a.fallbacks]);var m=!1,g=typeof window<"u",b=m,x=!1,w=!1;function C(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;b=!!J}function S(){for(var J=arguments.length,ue=Array(J),Be=0;Be<J;Be++)ue[Be]=arguments[Be];return ue=(0,s.default)(ue),ue?b?ue.reduce(function(He,Ot){return He["data-simulate-"+k(Ot)]="",He},{}):(x||(console.warn("can't simulate without once calling simulations(true)"),x=!0),w||(console.warn("don't use simulation outside dev"),w=!0),{}):{}}var E=m;function A(J){E=!!J}function k(J){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return J.toLowerCase().replace(/[^a-z0-9]/g,ue)}function N(J){var ue=JSON.stringify(J),Be=(0,l.default)(ue).toString(36);return J.label&&J.label.length>0,Be}function I(J){var ue=Object.keys(J).filter(function(Be){return Be!=="toString"});return ue.length!==1?!1:!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(ue[0])}function T(J){var ue=Object.keys(J).filter(function(Ot){return Ot!=="toString"});if(ue.length!==1)throw new Error("not a rule");var Be=/data\-css\-([a-zA-Z0-9\-_]+)/,He=Be.exec(ue[0]);if(!He)throw new Error("not a rule");return He[1]}var D=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function L(J){if(J.indexOf(",")===-1)return[J];for(var ue=[],Be=[],He=0,Ot;Ot=D.exec(J);)switch(Ot[0]){case"(":He++;break;case")":He--;break;case",":if(He)break;ue.push(Ot.index)}for(Ot=ue.length;Ot--;)Be.unshift(J.slice(ue[Ot]+1)),J=J.slice(0,ue[Ot]);return Be.unshift(J),Be}function P(J,ue){if(!J)return ue.replace(/\&/g,"");if(!ue)return".css-"+J+",[data-css-"+J+"]";var Be=L(ue).map(function(He){return He.indexOf("&")>=0?[He.replace(/\&/mg,".css-"+J),He.replace(/\&/mg,"[data-css-"+J+"]")].join(","):".css-"+J+He+",[data-css-"+J+"]"+He}).join(",");return b&&/^\&\:/.exec(ue)&&!/\s/.exec(ue)&&(Be+=",.css-"+J+"[data-simulate-"+k(ue)+"],[data-css-"+J+"][data-simulate-"+k(ue)+"]"),Be}function M(J){var ue=J.selector,Be=J.style,He=h.transform({selector:ue,style:Be});return He.selector+"{"+(0,r.createMarkupForStyles)(He.style)+"}"}function F(J){var ue=void 0,Be=void 0,He=void 0,Ot=void 0;return Object.keys(J).forEach(function(wn){wn.indexOf("&")>=0?(Be=Be||{},Be[wn]=J[wn]):wn.indexOf("@media")===0?(He=He||{},He[wn]=F(J[wn])):wn.indexOf("@supports")===0?(Ot=Ot||{},Ot[wn]=F(J[wn])):wn==="label"?J.label.length>0&&(ue=ue||{},ue.label=E?J.label.join("."):""):(ue=ue||{},ue[wn]=J[wn])}),{plain:ue,selects:Be,medias:He,supports:Ot}}function R(J,ue){var Be=[],He=ue.plain,Ot=ue.selects,wn=ue.medias,pr=ue.supports;return He&&Be.push(M({style:He,selector:P(J)})),Ot&&Object.keys(Ot).forEach(function(Lr){return Be.push(M({style:Ot[Lr],selector:P(J,Lr)}))}),wn&&Object.keys(wn).forEach(function(Lr){return Be.push(Lr+"{"+R(J,wn[Lr]).join("")+"}")}),pr&&Object.keys(pr).forEach(function(Lr){return Be.push(Lr+"{"+R(J,pr[Lr]).join("")+"}")}),Be}var j=f.inserted={};function H(J){if(!j[J.id]){j[J.id]=!0;var ue=F(J.style),Be=R(J.id,ue);j[J.id]=g?!0:Be,Be.forEach(function(He){return f.insert(He)})}}var G=f.registered={};function z(J){G[J.id]||(G[J.id]=J)}function Y(J){if(I(J)){var ue=G[T(J)];if(ue==null)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return ue}return J}var Z={};function Q(J){if(z(J),H(J),Z[J.id])return Z[J.id];var ue=c({},"data-css-"+J.id,E&&J.label||"");return Object.defineProperty(ue,"toString",{enumerable:!1,value:function(){return"css-"+J.id}}),Z[J.id]=ue,ue}function se(J){for(var ue=[":",".","[",">"," "],Be=!1,He=J.charAt(0),Ot=0;Ot<ue.length;Ot++)if(He===ue[Ot]){Be=!0;break}return Be||J.indexOf("&")>=0}function re(J,ue){var Be=L(J).map(function(Ot){return Ot.indexOf("&")>=0?Ot:"&"+Ot}),He=L(ue).map(function(Ot){return Ot.indexOf("&")>=0?Ot:"&"+Ot});return He.reduce(function(Ot,wn){return Ot.concat(Be.map(function(pr){return wn.replace(/\&/g,pr)}))},[]).join(",")}function de(J,ue){return J?"@media "+J.substring(6)+" and "+ue.substring(6):ue}function Oe(J){return J.indexOf("@media")===0}function Le(J){return J.indexOf("@supports")===0}function me(J,ue){return J?"@supports "+J.substring(9)+" and "+ue.substring(9):ue}function xe(J){for(var ue=[],Be=0;Be<J.length;Be++)Array.isArray(J[Be])?ue=ue.concat(xe(J[Be])):ue=ue.concat(J[Be]);return ue}var Ee={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function ce(J,ue){var Be=ue.selector,He=Be===void 0?"":Be,Ot=ue.mq,wn=Ot===void 0?"":Ot,pr=ue.supp,Lr=pr===void 0?"":pr,ZS=ue.src,Hu=ZS===void 0?{}:ZS;Array.isArray(Hu)||(Hu=[Hu]),Hu=xe(Hu),Hu.forEach(function(ys){if(I(ys)){var ug=Y(ys);if(ug.type!=="css")throw new Error("cannot merge this rule");ys=ug.style}ys=(0,s.default)(ys),ys&&ys.composes&&ce(J,{selector:He,mq:wn,supp:Lr,src:ys.composes}),Object.keys(ys||{}).forEach(function(bs){if(se(bs))Ee[bs]&&Ee[bs].forEach(function(QS){return ce(J,{selector:re(He,QS),mq:wn,supp:Lr,src:ys[bs]})}),ce(J,{selector:re(He,bs),mq:wn,supp:Lr,src:ys[bs]});else if(Oe(bs))ce(J,{selector:He,mq:de(wn,bs),supp:Lr,src:ys[bs]});else if(Le(bs))ce(J,{selector:He,mq:wn,supp:me(Lr,bs),src:ys[bs]});else if(bs!=="composes"){var Ir=J;Lr&&(Ir[Lr]=Ir[Lr]||{},Ir=Ir[Lr]),wn&&(Ir[wn]=Ir[wn]||{},Ir=Ir[wn]),He&&(Ir[He]=Ir[He]||{},Ir=Ir[He]),bs==="label"?E&&(J.label=J.label.concat(ys.label)):Ir[bs]=ys[bs]}})})}function Xe(J){var ue={label:[]};ce(ue,{src:J});var Be={id:N(ue),style:ue,label:E?ue.label.join("."):"",type:"css"};return Q(Be)}var ze={};Object.defineProperty(ze,"toString",{enumerable:!1,value:function(){return"css-nil"}});var Je=typeof WeakMap<"u"?[ze,new WeakMap,new WeakMap,new WeakMap]:[ze];function at(J){return function(ue){if(Je[ue.length]){for(var Be=Je[ue.length],He=0;He<ue.length-1;)Be.has(ue[He])||Be.set(ue[He],new WeakMap),Be=Be.get(ue[He]),He++;if(Be.has(ue[ue.length-1])){var Ot=Be.get(ue[He]);if(G[Ot.toString().substring(4)])return Ot}}var wn=J(ue);if(Je[ue.length]){for(var pr=0,Lr=Je[ue.length];pr<ue.length-1;)Lr=Lr.get(ue[pr]),pr++;try{Lr.set(ue[pr],wn)}catch{}}return wn}}var et=typeof WeakMap<"u"?at(Xe):Xe;function nt(){for(var J=arguments.length,ue=Array(J),Be=0;Be<J;Be++)ue[Be]=arguments[Be];if(ue[0]&&ue[0].length&&ue[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return ue=(0,s.default)(ue),ue?et(ue):ze}nt.insert=function(J){var ue={id:N(J),css:J,type:"raw"};z(ue),j[ue.id]||(f.insert(ue.css),j[ue.id]=g?!0:[ue.css])},Ge.insertRule=nt.insert,nt.global=function(J,ue){if(ue=(0,s.default)(ue),ue)return nt.insert(M({selector:J,style:ue}))},Ge.insertGlobal=nt.global;function Yn(J){if(!j[J.id]){var ue=Object.keys(J.keyframes).map(function(He){var Ot=h.keyframes.transform({id:J.id,name:He,style:J.keyframes[He]});return Ot.name+"{"+(0,r.createMarkupForStyles)(Ot.style)+"}"}).join(""),Be=["-webkit-","-moz-","-o-",""].map(function(He){return"@"+He+"keyframes "+(J.name+"_"+J.id)+"{"+ue+"}"});Be.forEach(function(He){return f.insert(He)}),j[J.id]=g?!0:Be}}nt.keyframes=function(J,ue){ue||(ue=J,J="animation"),ue=(0,s.default)(ue)||{};var Be={id:N({name:J,kfs:ue}),type:"keyframes",name:J,keyframes:ue};return z(Be),Yn(Be),J+"_"+Be.id},nt.fontFace=function(J){J=(0,s.default)(J);var ue={id:N(J),type:"font-face",font:J};return z(ue),Yt(ue),J.fontFamily},Ge.fontFace=nt.fontFace,Ge.keyframes=nt.keyframes;function Yt(J){if(!j[J.id]){var ue="@font-face{"+(0,r.createMarkupForStyles)(J.font)+"}";f.insert(ue),j[J.id]=g?!0:[ue]}}function sn(J){(0,t.default)(j,J.reduce(function(ue,Be){return ue[Be]=!0,ue},{}))}function it(){j=f.inserted={},G=f.registered={},Z={},f.flush(),f.inject()}Ge.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var fr=Ge.style=nt;function an(J){for(var ue=arguments.length,Be=Array(ue>1?ue-1:0),He=1;He<ue;He++)Be[He-1]=arguments[He];return J?nt(c({},J,Be)):fr(Be)}Ge.$=an;function Fe(J){for(var ue=arguments.length,Be=Array(ue>1?ue-1:0),He=1;He<ue;He++)Be[He-1]=arguments[He];return nt(c({},J+" &",Be))}Ge.merge=nt,Ge.compose=nt;function Ue(J){for(var ue=arguments.length,Be=Array(ue>1?ue-1:0),He=1;He<ue;He++)Be[He-1]=arguments[He];return nt(c({},"@media "+J,Be))}function Ne(J){for(var ue=arguments.length,Be=Array(ue>1?ue-1:0),He=1;He<ue;He++)Be[He-1]=arguments[He];return nt(c({},J,Be))}function wt(J){return Ne(":active",J)}function At(J){return Ne(":any",J)}function pt(J){return Ne(":checked",J)}function Lt(J){return Ne(":disabled",J)}function dr(J){return Ne(":empty",J)}function vn(J){return Ne(":enabled",J)}function Wr(J){return Ne(":default",J)}function ot(J){return Ne(":first",J)}function Tn(J){return Ne(":first-child",J)}function tr(J){return Ne(":first-of-type",J)}function Xl(J){return Ne(":fullscreen",J)}function Vu(J){return Ne(":focus",J)}function vp(J){return Ne(":hover",J)}function ag(J){return Ne(":indeterminate",J)}function hr(J){return Ne(":in-range",J)}function vi(J){return Ne(":invalid",J)}function wp(J){return Ne(":last-child",J)}function Id(J){return Ne(":last-of-type",J)}function Ya(J){return Ne(":left",J)}function qS(J){return Ne(":link",J)}function tN(J){return Ne(":only-child",J)}function EL(J){return Ne(":only-of-type",J)}function Yc(J){return Ne(":optional",J)}function gs(J){return Ne(":out-of-range",J)}function da(J){return Ne(":read-only",J)}function Sp(J){return Ne(":read-write",J)}function XS(J){return Ne(":required",J)}function kL(J){return Ne(":right",J)}function AL(J){return Ne(":root",J)}function nN(J){return Ne(":scope",J)}function og(J){return Ne(":target",J)}function YS(J){return Ne(":valid",J)}function Cp(J){return Ne(":visited",J)}function $p(J,ue){return Ne(":dir("+J+")",ue)}function lg(J,ue){return Ne(":lang("+J+")",ue)}function Ep(J,ue){var Be=J.split(",").map(function(He){return He.trim()}).map(function(He){return":not("+He+")"});return Be.length===1?Ne(":not("+J+")",ue):an(Be.join(""),ue)}function Ri(J,ue){return Ne(":nth-child("+J+")",ue)}function rN(J,ue){return Ne(":nth-last-child("+J+")",ue)}function iN(J,ue){return Ne(":nth-last-of-type("+J+")",ue)}function Od(J,ue){return Ne(":nth-of-type("+J+")",ue)}function kp(J){return Ne("::after",J)}function _L(J){return Ne("::before",J)}function sN(J){return Ne("::first-letter",J)}function aN(J){return Ne("::first-line",J)}function TL(J){return Ne("::selection",J)}function Db(J){return Ne("::backdrop",J)}function Ib(J){return nt({"::placeholder":J})}function Wu(){for(var J=arguments.length,ue=Array(J),Be=0;Be<J;Be++)ue[Be]=arguments[Be];return ue=(0,s.default)(ue),ue?ue.map(function(He){var Ot={label:[]};return ce(Ot,{src:He}),R(N(Ot),F(Ot)).join("")}).join(""):""}function KS(){for(var J=arguments.length,ue=Array(J),Be=0;Be<J;Be++)ue[Be]=arguments[Be];ue=(0,s.default)(ue);var He=ue?ue.map(function(Ot){T(Ot);var wn=Object.keys(Ot)[0],pr=Ot[wn];return wn+'="'+(pr||"")+'"'}).join(" "):"";return He}return Ge}var t0={},R3={},abe;function OFe(){if(abe)return R3;abe=1,Object.defineProperty(R3,"__esModule",{value:!0});function e(n){return n.name!=null}R3.isSurfaceInfo=e;function t(n){return n.drawArea instanceof HTMLElement}return R3.isSurface=t,R3}var F3={},mI={};function Ton(){}var fl={},M2=[],obe=[];function _k(e,t){var n=obe,r,i,s,a;for(a=arguments.length;a-- >2;)M2.push(arguments[a]);for(t&&t.children!=null&&(M2.length||M2.push(t.children),delete t.children);M2.length;)if((i=M2.pop())&&i.pop!==void 0)for(a=i.length;a--;)M2.push(i[a]);else typeof i=="boolean"&&(i=null),(s=typeof e!="function")&&(i==null?i="":typeof i=="number"?i=String(i):typeof i!="string"&&(s=!1)),s&&r?n[n.length-1]+=i:n===obe?n=[i]:n.push(i),r=s;var o=new Ton;return o.nodeName=e,o.children=n,o.attributes=t??void 0,o.key=t==null?void 0:t.key,fl.vnode!==void 0&&fl.vnode(o),o}function q0(e,t){for(var n in t)e[n]=t[n];return e}var Non=typeof Promise=="function"?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function RFe(e,t){return _k(e.nodeName,q0(q0({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var Don=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Cq=[];function FFe(e){!e._dirty&&(e._dirty=!0)&&Cq.push(e)==1&&(fl.debounceRendering||Non)(iie)}function iie(){var e,t=Cq;for(Cq=[];e=t.pop();)e._dirty&&yL(e)}function Ion(e,t,n){return typeof t=="string"||typeof t=="number"?e.splitText!==void 0:typeof t.nodeName=="string"?!e._componentConstructor&&MFe(e,t.nodeName):n||e._componentConstructor===t.nodeName}function MFe(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function LFe(e){var t=q0({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n!==void 0)for(var r in n)t[r]===void 0&&(t[r]=n[r]);return t}function Oon(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function sie(e){var t=e.parentNode;t&&t.removeChild(e)}function lbe(e,t,n,r,i){if(t==="className"&&(t="class"),t!=="key")if(t==="ref")n&&n(null),r&&r(e);else if(t==="class"&&!i)e.className=r||"";else if(t==="style"){if((!r||typeof r=="string"||typeof n=="string")&&(e.style.cssText=r||""),r&&typeof r=="object"){if(typeof n!="string")for(var s in n)s in r||(e.style[s]="");for(var s in r)e.style[s]=typeof r[s]=="number"&&Don.test(s)===!1?r[s]+"px":r[s]}}else if(t==="dangerouslySetInnerHTML")r&&(e.innerHTML=r.__html||"");else if(t[0]=="o"&&t[1]=="n"){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,ube,a):e.removeEventListener(t,ube,a),(e._listeners||(e._listeners={}))[t]=r}else if(t!=="list"&&t!=="type"&&!i&&t in e)Ron(e,t,r??""),(r==null||r===!1)&&e.removeAttribute(t);else{var o=i&&t!==(t=t.replace(/^xlink:?/,""));r==null||r===!1?o?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):typeof r!="function"&&(o?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}}function Ron(e,t,n){try{e[t]=n}catch{}}function ube(e){return this._listeners[e.type](fl.event&&fl.event(e)||e)}var PFe=[],$q=0,x0=!1,b6=!1;function BFe(){for(var e;e=PFe.pop();)fl.afterMount&&fl.afterMount(e),e.componentDidMount&&e.componentDidMount()}function zFe(e,t,n,r,i,s){$q++||(x0=i!=null&&i.ownerSVGElement!==void 0,b6=e!=null&&!("__preactattr_"in e));var a=jFe(e,t,n,r,s);return i&&a.parentNode!==i&&i.appendChild(a),--$q||(b6=!1,s||BFe()),a}function jFe(e,t,n,r,i){var s=e,a=x0;if((t==null||typeof t=="boolean")&&(t=""),typeof t=="string"||typeof t=="number")return e&&e.splitText!==void 0&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),Uy(e,!0))),s.__preactattr_=!0,s;var o=t.nodeName;if(typeof o=="function")return Bon(e,t,n,r);if(x0=o==="svg"?!0:o==="foreignObject"?!1:x0,o=String(o),(!e||!MFe(e,o))&&(s=Oon(o,x0),e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),Uy(e,!0)}var l=s.firstChild,u=s.__preactattr_,c=t.children;if(u==null){u=s.__preactattr_={};for(var f=s.attributes,d=f.length;d--;)u[f[d].name]=f[d].value}return!b6&&c&&c.length===1&&typeof c[0]=="string"&&l!=null&&l.splitText!==void 0&&l.nextSibling==null?l.nodeValue!=c[0]&&(l.nodeValue=c[0]):(c&&c.length||l!=null)&&Fon(s,c,n,r,b6||u.dangerouslySetInnerHTML!=null),Mon(s,t.attributes,u),x0=a,s}function Fon(e,t,n,r,i){var s=e.childNodes,a=[],o={},l=0,u=0,c=s.length,f=0,d=t?t.length:0,h,m,g,b,x;if(c!==0)for(var w=0;w<c;w++){var C=s[w],S=C.__preactattr_,E=d&&S?C._component?C._component.__key:S.key:null;E!=null?(l++,o[E]=C):(S||(C.splitText!==void 0?!i||C.nodeValue.trim():i))&&(a[f++]=C)}if(d!==0)for(var w=0;w<d;w++){b=t[w],x=null;var E=b.key;if(E!=null)l&&o[E]!==void 0&&(x=o[E],o[E]=void 0,l--);else if(!x&&u<f){for(h=u;h<f;h++)if(a[h]!==void 0&&Ion(m=a[h],b,i)){x=m,a[h]=void 0,h===f-1&&f--,h===u&&u++;break}}x=jFe(x,b,n,r),g=s[w],x&&x!==e&&x!==g&&(g==null?e.appendChild(x):x===g.nextSibling?sie(g):e.insertBefore(x,g))}if(l)for(var w in o)o[w]!==void 0&&Uy(o[w],!1);for(;u<=f;)(x=a[f--])!==void 0&&Uy(x,!1)}function Uy(e,t){var n=e._component;n?bL(n):(e.__preactattr_!=null&&e.__preactattr_.ref&&e.__preactattr_.ref(null),(t===!1||e.__preactattr_==null)&&sie(e),UFe(e))}function UFe(e){for(e=e.lastChild;e;){var t=e.previousSibling;Uy(e,!0),e=t}}function Mon(e,t,n){var r;for(r in n)!(t&&t[r]!=null)&&n[r]!=null&&lbe(e,r,n[r],n[r]=void 0,x0);for(r in t)r!=="children"&&r!=="innerHTML"&&(!(r in n)||t[r]!==(r==="value"||r==="checked"?e[r]:n[r]))&&lbe(e,r,n[r],n[r]=t[r],x0)}var Eq={};function Lon(e){var t=e.constructor.name;(Eq[t]||(Eq[t]=[])).push(e)}function VFe(e,t,n){var r=Eq[e.name],i;if(e.prototype&&e.prototype.render?(i=new e(t,n),Tk.call(i,t,n)):(i=new Tk(t,n),i.constructor=e,i.render=Pon),r){for(var s=r.length;s--;)if(r[s].constructor===e){i.nextBase=r[s].nextBase,r.splice(s,1);break}}return i}function Pon(e,t,n){return this.constructor(e,n)}function x6(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==0&&(n===1||fl.syncComponentUpdates!==!1||!e.base?yL(e,1,i):FFe(e)),e.__ref&&e.__ref(e))}function yL(e,t,n,r){if(!e._disable){var i=e.props,s=e.state,a=e.context,o=e.prevProps||i,l=e.prevState||s,u=e.prevContext||a,c=e.base,f=e.nextBase,d=c||f,h=e._component,m=!1,g,b,x;if(c&&(e.props=o,e.state=l,e.context=u,t!==2&&e.shouldComponentUpdate&&e.shouldComponentUpdate(i,s,a)===!1?m=!0:e.componentWillUpdate&&e.componentWillUpdate(i,s,a),e.props=i,e.state=s,e.context=a),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!m){g=e.render(i,s,a),e.getChildContext&&(a=q0(q0({},a),e.getChildContext()));var w=g&&g.nodeName,C,S;if(typeof w=="function"){var E=LFe(g);b=h,b&&b.constructor===w&&E.key==b.__key?x6(b,E,1,a,!1):(C=b,e._component=b=VFe(w,E,a),b.nextBase=b.nextBase||f,b._parentComponent=e,x6(b,E,0,a,!1),yL(b,1,n,!0)),S=b.base}else x=d,C=h,C&&(x=e._component=null),(d||t===1)&&(x&&(x._component=null),S=zFe(x,g,a,n||!c,d&&d.parentNode,!0));if(d&&S!==d&&b!==h){var A=d.parentNode;A&&S!==A&&(A.replaceChild(S,d),C||(d._component=null,Uy(d,!1)))}if(C&&bL(C),e.base=S,S&&!r){for(var k=e,N=e;N=N._parentComponent;)(k=N).base=S;S._component=k,S._componentConstructor=k.constructor}}if(!c||n?PFe.unshift(e):m||(e.componentDidUpdate&&e.componentDidUpdate(o,l,u),fl.afterUpdate&&fl.afterUpdate(e)),e._renderCallbacks!=null)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);!$q&&!r&&BFe()}}function Bon(e,t,n,r){for(var i=e&&e._component,s=i,a=e,o=i&&e._componentConstructor===t.nodeName,l=o,u=LFe(t);i&&!l&&(i=i._parentComponent);)l=i.constructor===t.nodeName;return i&&l&&(!r||i._component)?(x6(i,u,3,n,r),e=i.base):(s&&!o&&(bL(s),e=a=null),i=VFe(t.nodeName,u,n),e&&!i.nextBase&&(i.nextBase=e,a=null),x6(i,u,1,n,r),e=i.base,a&&e!==a&&(a._component=null,Uy(a,!1))),e}function bL(e){fl.beforeUnmount&&fl.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?bL(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,sie(t),Lon(e),UFe(t)),e.__ref&&e.__ref(null)}function Tk(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}q0(Tk.prototype,{setState:function(t,n){var r=this.state;this.prevState||(this.prevState=q0({},r)),q0(r,typeof t=="function"?t(r,this.props):t),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),FFe(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),yL(this,2)},render:function(){}});function WFe(e,t,n){return zFe(n,e,{},!1,t,!1)}var zon={h:_k,createElement:_k,cloneElement:RFe,Component:Tk,render:WFe,rerender:iie,options:fl};const jon=Object.freeze(Object.defineProperty({__proto__:null,Component:Tk,cloneElement:RFe,createElement:_k,default:zon,h:_k,options:fl,render:WFe,rerender:iie},Symbol.toStringTag,{value:"Module"})),aie=_m(jon);var gI={},cbe;function Uon(){if(cbe)return gI;cbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(gI,"__esModule",{value:!0});const e=aie,t=JT();class n extends e.Component{componentDidMount(){const{name:i,tab:s}=this.props;this.props.registerSurface(i,s,this)}componentDidUpdate(){return!1}render(){const{name:i,visible:s,styles:a}=this.props,o=Object.assign({},n.defaultStyles,a),{width:l,height:u}=o;let{maxHeight:c,maxWidth:f}=o;c=u===n.defaultStyles.height?c:u,f=l===n.defaultStyles.width?f:l;const d=t.css({display:s?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:u,width:l,maxHeight:c,maxWidth:f,overflow:"auto"}),h=t.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),m=t.css({boxSizing:"border-box"});return e.h("div",{className:`${d} tf-surface`,ref:g=>this.container=g,"data-visible":s},e.h("div",{className:`${h} tf-label`,ref:g=>this.label=g},i),e.h("div",{className:`${m} tf-draw-area`,ref:g=>this.drawArea=g}))}}return n.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},gI.SurfaceComponent=n,gI}var yI={},fbe;function Von(){if(fbe)return yI;fbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(yI,"__esModule",{value:!0});const e=aie,t=JT();class n extends e.Component{render(){const{tabNames:s,activeTab:a,handleClick:o}=this.props,l=s.length>0?s.map(c=>e.h(r,{key:c,id:c,handleClick:o,isActive:c===a},c)):null,u=t.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return e.h("div",{className:`${u} visor-tabs`},l)}}yI.Tabs=n;class r extends e.Component{render(){const{children:s,isActive:a,handleClick:o,id:l}=this.props,u=t.css({borderBottomColor:a?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return e.h("a",{className:`${u} tf-tab`,"data-isactive":a,onClick:()=>o(l)},s)}}return yI}var dbe;function Won(){if(dbe)return mI;dbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(mI,"__esModule",{value:!0});const e=aie,t=JT(),n=Uon(),r=Von();class i extends e.Component{static render(o,l,u){return e.render(e.h(i,Object.assign({},u)),o,l)}constructor(o){super(o),this.surfaces=new Map;const l=o.startOpen==null?!0:o.startOpen;this.state={isOpen:l,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(o,l){const u=this.surfaceId(o,l);let c;if(this.surfaces.has(u))c=this.surfaces.get(u);else throw Error(`Surface not found with id: ${u}`);return{container:c.container,label:c.label,drawArea:c.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(o,l){return o+l}setTabs(o){const l=o.map(f=>f.tab),u=this.state.tabs;let c;for(const f of l)u.has(f)||(u.add(f),c=f);c!=null&&this.setState({tabs:u,activeTab:c})}getTabs(){return this.state.tabs}registerSurface(o,l,u){const c=this.surfaceId(o,l);this.surfaces.set(c,u)}keyHandler(o){o.keyCode===192&&(o.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(o){this.setState({activeTab:o})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(o){this.setTabs(o.surfaceList)}render(){const{isOpen:o,isFullscreen:l,activeTab:u}=this.state,{surfaceList:c}=this.props,f=Array.from(this.getTabs().values()),m=l?"90vw":"550px",g=t.css({width:m,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),b=t.css({right:"0"}),x=t.css({right:`calc(-${m} - 10px)`}),w=o?b:x,C=t.css({});return e.h("div",{className:`${g} ${w} visor`,"data-isopen":o,"data-isfullscreen":l},e.h(s,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:l}),e.h(r.Tabs,{tabNames:f,activeTab:u,handleClick:this.setActiveTab.bind(this)}),e.h("div",{className:`${C} visor-surfaces`},c.map(S=>e.h(n.SurfaceComponent,{key:S.name+S.tab,name:S.name,tab:S.tab,styles:S.styles,registerSurface:this.registerSurface.bind(this),visible:u===S.tab}))))}}mI.VisorComponent=i;function s(a){const{isFullScreen:o,fullScreenHandler:l,closeHandler:u}=a,c=t.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),f=t.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),d=t.css({marginLeft:"auto"});return e.h("div",{className:`${c} visor-controls`},e.h("button",{className:`${f}`,onClick:l},o?"Minimize":"Maximize"),e.h("button",{className:`${f} ${d}`,onClick:u},"Hide"))}return mI}var hbe;function HFe(){if(hbe)return F3;hbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(F3,"__esModule",{value:!0});const e=Won();let t;const n="Visor",r="tfjs-visor-container";function i(){if(typeof document>"u")throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(r)&&t!=null)return t;let a=document.getElementById(r);a==null&&(a=document.createElement("div"),a.id=r,document.body.appendChild(a));let o;function l(f,d){let h=null;return o=e.VisorComponent.render(f,o,{ref:m=>h=m,surfaceList:Array.from(d.values())}),h}const u=new Map,c=l(a,u);return t=new s(c,a,u,l),t}F3.visor=i;class s{constructor(o,l,u,c){this.visorComponent=o,this.el=l,this.surfaceList=u,this.renderVisor=c}surface(o){const{name:l}=o,u=o.tab==null?n:o.tab;if(l==null||!(typeof l=="string"||l instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");const c=Object.assign({},o,{tab:u}),f=`${l}-${u}`;return this.surfaceList.has(f)||this.surfaceList.set(f,c),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(l,u)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(o){if(!this.visorComponent.state.tabs.has(o))throw new Error(`Tab '${o}' does not exist`);this.visorComponent.setState({activeTab:o})}}return F3.Visor=s,F3}var pbe;function Xc(){if(pbe)return t0;pbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=t0&&t0.__awaiter||function(a,o,l,u){return new(l||(l=Promise))(function(c,f){function d(g){try{m(u.next(g))}catch(b){f(b)}}function h(g){try{m(u.throw(g))}catch(b){f(b)}}function m(g){g.done?c(g.value):new l(function(b){b(g.value)}).then(d,h)}m((u=u.apply(a,o||[])).next())})};Object.defineProperty(t0,"__esModule",{value:!0});const t=OFe(),n=HFe();function r(a){if(a instanceof HTMLElement)return a;if(t.isSurface(a))return a.drawArea;if(t.isSurfaceInfo(a))return n.visor().surface({name:a.name,tab:a.tab,styles:a.styles}).drawArea;throw new Error("Not a drawable")}t0.getDrawArea=r;function i(a,o){const l=Object.getOwnPropertyNames(a),u=Object.getOwnPropertyNames(o);if(l.length!==u.length)return!1;for(let c=0;c<l.length;c++){const f=l[c];if(a[f]!==o[f])return!1}return!0}t0.shallowEquals=i;function s(){return e(this,void 0,void 0,function*(){yield new Promise(a=>requestAnimationFrame(a))})}return t0.nextFrame=s,t0}var mbe;function sg(){if(mbe)return R2;mbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(R2,"__esModule",{value:!0});const e=JT(),t=Xc(),n={prepend:!1};function r(a,o,l={}){const u=t.getDrawArea(a),c=e.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),f=e.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),d=Object.assign({},n,l);let h=u.querySelector(`div[data-name=${o}]`);if(!h){if(h=document.createElement("div"),h.setAttribute("class",`${c}`),h.dataset.name=o,d.title){const m=document.createElement("div");m.setAttribute("class",`subsurface-title ${f}`),m.innerText=d.title,h.appendChild(m)}d.prepend?u.insertBefore(h,u.firstChild):u.appendChild(h)}return h}R2.subSurface=r;function i(a){let l=0,u=a;for(;u&&u.clientWidth===0;)u=u.parentElement,l=50;return u.clientWidth-l}R2.getDefaultWidth=i;function s(a){return a.clientHeight===0?200:a.clientHeight}return R2.getDefaultHeight=s,R2}var gbe;function Hon(){if(gbe)return Kp;gbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=Kp&&Kp.__awaiter||function(l,u,c,f){return new(c||(c=Promise))(function(d,h){function m(x){try{b(f.next(x))}catch(w){h(w)}}function g(x){try{b(f.throw(x))}catch(w){h(w)}}function b(x){x.done?d(x.value):new c(function(w){w(x.value)}).then(m,g)}b((f=f.apply(l,u||[])).next())})},t=Kp&&Kp.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Kp,"__esModule",{value:!0});const n=t(GS),r=sg(),i=Xc();function s(l,u,c={}){return e(this,void 0,void 0,function*(){const f=i.getDrawArea(l),d=u,h=Object.assign({},a,c);if(o.has(f)){const N=o.get(f);if(i.shallowEquals(h,N.lastOptions)){yield i.nextFrame();const I=N.view,T=I.changeset().remove(()=>!0).insert(d);yield I.change("values",T).runAsync();return}}const{xLabel:m,yLabel:g,xType:b,yType:x}=h;let w=null;m!=null&&(w={title:m});let C=null;g!=null&&(C={title:g});const S={actions:!1,mode:"vega-lite",defaultStyle:!1};let E;h.color!=null?Array.isArray(h.color)?E={field:"index",type:"nominal",scale:{range:h.color}}:E={value:h.color}:E={value:"#4C78A0"};const A={width:h.width||r.getDefaultWidth(f),height:h.height||r.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:h.fontSize,titleFontSize:h.fontSize},text:{fontSize:h.fontSize},legend:{labelFontSize:h.fontSize,titleFontSize:h.fontSize}},data:{values:d,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:b,axis:w},y:{field:"value",type:x,axis:C},color:E}};yield i.nextFrame();const k=yield n.default(f,A,S);o.set(f,{view:k.view,lastOptions:h})})}Kp.barchart=s;const a={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},o=new Map;return Kp}var n0={},ybe;function Gon(){if(ybe)return n0;ybe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=n0&&n0.__awaiter||function(o,l,u,c){return new(u||(u=Promise))(function(f,d){function h(b){try{g(c.next(b))}catch(x){d(x)}}function m(b){try{g(c.throw(b))}catch(x){d(x)}}function g(b){b.done?f(b.value):new u(function(x){x(b.value)}).then(h,m)}g((c=c.apply(o,l||[])).next())})},t=n0&&n0.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(n0,"__esModule",{value:!0});const n=t(GS),r=sg(),i=Xc();function s(o,l,u={}){return e(this,void 0,void 0,function*(){const c=Object.assign({},a,u),f=i.getDrawArea(o),d=[],h=l.values,m=l.tickLabels||[],g=m.length===0;let b=!0;for(let S=0;S<h.length;S++){const E=g?`Class ${S}`:m[S];g&&m.push(E);for(let A=0;A<h[S].length;A++){const k=g?`Class ${A}`:m[A],N=h[S][A];S===A&&!c.shadeDiagonal?d.push({label:E,prediction:k,count:N,noFill:!0}):(d.push({label:E,prediction:k,count:N,scaleCount:N}),N!==0&&(b=!1))}}if(!c.shadeDiagonal&&b)for(const S of d)S.noFill===!0&&(S.noFill=!1,S.scaleCount=S.count);const x={actions:!1,mode:"vega-lite",defaultStyle:!1},w={width:c.width||r.getDefaultWidth(f),height:c.height||r.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:c.fontSize,titleFontSize:c.fontSize},text:{fontSize:c.fontSize},legend:{labelFontSize:c.fontSize,titleFontSize:c.fontSize}},data:{values:d},encoding:{x:{field:"prediction",type:"ordinal",title:c.xLabel||"prediction",scale:{domain:m}},y:{field:"label",type:"ordinal",title:c.yLabel||"label",scale:{domain:m}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:c.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};c.shadeDiagonal===!1&&w.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),c.showTextOverlay&&w.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});const C=typeof c.colorMap=="string"?{scheme:c.colorMap}:c.colorMap;w.layer[0].encoding.color.scale.range=C,yield n.default(f,w,x)})}n0.confusionMatrix=s;const a={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]};return n0}var of={},Gg={},bbe;function xL(){if(bbe)return Gg;bbe=1,Object.defineProperty(Gg,"__esModule",{value:!0});/*
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(r,i){if(!r)throw new Error(typeof i=="string"?i:i())}Gg.assert=e;function t(r,i,s=""){e(n(r,i),s+` Shapes ${r} and ${i} must match`)}Gg.assertShapesMatch=t;function n(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1;return!0}return Gg.arraysEqual=n,Gg.DECIMAL_PLACES_TO_CHECK=4,Gg}var xbe;function qon(){if(xbe)return of;xbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=of&&of.__awaiter||function(d,h,m,g){return new(m||(m=Promise))(function(b,x){function w(E){try{S(g.next(E))}catch(A){x(A)}}function C(E){try{S(g.throw(E))}catch(A){x(A)}}function S(E){E.done?b(E.value):new m(function(A){A(E.value)}).then(w,C)}S((g=g.apply(d,h||[])).next())})},t=of&&of.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var m in d)Object.hasOwnProperty.call(d,m)&&(h[m]=d[m]);return h.default=d,h},n=of&&of.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(of,"__esModule",{value:!0});const r=t(rZ),i=n(GS),s=sg(),a=xL(),o=Xc();function l(d,h,m={}){return e(this,void 0,void 0,function*(){const g=Object.assign({},f,m),b=o.getDrawArea(d);let x=h.values;g.rowMajor&&(x=yield u(h.values));const{xTickLabels:w,yTickLabels:C}=h;w!=null&&c(x,w,0),C!=null&&c(x,C,1);const S="@tfidx@",E=[];if(x instanceof r.Tensor){a.assert(x.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const D=yield x.data(),[L,P]=x.shape;for(let M=0;M<L;M++){const F=w?`${w[M]}${S}${M}`:M;for(let R=0;R<P;R++){const j=C?`${C[R]}${S}${R}`:R,H=M*P+R,G=D[H];E.push({x:F,y:j,value:G})}}}else{const D=x;for(let L=0;L<D.length;L++){const P=w?`${w[L]}${S}${L}`:L;for(let M=0;M<D[L].length;M++){const F=C?`${C[M]}${S}${M}`:M,R=D[L][M];E.push({x:P,y:F,value:R})}}}const A={actions:!1,mode:"vega-lite",defaultStyle:!1},k={width:g.width||s.getDefaultWidth(b),height:g.height||s.getDefaultHeight(b),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:E},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:g.xType,title:g.xLabel,sort:!1},y:{field:"y",type:g.yType,title:g.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},N=`${S}\\d+$`,I=new RegExp(N);w&&(k.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${N}/), '')`}),C&&(k.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${N}/), '')`}),(w||C)&&(A.tooltip={sanitize:D=>String(D).replace(I,"")});let T;switch(g.colorMap){case"blues":T=["#f7fbff","#4292c6"];break;case"greyscale":T=["#000000","#ffffff"];break;case"viridis":default:T="viridis";break}if(T!=="viridis"){const D=k.encoding.fill;D.scale={range:T}}if(g.domain){const D=k.encoding.fill;D.scale!=null?D.scale=Object.assign({},D.scale,{domain:g.domain}):D.scale={domain:g.domain}}yield i.default(b,k,A)})}of.heatmap=l;function u(d){return e(this,void 0,void 0,function*(){let h,m;d instanceof r.Tensor?(h=d.shape,m=d.transpose()):(h=[d.length,d[0].length],m=r.tidy(()=>r.tensor2d(d).transpose())),a.assert(m.rank===2,"Input to renderHeatmap must be a 2d array or Tensor2d");const g=yield m.array();m.dispose();const b=[g.length,g[0].length];return a.assert(h[0]===b[1]&&h[1]===b[0],`Unexpected transposed shape. Original ${h} : Transposed ${b}`),g})}function c(d,h,m){const g=d instanceof r.Tensor?d.shape:[d.length,d[0].length];m===0?a.assert(g[0]===h.length,`Length of xTickLabels (${h.length}) must match number of rows (${g[0]})`):m===1&&a.assert(g[1]===h.length,`Length of yTickLabels (${h.length}) must match number of columns (${g[1]})`)}const f={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1};return of}var r0={};const GFe=_m(pNt);var lf={},vbe;function vL(){if(vbe)return lf;vbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=lf&&lf.__awaiter||function(l,u,c,f){return new(c||(c=Promise))(function(d,h){function m(x){try{b(f.next(x))}catch(w){h(w)}}function g(x){try{b(f.throw(x))}catch(w){h(w)}}function b(x){x.done?d(x.value):new c(function(w){w(x.value)}).then(m,g)}b((f=f.apply(l,u||[])).next())})};Object.defineProperty(lf,"__esModule",{value:!0});const t=rZ,n=xL();function r(l){if(!Array.isArray(l))throw new Error("input must be an array");if(l.length===0)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};const u=l.length;let c=-1/0,f=1/0,d=0,h=0,m=0;for(let b=0;b<u;b++){const x=l[b];x>c&&(c=x),x<f&&(f=x),x===0&&(d+=1),isNaN(x)?h+=1:isFinite(x)||(m+=1)}const g={numVals:u,numZeros:d,numNans:h,max:c,min:f,numInfs:m};return g.max===-1/0&&(g.max=NaN),g.min===1/0&&(g.min=NaN),g}lf.arrayStats=r;function i(l){return e(this,void 0,void 0,function*(){const[u,c,f]=t.tidy(()=>{const d=t.scalar(0,l.dtype),h=l.min(),m=l.max(),g=l.equal(d).sum();return[h,m,g]});return Promise.all([l.data(),u.data(),c.data(),f.data()]).then(([d,h,m,g])=>{const b=d.length;let x=0,w=0;for(let A=0;A<b;A++){const k=d[A];isNaN(k)?x+=1:isFinite(k)||(w+=1)}let C=h[0],S=m[0];return x===b&&(C=NaN,S=NaN),{numVals:b,numZeros:g[0],numNans:x,min:C,max:S,numInfs:w}})})}lf.tensorStats=i;function s(l,u,c,f){return e(this,void 0,void 0,function*(){n.assert(l.rank===1,"labels must be a 1D tensor"),n.assert(u.rank===1,"predictions must be a 1D tensor"),n.assert(l.size===u.size,"labels and predictions must be the same length"),f!=null&&n.assert(f.size===u.size,"labels and predictions must be the same length");const d=l.cast("int32"),h=u.cast("int32");c==null&&(c=t.tidy(()=>t.maximum(d.max(),h.max()).cast("int32").dataSync()[0]+1));let m=Promise.resolve(null);return f!=null&&(m=f.data()),Promise.all([d.data(),h.data(),m]).then(([g,b,x])=>{const w=Array(c).fill(0);for(let C=0;C<c;C++)w[C]=Array(c).fill(0);for(let C=0;C<g.length;C++){const S=g[C],E=b[C];x!=null?w[S][E]+=x[C]:w[S][E]+=1}return w})})}lf.confusionMatrix=s;function a(l,u){return e(this,void 0,void 0,function*(){n.assertShapesMatch(l.shape,u.shape,"Error computing accuracy.");const c=l.equal(u),f=c.mean(),d=(yield f.data())[0];return t.dispose([c,f]),d})}lf.accuracy=a;function o(l,u,c){return e(this,void 0,void 0,function*(){return n.assert(l.rank===1,"labels must be a 1D tensor"),n.assert(u.rank===1,"predictions must be a 1D tensor"),n.assert(l.size===u.size,"labels and predictions must be the same length"),c==null&&(c=t.tidy(()=>t.maximum(l.max(),u.max()).dataSync()[0]+1)),Promise.all([l.data(),u.data()]).then(([f,d])=>{const h=Array(c).fill(0),m=Array(c).fill(0);for(let b=0;b<f.length;b++){const x=f[b],w=d[b];h[x]+=1,x===w&&(m[x]+=1)}const g=[];for(let b=0;b<h.length;b++)g.push({count:h[b],accuracy:h[b]===0?0:m[b]/h[b]});return g})})}return lf.perClassAccuracy=o,lf}var bI={},kq="http://www.w3.org/1999/xhtml";const Aq={svg:"http://www.w3.org/2000/svg",xhtml:kq,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oie(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Aq.hasOwnProperty(t)?{space:Aq[t],local:e}:e}function Xon(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kq&&t.documentElement.namespaceURI===kq?t.createElement(e):t.createElementNS(n,e)}}function Yon(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wL(e){var t=oie(e);return(t.local?Yon:Xon)(t)}function Kon(){}function lie(e){return e==null?Kon:function(){return this.querySelector(e)}}function Zon(e){typeof e!="function"&&(e=lie(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new ko(r,this._parents)}function Qon(){return[]}function qFe(e){return e==null?Qon:function(){return this.querySelectorAll(e)}}function Jon(e){typeof e!="function"&&(e=qFe(e));for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),i.push(l));return new ko(r,i)}var XFe=function(e){return function(){return this.matches(e)}};if(typeof document<"u"){var M3=document.documentElement;if(!M3.matches){var eln=M3.webkitMatchesSelector||M3.msMatchesSelector||M3.mozMatchesSelector||M3.oMatchesSelector;XFe=function(e){return function(){return eln.call(this,e)}}}}const YFe=XFe;function tln(e){typeof e!="function"&&(e=YFe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new ko(r,this._parents)}function KFe(e){return new Array(e.length)}function nln(){return new ko(this._enter||this._groups.map(KFe),this._parents)}function v6(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}v6.prototype={constructor:v6,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rln(e){return function(){return e}}var wbe="$";function iln(e,t,n,r,i,s){for(var a=0,o,l=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new v6(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function sln(e,t,n,r,i,s,a){var o,l,u={},c=t.length,f=s.length,d=new Array(c),h;for(o=0;o<c;++o)(l=t[o])&&(d[o]=h=wbe+a.call(l,l.__data__,o,t),h in u?i[o]=l:u[h]=l);for(o=0;o<f;++o)h=wbe+a.call(e,s[o],o,s),(l=u[h])?(r[o]=l,l.__data__=s[o],u[h]=null):n[o]=new v6(e,s[o]);for(o=0;o<c;++o)(l=t[o])&&u[d[o]]===l&&(i[o]=l)}function aln(e,t){if(!e)return h=new Array(this.size()),u=-1,this.each(function(A){h[++u]=A}),h;var n=t?sln:iln,r=this._parents,i=this._groups;typeof e!="function"&&(e=rln(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=i[u],d=f.length,h=e.call(c,c&&c.__data__,u,r),m=h.length,g=o[u]=new Array(m),b=a[u]=new Array(m),x=l[u]=new Array(d);n(c,f,g,b,x,h,t);for(var w=0,C=0,S,E;w<m;++w)if(S=g[w]){for(w>=C&&(C=w+1);!(E=b[C])&&++C<m;);S._next=E||null}}return a=new ko(a,r),a._enter=o,a._exit=l,a}function oln(){return new ko(this._exit||this._groups.map(KFe),this._parents)}function lln(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],u=n[o],c=l.length,f=a[o]=new Array(c),d,h=0;h<c;++h)(d=l[h]||u[h])&&(f[h]=d);for(;o<r;++o)a[o]=t[o];return new ko(a,this._parents)}function uln(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&s!==a.nextSibling&&s.parentNode.insertBefore(a,s),s=a);return this}function cln(e){e||(e=fln);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new ko(i,this._parents).order()}function fln(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dln(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function hln(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function pln(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function mln(){var e=0;return this.each(function(){++e}),e}function gln(){return!this.node()}function yln(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function bln(e){return function(){this.removeAttribute(e)}}function xln(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vln(e,t){return function(){this.setAttribute(e,t)}}function wln(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Sln(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cln(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $ln(e,t){var n=oie(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?xln:bln:typeof t=="function"?n.local?Cln:Sln:n.local?wln:vln)(n,t))}function uie(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Eln(e){return function(){this.style.removeProperty(e)}}function kln(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Aln(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _ln(e,t,n){return arguments.length>1?this.each((t==null?Eln:typeof t=="function"?Aln:kln)(e,t,n??"")):ZFe(this.node(),e)}function ZFe(e,t){return e.style.getPropertyValue(t)||uie(e).getComputedStyle(e,null).getPropertyValue(t)}function Tln(e){return function(){delete this[e]}}function Nln(e,t){return function(){this[e]=t}}function Dln(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Iln(e,t){return arguments.length>1?this.each((t==null?Tln:typeof t=="function"?Dln:Nln)(e,t)):this.node()[e]}function QFe(e){return e.trim().split(/^|\s+/)}function cie(e){return e.classList||new JFe(e)}function JFe(e){this._node=e,this._names=QFe(e.getAttribute("class")||"")}JFe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function eMe(e,t){for(var n=cie(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function tMe(e,t){for(var n=cie(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Oln(e){return function(){eMe(this,e)}}function Rln(e){return function(){tMe(this,e)}}function Fln(e,t){return function(){(t.apply(this,arguments)?eMe:tMe)(this,e)}}function Mln(e,t){var n=QFe(e+"");if(arguments.length<2){for(var r=cie(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Fln:t?Oln:Rln)(n,t))}function Lln(){this.textContent=""}function Pln(e){return function(){this.textContent=e}}function Bln(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zln(e){return arguments.length?this.each(e==null?Lln:(typeof e=="function"?Bln:Pln)(e)):this.node().textContent}function jln(){this.innerHTML=""}function Uln(e){return function(){this.innerHTML=e}}function Vln(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wln(e){return arguments.length?this.each(e==null?jln:(typeof e=="function"?Vln:Uln)(e)):this.node().innerHTML}function Hln(){this.nextSibling&&this.parentNode.appendChild(this)}function Gln(){return this.each(Hln)}function qln(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xln(){return this.each(qln)}function Yln(e){var t=typeof e=="function"?e:wL(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Kln(){return null}function Zln(e,t){var n=typeof e=="function"?e:wL(e),r=t==null?Kln:typeof t=="function"?t:lie(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Qln(){var e=this.parentNode;e&&e.removeChild(this)}function Jln(){return this.each(Qln)}function eun(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function tun(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function nun(e){return this.select(e?tun:eun)}function run(e){return arguments.length?this.property("__data__",e):this.node().__data__}var nMe={},Ah=null;if(typeof document<"u"){var iun=document.documentElement;"onmouseenter"in iun||(nMe={mouseenter:"mouseover",mouseleave:"mouseout"})}function sun(e,t,n){return e=rMe(e,t,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&e.call(this,r)}}function rMe(e,t,n){return function(r){var i=Ah;Ah=r;try{e.call(this,this.__data__,t,n)}finally{Ah=i}}}function aun(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function oun(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.capture):t[++r]=s;++r?t.length=r:delete this.__on}}}function lun(e,t,n){var r=nMe.hasOwnProperty(e.type)?sun:rMe;return function(i,s,a){var o=this.__on,l,u=r(t,s,a);if(o){for(var c=0,f=o.length;c<f;++c)if((l=o[c]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),l.value=t;return}}this.addEventListener(e.type,u,n),l={type:e.type,name:e.name,value:t,listener:u,capture:n},o?o.push(l):this.__on=[l]}}function uun(e,t,n){var r=aun(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=t?lun:oun,n==null&&(n=!1),i=0;i<s;++i)this.each(o(r[i],t,n));return this}function cun(e,t,n,r){var i=Ah;e.sourceEvent=Ah,Ah=e;try{return t.apply(n,r)}finally{Ah=i}}function iMe(e,t,n){var r=uie(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fun(e,t){return function(){return iMe(this,e,t)}}function dun(e,t){return function(){return iMe(this,e,t.apply(this,arguments))}}function hun(e,t){return this.each((typeof t=="function"?dun:fun)(e,t))}var fie=[null];function ko(e,t){this._groups=e,this._parents=t}function sMe(){return new ko([[document.documentElement]],fie)}ko.prototype=sMe.prototype={constructor:ko,select:Zon,selectAll:Jon,filter:tln,data:aln,enter:nln,exit:oln,merge:lln,order:uln,sort:cln,call:dln,nodes:hln,node:pln,size:mln,empty:gln,each:yln,attr:$ln,style:_ln,property:Iln,classed:Mln,text:zln,html:Wln,raise:Gln,lower:Xln,append:Yln,insert:Zln,remove:Jln,clone:nun,datum:run,on:uun,dispatch:hun};function aMe(e){return typeof e=="string"?new ko([[document.querySelector(e)]],[document.documentElement]):new ko([[e]],fie)}function pun(e){return aMe(wL(e).call(document.documentElement))}var mun=0;function oMe(){return new _q}function _q(){this._="@"+(++mun).toString(36)}_q.prototype=oMe.prototype={constructor:_q,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function die(){for(var e=Ah,t;t=e.sourceEvent;)e=t;return e}function SL(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function gun(e){var t=die();return t.changedTouches&&(t=t.changedTouches[0]),SL(e,t)}function yun(e){return typeof e=="string"?new ko([document.querySelectorAll(e)],[document.documentElement]):new ko([e??[]],fie)}function bun(e,t,n){arguments.length<3&&(n=t,t=die().changedTouches);for(var r=0,i=t?t.length:0,s;r<i;++r)if((s=t[r]).identifier===n)return SL(e,s);return null}function xun(e,t){t==null&&(t=die().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=SL(e,t[n]);return i}const vun=Object.freeze(Object.defineProperty({__proto__:null,clientPoint:SL,create:pun,creator:wL,customEvent:cun,get event(){return Ah},local:oMe,matcher:YFe,mouse:gun,namespace:oie,namespaces:Aq,select:aMe,selectAll:yun,selection:sMe,selector:lie,selectorAll:qFe,style:ZFe,touch:bun,touches:xun,window:uie},Symbol.toStringTag,{value:"Module"})),wun=_m(vun);var Sbe;function CL(){if(Sbe)return bI;Sbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(bI,"__esModule",{value:!0});const e=GFe,t=wun,n=JT(),r=Xc();function i(a,o,l={}){if(o&&o.headers==null)throw new Error('Data to render must have a "headers" property');if(o&&o.values==null)throw new Error('Data to render must have a "values" property');const u=r.getDrawArea(a),c=Object.assign({},s,l);let f=t.select(u).select("table.tf-table");const d=n.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(f.size()===0&&(f=t.select(u).append("table"),f.attr("class",` ${d} tf-table`),f.append("thead").append("tr"),f.append("tbody")),f.size()!==1)throw new Error("Error inserting table");const h=n.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),m=f.select("thead").select("tr").selectAll("th").data(o.headers),g=m.enter().append("th").attr("class",`${h}`);m.merge(g).html(A=>A),m.exit().remove();const b=e.format(",.4~f"),x=f.select("tbody").selectAll("tr").data(o.values),w=x.enter().append("tr"),C=n.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),S=x.merge(w).selectAll("td").data(A=>A),E=S.enter().append("td").attr("class",`${C}`);S.merge(E).html(A=>typeof A=="number"?b(A):A),S.exit().remove(),x.exit().remove()}bI.table=i;const s={fontSize:14};return bI}var Cbe;function hie(){if(Cbe)return r0;Cbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=r0&&r0.__awaiter||function(f,d,h,m){return new(h||(h=Promise))(function(g,b){function x(S){try{C(m.next(S))}catch(E){b(E)}}function w(S){try{C(m.throw(S))}catch(E){b(E)}}function C(S){S.done?g(S.value):new h(function(E){E(S.value)}).then(x,w)}C((m=m.apply(f,d||[])).next())})},t=r0&&r0.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(r0,"__esModule",{value:!0});const n=GFe,r=t(GS),i=sg(),s=vL(),a=CL(),o={maxBins:12,fontSize:11};function l(f,d,h={}){return e(this,void 0,void 0,function*(){const m=c(d),g=Object.assign({},o,h),b={actions:!1,mode:"vega-lite",defaultStyle:!1},x=i.subSurface(f,"histogram");if(h.stats!==!1){const S=i.subSurface(f,"stats",{prepend:!0});let E;h.stats?E=h.stats:E=s.arrayStats(m.map(A=>A.value)),u(E,S,{fontSize:g.fontSize})}if(m.length===0)return;const w=[];for(let S=0;S<m.length;S++){const E=m[S].value;E!=null&&isFinite(E)&&w.push(m[S])}const C={width:g.width||i.getDefaultWidth(x),height:g.height||i.getDefaultHeight(x),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:w},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize}},encoding:{x:{bin:{maxbins:g.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:g.color||"#001B44"}}};return r.default(x,C,b)})}r0.histogram=l;function u(f,d,h){const m=n.format(",.4~f"),g=n.format(".4~p"),b=[],x=[];if(f.numVals!=null&&(b.push("Num Vals"),x.push(m(f.numVals))),f.min!=null&&(b.push("Min"),x.push(m(f.min))),f.max!=null&&(b.push("Max"),x.push(m(f.max))),f.numZeros!=null){b.push("# Zeros");let w="";f.numVals&&(w=f.numZeros>0?`(${g(f.numZeros/f.numVals)})`:""),x.push(`${m(f.numZeros)} ${w}`)}if(f.numNans!=null){b.push("# NaNs");let w="";f.numVals&&(w=f.numNans>0?`(${g(f.numNans/f.numVals)})`:""),x.push(`${m(f.numNans)} ${w}`)}if(f.numInfs!=null){b.push("# Infinity");let w="";f.numVals&&(w=f.numInfs>0?`(${g(f.numInfs/f.numVals)})`:""),x.push(`${m(f.numInfs)} ${w}`)}a.table(d,{headers:b,values:[x]},h)}function c(f){if(f.length==null)throw new Error("input data must be an array");if(f.length===0)return[];if(typeof f[0]=="object"){if(f[0].value==null)throw new Error("input data must have a value field");return f}else{const d=Array(f.length);for(let h=0;h<f.length;h++)d[h]={value:f[h]};return d}}return r0}var i0={},$be;function lMe(){if($be)return i0;$be=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=i0&&i0.__awaiter||function(l,u,c,f){return new(c||(c=Promise))(function(d,h){function m(x){try{b(f.next(x))}catch(w){h(w)}}function g(x){try{b(f.throw(x))}catch(w){h(w)}}function b(x){x.done?d(x.value):new c(function(w){w(x.value)}).then(m,g)}b((f=f.apply(l,u||[])).next())})},t=i0&&i0.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(i0,"__esModule",{value:!0});const n=t(GS),r=sg(),i=xL(),s=Xc();function a(l,u,c={}){return e(this,void 0,void 0,function*(){const f=Array.isArray(u.values[0])?u.values:[u.values],d=f[0].length,h=u.series?u.series:f.map((k,N)=>`Series ${N+1}`);i.assert(h.length===f.length,"Must have an equal number of series labels as there are data series"),c.seriesColors!=null&&i.assert(c.seriesColors.length===f.length,"Must have an equal number of series colors as there are data series");const m=[];for(let k=0;k<d;k++){const N={x:k};h.forEach((I,T)=>{const D=f[T][k].y;N[I]=D,N[`${I}-name`]=I}),m.push(N)}const g=Object.assign({},o,c),b=()=>{if(g.zoomToFit)return{zero:!1};if(g.yAxisDomain!=null)return{domain:g.yAxisDomain}},x={x:{field:"x",type:g.xType,title:g.xLabel},tooltip:[{field:"x",type:"quantitative"},...h.map(k=>({field:k,type:"quantitative"}))]},w=h.map(k=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:k,type:g.yType,title:g.yLabel,scale:b()},color:{field:`${k}-name`,type:"nominal",legend:{values:h,title:null},scale:{range:g.seriesColors}}}})),C={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},S=s.getDrawArea(l),E={width:g.width||r.getDefaultWidth(S),height:g.height||r.getDefaultHeight(S),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize}},data:{values:m},encoding:x,layer:[...w,C]},A={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield n.default(S,E,A),Promise.resolve()})}i0.linechart=a;const o={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};return i0}var s0={},Ebe;function Sun(){if(Ebe)return s0;Ebe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=s0&&s0.__awaiter||function(l,u,c,f){return new(c||(c=Promise))(function(d,h){function m(x){try{b(f.next(x))}catch(w){h(w)}}function g(x){try{b(f.throw(x))}catch(w){h(w)}}function b(x){x.done?d(x.value):new c(function(w){w(x.value)}).then(m,g)}b((f=f.apply(l,u||[])).next())})},t=s0&&s0.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(s0,"__esModule",{value:!0});const n=t(GS),r=sg(),i=xL(),s=Xc();function a(l,u,c={}){return e(this,void 0,void 0,function*(){let f=u.values;const d=u.series==null?[]:u.series;f=Array.isArray(f[0])?f:[f];const h=[];f.forEach((S,E)=>{const A=d[E]!=null?d[E]:`Series ${E+1}`,k=S.map(N=>Object.assign({},N,{series:A}));h.push(...k)}),c.seriesColors!=null&&i.assert(c.seriesColors.length===f.length,"Must have an equal number of series colors as there are data series");const m=s.getDrawArea(l),g=Object.assign({},o,c),b={actions:!1,mode:"vega-lite",defaultStyle:!1},x=()=>{if(g.zoomToFit)return{zero:!1};if(g.xAxisDomain!=null)return{domain:g.xAxisDomain}},w=()=>{if(g.zoomToFit)return{zero:!1};if(g.yAxisDomain!=null)return{domain:g.yAxisDomain}},C={width:g.width||r.getDefaultWidth(m),height:g.height||r.getDefaultHeight(m),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize}},data:{values:h},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:g.xType,title:g.xLabel,scale:x()},y:{field:"y",type:g.yType,title:g.yLabel,scale:w()},color:{field:"series",type:"nominal",scale:{range:g.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield n.default(m,C,b),Promise.resolve()})}s0.scatterplot=a;const o={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11};return s0}var qg={},kbe;function Cun(){if(kbe)return qg;kbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=qg&&qg.__awaiter||function(u,c,f,d){return new(f||(f=Promise))(function(h,m){function g(w){try{x(d.next(w))}catch(C){m(C)}}function b(w){try{x(d.throw(w))}catch(C){m(C)}}function x(w){w.done?h(w.value):new f(function(C){C(w.value)}).then(g,b)}x((d=d.apply(u,c||[])).next())})};Object.defineProperty(qg,"__esModule",{value:!0});const t=lMe(),n=Xc(),r=sg();function i(u,c,f,d={}){return e(this,void 0,void 0,function*(){const h=n.getDrawArea(u),m={};for(const w of f)if(/val_/.test(w)){const C=w.replace("val_","");s(m,C);const S=a(c,w,f.indexOf(w));m[C].series.push(w),m[C].values.push(S)}else{const C=a(c,w,f.indexOf(w));s(m,w),m[w].series.push(w),m[w].values.push(C)}const g=Object.keys(m),b=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},d),x=[];for(const w of g){const C=r.subSurface(h,w),S=m[w].series,E=m[w].values;S.every(k=>!!k.match("acc"))&&(b.zoomToFitAccuracy?b.zoomToFit=!0:(b.yAxisDomain=[0,1],delete b.zoomToFit));const A=t.linechart(C,{values:E,series:S},b);x.push(A)}yield Promise.all(x)})}qg.history=i;function s(u,c){u[c]==null&&(u[c]={series:[],values:[]})}function a(u,c,f){if(Array.isArray(u)){const d=Array.isArray(u[0])?u[f]:u,h=[];for(let m=0;m<d.length;m++){const g=d[m];h.push({x:m,y:g[c]})}return h}else return u.history[c].map((d,h)=>({x:h,y:d}))}function o(u,c,f={}){const d={},h=f.callbacks||["onEpochEnd","onBatchEnd"],m=n.getDrawArea(u),g=Object.assign({},f);delete g.callbacks;function b(w){return(C,S)=>e(this,void 0,void 0,function*(){/batch/i.test(w)?g.xLabel="Batch":/epoch/i.test(w)&&(g.xLabel="Epoch");const E=[],A=[];for(const N of c)if(S[N]!=null){A.push(N);const I=l(d,w,N);I.push({[N]:S[N]}),E.push(I)}const k=r.subSurface(m,w,{title:w});i(k,E,A,g),yield n.nextFrame()})}const x={};return h.forEach(w=>{x[w]=b(w)}),x}qg.fitCallbacks=o;function l(u,c,f){return u[c]==null&&(u[c]={}),u[c][f]==null&&(u[c][f]=[]),u[c][f]}return qg}var Xg={},Abe;function $un(){if(Abe)return Xg;Abe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=Xg&&Xg.__awaiter||function(h,m,g,b){return new(g||(g=Promise))(function(x,w){function C(A){try{E(b.next(A))}catch(k){w(k)}}function S(A){try{E(b.throw(A))}catch(k){w(k)}}function E(A){A.done?x(A.value):new g(function(k){k(A.value)}).then(C,S)}E((b=b.apply(h,m||[])).next())})};Object.defineProperty(Xg,"__esModule",{value:!0});const t=hie(),n=Xc(),r=CL(),i=sg(),s=vL();function a(h,m){return e(this,void 0,void 0,function*(){const g=n.getDrawArea(h),b=l(m),x=["Layer Name","Output Shape","# Of Params","Trainable"],w=b.layers.map(C=>[C.name,C.outputShape,C.parameters,C.trainable]);r.table(g,{headers:x,values:w})})}Xg.modelSummary=a;function o(h,m){return e(this,void 0,void 0,function*(){const g=n.getDrawArea(h),b=yield c(m),x=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],w=i.subSurface(g,"layer-weights-info"),C=b.map(k=>[k.name,k.shape,k.stats.min,k.stats.max,k.weight.size,k.stats.numZeros,k.stats.numNans,k.stats.numInfs]);r.table(w,{headers:x,values:C});const S=i.subSurface(g,"select-layer"),E=i.subSurface(g,"param-distribution"),A=k=>e(this,void 0,void 0,function*(){const I=yield b.filter(T=>T.name===k)[0].weight.data();t.histogram(E,I,{height:150,width:460,stats:!1})});d(b.map(k=>k.name),S,A)})}Xg.layer=o;function l(h){return{layers:h.layers.map(u)}}function u(h){let m;return Array.isArray(h.outputShape[0])?m=`[${h.outputShape.map(b=>f(b)).join(", ")}]`:m=f(h.outputShape),{name:h.name,trainable:h.trainable,parameters:h.countParams(),outputShape:m}}function c(h){return e(this,void 0,void 0,function*(){const m=h.getWeights(),g=h.weights,b=m.map(s.tensorStats),x=yield Promise.all(b),w=m.map(C=>C.shape);return m.map((C,S)=>({name:g[S].name,stats:x[S],shape:f(w[S]),weight:C}))})}function f(h){const m=h.slice();return m.length===0?"Scalar":(m[0]===null&&(m[0]="batch"),`[${m.join(",")}]`)}function d(h,m,g){const w=`<div><button>Show Values Distribution for:</button>${`
    <select>
      ${h.map(E=>`<option value=${E}>${E}</option>`)}
    </select>
  `}</div>`;m.innerHTML=w;const C=m.querySelector("button"),S=m.querySelector("select");C.addEventListener("click",()=>{g(S.selectedOptions[0].label)})}return Xg}var L2={},_be;function Eun(){if(_be)return L2;_be=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=L2&&L2.__awaiter||function(i,s,a,o){return new(a||(a=Promise))(function(l,u){function c(h){try{d(o.next(h))}catch(m){u(m)}}function f(h){try{d(o.throw(h))}catch(m){u(m)}}function d(h){h.done?l(h.value):new a(function(m){m(h.value)}).then(c,f)}d((o=o.apply(i,s||[])).next())})};Object.defineProperty(L2,"__esModule",{value:!0});const t=Xc(),n=CL();function r(i,s,a){return e(this,void 0,void 0,function*(){const o=t.getDrawArea(i),l=["Class","Accuracy","# Samples"],u=[];for(let c=0;c<s.length;c++){const f=a?a[c]:c.toString(),d=s[c];u.push([f,d.accuracy,d.count])}return n.table(o,{headers:l,values:u})})}return L2.perClassAccuracy=r,L2}var P2={},Tbe;function kun(){if(Tbe)return P2;Tbe=1;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e=P2&&P2.__awaiter||function(s,a,o,l){return new(o||(o=Promise))(function(u,c){function f(m){try{h(l.next(m))}catch(g){c(g)}}function d(m){try{h(l.throw(m))}catch(g){c(g)}}function h(m){m.done?u(m.value):new o(function(g){g(m.value)}).then(f,d)}h((l=l.apply(s,a||[])).next())})};Object.defineProperty(P2,"__esModule",{value:!0});const t=hie(),n=Xc(),r=vL();function i(s,a){return e(this,void 0,void 0,function*(){const o=n.getDrawArea(s),l=yield r.tensorStats(a),u=yield a.data();t.histogram(o,u,{height:150,stats:l})})}return P2.valuesDistribution=i,P2}var xI={},Nbe;function Aun(){if(Nbe)return xI;Nbe=1;/** @license See the LICENSE file. */Object.defineProperty(xI,"__esModule",{value:!0});const e="1.5.1";return xI.version=e,xI}var Dbe;function _un(){return Dbe||(Dbe=1,function(e){function t(C){for(var S in C)e.hasOwnProperty(S)||(e[S]=C[S])}Object.defineProperty(e,"__esModule",{value:!0});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n=Hon(),r=Gon(),i=qon(),s=hie(),a=lMe(),o=Sun(),l=CL(),u=Cun(),c=$un(),f=Eun(),d=kun(),h=vL(),m=Aun();e.version_vis=m.version;const g={barchart:n.barchart,table:l.table,histogram:s.histogram,linechart:a.linechart,scatterplot:o.scatterplot,confusionMatrix:r.confusionMatrix,heatmap:i.heatmap};e.render=g;const b={accuracy:h.accuracy,perClassAccuracy:h.perClassAccuracy,confusionMatrix:h.confusionMatrix};e.metrics=b;const x={history:u.history,fitCallbacks:u.fitCallbacks,perClassAccuracy:f.perClassAccuracy,valuesDistribution:d.valuesDistribution,layer:c.layer,modelSummary:c.modelSummary};e.show=x;var w=HFe();e.visor=w.visor,t(OFe())}(_z)),_z}var nE=_un();function Ibe(e,t,n){return he(function(){const i=t||py(e,0),s=n||Qo(e,0),a=st(e,i),o=st(s,i);return{NORMALIZED_VALUES:ct(a,o),MIN_VALUES:i,MAX_VALUES:s}})}var eN=(e=>(e.MSE="meanSquaredError",e.CCE="categoricalCrossentropy",e))(eN||{});const Tun=()=>{const[e,t]=U.useState(null),[n,r]=U.useState(!1),[i,s]=U.useState("loading"),[a,o]=U.useState([]),l=U.useRef(null),u=U.useRef({learningRate:.01,optimizer:Da.SGD,loss:eN.MSE,validationSplit:.15,batchSize:64,epochs:10});U.useEffect(()=>{s("loading")},[]);const c=U.useCallback(()=>{const w=EK();w.add(lx({units:1,inputShape:[2]})),w.summary();let C;switch(u.current.optimizer){case Da.ADAM:C=no.adam(u.current.learningRate);break;case Da.SGD:default:C=no.sgd(u.current.learningRate);break}return w.compile({optimizer:C,loss:u.current.loss}),w},[]),f=U.useCallback(async()=>{try{r(!0),o([]),e&&e.dispose();const w=c();t(w),d();const C=u1.inputs,S=u1.outputs;W6(C,S);const{NORMALIZED_VALUES:E,MIN_VALUES:A,MAX_VALUES:k}=Ibe(Of(C),null,null);l.current={min:A,max:k};const N=ji(S);await w.fit(E,N,{batchSize:u.current.batchSize,epochs:u.current.epochs,validationSplit:u.current.validationSplit,shuffle:!0,callbacks:{onEpochEnd:(I,T)=>{const D=Math.sqrt((T==null?void 0:T.loss)||0),L=Math.sqrt((T==null?void 0:T.val_loss)||0);o(P=>[...P,{epoch:I,loss:D,validationLoss:L}])}}}),s("ready")}catch(w){console.error("Training error:",w),s("error")}finally{r(!1)}},[e,c]),d=()=>{l.current&&(l.current.min.dispose(),l.current.max.dispose(),l.current=null)},h=U.useCallback(async(w,C)=>!e||!l.current?null:he(()=>{const S=Of([[w,C]]),{NORMALIZED_VALUES:E}=Ibe(S,l.current.min,l.current.max);return e.predict(E).dataSync()[0]}),[e]),m=U.useCallback(()=>{e&&(e.dispose(),t(null)),l.current&&(l.current.min.dispose(),l.current.max.dispose(),l.current=null),s("loading"),o([])},[e]),g=U.useCallback(w=>{u.current={...u.current,...w}},[]),b=U.useCallback(()=>{if(e){const w=nE.visor();w.surface({name:"Model Training",tab:"MODEL"}),w.open(),w.setActiveTab("MODEL"),nE.show.modelSummary({name:"House Price Prediction Model",tab:"MODEL"},e);const C=e.layers[0];C&&nE.show.layer({name:"Layer Details",tab:"MODEL"},C)}},[e]),x=U.useCallback(()=>{e&&(e.stopTraining=!0)},[e]);return{isTraining:n,trainingHistory:a,modelStatus:i,startTraining:f,stopTraining:x,predictPrice:h,showModelDetails:b,cleanupModel:m,updateTrainingParams:g}},Nun=()=>{const[e,t]=U.useState([]),{isTraining:n,trainingHistory:r,modelStatus:i,startTraining:s,stopTraining:a,predictPrice:o,showModelDetails:l,cleanupModel:u,updateTrainingParams:c}=Tun(),f=async(h,m)=>{const g=await o(h,m);return g!==null&&t(b=>[...b,{size:h,bedrooms:m,price:g}]),g},d=()=>{u(),t([])};return W.jsx(M1,{children:W.jsxs(Wy,{maxWidth:"lg",sx:{py:4},children:[W.jsx(Q3t,{}),W.jsx(K3t,{isTraining:n,trainingHistory:r,onStartTraining:s,onStopTraining:a,onShowDetails:l,onUpdateParams:c,predictions:e}),W.jsx(Z3t,{modelStatus:i,onPredict:f,onCleanup:d})]})})},Dun=()=>W.jsxs(Hl,{sx:{p:3,mb:3},children:[W.jsx(mt,{variant:"h5",gutterBottom:!0,children:"Handwritten Digit Recognition"}),W.jsxs(mt,{children:["This exercise uses a custom neural network with dense layers to recognize handwritten digits using a subset of the MNIST dataset prepared for the ",W.jsx(kx,{href:"https://storage.googleapis.com/jmstore/TensorFlowJS/EdX/TrainingData/mnist.js",children:"Google course"}),". The model is trained on grayscale images of size 28x28 pixels, where the background is black (0) and the handwritten digits are white (1) or various shades of gray."]}),W.jsx(mt,{children:"You can experiment with different model architectures by adding or removing hidden layers and adjusting their units. The model will struggle with digits that are significantly different from the training data (tilted, scaled, or offset) due to only having dense layers (no convolutional layers)."}),W.jsxs(Xt,{sx:{mt:2},children:[W.jsx(mt,{variant:"h6",children:"Instructions:"}),W.jsxs(Xt,{component:"ol",sx:{pl:2,mt:1},children:[W.jsx(mt,{component:"li",sx:{mb:.5},children:"Configure the model architecture by adding/removing hidden layers in the Training section"}),W.jsx(mt,{component:"li",sx:{mb:.5},children:"Adjust the training parameters (learning rate, optimizer, etc.)"}),W.jsx(mt,{component:"li",sx:{mb:.5},children:"Start training and observe the accuracy graph"}),W.jsx(mt,{component:"li",sx:{mb:.5},children:"Once training is complete, try drawing digits in the evaluation section"}),W.jsx(mt,{component:"li",sx:{mb:.5},children:"You can also test the model with random samples from the training set"})]})]})]}),uMe=cd(W.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),cMe=cd(W.jsx("path",{d:"M19 13H5v-2h14z"})),Yg={"training-section":"_training-section_1vln7_1","training-section__hidden-layers":"_training-section__hidden-layers_1vln7_7","training-section__layer-inputs":"_training-section__layer-inputs_1vln7_10","training-section__layer-controls":"_training-section__layer-controls_1vln7_17","training-section__params-grid":"_training-section__params-grid_1vln7_21","training-section__button-group":"_training-section__button-group_1vln7_38","training-section__chart-container":"_training-section__chart-container_1vln7_43"};T_.register(vR,wR,R$,q2,MEe,PEe,REe);const Iun=({model:e,trainingHistory:t,isTraining:n,trainingParams:r,setTrainingParams:i,startTraining:s,stopTraining:a,showModelSummary:o,hiddenLayers:l,addHiddenLayer:u,removeHiddenLayer:c,updateHiddenLayer:f})=>{const d={labels:t.map(m=>m.epoch+1),datasets:[{label:"Training Accuracy",data:t.map(m=>m.accuracy),borderColor:"rgb(75, 192, 192)",tension:.1},{label:"Validation Accuracy",data:t.map(m=>m.validationAccuracy),borderColor:"rgb(255, 99, 132)",tension:.1}]},h={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:1,title:{display:!0,text:"Accuracy"}},x:{title:{display:!0,text:"Epoch"}}},plugins:{title:{display:!1},legend:{position:"top"}}};return W.jsxs(Hl,{className:Yg["training-section"],children:[W.jsx(mt,{variant:"h5",gutterBottom:!0,children:"Model Architecture"}),W.jsxs(Xt,{className:Yg["training-section__hidden-layers"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Hidden Layers"}),W.jsx(Xt,{className:Yg["training-section__layer-inputs"],children:l.map((m,g)=>W.jsx(Xt,{children:W.jsx(ka,{fullWidth:!0,label:`Layer ${g+1} Units`,type:"number",value:m.units,onChange:b=>f(g,parseInt(b.target.value)),slotProps:{htmlInput:{min:1}}})},g))}),W.jsxs(Xt,{className:Yg["training-section__layer-controls"],children:[W.jsx($s,{variant:"outlined",startIcon:W.jsx(uMe,{}),onClick:u,children:"Add Layer"}),W.jsx($s,{variant:"outlined",startIcon:W.jsx(cMe,{}),onClick:c,disabled:l.length<=1,children:"Remove Layer"})]})]}),W.jsx(mt,{variant:"h5",gutterBottom:!0,children:"Training Parameters"}),W.jsxs(Xt,{className:Yg["training-section__params-grid"],children:[W.jsx(ka,{fullWidth:!0,label:"Learning Rate",type:"number",value:r.learningRate,onChange:m=>i({...r,learningRate:parseFloat(m.target.value)}),slotProps:{htmlInput:{step:.001,min:.001,max:1}}}),W.jsx(ka,{fullWidth:!0,label:"Epochs",type:"number",value:r.epochs,onChange:m=>i({...r,epochs:parseInt(m.target.value)}),slotProps:{htmlInput:{min:1}}}),W.jsx(ka,{fullWidth:!0,label:"Batch Size",type:"number",value:r.batchSize,onChange:m=>i({...r,batchSize:parseInt(m.target.value)}),slotProps:{htmlInput:{min:1}}}),W.jsx(ka,{fullWidth:!0,label:"Validation Split",type:"number",value:r.validationSplit,onChange:m=>i({...r,validationSplit:parseFloat(m.target.value)}),slotProps:{htmlInput:{step:.1,min:0,max:.5}}}),W.jsxs($x,{fullWidth:!0,children:[W.jsx(Ex,{children:"Optimizer"}),W.jsxs(ay,{label:"Optimizer",value:r.optimizer,onChange:m=>i({...r,optimizer:m.target.value}),children:[W.jsx(gh,{value:"adam",children:"Adam"}),W.jsx(gh,{value:"sgd",children:"SGD"}),W.jsx(gh,{value:"rmsprop",children:"RMSprop"})]})]}),W.jsxs($x,{fullWidth:!0,children:[W.jsx(Ex,{children:"Loss Function"}),W.jsxs(ay,{label:"Loss Function",value:r.loss,onChange:m=>i({...r,loss:m.target.value}),children:[W.jsx(gh,{value:"categoricalCrossentropy",children:"Categorical Crossentropy"}),W.jsx(gh,{value:"meanSquaredError",children:"Mean Squared Error"})]})]})]}),W.jsxs(Xt,{className:Yg["training-section__button-group"],children:[W.jsx($s,{variant:"contained",color:"primary",onClick:s,disabled:n,children:"Start Training"}),W.jsx($s,{variant:"outlined",color:"secondary",onClick:a,disabled:!n,children:"Stop Training"}),W.jsx($s,{variant:"outlined",onClick:o,disabled:!e,children:"Show Model Summary"})]}),t.length>0&&W.jsxs(Xt,{className:Yg["training-section__chart-container"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Training Progress"}),W.jsx(xZ,{data:d,options:h})]})]})},Oun="modulepreload",Run=function(e){return"/edx-google-ai-tensorflow/"+e},Obe={},$L=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(n.map(u=>{if(u=Run(u),u in Obe)return;Obe[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Oun,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},Ss={"evaluation-section":"_evaluation-section_1rlaf_1","evaluation-section__grid":"_evaluation-section__grid_1rlaf_5","evaluation-section__canvas-container":"_evaluation-section__canvas-container_1rlaf_8","evaluation-section__canvas-box":"_evaluation-section__canvas-box_1rlaf_11","evaluation-section__canvas-box--drawing":"_evaluation-section__canvas-box--drawing_1rlaf_16","evaluation-section__canvas-box--preview":"_evaluation-section__canvas-box--preview_1rlaf_19","evaluation-section__canvas":"_evaluation-section__canvas_1rlaf_8","evaluation-section__controls":"_evaluation-section__controls_1rlaf_28","evaluation-section__line-width-controls":"_evaluation-section__line-width-controls_1rlaf_35","evaluation-section__random-sample-button":"_evaluation-section__random-sample-button_1rlaf_38","evaluation-section__predictions":"_evaluation-section__predictions_1rlaf_41","evaluation-section__prediction-item":"_evaluation-section__prediction-item_1rlaf_47","evaluation-section__prediction-item-label":"_evaluation-section__prediction-item-label_1rlaf_55","evaluation-section__prediction-item-label--bold":"_evaluation-section__prediction-item-label--bold_1rlaf_58","evaluation-section__prediction-item-percentage":"_evaluation-section__prediction-item-percentage_1rlaf_61"},Fun=({model:e,predictDigit:t,cleanupModel:n})=>{const r=U.useRef(null),i=U.useRef(null),[s,a]=U.useState(!1),[o,l]=U.useState(20),[u,c]=U.useState([]);U.useEffect(()=>{const S=r.current,E=i.current;if(!S||!E)return;S.width=280,S.height=280;const A=S.getContext("2d");if(!A)return;A.lineWidth=o,A.lineCap="round",A.strokeStyle="black",A.fillStyle="white",A.fillRect(0,0,S.width,S.height),E.width=280,E.height=280;const k=E.getContext("2d");k&&(k.fillStyle="black",k.fillRect(0,0,E.width,E.height),f(k))},[]),U.useEffect(()=>{const S=r.current;if(!S)return;const E=S.getContext("2d");E&&(E.lineWidth=o)},[o]);const f=S=>{S.strokeStyle="rgba(128, 128, 128, 0.3)",S.lineWidth=1;for(let E=0;E<=280;E+=10)S.beginPath(),S.moveTo(E,0),S.lineTo(E,280),S.stroke();for(let E=0;E<=280;E+=10)S.beginPath(),S.moveTo(0,E),S.lineTo(280,E),S.stroke()},d=(S,E)=>{const A=S.getBoundingClientRect(),k=S.width/A.width,N=S.height/A.height;return{x:(E.clientX-A.left)*k,y:(E.clientY-A.top)*N}},h=S=>{a(!0);const E=r.current,A=E==null?void 0:E.getContext("2d");if(!E||!A)return;const{x:k,y:N}=d(E,S);A.beginPath(),A.moveTo(k,N)},m=S=>{if(!s)return;const E=r.current,A=E==null?void 0:E.getContext("2d");if(!E||!A)return;const{x:k,y:N}=d(E,S);A.lineTo(k,N),A.stroke()},g=()=>{a(!1);const S=r.current,E=S==null?void 0:S.getContext("2d");E&&E.beginPath()},b=()=>{const S=r.current,E=S==null?void 0:S.getContext("2d");!S||!E||(E.fillStyle="white",E.fillRect(0,0,S.width,S.height),c([]))},x=async()=>{const S=r.current,E=i.current;if(!S||!E)return;const A=E.getContext("2d");if(!A)return;const k=GO(S,1).resizeBilinear([28,28]).toFloat().div(255),N=k.sub(1).mul(-1),I=await N.squeeze().data();A.fillStyle="black",A.fillRect(0,0,E.width,E.height);const T=E.width/28;for(let D=0;D<28;D++)for(let L=0;L<28;L++){const P=I[D*28+L];P>0&&(A.fillStyle=`rgba(255, 255, 255, ${P})`,A.fillRect(L*T,D*T,T,T))}f(A),k.dispose(),N.dispose()},w=async()=>{const S=r.current;if(!S)return;await x();const E=GO(S,1).resizeBilinear([28,28]).toFloat().div(255),A=E.sub(1).mul(-1),k=A.reshape([1,784]),N=await t(k);N&&c(N),E.dispose(),A.dispose()},C=async()=>{const{TRAINING_DATA:S}=await $L(async()=>{const{TRAINING_DATA:L}=await import("./mnist-data-DmLoZEJx.js");return{TRAINING_DATA:L}},[]),E=Math.floor(Math.random()*S.inputs.length),A=S.inputs[E],k=i.current;if(!k)return;const N=k.getContext("2d");if(!N)return;N.fillStyle="black",N.fillRect(0,0,k.width,k.height);const I=k.width/28;for(let L=0;L<28;L++)for(let P=0;P<28;P++){const M=A[L*28+P];M>0&&(N.fillStyle=`rgba(255, 255, 255, ${M})`,N.fillRect(P*I,L*I,I,I))}f(N);const T=Of([A]).reshape([1,784]),D=await t(T);D&&c(D),T.dispose()};return W.jsxs(Hl,{className:Ss["evaluation-section"],children:[W.jsx(mt,{variant:"h5",gutterBottom:!0,children:"Digit Recognition Evaluation"}),W.jsxs(ah,{container:!0,spacing:4,className:Ss["evaluation-section__grid"],children:[W.jsxs(ah,{size:{xs:12,md:6},children:[W.jsxs(Xt,{className:Ss["evaluation-section__canvas-container"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Draw a digit here"}),W.jsx("div",{className:`${Ss["evaluation-section__canvas-box"]} ${Ss["evaluation-section__canvas-box--drawing"]}`,children:W.jsx("canvas",{ref:r,onMouseDown:h,onMouseMove:m,onMouseUp:g,onMouseOut:g,className:Ss["evaluation-section__canvas"]})})]}),W.jsxs(rx,{direction:"row",spacing:2,className:Ss["evaluation-section__line-width-controls"],children:[W.jsx($s,{variant:"outlined",onClick:b,children:"Clear Canvas"}),W.jsxs(rx,{direction:"row",spacing:1,alignItems:"center",children:[W.jsx($s,{size:"small",variant:"outlined",onClick:()=>l(S=>Math.max(5,S-5)),children:"-"}),W.jsxs(mt,{variant:"body2",children:["Line Width: ",o]}),W.jsx($s,{size:"small",variant:"outlined",onClick:()=>l(S=>Math.min(50,S+5)),children:"+"})]})]})]}),W.jsxs(ah,{size:{xs:12,md:6},children:[W.jsxs(Xt,{className:Ss["evaluation-section__canvas-container"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"28x28 Preview (Model Input)"}),W.jsx("div",{className:`${Ss["evaluation-section__canvas-box"]} ${Ss["evaluation-section__canvas-box--preview"]}`,children:W.jsx("canvas",{ref:i,className:Ss["evaluation-section__canvas"]})})]}),W.jsx($s,{variant:"outlined",onClick:C,disabled:!e,className:Ss["evaluation-section__random-sample-button"],children:"Pick Random Sample"})]})]}),W.jsxs(rx,{direction:"row",spacing:2,className:Ss["evaluation-section__controls"],children:[W.jsx($s,{variant:"contained",onClick:w,disabled:!e,children:"Predict Digit"}),W.jsx($s,{variant:"outlined",color:"secondary",onClick:n,disabled:!e,children:"Cleanup Model"})]}),u.length>0&&W.jsxs("div",{className:Ss["evaluation-section__predictions"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Predictions:"}),u.map(({prob:S,index:E},A)=>W.jsxs("div",{className:Ss["evaluation-section__prediction-item"],children:[W.jsxs(mt,{variant:"body1",className:`${Ss["evaluation-section__prediction-item-label"]} ${A===0?Ss["evaluation-section__prediction-item-label--bold"]:""}`,children:["Digit ",E,":"]}),W.jsxs(mt,{variant:"body1",className:Ss["evaluation-section__prediction-item-percentage"],children:[(S*100).toFixed(2),"%"]}),A===0&&W.jsx(mt,{variant:"body2",color:"primary",children:"(Best Match)"})]},E))]})]})},Mun=()=>{const[e,t]=U.useState(null),[n,r]=U.useState([]),[i,s]=U.useState(!1),[a,o]=U.useState([{units:32}]),[l,u]=U.useState({learningRate:.01,optimizer:Da.ADAM,loss:eN.CCE,validationSplit:.2,batchSize:64,epochs:10}),c=U.useCallback(()=>{const C=EK();return C.add(lx({inputShape:[784],units:a[0].units,activation:"relu"})),a.slice(1).forEach(S=>{C.add(lx({units:S.units,activation:"relu"}))}),C.add(lx({units:10,activation:"softmax"})),C},[a]),f=U.useCallback(async()=>{s(!0),r([]),e&&e.dispose();const C=c();t(C);try{const{TRAINING_DATA:S}=await $L(async()=>{const{TRAINING_DATA:T}=await import("./mnist-data-DmLoZEJx.js");return{TRAINING_DATA:T}},[]),E=S.inputs,A=S.outputs;W6(E,A);const k=Of(E),N=nm(ji(A,"int32"),10);let I;switch(l.optimizer){case Da.ADAM:default:I=no.adam(l.learningRate);break;case Da.SGD:I=no.sgd(l.learningRate);break;case Da.RMS:I=no.rmsprop(l.learningRate);break}C.compile({optimizer:I,loss:l.loss,metrics:["accuracy"]}),await C.fit(k,N,{shuffle:!0,batchSize:l.batchSize,validationSplit:l.validationSplit,epochs:l.epochs,callbacks:{onEpochEnd:async(T,D)=>{if(D){const L=D.acc??0,P=D.loss??0,M=D.val_acc??0,F=D.val_loss??0;r(R=>[...R,{epoch:T,accuracy:L,loss:P,validationAccuracy:M,validationLoss:F}])}await f_()}}}),k.dispose(),N.dispose()}catch(S){console.error("Training failed:",S)}finally{s(!1)}},[l,e,c]),d=U.useCallback(()=>{e&&(e.stopTraining=!0)},[e]),h=U.useCallback(async C=>{if(!e)return null;const S=await e.predict(C),E=await S.data(),A=Array.from(E).map((k,N)=>({prob:k,index:N})).sort((k,N)=>N.prob-k.prob).slice(0,2);return S.dispose(),A},[e]),m=U.useCallback(()=>{e&&nE.show.modelSummary({name:"Model Summary"},e)},[e]),g=U.useCallback(()=>{e&&(e.dispose(),t(null)),r([])},[e]),b=U.useCallback(()=>{o(C=>[...C,{units:64}])},[]),x=U.useCallback(()=>{o(C=>C.slice(0,-1))},[]),w=U.useCallback((C,S)=>{o(E=>E.map((A,k)=>k===C?{units:S}:A))},[]);return{model:e,trainingHistory:n,isTraining:i,trainingParams:l,setTrainingParams:u,startTraining:f,stopTraining:d,showModelSummary:m,predictDigit:h,cleanupModel:g,hiddenLayers:a,addHiddenLayer:b,removeHiddenLayer:x,updateHiddenLayer:w}},Lun=()=>{const{model:e,trainingHistory:t,isTraining:n,trainingParams:r,setTrainingParams:i,startTraining:s,stopTraining:a,showModelSummary:o,predictDigit:l,cleanupModel:u,hiddenLayers:c,addHiddenLayer:f,removeHiddenLayer:d,updateHiddenLayer:h}=Mun();return W.jsxs(Wy,{maxWidth:"lg",sx:{py:4},children:[W.jsx(mt,{variant:"h4",component:"h1",gutterBottom:!0,children:"Handwritten Digit Recognition"}),W.jsx(Dun,{}),W.jsx(M1,{children:W.jsx(Iun,{model:e,trainingHistory:t,isTraining:n,trainingParams:r,setTrainingParams:i,startTraining:s,stopTraining:a,showModelSummary:o,hiddenLayers:c,addHiddenLayer:f,removeHiddenLayer:d,updateHiddenLayer:h})}),W.jsx(M1,{children:W.jsx(Fun,{model:e,predictDigit:l,cleanupModel:u})})]})},Pun={"info-section__text":"_info-section__text_177yd_1"},Bun=()=>W.jsxs(Hl,{sx:{p:3,mb:3},children:[W.jsx(mt,{variant:"h5",component:"h2",gutterBottom:!0,children:"Fashion MNIST Classification"}),W.jsxs(Xt,{className:Pun["info-section__text"],children:[W.jsxs(mt,{children:["This is a simple neural network that learns to classify fashion items from the Fashion MNIST dataset, using a subset provided by the ",W.jsx(kx,{href:"https://storage.googleapis.com/jmstore/TensorFlowJS/EdX/TrainingData/mnist-fashion.js",children:"Google course"})," and 2D Convolutional layers. The dataset consists of 28x28 grayscale images of clothes and accessories. They use more parameters and take longer to train. Expect something around 5 seconds per epoch using the default parameters on an average laptop."]}),W.jsx(mt,{children:"You can customize the model head architecture (which will be added after the convolutional layers) by adding or removing hidden layers and adjusting their units. The model will learn to classify images into 10 categories: T-shirt/top, Trouser, Pullover, Dress, Coat, Sandal, Shirt, Sneaker, Bag, and Ankle boot."}),W.jsx(mt,{children:"After training, you can evaluate the model by selecting random test images and seeing how well it classifies them. You can also google for fashion items pictures on web and drop the image url in the dropzone on the left side, adjust the image position, scale and rotation and see how well the model classifies them. The model will struggle with items that are significantly different from the training data. Images will have color inverted so black items with white background will be better recognized as they are more similar to training images."})]})]}),B2={"training-section__architecture":"_training-section__architecture_1tehk_1","training-section__layer-buttons":"_training-section__layer-buttons_1tehk_4","training-section__parameters":"_training-section__parameters_1tehk_8","training-section__button-group":"_training-section__button-group_1tehk_11","training-section__chart-container":"_training-section__chart-container_1tehk_16","training-section__params-grid":"_training-section__params-grid_1tehk_19"},zun=({model:e,isTraining:t,trainingHistory:n,trainingParams:r,hiddenLayers:i,setTrainingParams:s,addHiddenLayer:a,removeHiddenLayer:o,updateHiddenLayer:l,startTraining:u,stopTraining:c,showModelSummary:f})=>{const d={labels:n.map((h,m)=>m+1),datasets:[{label:"Training Accuracy",data:n.map(h=>h.accuracy),fill:!1,borderColor:"rgb(75, 192, 192)",tension:.1,yAxisID:"y"},{label:"Validation Accuracy",data:n.map(h=>h.validationAccuracy),fill:!1,borderColor:"rgb(54, 162, 235)",tension:.1,yAxisID:"y"},{label:"Training Loss",data:n.map(h=>h.loss),fill:!1,borderColor:"rgb(255, 99, 132)",tension:.1,yAxisID:"y1"},{label:"Validation Loss",data:n.map(h=>h.validationLoss),fill:!1,borderColor:"rgb(255, 159, 64)",tension:.1,yAxisID:"y1"}]};return W.jsxs(Hl,{sx:{p:3,mb:3},children:[W.jsx(mt,{variant:"h5",component:"h2",gutterBottom:!0,children:"Training Section"}),W.jsxs(Xt,{className:B2["training-section__architecture"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Model Architecture"}),W.jsxs(rx,{spacing:2,children:[i.map((h,m)=>W.jsx(ka,{fullWidth:!0,label:`Hidden Layer ${m+1} Units`,type:"number",value:h.units,onChange:g=>l(m,parseInt(g.target.value,10)),slotProps:{htmlInput:{min:1}}},m)),W.jsxs(Xt,{className:B2["training-section__layer-buttons"],children:[W.jsx(yh,{variant:"outlined",startIcon:W.jsx(uMe,{}),onClick:a,children:"Add Layer"}),W.jsx(yh,{variant:"outlined",startIcon:W.jsx(cMe,{}),onClick:o,disabled:i.length<=1,children:"Remove Layer"})]})]})]}),W.jsxs(Xt,{className:B2["training-section__parameters"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Training Parameters"}),W.jsxs(Xt,{className:B2["training-section__params-grid"],children:[W.jsx(ah,{size:{xs:12,sm:6},children:W.jsx(ka,{fullWidth:!0,label:"Learning Rate",type:"number",value:r.learningRate,onChange:h=>s({...r,learningRate:parseFloat(h.target.value)}),slotProps:{htmlInput:{step:.001,min:0}}})}),W.jsx(ah,{size:{xs:12,sm:6},children:W.jsxs($x,{fullWidth:!0,children:[W.jsx(Ex,{children:"Optimizer"}),W.jsx(ay,{value:r.optimizer,label:"Optimizer",onChange:h=>s({...r,optimizer:h.target.value}),children:Object.values(Da).map(h=>W.jsx(gh,{value:h,children:h},h))})]})}),W.jsx(ah,{size:{xs:12,sm:6},children:W.jsxs($x,{fullWidth:!0,children:[W.jsx(Ex,{children:"Loss Function"}),W.jsx(ay,{value:r.loss,label:"Loss Function",onChange:h=>s({...r,loss:h.target.value}),children:Object.values(eN).map(h=>W.jsx(gh,{value:h,children:h},h))})]})}),W.jsx(ah,{size:{xs:12,sm:6},children:W.jsx(ka,{fullWidth:!0,label:"Epochs",type:"number",value:r.epochs,onChange:h=>s({...r,epochs:parseInt(h.target.value,10)}),slotProps:{htmlInput:{min:1}}})}),W.jsx(ah,{size:{xs:12,sm:6},children:W.jsx(ka,{fullWidth:!0,label:"Batch Size",type:"number",value:r.batchSize,onChange:h=>s({...r,batchSize:parseInt(h.target.value,10)}),slotProps:{htmlInput:{min:1}}})}),W.jsx(ah,{size:{xs:12,sm:6},children:W.jsx(ka,{fullWidth:!0,label:"Validation Split",type:"number",value:r.validationSplit,onChange:h=>s({...r,validationSplit:parseFloat(h.target.value)}),slotProps:{htmlInput:{step:.1,min:0,max:1}}})})]})]}),W.jsxs(Xt,{className:B2["training-section__button-group"],children:[W.jsx(yh,{onClick:u,disabled:t,children:"Start Training"}),W.jsx(yh,{onClick:c,disabled:!t,variant:"outlined",color:"secondary",children:"Stop Training"}),W.jsx(yh,{onClick:f,disabled:!e,variant:"outlined",children:"Show Model Details"})]}),n.length>0&&W.jsxs(Xt,{children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Training Progress"}),W.jsx(Xt,{className:B2["training-section__chart-container"],children:W.jsx(xZ,{data:d,options:{responsive:!0,maintainAspectRatio:!1,animation:!1,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Accuracy"},min:0,max:1},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Loss"},grid:{drawOnChartArea:!1}},x:{title:{display:!0,text:"Epoch"}}},plugins:{tooltip:{enabled:!0}}}})})]})]})},uu={"evaluation-section__canvas-container":"_evaluation-section__canvas-container_1rodb_1","evaluation-section__canvases":"_evaluation-section__canvases_1rodb_7","evaluation-section__dropzone-canvas":"_evaluation-section__dropzone-canvas_1rodb_18","evaluation-section__dropzone-canvas--dragging":"_evaluation-section__dropzone-canvas--dragging_1rodb_24","evaluation-section__dropzone-canvas--idle":"_evaluation-section__dropzone-canvas--idle_1rodb_27","evaluation-section__dropzone-controls":"_evaluation-section__dropzone-controls_1rodb_30","evaluation-section__preview-canvas":"_evaluation-section__preview-canvas_1rodb_42","evaluation-section__preview-container":"_evaluation-section__preview-container_1rodb_47","evaluation-section__button-group":"_evaluation-section__button-group_1rodb_53","evaluation-section__predictions":"_evaluation-section__predictions_1rodb_63","evaluation-section__predictions-title":"_evaluation-section__predictions-title_1rodb_66","evaluation-section__predictions-item":"_evaluation-section__predictions-item_1rodb_69"},jun=({model:e,predictImage:t,cleanupModel:n})=>{const r=U.useRef(null),i=U.useRef(null),[s,a]=U.useState(null),[o,l]=U.useState(1),[u,c]=U.useState(0),[f,d]=U.useState({x:0,y:0}),[h,m]=U.useState(!1),[g,b]=U.useState({x:0,y:0}),[x,w]=U.useState(null),C=U.useCallback(M=>{M.strokeStyle="#333",M.lineWidth=.5;const F=10;for(let R=0;R<=280;R+=F)M.beginPath(),M.moveTo(R,0),M.lineTo(R,280),M.stroke();for(let R=0;R<=280;R+=F)M.beginPath(),M.moveTo(0,R),M.lineTo(280,R),M.stroke()},[]),S=U.useCallback(()=>{const M=r.current,F=i.current;if(!M||!F)return;const R=F.getContext("2d");if(!R)return;R.fillStyle="#000",R.fillRect(0,0,F.width,F.height);const j=document.createElement("canvas");j.width=28,j.height=28;const H=j.getContext("2d");if(!H)return;H.drawImage(M,0,0,28,28);const z=H.getImageData(0,0,28,28).data,Y=10;for(let Z=0;Z<28;Z++)for(let Q=0;Q<28;Q++){const se=(Z*28+Q)*4,de=255-Math.floor((z[se]+z[se+1]+z[se+2])/3);R.fillStyle=`rgb(${de},${de},${de})`,R.fillRect(Q*Y,Z*Y,Y,Y)}C(R)},[C]),E=U.useCallback(()=>{const M=r.current;if(!M)return;const F=M.getContext("2d");if(!F)return;if(F.fillStyle="#fff",F.fillRect(0,0,M.width,M.height),!s){F.fillStyle="#666",F.font="16px Arial",F.textAlign="center",F.fillText("Drop an image URL here",M.width/2,M.height/2);return}const R=new Image;R.crossOrigin="anonymous",R.onload=()=>{!M||!F||(F.save(),F.translate(M.width/2+f.x,M.height/2+f.y),F.rotate(u*Math.PI/180),F.scale(o,o),F.drawImage(R,-R.width/2,-R.height/2),F.restore(),S())},R.src=s},[s,o,u,f,S]);Ko.useEffect(()=>{E()},[E]);const A=M=>{M.preventDefault()},k=M=>{M.preventDefault();const F=M.dataTransfer.getData("text");F.match(/^https?:\/\//i)&&a(F)},N=M=>{m(!0),b({x:M.clientX-f.x,y:M.clientY-f.y})},I=M=>{h&&d({x:M.clientX-g.x,y:M.clientY-g.y})},T=()=>{m(!1)},D=async()=>{var R;if(!s)return;const M=i.current;if(!M)return;const F=(R=M.getContext("2d"))==null?void 0:R.getImageData(0,0,M.width,M.height);if(F){const j=await t(F);w(j)}},L=async()=>{a(null),l(1),c(0),d({x:0,y:0});const{TRAINING_DATA:M}=await $L(async()=>{const{TRAINING_DATA:Z}=await import("./fashion-mnist-DJnX4jVq.js");return{TRAINING_DATA:Z}},[]),F=Math.floor(Math.random()*M.inputs.length),R=M.inputs[F],j=i.current;if(!j)return;const H=j.getContext("2d");if(!H)return;H.fillStyle="#000",H.fillRect(0,0,j.width,j.height);const G=10;for(let Z=0;Z<28;Z++)for(let Q=0;Q<28;Q++){const se=R[Z*28+Q];H.fillStyle=`rgb(${se},${se},${se})`,H.fillRect(Q*G,Z*G,G,G)}C(H);const z=H.getImageData(0,0,j.width,j.height),Y=await t(z);w(Y)},P=()=>{n(),w(null)};return W.jsxs(Hl,{sx:{p:3},children:[W.jsx(mt,{variant:"h5",component:"h2",gutterBottom:!0,children:"Evaluation Section"}),W.jsxs(rx,{spacing:3,children:[W.jsxs(Xt,{className:uu["evaluation-section__canvases"],children:[W.jsxs(Xt,{className:uu["evaluation-section__canvas-container"],children:[W.jsxs(Xt,{children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"Drop image URL"}),W.jsx("canvas",{ref:r,width:560,height:560,onDragOver:A,onDrop:k,onMouseDown:N,onMouseMove:I,onMouseUp:T,onMouseLeave:T,className:`${uu["evaluation-section__dropzone-canvas"]} ${h?uu["evaluation-section__dropzone-canvas--dragging"]:uu["evaluation-section__dropzone-canvas--idle"]}`})]}),W.jsxs(Xt,{className:uu["evaluation-section__dropzone-controls"],children:[W.jsxs(Xt,{children:[W.jsx(mt,{variant:"body2",gutterBottom:!0,children:"Scale"}),W.jsx(pue,{size:"small",value:o,onChange:(M,F)=>l(F),min:.1,max:2,step:.1,valueLabelDisplay:"auto",disabled:!s})]}),W.jsxs(Xt,{children:[W.jsx(mt,{variant:"body2",gutterBottom:!0,children:"Rotation"}),W.jsx(pue,{size:"small",value:u,onChange:(M,F)=>c(F),min:-180,max:180,valueLabelDisplay:"auto",disabled:!s})]})]}),W.jsxs(Xt,{className:uu["evaluation-section__button-group"],children:[W.jsx(yh,{onClick:D,disabled:!s,children:"Predict Image"}),W.jsx(yh,{variant:"outlined",color:"secondary",onClick:P,disabled:!e,children:"Cleanup Model"})]})]}),W.jsxs(Xt,{className:uu["evaluation-section__preview-container"],children:[W.jsx(mt,{variant:"h6",gutterBottom:!0,children:"28x28 Preview (Model Input)"}),W.jsx("canvas",{ref:i,width:280,height:280,className:uu["evaluation-section__preview-canvas"]}),W.jsx(yh,{onClick:L,children:"Random Test Image"})]})]}),x&&x.length>0&&W.jsxs(Xt,{className:uu["evaluation-section__predictions"],children:[W.jsx(mt,{variant:"h6",className:uu["evaluation-section__predictions-title"],children:"Top Predictions"}),x.map((M,F)=>W.jsxs(mt,{variant:"body1",className:uu["evaluation-section__predictions-item"],children:[F+1,". ",M.label," (",(M.probability*100).toFixed(2),"% confidence)"]},F))]})]})]})},Uun=()=>{const[e,t]=U.useState(null),[n,r]=U.useState([]),[i,s]=U.useState(!1),[a,o]=U.useState([]),[l,u]=U.useState([{units:128}]),[c,f]=U.useState({scale:1,rotation:0,x:0,y:0}),[d,h]=U.useState({learningRate:.01,optimizer:Da.ADAM,loss:eN.CCE,validationSplit:.2,batchSize:256,epochs:15}),m=U.useCallback(()=>{const N=EK();return N.add(gce({inputShape:[28,28,1],filters:32,kernelSize:3,strides:1,activation:"relu",padding:"same"})),N.add(yce({poolSize:2,strides:2})),N.add(gce({filters:64,kernelSize:3,strides:1,activation:"relu",padding:"same"})),N.add(yce({poolSize:2,strides:2})),N.add(Wrt()),l.forEach(I=>{N.add(lx({units:I.units,activation:"relu"}))}),N.add(lx({units:10,activation:"softmax"})),N},[l]),g=U.useCallback(async()=>{s(!0),r([]),e&&e.dispose();const N=m();t(N);try{const{TRAINING_DATA:I,FASHION_LABELS:T}=await $L(async()=>{const{TRAINING_DATA:j,FASHION_LABELS:H}=await import("./fashion-mnist-DJnX4jVq.js");return{TRAINING_DATA:j,FASHION_LABELS:H}},[]);o(T);const D=I.inputs,L=I.outputs;W6(D,L);const P=ct(D,255),M=nm(ji(L,"int32"),10),F=P.reshape([D.length,28,28,1]);let R;switch(d.optimizer){case Da.ADAM:default:R=no.adam(d.learningRate);break;case Da.SGD:R=no.sgd(d.learningRate);break;case Da.RMS:R=no.rmsprop(d.learningRate);break}N.compile({optimizer:R,loss:d.loss,metrics:["accuracy"]}),console.log("Training started, this might take a long time..."),await N.fit(F,M,{shuffle:!0,batchSize:d.batchSize,validationSplit:d.validationSplit,epochs:d.epochs,callbacks:{onEpochEnd:async(j,H)=>{if(H){const G=H.acc??0,z=H.loss??0,Y=H.val_acc??0,Z=H.val_loss??0;r(Q=>[...Q,{epoch:j,accuracy:G,loss:z,validationAccuracy:Y,validationLoss:Z}])}await f_()}}}),Jt([F,M,P])}catch(I){console.error("Training failed:",I)}finally{s(!1)}},[d,e,m]),b=U.useCallback(()=>{console.log("Stopping training..."),e&&(e.stopTraining=!0)},[e]),x=U.useCallback(async N=>e?he(()=>{let T=GO(N,1).expandDims(0);T=Tl.resizeBilinear(T,[28,28]),c.rotation!==0&&(T=Tl.rotateWithOffset(T,c.rotation*Math.PI/180,0));const L=T.div(255).reshape([1,28,28,1]),M=e.predict(L).dataSync();return Array.from(M).map((F,R)=>({label:a[R],probability:F})).sort((F,R)=>R.probability-F.probability).slice(0,2)}):null,[e,c,a]),w=U.useCallback(()=>{e&&nE.show.modelSummary({name:"Model Summary"},e)},[e]),C=U.useCallback(()=>{e&&(e.dispose(),t(null)),r([])},[e]),S=U.useCallback(N=>{f(I=>({...I,...N}))},[]),E=U.useCallback(()=>{u(N=>[...N,{units:64}])},[]),A=U.useCallback(()=>{u(N=>N.slice(0,-1))},[]),k=U.useCallback((N,I)=>{u(T=>T.map((D,L)=>L===N?{units:I}:D))},[]);return{model:e,trainingHistory:n,isTraining:i,trainingParams:d,imageTransform:c,setTrainingParams:h,startTraining:g,stopTraining:b,showModelSummary:w,predictImage:x,cleanupModel:C,hiddenLayers:l,addHiddenLayer:E,removeHiddenLayer:A,updateHiddenLayer:k,updateImageTransform:S}},Vun=()=>{const{model:e,isTraining:t,trainingHistory:n,trainingParams:r,hiddenLayers:i,predictImage:s,setTrainingParams:a,startTraining:o,stopTraining:l,showModelSummary:u,cleanupModel:c,addHiddenLayer:f,removeHiddenLayer:d,updateHiddenLayer:h}=Uun(),m=g=>{a(b=>({...b,...g}))};return W.jsxs(Wy,{maxWidth:"lg",sx:{py:4},children:[W.jsx(mt,{variant:"h4",component:"h1",gutterBottom:!0,children:"Fashion Recognition"}),W.jsx(M1,{children:W.jsx(Bun,{})}),W.jsx(M1,{children:W.jsx(zun,{model:e,isTraining:t,trainingHistory:n,trainingParams:r,hiddenLayers:i,setTrainingParams:m,addHiddenLayer:f,removeHiddenLayer:d,updateHiddenLayer:h,startTraining:o,stopTraining:l,showModelSummary:u})}),W.jsx(M1,{children:W.jsx(jun,{model:e,predictImage:s,cleanupModel:c})})]})},Wun=[{path:"/",label:"Home"},{path:"/smart-cam",label:"Smart Cam"},{path:"/house-pricing",label:"House Pricing"},{path:"/handwritten-digit",label:"Handwritten Digit"},{path:"/fashion-recognition",label:"Fashion Recognition"}],Hun=()=>W.jsx(Dje,{position:"static",children:W.jsx(Wy,{maxWidth:"lg",children:W.jsxs(QWe,{disableGutters:!0,sx:{flexDirection:"column",alignItems:"stretch",py:1},children:[W.jsx(mt,{variant:"h5",component:"h1",sx:{mb:1,color:"white"},children:"TensorFlow.js Exercises"}),W.jsx(Xt,{sx:{display:"flex",gap:2},children:Wun.map(e=>W.jsx(kx,{component:bx,to:e.path,sx:{color:"white",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:e.label},e.path))})]})})}),Gun=[{path:"/",label:"Home"},{path:"/smart-cam",label:"Smart Cam"},{path:"/house-pricing",label:"House Pricing"}],qun=()=>{const t=Tm().pathname.split("/").filter(Boolean);return t.length===0?null:W.jsx(Wy,{maxWidth:"lg",sx:{py:1.5,backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:1,mt:2,mb:2,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:W.jsxs(uUe,{"aria-label":"breadcrumb",children:[W.jsxs(kx,{component:bx,to:"/",sx:{display:"flex",alignItems:"center",color:"text.primary"},children:[W.jsx(K2e,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),t.map((n,r)=>{var a;const i=`/${t.slice(0,r+1).join("/")}`,s=((a=Gun.find(o=>o.path===i))==null?void 0:a.label)||n.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ");return r===t.length-1?W.jsx(mt,{color:"text.secondary",children:s},n):W.jsx(kx,{component:bx,to:i,color:"inherit",children:s},n)})]})})};function Xun(){return W.jsx(j7e,{basename:"/edx-google-ai-tensorflow/",children:W.jsxs(Xt,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)"},children:[W.jsx(Hun,{}),W.jsx(qun,{}),W.jsx(Xt,{component:"main",sx:{flex:1},children:W.jsxs(y7e,{children:[W.jsx(z2,{path:"/",element:W.jsx(aHe,{})}),W.jsx(z2,{path:"/smart-cam",element:W.jsx(Xvt,{})}),W.jsx(z2,{path:"/house-pricing",element:W.jsx(Nun,{})}),W.jsx(z2,{path:"/handwritten-digit",element:W.jsx(Lun,{})}),W.jsx(z2,{path:"/fashion-recognition",element:W.jsx(Vun,{})})]})})]})})}E9e.createRoot(document.getElementById("root")).render(W.jsx(Ko.StrictMode,{children:W.jsx(Xun,{})}));
